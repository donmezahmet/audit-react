var PS=Object.defineProperty;var Gb=t=>{throw TypeError(t)};var RS=(t,e,n)=>e in t?PS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ut=(t,e,n)=>RS(t,typeof e!="symbol"?e+"":e,n),Sm=(t,e,n)=>e.has(t)||Gb("Cannot "+n);var pe=(t,e,n)=>(Sm(t,e,"read from private field"),n?n.call(t):e.get(t)),_t=(t,e,n)=>e.has(t)?Gb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),lt=(t,e,n,s)=>(Sm(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),Vt=(t,e,n)=>(Sm(t,e,"access private method"),n);var cf=(t,e,n,s)=>({set _(i){lt(t,e,i,n)},get _(){return pe(t,e,s)}});function TS(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ug(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cm={exports:{}},Uc={},Am={exports:{}},Kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xb;function DS(){if(Xb)return Kt;Xb=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function m(T){return T===null||typeof T!="object"?null:(T=p&&T[p]||T["@@iterator"],typeof T=="function"?T:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function v(T,W,z){this.props=T,this.context=W,this.refs=b,this.updater=z||g}v.prototype.isReactComponent={},v.prototype.setState=function(T,W){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,W,"setState")},v.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function w(){}w.prototype=v.prototype;function N(T,W,z){this.props=T,this.context=W,this.refs=b,this.updater=z||g}var k=N.prototype=new w;k.constructor=N,y(k,v.prototype),k.isPureReactComponent=!0;var j=Array.isArray,S=Object.prototype.hasOwnProperty,C={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function M(T,W,z){var Q,Z={},V=null,ie=null;if(W!=null)for(Q in W.ref!==void 0&&(ie=W.ref),W.key!==void 0&&(V=""+W.key),W)S.call(W,Q)&&!O.hasOwnProperty(Q)&&(Z[Q]=W[Q]);var de=arguments.length-2;if(de===1)Z.children=z;else if(1<de){for(var fe=Array(de),ve=0;ve<de;ve++)fe[ve]=arguments[ve+2];Z.children=fe}if(T&&T.defaultProps)for(Q in de=T.defaultProps,de)Z[Q]===void 0&&(Z[Q]=de[Q]);return{$$typeof:t,type:T,key:V,ref:ie,props:Z,_owner:C.current}}function B(T,W){return{$$typeof:t,type:T.type,key:W,ref:T.ref,props:T.props,_owner:T._owner}}function I(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function R(T){var W={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(z){return W[z]})}var P=/\/+/g;function q(T,W){return typeof T=="object"&&T!==null&&T.key!=null?R(""+T.key):W.toString(36)}function H(T,W,z,Q,Z){var V=typeof T;(V==="undefined"||V==="boolean")&&(T=null);var ie=!1;if(T===null)ie=!0;else switch(V){case"string":case"number":ie=!0;break;case"object":switch(T.$$typeof){case t:case e:ie=!0}}if(ie)return ie=T,Z=Z(ie),T=Q===""?"."+q(ie,0):Q,j(Z)?(z="",T!=null&&(z=T.replace(P,"$&/")+"/"),H(Z,W,z,"",function(ve){return ve})):Z!=null&&(I(Z)&&(Z=B(Z,z+(!Z.key||ie&&ie.key===Z.key?"":(""+Z.key).replace(P,"$&/")+"/")+T)),W.push(Z)),1;if(ie=0,Q=Q===""?".":Q+":",j(T))for(var de=0;de<T.length;de++){V=T[de];var fe=Q+q(V,de);ie+=H(V,W,z,fe,Z)}else if(fe=m(T),typeof fe=="function")for(T=fe.call(T),de=0;!(V=T.next()).done;)V=V.value,fe=Q+q(V,de++),ie+=H(V,W,z,fe,Z);else if(V==="object")throw W=String(T),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return ie}function G(T,W,z){if(T==null)return T;var Q=[],Z=0;return H(T,Q,"","",function(V){return W.call(z,V,Z++)}),Q}function ne(T){if(T._status===-1){var W=T._result;W=W(),W.then(function(z){(T._status===0||T._status===-1)&&(T._status=1,T._result=z)},function(z){(T._status===0||T._status===-1)&&(T._status=2,T._result=z)}),T._status===-1&&(T._status=0,T._result=W)}if(T._status===1)return T._result.default;throw T._result}var X={current:null},ee={transition:null},Y={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:ee,ReactCurrentOwner:C};function U(){throw Error("act(...) is not supported in production builds of React.")}return Kt.Children={map:G,forEach:function(T,W,z){G(T,function(){W.apply(this,arguments)},z)},count:function(T){var W=0;return G(T,function(){W++}),W},toArray:function(T){return G(T,function(W){return W})||[]},only:function(T){if(!I(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Kt.Component=v,Kt.Fragment=n,Kt.Profiler=i,Kt.PureComponent=N,Kt.StrictMode=s,Kt.Suspense=u,Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Kt.act=U,Kt.cloneElement=function(T,W,z){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var Q=y({},T.props),Z=T.key,V=T.ref,ie=T._owner;if(W!=null){if(W.ref!==void 0&&(V=W.ref,ie=C.current),W.key!==void 0&&(Z=""+W.key),T.type&&T.type.defaultProps)var de=T.type.defaultProps;for(fe in W)S.call(W,fe)&&!O.hasOwnProperty(fe)&&(Q[fe]=W[fe]===void 0&&de!==void 0?de[fe]:W[fe])}var fe=arguments.length-2;if(fe===1)Q.children=z;else if(1<fe){de=Array(fe);for(var ve=0;ve<fe;ve++)de[ve]=arguments[ve+2];Q.children=de}return{$$typeof:t,type:T.type,key:Z,ref:V,props:Q,_owner:ie}},Kt.createContext=function(T){return T={$$typeof:o,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:a,_context:T},T.Consumer=T},Kt.createElement=M,Kt.createFactory=function(T){var W=M.bind(null,T);return W.type=T,W},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(T){return{$$typeof:c,render:T}},Kt.isValidElement=I,Kt.lazy=function(T){return{$$typeof:h,_payload:{_status:-1,_result:T},_init:ne}},Kt.memo=function(T,W){return{$$typeof:f,type:T,compare:W===void 0?null:W}},Kt.startTransition=function(T){var W=ee.transition;ee.transition={};try{T()}finally{ee.transition=W}},Kt.unstable_act=U,Kt.useCallback=function(T,W){return X.current.useCallback(T,W)},Kt.useContext=function(T){return X.current.useContext(T)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(T){return X.current.useDeferredValue(T)},Kt.useEffect=function(T,W){return X.current.useEffect(T,W)},Kt.useId=function(){return X.current.useId()},Kt.useImperativeHandle=function(T,W,z){return X.current.useImperativeHandle(T,W,z)},Kt.useInsertionEffect=function(T,W){return X.current.useInsertionEffect(T,W)},Kt.useLayoutEffect=function(T,W){return X.current.useLayoutEffect(T,W)},Kt.useMemo=function(T,W){return X.current.useMemo(T,W)},Kt.useReducer=function(T,W,z){return X.current.useReducer(T,W,z)},Kt.useRef=function(T){return X.current.useRef(T)},Kt.useState=function(T){return X.current.useState(T)},Kt.useSyncExternalStore=function(T,W,z){return X.current.useSyncExternalStore(T,W,z)},Kt.useTransition=function(){return X.current.useTransition()},Kt.version="18.3.1",Kt}var Qb;function bh(){return Qb||(Qb=1,Am.exports=DS()),Am.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jb;function IS(){if(Jb)return Uc;Jb=1;var t=bh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(c,u,f){var h,p={},m=null,g=null;f!==void 0&&(m=""+f),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(g=u.ref);for(h in u)s.call(u,h)&&!a.hasOwnProperty(h)&&(p[h]=u[h]);if(c&&c.defaultProps)for(h in u=c.defaultProps,u)p[h]===void 0&&(p[h]=u[h]);return{$$typeof:e,type:c,key:m,ref:g,props:p,_owner:i.current}}return Uc.Fragment=n,Uc.jsx=o,Uc.jsxs=o,Uc}var Zb;function FS(){return Zb||(Zb=1,Cm.exports=IS()),Cm.exports}var r=FS(),L=bh();const wt=Ug(L),zS=TS({__proto__:null,default:wt},[L]);var uf={},Em={exports:{}},Jr={},Lm={exports:{}},Om={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1;function BS(){return e1||(e1=1,(function(t){function e(ee,Y){var U=ee.length;ee.push(Y);e:for(;0<U;){var T=U-1>>>1,W=ee[T];if(0<i(W,Y))ee[T]=Y,ee[U]=W,U=T;else break e}}function n(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var Y=ee[0],U=ee.pop();if(U!==Y){ee[0]=U;e:for(var T=0,W=ee.length,z=W>>>1;T<z;){var Q=2*(T+1)-1,Z=ee[Q],V=Q+1,ie=ee[V];if(0>i(Z,U))V<W&&0>i(ie,Z)?(ee[T]=ie,ee[V]=U,T=V):(ee[T]=Z,ee[Q]=U,T=Q);else if(V<W&&0>i(ie,U))ee[T]=ie,ee[V]=U,T=V;else break e}}return Y}function i(ee,Y){var U=ee.sortIndex-Y.sortIndex;return U!==0?U:ee.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],f=[],h=1,p=null,m=3,g=!1,y=!1,b=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ee){for(var Y=n(f);Y!==null;){if(Y.callback===null)s(f);else if(Y.startTime<=ee)s(f),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(f)}}function j(ee){if(b=!1,k(ee),!y)if(n(u)!==null)y=!0,ne(S);else{var Y=n(f);Y!==null&&X(j,Y.startTime-ee)}}function S(ee,Y){y=!1,b&&(b=!1,w(M),M=-1),g=!0;var U=m;try{for(k(Y),p=n(u);p!==null&&(!(p.expirationTime>Y)||ee&&!R());){var T=p.callback;if(typeof T=="function"){p.callback=null,m=p.priorityLevel;var W=T(p.expirationTime<=Y);Y=t.unstable_now(),typeof W=="function"?p.callback=W:p===n(u)&&s(u),k(Y)}else s(u);p=n(u)}if(p!==null)var z=!0;else{var Q=n(f);Q!==null&&X(j,Q.startTime-Y),z=!1}return z}finally{p=null,m=U,g=!1}}var C=!1,O=null,M=-1,B=5,I=-1;function R(){return!(t.unstable_now()-I<B)}function P(){if(O!==null){var ee=t.unstable_now();I=ee;var Y=!0;try{Y=O(!0,ee)}finally{Y?q():(C=!1,O=null)}}else C=!1}var q;if(typeof N=="function")q=function(){N(P)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,G=H.port2;H.port1.onmessage=P,q=function(){G.postMessage(null)}}else q=function(){v(P,0)};function ne(ee){O=ee,C||(C=!0,q())}function X(ee,Y){M=v(function(){ee(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,ne(S))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(ee){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var U=m;m=Y;try{return ee()}finally{m=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,Y){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var U=m;m=ee;try{return Y()}finally{m=U}},t.unstable_scheduleCallback=function(ee,Y,U){var T=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?T+U:T):U=T,ee){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=U+W,ee={id:h++,callback:Y,priorityLevel:ee,startTime:U,expirationTime:W,sortIndex:-1},U>T?(ee.sortIndex=U,e(f,ee),n(u)===null&&ee===n(f)&&(b?(w(M),M=-1):b=!0,X(j,U-T))):(ee.sortIndex=W,e(u,ee),y||g||(y=!0,ne(S))),ee},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(ee){var Y=m;return function(){var U=m;m=Y;try{return ee.apply(this,arguments)}finally{m=U}}}})(Om)),Om}var t1;function qS(){return t1||(t1=1,Lm.exports=BS()),Lm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n1;function WS(){if(n1)return Jr;n1=1;var t=bh(),e=qS();function n(l){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+l,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function a(l,d){o(l,d),o(l+"Capture",d)}function o(l,d){for(i[l]=d,l=0;l<d.length;l++)s.add(d[l])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(l){return u.call(p,l)?!0:u.call(h,l)?!1:f.test(l)?p[l]=!0:(h[l]=!0,!1)}function g(l,d,x,_){if(x!==null&&x.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return _?!1:x!==null?!x.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function y(l,d,x,_){if(d===null||typeof d>"u"||g(l,d,x,_))return!0;if(_)return!1;if(x!==null)switch(x.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function b(l,d,x,_,A,D,$){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=_,this.attributeNamespace=A,this.mustUseProperty=x,this.propertyName=l,this.type=d,this.sanitizeURL=D,this.removeEmptyString=$}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){v[l]=new b(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var d=l[0];v[d]=new b(d,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){v[l]=new b(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){v[l]=new b(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){v[l]=new b(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){v[l]=new b(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){v[l]=new b(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){v[l]=new b(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){v[l]=new b(l,5,!1,l.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function N(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var d=l.replace(w,N);v[d]=new b(d,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var d=l.replace(w,N);v[d]=new b(d,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var d=l.replace(w,N);v[d]=new b(d,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){v[l]=new b(l,1,!1,l.toLowerCase(),null,!1,!1)}),v.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){v[l]=new b(l,1,!1,l.toLowerCase(),null,!0,!0)});function k(l,d,x,_){var A=v.hasOwnProperty(d)?v[d]:null;(A!==null?A.type!==0:_||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(y(d,x,A,_)&&(x=null),_||A===null?m(d)&&(x===null?l.removeAttribute(d):l.setAttribute(d,""+x)):A.mustUseProperty?l[A.propertyName]=x===null?A.type===3?!1:"":x:(d=A.attributeName,_=A.attributeNamespace,x===null?l.removeAttribute(d):(A=A.type,x=A===3||A===4&&x===!0?"":""+x,_?l.setAttributeNS(_,d,x):l.setAttribute(d,x))))}var j=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),C=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),R=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),ee=Symbol.iterator;function Y(l){return l===null||typeof l!="object"?null:(l=ee&&l[ee]||l["@@iterator"],typeof l=="function"?l:null)}var U=Object.assign,T;function W(l){if(T===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);T=d&&d[1]||""}return`
`+T+l}var z=!1;function Q(l,d){if(!l||z)return"";z=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Pe){var _=Pe}Reflect.construct(l,[],d)}else{try{d.call()}catch(Pe){_=Pe}l.call(d.prototype)}else{try{throw Error()}catch(Pe){_=Pe}l()}}catch(Pe){if(Pe&&_&&typeof Pe.stack=="string"){for(var A=Pe.stack.split(`
`),D=_.stack.split(`
`),$=A.length-1,ce=D.length-1;1<=$&&0<=ce&&A[$]!==D[ce];)ce--;for(;1<=$&&0<=ce;$--,ce--)if(A[$]!==D[ce]){if($!==1||ce!==1)do if($--,ce--,0>ce||A[$]!==D[ce]){var xe=`
`+A[$].replace(" at new "," at ");return l.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",l.displayName)),xe}while(1<=$&&0<=ce);break}}}finally{z=!1,Error.prepareStackTrace=x}return(l=l?l.displayName||l.name:"")?W(l):""}function Z(l){switch(l.tag){case 5:return W(l.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return l=Q(l.type,!1),l;case 11:return l=Q(l.type.render,!1),l;case 1:return l=Q(l.type,!0),l;default:return""}}function V(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case O:return"Fragment";case C:return"Portal";case B:return"Profiler";case M:return"StrictMode";case q:return"Suspense";case H:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case R:return(l.displayName||"Context")+".Consumer";case I:return(l._context.displayName||"Context")+".Provider";case P:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case G:return d=l.displayName||null,d!==null?d:V(l.type)||"Memo";case ne:d=l._payload,l=l._init;try{return V(l(d))}catch{}}return null}function ie(l){var d=l.type;switch(l.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=d.render,l=l.displayName||l.name||"",d.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(d);case 8:return d===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function de(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function fe(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function ve(l){var d=fe(l)?"checked":"value",x=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),_=""+l[d];if(!l.hasOwnProperty(d)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var A=x.get,D=x.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return A.call(this)},set:function($){_=""+$,D.call(this,$)}}),Object.defineProperty(l,d,{enumerable:x.enumerable}),{getValue:function(){return _},setValue:function($){_=""+$},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function He(l){l._valueTracker||(l._valueTracker=ve(l))}function $e(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var x=d.getValue(),_="";return l&&(_=fe(l)?l.checked?"true":"false":l.value),l=_,l!==x?(d.setValue(l),!0):!1}function st(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function _e(l,d){var x=d.checked;return U({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??l._wrapperState.initialChecked})}function it(l,d){var x=d.defaultValue==null?"":d.defaultValue,_=d.checked!=null?d.checked:d.defaultChecked;x=de(d.value!=null?d.value:x),l._wrapperState={initialChecked:_,initialValue:x,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function rt(l,d){d=d.checked,d!=null&&k(l,"checked",d,!1)}function at(l,d){rt(l,d);var x=de(d.value),_=d.type;if(x!=null)_==="number"?(x===0&&l.value===""||l.value!=x)&&(l.value=""+x):l.value!==""+x&&(l.value=""+x);else if(_==="submit"||_==="reset"){l.removeAttribute("value");return}d.hasOwnProperty("value")?oe(l,d.type,x):d.hasOwnProperty("defaultValue")&&oe(l,d.type,de(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(l.defaultChecked=!!d.defaultChecked)}function Oe(l,d,x){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var _=d.type;if(!(_!=="submit"&&_!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+l._wrapperState.initialValue,x||d===l.value||(l.value=d),l.defaultValue=d}x=l.name,x!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,x!==""&&(l.name=x)}function oe(l,d,x){(d!=="number"||st(l.ownerDocument)!==l)&&(x==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+x&&(l.defaultValue=""+x))}var ge=Array.isArray;function Ne(l,d,x,_){if(l=l.options,d){d={};for(var A=0;A<x.length;A++)d["$"+x[A]]=!0;for(x=0;x<l.length;x++)A=d.hasOwnProperty("$"+l[x].value),l[x].selected!==A&&(l[x].selected=A),A&&_&&(l[x].defaultSelected=!0)}else{for(x=""+de(x),d=null,A=0;A<l.length;A++){if(l[A].value===x){l[A].selected=!0,_&&(l[A].defaultSelected=!0);return}d!==null||l[A].disabled||(d=l[A])}d!==null&&(d.selected=!0)}}function Ae(l,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return U({},d,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function ke(l,d){var x=d.value;if(x==null){if(x=d.children,d=d.defaultValue,x!=null){if(d!=null)throw Error(n(92));if(ge(x)){if(1<x.length)throw Error(n(93));x=x[0]}d=x}d==null&&(d=""),x=d}l._wrapperState={initialValue:de(x)}}function re(l,d){var x=de(d.value),_=de(d.defaultValue);x!=null&&(x=""+x,x!==l.value&&(l.value=x),d.defaultValue==null&&l.defaultValue!==x&&(l.defaultValue=x)),_!=null&&(l.defaultValue=""+_)}function te(l){var d=l.textContent;d===l._wrapperState.initialValue&&d!==""&&d!==null&&(l.value=d)}function J(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(l,d){return l==null||l==="http://www.w3.org/1999/xhtml"?J(d):l==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Ce,ze=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,x,_,A){MSApp.execUnsafeLocalFunction(function(){return l(d,x,_,A)})}:l})(function(l,d){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=d;else{for(Ce=Ce||document.createElement("div"),Ce.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Ce.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;d.firstChild;)l.appendChild(d.firstChild)}});function Fe(l,d){if(d){var x=l.firstChild;if(x&&x===l.lastChild&&x.nodeType===3){x.nodeValue=d;return}}l.textContent=d}var Ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ht=["Webkit","ms","Moz","O"];Object.keys(Ue).forEach(function(l){ht.forEach(function(d){d=d+l.charAt(0).toUpperCase()+l.substring(1),Ue[d]=Ue[l]})});function Te(l,d,x){return d==null||typeof d=="boolean"||d===""?"":x||typeof d!="number"||d===0||Ue.hasOwnProperty(l)&&Ue[l]?(""+d).trim():d+"px"}function St(l,d){l=l.style;for(var x in d)if(d.hasOwnProperty(x)){var _=x.indexOf("--")===0,A=Te(x,d[x],_);x==="float"&&(x="cssFloat"),_?l.setProperty(x,A):l[x]=A}}var Dt=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yr(l,d){if(d){if(Dt[l]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function It(l,d){if(l.indexOf("-")===-1)return typeof d.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sn=null;function yn(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Sr=null,Ct=null,Xt=null;function Qt(l){if(l=Ac(l)){if(typeof Sr!="function")throw Error(n(280));var d=l.stateNode;d&&(d=Nu(d),Sr(l.stateNode,l.type,d))}}function vn(l){Ct?Xt?Xt.push(l):Xt=[l]:Ct=l}function At(){if(Ct){var l=Ct,d=Xt;if(Xt=Ct=null,Qt(l),d)for(l=0;l<d.length;l++)Qt(d[l])}}function Jt(l,d){return l(d)}function ct(){}var rn=!1;function Tt(l,d,x){if(rn)return l(d,x);rn=!0;try{return Jt(l,d,x)}finally{rn=!1,(Ct!==null||Xt!==null)&&(ct(),At())}}function Ft(l,d){var x=l.stateNode;if(x===null)return null;var _=Nu(x);if(_===null)return null;x=_[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(l=l.type,_=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!_;break e;default:l=!1}if(l)return null;if(x&&typeof x!="function")throw Error(n(231,d,typeof x));return x}var jt=!1;if(c)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){jt=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{jt=!1}function zt(l,d,x,_,A,D,$,ce,xe){var Pe=Array.prototype.slice.call(arguments,3);try{d.apply(x,Pe)}catch(Ge){this.onError(Ge)}}var hn=!1,Ht=null,Cn=!1,Nn=null,xn={onError:function(l){hn=!0,Ht=l}};function ei(l,d,x,_,A,D,$,ce,xe){hn=!1,Ht=null,zt.apply(xn,arguments)}function Mt(l,d,x,_,A,D,$,ce,xe){if(ei.apply(this,arguments),hn){if(hn){var Pe=Ht;hn=!1,Ht=null}else throw Error(n(198));Cn||(Cn=!0,Nn=Pe)}}function Cr(l){var d=l,x=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(x=d.return),l=d.return;while(l)}return d.tag===3?x:null}function le(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function We(l){if(Cr(l)!==l)throw Error(n(188))}function Ve(l){var d=l.alternate;if(!d){if(d=Cr(l),d===null)throw Error(n(188));return d!==l?null:l}for(var x=l,_=d;;){var A=x.return;if(A===null)break;var D=A.alternate;if(D===null){if(_=A.return,_!==null){x=_;continue}break}if(A.child===D.child){for(D=A.child;D;){if(D===x)return We(A),l;if(D===_)return We(A),d;D=D.sibling}throw Error(n(188))}if(x.return!==_.return)x=A,_=D;else{for(var $=!1,ce=A.child;ce;){if(ce===x){$=!0,x=A,_=D;break}if(ce===_){$=!0,_=A,x=D;break}ce=ce.sibling}if(!$){for(ce=D.child;ce;){if(ce===x){$=!0,x=D,_=A;break}if(ce===_){$=!0,_=D,x=A;break}ce=ce.sibling}if(!$)throw Error(n(189))}}if(x.alternate!==_)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?l:d}function ot(l){return l=Ve(l),l!==null?Ut(l):null}function Ut(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var d=Ut(l);if(d!==null)return d;l=l.sibling}return null}var bn=e.unstable_scheduleCallback,tr=e.unstable_cancelCallback,Ts=e.unstable_shouldYield,In=e.unstable_requestPaint,on=e.unstable_now,bi=e.unstable_getCurrentPriorityLevel,vs=e.unstable_ImmediatePriority,Ga=e.unstable_UserBlockingPriority,ti=e.unstable_NormalPriority,Xa=e.unstable_LowPriority,ni=e.unstable_IdlePriority,bs=null,An=null;function Vn(l){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(bs,l,void 0,(l.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:ri,Fn=Math.log,vr=Math.LN2;function ri(l){return l>>>=0,l===0?32:31-(Fn(l)/vr|0)|0}var Qn=64,Ds=4194304;function lr(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function bt(l,d){var x=l.pendingLanes;if(x===0)return 0;var _=0,A=l.suspendedLanes,D=l.pingedLanes,$=x&268435455;if($!==0){var ce=$&~A;ce!==0?_=lr(ce):(D&=$,D!==0&&(_=lr(D)))}else $=x&~A,$!==0?_=lr($):D!==0&&(_=lr(D));if(_===0)return 0;if(d!==0&&d!==_&&(d&A)===0&&(A=_&-_,D=d&-d,A>=D||A===16&&(D&4194240)!==0))return d;if((_&4)!==0&&(_|=x&16),d=l.entangledLanes,d!==0)for(l=l.entanglements,d&=_;0<d;)x=31-En(d),A=1<<x,_|=l[x],d&=~A;return _}function br(l,d){switch(l){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ir(l,d){for(var x=l.suspendedLanes,_=l.pingedLanes,A=l.expirationTimes,D=l.pendingLanes;0<D;){var $=31-En(D),ce=1<<$,xe=A[$];xe===-1?((ce&x)===0||(ce&_)!==0)&&(A[$]=br(ce,d)):xe<=d&&(l.expiredLanes|=ce),D&=~ce}}function se(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function we(){var l=Qn;return Qn<<=1,(Qn&4194240)===0&&(Qn=64),l}function Se(l){for(var d=[],x=0;31>x;x++)d.push(l);return d}function ae(l,d,x){l.pendingLanes|=d,d!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,d=31-En(d),l[d]=x}function je(l,d){var x=l.pendingLanes&~d;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=d,l.mutableReadLanes&=d,l.entangledLanes&=d,d=l.entanglements;var _=l.eventTimes;for(l=l.expirationTimes;0<x;){var A=31-En(x),D=1<<A;d[A]=0,_[A]=-1,l[A]=-1,x&=~D}}function ye(l,d){var x=l.entangledLanes|=d;for(l=l.entanglements;x;){var _=31-En(x),A=1<<_;A&d|l[_]&d&&(l[_]|=d),x&=~A}}var De=0;function kt(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var Jn,wr,Yn,Is,Fs,Qa=!1,Jo=[],Ar=null,fs=null,zs=null,Ji=new Map,gt=new Map,pn=[],Zo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ws(l,d){switch(l){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Ji.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":gt.delete(d.pointerId)}}function wi(l,d,x,_,A,D){return l===null||l.nativeEvent!==D?(l={blockedOn:d,domEventName:x,eventSystemFlags:_,nativeEvent:D,targetContainers:[A]},d!==null&&(d=Ac(d),d!==null&&wr(d)),l):(l.eventSystemFlags|=_,d=l.targetContainers,A!==null&&d.indexOf(A)===-1&&d.push(A),l)}function tp(l,d,x,_,A){switch(d){case"focusin":return Ar=wi(Ar,l,d,x,_,A),!0;case"dragenter":return fs=wi(fs,l,d,x,_,A),!0;case"mouseover":return zs=wi(zs,l,d,x,_,A),!0;case"pointerover":var D=A.pointerId;return Ji.set(D,wi(Ji.get(D)||null,l,d,x,_,A)),!0;case"gotpointercapture":return D=A.pointerId,gt.set(D,wi(gt.get(D)||null,l,d,x,_,A)),!0}return!1}function ji(l){var d=ao(l.target);if(d!==null){var x=Cr(d);if(x!==null){if(d=x.tag,d===13){if(d=le(x),d!==null){l.blockedOn=d,Fs(l.priority,function(){Yn(x)});return}}else if(d===3&&x.stateNode.current.memoizedState.isDehydrated){l.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}l.blockedOn=null}function el(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var x=xc(l.domEventName,l.eventSystemFlags,d[0],l.nativeEvent);if(x===null){x=l.nativeEvent;var _=new x.constructor(x.type,x);Sn=_,x.target.dispatchEvent(_),Sn=null}else return d=Ac(x),d!==null&&wr(d),l.blockedOn=x,!1;d.shift()}return!0}function nu(l,d,x){el(l)&&x.delete(d)}function nr(){Qa=!1,Ar!==null&&el(Ar)&&(Ar=null),fs!==null&&el(fs)&&(fs=null),zs!==null&&el(zs)&&(zs=null),Ji.forEach(nu),gt.forEach(nu)}function Ja(l,d){l.blockedOn===d&&(l.blockedOn=null,Qa||(Qa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nr)))}function Zi(l){function d(A){return Ja(A,l)}if(0<Jo.length){Ja(Jo[0],l);for(var x=1;x<Jo.length;x++){var _=Jo[x];_.blockedOn===l&&(_.blockedOn=null)}}for(Ar!==null&&Ja(Ar,l),fs!==null&&Ja(fs,l),zs!==null&&Ja(zs,l),Ji.forEach(d),gt.forEach(d),x=0;x<pn.length;x++)_=pn[x],_.blockedOn===l&&(_.blockedOn=null);for(;0<pn.length&&(x=pn[0],x.blockedOn===null);)ji(x),x.blockedOn===null&&pn.shift()}var Bs=j.ReactCurrentBatchConfig,Za=!0;function si(l,d,x,_){var A=De,D=Bs.transition;Bs.transition=null;try{De=1,eo(l,d,x,_)}finally{De=A,Bs.transition=D}}function ru(l,d,x,_){var A=De,D=Bs.transition;Bs.transition=null;try{De=4,eo(l,d,x,_)}finally{De=A,Bs.transition=D}}function eo(l,d,x,_){if(Za){var A=xc(l,d,x,_);if(A===null)xp(l,d,_,hs,x),ws(l,_);else if(tp(A,l,d,x,_))_.stopPropagation();else if(ws(l,_),d&4&&-1<Zo.indexOf(l)){for(;A!==null;){var D=Ac(A);if(D!==null&&Jn(D),D=xc(l,d,x,_),D===null&&xp(l,d,_,hs,x),D===A)break;A=D}A!==null&&_.stopPropagation()}else xp(l,d,_,null,x)}}var hs=null;function xc(l,d,x,_){if(hs=null,l=yn(_),l=ao(l),l!==null)if(d=Cr(l),d===null)l=null;else if(x=d.tag,x===13){if(l=le(d),l!==null)return l;l=null}else if(x===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null);return hs=l,null}function ii(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bi()){case vs:return 1;case Ga:return 4;case ti:case Xa:return 16;case ni:return 536870912;default:return 16}default:return 16}}var Vr=null,Ni=null,tl=null;function su(){if(tl)return tl;var l,d=Ni,x=d.length,_,A="value"in Vr?Vr.value:Vr.textContent,D=A.length;for(l=0;l<x&&d[l]===A[l];l++);var $=x-l;for(_=1;_<=$&&d[x-_]===A[D-_];_++);return tl=A.slice(l,1<_?1-_:void 0)}function nl(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function rl(){return!0}function iu(){return!1}function Fr(l){function d(x,_,A,D,$){this._reactName=x,this._targetInst=A,this.type=_,this.nativeEvent=D,this.target=$,this.currentTarget=null;for(var ce in l)l.hasOwnProperty(ce)&&(x=l[ce],this[ce]=x?x(D):D[ce]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?rl:iu,this.isPropagationStopped=iu,this}return U(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=rl)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=rl)},persist:function(){},isPersistent:rl}),d}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=Fr(ea),to=U({},ea,{view:0,detail:0}),il=Fr(to),au,ta,no,ai=U({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ol,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==no&&(no&&l.type==="mousemove"?(au=l.screenX-no.screenX,ta=l.screenY-no.screenY):ta=au=0,no=l),au)},movementY:function(l){return"movementY"in l?l.movementY:ta}}),al=Fr(ai),qs=U({},ai,{dataTransfer:0}),ro=Fr(qs),na=U({},to,{relatedTarget:0}),_i=Fr(na),np=U({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),rp=Fr(np),sp=U({},ea,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),ip=Fr(sp),so=U({},ea,{data:0}),$t=Fr(so),gc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ou={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=lu[l])?!!d[l]:!1}function ol(){return cu}var du=U({},to,{key:function(l){if(l.key){var d=gc[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=nl(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?ou[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ol,charCode:function(l){return l.type==="keypress"?nl(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?nl(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),uu=Fr(du),fu=U({},ai,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yc=Fr(fu),hu=U({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ol}),pu=Fr(hu),mu=U({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),E=Fr(mu),K=U({},ai,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),he=Fr(K),Me=[9,13,27,32],me=c&&"CompositionEvent"in window,Ke=null;c&&"documentMode"in document&&(Ke=document.documentMode);var Xe=c&&"TextEvent"in window&&!Ke,tt=c&&(!me||Ke&&8<Ke&&11>=Ke),Qe=" ",nt=!1;function mt(l,d){switch(l){case"keyup":return Me.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zt(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var jr=!1;function vc(l,d){switch(l){case"compositionend":return Zt(d);case"keypress":return d.which!==32?null:(nt=!0,Qe);case"textInput":return l=d.data,l===Qe&&nt?null:l;default:return null}}function io(l,d){if(jr)return l==="compositionend"||!me&&mt(l,d)?(l=su(),tl=Ni=Vr=null,jr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return tt&&d.locale!=="ko"?null:d.data;default:return null}}var ap={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vy(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!ap[l.type]:d==="textarea"}function Yy(l,d,x,_){vn(_),d=bu(d,"onChange"),0<d.length&&(x=new sl("onChange","change",null,x,_),l.push({event:x,listeners:d}))}var bc=null,wc=null;function P4(l){uv(l,0)}function xu(l){var d=fl(l);if($e(d))return l}function R4(l,d){if(l==="change")return d}var Ky=!1;if(c){var op;if(c){var lp="oninput"in document;if(!lp){var Gy=document.createElement("div");Gy.setAttribute("oninput","return;"),lp=typeof Gy.oninput=="function"}op=lp}else op=!1;Ky=op&&(!document.documentMode||9<document.documentMode)}function Xy(){bc&&(bc.detachEvent("onpropertychange",Qy),wc=bc=null)}function Qy(l){if(l.propertyName==="value"&&xu(wc)){var d=[];Yy(d,wc,l,yn(l)),Tt(P4,d)}}function T4(l,d,x){l==="focusin"?(Xy(),bc=d,wc=x,bc.attachEvent("onpropertychange",Qy)):l==="focusout"&&Xy()}function D4(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return xu(wc)}function I4(l,d){if(l==="click")return xu(d)}function F4(l,d){if(l==="input"||l==="change")return xu(d)}function z4(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Ws=typeof Object.is=="function"?Object.is:z4;function jc(l,d){if(Ws(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var x=Object.keys(l),_=Object.keys(d);if(x.length!==_.length)return!1;for(_=0;_<x.length;_++){var A=x[_];if(!u.call(d,A)||!Ws(l[A],d[A]))return!1}return!0}function Jy(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Zy(l,d){var x=Jy(l);l=0;for(var _;x;){if(x.nodeType===3){if(_=l+x.textContent.length,l<=d&&_>=d)return{node:x,offset:d-l};l=_}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Jy(x)}}function ev(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?ev(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function tv(){for(var l=window,d=st();d instanceof l.HTMLIFrameElement;){try{var x=typeof d.contentWindow.location.href=="string"}catch{x=!1}if(x)l=d.contentWindow;else break;d=st(l.document)}return d}function cp(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}function B4(l){var d=tv(),x=l.focusedElem,_=l.selectionRange;if(d!==x&&x&&x.ownerDocument&&ev(x.ownerDocument.documentElement,x)){if(_!==null&&cp(x)){if(d=_.start,l=_.end,l===void 0&&(l=d),"selectionStart"in x)x.selectionStart=d,x.selectionEnd=Math.min(l,x.value.length);else if(l=(d=x.ownerDocument||document)&&d.defaultView||window,l.getSelection){l=l.getSelection();var A=x.textContent.length,D=Math.min(_.start,A);_=_.end===void 0?D:Math.min(_.end,A),!l.extend&&D>_&&(A=_,_=D,D=A),A=Zy(x,D);var $=Zy(x,_);A&&$&&(l.rangeCount!==1||l.anchorNode!==A.node||l.anchorOffset!==A.offset||l.focusNode!==$.node||l.focusOffset!==$.offset)&&(d=d.createRange(),d.setStart(A.node,A.offset),l.removeAllRanges(),D>_?(l.addRange(d),l.extend($.node,$.offset)):(d.setEnd($.node,$.offset),l.addRange(d)))}}for(d=[],l=x;l=l.parentNode;)l.nodeType===1&&d.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<d.length;x++)l=d[x],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var q4=c&&"documentMode"in document&&11>=document.documentMode,ll=null,dp=null,Nc=null,up=!1;function nv(l,d,x){var _=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;up||ll==null||ll!==st(_)||(_=ll,"selectionStart"in _&&cp(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Nc&&jc(Nc,_)||(Nc=_,_=bu(dp,"onSelect"),0<_.length&&(d=new sl("onSelect","select",null,d,x),l.push({event:d,listeners:_}),d.target=ll)))}function gu(l,d){var x={};return x[l.toLowerCase()]=d.toLowerCase(),x["Webkit"+l]="webkit"+d,x["Moz"+l]="moz"+d,x}var cl={animationend:gu("Animation","AnimationEnd"),animationiteration:gu("Animation","AnimationIteration"),animationstart:gu("Animation","AnimationStart"),transitionend:gu("Transition","TransitionEnd")},fp={},rv={};c&&(rv=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function yu(l){if(fp[l])return fp[l];if(!cl[l])return l;var d=cl[l],x;for(x in d)if(d.hasOwnProperty(x)&&x in rv)return fp[l]=d[x];return l}var sv=yu("animationend"),iv=yu("animationiteration"),av=yu("animationstart"),ov=yu("transitionend"),lv=new Map,cv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ra(l,d){lv.set(l,d),a(d,[l])}for(var hp=0;hp<cv.length;hp++){var pp=cv[hp],W4=pp.toLowerCase(),U4=pp[0].toUpperCase()+pp.slice(1);ra(W4,"on"+U4)}ra(sv,"onAnimationEnd"),ra(iv,"onAnimationIteration"),ra(av,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(ov,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H4=new Set("cancel close invalid load scroll toggle".split(" ").concat(_c));function dv(l,d,x){var _=l.type||"unknown-event";l.currentTarget=x,Mt(_,d,void 0,l),l.currentTarget=null}function uv(l,d){d=(d&4)!==0;for(var x=0;x<l.length;x++){var _=l[x],A=_.event;_=_.listeners;e:{var D=void 0;if(d)for(var $=_.length-1;0<=$;$--){var ce=_[$],xe=ce.instance,Pe=ce.currentTarget;if(ce=ce.listener,xe!==D&&A.isPropagationStopped())break e;dv(A,ce,Pe),D=xe}else for($=0;$<_.length;$++){if(ce=_[$],xe=ce.instance,Pe=ce.currentTarget,ce=ce.listener,xe!==D&&A.isPropagationStopped())break e;dv(A,ce,Pe),D=xe}}}if(Cn)throw l=Nn,Cn=!1,Nn=null,l}function Ln(l,d){var x=d[jp];x===void 0&&(x=d[jp]=new Set);var _=l+"__bubble";x.has(_)||(fv(d,l,2,!1),x.add(_))}function mp(l,d,x){var _=0;d&&(_|=4),fv(x,l,_,d)}var vu="_reactListening"+Math.random().toString(36).slice(2);function kc(l){if(!l[vu]){l[vu]=!0,s.forEach(function(x){x!=="selectionchange"&&(H4.has(x)||mp(x,!1,l),mp(x,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[vu]||(d[vu]=!0,mp("selectionchange",!1,d))}}function fv(l,d,x,_){switch(ii(d)){case 1:var A=si;break;case 4:A=ru;break;default:A=eo}x=A.bind(null,d,x,l),A=void 0,!jt||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(A=!0),_?A!==void 0?l.addEventListener(d,x,{capture:!0,passive:A}):l.addEventListener(d,x,!0):A!==void 0?l.addEventListener(d,x,{passive:A}):l.addEventListener(d,x,!1)}function xp(l,d,x,_,A){var D=_;if((d&1)===0&&(d&2)===0&&_!==null)e:for(;;){if(_===null)return;var $=_.tag;if($===3||$===4){var ce=_.stateNode.containerInfo;if(ce===A||ce.nodeType===8&&ce.parentNode===A)break;if($===4)for($=_.return;$!==null;){var xe=$.tag;if((xe===3||xe===4)&&(xe=$.stateNode.containerInfo,xe===A||xe.nodeType===8&&xe.parentNode===A))return;$=$.return}for(;ce!==null;){if($=ao(ce),$===null)return;if(xe=$.tag,xe===5||xe===6){_=D=$;continue e}ce=ce.parentNode}}_=_.return}Tt(function(){var Pe=D,Ge=yn(x),Je=[];e:{var Ye=lv.get(l);if(Ye!==void 0){var dt=sl,pt=l;switch(l){case"keypress":if(nl(x)===0)break e;case"keydown":case"keyup":dt=uu;break;case"focusin":pt="focus",dt=_i;break;case"focusout":pt="blur",dt=_i;break;case"beforeblur":case"afterblur":dt=_i;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=ro;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=pu;break;case sv:case iv:case av:dt=rp;break;case ov:dt=E;break;case"scroll":dt=il;break;case"wheel":dt=he;break;case"copy":case"cut":case"paste":dt=ip;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=yc}var xt=(d&4)!==0,Kn=!xt&&l==="scroll",Ee=xt?Ye!==null?Ye+"Capture":null:Ye;xt=[];for(var be=Pe,Le;be!==null;){Le=be;var et=Le.stateNode;if(Le.tag===5&&et!==null&&(Le=et,Ee!==null&&(et=Ft(be,Ee),et!=null&&xt.push(Sc(be,et,Le)))),Kn)break;be=be.return}0<xt.length&&(Ye=new dt(Ye,pt,null,x,Ge),Je.push({event:Ye,listeners:xt}))}}if((d&7)===0){e:{if(Ye=l==="mouseover"||l==="pointerover",dt=l==="mouseout"||l==="pointerout",Ye&&x!==Sn&&(pt=x.relatedTarget||x.fromElement)&&(ao(pt)||pt[ki]))break e;if((dt||Ye)&&(Ye=Ge.window===Ge?Ge:(Ye=Ge.ownerDocument)?Ye.defaultView||Ye.parentWindow:window,dt?(pt=x.relatedTarget||x.toElement,dt=Pe,pt=pt?ao(pt):null,pt!==null&&(Kn=Cr(pt),pt!==Kn||pt.tag!==5&&pt.tag!==6)&&(pt=null)):(dt=null,pt=Pe),dt!==pt)){if(xt=al,et="onMouseLeave",Ee="onMouseEnter",be="mouse",(l==="pointerout"||l==="pointerover")&&(xt=yc,et="onPointerLeave",Ee="onPointerEnter",be="pointer"),Kn=dt==null?Ye:fl(dt),Le=pt==null?Ye:fl(pt),Ye=new xt(et,be+"leave",dt,x,Ge),Ye.target=Kn,Ye.relatedTarget=Le,et=null,ao(Ge)===Pe&&(xt=new xt(Ee,be+"enter",pt,x,Ge),xt.target=Le,xt.relatedTarget=Kn,et=xt),Kn=et,dt&&pt)t:{for(xt=dt,Ee=pt,be=0,Le=xt;Le;Le=dl(Le))be++;for(Le=0,et=Ee;et;et=dl(et))Le++;for(;0<be-Le;)xt=dl(xt),be--;for(;0<Le-be;)Ee=dl(Ee),Le--;for(;be--;){if(xt===Ee||Ee!==null&&xt===Ee.alternate)break t;xt=dl(xt),Ee=dl(Ee)}xt=null}else xt=null;dt!==null&&hv(Je,Ye,dt,xt,!1),pt!==null&&Kn!==null&&hv(Je,Kn,pt,xt,!0)}}e:{if(Ye=Pe?fl(Pe):window,dt=Ye.nodeName&&Ye.nodeName.toLowerCase(),dt==="select"||dt==="input"&&Ye.type==="file")var yt=R4;else if(Vy(Ye))if(Ky)yt=F4;else{yt=D4;var Et=T4}else(dt=Ye.nodeName)&&dt.toLowerCase()==="input"&&(Ye.type==="checkbox"||Ye.type==="radio")&&(yt=I4);if(yt&&(yt=yt(l,Pe))){Yy(Je,yt,x,Ge);break e}Et&&Et(l,Ye,Pe),l==="focusout"&&(Et=Ye._wrapperState)&&Et.controlled&&Ye.type==="number"&&oe(Ye,"number",Ye.value)}switch(Et=Pe?fl(Pe):window,l){case"focusin":(Vy(Et)||Et.contentEditable==="true")&&(ll=Et,dp=Pe,Nc=null);break;case"focusout":Nc=dp=ll=null;break;case"mousedown":up=!0;break;case"contextmenu":case"mouseup":case"dragend":up=!1,nv(Je,x,Ge);break;case"selectionchange":if(q4)break;case"keydown":case"keyup":nv(Je,x,Ge)}var Lt;if(me)e:{switch(l){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else jr?mt(l,x)&&(Pt="onCompositionEnd"):l==="keydown"&&x.keyCode===229&&(Pt="onCompositionStart");Pt&&(tt&&x.locale!=="ko"&&(jr||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&jr&&(Lt=su()):(Vr=Ge,Ni="value"in Vr?Vr.value:Vr.textContent,jr=!0)),Et=bu(Pe,Pt),0<Et.length&&(Pt=new $t(Pt,l,null,x,Ge),Je.push({event:Pt,listeners:Et}),Lt?Pt.data=Lt:(Lt=Zt(x),Lt!==null&&(Pt.data=Lt)))),(Lt=Xe?vc(l,x):io(l,x))&&(Pe=bu(Pe,"onBeforeInput"),0<Pe.length&&(Ge=new $t("onBeforeInput","beforeinput",null,x,Ge),Je.push({event:Ge,listeners:Pe}),Ge.data=Lt))}uv(Je,d)})}function Sc(l,d,x){return{instance:l,listener:d,currentTarget:x}}function bu(l,d){for(var x=d+"Capture",_=[];l!==null;){var A=l,D=A.stateNode;A.tag===5&&D!==null&&(A=D,D=Ft(l,x),D!=null&&_.unshift(Sc(l,D,A)),D=Ft(l,d),D!=null&&_.push(Sc(l,D,A))),l=l.return}return _}function dl(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function hv(l,d,x,_,A){for(var D=d._reactName,$=[];x!==null&&x!==_;){var ce=x,xe=ce.alternate,Pe=ce.stateNode;if(xe!==null&&xe===_)break;ce.tag===5&&Pe!==null&&(ce=Pe,A?(xe=Ft(x,D),xe!=null&&$.unshift(Sc(x,xe,ce))):A||(xe=Ft(x,D),xe!=null&&$.push(Sc(x,xe,ce)))),x=x.return}$.length!==0&&l.push({event:d,listeners:$})}var $4=/\r\n?/g,V4=/\u0000|\uFFFD/g;function pv(l){return(typeof l=="string"?l:""+l).replace($4,`
`).replace(V4,"")}function wu(l,d,x){if(d=pv(d),pv(l)!==d&&x)throw Error(n(425))}function ju(){}var gp=null,yp=null;function vp(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var bp=typeof setTimeout=="function"?setTimeout:void 0,Y4=typeof clearTimeout=="function"?clearTimeout:void 0,mv=typeof Promise=="function"?Promise:void 0,K4=typeof queueMicrotask=="function"?queueMicrotask:typeof mv<"u"?function(l){return mv.resolve(null).then(l).catch(G4)}:bp;function G4(l){setTimeout(function(){throw l})}function wp(l,d){var x=d,_=0;do{var A=x.nextSibling;if(l.removeChild(x),A&&A.nodeType===8)if(x=A.data,x==="/$"){if(_===0){l.removeChild(A),Zi(d);return}_--}else x!=="$"&&x!=="$?"&&x!=="$!"||_++;x=A}while(x);Zi(d)}function sa(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return l}function xv(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var x=l.data;if(x==="$"||x==="$!"||x==="$?"){if(d===0)return l;d--}else x==="/$"&&d++}l=l.previousSibling}return null}var ul=Math.random().toString(36).slice(2),oi="__reactFiber$"+ul,Cc="__reactProps$"+ul,ki="__reactContainer$"+ul,jp="__reactEvents$"+ul,X4="__reactListeners$"+ul,Q4="__reactHandles$"+ul;function ao(l){var d=l[oi];if(d)return d;for(var x=l.parentNode;x;){if(d=x[ki]||x[oi]){if(x=d.alternate,d.child!==null||x!==null&&x.child!==null)for(l=xv(l);l!==null;){if(x=l[oi])return x;l=xv(l)}return d}l=x,x=l.parentNode}return null}function Ac(l){return l=l[oi]||l[ki],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function fl(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function Nu(l){return l[Cc]||null}var Np=[],hl=-1;function ia(l){return{current:l}}function On(l){0>hl||(l.current=Np[hl],Np[hl]=null,hl--)}function _n(l,d){hl++,Np[hl]=l.current,l.current=d}var aa={},Er=ia(aa),Yr=ia(!1),oo=aa;function pl(l,d){var x=l.type.contextTypes;if(!x)return aa;var _=l.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===d)return _.__reactInternalMemoizedMaskedChildContext;var A={},D;for(D in x)A[D]=d[D];return _&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=d,l.__reactInternalMemoizedMaskedChildContext=A),A}function Kr(l){return l=l.childContextTypes,l!=null}function _u(){On(Yr),On(Er)}function gv(l,d,x){if(Er.current!==aa)throw Error(n(168));_n(Er,d),_n(Yr,x)}function yv(l,d,x){var _=l.stateNode;if(d=d.childContextTypes,typeof _.getChildContext!="function")return x;_=_.getChildContext();for(var A in _)if(!(A in d))throw Error(n(108,ie(l)||"Unknown",A));return U({},x,_)}function ku(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||aa,oo=Er.current,_n(Er,l),_n(Yr,Yr.current),!0}function vv(l,d,x){var _=l.stateNode;if(!_)throw Error(n(169));x?(l=yv(l,d,oo),_.__reactInternalMemoizedMergedChildContext=l,On(Yr),On(Er),_n(Er,l)):On(Yr),_n(Yr,x)}var Si=null,Su=!1,_p=!1;function bv(l){Si===null?Si=[l]:Si.push(l)}function J4(l){Su=!0,bv(l)}function oa(){if(!_p&&Si!==null){_p=!0;var l=0,d=De;try{var x=Si;for(De=1;l<x.length;l++){var _=x[l];do _=_(!0);while(_!==null)}Si=null,Su=!1}catch(A){throw Si!==null&&(Si=Si.slice(l+1)),bn(vs,oa),A}finally{De=d,_p=!1}}return null}var ml=[],xl=0,Cu=null,Au=0,js=[],Ns=0,lo=null,Ci=1,Ai="";function co(l,d){ml[xl++]=Au,ml[xl++]=Cu,Cu=l,Au=d}function wv(l,d,x){js[Ns++]=Ci,js[Ns++]=Ai,js[Ns++]=lo,lo=l;var _=Ci;l=Ai;var A=32-En(_)-1;_&=~(1<<A),x+=1;var D=32-En(d)+A;if(30<D){var $=A-A%5;D=(_&(1<<$)-1).toString(32),_>>=$,A-=$,Ci=1<<32-En(d)+A|x<<A|_,Ai=D+l}else Ci=1<<D|x<<A|_,Ai=l}function kp(l){l.return!==null&&(co(l,1),wv(l,1,0))}function Sp(l){for(;l===Cu;)Cu=ml[--xl],ml[xl]=null,Au=ml[--xl],ml[xl]=null;for(;l===lo;)lo=js[--Ns],js[Ns]=null,Ai=js[--Ns],js[Ns]=null,Ci=js[--Ns],js[Ns]=null}var ps=null,ms=null,Pn=!1,Us=null;function jv(l,d){var x=Cs(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=l,d=l.deletions,d===null?(l.deletions=[x],l.flags|=16):d.push(x)}function Nv(l,d){switch(l.tag){case 5:var x=l.type;return d=d.nodeType!==1||x.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(l.stateNode=d,ps=l,ms=sa(d.firstChild),!0):!1;case 6:return d=l.pendingProps===""||d.nodeType!==3?null:d,d!==null?(l.stateNode=d,ps=l,ms=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(x=lo!==null?{id:Ci,overflow:Ai}:null,l.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=Cs(18,null,null,0),x.stateNode=d,x.return=l,l.child=x,ps=l,ms=null,!0):!1;default:return!1}}function Cp(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Ap(l){if(Pn){var d=ms;if(d){var x=d;if(!Nv(l,d)){if(Cp(l))throw Error(n(418));d=sa(x.nextSibling);var _=ps;d&&Nv(l,d)?jv(_,x):(l.flags=l.flags&-4097|2,Pn=!1,ps=l)}}else{if(Cp(l))throw Error(n(418));l.flags=l.flags&-4097|2,Pn=!1,ps=l}}}function _v(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;ps=l}function Eu(l){if(l!==ps)return!1;if(!Pn)return _v(l),Pn=!0,!1;var d;if((d=l.tag!==3)&&!(d=l.tag!==5)&&(d=l.type,d=d!=="head"&&d!=="body"&&!vp(l.type,l.memoizedProps)),d&&(d=ms)){if(Cp(l))throw kv(),Error(n(418));for(;d;)jv(l,d),d=sa(d.nextSibling)}if(_v(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8){var x=l.data;if(x==="/$"){if(d===0){ms=sa(l.nextSibling);break e}d--}else x!=="$"&&x!=="$!"&&x!=="$?"||d++}l=l.nextSibling}ms=null}}else ms=ps?sa(l.stateNode.nextSibling):null;return!0}function kv(){for(var l=ms;l;)l=sa(l.nextSibling)}function gl(){ms=ps=null,Pn=!1}function Ep(l){Us===null?Us=[l]:Us.push(l)}var Z4=j.ReactCurrentBatchConfig;function Ec(l,d,x){if(l=x.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(n(309));var _=x.stateNode}if(!_)throw Error(n(147,l));var A=_,D=""+l;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===D?d.ref:(d=function($){var ce=A.refs;$===null?delete ce[D]:ce[D]=$},d._stringRef=D,d)}if(typeof l!="string")throw Error(n(284));if(!x._owner)throw Error(n(290,l))}return l}function Lu(l,d){throw l=Object.prototype.toString.call(d),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l))}function Sv(l){var d=l._init;return d(l._payload)}function Cv(l){function d(Ee,be){if(l){var Le=Ee.deletions;Le===null?(Ee.deletions=[be],Ee.flags|=16):Le.push(be)}}function x(Ee,be){if(!l)return null;for(;be!==null;)d(Ee,be),be=be.sibling;return null}function _(Ee,be){for(Ee=new Map;be!==null;)be.key!==null?Ee.set(be.key,be):Ee.set(be.index,be),be=be.sibling;return Ee}function A(Ee,be){return Ee=ma(Ee,be),Ee.index=0,Ee.sibling=null,Ee}function D(Ee,be,Le){return Ee.index=Le,l?(Le=Ee.alternate,Le!==null?(Le=Le.index,Le<be?(Ee.flags|=2,be):Le):(Ee.flags|=2,be)):(Ee.flags|=1048576,be)}function $(Ee){return l&&Ee.alternate===null&&(Ee.flags|=2),Ee}function ce(Ee,be,Le,et){return be===null||be.tag!==6?(be=bm(Le,Ee.mode,et),be.return=Ee,be):(be=A(be,Le),be.return=Ee,be)}function xe(Ee,be,Le,et){var yt=Le.type;return yt===O?Ge(Ee,be,Le.props.children,et,Le.key):be!==null&&(be.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===ne&&Sv(yt)===be.type)?(et=A(be,Le.props),et.ref=Ec(Ee,be,Le),et.return=Ee,et):(et=ef(Le.type,Le.key,Le.props,null,Ee.mode,et),et.ref=Ec(Ee,be,Le),et.return=Ee,et)}function Pe(Ee,be,Le,et){return be===null||be.tag!==4||be.stateNode.containerInfo!==Le.containerInfo||be.stateNode.implementation!==Le.implementation?(be=wm(Le,Ee.mode,et),be.return=Ee,be):(be=A(be,Le.children||[]),be.return=Ee,be)}function Ge(Ee,be,Le,et,yt){return be===null||be.tag!==7?(be=yo(Le,Ee.mode,et,yt),be.return=Ee,be):(be=A(be,Le),be.return=Ee,be)}function Je(Ee,be,Le){if(typeof be=="string"&&be!==""||typeof be=="number")return be=bm(""+be,Ee.mode,Le),be.return=Ee,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case S:return Le=ef(be.type,be.key,be.props,null,Ee.mode,Le),Le.ref=Ec(Ee,null,be),Le.return=Ee,Le;case C:return be=wm(be,Ee.mode,Le),be.return=Ee,be;case ne:var et=be._init;return Je(Ee,et(be._payload),Le)}if(ge(be)||Y(be))return be=yo(be,Ee.mode,Le,null),be.return=Ee,be;Lu(Ee,be)}return null}function Ye(Ee,be,Le,et){var yt=be!==null?be.key:null;if(typeof Le=="string"&&Le!==""||typeof Le=="number")return yt!==null?null:ce(Ee,be,""+Le,et);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case S:return Le.key===yt?xe(Ee,be,Le,et):null;case C:return Le.key===yt?Pe(Ee,be,Le,et):null;case ne:return yt=Le._init,Ye(Ee,be,yt(Le._payload),et)}if(ge(Le)||Y(Le))return yt!==null?null:Ge(Ee,be,Le,et,null);Lu(Ee,Le)}return null}function dt(Ee,be,Le,et,yt){if(typeof et=="string"&&et!==""||typeof et=="number")return Ee=Ee.get(Le)||null,ce(be,Ee,""+et,yt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case S:return Ee=Ee.get(et.key===null?Le:et.key)||null,xe(be,Ee,et,yt);case C:return Ee=Ee.get(et.key===null?Le:et.key)||null,Pe(be,Ee,et,yt);case ne:var Et=et._init;return dt(Ee,be,Le,Et(et._payload),yt)}if(ge(et)||Y(et))return Ee=Ee.get(Le)||null,Ge(be,Ee,et,yt,null);Lu(be,et)}return null}function pt(Ee,be,Le,et){for(var yt=null,Et=null,Lt=be,Pt=be=0,ur=null;Lt!==null&&Pt<Le.length;Pt++){Lt.index>Pt?(ur=Lt,Lt=null):ur=Lt.sibling;var ln=Ye(Ee,Lt,Le[Pt],et);if(ln===null){Lt===null&&(Lt=ur);break}l&&Lt&&ln.alternate===null&&d(Ee,Lt),be=D(ln,be,Pt),Et===null?yt=ln:Et.sibling=ln,Et=ln,Lt=ur}if(Pt===Le.length)return x(Ee,Lt),Pn&&co(Ee,Pt),yt;if(Lt===null){for(;Pt<Le.length;Pt++)Lt=Je(Ee,Le[Pt],et),Lt!==null&&(be=D(Lt,be,Pt),Et===null?yt=Lt:Et.sibling=Lt,Et=Lt);return Pn&&co(Ee,Pt),yt}for(Lt=_(Ee,Lt);Pt<Le.length;Pt++)ur=dt(Lt,Ee,Pt,Le[Pt],et),ur!==null&&(l&&ur.alternate!==null&&Lt.delete(ur.key===null?Pt:ur.key),be=D(ur,be,Pt),Et===null?yt=ur:Et.sibling=ur,Et=ur);return l&&Lt.forEach(function(xa){return d(Ee,xa)}),Pn&&co(Ee,Pt),yt}function xt(Ee,be,Le,et){var yt=Y(Le);if(typeof yt!="function")throw Error(n(150));if(Le=yt.call(Le),Le==null)throw Error(n(151));for(var Et=yt=null,Lt=be,Pt=be=0,ur=null,ln=Le.next();Lt!==null&&!ln.done;Pt++,ln=Le.next()){Lt.index>Pt?(ur=Lt,Lt=null):ur=Lt.sibling;var xa=Ye(Ee,Lt,ln.value,et);if(xa===null){Lt===null&&(Lt=ur);break}l&&Lt&&xa.alternate===null&&d(Ee,Lt),be=D(xa,be,Pt),Et===null?yt=xa:Et.sibling=xa,Et=xa,Lt=ur}if(ln.done)return x(Ee,Lt),Pn&&co(Ee,Pt),yt;if(Lt===null){for(;!ln.done;Pt++,ln=Le.next())ln=Je(Ee,ln.value,et),ln!==null&&(be=D(ln,be,Pt),Et===null?yt=ln:Et.sibling=ln,Et=ln);return Pn&&co(Ee,Pt),yt}for(Lt=_(Ee,Lt);!ln.done;Pt++,ln=Le.next())ln=dt(Lt,Ee,Pt,ln.value,et),ln!==null&&(l&&ln.alternate!==null&&Lt.delete(ln.key===null?Pt:ln.key),be=D(ln,be,Pt),Et===null?yt=ln:Et.sibling=ln,Et=ln);return l&&Lt.forEach(function(MS){return d(Ee,MS)}),Pn&&co(Ee,Pt),yt}function Kn(Ee,be,Le,et){if(typeof Le=="object"&&Le!==null&&Le.type===O&&Le.key===null&&(Le=Le.props.children),typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case S:e:{for(var yt=Le.key,Et=be;Et!==null;){if(Et.key===yt){if(yt=Le.type,yt===O){if(Et.tag===7){x(Ee,Et.sibling),be=A(Et,Le.props.children),be.return=Ee,Ee=be;break e}}else if(Et.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===ne&&Sv(yt)===Et.type){x(Ee,Et.sibling),be=A(Et,Le.props),be.ref=Ec(Ee,Et,Le),be.return=Ee,Ee=be;break e}x(Ee,Et);break}else d(Ee,Et);Et=Et.sibling}Le.type===O?(be=yo(Le.props.children,Ee.mode,et,Le.key),be.return=Ee,Ee=be):(et=ef(Le.type,Le.key,Le.props,null,Ee.mode,et),et.ref=Ec(Ee,be,Le),et.return=Ee,Ee=et)}return $(Ee);case C:e:{for(Et=Le.key;be!==null;){if(be.key===Et)if(be.tag===4&&be.stateNode.containerInfo===Le.containerInfo&&be.stateNode.implementation===Le.implementation){x(Ee,be.sibling),be=A(be,Le.children||[]),be.return=Ee,Ee=be;break e}else{x(Ee,be);break}else d(Ee,be);be=be.sibling}be=wm(Le,Ee.mode,et),be.return=Ee,Ee=be}return $(Ee);case ne:return Et=Le._init,Kn(Ee,be,Et(Le._payload),et)}if(ge(Le))return pt(Ee,be,Le,et);if(Y(Le))return xt(Ee,be,Le,et);Lu(Ee,Le)}return typeof Le=="string"&&Le!==""||typeof Le=="number"?(Le=""+Le,be!==null&&be.tag===6?(x(Ee,be.sibling),be=A(be,Le),be.return=Ee,Ee=be):(x(Ee,be),be=bm(Le,Ee.mode,et),be.return=Ee,Ee=be),$(Ee)):x(Ee,be)}return Kn}var yl=Cv(!0),Av=Cv(!1),Ou=ia(null),Mu=null,vl=null,Lp=null;function Op(){Lp=vl=Mu=null}function Mp(l){var d=Ou.current;On(Ou),l._currentValue=d}function Pp(l,d,x){for(;l!==null;){var _=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,_!==null&&(_.childLanes|=d)):_!==null&&(_.childLanes&d)!==d&&(_.childLanes|=d),l===x)break;l=l.return}}function bl(l,d){Mu=l,Lp=vl=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&d)!==0&&(Gr=!0),l.firstContext=null)}function _s(l){var d=l._currentValue;if(Lp!==l)if(l={context:l,memoizedValue:d,next:null},vl===null){if(Mu===null)throw Error(n(308));vl=l,Mu.dependencies={lanes:0,firstContext:l}}else vl=vl.next=l;return d}var uo=null;function Rp(l){uo===null?uo=[l]:uo.push(l)}function Ev(l,d,x,_){var A=d.interleaved;return A===null?(x.next=x,Rp(d)):(x.next=A.next,A.next=x),d.interleaved=x,Ei(l,_)}function Ei(l,d){l.lanes|=d;var x=l.alternate;for(x!==null&&(x.lanes|=d),x=l,l=l.return;l!==null;)l.childLanes|=d,x=l.alternate,x!==null&&(x.childLanes|=d),x=l,l=l.return;return x.tag===3?x.stateNode:null}var la=!1;function Tp(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lv(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Li(l,d){return{eventTime:l,lane:d,tag:0,payload:null,callback:null,next:null}}function ca(l,d,x){var _=l.updateQueue;if(_===null)return null;if(_=_.shared,(an&2)!==0){var A=_.pending;return A===null?d.next=d:(d.next=A.next,A.next=d),_.pending=d,Ei(l,x)}return A=_.interleaved,A===null?(d.next=d,Rp(_)):(d.next=A.next,A.next=d),_.interleaved=d,Ei(l,x)}function Pu(l,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var _=d.lanes;_&=l.pendingLanes,x|=_,d.lanes=x,ye(l,x)}}function Ov(l,d){var x=l.updateQueue,_=l.alternate;if(_!==null&&(_=_.updateQueue,x===_)){var A=null,D=null;if(x=x.firstBaseUpdate,x!==null){do{var $={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};D===null?A=D=$:D=D.next=$,x=x.next}while(x!==null);D===null?A=D=d:D=D.next=d}else A=D=d;x={baseState:_.baseState,firstBaseUpdate:A,lastBaseUpdate:D,shared:_.shared,effects:_.effects},l.updateQueue=x;return}l=x.lastBaseUpdate,l===null?x.firstBaseUpdate=d:l.next=d,x.lastBaseUpdate=d}function Ru(l,d,x,_){var A=l.updateQueue;la=!1;var D=A.firstBaseUpdate,$=A.lastBaseUpdate,ce=A.shared.pending;if(ce!==null){A.shared.pending=null;var xe=ce,Pe=xe.next;xe.next=null,$===null?D=Pe:$.next=Pe,$=xe;var Ge=l.alternate;Ge!==null&&(Ge=Ge.updateQueue,ce=Ge.lastBaseUpdate,ce!==$&&(ce===null?Ge.firstBaseUpdate=Pe:ce.next=Pe,Ge.lastBaseUpdate=xe))}if(D!==null){var Je=A.baseState;$=0,Ge=Pe=xe=null,ce=D;do{var Ye=ce.lane,dt=ce.eventTime;if((_&Ye)===Ye){Ge!==null&&(Ge=Ge.next={eventTime:dt,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var pt=l,xt=ce;switch(Ye=d,dt=x,xt.tag){case 1:if(pt=xt.payload,typeof pt=="function"){Je=pt.call(dt,Je,Ye);break e}Je=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=xt.payload,Ye=typeof pt=="function"?pt.call(dt,Je,Ye):pt,Ye==null)break e;Je=U({},Je,Ye);break e;case 2:la=!0}}ce.callback!==null&&ce.lane!==0&&(l.flags|=64,Ye=A.effects,Ye===null?A.effects=[ce]:Ye.push(ce))}else dt={eventTime:dt,lane:Ye,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Ge===null?(Pe=Ge=dt,xe=Je):Ge=Ge.next=dt,$|=Ye;if(ce=ce.next,ce===null){if(ce=A.shared.pending,ce===null)break;Ye=ce,ce=Ye.next,Ye.next=null,A.lastBaseUpdate=Ye,A.shared.pending=null}}while(!0);if(Ge===null&&(xe=Je),A.baseState=xe,A.firstBaseUpdate=Pe,A.lastBaseUpdate=Ge,d=A.shared.interleaved,d!==null){A=d;do $|=A.lane,A=A.next;while(A!==d)}else D===null&&(A.shared.lanes=0);po|=$,l.lanes=$,l.memoizedState=Je}}function Mv(l,d,x){if(l=d.effects,d.effects=null,l!==null)for(d=0;d<l.length;d++){var _=l[d],A=_.callback;if(A!==null){if(_.callback=null,_=x,typeof A!="function")throw Error(n(191,A));A.call(_)}}}var Lc={},li=ia(Lc),Oc=ia(Lc),Mc=ia(Lc);function fo(l){if(l===Lc)throw Error(n(174));return l}function Dp(l,d){switch(_n(Mc,d),_n(Oc,l),_n(li,Lc),l=d.nodeType,l){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:ue(null,"");break;default:l=l===8?d.parentNode:d,d=l.namespaceURI||null,l=l.tagName,d=ue(d,l)}On(li),_n(li,d)}function wl(){On(li),On(Oc),On(Mc)}function Pv(l){fo(Mc.current);var d=fo(li.current),x=ue(d,l.type);d!==x&&(_n(Oc,l),_n(li,x))}function Ip(l){Oc.current===l&&(On(li),On(Oc))}var zn=ia(0);function Tu(l){for(var d=l;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Fp=[];function zp(){for(var l=0;l<Fp.length;l++)Fp[l]._workInProgressVersionPrimary=null;Fp.length=0}var Du=j.ReactCurrentDispatcher,Bp=j.ReactCurrentBatchConfig,ho=0,Bn=null,rr=null,cr=null,Iu=!1,Pc=!1,Rc=0,eS=0;function Lr(){throw Error(n(321))}function qp(l,d){if(d===null)return!1;for(var x=0;x<d.length&&x<l.length;x++)if(!Ws(l[x],d[x]))return!1;return!0}function Wp(l,d,x,_,A,D){if(ho=D,Bn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Du.current=l===null||l.memoizedState===null?sS:iS,l=x(_,A),Pc){D=0;do{if(Pc=!1,Rc=0,25<=D)throw Error(n(301));D+=1,cr=rr=null,d.updateQueue=null,Du.current=aS,l=x(_,A)}while(Pc)}if(Du.current=Bu,d=rr!==null&&rr.next!==null,ho=0,cr=rr=Bn=null,Iu=!1,d)throw Error(n(300));return l}function Up(){var l=Rc!==0;return Rc=0,l}function ci(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?Bn.memoizedState=cr=l:cr=cr.next=l,cr}function ks(){if(rr===null){var l=Bn.alternate;l=l!==null?l.memoizedState:null}else l=rr.next;var d=cr===null?Bn.memoizedState:cr.next;if(d!==null)cr=d,rr=l;else{if(l===null)throw Error(n(310));rr=l,l={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},cr===null?Bn.memoizedState=cr=l:cr=cr.next=l}return cr}function Tc(l,d){return typeof d=="function"?d(l):d}function Hp(l){var d=ks(),x=d.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=l;var _=rr,A=_.baseQueue,D=x.pending;if(D!==null){if(A!==null){var $=A.next;A.next=D.next,D.next=$}_.baseQueue=A=D,x.pending=null}if(A!==null){D=A.next,_=_.baseState;var ce=$=null,xe=null,Pe=D;do{var Ge=Pe.lane;if((ho&Ge)===Ge)xe!==null&&(xe=xe.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),_=Pe.hasEagerState?Pe.eagerState:l(_,Pe.action);else{var Je={lane:Ge,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};xe===null?(ce=xe=Je,$=_):xe=xe.next=Je,Bn.lanes|=Ge,po|=Ge}Pe=Pe.next}while(Pe!==null&&Pe!==D);xe===null?$=_:xe.next=ce,Ws(_,d.memoizedState)||(Gr=!0),d.memoizedState=_,d.baseState=$,d.baseQueue=xe,x.lastRenderedState=_}if(l=x.interleaved,l!==null){A=l;do D=A.lane,Bn.lanes|=D,po|=D,A=A.next;while(A!==l)}else A===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function $p(l){var d=ks(),x=d.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=l;var _=x.dispatch,A=x.pending,D=d.memoizedState;if(A!==null){x.pending=null;var $=A=A.next;do D=l(D,$.action),$=$.next;while($!==A);Ws(D,d.memoizedState)||(Gr=!0),d.memoizedState=D,d.baseQueue===null&&(d.baseState=D),x.lastRenderedState=D}return[D,_]}function Rv(){}function Tv(l,d){var x=Bn,_=ks(),A=d(),D=!Ws(_.memoizedState,A);if(D&&(_.memoizedState=A,Gr=!0),_=_.queue,Vp(Fv.bind(null,x,_,l),[l]),_.getSnapshot!==d||D||cr!==null&&cr.memoizedState.tag&1){if(x.flags|=2048,Dc(9,Iv.bind(null,x,_,A,d),void 0,null),dr===null)throw Error(n(349));(ho&30)!==0||Dv(x,d,A)}return A}function Dv(l,d,x){l.flags|=16384,l={getSnapshot:d,value:x},d=Bn.updateQueue,d===null?(d={lastEffect:null,stores:null},Bn.updateQueue=d,d.stores=[l]):(x=d.stores,x===null?d.stores=[l]:x.push(l))}function Iv(l,d,x,_){d.value=x,d.getSnapshot=_,zv(d)&&Bv(l)}function Fv(l,d,x){return x(function(){zv(d)&&Bv(l)})}function zv(l){var d=l.getSnapshot;l=l.value;try{var x=d();return!Ws(l,x)}catch{return!0}}function Bv(l){var d=Ei(l,1);d!==null&&Ys(d,l,1,-1)}function qv(l){var d=ci();return typeof l=="function"&&(l=l()),d.memoizedState=d.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tc,lastRenderedState:l},d.queue=l,l=l.dispatch=rS.bind(null,Bn,l),[d.memoizedState,l]}function Dc(l,d,x,_){return l={tag:l,create:d,destroy:x,deps:_,next:null},d=Bn.updateQueue,d===null?(d={lastEffect:null,stores:null},Bn.updateQueue=d,d.lastEffect=l.next=l):(x=d.lastEffect,x===null?d.lastEffect=l.next=l:(_=x.next,x.next=l,l.next=_,d.lastEffect=l)),l}function Wv(){return ks().memoizedState}function Fu(l,d,x,_){var A=ci();Bn.flags|=l,A.memoizedState=Dc(1|d,x,void 0,_===void 0?null:_)}function zu(l,d,x,_){var A=ks();_=_===void 0?null:_;var D=void 0;if(rr!==null){var $=rr.memoizedState;if(D=$.destroy,_!==null&&qp(_,$.deps)){A.memoizedState=Dc(d,x,D,_);return}}Bn.flags|=l,A.memoizedState=Dc(1|d,x,D,_)}function Uv(l,d){return Fu(8390656,8,l,d)}function Vp(l,d){return zu(2048,8,l,d)}function Hv(l,d){return zu(4,2,l,d)}function $v(l,d){return zu(4,4,l,d)}function Vv(l,d){if(typeof d=="function")return l=l(),d(l),function(){d(null)};if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Yv(l,d,x){return x=x!=null?x.concat([l]):null,zu(4,4,Vv.bind(null,d,l),x)}function Yp(){}function Kv(l,d){var x=ks();d=d===void 0?null:d;var _=x.memoizedState;return _!==null&&d!==null&&qp(d,_[1])?_[0]:(x.memoizedState=[l,d],l)}function Gv(l,d){var x=ks();d=d===void 0?null:d;var _=x.memoizedState;return _!==null&&d!==null&&qp(d,_[1])?_[0]:(l=l(),x.memoizedState=[l,d],l)}function Xv(l,d,x){return(ho&21)===0?(l.baseState&&(l.baseState=!1,Gr=!0),l.memoizedState=x):(Ws(x,d)||(x=we(),Bn.lanes|=x,po|=x,l.baseState=!0),d)}function tS(l,d){var x=De;De=x!==0&&4>x?x:4,l(!0);var _=Bp.transition;Bp.transition={};try{l(!1),d()}finally{De=x,Bp.transition=_}}function Qv(){return ks().memoizedState}function nS(l,d,x){var _=ha(l);if(x={lane:_,action:x,hasEagerState:!1,eagerState:null,next:null},Jv(l))Zv(d,x);else if(x=Ev(l,d,x,_),x!==null){var A=Br();Ys(x,l,_,A),eb(x,d,_)}}function rS(l,d,x){var _=ha(l),A={lane:_,action:x,hasEagerState:!1,eagerState:null,next:null};if(Jv(l))Zv(d,A);else{var D=l.alternate;if(l.lanes===0&&(D===null||D.lanes===0)&&(D=d.lastRenderedReducer,D!==null))try{var $=d.lastRenderedState,ce=D($,x);if(A.hasEagerState=!0,A.eagerState=ce,Ws(ce,$)){var xe=d.interleaved;xe===null?(A.next=A,Rp(d)):(A.next=xe.next,xe.next=A),d.interleaved=A;return}}catch{}finally{}x=Ev(l,d,A,_),x!==null&&(A=Br(),Ys(x,l,_,A),eb(x,d,_))}}function Jv(l){var d=l.alternate;return l===Bn||d!==null&&d===Bn}function Zv(l,d){Pc=Iu=!0;var x=l.pending;x===null?d.next=d:(d.next=x.next,x.next=d),l.pending=d}function eb(l,d,x){if((x&4194240)!==0){var _=d.lanes;_&=l.pendingLanes,x|=_,d.lanes=x,ye(l,x)}}var Bu={readContext:_s,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},sS={readContext:_s,useCallback:function(l,d){return ci().memoizedState=[l,d===void 0?null:d],l},useContext:_s,useEffect:Uv,useImperativeHandle:function(l,d,x){return x=x!=null?x.concat([l]):null,Fu(4194308,4,Vv.bind(null,d,l),x)},useLayoutEffect:function(l,d){return Fu(4194308,4,l,d)},useInsertionEffect:function(l,d){return Fu(4,2,l,d)},useMemo:function(l,d){var x=ci();return d=d===void 0?null:d,l=l(),x.memoizedState=[l,d],l},useReducer:function(l,d,x){var _=ci();return d=x!==void 0?x(d):d,_.memoizedState=_.baseState=d,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:d},_.queue=l,l=l.dispatch=nS.bind(null,Bn,l),[_.memoizedState,l]},useRef:function(l){var d=ci();return l={current:l},d.memoizedState=l},useState:qv,useDebugValue:Yp,useDeferredValue:function(l){return ci().memoizedState=l},useTransition:function(){var l=qv(!1),d=l[0];return l=tS.bind(null,l[1]),ci().memoizedState=l,[d,l]},useMutableSource:function(){},useSyncExternalStore:function(l,d,x){var _=Bn,A=ci();if(Pn){if(x===void 0)throw Error(n(407));x=x()}else{if(x=d(),dr===null)throw Error(n(349));(ho&30)!==0||Dv(_,d,x)}A.memoizedState=x;var D={value:x,getSnapshot:d};return A.queue=D,Uv(Fv.bind(null,_,D,l),[l]),_.flags|=2048,Dc(9,Iv.bind(null,_,D,x,d),void 0,null),x},useId:function(){var l=ci(),d=dr.identifierPrefix;if(Pn){var x=Ai,_=Ci;x=(_&~(1<<32-En(_)-1)).toString(32)+x,d=":"+d+"R"+x,x=Rc++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=eS++,d=":"+d+"r"+x.toString(32)+":";return l.memoizedState=d},unstable_isNewReconciler:!1},iS={readContext:_s,useCallback:Kv,useContext:_s,useEffect:Vp,useImperativeHandle:Yv,useInsertionEffect:Hv,useLayoutEffect:$v,useMemo:Gv,useReducer:Hp,useRef:Wv,useState:function(){return Hp(Tc)},useDebugValue:Yp,useDeferredValue:function(l){var d=ks();return Xv(d,rr.memoizedState,l)},useTransition:function(){var l=Hp(Tc)[0],d=ks().memoizedState;return[l,d]},useMutableSource:Rv,useSyncExternalStore:Tv,useId:Qv,unstable_isNewReconciler:!1},aS={readContext:_s,useCallback:Kv,useContext:_s,useEffect:Vp,useImperativeHandle:Yv,useInsertionEffect:Hv,useLayoutEffect:$v,useMemo:Gv,useReducer:$p,useRef:Wv,useState:function(){return $p(Tc)},useDebugValue:Yp,useDeferredValue:function(l){var d=ks();return rr===null?d.memoizedState=l:Xv(d,rr.memoizedState,l)},useTransition:function(){var l=$p(Tc)[0],d=ks().memoizedState;return[l,d]},useMutableSource:Rv,useSyncExternalStore:Tv,useId:Qv,unstable_isNewReconciler:!1};function Hs(l,d){if(l&&l.defaultProps){d=U({},d),l=l.defaultProps;for(var x in l)d[x]===void 0&&(d[x]=l[x]);return d}return d}function Kp(l,d,x,_){d=l.memoizedState,x=x(_,d),x=x==null?d:U({},d,x),l.memoizedState=x,l.lanes===0&&(l.updateQueue.baseState=x)}var qu={isMounted:function(l){return(l=l._reactInternals)?Cr(l)===l:!1},enqueueSetState:function(l,d,x){l=l._reactInternals;var _=Br(),A=ha(l),D=Li(_,A);D.payload=d,x!=null&&(D.callback=x),d=ca(l,D,A),d!==null&&(Ys(d,l,A,_),Pu(d,l,A))},enqueueReplaceState:function(l,d,x){l=l._reactInternals;var _=Br(),A=ha(l),D=Li(_,A);D.tag=1,D.payload=d,x!=null&&(D.callback=x),d=ca(l,D,A),d!==null&&(Ys(d,l,A,_),Pu(d,l,A))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var x=Br(),_=ha(l),A=Li(x,_);A.tag=2,d!=null&&(A.callback=d),d=ca(l,A,_),d!==null&&(Ys(d,l,_,x),Pu(d,l,_))}};function tb(l,d,x,_,A,D,$){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(_,D,$):d.prototype&&d.prototype.isPureReactComponent?!jc(x,_)||!jc(A,D):!0}function nb(l,d,x){var _=!1,A=aa,D=d.contextType;return typeof D=="object"&&D!==null?D=_s(D):(A=Kr(d)?oo:Er.current,_=d.contextTypes,D=(_=_!=null)?pl(l,A):aa),d=new d(x,D),l.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=qu,l.stateNode=d,d._reactInternals=l,_&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=A,l.__reactInternalMemoizedMaskedChildContext=D),d}function rb(l,d,x,_){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,_),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,_),d.state!==l&&qu.enqueueReplaceState(d,d.state,null)}function Gp(l,d,x,_){var A=l.stateNode;A.props=x,A.state=l.memoizedState,A.refs={},Tp(l);var D=d.contextType;typeof D=="object"&&D!==null?A.context=_s(D):(D=Kr(d)?oo:Er.current,A.context=pl(l,D)),A.state=l.memoizedState,D=d.getDerivedStateFromProps,typeof D=="function"&&(Kp(l,d,D,x),A.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(d=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),d!==A.state&&qu.enqueueReplaceState(A,A.state,null),Ru(l,x,A,_),A.state=l.memoizedState),typeof A.componentDidMount=="function"&&(l.flags|=4194308)}function jl(l,d){try{var x="",_=d;do x+=Z(_),_=_.return;while(_);var A=x}catch(D){A=`
Error generating stack: `+D.message+`
`+D.stack}return{value:l,source:d,stack:A,digest:null}}function Xp(l,d,x){return{value:l,source:null,stack:x??null,digest:d??null}}function Qp(l,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var oS=typeof WeakMap=="function"?WeakMap:Map;function sb(l,d,x){x=Li(-1,x),x.tag=3,x.payload={element:null};var _=d.value;return x.callback=function(){Ku||(Ku=!0,fm=_),Qp(l,d)},x}function ib(l,d,x){x=Li(-1,x),x.tag=3;var _=l.type.getDerivedStateFromError;if(typeof _=="function"){var A=d.value;x.payload=function(){return _(A)},x.callback=function(){Qp(l,d)}}var D=l.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(x.callback=function(){Qp(l,d),typeof _!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var $=d.stack;this.componentDidCatch(d.value,{componentStack:$!==null?$:""})}),x}function ab(l,d,x){var _=l.pingCache;if(_===null){_=l.pingCache=new oS;var A=new Set;_.set(d,A)}else A=_.get(d),A===void 0&&(A=new Set,_.set(d,A));A.has(x)||(A.add(x),l=wS.bind(null,l,d,x),d.then(l,l))}function ob(l){do{var d;if((d=l.tag===13)&&(d=l.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return l;l=l.return}while(l!==null);return null}function lb(l,d,x,_,A){return(l.mode&1)===0?(l===d?l.flags|=65536:(l.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=Li(-1,1),d.tag=2,ca(x,d,1))),x.lanes|=1),l):(l.flags|=65536,l.lanes=A,l)}var lS=j.ReactCurrentOwner,Gr=!1;function zr(l,d,x,_){d.child=l===null?Av(d,null,x,_):yl(d,l.child,x,_)}function cb(l,d,x,_,A){x=x.render;var D=d.ref;return bl(d,A),_=Wp(l,d,x,_,D,A),x=Up(),l!==null&&!Gr?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~A,Oi(l,d,A)):(Pn&&x&&kp(d),d.flags|=1,zr(l,d,_,A),d.child)}function db(l,d,x,_,A){if(l===null){var D=x.type;return typeof D=="function"&&!vm(D)&&D.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=D,ub(l,d,D,_,A)):(l=ef(x.type,null,_,d,d.mode,A),l.ref=d.ref,l.return=d,d.child=l)}if(D=l.child,(l.lanes&A)===0){var $=D.memoizedProps;if(x=x.compare,x=x!==null?x:jc,x($,_)&&l.ref===d.ref)return Oi(l,d,A)}return d.flags|=1,l=ma(D,_),l.ref=d.ref,l.return=d,d.child=l}function ub(l,d,x,_,A){if(l!==null){var D=l.memoizedProps;if(jc(D,_)&&l.ref===d.ref)if(Gr=!1,d.pendingProps=_=D,(l.lanes&A)!==0)(l.flags&131072)!==0&&(Gr=!0);else return d.lanes=l.lanes,Oi(l,d,A)}return Jp(l,d,x,_,A)}function fb(l,d,x){var _=d.pendingProps,A=_.children,D=l!==null?l.memoizedState:null;if(_.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(_l,xs),xs|=x;else{if((x&1073741824)===0)return l=D!==null?D.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:l,cachePool:null,transitions:null},d.updateQueue=null,_n(_l,xs),xs|=l,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=D!==null?D.baseLanes:x,_n(_l,xs),xs|=_}else D!==null?(_=D.baseLanes|x,d.memoizedState=null):_=x,_n(_l,xs),xs|=_;return zr(l,d,A,x),d.child}function hb(l,d){var x=d.ref;(l===null&&x!==null||l!==null&&l.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function Jp(l,d,x,_,A){var D=Kr(x)?oo:Er.current;return D=pl(d,D),bl(d,A),x=Wp(l,d,x,_,D,A),_=Up(),l!==null&&!Gr?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~A,Oi(l,d,A)):(Pn&&_&&kp(d),d.flags|=1,zr(l,d,x,A),d.child)}function pb(l,d,x,_,A){if(Kr(x)){var D=!0;ku(d)}else D=!1;if(bl(d,A),d.stateNode===null)Uu(l,d),nb(d,x,_),Gp(d,x,_,A),_=!0;else if(l===null){var $=d.stateNode,ce=d.memoizedProps;$.props=ce;var xe=$.context,Pe=x.contextType;typeof Pe=="object"&&Pe!==null?Pe=_s(Pe):(Pe=Kr(x)?oo:Er.current,Pe=pl(d,Pe));var Ge=x.getDerivedStateFromProps,Je=typeof Ge=="function"||typeof $.getSnapshotBeforeUpdate=="function";Je||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ce!==_||xe!==Pe)&&rb(d,$,_,Pe),la=!1;var Ye=d.memoizedState;$.state=Ye,Ru(d,_,$,A),xe=d.memoizedState,ce!==_||Ye!==xe||Yr.current||la?(typeof Ge=="function"&&(Kp(d,x,Ge,_),xe=d.memoizedState),(ce=la||tb(d,x,ce,_,Ye,xe,Pe))?(Je||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(d.flags|=4194308)):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=_,d.memoizedState=xe),$.props=_,$.state=xe,$.context=Pe,_=ce):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),_=!1)}else{$=d.stateNode,Lv(l,d),ce=d.memoizedProps,Pe=d.type===d.elementType?ce:Hs(d.type,ce),$.props=Pe,Je=d.pendingProps,Ye=$.context,xe=x.contextType,typeof xe=="object"&&xe!==null?xe=_s(xe):(xe=Kr(x)?oo:Er.current,xe=pl(d,xe));var dt=x.getDerivedStateFromProps;(Ge=typeof dt=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ce!==Je||Ye!==xe)&&rb(d,$,_,xe),la=!1,Ye=d.memoizedState,$.state=Ye,Ru(d,_,$,A);var pt=d.memoizedState;ce!==Je||Ye!==pt||Yr.current||la?(typeof dt=="function"&&(Kp(d,x,dt,_),pt=d.memoizedState),(Pe=la||tb(d,x,Pe,_,Ye,pt,xe)||!1)?(Ge||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(_,pt,xe),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(_,pt,xe)),typeof $.componentDidUpdate=="function"&&(d.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof $.componentDidUpdate!="function"||ce===l.memoizedProps&&Ye===l.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ce===l.memoizedProps&&Ye===l.memoizedState||(d.flags|=1024),d.memoizedProps=_,d.memoizedState=pt),$.props=_,$.state=pt,$.context=xe,_=Pe):(typeof $.componentDidUpdate!="function"||ce===l.memoizedProps&&Ye===l.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ce===l.memoizedProps&&Ye===l.memoizedState||(d.flags|=1024),_=!1)}return Zp(l,d,x,_,D,A)}function Zp(l,d,x,_,A,D){hb(l,d);var $=(d.flags&128)!==0;if(!_&&!$)return A&&vv(d,x,!1),Oi(l,d,D);_=d.stateNode,lS.current=d;var ce=$&&typeof x.getDerivedStateFromError!="function"?null:_.render();return d.flags|=1,l!==null&&$?(d.child=yl(d,l.child,null,D),d.child=yl(d,null,ce,D)):zr(l,d,ce,D),d.memoizedState=_.state,A&&vv(d,x,!0),d.child}function mb(l){var d=l.stateNode;d.pendingContext?gv(l,d.pendingContext,d.pendingContext!==d.context):d.context&&gv(l,d.context,!1),Dp(l,d.containerInfo)}function xb(l,d,x,_,A){return gl(),Ep(A),d.flags|=256,zr(l,d,x,_),d.child}var em={dehydrated:null,treeContext:null,retryLane:0};function tm(l){return{baseLanes:l,cachePool:null,transitions:null}}function gb(l,d,x){var _=d.pendingProps,A=zn.current,D=!1,$=(d.flags&128)!==0,ce;if((ce=$)||(ce=l!==null&&l.memoizedState===null?!1:(A&2)!==0),ce?(D=!0,d.flags&=-129):(l===null||l.memoizedState!==null)&&(A|=1),_n(zn,A&1),l===null)return Ap(d),l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((d.mode&1)===0?d.lanes=1:l.data==="$!"?d.lanes=8:d.lanes=1073741824,null):($=_.children,l=_.fallback,D?(_=d.mode,D=d.child,$={mode:"hidden",children:$},(_&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=$):D=tf($,_,0,null),l=yo(l,_,x,null),D.return=d,l.return=d,D.sibling=l,d.child=D,d.child.memoizedState=tm(x),d.memoizedState=em,l):nm(d,$));if(A=l.memoizedState,A!==null&&(ce=A.dehydrated,ce!==null))return cS(l,d,$,_,ce,A,x);if(D){D=_.fallback,$=d.mode,A=l.child,ce=A.sibling;var xe={mode:"hidden",children:_.children};return($&1)===0&&d.child!==A?(_=d.child,_.childLanes=0,_.pendingProps=xe,d.deletions=null):(_=ma(A,xe),_.subtreeFlags=A.subtreeFlags&14680064),ce!==null?D=ma(ce,D):(D=yo(D,$,x,null),D.flags|=2),D.return=d,_.return=d,_.sibling=D,d.child=_,_=D,D=d.child,$=l.child.memoizedState,$=$===null?tm(x):{baseLanes:$.baseLanes|x,cachePool:null,transitions:$.transitions},D.memoizedState=$,D.childLanes=l.childLanes&~x,d.memoizedState=em,_}return D=l.child,l=D.sibling,_=ma(D,{mode:"visible",children:_.children}),(d.mode&1)===0&&(_.lanes=x),_.return=d,_.sibling=null,l!==null&&(x=d.deletions,x===null?(d.deletions=[l],d.flags|=16):x.push(l)),d.child=_,d.memoizedState=null,_}function nm(l,d){return d=tf({mode:"visible",children:d},l.mode,0,null),d.return=l,l.child=d}function Wu(l,d,x,_){return _!==null&&Ep(_),yl(d,l.child,null,x),l=nm(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function cS(l,d,x,_,A,D,$){if(x)return d.flags&256?(d.flags&=-257,_=Xp(Error(n(422))),Wu(l,d,$,_)):d.memoizedState!==null?(d.child=l.child,d.flags|=128,null):(D=_.fallback,A=d.mode,_=tf({mode:"visible",children:_.children},A,0,null),D=yo(D,A,$,null),D.flags|=2,_.return=d,D.return=d,_.sibling=D,d.child=_,(d.mode&1)!==0&&yl(d,l.child,null,$),d.child.memoizedState=tm($),d.memoizedState=em,D);if((d.mode&1)===0)return Wu(l,d,$,null);if(A.data==="$!"){if(_=A.nextSibling&&A.nextSibling.dataset,_)var ce=_.dgst;return _=ce,D=Error(n(419)),_=Xp(D,_,void 0),Wu(l,d,$,_)}if(ce=($&l.childLanes)!==0,Gr||ce){if(_=dr,_!==null){switch($&-$){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(_.suspendedLanes|$))!==0?0:A,A!==0&&A!==D.retryLane&&(D.retryLane=A,Ei(l,A),Ys(_,l,A,-1))}return ym(),_=Xp(Error(n(421))),Wu(l,d,$,_)}return A.data==="$?"?(d.flags|=128,d.child=l.child,d=jS.bind(null,l),A._reactRetry=d,null):(l=D.treeContext,ms=sa(A.nextSibling),ps=d,Pn=!0,Us=null,l!==null&&(js[Ns++]=Ci,js[Ns++]=Ai,js[Ns++]=lo,Ci=l.id,Ai=l.overflow,lo=d),d=nm(d,_.children),d.flags|=4096,d)}function yb(l,d,x){l.lanes|=d;var _=l.alternate;_!==null&&(_.lanes|=d),Pp(l.return,d,x)}function rm(l,d,x,_,A){var D=l.memoizedState;D===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:_,tail:x,tailMode:A}:(D.isBackwards=d,D.rendering=null,D.renderingStartTime=0,D.last=_,D.tail=x,D.tailMode=A)}function vb(l,d,x){var _=d.pendingProps,A=_.revealOrder,D=_.tail;if(zr(l,d,_.children,x),_=zn.current,(_&2)!==0)_=_&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&yb(l,x,d);else if(l.tag===19)yb(l,x,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}_&=1}if(_n(zn,_),(d.mode&1)===0)d.memoizedState=null;else switch(A){case"forwards":for(x=d.child,A=null;x!==null;)l=x.alternate,l!==null&&Tu(l)===null&&(A=x),x=x.sibling;x=A,x===null?(A=d.child,d.child=null):(A=x.sibling,x.sibling=null),rm(d,!1,A,x,D);break;case"backwards":for(x=null,A=d.child,d.child=null;A!==null;){if(l=A.alternate,l!==null&&Tu(l)===null){d.child=A;break}l=A.sibling,A.sibling=x,x=A,A=l}rm(d,!0,x,null,D);break;case"together":rm(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Uu(l,d){(d.mode&1)===0&&l!==null&&(l.alternate=null,d.alternate=null,d.flags|=2)}function Oi(l,d,x){if(l!==null&&(d.dependencies=l.dependencies),po|=d.lanes,(x&d.childLanes)===0)return null;if(l!==null&&d.child!==l.child)throw Error(n(153));if(d.child!==null){for(l=d.child,x=ma(l,l.pendingProps),d.child=x,x.return=d;l.sibling!==null;)l=l.sibling,x=x.sibling=ma(l,l.pendingProps),x.return=d;x.sibling=null}return d.child}function dS(l,d,x){switch(d.tag){case 3:mb(d),gl();break;case 5:Pv(d);break;case 1:Kr(d.type)&&ku(d);break;case 4:Dp(d,d.stateNode.containerInfo);break;case 10:var _=d.type._context,A=d.memoizedProps.value;_n(Ou,_._currentValue),_._currentValue=A;break;case 13:if(_=d.memoizedState,_!==null)return _.dehydrated!==null?(_n(zn,zn.current&1),d.flags|=128,null):(x&d.child.childLanes)!==0?gb(l,d,x):(_n(zn,zn.current&1),l=Oi(l,d,x),l!==null?l.sibling:null);_n(zn,zn.current&1);break;case 19:if(_=(x&d.childLanes)!==0,(l.flags&128)!==0){if(_)return vb(l,d,x);d.flags|=128}if(A=d.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),_n(zn,zn.current),_)break;return null;case 22:case 23:return d.lanes=0,fb(l,d,x)}return Oi(l,d,x)}var bb,sm,wb,jb;bb=function(l,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)l.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},sm=function(){},wb=function(l,d,x,_){var A=l.memoizedProps;if(A!==_){l=d.stateNode,fo(li.current);var D=null;switch(x){case"input":A=_e(l,A),_=_e(l,_),D=[];break;case"select":A=U({},A,{value:void 0}),_=U({},_,{value:void 0}),D=[];break;case"textarea":A=Ae(l,A),_=Ae(l,_),D=[];break;default:typeof A.onClick!="function"&&typeof _.onClick=="function"&&(l.onclick=ju)}yr(x,_);var $;x=null;for(Pe in A)if(!_.hasOwnProperty(Pe)&&A.hasOwnProperty(Pe)&&A[Pe]!=null)if(Pe==="style"){var ce=A[Pe];for($ in ce)ce.hasOwnProperty($)&&(x||(x={}),x[$]="")}else Pe!=="dangerouslySetInnerHTML"&&Pe!=="children"&&Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&Pe!=="autoFocus"&&(i.hasOwnProperty(Pe)?D||(D=[]):(D=D||[]).push(Pe,null));for(Pe in _){var xe=_[Pe];if(ce=A!=null?A[Pe]:void 0,_.hasOwnProperty(Pe)&&xe!==ce&&(xe!=null||ce!=null))if(Pe==="style")if(ce){for($ in ce)!ce.hasOwnProperty($)||xe&&xe.hasOwnProperty($)||(x||(x={}),x[$]="");for($ in xe)xe.hasOwnProperty($)&&ce[$]!==xe[$]&&(x||(x={}),x[$]=xe[$])}else x||(D||(D=[]),D.push(Pe,x)),x=xe;else Pe==="dangerouslySetInnerHTML"?(xe=xe?xe.__html:void 0,ce=ce?ce.__html:void 0,xe!=null&&ce!==xe&&(D=D||[]).push(Pe,xe)):Pe==="children"?typeof xe!="string"&&typeof xe!="number"||(D=D||[]).push(Pe,""+xe):Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Pe)?(xe!=null&&Pe==="onScroll"&&Ln("scroll",l),D||ce===xe||(D=[])):(D=D||[]).push(Pe,xe))}x&&(D=D||[]).push("style",x);var Pe=D;(d.updateQueue=Pe)&&(d.flags|=4)}},jb=function(l,d,x,_){x!==_&&(d.flags|=4)};function Ic(l,d){if(!Pn)switch(l.tailMode){case"hidden":d=l.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?l.tail=null:x.sibling=null;break;case"collapsed":x=l.tail;for(var _=null;x!==null;)x.alternate!==null&&(_=x),x=x.sibling;_===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:_.sibling=null}}function Or(l){var d=l.alternate!==null&&l.alternate.child===l.child,x=0,_=0;if(d)for(var A=l.child;A!==null;)x|=A.lanes|A.childLanes,_|=A.subtreeFlags&14680064,_|=A.flags&14680064,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)x|=A.lanes|A.childLanes,_|=A.subtreeFlags,_|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=_,l.childLanes=x,d}function uS(l,d,x){var _=d.pendingProps;switch(Sp(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Or(d),null;case 1:return Kr(d.type)&&_u(),Or(d),null;case 3:return _=d.stateNode,wl(),On(Yr),On(Er),zp(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(l===null||l.child===null)&&(Eu(d)?d.flags|=4:l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Us!==null&&(mm(Us),Us=null))),sm(l,d),Or(d),null;case 5:Ip(d);var A=fo(Mc.current);if(x=d.type,l!==null&&d.stateNode!=null)wb(l,d,x,_,A),l.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!_){if(d.stateNode===null)throw Error(n(166));return Or(d),null}if(l=fo(li.current),Eu(d)){_=d.stateNode,x=d.type;var D=d.memoizedProps;switch(_[oi]=d,_[Cc]=D,l=(d.mode&1)!==0,x){case"dialog":Ln("cancel",_),Ln("close",_);break;case"iframe":case"object":case"embed":Ln("load",_);break;case"video":case"audio":for(A=0;A<_c.length;A++)Ln(_c[A],_);break;case"source":Ln("error",_);break;case"img":case"image":case"link":Ln("error",_),Ln("load",_);break;case"details":Ln("toggle",_);break;case"input":it(_,D),Ln("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!D.multiple},Ln("invalid",_);break;case"textarea":ke(_,D),Ln("invalid",_)}yr(x,D),A=null;for(var $ in D)if(D.hasOwnProperty($)){var ce=D[$];$==="children"?typeof ce=="string"?_.textContent!==ce&&(D.suppressHydrationWarning!==!0&&wu(_.textContent,ce,l),A=["children",ce]):typeof ce=="number"&&_.textContent!==""+ce&&(D.suppressHydrationWarning!==!0&&wu(_.textContent,ce,l),A=["children",""+ce]):i.hasOwnProperty($)&&ce!=null&&$==="onScroll"&&Ln("scroll",_)}switch(x){case"input":He(_),Oe(_,D,!0);break;case"textarea":He(_),te(_);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(_.onclick=ju)}_=A,d.updateQueue=_,_!==null&&(d.flags|=4)}else{$=A.nodeType===9?A:A.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=J(x)),l==="http://www.w3.org/1999/xhtml"?x==="script"?(l=$.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof _.is=="string"?l=$.createElement(x,{is:_.is}):(l=$.createElement(x),x==="select"&&($=l,_.multiple?$.multiple=!0:_.size&&($.size=_.size))):l=$.createElementNS(l,x),l[oi]=d,l[Cc]=_,bb(l,d,!1,!1),d.stateNode=l;e:{switch($=It(x,_),x){case"dialog":Ln("cancel",l),Ln("close",l),A=_;break;case"iframe":case"object":case"embed":Ln("load",l),A=_;break;case"video":case"audio":for(A=0;A<_c.length;A++)Ln(_c[A],l);A=_;break;case"source":Ln("error",l),A=_;break;case"img":case"image":case"link":Ln("error",l),Ln("load",l),A=_;break;case"details":Ln("toggle",l),A=_;break;case"input":it(l,_),A=_e(l,_),Ln("invalid",l);break;case"option":A=_;break;case"select":l._wrapperState={wasMultiple:!!_.multiple},A=U({},_,{value:void 0}),Ln("invalid",l);break;case"textarea":ke(l,_),A=Ae(l,_),Ln("invalid",l);break;default:A=_}yr(x,A),ce=A;for(D in ce)if(ce.hasOwnProperty(D)){var xe=ce[D];D==="style"?St(l,xe):D==="dangerouslySetInnerHTML"?(xe=xe?xe.__html:void 0,xe!=null&&ze(l,xe)):D==="children"?typeof xe=="string"?(x!=="textarea"||xe!=="")&&Fe(l,xe):typeof xe=="number"&&Fe(l,""+xe):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(i.hasOwnProperty(D)?xe!=null&&D==="onScroll"&&Ln("scroll",l):xe!=null&&k(l,D,xe,$))}switch(x){case"input":He(l),Oe(l,_,!1);break;case"textarea":He(l),te(l);break;case"option":_.value!=null&&l.setAttribute("value",""+de(_.value));break;case"select":l.multiple=!!_.multiple,D=_.value,D!=null?Ne(l,!!_.multiple,D,!1):_.defaultValue!=null&&Ne(l,!!_.multiple,_.defaultValue,!0);break;default:typeof A.onClick=="function"&&(l.onclick=ju)}switch(x){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Or(d),null;case 6:if(l&&d.stateNode!=null)jb(l,d,l.memoizedProps,_);else{if(typeof _!="string"&&d.stateNode===null)throw Error(n(166));if(x=fo(Mc.current),fo(li.current),Eu(d)){if(_=d.stateNode,x=d.memoizedProps,_[oi]=d,(D=_.nodeValue!==x)&&(l=ps,l!==null))switch(l.tag){case 3:wu(_.nodeValue,x,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&wu(_.nodeValue,x,(l.mode&1)!==0)}D&&(d.flags|=4)}else _=(x.nodeType===9?x:x.ownerDocument).createTextNode(_),_[oi]=d,d.stateNode=_}return Or(d),null;case 13:if(On(zn),_=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Pn&&ms!==null&&(d.mode&1)!==0&&(d.flags&128)===0)kv(),gl(),d.flags|=98560,D=!1;else if(D=Eu(d),_!==null&&_.dehydrated!==null){if(l===null){if(!D)throw Error(n(318));if(D=d.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[oi]=d}else gl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Or(d),D=!1}else Us!==null&&(mm(Us),Us=null),D=!0;if(!D)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=x,d):(_=_!==null,_!==(l!==null&&l.memoizedState!==null)&&_&&(d.child.flags|=8192,(d.mode&1)!==0&&(l===null||(zn.current&1)!==0?sr===0&&(sr=3):ym())),d.updateQueue!==null&&(d.flags|=4),Or(d),null);case 4:return wl(),sm(l,d),l===null&&kc(d.stateNode.containerInfo),Or(d),null;case 10:return Mp(d.type._context),Or(d),null;case 17:return Kr(d.type)&&_u(),Or(d),null;case 19:if(On(zn),D=d.memoizedState,D===null)return Or(d),null;if(_=(d.flags&128)!==0,$=D.rendering,$===null)if(_)Ic(D,!1);else{if(sr!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if($=Tu(l),$!==null){for(d.flags|=128,Ic(D,!1),_=$.updateQueue,_!==null&&(d.updateQueue=_,d.flags|=4),d.subtreeFlags=0,_=x,x=d.child;x!==null;)D=x,l=_,D.flags&=14680066,$=D.alternate,$===null?(D.childLanes=0,D.lanes=l,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=$.childLanes,D.lanes=$.lanes,D.child=$.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=$.memoizedProps,D.memoizedState=$.memoizedState,D.updateQueue=$.updateQueue,D.type=$.type,l=$.dependencies,D.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),x=x.sibling;return _n(zn,zn.current&1|2),d.child}l=l.sibling}D.tail!==null&&on()>kl&&(d.flags|=128,_=!0,Ic(D,!1),d.lanes=4194304)}else{if(!_)if(l=Tu($),l!==null){if(d.flags|=128,_=!0,x=l.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),Ic(D,!0),D.tail===null&&D.tailMode==="hidden"&&!$.alternate&&!Pn)return Or(d),null}else 2*on()-D.renderingStartTime>kl&&x!==1073741824&&(d.flags|=128,_=!0,Ic(D,!1),d.lanes=4194304);D.isBackwards?($.sibling=d.child,d.child=$):(x=D.last,x!==null?x.sibling=$:d.child=$,D.last=$)}return D.tail!==null?(d=D.tail,D.rendering=d,D.tail=d.sibling,D.renderingStartTime=on(),d.sibling=null,x=zn.current,_n(zn,_?x&1|2:x&1),d):(Or(d),null);case 22:case 23:return gm(),_=d.memoizedState!==null,l!==null&&l.memoizedState!==null!==_&&(d.flags|=8192),_&&(d.mode&1)!==0?(xs&1073741824)!==0&&(Or(d),d.subtreeFlags&6&&(d.flags|=8192)):Or(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function fS(l,d){switch(Sp(d),d.tag){case 1:return Kr(d.type)&&_u(),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return wl(),On(Yr),On(Er),zp(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 5:return Ip(d),null;case 13:if(On(zn),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(n(340));gl()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return On(zn),null;case 4:return wl(),null;case 10:return Mp(d.type._context),null;case 22:case 23:return gm(),null;case 24:return null;default:return null}}var Hu=!1,Mr=!1,hS=typeof WeakSet=="function"?WeakSet:Set,ft=null;function Nl(l,d){var x=l.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(_){Un(l,d,_)}else x.current=null}function im(l,d,x){try{x()}catch(_){Un(l,d,_)}}var Nb=!1;function pS(l,d){if(gp=Za,l=tv(),cp(l)){if("selectionStart"in l)var x={start:l.selectionStart,end:l.selectionEnd};else e:{x=(x=l.ownerDocument)&&x.defaultView||window;var _=x.getSelection&&x.getSelection();if(_&&_.rangeCount!==0){x=_.anchorNode;var A=_.anchorOffset,D=_.focusNode;_=_.focusOffset;try{x.nodeType,D.nodeType}catch{x=null;break e}var $=0,ce=-1,xe=-1,Pe=0,Ge=0,Je=l,Ye=null;t:for(;;){for(var dt;Je!==x||A!==0&&Je.nodeType!==3||(ce=$+A),Je!==D||_!==0&&Je.nodeType!==3||(xe=$+_),Je.nodeType===3&&($+=Je.nodeValue.length),(dt=Je.firstChild)!==null;)Ye=Je,Je=dt;for(;;){if(Je===l)break t;if(Ye===x&&++Pe===A&&(ce=$),Ye===D&&++Ge===_&&(xe=$),(dt=Je.nextSibling)!==null)break;Je=Ye,Ye=Je.parentNode}Je=dt}x=ce===-1||xe===-1?null:{start:ce,end:xe}}else x=null}x=x||{start:0,end:0}}else x=null;for(yp={focusedElem:l,selectionRange:x},Za=!1,ft=d;ft!==null;)if(d=ft,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,ft=l;else for(;ft!==null;){d=ft;try{var pt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var xt=pt.memoizedProps,Kn=pt.memoizedState,Ee=d.stateNode,be=Ee.getSnapshotBeforeUpdate(d.elementType===d.type?xt:Hs(d.type,xt),Kn);Ee.__reactInternalSnapshotBeforeUpdate=be}break;case 3:var Le=d.stateNode.containerInfo;Le.nodeType===1?Le.textContent="":Le.nodeType===9&&Le.documentElement&&Le.removeChild(Le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(et){Un(d,d.return,et)}if(l=d.sibling,l!==null){l.return=d.return,ft=l;break}ft=d.return}return pt=Nb,Nb=!1,pt}function Fc(l,d,x){var _=d.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var A=_=_.next;do{if((A.tag&l)===l){var D=A.destroy;A.destroy=void 0,D!==void 0&&im(d,x,D)}A=A.next}while(A!==_)}}function $u(l,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&l)===l){var _=x.create;x.destroy=_()}x=x.next}while(x!==d)}}function am(l){var d=l.ref;if(d!==null){var x=l.stateNode;switch(l.tag){case 5:l=x;break;default:l=x}typeof d=="function"?d(l):d.current=l}}function _b(l){var d=l.alternate;d!==null&&(l.alternate=null,_b(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&(delete d[oi],delete d[Cc],delete d[jp],delete d[X4],delete d[Q4])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function kb(l){return l.tag===5||l.tag===3||l.tag===4}function Sb(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||kb(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function om(l,d,x){var _=l.tag;if(_===5||_===6)l=l.stateNode,d?x.nodeType===8?x.parentNode.insertBefore(l,d):x.insertBefore(l,d):(x.nodeType===8?(d=x.parentNode,d.insertBefore(l,x)):(d=x,d.appendChild(l)),x=x._reactRootContainer,x!=null||d.onclick!==null||(d.onclick=ju));else if(_!==4&&(l=l.child,l!==null))for(om(l,d,x),l=l.sibling;l!==null;)om(l,d,x),l=l.sibling}function lm(l,d,x){var _=l.tag;if(_===5||_===6)l=l.stateNode,d?x.insertBefore(l,d):x.appendChild(l);else if(_!==4&&(l=l.child,l!==null))for(lm(l,d,x),l=l.sibling;l!==null;)lm(l,d,x),l=l.sibling}var Nr=null,$s=!1;function da(l,d,x){for(x=x.child;x!==null;)Cb(l,d,x),x=x.sibling}function Cb(l,d,x){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(bs,x)}catch{}switch(x.tag){case 5:Mr||Nl(x,d);case 6:var _=Nr,A=$s;Nr=null,da(l,d,x),Nr=_,$s=A,Nr!==null&&($s?(l=Nr,x=x.stateNode,l.nodeType===8?l.parentNode.removeChild(x):l.removeChild(x)):Nr.removeChild(x.stateNode));break;case 18:Nr!==null&&($s?(l=Nr,x=x.stateNode,l.nodeType===8?wp(l.parentNode,x):l.nodeType===1&&wp(l,x),Zi(l)):wp(Nr,x.stateNode));break;case 4:_=Nr,A=$s,Nr=x.stateNode.containerInfo,$s=!0,da(l,d,x),Nr=_,$s=A;break;case 0:case 11:case 14:case 15:if(!Mr&&(_=x.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){A=_=_.next;do{var D=A,$=D.destroy;D=D.tag,$!==void 0&&((D&2)!==0||(D&4)!==0)&&im(x,d,$),A=A.next}while(A!==_)}da(l,d,x);break;case 1:if(!Mr&&(Nl(x,d),_=x.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=x.memoizedProps,_.state=x.memoizedState,_.componentWillUnmount()}catch(ce){Un(x,d,ce)}da(l,d,x);break;case 21:da(l,d,x);break;case 22:x.mode&1?(Mr=(_=Mr)||x.memoizedState!==null,da(l,d,x),Mr=_):da(l,d,x);break;default:da(l,d,x)}}function Ab(l){var d=l.updateQueue;if(d!==null){l.updateQueue=null;var x=l.stateNode;x===null&&(x=l.stateNode=new hS),d.forEach(function(_){var A=NS.bind(null,l,_);x.has(_)||(x.add(_),_.then(A,A))})}}function Vs(l,d){var x=d.deletions;if(x!==null)for(var _=0;_<x.length;_++){var A=x[_];try{var D=l,$=d,ce=$;e:for(;ce!==null;){switch(ce.tag){case 5:Nr=ce.stateNode,$s=!1;break e;case 3:Nr=ce.stateNode.containerInfo,$s=!0;break e;case 4:Nr=ce.stateNode.containerInfo,$s=!0;break e}ce=ce.return}if(Nr===null)throw Error(n(160));Cb(D,$,A),Nr=null,$s=!1;var xe=A.alternate;xe!==null&&(xe.return=null),A.return=null}catch(Pe){Un(A,d,Pe)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)Eb(d,l),d=d.sibling}function Eb(l,d){var x=l.alternate,_=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Vs(d,l),di(l),_&4){try{Fc(3,l,l.return),$u(3,l)}catch(xt){Un(l,l.return,xt)}try{Fc(5,l,l.return)}catch(xt){Un(l,l.return,xt)}}break;case 1:Vs(d,l),di(l),_&512&&x!==null&&Nl(x,x.return);break;case 5:if(Vs(d,l),di(l),_&512&&x!==null&&Nl(x,x.return),l.flags&32){var A=l.stateNode;try{Fe(A,"")}catch(xt){Un(l,l.return,xt)}}if(_&4&&(A=l.stateNode,A!=null)){var D=l.memoizedProps,$=x!==null?x.memoizedProps:D,ce=l.type,xe=l.updateQueue;if(l.updateQueue=null,xe!==null)try{ce==="input"&&D.type==="radio"&&D.name!=null&&rt(A,D),It(ce,$);var Pe=It(ce,D);for($=0;$<xe.length;$+=2){var Ge=xe[$],Je=xe[$+1];Ge==="style"?St(A,Je):Ge==="dangerouslySetInnerHTML"?ze(A,Je):Ge==="children"?Fe(A,Je):k(A,Ge,Je,Pe)}switch(ce){case"input":at(A,D);break;case"textarea":re(A,D);break;case"select":var Ye=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!D.multiple;var dt=D.value;dt!=null?Ne(A,!!D.multiple,dt,!1):Ye!==!!D.multiple&&(D.defaultValue!=null?Ne(A,!!D.multiple,D.defaultValue,!0):Ne(A,!!D.multiple,D.multiple?[]:"",!1))}A[Cc]=D}catch(xt){Un(l,l.return,xt)}}break;case 6:if(Vs(d,l),di(l),_&4){if(l.stateNode===null)throw Error(n(162));A=l.stateNode,D=l.memoizedProps;try{A.nodeValue=D}catch(xt){Un(l,l.return,xt)}}break;case 3:if(Vs(d,l),di(l),_&4&&x!==null&&x.memoizedState.isDehydrated)try{Zi(d.containerInfo)}catch(xt){Un(l,l.return,xt)}break;case 4:Vs(d,l),di(l);break;case 13:Vs(d,l),di(l),A=l.child,A.flags&8192&&(D=A.memoizedState!==null,A.stateNode.isHidden=D,!D||A.alternate!==null&&A.alternate.memoizedState!==null||(um=on())),_&4&&Ab(l);break;case 22:if(Ge=x!==null&&x.memoizedState!==null,l.mode&1?(Mr=(Pe=Mr)||Ge,Vs(d,l),Mr=Pe):Vs(d,l),di(l),_&8192){if(Pe=l.memoizedState!==null,(l.stateNode.isHidden=Pe)&&!Ge&&(l.mode&1)!==0)for(ft=l,Ge=l.child;Ge!==null;){for(Je=ft=Ge;ft!==null;){switch(Ye=ft,dt=Ye.child,Ye.tag){case 0:case 11:case 14:case 15:Fc(4,Ye,Ye.return);break;case 1:Nl(Ye,Ye.return);var pt=Ye.stateNode;if(typeof pt.componentWillUnmount=="function"){_=Ye,x=Ye.return;try{d=_,pt.props=d.memoizedProps,pt.state=d.memoizedState,pt.componentWillUnmount()}catch(xt){Un(_,x,xt)}}break;case 5:Nl(Ye,Ye.return);break;case 22:if(Ye.memoizedState!==null){Mb(Je);continue}}dt!==null?(dt.return=Ye,ft=dt):Mb(Je)}Ge=Ge.sibling}e:for(Ge=null,Je=l;;){if(Je.tag===5){if(Ge===null){Ge=Je;try{A=Je.stateNode,Pe?(D=A.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(ce=Je.stateNode,xe=Je.memoizedProps.style,$=xe!=null&&xe.hasOwnProperty("display")?xe.display:null,ce.style.display=Te("display",$))}catch(xt){Un(l,l.return,xt)}}}else if(Je.tag===6){if(Ge===null)try{Je.stateNode.nodeValue=Pe?"":Je.memoizedProps}catch(xt){Un(l,l.return,xt)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===l)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===l)break e;for(;Je.sibling===null;){if(Je.return===null||Je.return===l)break e;Ge===Je&&(Ge=null),Je=Je.return}Ge===Je&&(Ge=null),Je.sibling.return=Je.return,Je=Je.sibling}}break;case 19:Vs(d,l),di(l),_&4&&Ab(l);break;case 21:break;default:Vs(d,l),di(l)}}function di(l){var d=l.flags;if(d&2){try{e:{for(var x=l.return;x!==null;){if(kb(x)){var _=x;break e}x=x.return}throw Error(n(160))}switch(_.tag){case 5:var A=_.stateNode;_.flags&32&&(Fe(A,""),_.flags&=-33);var D=Sb(l);lm(l,D,A);break;case 3:case 4:var $=_.stateNode.containerInfo,ce=Sb(l);om(l,ce,$);break;default:throw Error(n(161))}}catch(xe){Un(l,l.return,xe)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function mS(l,d,x){ft=l,Lb(l)}function Lb(l,d,x){for(var _=(l.mode&1)!==0;ft!==null;){var A=ft,D=A.child;if(A.tag===22&&_){var $=A.memoizedState!==null||Hu;if(!$){var ce=A.alternate,xe=ce!==null&&ce.memoizedState!==null||Mr;ce=Hu;var Pe=Mr;if(Hu=$,(Mr=xe)&&!Pe)for(ft=A;ft!==null;)$=ft,xe=$.child,$.tag===22&&$.memoizedState!==null?Pb(A):xe!==null?(xe.return=$,ft=xe):Pb(A);for(;D!==null;)ft=D,Lb(D),D=D.sibling;ft=A,Hu=ce,Mr=Pe}Ob(l)}else(A.subtreeFlags&8772)!==0&&D!==null?(D.return=A,ft=D):Ob(l)}}function Ob(l){for(;ft!==null;){var d=ft;if((d.flags&8772)!==0){var x=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Mr||$u(5,d);break;case 1:var _=d.stateNode;if(d.flags&4&&!Mr)if(x===null)_.componentDidMount();else{var A=d.elementType===d.type?x.memoizedProps:Hs(d.type,x.memoizedProps);_.componentDidUpdate(A,x.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var D=d.updateQueue;D!==null&&Mv(d,D,_);break;case 3:var $=d.updateQueue;if($!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=d.child.stateNode;break;case 1:x=d.child.stateNode}Mv(d,$,x)}break;case 5:var ce=d.stateNode;if(x===null&&d.flags&4){x=ce;var xe=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":xe.autoFocus&&x.focus();break;case"img":xe.src&&(x.src=xe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Pe=d.alternate;if(Pe!==null){var Ge=Pe.memoizedState;if(Ge!==null){var Je=Ge.dehydrated;Je!==null&&Zi(Je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Mr||d.flags&512&&am(d)}catch(Ye){Un(d,d.return,Ye)}}if(d===l){ft=null;break}if(x=d.sibling,x!==null){x.return=d.return,ft=x;break}ft=d.return}}function Mb(l){for(;ft!==null;){var d=ft;if(d===l){ft=null;break}var x=d.sibling;if(x!==null){x.return=d.return,ft=x;break}ft=d.return}}function Pb(l){for(;ft!==null;){var d=ft;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{$u(4,d)}catch(xe){Un(d,x,xe)}break;case 1:var _=d.stateNode;if(typeof _.componentDidMount=="function"){var A=d.return;try{_.componentDidMount()}catch(xe){Un(d,A,xe)}}var D=d.return;try{am(d)}catch(xe){Un(d,D,xe)}break;case 5:var $=d.return;try{am(d)}catch(xe){Un(d,$,xe)}}}catch(xe){Un(d,d.return,xe)}if(d===l){ft=null;break}var ce=d.sibling;if(ce!==null){ce.return=d.return,ft=ce;break}ft=d.return}}var xS=Math.ceil,Vu=j.ReactCurrentDispatcher,cm=j.ReactCurrentOwner,Ss=j.ReactCurrentBatchConfig,an=0,dr=null,Zn=null,_r=0,xs=0,_l=ia(0),sr=0,zc=null,po=0,Yu=0,dm=0,Bc=null,Xr=null,um=0,kl=1/0,Mi=null,Ku=!1,fm=null,ua=null,Gu=!1,fa=null,Xu=0,qc=0,hm=null,Qu=-1,Ju=0;function Br(){return(an&6)!==0?on():Qu!==-1?Qu:Qu=on()}function ha(l){return(l.mode&1)===0?1:(an&2)!==0&&_r!==0?_r&-_r:Z4.transition!==null?(Ju===0&&(Ju=we()),Ju):(l=De,l!==0||(l=window.event,l=l===void 0?16:ii(l.type)),l)}function Ys(l,d,x,_){if(50<qc)throw qc=0,hm=null,Error(n(185));ae(l,x,_),((an&2)===0||l!==dr)&&(l===dr&&((an&2)===0&&(Yu|=x),sr===4&&pa(l,_r)),Qr(l,_),x===1&&an===0&&(d.mode&1)===0&&(kl=on()+500,Su&&oa()))}function Qr(l,d){var x=l.callbackNode;Ir(l,d);var _=bt(l,l===dr?_r:0);if(_===0)x!==null&&tr(x),l.callbackNode=null,l.callbackPriority=0;else if(d=_&-_,l.callbackPriority!==d){if(x!=null&&tr(x),d===1)l.tag===0?J4(Tb.bind(null,l)):bv(Tb.bind(null,l)),K4(function(){(an&6)===0&&oa()}),x=null;else{switch(kt(_)){case 1:x=vs;break;case 4:x=Ga;break;case 16:x=ti;break;case 536870912:x=ni;break;default:x=ti}x=Ub(x,Rb.bind(null,l))}l.callbackPriority=d,l.callbackNode=x}}function Rb(l,d){if(Qu=-1,Ju=0,(an&6)!==0)throw Error(n(327));var x=l.callbackNode;if(Sl()&&l.callbackNode!==x)return null;var _=bt(l,l===dr?_r:0);if(_===0)return null;if((_&30)!==0||(_&l.expiredLanes)!==0||d)d=Zu(l,_);else{d=_;var A=an;an|=2;var D=Ib();(dr!==l||_r!==d)&&(Mi=null,kl=on()+500,xo(l,d));do try{vS();break}catch(ce){Db(l,ce)}while(!0);Op(),Vu.current=D,an=A,Zn!==null?d=0:(dr=null,_r=0,d=sr)}if(d!==0){if(d===2&&(A=se(l),A!==0&&(_=A,d=pm(l,A))),d===1)throw x=zc,xo(l,0),pa(l,_),Qr(l,on()),x;if(d===6)pa(l,_);else{if(A=l.current.alternate,(_&30)===0&&!gS(A)&&(d=Zu(l,_),d===2&&(D=se(l),D!==0&&(_=D,d=pm(l,D))),d===1))throw x=zc,xo(l,0),pa(l,_),Qr(l,on()),x;switch(l.finishedWork=A,l.finishedLanes=_,d){case 0:case 1:throw Error(n(345));case 2:go(l,Xr,Mi);break;case 3:if(pa(l,_),(_&130023424)===_&&(d=um+500-on(),10<d)){if(bt(l,0)!==0)break;if(A=l.suspendedLanes,(A&_)!==_){Br(),l.pingedLanes|=l.suspendedLanes&A;break}l.timeoutHandle=bp(go.bind(null,l,Xr,Mi),d);break}go(l,Xr,Mi);break;case 4:if(pa(l,_),(_&4194240)===_)break;for(d=l.eventTimes,A=-1;0<_;){var $=31-En(_);D=1<<$,$=d[$],$>A&&(A=$),_&=~D}if(_=A,_=on()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*xS(_/1960))-_,10<_){l.timeoutHandle=bp(go.bind(null,l,Xr,Mi),_);break}go(l,Xr,Mi);break;case 5:go(l,Xr,Mi);break;default:throw Error(n(329))}}}return Qr(l,on()),l.callbackNode===x?Rb.bind(null,l):null}function pm(l,d){var x=Bc;return l.current.memoizedState.isDehydrated&&(xo(l,d).flags|=256),l=Zu(l,d),l!==2&&(d=Xr,Xr=x,d!==null&&mm(d)),l}function mm(l){Xr===null?Xr=l:Xr.push.apply(Xr,l)}function gS(l){for(var d=l;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var _=0;_<x.length;_++){var A=x[_],D=A.getSnapshot;A=A.value;try{if(!Ws(D(),A))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function pa(l,d){for(d&=~dm,d&=~Yu,l.suspendedLanes|=d,l.pingedLanes&=~d,l=l.expirationTimes;0<d;){var x=31-En(d),_=1<<x;l[x]=-1,d&=~_}}function Tb(l){if((an&6)!==0)throw Error(n(327));Sl();var d=bt(l,0);if((d&1)===0)return Qr(l,on()),null;var x=Zu(l,d);if(l.tag!==0&&x===2){var _=se(l);_!==0&&(d=_,x=pm(l,_))}if(x===1)throw x=zc,xo(l,0),pa(l,d),Qr(l,on()),x;if(x===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=d,go(l,Xr,Mi),Qr(l,on()),null}function xm(l,d){var x=an;an|=1;try{return l(d)}finally{an=x,an===0&&(kl=on()+500,Su&&oa())}}function mo(l){fa!==null&&fa.tag===0&&(an&6)===0&&Sl();var d=an;an|=1;var x=Ss.transition,_=De;try{if(Ss.transition=null,De=1,l)return l()}finally{De=_,Ss.transition=x,an=d,(an&6)===0&&oa()}}function gm(){xs=_l.current,On(_l)}function xo(l,d){l.finishedWork=null,l.finishedLanes=0;var x=l.timeoutHandle;if(x!==-1&&(l.timeoutHandle=-1,Y4(x)),Zn!==null)for(x=Zn.return;x!==null;){var _=x;switch(Sp(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&_u();break;case 3:wl(),On(Yr),On(Er),zp();break;case 5:Ip(_);break;case 4:wl();break;case 13:On(zn);break;case 19:On(zn);break;case 10:Mp(_.type._context);break;case 22:case 23:gm()}x=x.return}if(dr=l,Zn=l=ma(l.current,null),_r=xs=d,sr=0,zc=null,dm=Yu=po=0,Xr=Bc=null,uo!==null){for(d=0;d<uo.length;d++)if(x=uo[d],_=x.interleaved,_!==null){x.interleaved=null;var A=_.next,D=x.pending;if(D!==null){var $=D.next;D.next=A,_.next=$}x.pending=_}uo=null}return l}function Db(l,d){do{var x=Zn;try{if(Op(),Du.current=Bu,Iu){for(var _=Bn.memoizedState;_!==null;){var A=_.queue;A!==null&&(A.pending=null),_=_.next}Iu=!1}if(ho=0,cr=rr=Bn=null,Pc=!1,Rc=0,cm.current=null,x===null||x.return===null){sr=1,zc=d,Zn=null;break}e:{var D=l,$=x.return,ce=x,xe=d;if(d=_r,ce.flags|=32768,xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var Pe=xe,Ge=ce,Je=Ge.tag;if((Ge.mode&1)===0&&(Je===0||Je===11||Je===15)){var Ye=Ge.alternate;Ye?(Ge.updateQueue=Ye.updateQueue,Ge.memoizedState=Ye.memoizedState,Ge.lanes=Ye.lanes):(Ge.updateQueue=null,Ge.memoizedState=null)}var dt=ob($);if(dt!==null){dt.flags&=-257,lb(dt,$,ce,D,d),dt.mode&1&&ab(D,Pe,d),d=dt,xe=Pe;var pt=d.updateQueue;if(pt===null){var xt=new Set;xt.add(xe),d.updateQueue=xt}else pt.add(xe);break e}else{if((d&1)===0){ab(D,Pe,d),ym();break e}xe=Error(n(426))}}else if(Pn&&ce.mode&1){var Kn=ob($);if(Kn!==null){(Kn.flags&65536)===0&&(Kn.flags|=256),lb(Kn,$,ce,D,d),Ep(jl(xe,ce));break e}}D=xe=jl(xe,ce),sr!==4&&(sr=2),Bc===null?Bc=[D]:Bc.push(D),D=$;do{switch(D.tag){case 3:D.flags|=65536,d&=-d,D.lanes|=d;var Ee=sb(D,xe,d);Ov(D,Ee);break e;case 1:ce=xe;var be=D.type,Le=D.stateNode;if((D.flags&128)===0&&(typeof be.getDerivedStateFromError=="function"||Le!==null&&typeof Le.componentDidCatch=="function"&&(ua===null||!ua.has(Le)))){D.flags|=65536,d&=-d,D.lanes|=d;var et=ib(D,ce,d);Ov(D,et);break e}}D=D.return}while(D!==null)}zb(x)}catch(yt){d=yt,Zn===x&&x!==null&&(Zn=x=x.return);continue}break}while(!0)}function Ib(){var l=Vu.current;return Vu.current=Bu,l===null?Bu:l}function ym(){(sr===0||sr===3||sr===2)&&(sr=4),dr===null||(po&268435455)===0&&(Yu&268435455)===0||pa(dr,_r)}function Zu(l,d){var x=an;an|=2;var _=Ib();(dr!==l||_r!==d)&&(Mi=null,xo(l,d));do try{yS();break}catch(A){Db(l,A)}while(!0);if(Op(),an=x,Vu.current=_,Zn!==null)throw Error(n(261));return dr=null,_r=0,sr}function yS(){for(;Zn!==null;)Fb(Zn)}function vS(){for(;Zn!==null&&!Ts();)Fb(Zn)}function Fb(l){var d=Wb(l.alternate,l,xs);l.memoizedProps=l.pendingProps,d===null?zb(l):Zn=d,cm.current=null}function zb(l){var d=l;do{var x=d.alternate;if(l=d.return,(d.flags&32768)===0){if(x=uS(x,d,xs),x!==null){Zn=x;return}}else{if(x=fS(x,d),x!==null){x.flags&=32767,Zn=x;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{sr=6,Zn=null;return}}if(d=d.sibling,d!==null){Zn=d;return}Zn=d=l}while(d!==null);sr===0&&(sr=5)}function go(l,d,x){var _=De,A=Ss.transition;try{Ss.transition=null,De=1,bS(l,d,x,_)}finally{Ss.transition=A,De=_}return null}function bS(l,d,x,_){do Sl();while(fa!==null);if((an&6)!==0)throw Error(n(327));x=l.finishedWork;var A=l.finishedLanes;if(x===null)return null;if(l.finishedWork=null,l.finishedLanes=0,x===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var D=x.lanes|x.childLanes;if(je(l,D),l===dr&&(Zn=dr=null,_r=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||Gu||(Gu=!0,Ub(ti,function(){return Sl(),null})),D=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||D){D=Ss.transition,Ss.transition=null;var $=De;De=1;var ce=an;an|=4,cm.current=null,pS(l,x),Eb(x,l),B4(yp),Za=!!gp,yp=gp=null,l.current=x,mS(x),In(),an=ce,De=$,Ss.transition=D}else l.current=x;if(Gu&&(Gu=!1,fa=l,Xu=A),D=l.pendingLanes,D===0&&(ua=null),Vn(x.stateNode),Qr(l,on()),d!==null)for(_=l.onRecoverableError,x=0;x<d.length;x++)A=d[x],_(A.value,{componentStack:A.stack,digest:A.digest});if(Ku)throw Ku=!1,l=fm,fm=null,l;return(Xu&1)!==0&&l.tag!==0&&Sl(),D=l.pendingLanes,(D&1)!==0?l===hm?qc++:(qc=0,hm=l):qc=0,oa(),null}function Sl(){if(fa!==null){var l=kt(Xu),d=Ss.transition,x=De;try{if(Ss.transition=null,De=16>l?16:l,fa===null)var _=!1;else{if(l=fa,fa=null,Xu=0,(an&6)!==0)throw Error(n(331));var A=an;for(an|=4,ft=l.current;ft!==null;){var D=ft,$=D.child;if((ft.flags&16)!==0){var ce=D.deletions;if(ce!==null){for(var xe=0;xe<ce.length;xe++){var Pe=ce[xe];for(ft=Pe;ft!==null;){var Ge=ft;switch(Ge.tag){case 0:case 11:case 15:Fc(8,Ge,D)}var Je=Ge.child;if(Je!==null)Je.return=Ge,ft=Je;else for(;ft!==null;){Ge=ft;var Ye=Ge.sibling,dt=Ge.return;if(_b(Ge),Ge===Pe){ft=null;break}if(Ye!==null){Ye.return=dt,ft=Ye;break}ft=dt}}}var pt=D.alternate;if(pt!==null){var xt=pt.child;if(xt!==null){pt.child=null;do{var Kn=xt.sibling;xt.sibling=null,xt=Kn}while(xt!==null)}}ft=D}}if((D.subtreeFlags&2064)!==0&&$!==null)$.return=D,ft=$;else e:for(;ft!==null;){if(D=ft,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Fc(9,D,D.return)}var Ee=D.sibling;if(Ee!==null){Ee.return=D.return,ft=Ee;break e}ft=D.return}}var be=l.current;for(ft=be;ft!==null;){$=ft;var Le=$.child;if(($.subtreeFlags&2064)!==0&&Le!==null)Le.return=$,ft=Le;else e:for($=be;ft!==null;){if(ce=ft,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:$u(9,ce)}}catch(yt){Un(ce,ce.return,yt)}if(ce===$){ft=null;break e}var et=ce.sibling;if(et!==null){et.return=ce.return,ft=et;break e}ft=ce.return}}if(an=A,oa(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(bs,l)}catch{}_=!0}return _}finally{De=x,Ss.transition=d}}return!1}function Bb(l,d,x){d=jl(x,d),d=sb(l,d,1),l=ca(l,d,1),d=Br(),l!==null&&(ae(l,1,d),Qr(l,d))}function Un(l,d,x){if(l.tag===3)Bb(l,l,x);else for(;d!==null;){if(d.tag===3){Bb(d,l,x);break}else if(d.tag===1){var _=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(ua===null||!ua.has(_))){l=jl(x,l),l=ib(d,l,1),d=ca(d,l,1),l=Br(),d!==null&&(ae(d,1,l),Qr(d,l));break}}d=d.return}}function wS(l,d,x){var _=l.pingCache;_!==null&&_.delete(d),d=Br(),l.pingedLanes|=l.suspendedLanes&x,dr===l&&(_r&x)===x&&(sr===4||sr===3&&(_r&130023424)===_r&&500>on()-um?xo(l,0):dm|=x),Qr(l,d)}function qb(l,d){d===0&&((l.mode&1)===0?d=1:(d=Ds,Ds<<=1,(Ds&130023424)===0&&(Ds=4194304)));var x=Br();l=Ei(l,d),l!==null&&(ae(l,d,x),Qr(l,x))}function jS(l){var d=l.memoizedState,x=0;d!==null&&(x=d.retryLane),qb(l,x)}function NS(l,d){var x=0;switch(l.tag){case 13:var _=l.stateNode,A=l.memoizedState;A!==null&&(x=A.retryLane);break;case 19:_=l.stateNode;break;default:throw Error(n(314))}_!==null&&_.delete(d),qb(l,x)}var Wb;Wb=function(l,d,x){if(l!==null)if(l.memoizedProps!==d.pendingProps||Yr.current)Gr=!0;else{if((l.lanes&x)===0&&(d.flags&128)===0)return Gr=!1,dS(l,d,x);Gr=(l.flags&131072)!==0}else Gr=!1,Pn&&(d.flags&1048576)!==0&&wv(d,Au,d.index);switch(d.lanes=0,d.tag){case 2:var _=d.type;Uu(l,d),l=d.pendingProps;var A=pl(d,Er.current);bl(d,x),A=Wp(null,d,_,l,A,x);var D=Up();return d.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Kr(_)?(D=!0,ku(d)):D=!1,d.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,Tp(d),A.updater=qu,d.stateNode=A,A._reactInternals=d,Gp(d,_,l,x),d=Zp(null,d,_,!0,D,x)):(d.tag=0,Pn&&D&&kp(d),zr(null,d,A,x),d=d.child),d;case 16:_=d.elementType;e:{switch(Uu(l,d),l=d.pendingProps,A=_._init,_=A(_._payload),d.type=_,A=d.tag=kS(_),l=Hs(_,l),A){case 0:d=Jp(null,d,_,l,x);break e;case 1:d=pb(null,d,_,l,x);break e;case 11:d=cb(null,d,_,l,x);break e;case 14:d=db(null,d,_,Hs(_.type,l),x);break e}throw Error(n(306,_,""))}return d;case 0:return _=d.type,A=d.pendingProps,A=d.elementType===_?A:Hs(_,A),Jp(l,d,_,A,x);case 1:return _=d.type,A=d.pendingProps,A=d.elementType===_?A:Hs(_,A),pb(l,d,_,A,x);case 3:e:{if(mb(d),l===null)throw Error(n(387));_=d.pendingProps,D=d.memoizedState,A=D.element,Lv(l,d),Ru(d,_,null,x);var $=d.memoizedState;if(_=$.element,D.isDehydrated)if(D={element:_,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},d.updateQueue.baseState=D,d.memoizedState=D,d.flags&256){A=jl(Error(n(423)),d),d=xb(l,d,_,x,A);break e}else if(_!==A){A=jl(Error(n(424)),d),d=xb(l,d,_,x,A);break e}else for(ms=sa(d.stateNode.containerInfo.firstChild),ps=d,Pn=!0,Us=null,x=Av(d,null,_,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(gl(),_===A){d=Oi(l,d,x);break e}zr(l,d,_,x)}d=d.child}return d;case 5:return Pv(d),l===null&&Ap(d),_=d.type,A=d.pendingProps,D=l!==null?l.memoizedProps:null,$=A.children,vp(_,A)?$=null:D!==null&&vp(_,D)&&(d.flags|=32),hb(l,d),zr(l,d,$,x),d.child;case 6:return l===null&&Ap(d),null;case 13:return gb(l,d,x);case 4:return Dp(d,d.stateNode.containerInfo),_=d.pendingProps,l===null?d.child=yl(d,null,_,x):zr(l,d,_,x),d.child;case 11:return _=d.type,A=d.pendingProps,A=d.elementType===_?A:Hs(_,A),cb(l,d,_,A,x);case 7:return zr(l,d,d.pendingProps,x),d.child;case 8:return zr(l,d,d.pendingProps.children,x),d.child;case 12:return zr(l,d,d.pendingProps.children,x),d.child;case 10:e:{if(_=d.type._context,A=d.pendingProps,D=d.memoizedProps,$=A.value,_n(Ou,_._currentValue),_._currentValue=$,D!==null)if(Ws(D.value,$)){if(D.children===A.children&&!Yr.current){d=Oi(l,d,x);break e}}else for(D=d.child,D!==null&&(D.return=d);D!==null;){var ce=D.dependencies;if(ce!==null){$=D.child;for(var xe=ce.firstContext;xe!==null;){if(xe.context===_){if(D.tag===1){xe=Li(-1,x&-x),xe.tag=2;var Pe=D.updateQueue;if(Pe!==null){Pe=Pe.shared;var Ge=Pe.pending;Ge===null?xe.next=xe:(xe.next=Ge.next,Ge.next=xe),Pe.pending=xe}}D.lanes|=x,xe=D.alternate,xe!==null&&(xe.lanes|=x),Pp(D.return,x,d),ce.lanes|=x;break}xe=xe.next}}else if(D.tag===10)$=D.type===d.type?null:D.child;else if(D.tag===18){if($=D.return,$===null)throw Error(n(341));$.lanes|=x,ce=$.alternate,ce!==null&&(ce.lanes|=x),Pp($,x,d),$=D.sibling}else $=D.child;if($!==null)$.return=D;else for($=D;$!==null;){if($===d){$=null;break}if(D=$.sibling,D!==null){D.return=$.return,$=D;break}$=$.return}D=$}zr(l,d,A.children,x),d=d.child}return d;case 9:return A=d.type,_=d.pendingProps.children,bl(d,x),A=_s(A),_=_(A),d.flags|=1,zr(l,d,_,x),d.child;case 14:return _=d.type,A=Hs(_,d.pendingProps),A=Hs(_.type,A),db(l,d,_,A,x);case 15:return ub(l,d,d.type,d.pendingProps,x);case 17:return _=d.type,A=d.pendingProps,A=d.elementType===_?A:Hs(_,A),Uu(l,d),d.tag=1,Kr(_)?(l=!0,ku(d)):l=!1,bl(d,x),nb(d,_,A),Gp(d,_,A,x),Zp(null,d,_,!0,l,x);case 19:return vb(l,d,x);case 22:return fb(l,d,x)}throw Error(n(156,d.tag))};function Ub(l,d){return bn(l,d)}function _S(l,d,x,_){this.tag=l,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(l,d,x,_){return new _S(l,d,x,_)}function vm(l){return l=l.prototype,!(!l||!l.isReactComponent)}function kS(l){if(typeof l=="function")return vm(l)?1:0;if(l!=null){if(l=l.$$typeof,l===P)return 11;if(l===G)return 14}return 2}function ma(l,d){var x=l.alternate;return x===null?(x=Cs(l.tag,d,l.key,l.mode),x.elementType=l.elementType,x.type=l.type,x.stateNode=l.stateNode,x.alternate=l,l.alternate=x):(x.pendingProps=d,x.type=l.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=l.flags&14680064,x.childLanes=l.childLanes,x.lanes=l.lanes,x.child=l.child,x.memoizedProps=l.memoizedProps,x.memoizedState=l.memoizedState,x.updateQueue=l.updateQueue,d=l.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=l.sibling,x.index=l.index,x.ref=l.ref,x}function ef(l,d,x,_,A,D){var $=2;if(_=l,typeof l=="function")vm(l)&&($=1);else if(typeof l=="string")$=5;else e:switch(l){case O:return yo(x.children,A,D,d);case M:$=8,A|=8;break;case B:return l=Cs(12,x,d,A|2),l.elementType=B,l.lanes=D,l;case q:return l=Cs(13,x,d,A),l.elementType=q,l.lanes=D,l;case H:return l=Cs(19,x,d,A),l.elementType=H,l.lanes=D,l;case X:return tf(x,A,D,d);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:$=10;break e;case R:$=9;break e;case P:$=11;break e;case G:$=14;break e;case ne:$=16,_=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return d=Cs($,x,d,A),d.elementType=l,d.type=_,d.lanes=D,d}function yo(l,d,x,_){return l=Cs(7,l,_,d),l.lanes=x,l}function tf(l,d,x,_){return l=Cs(22,l,_,d),l.elementType=X,l.lanes=x,l.stateNode={isHidden:!1},l}function bm(l,d,x){return l=Cs(6,l,null,d),l.lanes=x,l}function wm(l,d,x){return d=Cs(4,l.children!==null?l.children:[],l.key,d),d.lanes=x,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}function SS(l,d,x,_,A){this.tag=d,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Se(0),this.expirationTimes=Se(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.identifierPrefix=_,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function jm(l,d,x,_,A,D,$,ce,xe){return l=new SS(l,d,x,ce,xe),d===1?(d=1,D===!0&&(d|=8)):d=0,D=Cs(3,null,null,d),l.current=D,D.stateNode=l,D.memoizedState={element:_,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tp(D),l}function CS(l,d,x){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:_==null?null:""+_,children:l,containerInfo:d,implementation:x}}function Hb(l){if(!l)return aa;l=l._reactInternals;e:{if(Cr(l)!==l||l.tag!==1)throw Error(n(170));var d=l;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Kr(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(l.tag===1){var x=l.type;if(Kr(x))return yv(l,x,d)}return d}function $b(l,d,x,_,A,D,$,ce,xe){return l=jm(x,_,!0,l,A,D,$,ce,xe),l.context=Hb(null),x=l.current,_=Br(),A=ha(x),D=Li(_,A),D.callback=d??null,ca(x,D,A),l.current.lanes=A,ae(l,A,_),Qr(l,_),l}function nf(l,d,x,_){var A=d.current,D=Br(),$=ha(A);return x=Hb(x),d.context===null?d.context=x:d.pendingContext=x,d=Li(D,$),d.payload={element:l},_=_===void 0?null:_,_!==null&&(d.callback=_),l=ca(A,d,$),l!==null&&(Ys(l,A,$,D),Pu(l,A,$)),$}function rf(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function Vb(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var x=l.retryLane;l.retryLane=x!==0&&x<d?x:d}}function Nm(l,d){Vb(l,d),(l=l.alternate)&&Vb(l,d)}function AS(){return null}var Yb=typeof reportError=="function"?reportError:function(l){console.error(l)};function _m(l){this._internalRoot=l}sf.prototype.render=_m.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(n(409));nf(l,d,null,null)},sf.prototype.unmount=_m.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;mo(function(){nf(null,l,null,null)}),d[ki]=null}};function sf(l){this._internalRoot=l}sf.prototype.unstable_scheduleHydration=function(l){if(l){var d=Is();l={blockedOn:null,target:l,priority:d};for(var x=0;x<pn.length&&d!==0&&d<pn[x].priority;x++);pn.splice(x,0,l),x===0&&ji(l)}};function km(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function af(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function Kb(){}function ES(l,d,x,_,A){if(A){if(typeof _=="function"){var D=_;_=function(){var Pe=rf($);D.call(Pe)}}var $=$b(d,_,l,0,null,!1,!1,"",Kb);return l._reactRootContainer=$,l[ki]=$.current,kc(l.nodeType===8?l.parentNode:l),mo(),$}for(;A=l.lastChild;)l.removeChild(A);if(typeof _=="function"){var ce=_;_=function(){var Pe=rf(xe);ce.call(Pe)}}var xe=jm(l,0,!1,null,null,!1,!1,"",Kb);return l._reactRootContainer=xe,l[ki]=xe.current,kc(l.nodeType===8?l.parentNode:l),mo(function(){nf(d,xe,x,_)}),xe}function of(l,d,x,_,A){var D=x._reactRootContainer;if(D){var $=D;if(typeof A=="function"){var ce=A;A=function(){var xe=rf($);ce.call(xe)}}nf(d,$,l,A)}else $=ES(x,d,l,A,_);return rf($)}Jn=function(l){switch(l.tag){case 3:var d=l.stateNode;if(d.current.memoizedState.isDehydrated){var x=lr(d.pendingLanes);x!==0&&(ye(d,x|1),Qr(d,on()),(an&6)===0&&(kl=on()+500,oa()))}break;case 13:mo(function(){var _=Ei(l,1);if(_!==null){var A=Br();Ys(_,l,1,A)}}),Nm(l,1)}},wr=function(l){if(l.tag===13){var d=Ei(l,134217728);if(d!==null){var x=Br();Ys(d,l,134217728,x)}Nm(l,134217728)}},Yn=function(l){if(l.tag===13){var d=ha(l),x=Ei(l,d);if(x!==null){var _=Br();Ys(x,l,d,_)}Nm(l,d)}},Is=function(){return De},Fs=function(l,d){var x=De;try{return De=l,d()}finally{De=x}},Sr=function(l,d,x){switch(d){case"input":if(at(l,x),d=x.name,x.type==="radio"&&d!=null){for(x=l;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<x.length;d++){var _=x[d];if(_!==l&&_.form===l.form){var A=Nu(_);if(!A)throw Error(n(90));$e(_),at(_,A)}}}break;case"textarea":re(l,x);break;case"select":d=x.value,d!=null&&Ne(l,!!x.multiple,d,!1)}},Jt=xm,ct=mo;var LS={usingClientEntryPoint:!1,Events:[Ac,fl,Nu,vn,At,xm]},Wc={findFiberByHostInstance:ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OS={bundleType:Wc.bundleType,version:Wc.version,rendererPackageName:Wc.rendererPackageName,rendererConfig:Wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=ot(l),l===null?null:l.stateNode},findFiberByHostInstance:Wc.findFiberByHostInstance||AS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{bs=lf.inject(OS),An=lf}catch{}}return Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LS,Jr.createPortal=function(l,d){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!km(d))throw Error(n(200));return CS(l,d,null,x)},Jr.createRoot=function(l,d){if(!km(l))throw Error(n(299));var x=!1,_="",A=Yb;return d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onRecoverableError!==void 0&&(A=d.onRecoverableError)),d=jm(l,1,!1,null,null,x,!1,_,A),l[ki]=d.current,kc(l.nodeType===8?l.parentNode:l),new _m(d)},Jr.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=ot(d),l=l===null?null:l.stateNode,l},Jr.flushSync=function(l){return mo(l)},Jr.hydrate=function(l,d,x){if(!af(d))throw Error(n(200));return of(null,l,d,!0,x)},Jr.hydrateRoot=function(l,d,x){if(!km(l))throw Error(n(405));var _=x!=null&&x.hydratedSources||null,A=!1,D="",$=Yb;if(x!=null&&(x.unstable_strictMode===!0&&(A=!0),x.identifierPrefix!==void 0&&(D=x.identifierPrefix),x.onRecoverableError!==void 0&&($=x.onRecoverableError)),d=$b(d,null,l,1,x??null,A,!1,D,$),l[ki]=d.current,kc(l),_)for(l=0;l<_.length;l++)x=_[l],A=x._getVersion,A=A(x._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[x,A]:d.mutableSourceEagerHydrationData.push(x,A);return new sf(d)},Jr.render=function(l,d,x){if(!af(d))throw Error(n(200));return of(null,l,d,!1,x)},Jr.unmountComponentAtNode=function(l){if(!af(l))throw Error(n(40));return l._reactRootContainer?(mo(function(){of(null,null,l,!1,function(){l._reactRootContainer=null,l[ki]=null})}),!0):!1},Jr.unstable_batchedUpdates=xm,Jr.unstable_renderSubtreeIntoContainer=function(l,d,x,_){if(!af(x))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return of(l,d,x,!1,_)},Jr.version="18.3.1-next-f1338f8080-20240426",Jr}var r1;function Hg(){if(r1)return Em.exports;r1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Em.exports=WS(),Em.exports}var s1;function US(){if(s1)return uf;s1=1;var t=Hg();return uf.createRoot=t.createRoot,uf.hydrateRoot=t.hydrateRoot,uf}var HS=US();const $S=Ug(HS);var id=Hg();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Nd.apply(this,arguments)}var Ma;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ma||(Ma={}));const i1="popstate";function VS(t){t===void 0&&(t={});function e(s,i){let{pathname:a,search:o,hash:c}=s.location;return $x("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:Kf(i)}return KS(e,n,null,t)}function Gn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function r_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YS(){return Math.random().toString(36).substr(2,8)}function a1(t,e){return{usr:t.state,key:t.key,idx:e}}function $x(t,e,n,s){return n===void 0&&(n=null),Nd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?tc(e):e,{state:n,key:e&&e.key||s||YS()})}function Kf(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function tc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function KS(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,c=Ma.Pop,u=null,f=h();f==null&&(f=0,o.replaceState(Nd({},o.state,{idx:f}),""));function h(){return(o.state||{idx:null}).idx}function p(){c=Ma.Pop;let v=h(),w=v==null?null:v-f;f=v,u&&u({action:c,location:b.location,delta:w})}function m(v,w){c=Ma.Push;let N=$x(b.location,v,w);f=h()+1;let k=a1(N,f),j=b.createHref(N);try{o.pushState(k,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(j)}a&&u&&u({action:c,location:b.location,delta:1})}function g(v,w){c=Ma.Replace;let N=$x(b.location,v,w);f=h();let k=a1(N,f),j=b.createHref(N);o.replaceState(k,"",j),a&&u&&u({action:c,location:b.location,delta:0})}function y(v){let w=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof v=="string"?v:Kf(v);return N=N.replace(/ $/,"%20"),Gn(w,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,w)}let b={get action(){return c},get location(){return t(i,o)},listen(v){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(i1,p),u=v,()=>{i.removeEventListener(i1,p),u=null}},createHref(v){return e(i,v)},createURL:y,encodeLocation(v){let w=y(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:g,go(v){return o.go(v)}};return b}var o1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(o1||(o1={}));function GS(t,e,n){return n===void 0&&(n="/"),XS(t,e,n)}function XS(t,e,n,s){let i=typeof e=="string"?tc(e):e,a=$g(i.pathname||"/",n);if(a==null)return null;let o=s_(t);QS(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let f=cC(a);c=aC(o[u],f)}return c}function s_(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Gn(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let f=Da([s,u.relativePath]),h=n.concat(u);a.children&&a.children.length>0&&(Gn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),s_(a.children,e,h,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:sC(f,a.index),routesMeta:h})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let u of i_(a.path))i(a,o,u)}),e}function i_(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=i_(s.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function QS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iC(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const JS=/^:[\w-]+$/,ZS=3,eC=2,tC=1,nC=10,rC=-2,l1=t=>t==="*";function sC(t,e){let n=t.split("/"),s=n.length;return n.some(l1)&&(s+=rC),e&&(s+=eC),n.filter(i=>!l1(i)).reduce((i,a)=>i+(JS.test(a)?ZS:a===""?tC:nC),s)}function iC(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function aC(t,e,n){let{routesMeta:s}=t,i={},a="/",o=[];for(let c=0;c<s.length;++c){let u=s[c],f=c===s.length-1,h=a==="/"?e:e.slice(a.length)||"/",p=oC({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},h),m=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Da([a,p.pathname]),pathnameBase:hC(Da([a,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(a=Da([a,p.pathnameBase]))}return o}function oC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=lC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:s.reduce((f,h,p)=>{let{paramName:m,isOptional:g}=h;if(m==="*"){let b=c[p]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const y=c[p];return g&&!y?f[m]=void 0:f[m]=(y||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:t}}function lC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),r_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function cC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return r_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $g(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function dC(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?tc(t):t;return{pathname:n?n.startsWith("/")?n:uC(n,e):e,search:pC(s),hash:mC(i)}}function uC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Mm(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Vg(t,e){let n=fC(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Yg(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=tc(t):(i=Nd({},t),Gn(!i.pathname||!i.pathname.includes("?"),Mm("?","pathname","search",i)),Gn(!i.pathname||!i.pathname.includes("#"),Mm("#","pathname","hash",i)),Gn(!i.search||!i.search.includes("#"),Mm("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}c=p>=0?e[p]:"/"}let u=dC(i,c),f=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||h)&&(u.pathname+="/"),u}const Da=t=>t.join("/").replace(/\/\/+/g,"/"),hC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function xC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const a_=["post","put","patch","delete"];new Set(a_);const gC=["get",...a_];new Set(gC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},_d.apply(this,arguments)}const Kg=L.createContext(null),yC=L.createContext(null),Va=L.createContext(null),wh=L.createContext(null),Xi=L.createContext({outlet:null,matches:[],isDataRoute:!1}),o_=L.createContext(null);function vC(t,e){let{relative:n}=e===void 0?{}:e;nc()||Gn(!1);let{basename:s,navigator:i}=L.useContext(Va),{hash:a,pathname:o,search:c}=c_(t,{relative:n}),u=o;return s!=="/"&&(u=o==="/"?s:Da([s,o])),i.createHref({pathname:u,search:c,hash:a})}function nc(){return L.useContext(wh)!=null}function Ko(){return nc()||Gn(!1),L.useContext(wh).location}function l_(t){L.useContext(Va).static||L.useLayoutEffect(t)}function rc(){let{isDataRoute:t}=L.useContext(Xi);return t?RC():bC()}function bC(){nc()||Gn(!1);let t=L.useContext(Kg),{basename:e,future:n,navigator:s}=L.useContext(Va),{matches:i}=L.useContext(Xi),{pathname:a}=Ko(),o=JSON.stringify(Vg(i,n.v7_relativeSplatPath)),c=L.useRef(!1);return l_(()=>{c.current=!0}),L.useCallback(function(f,h){if(h===void 0&&(h={}),!c.current)return;if(typeof f=="number"){s.go(f);return}let p=Yg(f,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Da([e,p.pathname])),(h.replace?s.replace:s.push)(p,h.state,h)},[e,s,o,a,t])}const wC=L.createContext(null);function jC(t){let e=L.useContext(Xi).outlet;return e&&L.createElement(wC.Provider,{value:t},e)}function c_(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=L.useContext(Va),{matches:i}=L.useContext(Xi),{pathname:a}=Ko(),o=JSON.stringify(Vg(i,s.v7_relativeSplatPath));return L.useMemo(()=>Yg(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function NC(t,e){return _C(t,e)}function _C(t,e,n,s){nc()||Gn(!1);let{navigator:i}=L.useContext(Va),{matches:a}=L.useContext(Xi),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let f=Ko(),h;if(e){var p;let v=typeof e=="string"?tc(e):e;u==="/"||(p=v.pathname)!=null&&p.startsWith(u)||Gn(!1),h=v}else h=f;let m=h.pathname||"/",g=m;if(u!=="/"){let v=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=GS(t,{pathname:g}),b=EC(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:Da([u,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:Da([u,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,n,s);return e&&b?L.createElement(wh.Provider,{value:{location:_d({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ma.Pop}},b):b}function kC(){let t=PC(),e=xC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:i},n):null,null)}const SC=L.createElement(kC,null);class CC extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Xi.Provider,{value:this.props.routeContext},L.createElement(o_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AC(t){let{routeContext:e,match:n,children:s}=t,i=L.useContext(Kg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Xi.Provider,{value:e},s)}function EC(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let h=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);h>=0||Gn(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,f=-1;if(n&&s&&s.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:m,errors:g}=n,y=p.route.loader&&m[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||y){u=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let g,y=!1,b=null,v=null;n&&(g=c&&p.route.id?c[p.route.id]:void 0,b=p.route.errorElement||SC,u&&(f<0&&m===0?(TC("route-fallback"),y=!0,v=null):f===m&&(y=!0,v=p.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),N=()=>{let k;return g?k=b:y?k=v:p.route.Component?k=L.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,L.createElement(AC,{match:p,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?L.createElement(CC,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:N(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):N()},null)}var d_=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(d_||{}),u_=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(u_||{});function LC(t){let e=L.useContext(Kg);return e||Gn(!1),e}function OC(t){let e=L.useContext(yC);return e||Gn(!1),e}function MC(t){let e=L.useContext(Xi);return e||Gn(!1),e}function f_(t){let e=MC(),n=e.matches[e.matches.length-1];return n.route.id||Gn(!1),n.route.id}function PC(){var t;let e=L.useContext(o_),n=OC(),s=f_();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function RC(){let{router:t}=LC(d_.UseNavigateStable),e=f_(u_.UseNavigateStable),n=L.useRef(!1);return l_(()=>{n.current=!0}),L.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,_d({fromRouteId:e},a)))},[t,e])}const c1={};function TC(t,e,n){c1[t]||(c1[t]=!0)}function DC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function d1(t){let{to:e,replace:n,state:s,relative:i}=t;nc()||Gn(!1);let{future:a,static:o}=L.useContext(Va),{matches:c}=L.useContext(Xi),{pathname:u}=Ko(),f=rc(),h=Yg(e,Vg(c,a.v7_relativeSplatPath),u,i==="path"),p=JSON.stringify(h);return L.useEffect(()=>f(JSON.parse(p),{replace:n,state:s,relative:i}),[f,p,i,n,s]),null}function IC(t){return jC(t.context)}function fr(t){Gn(!1)}function FC(t){let{basename:e="/",children:n=null,location:s,navigationType:i=Ma.Pop,navigator:a,static:o=!1,future:c}=t;nc()&&Gn(!1);let u=e.replace(/^\/*/,"/"),f=L.useMemo(()=>({basename:u,navigator:a,static:o,future:_d({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof s=="string"&&(s=tc(s));let{pathname:h="/",search:p="",hash:m="",state:g=null,key:y="default"}=s,b=L.useMemo(()=>{let v=$g(h,u);return v==null?null:{location:{pathname:v,search:p,hash:m,state:g,key:y},navigationType:i}},[u,h,p,m,g,y,i]);return b==null?null:L.createElement(Va.Provider,{value:f},L.createElement(wh.Provider,{children:n,value:b}))}function zC(t){let{children:e,location:n}=t;return NC(Vx(e),n)}new Promise(()=>{});function Vx(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(s,i)=>{if(!L.isValidElement(s))return;let a=[...e,i];if(s.type===L.Fragment){n.push.apply(n,Vx(s.props.children,a));return}s.type!==fr&&Gn(!1),!s.props.index||!s.props.children||Gn(!1);let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Vx(s.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yx(){return Yx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Yx.apply(this,arguments)}function BC(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function qC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function WC(t,e){return t.button===0&&(!e||e==="_self")&&!qC(t)}const UC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],HC="6";try{window.__reactRouterVersion=HC}catch{}const $C="startTransition",u1=zS[$C];function VC(t){let{basename:e,children:n,future:s,window:i}=t,a=L.useRef();a.current==null&&(a.current=VS({window:i,v5Compat:!0}));let o=a.current,[c,u]=L.useState({action:o.action,location:o.location}),{v7_startTransition:f}=s||{},h=L.useCallback(p=>{f&&u1?u1(()=>u(p)):u(p)},[u,f]);return L.useLayoutEffect(()=>o.listen(h),[o,h]),L.useEffect(()=>DC(s),[s]),L.createElement(FC,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:s})}const YC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GC=L.forwardRef(function(e,n){let{onClick:s,relative:i,reloadDocument:a,replace:o,state:c,target:u,to:f,preventScrollReset:h,viewTransition:p}=e,m=BC(e,UC),{basename:g}=L.useContext(Va),y,b=!1;if(typeof f=="string"&&KC.test(f)&&(y=f,YC))try{let k=new URL(window.location.href),j=f.startsWith("//")?new URL(k.protocol+f):new URL(f),S=$g(j.pathname,g);j.origin===k.origin&&S!=null?f=S+j.search+j.hash:b=!0}catch{}let v=vC(f,{relative:i}),w=XC(f,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:p});function N(k){s&&s(k),k.defaultPrevented||w(k)}return L.createElement("a",Yx({},m,{href:y||v,onClick:b||a?s:N,ref:n,target:u}))});var f1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(f1||(f1={}));var h1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(h1||(h1={}));function XC(t,e){let{target:n,replace:s,state:i,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=rc(),f=Ko(),h=c_(t,{relative:o});return L.useCallback(p=>{if(WC(p,n)){p.preventDefault();let m=s!==void 0?s:Kf(f)===Kf(h);u(t,{replace:m,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[f,u,h,s,i,n,t,a,o,c])}const p1=t=>{let e;const n=new Set,s=(f,h)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const m=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(g=>g(e,m))}},i=()=>e,c={setState:s,getState:i,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f))},u=e=t(s,i,c);return c},QC=(t=>t?p1(t):p1),JC=t=>t;function ZC(t,e=JC){const n=wt.useSyncExternalStore(t.subscribe,wt.useCallback(()=>e(t.getState()),[t,e]),wt.useCallback(()=>e(t.getInitialState()),[t,e]));return wt.useDebugValue(n),n}const m1=t=>{const e=QC(t),n=s=>ZC(e,s);return Object.assign(n,e),n},h_=(t=>t?m1(t):m1);function e3(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const Kx=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(s){return Kx(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return Kx(s)(n)}}}},t3=(t,e)=>(n,s,i)=>{let a={storage:e3(()=>localStorage),partialize:b=>b,version:0,merge:(b,v)=>({...v,...b}),...e},o=!1;const c=new Set,u=new Set;let f=a.storage;if(!f)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...b)},s,i);const h=()=>{const b=a.partialize({...s()});return f.setItem(a.name,{state:b,version:a.version})},p=i.setState;i.setState=(b,v)=>(p(b,v),h());const m=t((...b)=>(n(...b),h()),s,i);i.getInitialState=()=>m;let g;const y=()=>{var b,v;if(!f)return;o=!1,c.forEach(N=>{var k;return N((k=s())!=null?k:m)});const w=((v=a.onRehydrateStorage)==null?void 0:v.call(a,(b=s())!=null?b:m))||void 0;return Kx(f.getItem.bind(f))(a.name).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==a.version){if(a.migrate){const k=a.migrate(N.state,N.version);return k instanceof Promise?k.then(j=>[!0,j]):[!0,k]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,N.state];return[!1,void 0]}).then(N=>{var k;const[j,S]=N;if(g=a.merge(S,(k=s())!=null?k:m),n(g,!0),j)return h()}).then(()=>{w==null||w(g,void 0),g=s(),o=!0,u.forEach(N=>N(g))}).catch(N=>{w==null||w(void 0,N)})};return i.persist={setOptions:b=>{a={...a,...b},b.storage&&(f=b.storage)},clearStorage:()=>{f==null||f.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:b=>(c.add(b),()=>{c.delete(b)}),onFinishHydration:b=>(u.add(b),()=>{u.delete(b)})},a.skipHydration||y(),g||m},n3=t3;function p_(t,e){return function(){return t.apply(e,arguments)}}const{toString:r3}=Object.prototype,{getPrototypeOf:Gg}=Object,{iterator:jh,toStringTag:m_}=Symbol,Nh=(t=>e=>{const n=r3.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Zs=t=>(t=t.toLowerCase(),e=>Nh(e)===t),_h=t=>e=>typeof e===t,{isArray:sc}=Array,Kl=_h("undefined");function zd(t){return t!==null&&!Kl(t)&&t.constructor!==null&&!Kl(t.constructor)&&os(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const x_=Zs("ArrayBuffer");function s3(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&x_(t.buffer),e}const i3=_h("string"),os=_h("function"),g_=_h("number"),Bd=t=>t!==null&&typeof t=="object",a3=t=>t===!0||t===!1,Df=t=>{if(Nh(t)!=="object")return!1;const e=Gg(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(m_ in t)&&!(jh in t)},o3=t=>{if(!Bd(t)||zd(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},l3=Zs("Date"),c3=Zs("File"),d3=Zs("Blob"),u3=Zs("FileList"),f3=t=>Bd(t)&&os(t.pipe),h3=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||os(t.append)&&((e=Nh(t))==="formdata"||e==="object"&&os(t.toString)&&t.toString()==="[object FormData]"))},p3=Zs("URLSearchParams"),[m3,x3,g3,y3]=["ReadableStream","Request","Response","Headers"].map(Zs),v3=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function qd(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,i;if(typeof t!="object"&&(t=[t]),sc(t))for(s=0,i=t.length;s<i;s++)e.call(null,t[s],s,t);else{if(zd(t))return;const a=n?Object.getOwnPropertyNames(t):Object.keys(t),o=a.length;let c;for(s=0;s<o;s++)c=a[s],e.call(null,t[c],c,t)}}function y_(t,e){if(zd(t))return null;e=e.toLowerCase();const n=Object.keys(t);let s=n.length,i;for(;s-- >0;)if(i=n[s],e===i.toLowerCase())return i;return null}const ko=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,v_=t=>!Kl(t)&&t!==ko;function Gx(){const{caseless:t,skipUndefined:e}=v_(this)&&this||{},n={},s=(i,a)=>{const o=t&&y_(n,a)||a;Df(n[o])&&Df(i)?n[o]=Gx(n[o],i):Df(i)?n[o]=Gx({},i):sc(i)?n[o]=i.slice():(!e||!Kl(i))&&(n[o]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&qd(arguments[i],s);return n}const b3=(t,e,n,{allOwnKeys:s}={})=>(qd(e,(i,a)=>{n&&os(i)?t[a]=p_(i,n):t[a]=i},{allOwnKeys:s}),t),w3=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),j3=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},N3=(t,e,n,s)=>{let i,a,o;const c={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)o=i[a],(!s||s(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=n!==!1&&Gg(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},_3=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},k3=t=>{if(!t)return null;if(sc(t))return t;let e=t.length;if(!g_(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},S3=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Gg(Uint8Array)),C3=(t,e)=>{const s=(t&&t[jh]).call(t);let i;for(;(i=s.next())&&!i.done;){const a=i.value;e.call(t,a[0],a[1])}},A3=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},E3=Zs("HTMLFormElement"),L3=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),x1=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),O3=Zs("RegExp"),b_=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};qd(n,(i,a)=>{let o;(o=e(i,a,t))!==!1&&(s[a]=o||i)}),Object.defineProperties(t,s)},M3=t=>{b_(t,(e,n)=>{if(os(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(os(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},P3=(t,e)=>{const n={},s=i=>{i.forEach(a=>{n[a]=!0})};return sc(t)?s(t):s(String(t).split(e)),n},R3=()=>{},T3=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function D3(t){return!!(t&&os(t.append)&&t[m_]==="FormData"&&t[jh])}const I3=t=>{const e=new Array(10),n=(s,i)=>{if(Bd(s)){if(e.indexOf(s)>=0)return;if(zd(s))return s;if(!("toJSON"in s)){e[i]=s;const a=sc(s)?[]:{};return qd(s,(o,c)=>{const u=n(o,i+1);!Kl(u)&&(a[c]=u)}),e[i]=void 0,a}}return s};return n(t,0)},F3=Zs("AsyncFunction"),z3=t=>t&&(Bd(t)||os(t))&&os(t.then)&&os(t.catch),w_=((t,e)=>t?setImmediate:e?((n,s)=>(ko.addEventListener("message",({source:i,data:a})=>{i===ko&&a===n&&s.length&&s.shift()()},!1),i=>{s.push(i),ko.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",os(ko.postMessage)),B3=typeof queueMicrotask<"u"?queueMicrotask.bind(ko):typeof process<"u"&&process.nextTick||w_,q3=t=>t!=null&&os(t[jh]),Re={isArray:sc,isArrayBuffer:x_,isBuffer:zd,isFormData:h3,isArrayBufferView:s3,isString:i3,isNumber:g_,isBoolean:a3,isObject:Bd,isPlainObject:Df,isEmptyObject:o3,isReadableStream:m3,isRequest:x3,isResponse:g3,isHeaders:y3,isUndefined:Kl,isDate:l3,isFile:c3,isBlob:d3,isRegExp:O3,isFunction:os,isStream:f3,isURLSearchParams:p3,isTypedArray:S3,isFileList:u3,forEach:qd,merge:Gx,extend:b3,trim:v3,stripBOM:w3,inherits:j3,toFlatObject:N3,kindOf:Nh,kindOfTest:Zs,endsWith:_3,toArray:k3,forEachEntry:C3,matchAll:A3,isHTMLForm:E3,hasOwnProperty:x1,hasOwnProp:x1,reduceDescriptors:b_,freezeMethods:M3,toObjectSet:P3,toCamelCase:L3,noop:R3,toFiniteNumber:T3,findKey:y_,global:ko,isContextDefined:v_,isSpecCompliantForm:D3,toJSONObject:I3,isAsyncFn:F3,isThenable:z3,setImmediate:w_,asap:B3,isIterable:q3};function qt(t,e,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}Re.inherits(qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Re.toJSONObject(this.config),code:this.code,status:this.status}}});const j_=qt.prototype,N_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{N_[t]={value:t}});Object.defineProperties(qt,N_);Object.defineProperty(j_,"isAxiosError",{value:!0});qt.from=(t,e,n,s,i,a)=>{const o=Object.create(j_);Re.toFlatObject(t,o,function(h){return h!==Error.prototype},f=>f!=="isAxiosError");const c=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return qt.call(o,c,u,n,s,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",a&&Object.assign(o,a),o};const W3=null;function Xx(t){return Re.isPlainObject(t)||Re.isArray(t)}function __(t){return Re.endsWith(t,"[]")?t.slice(0,-2):t}function g1(t,e,n){return t?t.concat(e).map(function(i,a){return i=__(i),!n&&a?"["+i+"]":i}).join(n?".":""):e}function U3(t){return Re.isArray(t)&&!t.some(Xx)}const H3=Re.toFlatObject(Re,{},null,function(e){return/^is[A-Z]/.test(e)});function kh(t,e,n){if(!Re.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Re.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,v){return!Re.isUndefined(v[b])});const s=n.metaTokens,i=n.visitor||h,a=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Re.isSpecCompliantForm(e);if(!Re.isFunction(i))throw new TypeError("visitor must be a function");function f(y){if(y===null)return"";if(Re.isDate(y))return y.toISOString();if(Re.isBoolean(y))return y.toString();if(!u&&Re.isBlob(y))throw new qt("Blob is not supported. Use a Buffer instead.");return Re.isArrayBuffer(y)||Re.isTypedArray(y)?u&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,b,v){let w=y;if(y&&!v&&typeof y=="object"){if(Re.endsWith(b,"{}"))b=s?b:b.slice(0,-2),y=JSON.stringify(y);else if(Re.isArray(y)&&U3(y)||(Re.isFileList(y)||Re.endsWith(b,"[]"))&&(w=Re.toArray(y)))return b=__(b),w.forEach(function(k,j){!(Re.isUndefined(k)||k===null)&&e.append(o===!0?g1([b],j,a):o===null?b:b+"[]",f(k))}),!1}return Xx(y)?!0:(e.append(g1(v,b,a),f(y)),!1)}const p=[],m=Object.assign(H3,{defaultVisitor:h,convertValue:f,isVisitable:Xx});function g(y,b){if(!Re.isUndefined(y)){if(p.indexOf(y)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(y),Re.forEach(y,function(w,N){(!(Re.isUndefined(w)||w===null)&&i.call(e,w,Re.isString(N)?N.trim():N,b,m))===!0&&g(w,b?b.concat(N):[N])}),p.pop()}}if(!Re.isObject(t))throw new TypeError("data must be an object");return g(t),e}function y1(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Xg(t,e){this._pairs=[],t&&kh(t,this,e)}const k_=Xg.prototype;k_.append=function(e,n){this._pairs.push([e,n])};k_.toString=function(e){const n=e?function(s){return e.call(this,s,y1)}:y1;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function $3(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function S_(t,e,n){if(!e)return t;const s=n&&n.encode||$3;Re.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(i?a=i(e,n):a=Re.isURLSearchParams(e)?e.toString():new Xg(e,n).toString(s),a){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class v1{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Re.forEach(this.handlers,function(s){s!==null&&e(s)})}}const C_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},V3=typeof URLSearchParams<"u"?URLSearchParams:Xg,Y3=typeof FormData<"u"?FormData:null,K3=typeof Blob<"u"?Blob:null,G3={isBrowser:!0,classes:{URLSearchParams:V3,FormData:Y3,Blob:K3},protocols:["http","https","file","blob","url","data"]},Qg=typeof window<"u"&&typeof document<"u",Qx=typeof navigator=="object"&&navigator||void 0,X3=Qg&&(!Qx||["ReactNative","NativeScript","NS"].indexOf(Qx.product)<0),Q3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",J3=Qg&&window.location.href||"http://localhost",Z3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Qg,hasStandardBrowserEnv:X3,hasStandardBrowserWebWorkerEnv:Q3,navigator:Qx,origin:J3},Symbol.toStringTag,{value:"Module"})),Tr={...Z3,...G3};function eA(t,e){return kh(t,new Tr.classes.URLSearchParams,{visitor:function(n,s,i,a){return Tr.isNode&&Re.isBuffer(n)?(this.append(s,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function tA(t){return Re.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function nA(t){const e={},n=Object.keys(t);let s;const i=n.length;let a;for(s=0;s<i;s++)a=n[s],e[a]=t[a];return e}function A_(t){function e(n,s,i,a){let o=n[a++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=a>=n.length;return o=!o&&Re.isArray(i)?i.length:o,u?(Re.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!c):((!i[o]||!Re.isObject(i[o]))&&(i[o]=[]),e(n,s,i[o],a)&&Re.isArray(i[o])&&(i[o]=nA(i[o])),!c)}if(Re.isFormData(t)&&Re.isFunction(t.entries)){const n={};return Re.forEachEntry(t,(s,i)=>{e(tA(s),i,n,0)}),n}return null}function rA(t,e,n){if(Re.isString(t))try{return(e||JSON.parse)(t),Re.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const Wd={transitional:C_,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,a=Re.isObject(e);if(a&&Re.isHTMLForm(e)&&(e=new FormData(e)),Re.isFormData(e))return i?JSON.stringify(A_(e)):e;if(Re.isArrayBuffer(e)||Re.isBuffer(e)||Re.isStream(e)||Re.isFile(e)||Re.isBlob(e)||Re.isReadableStream(e))return e;if(Re.isArrayBufferView(e))return e.buffer;if(Re.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return eA(e,this.formSerializer).toString();if((c=Re.isFileList(e))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return kh(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),rA(e)):e}],transformResponse:[function(e){const n=this.transitional||Wd.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Re.isResponse(e)||Re.isReadableStream(e))return e;if(e&&Re.isString(e)&&(s&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?qt.from(c,qt.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Tr.classes.FormData,Blob:Tr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Re.forEach(["delete","get","head","post","put","patch"],t=>{Wd.headers[t]={}});const sA=Re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iA=t=>{const e={};let n,s,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!n||e[n]&&sA[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},b1=Symbol("internals");function Hc(t){return t&&String(t).trim().toLowerCase()}function If(t){return t===!1||t==null?t:Re.isArray(t)?t.map(If):String(t)}function aA(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const oA=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Pm(t,e,n,s,i){if(Re.isFunction(s))return s.call(this,e,n);if(i&&(e=n),!!Re.isString(e)){if(Re.isString(s))return e.indexOf(s)!==-1;if(Re.isRegExp(s))return s.test(e)}}function lA(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function cA(t,e){const n=Re.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(i,a,o){return this[s].call(this,e,i,a,o)},configurable:!0})})}let ls=class{constructor(e){e&&this.set(e)}set(e,n,s){const i=this;function a(c,u,f){const h=Hc(u);if(!h)throw new Error("header name must be a non-empty string");const p=Re.findKey(i,h);(!p||i[p]===void 0||f===!0||f===void 0&&i[p]!==!1)&&(i[p||u]=If(c))}const o=(c,u)=>Re.forEach(c,(f,h)=>a(f,h,u));if(Re.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Re.isString(e)&&(e=e.trim())&&!oA(e))o(iA(e),n);else if(Re.isObject(e)&&Re.isIterable(e)){let c={},u,f;for(const h of e){if(!Re.isArray(h))throw TypeError("Object iterator must return a key-value pair");c[f=h[0]]=(u=c[f])?Re.isArray(u)?[...u,h[1]]:[u,h[1]]:h[1]}o(c,n)}else e!=null&&a(n,e,s);return this}get(e,n){if(e=Hc(e),e){const s=Re.findKey(this,e);if(s){const i=this[s];if(!n)return i;if(n===!0)return aA(i);if(Re.isFunction(n))return n.call(this,i,s);if(Re.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Hc(e),e){const s=Re.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||Pm(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let i=!1;function a(o){if(o=Hc(o),o){const c=Re.findKey(s,o);c&&(!n||Pm(s,s[c],c,n))&&(delete s[c],i=!0)}}return Re.isArray(e)?e.forEach(a):a(e),i}clear(e){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const a=n[s];(!e||Pm(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const n=this,s={};return Re.forEach(this,(i,a)=>{const o=Re.findKey(s,a);if(o){n[o]=If(i),delete n[a];return}const c=e?lA(a):String(a).trim();c!==a&&delete n[a],n[c]=If(i),s[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Re.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=e&&Re.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[b1]=this[b1]={accessors:{}}).accessors,i=this.prototype;function a(o){const c=Hc(o);s[c]||(cA(i,o),s[c]=!0)}return Re.isArray(e)?e.forEach(a):a(e),this}};ls.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Re.reduceDescriptors(ls.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});Re.freezeMethods(ls);function Rm(t,e){const n=this||Wd,s=e||n,i=ls.from(s.headers);let a=s.data;return Re.forEach(t,function(c){a=c.call(n,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function E_(t){return!!(t&&t.__CANCEL__)}function ic(t,e,n){qt.call(this,t??"canceled",qt.ERR_CANCELED,e,n),this.name="CanceledError"}Re.inherits(ic,qt,{__CANCEL__:!0});function L_(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new qt("Request failed with status code "+n.status,[qt.ERR_BAD_REQUEST,qt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function dA(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function uA(t,e){t=t||10;const n=new Array(t),s=new Array(t);let i=0,a=0,o;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),h=s[a];o||(o=f),n[i]=u,s[i]=f;let p=a,m=0;for(;p!==i;)m+=n[p++],p=p%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),f-o<e)return;const g=h&&f-h;return g?Math.round(m*1e3/g):void 0}}function fA(t,e){let n=0,s=1e3/e,i,a;const o=(f,h=Date.now())=>{n=h,i=null,a&&(clearTimeout(a),a=null),t(...f)};return[(...f)=>{const h=Date.now(),p=h-n;p>=s?o(f,h):(i=f,a||(a=setTimeout(()=>{a=null,o(i)},s-p)))},()=>i&&o(i)]}const Gf=(t,e,n=3)=>{let s=0;const i=uA(50,250);return fA(a=>{const o=a.loaded,c=a.lengthComputable?a.total:void 0,u=o-s,f=i(u),h=o<=c;s=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:f||void 0,estimated:f&&c&&h?(c-o)/f:void 0,event:a,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(p)},n)},w1=(t,e)=>{const n=t!=null;return[s=>e[0]({lengthComputable:n,total:t,loaded:s}),e[1]]},j1=t=>(...e)=>Re.asap(()=>t(...e)),hA=Tr.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Tr.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Tr.origin),Tr.navigator&&/(msie|trident)/i.test(Tr.navigator.userAgent)):()=>!0,pA=Tr.hasStandardBrowserEnv?{write(t,e,n,s,i,a,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];Re.isNumber(n)&&c.push(`expires=${new Date(n).toUTCString()}`),Re.isString(s)&&c.push(`path=${s}`),Re.isString(i)&&c.push(`domain=${i}`),a===!0&&c.push("secure"),Re.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function mA(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function xA(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function O_(t,e,n){let s=!mA(e);return t&&(s||n==!1)?xA(t,e):e}const N1=t=>t instanceof ls?{...t}:t;function Wo(t,e){e=e||{};const n={};function s(f,h,p,m){return Re.isPlainObject(f)&&Re.isPlainObject(h)?Re.merge.call({caseless:m},f,h):Re.isPlainObject(h)?Re.merge({},h):Re.isArray(h)?h.slice():h}function i(f,h,p,m){if(Re.isUndefined(h)){if(!Re.isUndefined(f))return s(void 0,f,p,m)}else return s(f,h,p,m)}function a(f,h){if(!Re.isUndefined(h))return s(void 0,h)}function o(f,h){if(Re.isUndefined(h)){if(!Re.isUndefined(f))return s(void 0,f)}else return s(void 0,h)}function c(f,h,p){if(p in e)return s(f,h);if(p in t)return s(void 0,f)}const u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(f,h,p)=>i(N1(f),N1(h),p,!0)};return Re.forEach(Object.keys({...t,...e}),function(h){const p=u[h]||i,m=p(t[h],e[h],h);Re.isUndefined(m)&&p!==c||(n[h]=m)}),n}const M_=t=>{const e=Wo({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:c}=e;if(e.headers=o=ls.from(o),e.url=S_(O_(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Re.isFormData(n)){if(Tr.hasStandardBrowserEnv||Tr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Re.isFunction(n.getHeaders)){const u=n.getHeaders(),f=["content-type","content-length"];Object.entries(u).forEach(([h,p])=>{f.includes(h.toLowerCase())&&o.set(h,p)})}}if(Tr.hasStandardBrowserEnv&&(s&&Re.isFunction(s)&&(s=s(e)),s||s!==!1&&hA(e.url))){const u=i&&a&&pA.read(a);u&&o.set(i,u)}return e},gA=typeof XMLHttpRequest<"u",yA=gA&&function(t){return new Promise(function(n,s){const i=M_(t);let a=i.data;const o=ls.from(i.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:f}=i,h,p,m,g,y;function b(){g&&g(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function w(){if(!v)return;const k=ls.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!c||c==="text"||c==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:k,config:t,request:v};L_(function(O){n(O),b()},function(O){s(O),b()},S),v=null}"onloadend"in v?v.onloadend=w:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(w)},v.onabort=function(){v&&(s(new qt("Request aborted",qt.ECONNABORTED,t,v)),v=null)},v.onerror=function(j){const S=j&&j.message?j.message:"Network Error",C=new qt(S,qt.ERR_NETWORK,t,v);C.event=j||null,s(C),v=null},v.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||C_;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),s(new qt(j,S.clarifyTimeoutError?qt.ETIMEDOUT:qt.ECONNABORTED,t,v)),v=null},a===void 0&&o.setContentType(null),"setRequestHeader"in v&&Re.forEach(o.toJSON(),function(j,S){v.setRequestHeader(S,j)}),Re.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),c&&c!=="json"&&(v.responseType=i.responseType),f&&([m,y]=Gf(f,!0),v.addEventListener("progress",m)),u&&v.upload&&([p,g]=Gf(u),v.upload.addEventListener("progress",p),v.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(h=k=>{v&&(s(!k||k.type?new ic(null,t,v):k),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const N=dA(i.url);if(N&&Tr.protocols.indexOf(N)===-1){s(new qt("Unsupported protocol "+N+":",qt.ERR_BAD_REQUEST,t));return}v.send(a||null)})},vA=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let s=new AbortController,i;const a=function(f){if(!i){i=!0,c();const h=f instanceof Error?f:this.reason;s.abort(h instanceof qt?h:new ic(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,a(new qt(`timeout ${e} of ms exceeded`,qt.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(a):f.removeEventListener("abort",a)}),t=null)};t.forEach(f=>f.addEventListener("abort",a));const{signal:u}=s;return u.unsubscribe=()=>Re.asap(c),u}},bA=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,i;for(;s<n;)i=s+e,yield t.slice(s,i),s=i},wA=async function*(t,e){for await(const n of jA(t))yield*bA(n,e)},jA=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)break;yield s}}finally{await e.cancel()}},_1=(t,e,n,s)=>{const i=wA(t,e);let a=0,o,c=u=>{o||(o=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:f,value:h}=await i.next();if(f){c(),u.close();return}let p=h.byteLength;if(n){let m=a+=p;n(m)}u.enqueue(new Uint8Array(h))}catch(f){throw c(f),f}},cancel(u){return c(u),i.return()}},{highWaterMark:2})},k1=64*1024,{isFunction:ff}=Re,NA=(({Request:t,Response:e})=>({Request:t,Response:e}))(Re.global),{ReadableStream:S1,TextEncoder:C1}=Re.global,A1=(t,...e)=>{try{return!!t(...e)}catch{return!1}},_A=t=>{t=Re.merge.call({skipUndefined:!0},NA,t);const{fetch:e,Request:n,Response:s}=t,i=e?ff(e):typeof fetch=="function",a=ff(n),o=ff(s);if(!i)return!1;const c=i&&ff(S1),u=i&&(typeof C1=="function"?(y=>b=>y.encode(b))(new C1):async y=>new Uint8Array(await new n(y).arrayBuffer())),f=a&&c&&A1(()=>{let y=!1;const b=new n(Tr.origin,{body:new S1,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!b}),h=o&&c&&A1(()=>Re.isReadableStream(new s("").body)),p={stream:h&&(y=>y.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!p[y]&&(p[y]=(b,v)=>{let w=b&&b[y];if(w)return w.call(b);throw new qt(`Response type '${y}' is not supported`,qt.ERR_NOT_SUPPORT,v)})});const m=async y=>{if(y==null)return 0;if(Re.isBlob(y))return y.size;if(Re.isSpecCompliantForm(y))return(await new n(Tr.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(Re.isArrayBufferView(y)||Re.isArrayBuffer(y))return y.byteLength;if(Re.isURLSearchParams(y)&&(y=y+""),Re.isString(y))return(await u(y)).byteLength},g=async(y,b)=>{const v=Re.toFiniteNumber(y.getContentLength());return v??m(b)};return async y=>{let{url:b,method:v,data:w,signal:N,cancelToken:k,timeout:j,onDownloadProgress:S,onUploadProgress:C,responseType:O,headers:M,withCredentials:B="same-origin",fetchOptions:I}=M_(y),R=e||fetch;O=O?(O+"").toLowerCase():"text";let P=vA([N,k&&k.toAbortSignal()],j),q=null;const H=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let G;try{if(C&&f&&v!=="get"&&v!=="head"&&(G=await g(M,w))!==0){let T=new n(b,{method:"POST",body:w,duplex:"half"}),W;if(Re.isFormData(w)&&(W=T.headers.get("content-type"))&&M.setContentType(W),T.body){const[z,Q]=w1(G,Gf(j1(C)));w=_1(T.body,k1,z,Q)}}Re.isString(B)||(B=B?"include":"omit");const ne=a&&"credentials"in n.prototype,X={...I,signal:P,method:v.toUpperCase(),headers:M.normalize().toJSON(),body:w,duplex:"half",credentials:ne?B:void 0};q=a&&new n(b,X);let ee=await(a?R(q,I):R(b,X));const Y=h&&(O==="stream"||O==="response");if(h&&(S||Y&&H)){const T={};["status","statusText","headers"].forEach(Z=>{T[Z]=ee[Z]});const W=Re.toFiniteNumber(ee.headers.get("content-length")),[z,Q]=S&&w1(W,Gf(j1(S),!0))||[];ee=new s(_1(ee.body,k1,z,()=>{Q&&Q(),H&&H()}),T)}O=O||"text";let U=await p[Re.findKey(p,O)||"text"](ee,y);return!Y&&H&&H(),await new Promise((T,W)=>{L_(T,W,{data:U,headers:ls.from(ee.headers),status:ee.status,statusText:ee.statusText,config:y,request:q})})}catch(ne){throw H&&H(),ne&&ne.name==="TypeError"&&/Load failed|fetch/i.test(ne.message)?Object.assign(new qt("Network Error",qt.ERR_NETWORK,y,q),{cause:ne.cause||ne}):qt.from(ne,ne&&ne.code,y,q)}}},kA=new Map,P_=t=>{let e=t&&t.env||{};const{fetch:n,Request:s,Response:i}=e,a=[s,i,n];let o=a.length,c=o,u,f,h=kA;for(;c--;)u=a[c],f=h.get(u),f===void 0&&h.set(u,f=c?new Map:_A(e)),h=f;return f};P_();const Jg={http:W3,xhr:yA,fetch:{get:P_}};Re.forEach(Jg,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const E1=t=>`- ${t}`,SA=t=>Re.isFunction(t)||t===null||t===!1;function CA(t,e){t=Re.isArray(t)?t:[t];const{length:n}=t;let s,i;const a={};for(let o=0;o<n;o++){s=t[o];let c;if(i=s,!SA(s)&&(i=Jg[(c=String(s)).toLowerCase()],i===void 0))throw new qt(`Unknown adapter '${c}'`);if(i&&(Re.isFunction(i)||(i=i.get(e))))break;a[c||"#"+o]=i}if(!i){const o=Object.entries(a).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=n?o.length>1?`since :
`+o.map(E1).join(`
`):" "+E1(o[0]):"as no adapter specified";throw new qt("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i}const R_={getAdapter:CA,adapters:Jg};function Tm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ic(null,t)}function L1(t){return Tm(t),t.headers=ls.from(t.headers),t.data=Rm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),R_.getAdapter(t.adapter||Wd.adapter,t)(t).then(function(s){return Tm(t),s.data=Rm.call(t,t.transformResponse,s),s.headers=ls.from(s.headers),s},function(s){return E_(s)||(Tm(t),s&&s.response&&(s.response.data=Rm.call(t,t.transformResponse,s.response),s.response.headers=ls.from(s.response.headers))),Promise.reject(s)})}const T_="1.13.1",Sh={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Sh[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const O1={};Sh.transitional=function(e,n,s){function i(a,o){return"[Axios v"+T_+"] Transitional option '"+a+"'"+o+(s?". "+s:"")}return(a,o,c)=>{if(e===!1)throw new qt(i(o," has been removed"+(n?" in "+n:"")),qt.ERR_DEPRECATED);return n&&!O1[o]&&(O1[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,o,c):!0}};Sh.spelling=function(e){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function AA(t,e,n){if(typeof t!="object")throw new qt("options must be an object",qt.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let i=s.length;for(;i-- >0;){const a=s[i],o=e[a];if(o){const c=t[a],u=c===void 0||o(c,a,t);if(u!==!0)throw new qt("option "+a+" must be "+u,qt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new qt("Unknown option "+a,qt.ERR_BAD_OPTION)}}const Ff={assertOptions:AA,validators:Sh},ui=Ff.validators;let zo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new v1,response:new v1}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Wo(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:a}=n;s!==void 0&&Ff.assertOptions(s,{silentJSONParsing:ui.transitional(ui.boolean),forcedJSONParsing:ui.transitional(ui.boolean),clarifyTimeoutError:ui.transitional(ui.boolean)},!1),i!=null&&(Re.isFunction(i)?n.paramsSerializer={serialize:i}:Ff.assertOptions(i,{encode:ui.function,serialize:ui.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ff.assertOptions(n,{baseUrl:ui.spelling("baseURL"),withXsrfToken:ui.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=a&&Re.merge(a.common,a[n.method]);a&&Re.forEach(["delete","get","head","post","put","patch","common"],y=>{delete a[y]}),n.headers=ls.concat(o,a);const c=[];let u=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(u=u&&b.synchronous,c.unshift(b.fulfilled,b.rejected))});const f=[];this.interceptors.response.forEach(function(b){f.push(b.fulfilled,b.rejected)});let h,p=0,m;if(!u){const y=[L1.bind(this),void 0];for(y.unshift(...c),y.push(...f),m=y.length,h=Promise.resolve(n);p<m;)h=h.then(y[p++],y[p++]);return h}m=c.length;let g=n;for(;p<m;){const y=c[p++],b=c[p++];try{g=y(g)}catch(v){b.call(this,v);break}}try{h=L1.call(this,g)}catch(y){return Promise.reject(y)}for(p=0,m=f.length;p<m;)h=h.then(f[p++],f[p++]);return h}getUri(e){e=Wo(this.defaults,e);const n=O_(e.baseURL,e.url,e.allowAbsoluteUrls);return S_(n,e.params,e.paramsSerializer)}};Re.forEach(["delete","get","head","options"],function(e){zo.prototype[e]=function(n,s){return this.request(Wo(s||{},{method:e,url:n,data:(s||{}).data}))}});Re.forEach(["post","put","patch"],function(e){function n(s){return function(a,o,c){return this.request(Wo(c||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}zo.prototype[e]=n(),zo.prototype[e+"Form"]=n(!0)});let EA=class D_{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const s=this;this.promise.then(i=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](i);s._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(c=>{s.subscribe(c),a=c}).then(i);return o.cancel=function(){s.unsubscribe(a)},o},e(function(a,o,c){s.reason||(s.reason=new ic(a,o,c),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=s=>{e.abort(s)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new D_(function(i){e=i}),cancel:e}}};function LA(t){return function(n){return t.apply(null,n)}}function OA(t){return Re.isObject(t)&&t.isAxiosError===!0}const Jx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Jx).forEach(([t,e])=>{Jx[e]=t});function I_(t){const e=new zo(t),n=p_(zo.prototype.request,e);return Re.extend(n,zo.prototype,e,{allOwnKeys:!0}),Re.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return I_(Wo(t,i))},n}const jn=I_(Wd);jn.Axios=zo;jn.CanceledError=ic;jn.CancelToken=EA;jn.isCancel=E_;jn.VERSION=T_;jn.toFormData=kh;jn.AxiosError=qt;jn.Cancel=jn.CanceledError;jn.all=function(e){return Promise.all(e)};jn.spread=LA;jn.isAxiosError=OA;jn.mergeConfig=Wo;jn.AxiosHeaders=ls;jn.formToJSON=t=>A_(Re.isHTMLForm(t)?new FormData(t):t);jn.getAdapter=R_.getAdapter;jn.HttpStatusCode=Jx;jn.default=jn;const{Axios:gz,AxiosError:yz,CanceledError:vz,isCancel:bz,CancelToken:wz,VERSION:jz,all:Nz,Cancel:_z,isAxiosError:kz,spread:Sz,toFormData:Cz,AxiosHeaders:Az,HttpStatusCode:Ez,formToJSON:Lz,getAdapter:Oz,mergeConfig:Mz}=jn,MA=window.location.origin,PA=3e4,RA=2,TA=1e3;async function DA(t,e=RA,n=TA){var s,i;for(let a=0;a<e;a++)try{return await t()}catch(o){const c=o,u=a===e-1,f=!c.response,h=((s=c.response)==null?void 0:s.status)&&c.response.status>=500,p=((i=c.response)==null?void 0:i.status)===429;if(u||!f&&!h&&!p)throw o;const m=n*Math.pow(2,a);await new Promise(g=>setTimeout(g,m))}throw new Error("Max retries reached")}const Zg=jn.create({baseURL:MA,timeout:PA,headers:{"Content-Type":"application/json"},withCredentials:!0});Zg.interceptors.request.use(t=>t,t=>Promise.reject(t));function IA(t){if(t.response){const e=t.response.status,n=t.response.data;switch(e){case 400:return(n==null?void 0:n.error)||"Invalid request. Please check your input.";case 401:return"Your session has expired. Please login again.";case 403:return"You do not have permission to perform this action.";case 404:return(n==null?void 0:n.error)||"The requested resource was not found.";case 429:return"Too many requests. Please try again later.";case 500:return"Server error. Our team has been notified.";case 503:return"Service temporarily unavailable. Please try again later.";default:return(n==null?void 0:n.error)||"An unexpected error occurred."}}else return t.request?"Unable to connect to server. Please check your internet connection.":t.message||"An unexpected error occurred."}Zg.interceptors.response.use(t=>t,t=>{var n,s;const e=t;if(e.userMessage=IA(t),t.response){const{status:i}=t.response;switch(i){case 401:(s=(n=t.config)==null?void 0:n.url)!=null&&s.includes("/api/auth/status")||setTimeout(()=>{window.location.href="/login"},500);break}}return Promise.reject(e)});async function $c(t){try{return(await DA(()=>Zg.request(t))).data}catch(e){throw e}}const qe={get:(t,e)=>$c({...e,method:"GET",url:t}),post:(t,e,n)=>$c({...n,method:"POST",url:t,data:e}),put:(t,e,n)=>$c({...n,method:"PUT",url:t,data:e}),patch:(t,e,n)=>$c({...n,method:"PATCH",url:t,data:e}),delete:(t,e)=>$c({...e,method:"DELETE",url:t})},wo={getCurrentUser:async()=>qe.get("/api/auth/status"),login:async t=>qe.post("/api/auth/login",t),logout:async()=>qe.post("/api/auth/logout"),googleLogin:()=>{window.location.href="/auth/google"},requestPasswordReset:async t=>qe.post("/api/auth/request-reset-password",{email:t}),resetPassword:async t=>qe.post("/api/auth/reset-password",t),changePassword:async(t,e)=>qe.post("/api/auth/change-password",{currentPassword:t,newPassword:e}),checkAuth:async()=>{var t;try{const e=await wo.getCurrentUser();return e.success&&!!((t=e.data)!=null&&t.user)}catch{return!1}},getPermissions:async()=>qe.get("/api/auth/permissions"),viewAsUser:async t=>qe.post("/api/admin/impersonate",{targetEmail:t}),stopImpersonation:async()=>qe.post("/api/admin/stop-impersonation")},Vc={user:null,isAuthenticated:!1,isLoading:!0,role:void 0,permissions:void 0},hf={isImpersonating:!1,originalUser:null},Dr=h_()(n3((t,e)=>({...Vc,...hf,setUser:n=>t({user:n}),setRole:n=>t({role:n}),setPermissions:n=>t({permissions:n}),setAuthenticated:n=>t({isAuthenticated:n}),setLoading:n=>t({isLoading:n}),login:async(n,s)=>{try{t({isLoading:!0});const i=await wo.login({email:n,password:s});if(i.success&&i.data){t({user:i.data.user,role:i.data.role,isAuthenticated:!0,isLoading:!1});const a=await wo.getPermissions();return a.success&&a.data&&t({permissions:a.data}),!0}return t({isLoading:!1}),!1}catch{return t({isLoading:!1}),!1}},logout:async()=>{try{await wo.logout()}catch{}finally{t(Vc),window.location.href="/login"}},checkAuth:async()=>{try{t({isLoading:!0});const n=await wo.getCurrentUser();n.authenticated&&n.user?t({user:n.user,role:n.role,isAuthenticated:!0,permissions:n.permissions,isImpersonating:n.isImpersonating||!1,originalUser:n.originalUser||null,isLoading:!1}):t({...Vc,...hf,isLoading:!1})}catch{t({...Vc,...hf,isLoading:!1})}},startImpersonation:async n=>{try{(await wo.viewAsUser(n)).success&&await e().checkAuth()}catch(s){throw s}},stopImpersonation:async()=>{try{await wo.stopImpersonation(),t({isImpersonating:!1,originalUser:null}),await e().checkAuth(),window.location.reload()}catch(n){throw n}},reset:()=>t({...Vc,...hf})}),{name:"auth-storage",partialize:t=>({user:t.user,role:t.role,isAuthenticated:t.isAuthenticated})}));var ac=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},FA={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Na,Wg,VN,zA=(VN=class{constructor(){_t(this,Na,FA);_t(this,Wg,!1)}setTimeoutProvider(t){lt(this,Na,t)}setTimeout(t,e){return pe(this,Na).setTimeout(t,e)}clearTimeout(t){pe(this,Na).clearTimeout(t)}setInterval(t,e){return pe(this,Na).setInterval(t,e)}clearInterval(t){pe(this,Na).clearInterval(t)}},Na=new WeakMap,Wg=new WeakMap,VN),So=new zA;function BA(t){setTimeout(t,0)}var Uo=typeof window>"u"||"Deno"in globalThis;function Hr(){}function qA(t,e){return typeof t=="function"?t(e):t}function Zx(t){return typeof t=="number"&&t>=0&&t!==1/0}function F_(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ia(t,e){return typeof t=="function"?t(e):t}function Os(t,e){return typeof t=="function"?t(e):t}function M1(t,e){const{type:n="all",exact:s,fetchStatus:i,predicate:a,queryKey:o,stale:c}=t;if(o){if(s){if(e.queryHash!==ey(o,e.options))return!1}else if(!kd(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||a&&!a(e))}function P1(t,e){const{exact:n,status:s,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Ho(e.options.mutationKey)!==Ho(a))return!1}else if(!kd(e.options.mutationKey,a))return!1}return!(s&&e.state.status!==s||i&&!i(e))}function ey(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ho)(t)}function Ho(t){return JSON.stringify(t,(e,n)=>eg(n)?Object.keys(n).sort().reduce((s,i)=>(s[i]=n[i],s),{}):n)}function kd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>kd(t[n],e[n])):!1}var WA=Object.prototype.hasOwnProperty;function z_(t,e){if(t===e)return t;const n=R1(t)&&R1(e);if(!n&&!(eg(t)&&eg(e)))return e;const i=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),o=a.length,c=n?new Array(o):{};let u=0;for(let f=0;f<o;f++){const h=n?f:a[f],p=t[h],m=e[h];if(p===m){c[h]=p,(n?f<i:WA.call(t,h))&&u++;continue}if(p===null||m===null||typeof p!="object"||typeof m!="object"){c[h]=m;continue}const g=z_(p,m);c[h]=g,g===p&&u++}return i===o&&u===i?t:c}function Xf(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function R1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function eg(t){if(!T1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!T1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function T1(t){return Object.prototype.toString.call(t)==="[object Object]"}function UA(t){return new Promise(e=>{So.setTimeout(e,t)})}function tg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?z_(t,e):e}function HA(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function $A(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var ty=Symbol();function B_(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ty?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function q_(t,e){return typeof t=="function"?t(...e):!!t}var Lo,_a,Dl,YN,VA=(YN=class extends ac{constructor(){super();_t(this,Lo);_t(this,_a);_t(this,Dl);lt(this,Dl,e=>{if(!Uo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){pe(this,_a)||this.setEventListener(pe(this,Dl))}onUnsubscribe(){var e;this.hasListeners()||((e=pe(this,_a))==null||e.call(this),lt(this,_a,void 0))}setEventListener(e){var n;lt(this,Dl,e),(n=pe(this,_a))==null||n.call(this),lt(this,_a,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){pe(this,Lo)!==e&&(lt(this,Lo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof pe(this,Lo)=="boolean"?pe(this,Lo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Lo=new WeakMap,_a=new WeakMap,Dl=new WeakMap,YN),ny=new VA;function ng(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});n.status="pending",n.catch(()=>{});function s(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{s({status:"fulfilled",value:i}),t(i)},n.reject=i=>{s({status:"rejected",reason:i}),e(i)},n}var YA=BA;function KA(){let t=[],e=0,n=c=>{c()},s=c=>{c()},i=YA;const a=c=>{e?t.push(c):i(()=>{n(c)})},o=()=>{const c=t;t=[],c.length&&i(()=>{s(()=>{c.forEach(u=>{n(u)})})})};return{batch:c=>{let u;e++;try{u=c()}finally{e--,e||o()}return u},batchCalls:c=>(...u)=>{a(()=>{c(...u)})},schedule:a,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{s=c},setScheduler:c=>{i=c}}}var ar=KA(),Il,ka,Fl,KN,GA=(KN=class extends ac{constructor(){super();_t(this,Il,!0);_t(this,ka);_t(this,Fl);lt(this,Fl,e=>{if(!Uo&&window.addEventListener){const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){pe(this,ka)||this.setEventListener(pe(this,Fl))}onUnsubscribe(){var e;this.hasListeners()||((e=pe(this,ka))==null||e.call(this),lt(this,ka,void 0))}setEventListener(e){var n;lt(this,Fl,e),(n=pe(this,ka))==null||n.call(this),lt(this,ka,e(this.setOnline.bind(this)))}setOnline(e){pe(this,Il)!==e&&(lt(this,Il,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return pe(this,Il)}},Il=new WeakMap,ka=new WeakMap,Fl=new WeakMap,KN),Qf=new GA;function XA(t){return Math.min(1e3*2**t,3e4)}function W_(t){return(t??"online")==="online"?Qf.isOnline():!0}var rg=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function U_(t){let e=!1,n=0,s;const i=ng(),a=()=>i.status!=="pending",o=b=>{var v;if(!a()){const w=new rg(b);m(w),(v=t.onCancel)==null||v.call(t,w)}},c=()=>{e=!0},u=()=>{e=!1},f=()=>ny.isFocused()&&(t.networkMode==="always"||Qf.isOnline())&&t.canRun(),h=()=>W_(t.networkMode)&&t.canRun(),p=b=>{a()||(s==null||s(),i.resolve(b))},m=b=>{a()||(s==null||s(),i.reject(b))},g=()=>new Promise(b=>{var v;s=w=>{(a()||f())&&b(w)},(v=t.onPause)==null||v.call(t)}).then(()=>{var b;s=void 0,a()||(b=t.onContinue)==null||b.call(t)}),y=()=>{if(a())return;let b;const v=n===0?t.initialPromise:void 0;try{b=v??t.fn()}catch(w){b=Promise.reject(w)}Promise.resolve(b).then(p).catch(w=>{var C;if(a())return;const N=t.retry??(Uo?0:3),k=t.retryDelay??XA,j=typeof k=="function"?k(n,w):k,S=N===!0||typeof N=="number"&&n<N||typeof N=="function"&&N(n,w);if(e||!S){m(w);return}n++,(C=t.onFail)==null||C.call(t,n,w),UA(j).then(()=>f()?void 0:g()).then(()=>{e?m(w):y()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:c,continueRetry:u,canStart:h,start:()=>(h()?y():g().then(y),i)}}var Oo,GN,H_=(GN=class{constructor(){_t(this,Oo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Zx(this.gcTime)&&lt(this,Oo,So.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Uo?1/0:300*1e3))}clearGcTimeout(){pe(this,Oo)&&(So.clearTimeout(pe(this,Oo)),lt(this,Oo,void 0))}},Oo=new WeakMap,GN),Mo,zl,Ls,Po,hr,Rd,Ro,Gs,Ri,XN,QA=(XN=class extends H_{constructor(e){super();_t(this,Gs);_t(this,Mo);_t(this,zl);_t(this,Ls);_t(this,Po);_t(this,hr);_t(this,Rd);_t(this,Ro);lt(this,Ro,!1),lt(this,Rd,e.defaultOptions),this.setOptions(e.options),this.observers=[],lt(this,Po,e.client),lt(this,Ls,pe(this,Po).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,lt(this,Mo,I1(this.options)),this.state=e.state??pe(this,Mo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=pe(this,hr))==null?void 0:e.promise}setOptions(e){if(this.options={...pe(this,Rd),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=I1(this.options);n.data!==void 0&&(this.setState(D1(n.data,n.dataUpdatedAt)),lt(this,Mo,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&pe(this,Ls).remove(this)}setData(e,n){const s=tg(this.state.data,e,this.options);return Vt(this,Gs,Ri).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(e,n){Vt(this,Gs,Ri).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var s,i;const n=(s=pe(this,hr))==null?void 0:s.promise;return(i=pe(this,hr))==null||i.cancel(e),n?n.then(Hr).catch(Hr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(pe(this,Mo))}isActive(){return this.observers.some(e=>Os(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ty||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ia(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!F_(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=pe(this,hr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=pe(this,hr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),pe(this,Ls).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(pe(this,hr)&&(pe(this,Ro)?pe(this,hr).cancel({revert:!0}):pe(this,hr).cancelRetry()),this.scheduleGc()),pe(this,Ls).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Vt(this,Gs,Ri).call(this,{type:"invalidate"})}async fetch(e,n){var u,f,h,p,m,g,y,b,v,w,N,k;if(this.state.fetchStatus!=="idle"&&((u=pe(this,hr))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(pe(this,hr))return pe(this,hr).continueRetry(),pe(this,hr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const j=this.observers.find(S=>S.options.queryFn);j&&this.setOptions(j.options)}const s=new AbortController,i=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(lt(this,Ro,!0),s.signal)})},a=()=>{const j=B_(this.options,n),C=(()=>{const O={client:pe(this,Po),queryKey:this.queryKey,meta:this.meta};return i(O),O})();return lt(this,Ro,!1),this.options.persister?this.options.persister(j,C,this):j(C)},c=(()=>{const j={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:pe(this,Po),state:this.state,fetchFn:a};return i(j),j})();(f=this.options.behavior)==null||f.onFetch(c,this),lt(this,zl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=c.fetchOptions)==null?void 0:h.meta))&&Vt(this,Gs,Ri).call(this,{type:"fetch",meta:(p=c.fetchOptions)==null?void 0:p.meta}),lt(this,hr,U_({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,onCancel:j=>{j instanceof rg&&j.revert&&this.setState({...pe(this,zl),fetchStatus:"idle"}),s.abort()},onFail:(j,S)=>{Vt(this,Gs,Ri).call(this,{type:"failed",failureCount:j,error:S})},onPause:()=>{Vt(this,Gs,Ri).call(this,{type:"pause"})},onContinue:()=>{Vt(this,Gs,Ri).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const j=await pe(this,hr).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(g=(m=pe(this,Ls).config).onSuccess)==null||g.call(m,j,this),(b=(y=pe(this,Ls).config).onSettled)==null||b.call(y,j,this.state.error,this),j}catch(j){if(j instanceof rg){if(j.silent)return pe(this,hr).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw Vt(this,Gs,Ri).call(this,{type:"error",error:j}),(w=(v=pe(this,Ls).config).onError)==null||w.call(v,j,this),(k=(N=pe(this,Ls).config).onSettled)==null||k.call(N,this.state.data,j,this),j}finally{this.scheduleGc()}}},Mo=new WeakMap,zl=new WeakMap,Ls=new WeakMap,Po=new WeakMap,hr=new WeakMap,Rd=new WeakMap,Ro=new WeakMap,Gs=new WeakSet,Ri=function(e){const n=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...$_(s.data,this.options),fetchMeta:e.meta??null};case"success":const i={...s,...D1(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return lt(this,zl,e.manual?i:void 0),i;case"error":const a=e.error;return{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=n(this.state),ar.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),pe(this,Ls).notify({query:this,type:"updated",action:e})})},XN);function $_(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:W_(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function D1(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function I1(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ts,en,Td,Wr,To,Bl,Fi,Sa,Dd,ql,Wl,Do,Io,Ca,Ul,fn,ad,sg,ig,ag,og,lg,cg,dg,V_,QN,JA=(QN=class extends ac{constructor(e,n){super();_t(this,fn);_t(this,ts);_t(this,en);_t(this,Td);_t(this,Wr);_t(this,To);_t(this,Bl);_t(this,Fi);_t(this,Sa);_t(this,Dd);_t(this,ql);_t(this,Wl);_t(this,Do);_t(this,Io);_t(this,Ca);_t(this,Ul,new Set);this.options=n,lt(this,ts,e),lt(this,Sa,null),lt(this,Fi,ng()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(pe(this,en).addObserver(this),F1(pe(this,en),this.options)?Vt(this,fn,ad).call(this):this.updateResult(),Vt(this,fn,og).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ug(pe(this,en),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ug(pe(this,en),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Vt(this,fn,lg).call(this),Vt(this,fn,cg).call(this),pe(this,en).removeObserver(this)}setOptions(e){const n=this.options,s=pe(this,en);if(this.options=pe(this,ts).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Os(this.options.enabled,pe(this,en))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Vt(this,fn,dg).call(this),pe(this,en).setOptions(this.options),n._defaulted&&!Xf(this.options,n)&&pe(this,ts).getQueryCache().notify({type:"observerOptionsUpdated",query:pe(this,en),observer:this});const i=this.hasListeners();i&&z1(pe(this,en),s,this.options,n)&&Vt(this,fn,ad).call(this),this.updateResult(),i&&(pe(this,en)!==s||Os(this.options.enabled,pe(this,en))!==Os(n.enabled,pe(this,en))||Ia(this.options.staleTime,pe(this,en))!==Ia(n.staleTime,pe(this,en)))&&Vt(this,fn,sg).call(this);const a=Vt(this,fn,ig).call(this);i&&(pe(this,en)!==s||Os(this.options.enabled,pe(this,en))!==Os(n.enabled,pe(this,en))||a!==pe(this,Ca))&&Vt(this,fn,ag).call(this,a)}getOptimisticResult(e){const n=pe(this,ts).getQueryCache().build(pe(this,ts),e),s=this.createResult(n,e);return eE(this,s)&&(lt(this,Wr,s),lt(this,Bl,this.options),lt(this,To,pe(this,en).state)),s}getCurrentResult(){return pe(this,Wr)}trackResult(e,n){return new Proxy(e,{get:(s,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&pe(this,Fi).status==="pending"&&pe(this,Fi).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,i))})}trackProp(e){pe(this,Ul).add(e)}getCurrentQuery(){return pe(this,en)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=pe(this,ts).defaultQueryOptions(e),s=pe(this,ts).getQueryCache().build(pe(this,ts),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(e){return Vt(this,fn,ad).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),pe(this,Wr)))}createResult(e,n){var B;const s=pe(this,en),i=this.options,a=pe(this,Wr),o=pe(this,To),c=pe(this,Bl),f=e!==s?e.state:pe(this,Td),{state:h}=e;let p={...h},m=!1,g;if(n._optimisticResults){const I=this.hasListeners(),R=!I&&F1(e,n),P=I&&z1(e,s,n,i);(R||P)&&(p={...p,...$_(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:y,errorUpdatedAt:b,status:v}=p;g=p.data;let w=!1;if(n.placeholderData!==void 0&&g===void 0&&v==="pending"){let I;a!=null&&a.isPlaceholderData&&n.placeholderData===(c==null?void 0:c.placeholderData)?(I=a.data,w=!0):I=typeof n.placeholderData=="function"?n.placeholderData((B=pe(this,Wl))==null?void 0:B.state.data,pe(this,Wl)):n.placeholderData,I!==void 0&&(v="success",g=tg(a==null?void 0:a.data,I,n),m=!0)}if(n.select&&g!==void 0&&!w)if(a&&g===(o==null?void 0:o.data)&&n.select===pe(this,Dd))g=pe(this,ql);else try{lt(this,Dd,n.select),g=n.select(g),g=tg(a==null?void 0:a.data,g,n),lt(this,ql,g),lt(this,Sa,null)}catch(I){lt(this,Sa,I)}pe(this,Sa)&&(y=pe(this,Sa),g=pe(this,ql),b=Date.now(),v="error");const N=p.fetchStatus==="fetching",k=v==="pending",j=v==="error",S=k&&N,C=g!==void 0,M={status:v,fetchStatus:p.fetchStatus,isPending:k,isSuccess:v==="success",isError:j,isInitialLoading:S,isLoading:S,data:g,dataUpdatedAt:p.dataUpdatedAt,error:y,errorUpdatedAt:b,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>f.dataUpdateCount||p.errorUpdateCount>f.errorUpdateCount,isFetching:N,isRefetching:N&&!k,isLoadingError:j&&!C,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:j&&C,isStale:ry(e,n),refetch:this.refetch,promise:pe(this,Fi),isEnabled:Os(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const I=q=>{M.status==="error"?q.reject(M.error):M.data!==void 0&&q.resolve(M.data)},R=()=>{const q=lt(this,Fi,M.promise=ng());I(q)},P=pe(this,Fi);switch(P.status){case"pending":e.queryHash===s.queryHash&&I(P);break;case"fulfilled":(M.status==="error"||M.data!==P.value)&&R();break;case"rejected":(M.status!=="error"||M.error!==P.reason)&&R();break}}return M}updateResult(){const e=pe(this,Wr),n=this.createResult(pe(this,en),this.options);if(lt(this,To,pe(this,en).state),lt(this,Bl,this.options),pe(this,To).data!==void 0&&lt(this,Wl,pe(this,en)),Xf(n,e))return;lt(this,Wr,n);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!pe(this,Ul).size)return!0;const o=new Set(a??pe(this,Ul));return this.options.throwOnError&&o.add("error"),Object.keys(pe(this,Wr)).some(c=>{const u=c;return pe(this,Wr)[u]!==e[u]&&o.has(u)})};Vt(this,fn,V_).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Vt(this,fn,og).call(this)}},ts=new WeakMap,en=new WeakMap,Td=new WeakMap,Wr=new WeakMap,To=new WeakMap,Bl=new WeakMap,Fi=new WeakMap,Sa=new WeakMap,Dd=new WeakMap,ql=new WeakMap,Wl=new WeakMap,Do=new WeakMap,Io=new WeakMap,Ca=new WeakMap,Ul=new WeakMap,fn=new WeakSet,ad=function(e){Vt(this,fn,dg).call(this);let n=pe(this,en).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Hr)),n},sg=function(){Vt(this,fn,lg).call(this);const e=Ia(this.options.staleTime,pe(this,en));if(Uo||pe(this,Wr).isStale||!Zx(e))return;const s=F_(pe(this,Wr).dataUpdatedAt,e)+1;lt(this,Do,So.setTimeout(()=>{pe(this,Wr).isStale||this.updateResult()},s))},ig=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(pe(this,en)):this.options.refetchInterval)??!1},ag=function(e){Vt(this,fn,cg).call(this),lt(this,Ca,e),!(Uo||Os(this.options.enabled,pe(this,en))===!1||!Zx(pe(this,Ca))||pe(this,Ca)===0)&&lt(this,Io,So.setInterval(()=>{(this.options.refetchIntervalInBackground||ny.isFocused())&&Vt(this,fn,ad).call(this)},pe(this,Ca)))},og=function(){Vt(this,fn,sg).call(this),Vt(this,fn,ag).call(this,Vt(this,fn,ig).call(this))},lg=function(){pe(this,Do)&&(So.clearTimeout(pe(this,Do)),lt(this,Do,void 0))},cg=function(){pe(this,Io)&&(So.clearInterval(pe(this,Io)),lt(this,Io,void 0))},dg=function(){const e=pe(this,ts).getQueryCache().build(pe(this,ts),this.options);if(e===pe(this,en))return;const n=pe(this,en);lt(this,en,e),lt(this,Td,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},V_=function(e){ar.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(pe(this,Wr))}),pe(this,ts).getQueryCache().notify({query:pe(this,en),type:"observerResultsUpdated"})})},QN);function ZA(t,e){return Os(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function F1(t,e){return ZA(t,e)||t.state.data!==void 0&&ug(t,e,e.refetchOnMount)}function ug(t,e,n){if(Os(e.enabled,t)!==!1&&Ia(e.staleTime,t)!=="static"){const s=typeof n=="function"?n(t):n;return s==="always"||s!==!1&&ry(t,e)}return!1}function z1(t,e,n,s){return(t!==e||Os(s.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&ry(t,n)}function ry(t,e){return Os(e.enabled,t)!==!1&&t.isStaleByTime(Ia(e.staleTime,t))}function eE(t,e){return!Xf(t.getCurrentResult(),e)}function B1(t){return{onFetch:(e,n)=>{var h,p,m,g,y;const s=e.options,i=(m=(p=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:p.fetchMore)==null?void 0:m.direction,a=((g=e.state.data)==null?void 0:g.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let c={pages:[],pageParams:[]},u=0;const f=async()=>{let b=!1;const v=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},w=B_(e.options,e.fetchOptions),N=async(k,j,S)=>{if(b)return Promise.reject();if(j==null&&k.pages.length)return Promise.resolve(k);const O=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:j,direction:S?"backward":"forward",meta:e.options.meta};return v(R),R})(),M=await w(O),{maxPages:B}=e.options,I=S?$A:HA;return{pages:I(k.pages,M,B),pageParams:I(k.pageParams,j,B)}};if(i&&a.length){const k=i==="backward",j=k?tE:q1,S={pages:a,pageParams:o},C=j(s,S);c=await N(S,C,k)}else{const k=t??a.length;do{const j=u===0?o[0]??s.initialPageParam:q1(s,c);if(u>0&&j==null)break;c=await N(c,j),u++}while(u<k)}return c};e.options.persister?e.fetchFn=()=>{var b,v;return(v=(b=e.options).persister)==null?void 0:v.call(b,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=f}}}function q1(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function tE(t,{pages:e,pageParams:n}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,n[0],n):void 0}var Id,mi,Ur,Fo,xi,ba,JN,nE=(JN=class extends H_{constructor(e){super();_t(this,xi);_t(this,Id);_t(this,mi);_t(this,Ur);_t(this,Fo);lt(this,Id,e.client),this.mutationId=e.mutationId,lt(this,Ur,e.mutationCache),lt(this,mi,[]),this.state=e.state||Y_(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){pe(this,mi).includes(e)||(pe(this,mi).push(e),this.clearGcTimeout(),pe(this,Ur).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){lt(this,mi,pe(this,mi).filter(n=>n!==e)),this.scheduleGc(),pe(this,Ur).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){pe(this,mi).length||(this.state.status==="pending"?this.scheduleGc():pe(this,Ur).remove(this))}continue(){var e;return((e=pe(this,Fo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,c,u,f,h,p,m,g,y,b,v,w,N,k,j,S,C,O,M,B;const n=()=>{Vt(this,xi,ba).call(this,{type:"continue"})},s={client:pe(this,Id),meta:this.options.meta,mutationKey:this.options.mutationKey};lt(this,Fo,U_({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(I,R)=>{Vt(this,xi,ba).call(this,{type:"failed",failureCount:I,error:R})},onPause:()=>{Vt(this,xi,ba).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>pe(this,Ur).canRun(this)}));const i=this.state.status==="pending",a=!pe(this,Fo).canStart();try{if(i)n();else{Vt(this,xi,ba).call(this,{type:"pending",variables:e,isPaused:a}),await((c=(o=pe(this,Ur).config).onMutate)==null?void 0:c.call(o,e,this,s));const R=await((f=(u=this.options).onMutate)==null?void 0:f.call(u,e,s));R!==this.state.context&&Vt(this,xi,ba).call(this,{type:"pending",context:R,variables:e,isPaused:a})}const I=await pe(this,Fo).start();return await((p=(h=pe(this,Ur).config).onSuccess)==null?void 0:p.call(h,I,e,this.state.context,this,s)),await((g=(m=this.options).onSuccess)==null?void 0:g.call(m,I,e,this.state.context,s)),await((b=(y=pe(this,Ur).config).onSettled)==null?void 0:b.call(y,I,null,this.state.variables,this.state.context,this,s)),await((w=(v=this.options).onSettled)==null?void 0:w.call(v,I,null,e,this.state.context,s)),Vt(this,xi,ba).call(this,{type:"success",data:I}),I}catch(I){try{throw await((k=(N=pe(this,Ur).config).onError)==null?void 0:k.call(N,I,e,this.state.context,this,s)),await((S=(j=this.options).onError)==null?void 0:S.call(j,I,e,this.state.context,s)),await((O=(C=pe(this,Ur).config).onSettled)==null?void 0:O.call(C,void 0,I,this.state.variables,this.state.context,this,s)),await((B=(M=this.options).onSettled)==null?void 0:B.call(M,void 0,I,e,this.state.context,s)),I}finally{Vt(this,xi,ba).call(this,{type:"error",error:I})}}finally{pe(this,Ur).runNext(this)}}},Id=new WeakMap,mi=new WeakMap,Ur=new WeakMap,Fo=new WeakMap,xi=new WeakSet,ba=function(e){const n=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ar.batch(()=>{pe(this,mi).forEach(s=>{s.onMutationUpdate(e)}),pe(this,Ur).notify({mutation:this,type:"updated",action:e})})},JN);function Y_(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zi,Xs,Fd,ZN,rE=(ZN=class extends ac{constructor(e={}){super();_t(this,zi);_t(this,Xs);_t(this,Fd);this.config=e,lt(this,zi,new Set),lt(this,Xs,new Map),lt(this,Fd,0)}build(e,n,s){const i=new nE({client:e,mutationCache:this,mutationId:++cf(this,Fd)._,options:e.defaultMutationOptions(n),state:s});return this.add(i),i}add(e){pe(this,zi).add(e);const n=pf(e);if(typeof n=="string"){const s=pe(this,Xs).get(n);s?s.push(e):pe(this,Xs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(pe(this,zi).delete(e)){const n=pf(e);if(typeof n=="string"){const s=pe(this,Xs).get(n);if(s)if(s.length>1){const i=s.indexOf(e);i!==-1&&s.splice(i,1)}else s[0]===e&&pe(this,Xs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=pf(e);if(typeof n=="string"){const s=pe(this,Xs).get(n),i=s==null?void 0:s.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var s;const n=pf(e);if(typeof n=="string"){const i=(s=pe(this,Xs).get(n))==null?void 0:s.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ar.batch(()=>{pe(this,zi).forEach(e=>{this.notify({type:"removed",mutation:e})}),pe(this,zi).clear(),pe(this,Xs).clear()})}getAll(){return Array.from(pe(this,zi))}find(e){const n={exact:!0,...e};return this.getAll().find(s=>P1(n,s))}findAll(e={}){return this.getAll().filter(n=>P1(e,n))}notify(e){ar.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ar.batch(()=>Promise.all(e.map(n=>n.continue().catch(Hr))))}},zi=new WeakMap,Xs=new WeakMap,Fd=new WeakMap,ZN);function pf(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Bi,Aa,ns,qi,Yi,zf,fg,e_,sE=(e_=class extends ac{constructor(n,s){super();_t(this,Yi);_t(this,Bi);_t(this,Aa);_t(this,ns);_t(this,qi);lt(this,Bi,n),this.setOptions(s),this.bindMethods(),Vt(this,Yi,zf).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const s=this.options;this.options=pe(this,Bi).defaultMutationOptions(n),Xf(this.options,s)||pe(this,Bi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:pe(this,ns),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Ho(s.mutationKey)!==Ho(this.options.mutationKey)?this.reset():((i=pe(this,ns))==null?void 0:i.state.status)==="pending"&&pe(this,ns).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=pe(this,ns))==null||n.removeObserver(this)}onMutationUpdate(n){Vt(this,Yi,zf).call(this),Vt(this,Yi,fg).call(this,n)}getCurrentResult(){return pe(this,Aa)}reset(){var n;(n=pe(this,ns))==null||n.removeObserver(this),lt(this,ns,void 0),Vt(this,Yi,zf).call(this),Vt(this,Yi,fg).call(this)}mutate(n,s){var i;return lt(this,qi,s),(i=pe(this,ns))==null||i.removeObserver(this),lt(this,ns,pe(this,Bi).getMutationCache().build(pe(this,Bi),this.options)),pe(this,ns).addObserver(this),pe(this,ns).execute(n)}},Bi=new WeakMap,Aa=new WeakMap,ns=new WeakMap,qi=new WeakMap,Yi=new WeakSet,zf=function(){var s;const n=((s=pe(this,ns))==null?void 0:s.state)??Y_();lt(this,Aa,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},fg=function(n){ar.batch(()=>{var s,i,a,o,c,u,f,h;if(pe(this,qi)&&this.hasListeners()){const p=pe(this,Aa).variables,m=pe(this,Aa).context,g={client:pe(this,Bi),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((i=(s=pe(this,qi)).onSuccess)==null||i.call(s,n.data,p,m,g),(o=(a=pe(this,qi)).onSettled)==null||o.call(a,n.data,null,p,m,g)):(n==null?void 0:n.type)==="error"&&((u=(c=pe(this,qi)).onError)==null||u.call(c,n.error,p,m,g),(h=(f=pe(this,qi)).onSettled)==null||h.call(f,void 0,n.error,p,m,g))}this.listeners.forEach(p=>{p(pe(this,Aa))})})},e_),gi,t_,iE=(t_=class extends ac{constructor(e={}){super();_t(this,gi);this.config=e,lt(this,gi,new Map)}build(e,n,s){const i=n.queryKey,a=n.queryHash??ey(i,n);let o=this.get(a);return o||(o=new QA({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(n),state:s,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){pe(this,gi).has(e.queryHash)||(pe(this,gi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=pe(this,gi).get(e.queryHash);n&&(e.destroy(),n===e&&pe(this,gi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ar.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return pe(this,gi).get(e)}getAll(){return[...pe(this,gi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(s=>M1(n,s))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(s=>M1(e,s)):n}notify(e){ar.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ar.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ar.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},gi=new WeakMap,t_),Hn,Ea,La,Hl,$l,Oa,Vl,Yl,n_,aE=(n_=class{constructor(t={}){_t(this,Hn);_t(this,Ea);_t(this,La);_t(this,Hl);_t(this,$l);_t(this,Oa);_t(this,Vl);_t(this,Yl);lt(this,Hn,t.queryCache||new iE),lt(this,Ea,t.mutationCache||new rE),lt(this,La,t.defaultOptions||{}),lt(this,Hl,new Map),lt(this,$l,new Map),lt(this,Oa,0)}mount(){cf(this,Oa)._++,pe(this,Oa)===1&&(lt(this,Vl,ny.subscribe(async t=>{t&&(await this.resumePausedMutations(),pe(this,Hn).onFocus())})),lt(this,Yl,Qf.subscribe(async t=>{t&&(await this.resumePausedMutations(),pe(this,Hn).onOnline())})))}unmount(){var t,e;cf(this,Oa)._--,pe(this,Oa)===0&&((t=pe(this,Vl))==null||t.call(this),lt(this,Vl,void 0),(e=pe(this,Yl))==null||e.call(this),lt(this,Yl,void 0))}isFetching(t){return pe(this,Hn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return pe(this,Ea).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=pe(this,Hn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=pe(this,Hn).build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ia(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return pe(this,Hn).findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),i=pe(this,Hn).get(s.queryHash),a=i==null?void 0:i.state.data,o=qA(e,a);if(o!==void 0)return pe(this,Hn).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ar.batch(()=>pe(this,Hn).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=pe(this,Hn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=pe(this,Hn);ar.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=pe(this,Hn);return ar.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=ar.batch(()=>pe(this,Hn).findAll(t).map(i=>i.cancel(n)));return Promise.all(s).then(Hr).catch(Hr)}invalidateQueries(t,e={}){return ar.batch(()=>(pe(this,Hn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=ar.batch(()=>pe(this,Hn).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(Hr)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(Hr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=pe(this,Hn).build(this,e);return n.isStaleByTime(Ia(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Hr).catch(Hr)}fetchInfiniteQuery(t){return t.behavior=B1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Hr).catch(Hr)}ensureInfiniteQueryData(t){return t.behavior=B1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Qf.isOnline()?pe(this,Ea).resumePausedMutations():Promise.resolve()}getQueryCache(){return pe(this,Hn)}getMutationCache(){return pe(this,Ea)}getDefaultOptions(){return pe(this,La)}setDefaultOptions(t){lt(this,La,t)}setQueryDefaults(t,e){pe(this,Hl).set(Ho(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...pe(this,Hl).values()],n={};return e.forEach(s=>{kd(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){pe(this,$l).set(Ho(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...pe(this,$l).values()],n={};return e.forEach(s=>{kd(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...pe(this,La).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ey(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ty&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...pe(this,La).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){pe(this,Hn).clear(),pe(this,Ea).clear()}},Hn=new WeakMap,Ea=new WeakMap,La=new WeakMap,Hl=new WeakMap,$l=new WeakMap,Oa=new WeakMap,Vl=new WeakMap,Yl=new WeakMap,n_),K_=L.createContext(void 0),Ud=t=>{const e=L.useContext(K_);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},oE=({client:t,children:e})=>(L.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),r.jsx(K_.Provider,{value:t,children:e})),G_=L.createContext(!1),lE=()=>L.useContext(G_);G_.Provider;function cE(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var dE=L.createContext(cE()),uE=()=>L.useContext(dE),fE=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},hE=t=>{L.useEffect(()=>{t.clearReset()},[t])},pE=({result:t,errorResetBoundary:e,throwOnError:n,query:s,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&(i&&t.data===void 0||q_(n,[t.error,s])),mE=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),s=t.staleTime;t.staleTime=typeof s=="function"?(...i)=>n(s(...i)):n(s),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},xE=(t,e)=>t.isLoading&&t.isFetching&&!e,gE=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,W1=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function yE(t,e,n){var p,m,g,y,b;const s=lE(),i=uE(),a=Ud(),o=a.defaultQueryOptions(t);(m=(p=a.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||m.call(p,o),o._optimisticResults=s?"isRestoring":"optimistic",mE(o),fE(o,i),hE(i);const c=!a.getQueryCache().get(o.queryHash),[u]=L.useState(()=>new e(a,o)),f=u.getOptimisticResult(o),h=!s&&t.subscribed!==!1;if(L.useSyncExternalStore(L.useCallback(v=>{const w=h?u.subscribe(ar.batchCalls(v)):Hr;return u.updateResult(),w},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),L.useEffect(()=>{u.setOptions(o)},[o,u]),gE(o,f))throw W1(o,u,i);if(pE({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw f.error;if((y=(g=a.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||y.call(g,o,f),o.experimental_prefetchInRender&&!Uo&&xE(f,s)){const v=c?W1(o,u,i):(b=a.getQueryCache().get(o.queryHash))==null?void 0:b.promise;v==null||v.catch(Hr).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?f:u.trackResult(f)}function kn(t,e){return yE(t,JA)}function sy(t,e){const n=Ud(),[s]=L.useState(()=>new sE(n,t));L.useEffect(()=>{s.setOptions(t)},[s,t]);const i=L.useSyncExternalStore(L.useCallback(o=>s.subscribe(ar.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=L.useCallback((o,c)=>{s.mutate(o,c).catch(Hr)},[s]);if(i.error&&q_(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}const vE=new aE({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}}),bE=({children:t})=>r.jsx(oE,{client:vE,children:t});function X_(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=X_(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function wE(){for(var t,e,n=0,s="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=X_(t))&&(s&&(s+=" "),s+=e);return s}function F(...t){return wE(t)}const Be=wt.forwardRef(({className:t,variant:e="primary",size:n="md",isLoading:s=!1,leftIcon:i,rightIcon:a,fullWidth:o=!1,disabled:c,children:u,...f},h)=>{const p="inline-flex items-center justify-center font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg",m={primary:"bg-gradient-to-r from-[#5D3EBC] to-[#6B46C1] text-white hover:from-[#4E2FA3] hover:to-[#5C37B2] focus:ring-purple-500 shadow-md hover:shadow-lg",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",outline:"border-2 border-purple-600 text-purple-600 hover:bg-purple-50 focus:ring-purple-500",ghost:"text-purple-600 hover:bg-purple-50 focus:ring-purple-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-md hover:shadow-lg"},g={sm:"px-2.5 py-1.5 text-xs",md:"px-[12.8px] py-[6.4px] text-sm",lg:"px-[19.2px] py-[9.6px] text-base"};return r.jsx("button",{ref:h,className:F(p,m[e],g[n],o&&"w-full",t),disabled:c||s,...f,children:s?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-[12.8px] w-[12.8px]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):r.jsxs(r.Fragment,{children:[i&&r.jsx("span",{className:"mr-[6.4px]",children:i}),u,a&&r.jsx("span",{className:"ml-[6.4px]",children:a})]})})});Be.displayName="Button";const Tn=wt.forwardRef(({className:t,label:e,error:n,helperText:s,leftIcon:i,rightIcon:a,fullWidth:o=!1,id:c,...u},f)=>{const h=c||`input-${Math.random().toString(36).substr(2,9)}`;return r.jsxs("div",{className:F("flex flex-col",o&&"w-full"),children:[e&&r.jsxs("label",{htmlFor:h,className:"mb-1.5 text-xs font-medium text-gray-700",children:[e,u.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),r.jsxs("div",{className:"relative",children:[i&&r.jsx("div",{className:"absolute left-[9.6px] top-1/2 -translate-y-1/2 text-gray-400",children:i}),r.jsx("input",{ref:f,id:h,className:F("w-full border rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent","disabled:bg-gray-100 disabled:cursor-not-allowed",n?"border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400",i&&"pl-[25.6px]",a&&"pr-[25.6px]",t!=null&&t.includes("text-[11px]")?"px-[6.4px] py-[3.2px]":"px-[12.8px] py-[6.4px]",t),...u}),a&&r.jsx("div",{className:"absolute right-[9.6px] top-1/2 -translate-y-1/2 text-gray-400",children:a})]}),(n||s)&&r.jsx("p",{className:F("mt-1.5 text-xs",n?"text-red-500":"text-gray-500"),children:n||s})]})});Tn.displayName="Input";const Gt=wt.forwardRef(({className:t,label:e,error:n,helperText:s,options:i,placeholder:a,fullWidth:o=!1,id:c,value:u,...f},h)=>{const p=c||`select-${Math.random().toString(36).substr(2,9)}`,m=u??"";return r.jsxs("div",{className:F("flex flex-col",o&&"w-full"),children:[e&&r.jsxs("label",{htmlFor:p,className:"mb-1.5 text-sm font-medium text-gray-700",children:[e,f.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),r.jsxs("select",{ref:h,id:p,className:F("w-full px-4 py-2 border rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent","disabled:bg-gray-100 disabled:cursor-not-allowed","appearance-none bg-white",`bg-[url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")]`,"bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",n?"border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400",t),style:{...(t==null?void 0:t.includes("[&>select]:!leading-[28px]"))&&{lineHeight:"28px",paddingTop:"0px",paddingBottom:"0px"},...f.style},...f,value:m,children:[a&&r.jsx("option",{value:"",disabled:!0,children:a}),i.map(g=>r.jsx("option",{value:g.value,disabled:g.disabled,children:g.label},g.value))]}),(n||s)&&r.jsx("p",{className:F("mt-1.5 text-sm",n?"text-red-500":"text-gray-500"),children:n||s})]})});Gt.displayName="Select";const jE=wt.forwardRef(({className:t,label:e,error:n,helperText:s,fullWidth:i=!1,resize:a="vertical",id:o,...c},u)=>{const f=o||`textarea-${Math.random().toString(36).substr(2,9)}`,h={none:"resize-none",vertical:"resize-y",horizontal:"resize-x",both:"resize"};return r.jsxs("div",{className:F("flex flex-col",i&&"w-full"),children:[e&&r.jsxs("label",{htmlFor:f,className:"mb-1.5 text-xs font-medium text-gray-700",children:[e,c.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),r.jsx("textarea",{ref:u,id:f,className:F("w-full px-[12.8px] py-[6.4px] border rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent","disabled:bg-gray-100 disabled:cursor-not-allowed",n?"border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400",h[a],t),...c}),(n||s)&&r.jsx("p",{className:F("mt-1.5 text-xs",n?"text-red-500":"text-gray-500"),children:n||s})]})});jE.displayName="Textarea";const Ie=wt.forwardRef(({className:t,variant:e="default",padding:n="md",children:s,...i},a)=>{const o={default:"bg-white border border-gray-200",elevated:"bg-white shadow-lg border border-gray-100",outlined:"bg-transparent border-2 border-gray-300"},c={none:"",sm:"p-[12.8px]",md:"p-[19.2px]",lg:"p-[25.6px]"};return r.jsx("div",{ref:a,className:F("rounded-xl transition-all duration-200",o[e],c[n],t),...i,children:s})});Ie.displayName="Card";const vt=wt.forwardRef(({className:t,title:e,subtitle:n,action:s,children:i,...a},o)=>r.jsxs("div",{ref:o,className:F("flex items-start justify-between mb-[12.8px]",t),...a,children:[r.jsxs("div",{children:[e&&r.jsx("h3",{className:"text-sm md:text-base font-semibold text-gray-900",children:e}),n&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n}),i]}),s&&r.jsx("div",{className:"ml-4",children:s})]}));vt.displayName="CardHeader";const Q_=wt.forwardRef(({className:t,children:e,...n},s)=>r.jsx("div",{ref:s,className:F("",t),...n,children:e}));Q_.displayName="CardBody";const NE=wt.forwardRef(({className:t,children:e,...n},s)=>r.jsx("div",{ref:s,className:F("mt-4 pt-4 border-t border-gray-200",t),...n,children:e}));NE.displayName="CardFooter";const Ze=wt.forwardRef(({className:t,variant:e="default",size:n="md",children:s,...i},a)=>{const o={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800",dark:"bg-gray-900 text-white",orange:"bg-orange-100 text-orange-800",purple:"bg-purple-100 text-purple-800"},c={xs:"px-1.5 py-0.5 text-[8px]",sm:"px-2 py-0.5 text-[9.6px]",md:"px-2.5 py-1 text-[11.2px]",lg:"px-3 py-1.5 text-[12.8px]"};return r.jsx("span",{ref:a,className:F("inline-flex items-center font-medium rounded-full",o[e],c[n],t),...i,children:s})});Ze.displayName="Badge";const Nt=({size:t="md",className:e,text:n,fullScreen:s=!1})=>{const i={sm:"h-4 w-4 border-2",md:"h-8 w-8 border-3",lg:"h-12 w-12 border-4",xl:"h-16 w-16 border-4"},a=r.jsxs("div",{className:F("flex flex-col items-center justify-center gap-3",e),children:[r.jsx("div",{className:F("animate-spin rounded-full border-gray-200 border-t-purple-600",i[t])}),n&&r.jsx("p",{className:"text-sm text-gray-600",children:n})]});return s?r.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 z-50 flex items-center justify-center",children:a}):a},Ki=h_(t=>({isSidebarOpen:!1,toggleSidebar:()=>t(e=>({isSidebarOpen:!e.isSidebarOpen})),setSidebarOpen:e=>t({isSidebarOpen:e}),theme:"light",toggleTheme:()=>t(e=>({theme:e.theme==="light"?"dark":"light"})),setTheme:e=>t({theme:e}),isLoading:!1,setLoading:e=>t({isLoading:e}),notifications:[],addNotification:e=>{const n=`${Date.now()}-${Math.random()}`;t(s=>({notifications:[...s.notifications,{...e,id:n,timestamp:Date.now()}]})),e.duration!==0&&setTimeout(()=>{t(s=>({notifications:s.notifications.filter(i=>i.id!==n)}))},e.duration||5e3)},removeNotification:e=>t(n=>({notifications:n.notifications.filter(s=>s.id!==e)})),clearNotifications:()=>t({notifications:[]}),isModalOpen:!1,modalContent:null,openModal:e=>t({isModalOpen:!0,modalContent:e}),closeModal:()=>t({isModalOpen:!1,modalContent:null})})),_E=()=>{const{notifications:t,removeNotification:e}=Ki();return t.length===0?null:r.jsx("div",{className:"fixed top-20 right-4 z-[100] flex flex-col gap-2 max-w-md",children:t.map(n=>{const s=()=>{switch(n.type){case"success":return r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return null}};return r.jsxs("div",{className:F("bg-white rounded-lg shadow-lg border-l-4 p-4 flex items-start gap-3 min-w-[300px] max-w-md",n.type==="error"&&"border-red-500",n.type==="success"&&"border-green-500",n.type==="warning"&&"border-yellow-500",n.type==="info"&&"border-blue-500"),children:[r.jsx("div",{className:F("flex-shrink-0",n.type==="error"&&"text-red-500",n.type==="success"&&"text-green-500",n.type==="warning"&&"text-yellow-500",n.type==="info"&&"text-blue-500"),children:s()}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:n.message})}),r.jsx("button",{onClick:()=>e(n.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 ml-2",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},n.id)})})},Ch=({currentPage:t,totalItems:e,itemsPerPage:n,onPageChange:s,onItemsPerPageChange:i,itemsPerPageOptions:a=[10,25,50,100],className:o="",isMobile:c=!1})=>{const u=Math.ceil(e/n),f=e===0?0:(t-1)*n+1,h=Math.min(t*n,e),p=t>1,m=t<u,g=()=>{p&&s(t-1)},y=()=>{m&&s(t+1)},b=v=>{const w=parseInt(v.target.value,10);i&&i(w),s(1)};return e===0?null:r.jsxs("div",{className:F("flex items-center gap-4",c?"flex-col gap-2":"justify-between",o),children:[i&&r.jsxs("div",{className:F("flex items-center gap-2",c&&"w-full justify-center"),children:[r.jsx("span",{className:F("text-gray-600",c?"text-[8px]":"text-xs"),children:"Show:"}),r.jsx("select",{value:n,onChange:b,className:F("border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",c?"px-[6.4px] py-[1.6px] text-[8px]":"px-[9.6px] py-[4.8px] text-xs"),children:a.map(v=>r.jsx("option",{value:v,children:v},v))}),r.jsx("span",{className:F("text-gray-600",c?"text-[8px]":"text-xs"),children:"per page"})]}),r.jsx("div",{className:F(c?"w-full text-center":"flex-1 text-center"),children:r.jsx("span",{className:F("font-medium text-gray-700",c?"text-[8px]":"text-xs"),children:c?`${f}-${h} of ${e}`:`Showing ${f} to ${h} of ${e} items`})}),r.jsxs("div",{className:F("flex items-center gap-2",c&&"w-full justify-center"),children:[r.jsxs(Be,{variant:"outline",size:"sm",onClick:g,disabled:!p,className:F(c?"!px-1.5 !py-0.5 !text-[9px] min-w-[50px]":"min-w-[80px]"),children:[r.jsx("svg",{className:F(c?"w-2 h-2 mr-0.5":"w-[12.8px] h-[12.8px] mr-[3.2px]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),c?"Prev":"Previous"]}),r.jsx("span",{className:F("text-gray-600 px-1",c?"text-[7.2px]":"text-xs"),children:c?`${t}/${u}`:`Page ${t} of ${u}`}),r.jsxs(Be,{variant:"outline",size:"sm",onClick:y,disabled:!m,className:F(c?"!px-1.5 !py-0.5 !text-[9px] min-w-[50px]":"min-w-[80px]"),children:["Next",r.jsx("svg",{className:F(c?"w-2 h-2 ml-0.5":"w-[12.8px] h-[12.8px] ml-[3.2px]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})},Dm=({checked:t,onChange:e,disabled:n=!1,label:s,size:i="md",className:a=""})=>{const o={sm:"w-8 h-4",md:"w-11 h-6",lg:"w-14 h-7"},c={sm:"h-3 w-3",md:"h-5 w-5",lg:"h-6 w-6"},u={sm:"translate-x-4",md:"translate-x-5",lg:"translate-x-7"};return r.jsxs("label",{className:F("inline-flex items-center cursor-pointer",n&&"opacity-50 cursor-not-allowed",a),children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"checkbox",className:"sr-only",checked:t,onChange:f=>!n&&e(f.target.checked),disabled:n}),r.jsx("div",{className:F("rounded-full transition-colors duration-200 ease-in-out",o[i],t?"bg-purple-600":"bg-gray-300",n&&"cursor-not-allowed"),children:r.jsx("div",{className:F("absolute left-0.5 top-0.5 bg-white rounded-full transition-transform duration-200 ease-in-out",c[i],t&&u[i])})})]}),s&&r.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:s})]})};class kE extends L.Component{constructor(){super(...arguments);ut(this,"state",{hasError:!1,error:null,errorInfo:null});ut(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,s){this.setState({error:n,errorInfo:s})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsx(Ie,{className:"max-w-2xl w-full",variant:"elevated",children:r.jsxs("div",{className:"text-center",children:[r.jsx("svg",{className:"mx-auto h-16 w-16 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsx("h1",{className:"mt-4 text-2xl font-bold text-gray-900",children:"Oops! Something went wrong"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"We're sorry for the inconvenience. Please try refreshing the page."}),!1,r.jsxs("div",{className:"mt-8 flex gap-4 justify-center",children:[r.jsx(Be,{onClick:this.handleReset,variant:"primary",children:"Try Again"}),r.jsx(Be,{onClick:()=>window.location.href="/",variant:"outline",children:"Go to Dashboard"})]})]})})}):this.props.children}}function iy(t,e=500){const[n,s]=L.useState(t);return L.useEffect(()=>{const i=setTimeout(()=>{s(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}function Go(t,e,n="table-column-widths"){const s=e||t,[i,a]=L.useState(()=>{if(typeof window<"u"){const v=localStorage.getItem(n);if(v&&v!=="undefined")try{return JSON.parse(v)}catch{}}return s}),[o,c]=L.useState(null),[u,f]=L.useState(0),[h,p]=L.useState(0);L.useEffect(()=>{typeof window<"u"&&localStorage.setItem(n,JSON.stringify(i))},[i,n]);const m=L.useCallback((v,w)=>{w.preventDefault(),c(v),f(w.clientX),p(i[v]||150)},[i]),g=L.useCallback(v=>{if(!o)return;const w=v.clientX-u,N=Math.max(50,h+w);a(k=>({...k,[o]:N}))},[o,u,h]),y=L.useCallback(()=>{c(null)},[]);L.useEffect(()=>{if(o)return document.addEventListener("mousemove",g),document.addEventListener("mouseup",y),document.body.style.cursor="col-resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),document.body.style.cursor="",document.body.style.userSelect=""}},[o,g,y]);const b=L.useCallback(()=>{a(s),typeof window<"u"&&localStorage.removeItem(n)},[s,n]);return{columnWidths:i,resizing:o,handleMouseDown:m,resetWidths:b}}function J_(){const{permissions:t}=Dr(),e=c=>t!=null&&t.components?t.components.includes(c):!1;return{hasComponent:e,canInteract:c=>t!=null&&t.interactiveComponents?t.interactiveComponents.includes(c):!1,hasAnyComponent:c=>c.some(u=>e(u)),hasAllComponents:c=>c.every(u=>e(u)),getAccessibleComponents:()=>(t==null?void 0:t.components)||[],getInteractiveComponents:()=>(t==null?void 0:t.interactiveComponents)||[]}}const Yt={getAuditProjectsByYear:async()=>qe.get("/api/audit-plans-by-year"),getInvestigationCounts:async()=>qe.get("/api/investigation-counts"),getFindingStatusByYear:async(t,e)=>{const n=new URLSearchParams;return t!=null&&t.length&&t.forEach(s=>n.append("auditTypes",s)),e!=null&&e.length&&e.forEach(s=>n.append("auditCountries",s)),qe.get(`/api/finding-status-by-year?${n.toString()}`)},getFindingActionStatusDistribution:async t=>{const e=new URLSearchParams;return t&&e.append("auditYear",t),qe.get(`/api/finding-action-status-distribution?${e.toString()}`)},getActionsByAuditAndRisk:async t=>{const e=new URLSearchParams;return t&&e.append("auditYear",t),qe.get(`/api/actions-by-audit-and-risk?${e.toString()}`)},getActionsByAuditRiskDetail:async(t,e,n)=>{const s=new URLSearchParams;return s.append("auditYear",t),s.append("auditName",e),n&&s.append("riskLevel",n),qe.get(`/api/actions-by-audit-risk-detail?${s.toString()}`)},getFindingsByAuditAndRisk:async t=>{const e=new URLSearchParams;return t&&e.append("auditYear",t),qe.get(`/api/findings-by-audit-and-risk?${e.toString()}`)},getFindingsByAuditRiskDetail:async(t,e,n)=>{const s=new URLSearchParams;return s.append("auditYear",t),s.append("auditName",e),n&&s.append("riskLevel",n),qe.get(`/api/findings-by-audit-risk-detail?${s.toString()}`)},getFindingActionsByLead:async()=>qe.get("/api/finding-action-status-by-lead"),getUserFindingActions:async t=>{const e=new URLSearchParams;return t!=null&&t.auditYear&&e.append("auditYear",t.auditYear),t!=null&&t.cLevel&&e.append("cLevel",t.cLevel),qe.get(`/api/user-finding-actions?${e.toString()}`)},getDepartmentFindingActions:async t=>{const e=new URLSearchParams;return t!=null&&t.auditYear&&e.append("auditYear",t.auditYear),qe.get(`/api/department-finding-actions?${e.toString()}`)},getCLevelFindingActions:async t=>{const e=new URLSearchParams;return t!=null&&t.auditYear&&e.append("auditYear",t.auditYear),qe.get(`/api/clevel-finding-actions?${e.toString()}`)},getAllFindingActions:async t=>{const e=new URLSearchParams,n=(t==null?void 0:t.auditYear)||"all";return e.append("auditYear",n),qe.get(`/api/all-finding-actions?${e.toString()}`)},getVPFindingActions:async t=>{const e=new URLSearchParams;return t!=null&&t.auditYear&&e.append("auditYear",t.auditYear),t!=null&&t.cLevel&&e.append("cLevel",t.cLevel),qe.get(`/api/vp-finding-actions?${e.toString()}`)},getFindingActionsAging:async()=>qe.get("/api/finding-actions-aging"),getFindingActionAgeSummary:async()=>qe.get("/api/finding-action-age-summary"),getFindingRiskDistributionByProject:async()=>qe.get("/api/finding-risk-distribution-by-project"),getFindingDetailsByControlAndRisk:async()=>qe.get("/api/finding-details-by-control-and-risk"),getFindingDetailsByTypeAndRisk:async()=>qe.get("/api/finding-details-by-type-and-risk"),getFraudImpactScoreCards:async()=>qe.get("/api/fraud-impact-score-cards"),getLpImpactScoreCards:async()=>qe.get("/api/lp-impact-score-cards"),getFinancialImpactSum:async()=>qe.get("/api/financial-impact-sum"),getMatScores:async()=>qe.get("/api/mat-scores"),getRadarChartData:async()=>qe.get("/api/radar-chart-data"),getGoogleSheetData:async()=>qe.get("/api/google-sheet-data"),getAuditTypes:async()=>qe.get("/api/audit-types"),getAuditCountries:async()=>qe.get("/api/audit-countries"),getCLevelOptions:async()=>qe.get("/api/clevel-options"),getActionResponsibleOptions:async()=>qe.get("/api/action-responsible-options"),getActionAgeDistribution:async t=>{const e=new URLSearchParams;return t!=null&&t.responsibleEmail&&e.append("responsibleEmail",t.responsibleEmail),t!=null&&t.auditYear&&e.append("auditYear",t.auditYear),qe.get(`/api/finding-action-age?${e.toString()}`)},getLeadStatusDistribution:async(t="2024+")=>{const e=encodeURIComponent(t);return qe.get(`/api/lead-status-distribution?auditYear=${e}`)},getProjectRiskDistribution:async()=>qe.get("/api/project-risk-distribution"),getDepartmentStats:async()=>qe.get("/api/department-stats"),exportFindingActions:async t=>{const e=new URLSearchParams;return t&&Object.entries(t).forEach(([n,s])=>{s&&e.append(n,s.toString())}),qe.get(`/api/finding-actions-export?${e.toString()}`,{responseType:"blob"})},exportFindingActionsAging:async()=>qe.get("/api/finding-actions-aging-export",{responseType:"blob"}),getActionResponsibleList:async()=>qe.get("/api/email/action-responsible-list"),getAllActionResponsibleList:async()=>qe.get("/api/email/all-action-responsible-list"),getCLevelList:async()=>qe.get("/api/email/clevel-list"),getVPList:async()=>qe.get("/api/email/vp-list"),getActionDataForEmail:async(t,e,n)=>qe.get(`/api/email/action-data/${t}`,{params:{reportingTarget:e,auditYear:n||"2024+"}}),previewEmail:async t=>qe.post("/api/preview-email",t),sendEmail:async t=>qe.post("/api/send-email",t),sendActionResponsibleEmail:async t=>qe.post("/api/send-action-responsible-email",t),sendCLevelEmail:async t=>qe.post("/api/send-clevel-email",t),getControlElementDistribution:async t=>{const e=t?`?auditYear=${encodeURIComponent(t)}`:"";return qe.get(`/api/statistics-by-control-and-risk${e}`)},getRiskTypeDistribution:async t=>{const e=t?`?auditYear=${encodeURIComponent(t)}`:"";return qe.get(`/api/statistics-by-type-and-risk${e}`)},getActionsByStatus:async(t,e)=>{const n=new URLSearchParams({status:t});return e&&n.append("auditYear",e),qe.get(`/api/finding-actions-by-status?${n.toString()}`)},getFraudInternalControl:async()=>qe.get("/api/google-sheet-data"),getLossPreventionSummary:async()=>qe.get("/api/loss-prevention-summary"),getOverdueActions:async()=>qe.get("/api/overdue-actions"),getUpcomingActions:async()=>qe.get("/api/upcoming-actions"),getTeamFindingActions:async t=>{const e=new URLSearchParams;return t!=null&&t.auditYear&&t.auditYear!=="all"&&e.append("auditYear",t.auditYear),t!=null&&t.managerEmail&&e.append("managerEmail",t.managerEmail),qe.get(`/api/team-finding-actions${e.toString()?`?${e.toString()}`:""}`)},getManagementFindingActions:async t=>{const e=new URLSearchParams;return t!=null&&t.auditYear&&t.auditYear!=="all"&&e.append("auditYear",t.auditYear),qe.get(`/api/management-finding-actions${e.toString()?`?${e.toString()}`:""}`)}};function Hd(){const[t,e]=L.useState(!1),{addNotification:n}=Ki();return{isExporting:t,exportFindingActions:async a=>{try{e(!0);const o=await Yt.exportFindingActions(a);if(!o||o.size===0)throw new Error("Invalid or empty Excel file received");const c=window.URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download=`finding-actions-${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(u),u.click(),setTimeout(()=>{document.body.removeChild(u),window.URL.revokeObjectURL(c)},100),n({type:"success",message:"Finding actions exported successfully"})}catch{n({type:"error",message:"Failed to export finding actions"})}finally{e(!1)}},exportAgingData:async()=>{try{e(!0);const a=await Yt.exportFindingActionsAging(),o=window.URL.createObjectURL(a),c=document.createElement("a");c.href=o,c.download=`finding-actions-aging-${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o),n({type:"success",message:"Aging data exported successfully"})}catch{n({type:"error",message:"Failed to export aging data"})}finally{e(!1)}}}}const Wn={retry:2,retryDelay:t=>Math.min(1e3*2**t,3e4),staleTime:300*1e3,onError:()=>{}};function SE(){return kn({queryKey:["audit-projects-by-year"],queryFn:()=>Yt.getAuditProjectsByYear(),...Wn})}function CE(){return kn({queryKey:["investigation-counts"],queryFn:()=>Yt.getInvestigationCounts(),...Wn})}function AE(t,e){return kn({queryKey:["finding-status-by-year",t,e],queryFn:()=>Yt.getFindingStatusByYear(t,e),...Wn})}function U1(t){return kn({queryKey:["finding-action-status-distribution",t],queryFn:()=>Yt.getFindingActionStatusDistribution(t),...Wn})}function EE(t){return kn({queryKey:["actions-by-audit-and-risk",t],queryFn:()=>Yt.getActionsByAuditAndRisk(t),...Wn})}function LE(t){return kn({queryKey:["findings-by-audit-and-risk",t],queryFn:()=>Yt.getFindingsByAuditAndRisk(t),...Wn})}function OE(t){return kn({queryKey:["department-finding-actions",t],queryFn:()=>Yt.getDepartmentFindingActions(t),...Wn,staleTime:120*1e3})}function ME(t){return kn({queryKey:["clevel-finding-actions",t],queryFn:()=>Yt.getCLevelFindingActions(t),...Wn,staleTime:120*1e3})}function PE(t){return kn({queryKey:["all-finding-actions",t],queryFn:()=>Yt.getAllFindingActions(t),...Wn,staleTime:120*1e3})}function RE(){return kn({queryKey:["fraud-impact-score-cards"],queryFn:()=>Yt.getFraudImpactScoreCards(),...Wn,staleTime:600*1e3})}function TE(){return kn({queryKey:["lp-impact-score-cards"],queryFn:()=>Yt.getLpImpactScoreCards(),...Wn,staleTime:600*1e3})}function Z_(){return kn({queryKey:["mat-scores"],queryFn:()=>Yt.getMatScores(),...Wn,staleTime:600*1e3})}function DE(){return kn({queryKey:["radar-chart-data"],queryFn:()=>Yt.getRadarChartData(),...Wn,staleTime:600*1e3})}function IE(t){return kn({queryKey:["action-age-distribution",t],queryFn:()=>Yt.getActionAgeDistribution(t),...Wn})}function FE(t="2024+"){return kn({queryKey:["lead-status-distribution",t],queryFn:()=>Yt.getLeadStatusDistribution(t),...Wn})}function zE(t){return kn({queryKey:["control-element-distribution",t],queryFn:()=>Yt.getControlElementDistribution(t),...Wn,staleTime:300*1e3})}function BE(t){return kn({queryKey:["risk-type-distribution",t],queryFn:()=>Yt.getRiskTypeDistribution(t),...Wn,staleTime:300*1e3})}function qE(){return kn({queryKey:["fraud-internal-control"],queryFn:()=>Yt.getFraudInternalControl(),...Wn,staleTime:600*1e3})}function WE(){return kn({queryKey:["loss-prevention-summary"],queryFn:()=>Yt.getLossPreventionSummary(),...Wn,staleTime:600*1e3})}function UE(){return kn({queryKey:["overdue-actions"],queryFn:()=>Yt.getOverdueActions(),...Wn,staleTime:300*1e3})}function HE(){return kn({queryKey:["upcoming-actions"],queryFn:()=>Yt.getUpcomingActions(),...Wn,staleTime:300*1e3})}function $E(t){return kn({queryKey:["team-finding-actions",t],queryFn:()=>Yt.getTeamFindingActions(t),...Wn,staleTime:120*1e3})}function VE(t){return kn({queryKey:["management-finding-actions",t],queryFn:()=>Yt.getManagementFindingActions(t),...Wn,staleTime:0})}const YE=({onOpenEmailModal:t,onLogout:e})=>{var h,p;const[n,s]=L.useState(!1),i=L.useRef(null),{user:a,role:o}=Dr(),{hasComponent:c}=J_();L.useEffect(()=>{const m=g=>{i.current&&!i.current.contains(g.target)&&s(!1)};return n&&document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[n]);const u=c("send_email_button");L.useEffect(()=>{},[n,u,o]);const f=m=>{m(),s(!1)};return r.jsxs("div",{className:"relative",ref:i,children:[r.jsxs("button",{onClick:()=>s(!n),className:"flex items-center gap-[4.8px] md:gap-[9.6px] hover:bg-white/10 rounded-lg p-[3.2px] md:p-[6.4px] transition-colors",children:[r.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[r.jsx("span",{className:"text-white text-[11.2px] font-medium",children:a==null?void 0:a.name}),r.jsx("span",{className:"text-purple-200 text-[9.6px]",children:a==null?void 0:a.email})]}),r.jsx("div",{className:"h-[25.6px] w-[25.6px] md:h-[32px] md:w-[32px] rounded-full bg-white/20 flex items-center justify-center",children:r.jsx("span",{className:"text-white font-semibold text-[9.6px] md:text-[11.2px]",children:((h=a==null?void 0:a.name)==null?void 0:h.charAt(0).toUpperCase())||"U"})}),r.jsx("svg",{className:F("w-[9.6px] h-[9.6px] md:w-[12.8px] md:h-[12.8px] text-white transition-transform duration-200 hidden md:block",n&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&r.jsxs("div",{className:"absolute right-0 mt-1 md:mt-2 w-[calc(100vw-1rem)] max-w-[280px] md:w-72 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden z-50",children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white p-[9.6px] md:p-[12.8px]",children:r.jsxs("div",{className:"flex items-center gap-[6.4px] md:gap-[9.6px]",children:[r.jsx("div",{className:"h-[32px] w-[32px] md:h-[38.4px] md:w-[38.4px] rounded-full bg-white/20 flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-white font-semibold text-[12.8px] md:text-[14.4px]",children:((p=a==null?void 0:a.name)==null?void 0:p.charAt(0).toUpperCase())||"U"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-semibold text-[11.2px] md:text-[12.8px] truncate",children:a==null?void 0:a.name}),r.jsx("p",{className:"text-[9.6px] text-purple-200 truncate",children:a==null?void 0:a.email}),r.jsx("p",{className:"text-[9.6px] text-purple-300 mt-[2px] md:mt-[3.2px] truncate",children:o==null?void 0:o.replace("_"," ").split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" ")})]})]})}),r.jsxs("div",{className:"py-[3.2px] md:py-[6.4px]",children:[u&&r.jsxs("button",{onClick:()=>f(t),className:"w-full flex items-center gap-[6.4px] md:gap-[9.6px] px-[9.6px] md:px-[12.8px] py-[6.4px] md:py-[9.6px] text-gray-700 hover:bg-purple-50 transition-colors text-[11.2px] md:text-[12.8px]",children:[r.jsx("svg",{className:"w-[12.8px] h-[12.8px] md:w-[16px] md:h-[16px] text-purple-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("span",{className:"font-medium",children:"Send Email"})]}),r.jsxs("button",{onClick:()=>f(e),className:"w-full flex items-center gap-[6.4px] md:gap-[9.6px] px-[9.6px] md:px-[12.8px] py-[6.4px] md:py-[9.6px] text-gray-700 hover:bg-red-50 transition-colors border-t border-gray-100 text-[11.2px] md:text-[12.8px]",children:[r.jsx("svg",{className:"w-[12.8px] h-[12.8px] md:w-[16px] md:h-[16px] text-red-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),r.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})]})},KE=({onOpenEmailModal:t})=>{const e=rc(),{user:n,role:s,isImpersonating:i,originalUser:a,logout:o,stopImpersonation:c}=Dr(),[u,f]=L.useState(!1),h=async()=>{try{f(!0),await c()}catch{}finally{f(!1)}},p=()=>{s&&["admin","team","team_manager","ceo"].includes(s)&&e("/")},{isSidebarOpen:m,toggleSidebar:g}=Ki(),y=async()=>{await o(),window.location.href="/login"};return r.jsxs(r.Fragment,{children:[i&&r.jsxs("div",{className:"fixed top-0 left-0 right-0 z-[60] bg-yellow-500 text-black px-2 md:px-6 py-1.5 md:py-2 flex items-center justify-between text-xs md:text-sm font-medium shadow-lg",children:[r.jsxs("span",{className:"truncate flex-1 min-w-0 mr-2",children:[r.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 inline mr-1 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsxs("span",{className:"hidden sm:inline",children:["Viewing as: ",r.jsx("strong",{children:n==null?void 0:n.email})," (Original: ",a==null?void 0:a.email,")"]}),r.jsxs("span",{className:"sm:hidden",children:["Viewing as: ",r.jsx("strong",{children:n==null?void 0:n.email})]})]}),r.jsxs(Be,{variant:"outline",size:"sm",onClick:h,isLoading:u,className:"bg-black text-yellow-500 hover:bg-gray-800 border-black text-xs md:text-sm px-2 md:px-4 py-1 md:py-2 flex-shrink-0",children:[r.jsx("span",{className:"hidden sm:inline",children:"Stop Viewing"}),r.jsx("span",{className:"sm:hidden",children:"Stop"})]})]}),r.jsx("header",{className:F("fixed left-0 right-0 z-50","h-[38.4px] md:h-[51.2px]",i?"top-10":"top-0","bg-gradient-to-r from-[#5D3EBC] to-[#6B46C1]","shadow-lg border-b border-purple-700/20","backdrop-blur-lg","transition-all duration-200"),children:r.jsxs("div",{className:"h-full px-[6.4px] md:px-[19.2px] flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-[6.4px] md:gap-[12.8px]",children:[r.jsx("button",{onClick:g,className:"text-white hover:bg-white/10 p-[4.8px] md:p-[6.4px] rounded-lg transition-colors","aria-label":"Toggle sidebar",children:r.jsx("svg",{className:"w-4 h-4 md:w-[19.2px] md:h-[19.2px]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:m?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),r.jsxs("div",{className:"flex items-center gap-[6.4px] md:gap-[9.6px] cursor-pointer hover:opacity-90 transition-opacity",onClick:p,children:[r.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-[19.2px] w-[19.2px] md:h-[25.6px] md:w-[25.6px]"}),r.jsx("h1",{className:"text-white text-[11.2px] md:text-[14.4px] font-semibold hidden md:block",children:"Audit Department Dashboard"})]})]}),r.jsx("div",{className:"flex items-center gap-1 md:gap-4",children:n&&r.jsx(r.Fragment,{children:r.jsx(YE,{onOpenEmailModal:()=>t==null?void 0:t(),onLogout:y})})})]})})]})},GE=()=>{const t=Ko(),{isSidebarOpen:e,setSidebarOpen:n}=Ki(),{isImpersonating:s,permissions:i}=Dr(),a=()=>{n(!1)};L.useEffect(()=>{const f=h=>{h.key==="Escape"&&e&&n(!1)};if(e)return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[e,n]);const o=[{name:"Dashboard",path:"/",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),componentKey:"dashboard_page"},{name:"My Team Actions",path:"/my-actions",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),componentKey:"my_actions_page"},{name:"Department Actions",path:"/department-actions",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),componentKey:"department_actions_page"},{name:"C-Level Actions",path:"/clevel-actions",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),componentKey:"clevel_actions_page"},{name:"Management Level Actions",path:"/management-level-actions",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7h18M3 12h18M3 17h18"})}),componentKey:"management_actions_page"},{name:"All Findings & Actions",path:"/all-findings-actions",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})}),componentKey:"all_findings_actions_page"},{name:"Annual Audit Plan",path:"/annual-audit-plan",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),componentKey:"annual_audit_plan_page"},{name:"Audit Universe",path:"/audit-universe",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),componentKey:"audit_universe_page"},{name:"Risk Management",path:"/risk-management",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),componentKey:"risk_management_page"},{name:"Audit Maturity",path:"/audit-maturity",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),componentKey:"audit_maturity_page"},{name:"Task Manager",path:"/tasks",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),componentKey:"task_manager"},{name:"Access Management",path:"/access-management",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),componentKey:"access_management"},{name:"Audit Finding",path:"/audit-findings",icon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),componentKey:"audit_finding_page"}],c=f=>{var p;return((p=i==null?void 0:i.components)==null?void 0:p.includes(f.componentKey))===!0},u=o.filter(c);return r.jsxs(r.Fragment,{children:[e&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>Ki.getState().setSidebarOpen(!1)}),r.jsx("aside",{className:F("fixed left-0 bottom-0 z-40","w-64 bg-white border-r border-gray-200","transition-all duration-300 ease-in-out","shadow-xl",s?"top-[104px]":"top-16",e?"translate-x-0":"-translate-x-full"),children:r.jsx("nav",{className:"p-4 space-y-2 h-full overflow-y-auto",children:u.map(f=>{const h=t.pathname===f.path;return r.jsxs(GC,{to:f.path,onClick:a,className:F("flex items-center gap-3 px-4 py-3 rounded-lg","transition-all duration-200","font-medium text-sm",h?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-md":"text-gray-700 hover:bg-gray-100 hover:text-purple-600"),children:[f.icon,r.jsx("span",{children:f.name})]},f.path)})})})]})},XE=({isOpen:t,onClose:e})=>{const[n,s]=L.useState(""),[i,a]=L.useState(""),[o,c]=L.useState([]),[u,f]=L.useState([]),[h,p]=L.useState("all"),[m,g]=L.useState(!1),[y,b]=L.useState(!1),[v,w]=L.useState(!1),[N,k]=L.useState({current:0,total:0}),[j,S]=L.useState(!1),[C,O]=L.useState(!1),[M,B]=L.useState(null),[I,R]=L.useState(!1),{addNotification:P}=Ki();L.useEffect(()=>{t||(s(""),a(""),c([]),f([]),p("all"),g(!1),k({current:0,total:0}),S(!1),O(!1),B(null),R(!1))},[t]),L.useEffect(()=>{const Y=U=>{U.key==="Escape"&&t&&ne()};if(t)return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[t,y,m]),L.useEffect(()=>{(async()=>{if(!n){c([]),f([]);return}try{if(w(!0),n==="action_responsible"){const U=await Yt.getActionResponsibleList(),T=await Yt.getAllActionResponsibleList();U.success&&U.data&&(c(U.data),U.data.length===1&&a(U.data[0].email)),T.success&&T.data&&(console.log(" Filter list data from backend:",T.data),f(T.data))}else if(n==="vp"){const U=await Yt.getActionResponsibleList(),T=await Yt.getVPList();U.success&&U.data&&(c(U.data),U.data.length===1&&a(U.data[0].email)),T.success&&T.data&&(console.log(" VP Filter list data from backend:",T.data),f(T.data))}else{const U=await Yt.getCLevelList();U.success&&U.data&&(c(U.data),f(U.data),U.data.length===1&&a(U.data[0].email))}}catch{P({type:"error",message:"Failed to load recipient list"})}finally{w(!1)}})()},[n,P]);const q=async(Y,U,T)=>{try{const W=T||Y;if(!n||n!=="action_responsible"&&n!=="clevel"&&n!=="vp")throw new Error("Invalid reporting target");const z=await Yt.getActionDataForEmail(W,n,"2024+");if(!z.success||!z.data)throw new Error("Failed to fetch action data");const Q=z.data;let Z="both-actions";return n==="clevel"?Z="clevel-actions":n==="vp"&&(Z="vp-actions"),{to:Y,subject:`Audit Finding Actions - ${U}`,emailType:"template",actionResponsible:W,auditYear:"2024+",chartType:Z,content:`Dear ${U}, Please review your pending audit finding actions.`,overdueTableHTML:Q.overdueTableHTML,overdueTableHTML2:Q.upcomingTableHTML,riskAcceptedTableHTML:Q.riskAcceptedTableHTML,openFinancialImpact:Q.openFinancialImpact,overdueFinancialImpact:Q.overdueFinancialImpact,overdueCount:Q.overdueCount,upcomingCount:Q.upcomingCount,riskAcceptedCount:Q.riskAcceptedCount,chartHTML:Q.chartHTML,ownershipBreakdownHTML:Q.ownershipBreakdownHTML||"",teamOverdueTableHTML:Q.teamOverdueTableHTML||"",teamUpcomingTableHTML:Q.teamUpcomingTableHTML||""}}catch(W){throw W}},H=async()=>{if(!n||!i){P({type:"warning",message:"Please select a reporting target and recipient"});return}try{if(b(!0),S(!1),m){const Y=h==="all"?u:u.filter(z=>z.email===h);if(Y.length===0){P({type:"warning",message:"No recipients selected"});return}if(!confirm(`Send ${Y.length} separate personalized emails to ${i}?

Each email will contain a different Action Responsible's data for testing.`)){b(!1);return}k({current:0,total:Y.length});let U=0,T=0;const W=[];for(let z=0;z<Y.length;z++){if(j){P({type:"info",message:`Cancelled. Sent ${U} of ${Y.length} emails`});break}k({current:z+1,total:Y.length});const Q=Y[z];if(!Q){T++;continue}try{console.log(` Sending email ${z+1}/${Y.length} for ${Q.name}'s data to ${i}...`);const Z=await q(i,Q.name,Q.email);await Yt.sendEmail(Z),U++,console.log(` Email sent successfully with ${Q.name}'s data`)}catch(Z){console.error(` Failed to send email for ${Q.name}:`,Z),T++,W.push(Q.name)}await new Promise(Z=>setTimeout(Z,1e3))}if(!j){const z=U>0?`Successfully sent ${U} of ${Y.length} emails to ${i}${T>0?`

Failed for: ${W.join(", ")}`:""}`:"Failed to send any emails";P({type:U>0?"success":"error",message:z}),e()}}else{const Y=o.find(z=>z.email===i),U=(Y==null?void 0:Y.name)||i,W=await q(i,U,h&&h!=="all"?h:i);await Yt.sendEmail(W),P({type:"success",message:`Email sent successfully to ${i}`}),e()}}catch{P({type:"error",message:"Failed to send email"})}finally{b(!1),k({current:0,total:0})}},G=async()=>{if(!n||!i){P({type:"warning",message:"Please select a reporting target and recipient"});return}if(h==="all"){P({type:"info",message:'Preview is not available for "all" filter. Please select a specific recipient.'});return}try{R(!0);const Y=o.find(Z=>Z.email===i),U=(Y==null?void 0:Y.name)||i,W=await q(i,U,h&&h!=="all"?h:i),z=await Yt.previewEmail(W);console.log(" Preview response:",z);const Q=z.data||z;Q&&Q.success&&Q.preview?(B(Q.preview),O(!0),console.log(" Preview data set:",Q.preview)):(console.error(" Preview response invalid:",z),P({type:"error",message:"Failed to preview email"}))}catch(Y){console.error("Preview error:",Y),P({type:"error",message:"Failed to preview email"})}finally{R(!1)}},ne=()=>{y&&m?S(!0):e()};if(!t)return null;const X=!n||!i||y,ee=n==="action_responsible"?"Action Responsible":n==="vp"?"VP":"C-Level";return r.jsxs("div",{className:"fixed inset-0 bg-black/50 z-[70] flex items-center justify-center p-4",children:[r.jsxs(Ie,{className:"max-w-xl w-full max-h-[90vh] overflow-y-auto",variant:"elevated",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Send Email"})]}),r.jsx("button",{onClick:ne,disabled:y&&m,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email Type:"}),r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2.5 bg-gray-50 border border-gray-300 rounded-lg",children:[r.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Use SendGrid Template"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[r.jsx("svg",{className:"w-4 h-4 inline mr-1 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Select Reporting Target:"]}),r.jsxs("select",{value:n,onChange:Y=>{s(Y.target.value),a(""),p("all"),g(!1)},disabled:y,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50",children:[r.jsx("option",{value:"",children:"Please select..."}),r.jsx("option",{value:"action_responsible",children:"Action Responsible"})]})]}),n&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"To:"}),v?r.jsx("div",{className:"flex items-center justify-center py-6",children:r.jsx(Nt,{size:"md"})}):o.length===0?r.jsx("div",{className:"text-center py-6 text-sm text-gray-500",children:"No recipients found with open actions"}):r.jsxs("select",{value:i,onChange:Y=>a(Y.target.value),disabled:y,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50",children:[r.jsx("option",{value:"",children:"Select recipient..."}),o.map(Y=>r.jsx("option",{value:Y.email,children:Y.email},Y.email))]})]}),u.length>0&&r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[r.jsx("svg",{className:"w-4 h-4 inline mr-1 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Filter by ",ee,":"]}),r.jsxs("select",{value:h,onChange:Y=>{const U=Y.target.value;if(p(U),n==="action_responsible"&&U!=="all"){if(!o.some(W=>W.email===U)){const W=u.find(Q=>Q.email===U),z={email:U,name:(W==null?void 0:W.name)||U,actionCount:(W==null?void 0:W.actionCount)||0};c(Q=>[z,...Q])}a(U)}},disabled:y,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50",children:[r.jsxs("option",{value:"all",children:["All ",ee,"s (",u.length," users)"]}),u.map(Y=>r.jsxs("option",{value:Y.email,children:[Y.name," (",Y.email,")"]},Y.email))]})]}),u.length>0&&r.jsx("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-start gap-2.5",children:[r.jsx("input",{type:"checkbox",id:"bulkEmail",checked:m,onChange:Y=>g(Y.target.checked),disabled:y,className:"mt-0.5 w-4 h-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("label",{htmlFor:"bulkEmail",className:"text-sm font-medium text-gray-900 cursor-pointer",children:[r.jsx("svg",{className:"w-3.5 h-3.5 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Send separate emails for each ",ee,"'s data"]}),r.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"All emails will be sent to the address above, but each contains different user's data"})]})]})})]}),n&&i&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[r.jsx("p",{className:"text-sm text-blue-800 font-medium",children:m?`Each email to ${i} will include:`:"Email will include:"}),r.jsxs("ul",{className:"text-xs text-blue-700 mt-1.5 space-y-0.5 list-disc list-inside",children:[r.jsx("li",{children:"Dashboard report with audit findings"}),r.jsx("li",{children:"Open and overdue actions tables"}),r.jsx("li",{children:"Upcoming actions summary"}),r.jsx("li",{children:"Financial impact data"}),m&&r.jsx("li",{className:"font-semibold",children:" Different data for each selected user"})]})]}),y&&m&&N.total>0&&r.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[r.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Sending emails..."}),r.jsxs("span",{className:"text-sm text-purple-700",children:[N.current," / ",N.total]})]}),r.jsx("div",{className:"w-full bg-purple-200 rounded-full h-2",children:r.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${N.current/N.total*100}%`}})})]}),r.jsxs("div",{className:"flex gap-2.5 justify-end pt-3 border-t border-gray-200",children:[r.jsx(Be,{variant:"outline",onClick:ne,disabled:y&&m&&!j,children:y&&m?"Cancel":"Close"}),!m&&h!=="all"&&r.jsxs(Be,{variant:"outline",onClick:G,isLoading:I,disabled:X||I,children:[r.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview"]}),r.jsxs(Be,{variant:"primary",onClick:H,isLoading:y,disabled:X,children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),y?m?`Sending ${N.current}/${N.total}...`:"Sending...":"Send Email"]})]})]})]}),C&&M&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:r.jsx(Ie,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto m-4",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Email Preview"}),r.jsx(Be,{variant:"outline",onClick:()=>{O(!1),B(null)},children:"Close"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border-b pb-3",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-1 block",children:"To:"}),r.jsx("p",{className:"text-gray-800",children:M.to})]}),M.cc&&M.cc.length>0?r.jsxs("div",{className:"border-b pb-3",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-1 block",children:"CC:"}),r.jsx("div",{className:"space-y-1",children:M.cc.map((Y,U)=>r.jsx("p",{className:"text-gray-800",children:Y},U))})]}):r.jsxs("div",{className:"border-b pb-3",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-1 block",children:"CC:"}),r.jsx("p",{className:"text-gray-400 italic",children:"No CC recipients"})]}),r.jsxs("div",{className:"border-b pb-3",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-1 block",children:"Subject:"}),r.jsx("p",{className:"text-gray-800",children:M.subject})]}),r.jsxs("div",{className:"border-b pb-3",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-1 block",children:"Action Responsible:"}),r.jsx("p",{className:"text-gray-800",children:M.actionResponsibleName||"N/A"}),M.actionResponsibleDepartment&&r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Department: ",M.actionResponsibleDepartment]})]}),M.hasTemplateData&&r.jsxs("div",{className:"border-b pb-3",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"Email Content Summary:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[r.jsx("p",{className:"text-xs font-semibold text-blue-600 mb-1",children:"Overdue Actions"}),r.jsx("p",{className:"text-lg font-bold text-blue-800",children:M.overdueCount||0}),r.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Impact: ",M.overdueFinancialImpact||"0"]})]}),r.jsxs("div",{className:"bg-yellow-50 p-3 rounded",children:[r.jsx("p",{className:"text-xs font-semibold text-yellow-600 mb-1",children:"Upcoming Actions"}),r.jsx("p",{className:"text-lg font-bold text-yellow-800",children:M.upcomingCount||0})]}),r.jsxs("div",{className:"bg-red-50 p-3 rounded",children:[r.jsx("p",{className:"text-xs font-semibold text-red-600 mb-1",children:"Risk Accepted"}),r.jsx("p",{className:"text-lg font-bold text-red-800",children:M.riskAcceptedCount||0})]}),r.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[r.jsx("p",{className:"text-xs font-semibold text-green-600 mb-1",children:"Open Financial Impact"}),r.jsx("p",{className:"text-lg font-bold text-green-800",children:M.openFinancialImpact||"0"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(Be,{variant:"outline",onClick:()=>{O(!1),B(null)},children:"Cancel"}),r.jsxs(Be,{variant:"primary",onClick:async()=>{O(!1);try{b(!0);const Y=o.find(z=>z.email===i),U=(Y==null?void 0:Y.name)||i,W=await q(i,U,h&&h!=="all"?h:i);await Yt.sendEmail(W),P({type:"success",message:`Email sent successfully to ${i}`}),e()}catch{P({type:"error",message:"Failed to send email"})}finally{b(!1)}},children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Send Email"]})]})]})]})})})]})},QE=()=>{const{isSidebarOpen:t}=Ki(),{isImpersonating:e}=Dr(),[n,s]=L.useState(!1);return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(KE,{onOpenEmailModal:()=>s(!0)}),r.jsx(GE,{}),r.jsx(XE,{isOpen:n,onClose:()=>s(!1)}),r.jsx(_E,{}),r.jsx("main",{className:F("transition-all duration-300","min-h-screen",e?"pt-[70.4px] md:pt-[83.2px]":"pt-[38.4px] md:pt-[51.2px]",t?"lg:pl-64":"lg:pl-0"),children:r.jsx("div",{className:"p-6 max-w-[1920px] mx-auto",children:r.jsx(IC,{})})})]})},gs=({children:t,requiredRoles:e})=>{const{isAuthenticated:n,isLoading:s,role:i}=Dr(),a=Ko();return s?r.jsx(Nt,{fullScreen:!0,size:"xl",text:"Loading..."}):n?e&&i&&!e.includes(i)?r.jsx(d1,{to:"/unauthorized",replace:!0}):r.jsx(r.Fragment,{children:t}):r.jsx(d1,{to:"/login",state:{from:a},replace:!0})},JE=()=>{const t=rc(),{login:e}=Dr(),[n,s]=L.useState(!1),[i,a]=L.useState(""),[o,c]=L.useState(""),[u,f]=L.useState(""),[h,p]=L.useState(!1),m=async y=>{y.preventDefault(),f(""),p(!0);try{if(await e(i,o)){const v=Dr.getState().role;t(v==="team"?"/my-actions":"/")}else f("Invalid email or password")}catch{f("An error occurred during login")}finally{p(!1)}},g=()=>{const y=window.location.origin;window.location.href=`${y}/api/auth/google`};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-700 to-purple-900 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),r.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),r.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"})]}),r.jsxs("div",{className:"relative z-10 w-full max-w-sm md:max-w-sm space-y-4 md:space-y-6",children:[r.jsx("div",{className:"flex justify-center animate-logo-entrance",children:r.jsxs("div",{className:"relative group cursor-pointer",children:[r.jsx("div",{className:"absolute inset-0 bg-white/30 rounded-full blur-2xl md:blur-2xl group-hover:blur-3xl transition-all duration-500 animate-pulse-glow"}),r.jsx("div",{className:"absolute -inset-2 border-2 border-white/20 rounded-full animate-spin-slow"}),r.jsx("div",{className:"relative inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 bg-white rounded-full shadow-2xl transform group-hover:scale-110 group-hover:rotate-12 transition-all duration-500 animate-bounce-gentle",children:r.jsx("img",{src:"/logo.png",alt:"Getir Logo",className:"w-12 h-12 md:w-16 md:h-16 object-contain group-hover:scale-110 transition-transform duration-500"})}),r.jsx("div",{className:"absolute -top-2 -right-2 w-2 h-2 md:w-3 md:h-3 bg-yellow-400 rounded-full animate-sparkle-1"}),r.jsx("div",{className:"absolute -bottom-2 -left-2 w-1.5 h-1.5 md:w-2 md:h-2 bg-pink-400 rounded-full animate-sparkle-2"})]})}),r.jsxs("div",{className:"text-center space-y-1 md:space-y-2 animate-title-entrance",children:[r.jsx("h1",{className:"text-[16px] md:text-[24px] font-bold text-white drop-shadow-lg transform hover:scale-105 transition-transform duration-300",children:"Audit & Corporate Security"}),r.jsx("p",{className:"text-purple-200 text-xs md:text-sm font-medium animate-fade-in-delay",children:"Dashboard Login"})]}),r.jsxs("div",{className:"space-y-3 md:space-y-4 flex flex-col items-center",children:[r.jsxs("button",{onClick:g,className:"w-full max-w-[280px] md:max-w-full group relative overflow-hidden bg-white hover:bg-gray-50 text-gray-900 font-semibold py-3 md:py-4 px-4 md:px-6 rounded-xl md:rounded-2xl shadow-2xl hover:shadow-3xl transition-all duration-300 flex items-center justify-center gap-2.5 md:gap-3 transform hover:scale-[1.03] hover:-translate-y-2 active:scale-[0.97] animate-button-entrance",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),r.jsxs("svg",{className:"w-5 h-5 md:w-6 md:h-6 relative z-10 group-hover:scale-125 group-hover:rotate-12 transition-all duration-300 animate-icon-bounce",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),r.jsx("span",{className:"relative z-10 text-sm md:text-base group-hover:tracking-wide transition-all duration-300",children:"Continue with Google"})]}),r.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 my-1.5 md:my-2 animate-divider-entrance",children:[r.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-white/30 to-white/20"}),r.jsx("span",{className:"text-white/70 text-[10px] md:text-xs font-semibold px-2 md:px-3 py-0.5 md:py-1 bg-white/10 rounded-full backdrop-blur-sm transform hover:scale-110 transition-transform duration-300 cursor-default",children:"or"}),r.jsx("div",{className:"flex-1 h-px bg-gradient-to-l from-transparent via-white/30 to-white/20"})]}),r.jsxs("button",{onClick:()=>s(!0),className:"w-full max-w-[280px] md:max-w-full group relative overflow-hidden bg-white/10 hover:bg-white/15 backdrop-blur-xl text-white font-semibold py-3 md:py-4 px-4 md:px-6 rounded-xl md:rounded-2xl border border-white/20 hover:border-white/30 shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center justify-center gap-2.5 md:gap-3 transform hover:scale-[1.03] hover:-translate-y-2 active:scale-[0.97] animate-button-entrance-delay",children:[r.jsx("div",{className:"absolute inset-0 bg-white/10 rounded-xl md:rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-xl"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),r.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 relative z-10 group-hover:scale-125 group-hover:rotate-[-15deg] transition-all duration-300 animate-key-bounce",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),r.jsx("span",{className:"relative z-10 text-sm md:text-base group-hover:tracking-wide transition-all duration-300",children:"External User Login"})]})]}),r.jsx("div",{className:"text-center pt-1 md:pt-2 animate-fade-in-delay-2",children:r.jsxs("p",{className:"text-purple-200/80 text-[10px] md:text-xs transform hover:scale-105 transition-transform duration-300 inline-block",children:["Getir employees use ",r.jsx("span",{className:"font-semibold text-white animate-pulse-slow",children:"Google SSO"})]})})]}),r.jsx("div",{className:"absolute bottom-6 md:bottom-8 left-0 right-0 text-center",children:r.jsxs("div",{className:"inline-flex items-center gap-1.5 md:gap-2 px-4 md:px-6 py-2 md:py-3 bg-white/10 backdrop-blur-md rounded-full border border-white/20",children:[r.jsx("svg",{className:"w-3.5 h-3.5 md:w-4 md:h-4 text-purple-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),r.jsx("span",{className:"text-purple-100 text-xs md:text-sm font-medium",children:"Developed by Getir Technology Audit Team"})]})}),n&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",onClick:()=>{s(!1),f(""),a(""),c("")},children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-modal-enter",onClick:y=>y.stopPropagation(),children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 p-6 text-center",children:[r.jsx("button",{onClick:()=>{s(!1),f(""),a(""),c("")},className:"absolute top-4 right-4 p-2 text-white/80 hover:text-white hover:bg-white/20 rounded-lg transition-all duration-200",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl mb-3",children:r.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),r.jsx("h2",{className:"text-sm font-bold text-white mb-1",children:"External User Login"}),r.jsx("p",{className:"text-purple-100 text-sm",children:"Enter your credentials to continue"})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[u&&r.jsxs("div",{className:"p-3 bg-red-50 border-l-4 border-red-500 rounded-lg flex items-start gap-3",children:[r.jsx("svg",{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"text-sm text-red-600 font-medium",children:u})]}),r.jsxs("form",{onSubmit:m,className:"space-y-4",autoComplete:"off",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx(Tn,{type:"email",value:i,onChange:y=>a(y.target.value),placeholder:"your.email@example.com",required:!0,fullWidth:!0,autoComplete:"new-email",leftIcon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),r.jsx("a",{href:"/reset-password",className:"text-sm text-purple-600 hover:text-purple-700 font-medium",children:"Forgot password?"})]}),r.jsx(Tn,{type:"password",value:o,onChange:y=>c(y.target.value),placeholder:"",required:!0,fullWidth:!0,autoComplete:"new-password",leftIcon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),r.jsx(Be,{type:"submit",variant:"primary",fullWidth:!0,isLoading:h,size:"lg",className:"mt-4",children:"Sign In"})]})]})]})}),r.jsx("style",{children:`
        @keyframes blob {
          0% { transform: translate(0px, 0px) scale(1); }
          33% { transform: translate(30px, -50px) scale(1.1); }
          66% { transform: translate(-20px, 20px) scale(0.9); }
          100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
          animation: blob 7s infinite;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
        @keyframes logo-entrance {
          0% { 
            opacity: 0;
            transform: scale(0) rotate(-180deg);
          }
          60% {
            transform: scale(1.1) rotate(10deg);
          }
          100% { 
            opacity: 1;
            transform: scale(1) rotate(0deg);
          }
        }
        .animate-logo-entrance {
          animation: logo-entrance 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        @keyframes bounce-gentle {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-8px); }
        }
        .animate-bounce-gentle {
          animation: bounce-gentle 3s ease-in-out infinite;
        }
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
          animation: spin-slow 8s linear infinite;
        }
        @keyframes sparkle-1 {
          0%, 100% { 
            opacity: 0;
            transform: scale(0) rotate(0deg);
          }
          50% { 
            opacity: 1;
            transform: scale(1) rotate(180deg);
          }
        }
        .animate-sparkle-1 {
          animation: sparkle-1 2s ease-in-out infinite;
        }
        @keyframes sparkle-2 {
          0%, 100% { 
            opacity: 0;
            transform: scale(0) rotate(0deg);
          }
          50% { 
            opacity: 1;
            transform: scale(1) rotate(-180deg);
          }
        }
        .animate-sparkle-2 {
          animation: sparkle-2 2.5s ease-in-out infinite 0.5s;
        }
        @keyframes pulse-glow {
          0%, 100% { opacity: 0.3; }
          50% { opacity: 0.6; }
        }
        .animate-pulse-glow {
          animation: pulse-glow 2s ease-in-out infinite;
        }
        @keyframes title-entrance {
          from { 
            opacity: 0;
            transform: translateY(-20px);
          }
          to { 
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-title-entrance {
          animation: title-entrance 0.6s ease-out 0.3s both;
        }
        @keyframes button-entrance {
          from { 
            opacity: 0;
            transform: translateX(-30px) scale(0.9);
          }
          to { 
            opacity: 1;
            transform: translateX(0) scale(1);
          }
        }
        .animate-button-entrance {
          animation: button-entrance 0.5s ease-out 0.5s both;
        }
        @keyframes button-entrance-delay {
          from { 
            opacity: 0;
            transform: translateX(30px) scale(0.9);
          }
          to { 
            opacity: 1;
            transform: translateX(0) scale(1);
          }
        }
        .animate-button-entrance-delay {
          animation: button-entrance-delay 0.5s ease-out 0.7s both;
        }
        @keyframes divider-entrance {
          from { 
            opacity: 0;
            transform: scaleX(0);
          }
          to { 
            opacity: 1;
            transform: scaleX(1);
          }
        }
        .animate-divider-entrance {
          animation: divider-entrance 0.4s ease-out 0.6s both;
        }
        @keyframes icon-bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-3px); }
        }
        .animate-icon-bounce {
          animation: icon-bounce 2s ease-in-out infinite;
        }
        @keyframes key-bounce {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          25% { transform: translateY(-4px) rotate(-5deg); }
          75% { transform: translateY(-4px) rotate(5deg); }
        }
        .animate-key-bounce {
          animation: key-bounce 2.5s ease-in-out infinite;
        }
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .animate-fade-in {
          animation: fade-in 0.2s ease-out;
        }
        @keyframes fade-in-delay {
          0% { opacity: 0; transform: translateY(5px); }
          100% { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-delay {
          animation: fade-in-delay 0.5s ease-out 0.8s both;
        }
        @keyframes fade-in-delay-2 {
          0% { opacity: 0; }
          100% { opacity: 1; }
        }
        .animate-fade-in-delay-2 {
          animation: fade-in-delay-2 0.5s ease-out 1s both;
        }
        @keyframes modal-enter {
          from { 
            opacity: 0;
            transform: scale(0.95) translateY(20px);
          }
          to { 
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }
        .animate-modal-enter {
          animation: modal-enter 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .animate-pulse-slow {
          animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
      `})]})},ZE={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-3xl",layout:"vertical"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-lg",layout:"vertical"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl",layout:"vertical"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl",layout:"vertical"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl",layout:"vertical"}},e6={bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl",layout:"vertical"},t6=({investigations:t,loading:e})=>{const n=L.useMemo(()=>{if(!t||!Array.isArray(t))return[];const s={};return t.forEach(i=>{if(i.year&&i.year!=="Unknown"&&i.year!=="2020"){s[i.year]||(s[i.year]={total:0,perAuditor:i.yearPerAuditor||"0.00"});const a=s[i.year];a&&(a.total+=i.count||1,i.yearPerAuditor&&(a.perAuditor=i.yearPerAuditor))}}),Object.entries(s).sort(([i],[a])=>a.localeCompare(i)).slice(0,5)},[t]);return r.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-sm",children:[r.jsx(vt,{title:"Investigations by Year",className:"border-b border-gray-200 pb-3"}),r.jsx("div",{className:"mt-4 grid grid-cols-6 gap-2",children:e?r.jsx("div",{className:"col-span-6 flex justify-center py-8",children:r.jsx(Nt,{size:"lg"})}):n.length>0?n.map(([s,i],a)=>{const o=ZE[s]||e6;return r.jsxs("div",{className:F("relative p-2.5 overflow-hidden","hover:shadow-lg hover:scale-[1.02]","transition-all duration-300 ease-out","group cursor-pointer","border-2",o.bgColor,o.borderColor,o.shape,a<2?"col-span-3":"col-span-2"),children:[r.jsx("div",{className:F("absolute inset-0 opacity-[0.03]",a%2===0?"bg-[radial-gradient(circle_at_30%_30%,rgba(0,0,0,0.5)_1px,transparent_1px)] bg-[length:16px_16px]":"bg-[linear-gradient(45deg,transparent_25%,rgba(0,0,0,0.05)_25%,rgba(0,0,0,0.05)_50%,transparent_50%,transparent_75%,rgba(0,0,0,0.05)_75%)] bg-[length:12px_12px]")}),r.jsxs("div",{className:F("relative z-10 flex flex-col h-full",o.layout==="vertical"?"items-center justify-center":"items-start justify-between"),children:[r.jsxs("div",{className:F("flex items-center gap-1 mb-1.5",o.textColor),children:[r.jsx("div",{className:F("w-4 h-4 rounded flex items-center justify-center","bg-white/60 backdrop-blur-sm","border border-current/20"),children:r.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("p",{className:"text-[10px] font-semibold tracking-wide uppercase",children:s})]}),r.jsx("div",{className:"mb-1.5",children:r.jsx("p",{className:F("text-2xl font-bold",o.textColor,"group-hover:scale-110 transition-transform duration-300"),children:i.total})}),r.jsxs("div",{className:F("flex items-center gap-0.5",o.textColor),children:[r.jsx("svg",{className:F("w-2.5 h-2.5 opacity-70"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),r.jsxs("p",{className:F("text-[9px] font-medium opacity-80 whitespace-nowrap"),children:[i.perAuditor," per auditor"]})]})]}),o.shape==="rounded-lg"&&r.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 bg-white/20 transform rotate-45 translate-x-3 -translate-y-3"}),o.shape==="rounded-3xl"&&r.jsx("div",{className:"absolute bottom-0 left-0 w-10 h-10 bg-white/20 rounded-full blur-xl"}),o.shape==="rounded-xl"&&r.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 bg-white/20 rounded-full blur-lg"})]},s)}):r.jsx("div",{className:"col-span-6 text-center text-gray-500 py-8",children:"No data available"})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function $d(t){return t+.5|0}const Pa=(t,e,n)=>Math.max(Math.min(t,n),e);function od(t){return Pa($d(t*2.55),0,255)}function Fa(t){return Pa($d(t*255),0,255)}function Ii(t){return Pa($d(t/2.55)/100,0,1)}function H1(t){return Pa($d(t*100),0,100)}const As={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hg=[..."0123456789ABCDEF"],n6=t=>hg[t&15],r6=t=>hg[(t&240)>>4]+hg[t&15],mf=t=>(t&240)>>4===(t&15),s6=t=>mf(t.r)&&mf(t.g)&&mf(t.b)&&mf(t.a);function i6(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&As[t[1]]*17,g:255&As[t[2]]*17,b:255&As[t[3]]*17,a:e===5?As[t[4]]*17:255}:(e===7||e===9)&&(n={r:As[t[1]]<<4|As[t[2]],g:As[t[3]]<<4|As[t[4]],b:As[t[5]]<<4|As[t[6]],a:e===9?As[t[7]]<<4|As[t[8]]:255})),n}const a6=(t,e)=>t<255?e(t):"";function o6(t){var e=s6(t)?n6:r6;return t?"#"+e(t.r)+e(t.g)+e(t.b)+a6(t.a,e):void 0}const l6=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ek(t,e,n){const s=e*Math.min(n,1-n),i=(a,o=(a+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function c6(t,e,n){const s=(i,a=(i+t/60)%6)=>n-n*e*Math.max(Math.min(a,4-a,1),0);return[s(5),s(3),s(1)]}function d6(t,e,n){const s=ek(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)s[i]*=1-e-n,s[i]+=e;return s}function u6(t,e,n,s,i){return t===i?(e-n)/s+(e<n?6:0):e===i?(n-t)/s+2:(t-e)/s+4}function ay(t){const n=t.r/255,s=t.g/255,i=t.b/255,a=Math.max(n,s,i),o=Math.min(n,s,i),c=(a+o)/2;let u,f,h;return a!==o&&(h=a-o,f=c>.5?h/(2-a-o):h/(a+o),u=u6(n,s,i,h,a),u=u*60+.5),[u|0,f||0,c]}function oy(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(Fa)}function ly(t,e,n){return oy(ek,t,e,n)}function f6(t,e,n){return oy(d6,t,e,n)}function h6(t,e,n){return oy(c6,t,e,n)}function tk(t){return(t%360+360)%360}function p6(t){const e=l6.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?od(+e[5]):Fa(+e[5]));const i=tk(+e[2]),a=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=f6(i,a,o):e[1]==="hsv"?s=h6(i,a,o):s=ly(i,a,o),{r:s[0],g:s[1],b:s[2],a:n}}function m6(t,e){var n=ay(t);n[0]=tk(n[0]+e),n=ly(n),t.r=n[0],t.g=n[1],t.b=n[2]}function x6(t){if(!t)return;const e=ay(t),n=e[0],s=H1(e[1]),i=H1(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${i}%, ${Ii(t.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const $1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},V1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function g6(){const t={},e=Object.keys(V1),n=Object.keys($1);let s,i,a,o,c;for(s=0;s<e.length;s++){for(o=c=e[s],i=0;i<n.length;i++)a=n[i],c=c.replace(a,$1[a]);a=parseInt(V1[o],16),t[c]=[a>>16&255,a>>8&255,a&255]}return t}let xf;function y6(t){xf||(xf=g6(),xf.transparent=[0,0,0,0]);const e=xf[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const v6=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function b6(t){const e=v6.exec(t);let n=255,s,i,a;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?od(o):Pa(o*255,0,255)}return s=+e[1],i=+e[3],a=+e[5],s=255&(e[2]?od(s):Pa(s,0,255)),i=255&(e[4]?od(i):Pa(i,0,255)),a=255&(e[6]?od(a):Pa(a,0,255)),{r:s,g:i,b:a,a:n}}}function w6(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ii(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Im=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Cl=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function j6(t,e,n){const s=Cl(Ii(t.r)),i=Cl(Ii(t.g)),a=Cl(Ii(t.b));return{r:Fa(Im(s+n*(Cl(Ii(e.r))-s))),g:Fa(Im(i+n*(Cl(Ii(e.g))-i))),b:Fa(Im(a+n*(Cl(Ii(e.b))-a))),a:t.a+n*(e.a-t.a)}}function gf(t,e,n){if(t){let s=ay(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=ly(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function nk(t,e){return t&&Object.assign(e||{},t)}function Y1(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Fa(t[3]))):(e=nk(t,{r:0,g:0,b:0,a:1}),e.a=Fa(e.a)),e}function N6(t){return t.charAt(0)==="r"?b6(t):p6(t)}class Sd{constructor(e){if(e instanceof Sd)return e;const n=typeof e;let s;n==="object"?s=Y1(e):n==="string"&&(s=i6(e)||y6(e)||N6(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=nk(this._rgb);return e&&(e.a=Ii(e.a)),e}set rgb(e){this._rgb=Y1(e)}rgbString(){return this._valid?w6(this._rgb):void 0}hexString(){return this._valid?o6(this._rgb):void 0}hslString(){return this._valid?x6(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,i=e.rgb;let a;const o=n===a?.5:n,c=2*o-1,u=s.a-i.a,f=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;a=1-f,s.r=255&f*s.r+a*i.r+.5,s.g=255&f*s.g+a*i.g+.5,s.b=255&f*s.b+a*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=j6(this._rgb,e._rgb,n)),this}clone(){return new Sd(this.rgb)}alpha(e){return this._rgb.a=Fa(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=$d(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return gf(this._rgb,2,e),this}darken(e){return gf(this._rgb,2,-e),this}saturate(e){return gf(this._rgb,1,e),this}desaturate(e){return gf(this._rgb,1,-e),this}rotate(e){return m6(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Pi(){}const _6=(()=>{let t=0;return()=>t++})();function nn(t){return t==null}function dn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Bt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function er(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function fi(t,e){return er(t)?t:e}function Rt(t,e){return typeof t>"u"?e:t}const k6=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,rk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function cn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function un(t,e,n,s){let i,a,o;if(dn(t))for(a=t.length,i=0;i<a;i++)e.call(n,t[i],i);else if(Bt(t))for(o=Object.keys(t),a=o.length,i=0;i<a;i++)e.call(n,t[o[i]],o[i])}function Jf(t,e){let n,s,i,a;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(i=t[n],a=e[n],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function Zf(t){if(dn(t))return t.map(Zf);if(Bt(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let i=0;for(;i<s;++i)e[n[i]]=Zf(t[n[i]]);return e}return t}function sk(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function S6(t,e,n,s){if(!sk(t))return;const i=e[t],a=n[t];Bt(i)&&Bt(a)?vi(i,a,s):e[t]=Zf(a)}function vi(t,e,n){const s=dn(e)?e:[e],i=s.length;if(!Bt(t))return t;n=n||{};const a=n.merger||S6;let o;for(let c=0;c<i;++c){if(o=s[c],!Bt(o))continue;const u=Object.keys(o);for(let f=0,h=u.length;f<h;++f)a(u[f],t,o,n)}return t}function pd(t,e){return vi(t,e,{merger:C6})}function C6(t,e,n){if(!sk(t))return;const s=e[t],i=n[t];Bt(s)&&Bt(i)?pd(s,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Zf(i))}const K1={"":t=>t,x:t=>t.x,y:t=>t.y};function A6(t){const e=t.split("."),n=[];let s="";for(const i of e)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function E6(t){const e=A6(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function Ua(t,e){return(K1[e]||(K1[e]=E6(e)))(t)}function cy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ds=t=>typeof t<"u",cs=t=>typeof t=="function",G1=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function L6(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Wt=Math.PI,wn=2*Wt,O6=wn+Wt,eh=Number.POSITIVE_INFINITY,dy=Wt/180,Mn=Wt/2,Ms=Wt/4,th=Wt*2/3,ik=Math.log10,yi=Math.sign;function md(t,e,n){return Math.abs(t-e)<n}function X1(t){const e=Math.round(t);t=md(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(ik(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function M6(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((i,a)=>i-a).pop(),e}function P6(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Gl(t){return!P6(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function R6(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function T6(t,e,n){let s,i,a;for(s=0,i=t.length;s<i;s++)a=t[s][n],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function or(t){return t*(Wt/180)}function Ah(t){return t*(180/Wt)}function Q1(t){if(!er(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function nh(t,e){const n=e.x-t.x,s=e.y-t.y,i=Math.sqrt(n*n+s*s);let a=Math.atan2(s,n);return a<-.5*Wt&&(a+=wn),{angle:a,distance:i}}function Xl(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function D6(t,e){return(t-e+O6)%wn-Wt}function Rr(t){return(t%wn+wn)%wn}function Cd(t,e,n,s){const i=Rr(t),a=Rr(e),o=Rr(n),c=Rr(a-i),u=Rr(o-i),f=Rr(i-a),h=Rr(i-o);return i===a||i===o||s&&a===o||c>u&&f<h}function as(t,e,n){return Math.max(e,Math.min(n,t))}function I6(t){return as(t,-32768,32767)}function Ui(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function uy(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,i=0,a;for(;s-i>1;)a=i+s>>1,n(a)?i=a:s=a;return{lo:i,hi:s}}const pg=(t,e,n,s)=>uy(t,n,s?i=>{const a=t[i][e];return a<n||a===n&&t[i+1][e]===n}:i=>t[i][e]<n),F6=(t,e,n)=>uy(t,n,s=>t[s][e]>=n);function z6(t,e,n){let s=0,i=t.length;for(;s<i&&t[s]<e;)s++;for(;i>s&&t[i-1]>n;)i--;return s>0||i<t.length?t.slice(s,i):t}const ak=["push","pop","shift","splice","unshift"];function B6(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ak.forEach(n=>{const s="_onData"+cy(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...a){const o=i.apply(this,a);return t._chartjs.listeners.forEach(c=>{typeof c[s]=="function"&&c[s](...a)}),o}})})}function J1(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(e);i!==-1&&s.splice(i,1),!(s.length>0)&&(ak.forEach(a=>{delete t[a]}),delete t._chartjs)}function ok(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const lk=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function ck(t,e){let n=[],s=!1;return function(...i){n=i,s||(s=!0,lk.call(window,()=>{s=!1,t.apply(e,n)}))}}function q6(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const fy=t=>t==="start"?"left":t==="end"?"right":"center",Pr=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,W6=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e,yf=t=>t===0||t===1,Z1=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*wn/n)),e2=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*wn/n)+1,xd={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Mn)+1,easeOutSine:t=>Math.sin(t*Mn),easeInOutSine:t=>-.5*(Math.cos(Wt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>yf(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>yf(t)?t:Z1(t,.075,.3),easeOutElastic:t=>yf(t)?t:e2(t,.075,.3),easeInOutElastic(t){return yf(t)?t:t<.5?.5*Z1(t*2,.1125,.45):.5+.5*e2(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-xd.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?xd.easeInBounce(t*2)*.5:xd.easeOutBounce(t*2-1)*.5+.5};function hy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function t2(t){return hy(t)?t:new Sd(t)}function Fm(t){return hy(t)?t:new Sd(t).saturate(.5).darken(.1).hexString()}const U6=["x","y","borderWidth","radius","tension"],H6=["color","borderColor","backgroundColor"];function $6(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:H6},numbers:{type:"number",properties:U6}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function V6(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const n2=new Map;function Y6(t,e){e=e||{};const n=t+JSON.stringify(e);let s=n2.get(n);return s||(s=new Intl.NumberFormat(t,e),n2.set(n,s)),s}function py(t,e,n){return Y6(e,n).format(t)}const K6={values(t){return dn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let i,a=t;if(n.length>1){const f=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(f<1e-4||f>1e15)&&(i="scientific"),a=G6(t,n)}const o=ik(Math.abs(a)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),py(t,s,u)}};function G6(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var my={formatters:K6};function X6(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:my.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const $o=Object.create(null),mg=Object.create(null);function gd(t,e){if(!e)return t;const n=e.split(".");for(let s=0,i=n.length;s<i;++s){const a=n[s];t=t[a]||(t[a]=Object.create(null))}return t}function zm(t,e,n){return typeof e=="string"?vi(gd(t,e),n):vi(gd(t,""),e)}class Q6{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Fm(i.backgroundColor),this.hoverBorderColor=(s,i)=>Fm(i.borderColor),this.hoverColor=(s,i)=>Fm(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return zm(this,e,n)}get(e){return gd(this,e)}describe(e,n){return zm(mg,e,n)}override(e,n){return zm($o,e,n)}route(e,n,s,i){const a=gd(this,e),o=gd(this,s),c="_"+n;Object.defineProperties(a,{[c]:{value:a[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[c],f=o[i];return Bt(u)?Object.assign({},f,u):Rt(u,f)},set(u){this[c]=u}}})}apply(e){e.forEach(n=>n(this))}}var Dn=new Q6({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[$6,V6,X6]);function J6(t){return!t||nn(t.size)||nn(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function rh(t,e,n,s,i){let a=e[i];return a||(a=e[i]=t.measureText(i).width,n.push(i)),a>s&&(s=a),s}function Z6(t,e,n,s){s=s||{};let i=s.data=s.data||{},a=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(i=s.data={},a=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let o=0;const c=n.length;let u,f,h,p,m;for(u=0;u<c;u++)if(p=n[u],p!=null&&!dn(p))o=rh(t,i,a,o,p);else if(dn(p))for(f=0,h=p.length;f<h;f++)m=p[f],m!=null&&!dn(m)&&(o=rh(t,i,a,o,m));t.restore();const g=a.length/2;if(g>n.length){for(u=0;u<g;u++)delete i[a[u]];a.splice(0,g)}return o}function vo(t,e,n){const s=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*s)/s+i}function r2(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function xg(t,e,n,s){dk(t,e,n,s,null)}function dk(t,e,n,s,i){let a,o,c,u,f,h,p,m;const g=e.pointStyle,y=e.rotation,b=e.radius;let v=(y||0)*dy;if(g&&typeof g=="object"&&(a=g.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(v),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),g){default:i?t.ellipse(n,s,i/2,b,0,0,wn):t.arc(n,s,b,0,wn),t.closePath();break;case"triangle":h=i?i/2:b,t.moveTo(n+Math.sin(v)*h,s-Math.cos(v)*b),v+=th,t.lineTo(n+Math.sin(v)*h,s-Math.cos(v)*b),v+=th,t.lineTo(n+Math.sin(v)*h,s-Math.cos(v)*b),t.closePath();break;case"rectRounded":f=b*.516,u=b-f,o=Math.cos(v+Ms)*u,p=Math.cos(v+Ms)*(i?i/2-f:u),c=Math.sin(v+Ms)*u,m=Math.sin(v+Ms)*(i?i/2-f:u),t.arc(n-p,s-c,f,v-Wt,v-Mn),t.arc(n+m,s-o,f,v-Mn,v),t.arc(n+p,s+c,f,v,v+Mn),t.arc(n-m,s+o,f,v+Mn,v+Wt),t.closePath();break;case"rect":if(!y){u=Math.SQRT1_2*b,h=i?i/2:u,t.rect(n-h,s-u,2*h,2*u);break}v+=Ms;case"rectRot":p=Math.cos(v)*(i?i/2:b),o=Math.cos(v)*b,c=Math.sin(v)*b,m=Math.sin(v)*(i?i/2:b),t.moveTo(n-p,s-c),t.lineTo(n+m,s-o),t.lineTo(n+p,s+c),t.lineTo(n-m,s+o),t.closePath();break;case"crossRot":v+=Ms;case"cross":p=Math.cos(v)*(i?i/2:b),o=Math.cos(v)*b,c=Math.sin(v)*b,m=Math.sin(v)*(i?i/2:b),t.moveTo(n-p,s-c),t.lineTo(n+p,s+c),t.moveTo(n+m,s-o),t.lineTo(n-m,s+o);break;case"star":p=Math.cos(v)*(i?i/2:b),o=Math.cos(v)*b,c=Math.sin(v)*b,m=Math.sin(v)*(i?i/2:b),t.moveTo(n-p,s-c),t.lineTo(n+p,s+c),t.moveTo(n+m,s-o),t.lineTo(n-m,s+o),v+=Ms,p=Math.cos(v)*(i?i/2:b),o=Math.cos(v)*b,c=Math.sin(v)*b,m=Math.sin(v)*(i?i/2:b),t.moveTo(n-p,s-c),t.lineTo(n+p,s+c),t.moveTo(n+m,s-o),t.lineTo(n-m,s+o);break;case"line":o=i?i/2:Math.cos(v)*b,c=Math.sin(v)*b,t.moveTo(n-o,s-c),t.lineTo(n+o,s+c);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(v)*(i?i/2:b),s+Math.sin(v)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Hi(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Vd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Yd(t){t.restore()}function eL(t,e,n,s,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const a=(e.x+n.x)/2;t.lineTo(a,e.y),t.lineTo(a,n.y)}else i==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function tL(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function nL(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),nn(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function rL(t,e,n,s,i){if(i.strikethrough||i.underline){const a=t.measureText(s),o=e-a.actualBoundingBoxLeft,c=e+a.actualBoundingBoxRight,u=n-a.actualBoundingBoxAscent,f=n+a.actualBoundingBoxDescent,h=i.strikethrough?(u+f)/2:f;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(c,h),t.stroke()}}function sL(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Vo(t,e,n,s,i,a={}){const o=dn(e)?e:[e],c=a.strokeWidth>0&&a.strokeColor!=="";let u,f;for(t.save(),t.font=i.string,nL(t,a),u=0;u<o.length;++u)f=o[u],a.backdrop&&sL(t,a.backdrop),c&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),nn(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(f,n,s,a.maxWidth)),t.fillText(f,n,s,a.maxWidth),rL(t,n,s,f,a),s+=Number(i.lineHeight);t.restore()}function Ql(t,e){const{x:n,y:s,w:i,h:a,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Wt,Wt,!0),t.lineTo(n,s+a-o.bottomLeft),t.arc(n+o.bottomLeft,s+a-o.bottomLeft,o.bottomLeft,Wt,Mn,!0),t.lineTo(n+i-o.bottomRight,s+a),t.arc(n+i-o.bottomRight,s+a-o.bottomRight,o.bottomRight,Mn,0,!0),t.lineTo(n+i,s+o.topRight),t.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-Mn,!0),t.lineTo(n+o.topLeft,s)}const iL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,aL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function oL(t,e){const n=(""+t).match(iL);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const lL=t=>+t||0;function xy(t,e){const n={},s=Bt(e),i=s?Object.keys(e):e,a=Bt(t)?s?o=>Rt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=lL(a(o));return n}function uk(t){return xy(t,{top:"y",right:"x",bottom:"y",left:"x"})}function za(t){return xy(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Xn(t){const e=uk(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function qn(t,e){t=t||{},e=e||Dn.font;let n=Rt(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Rt(t.style,e.style);s&&!(""+s).match(aL)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:Rt(t.family,e.family),lineHeight:oL(Rt(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Rt(t.weight,e.weight),string:""};return i.string=J6(i),i}function Rn(t,e,n,s){let i,a,o;for(i=0,a=t.length;i<a;++i)if(o=t[i],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e)),n!==void 0&&dn(o)&&(o=o[n%o.length]),o!==void 0))return o}function cL(t,e,n){const{min:s,max:i}=t,a=rk(e,(i-s)/2),o=(c,u)=>n&&c===0?0:c+u;return{min:o(s,-Math.abs(a)),max:o(i,a)}}function Ya(t,e){return Object.assign(Object.create(t),e)}function gy(t,e=[""],n,s,i=()=>t[0]){const a=n||t;typeof s>"u"&&(s=mk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:s,_getTarget:i,override:c=>gy([c,...t],e,a,s)};return new Proxy(o,{deleteProperty(c,u){return delete c[u],delete c._keys,delete t[0][u],!0},get(c,u){return hk(c,u,()=>gL(u,e,t,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(c,u){return i2(c).includes(u)},ownKeys(c){return i2(c)},set(c,u,f){const h=c._storage||(c._storage=i());return c[u]=h[u]=f,delete c._keys,!0}})}function Jl(t,e,n,s){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:fk(t,s),setContext:a=>Jl(t,a,n,s),override:a=>Jl(t.override(a),e,n,s)};return new Proxy(i,{deleteProperty(a,o){return delete a[o],delete t[o],!0},get(a,o,c){return hk(a,o,()=>uL(a,o,c))},getOwnPropertyDescriptor(a,o){return a._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(a,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(a,o,c){return t[o]=c,delete a[o],!0}})}function fk(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:s,isScriptable:cs(n)?n:()=>n,isIndexable:cs(s)?s:()=>s}}const dL=(t,e)=>t?t+cy(e):e,yy=(t,e)=>Bt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function hk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function uL(t,e,n){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=t;let c=s[e];return cs(c)&&o.isScriptable(e)&&(c=fL(e,c,t,n)),dn(c)&&c.length&&(c=hL(e,c,t,o.isIndexable)),yy(e,c)&&(c=Jl(c,i,a&&a[e],o)),c}function fL(t,e,n,s){const{_proxy:i,_context:a,_subProxy:o,_stack:c}=n;if(c.has(t))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+t);c.add(t);let u=e(a,o||s);return c.delete(t),yy(t,u)&&(u=vy(i._scopes,i,t,u)),u}function hL(t,e,n,s){const{_proxy:i,_context:a,_subProxy:o,_descriptors:c}=n;if(typeof a.index<"u"&&s(t))return e[a.index%e.length];if(Bt(e[0])){const u=e,f=i._scopes.filter(h=>h!==u);e=[];for(const h of u){const p=vy(f,i,t,h);e.push(Jl(p,a,o&&o[t],c))}}return e}function pk(t,e,n){return cs(t)?t(e,n):t}const pL=(t,e)=>t===!0?e:typeof t=="string"?Ua(e,t):void 0;function mL(t,e,n,s,i){for(const a of e){const o=pL(n,a);if(o){t.add(o);const c=pk(o._fallback,n,i);if(typeof c<"u"&&c!==n&&c!==s)return c}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function vy(t,e,n,s){const i=e._rootScopes,a=pk(e._fallback,n,s),o=[...t,...i],c=new Set;c.add(s);let u=s2(c,o,n,a||n,s);return u===null||typeof a<"u"&&a!==n&&(u=s2(c,o,a,u,s),u===null)?!1:gy(Array.from(c),[""],i,a,()=>xL(e,n,s))}function s2(t,e,n,s,i){for(;n;)n=mL(t,e,n,s,i);return n}function xL(t,e,n){const s=t._getTarget();e in s||(s[e]={});const i=s[e];return dn(i)&&Bt(n)?n:i||{}}function gL(t,e,n,s){let i;for(const a of e)if(i=mk(dL(a,t),n),typeof i<"u")return yy(t,i)?vy(n,s,t,i):i}function mk(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function i2(t){let e=t._keys;return e||(e=t._keys=yL(t._scopes)),e}function yL(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(s);return Array.from(e)}function vL(t,e,n,s){const{iScale:i}=t,{key:a="r"}=this._parsing,o=new Array(s);let c,u,f,h;for(c=0,u=s;c<u;++c)f=c+n,h=e[f],o[c]={r:i.parse(Ua(h,a),f)};return o}const bL=Number.EPSILON||1e-14,Zl=(t,e)=>e<t.length&&!t[e].skip&&t[e],xk=t=>t==="x"?"y":"x";function wL(t,e,n,s){const i=t.skip?e:t,a=e,o=n.skip?e:n,c=Xl(a,i),u=Xl(o,a);let f=c/(c+u),h=u/(c+u);f=isNaN(f)?0:f,h=isNaN(h)?0:h;const p=s*f,m=s*h;return{previous:{x:a.x-p*(o.x-i.x),y:a.y-p*(o.y-i.y)},next:{x:a.x+m*(o.x-i.x),y:a.y+m*(o.y-i.y)}}}function jL(t,e,n){const s=t.length;let i,a,o,c,u,f=Zl(t,0);for(let h=0;h<s-1;++h)if(u=f,f=Zl(t,h+1),!(!u||!f)){if(md(e[h],0,bL)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],a=n[h+1]/e[h],c=Math.pow(i,2)+Math.pow(a,2),!(c<=9)&&(o=3/Math.sqrt(c),n[h]=i*o*e[h],n[h+1]=a*o*e[h])}}function NL(t,e,n="x"){const s=xk(n),i=t.length;let a,o,c,u=Zl(t,0);for(let f=0;f<i;++f){if(o=c,c=u,u=Zl(t,f+1),!c)continue;const h=c[n],p=c[s];o&&(a=(h-o[n])/3,c[`cp1${n}`]=h-a,c[`cp1${s}`]=p-a*e[f]),u&&(a=(u[n]-h)/3,c[`cp2${n}`]=h+a,c[`cp2${s}`]=p+a*e[f])}}function _L(t,e="x"){const n=xk(e),s=t.length,i=Array(s).fill(0),a=Array(s);let o,c,u,f=Zl(t,0);for(o=0;o<s;++o)if(c=u,u=f,f=Zl(t,o+1),!!u){if(f){const h=f[e]-u[e];i[o]=h!==0?(f[n]-u[n])/h:0}a[o]=c?f?yi(i[o-1])!==yi(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}jL(t,i,a),NL(t,a,e)}function vf(t,e,n){return Math.max(Math.min(t,n),e)}function kL(t,e){let n,s,i,a,o,c=Hi(t[0],e);for(n=0,s=t.length;n<s;++n)o=a,a=c,c=n<s-1&&Hi(t[n+1],e),a&&(i=t[n],o&&(i.cp1x=vf(i.cp1x,e.left,e.right),i.cp1y=vf(i.cp1y,e.top,e.bottom)),c&&(i.cp2x=vf(i.cp2x,e.left,e.right),i.cp2y=vf(i.cp2y,e.top,e.bottom)))}function SL(t,e,n,s,i){let a,o,c,u;if(e.spanGaps&&(t=t.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")_L(t,i);else{let f=s?t[t.length-1]:t[0];for(a=0,o=t.length;a<o;++a)c=t[a],u=wL(f,c,t[Math.min(a+1,o-(s?0:1))%o],e.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,f=c}e.capBezierPoints&&kL(t,n)}function by(){return typeof window<"u"&&typeof document<"u"}function wy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function sh(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Eh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function CL(t,e){return Eh(t).getPropertyValue(e)}const AL=["top","right","bottom","left"];function Bo(t,e,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const a=AL[i];s[a]=parseFloat(t[e+"-"+a+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const EL=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function LL(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:i,offsetY:a}=s;let o=!1,c,u;if(EL(i,a,t.target))c=i,u=a;else{const f=e.getBoundingClientRect();c=s.clientX-f.left,u=s.clientY-f.top,o=!0}return{x:c,y:u,box:o}}function jo(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,i=Eh(n),a=i.boxSizing==="border-box",o=Bo(i,"padding"),c=Bo(i,"border","width"),{x:u,y:f,box:h}=LL(t,n),p=o.left+(h&&c.left),m=o.top+(h&&c.top);let{width:g,height:y}=e;return a&&(g-=o.width+c.width,y-=o.height+c.height),{x:Math.round((u-p)/g*n.width/s),y:Math.round((f-m)/y*n.height/s)}}function OL(t,e,n){let s,i;if(e===void 0||n===void 0){const a=t&&wy(t);if(!a)e=t.clientWidth,n=t.clientHeight;else{const o=a.getBoundingClientRect(),c=Eh(a),u=Bo(c,"border","width"),f=Bo(c,"padding");e=o.width-f.width-u.width,n=o.height-f.height-u.height,s=sh(c.maxWidth,a,"clientWidth"),i=sh(c.maxHeight,a,"clientHeight")}}return{width:e,height:n,maxWidth:s||eh,maxHeight:i||eh}}const Ra=t=>Math.round(t*10)/10;function ML(t,e,n,s){const i=Eh(t),a=Bo(i,"margin"),o=sh(i.maxWidth,t,"clientWidth")||eh,c=sh(i.maxHeight,t,"clientHeight")||eh,u=OL(t,e,n);let{width:f,height:h}=u;if(i.boxSizing==="content-box"){const m=Bo(i,"border","width"),g=Bo(i,"padding");f-=g.width+m.width,h-=g.height+m.height}return f=Math.max(0,f-a.width),h=Math.max(0,s?f/s:h-a.height),f=Ra(Math.min(f,o,u.maxWidth)),h=Ra(Math.min(h,c,u.maxHeight)),f&&!h&&(h=Ra(f/2)),(e!==void 0||n!==void 0)&&s&&u.height&&h>u.height&&(h=u.height,f=Ra(Math.floor(h*s))),{width:f,height:h}}function a2(t,e,n){const s=e||1,i=Ra(t.height*s),a=Ra(t.width*s);t.height=Ra(t.height),t.width=Ra(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==i||o.width!==a?(t.currentDevicePixelRatio=s,o.height=i,o.width=a,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const PL=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};by()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function o2(t,e){const n=CL(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function No(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function RL(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function TL(t,e,n,s){const i={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},o=No(t,i,n),c=No(i,a,n),u=No(a,e,n),f=No(o,c,n),h=No(c,u,n);return No(f,h,n)}const DL=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},IL=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ml(t,e,n){return t?DL(e,n):IL()}function gk(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function yk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function vk(t){return t==="angle"?{between:Cd,compare:D6,normalize:Rr}:{between:Ui,compare:(e,n)=>e-n,normalize:e=>e}}function l2({start:t,end:e,count:n,loop:s,style:i}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:i}}function FL(t,e,n){const{property:s,start:i,end:a}=n,{between:o,normalize:c}=vk(s),u=e.length;let{start:f,end:h,loop:p}=t,m,g;if(p){for(f+=u,h+=u,m=0,g=u;m<g&&o(c(e[f%u][s]),i,a);++m)f--,h--;f%=u,h%=u}return h<f&&(h+=u),{start:f,end:h,loop:p,style:t.style}}function bk(t,e,n){if(!n)return[t];const{property:s,start:i,end:a}=n,o=e.length,{compare:c,between:u,normalize:f}=vk(s),{start:h,end:p,loop:m,style:g}=FL(t,e,n),y=[];let b=!1,v=null,w,N,k;const j=()=>u(i,k,w)&&c(i,k)!==0,S=()=>c(a,w)===0||u(a,k,w),C=()=>b||j(),O=()=>!b||S();for(let M=h,B=h;M<=p;++M)N=e[M%o],!N.skip&&(w=f(N[s]),w!==k&&(b=u(w,i,a),v===null&&C()&&(v=c(w,i)===0?M:B),v!==null&&O()&&(y.push(l2({start:v,end:M,loop:m,count:o,style:g})),v=null),B=M,k=w));return v!==null&&y.push(l2({start:v,end:p,loop:m,count:o,style:g})),y}function wk(t,e){const n=[],s=t.segments;for(let i=0;i<s.length;i++){const a=bk(s[i],t.points,e);a.length&&n.push(...a)}return n}function zL(t,e,n,s){let i=0,a=e-1;if(n&&!s)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(a+=i);a>i&&t[a%e].skip;)a--;return a%=e,{start:i,end:a}}function BL(t,e,n,s){const i=t.length,a=[];let o=e,c=t[e],u;for(u=e+1;u<=n;++u){const f=t[u%i];f.skip||f.stop?c.skip||(s=!1,a.push({start:e%i,end:(u-1)%i,loop:s}),e=o=f.stop?u:null):(o=u,c.skip&&(e=u)),c=f}return o!==null&&a.push({start:e%i,end:o%i,loop:s}),a}function qL(t,e){const n=t.points,s=t.options.spanGaps,i=n.length;if(!i)return[];const a=!!t._loop,{start:o,end:c}=zL(n,i,a,s);if(s===!0)return c2(t,[{start:o,end:c,loop:a}],n,e);const u=c<o?c+i:c,f=!!t._fullLoop&&o===0&&c===i-1;return c2(t,BL(n,o,u,f),n,e)}function c2(t,e,n,s){return!s||!s.setContext||!n?e:WL(t,e,n,s)}function WL(t,e,n,s){const i=t._chart.getContext(),a=d2(t.options),{_datasetIndex:o,options:{spanGaps:c}}=t,u=n.length,f=[];let h=a,p=e[0].start,m=p;function g(y,b,v,w){const N=c?-1:1;if(y!==b){for(y+=u;n[y%u].skip;)y-=N;for(;n[b%u].skip;)b+=N;y%u!==b%u&&(f.push({start:y%u,end:b%u,loop:v,style:w}),h=w,p=b%u)}}for(const y of e){p=c?p:y.start;let b=n[p%u],v;for(m=p+1;m<=y.end;m++){const w=n[m%u];v=d2(s.setContext(Ya(i,{type:"segment",p0:b,p1:w,p0DataIndex:(m-1)%u,p1DataIndex:m%u,datasetIndex:o}))),UL(v,h)&&g(p,m-1,y.loop,h),b=w,h=v}p<m-1&&g(p,m-1,y.loop,h)}return f}function d2(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function UL(t,e){if(!e)return!1;const n=[],s=function(i,a){return hy(a)?(n.includes(a)||n.push(a),n.indexOf(a)):a};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function bf(t,e,n){return t.options.clip?t[n]:e[n]}function HL(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:bf(n,e,"left"),right:bf(n,e,"right"),top:bf(s,e,"top"),bottom:bf(s,e,"bottom")}:e}function jk(t,e){const n=e._clip;if(n.disabled)return!1;const s=HL(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class $L{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,i){const a=n.listeners[i],o=n.duration;a.forEach(c=>c({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=lk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const a=s.items;let o=a.length-1,c=!1,u;for(;o>=0;--o)u=a[o],u._active?(u._total>s.duration&&(s.duration=u._total),u.tick(e),c=!0):(a[o]=a[a.length-1],a.pop());c&&(i.draw(),this._notify(i,s,e,"progress")),a.length||(s.running=!1,this._notify(i,s,e,"complete"),s.initial=!1),n+=a.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ti=new $L;const u2="transparent",VL={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=t2(t||u2),i=s.valid&&t2(e||u2);return i&&i.valid?i.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class YL{constructor(e,n,s,i){const a=n[s];i=Rn([e.to,i,a,e.from]);const o=Rn([e.from,a,i]);this._active=!0,this._fn=e.fn||VL[e.type||typeof o],this._easing=xd[e.easing]||xd.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],a=s-this._start,o=this._duration-a;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Rn([e.to,n,i,e.from]),this._from=Rn([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,i=this._prop,a=this._from,o=this._loop,c=this._to;let u;if(this._active=a!==c&&(o||n<s),!this._active){this._target[i]=c,this._notify(!0);return}if(n<0){this._target[i]=a;return}u=n/s%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[i]=this._fn(a,c,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class jy{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Bt(e))return;const n=Object.keys(Dn.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const a=e[i];if(!Bt(a))return;const o={};for(const c of n)o[c]=a[c];(dn(a.properties)&&a.properties||[i]).forEach(c=>{(c===i||!s.has(c))&&s.set(c,o)})})}_animateOptions(e,n){const s=n.options,i=GL(e,s);if(!i)return[];const a=this._createAnimations(i,s);return s.$shared&&KL(e.options.$animations,s).then(()=>{e.options=s},()=>{}),a}_createAnimations(e,n){const s=this._properties,i=[],a=e.$animations||(e.$animations={}),o=Object.keys(n),c=Date.now();let u;for(u=o.length-1;u>=0;--u){const f=o[u];if(f.charAt(0)==="$")continue;if(f==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[f];let p=a[f];const m=s.get(f);if(p)if(m&&p.active()){p.update(m,h,c);continue}else p.cancel();if(!m||!m.duration){e[f]=h;continue}a[f]=p=new YL(m,e,f,h),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return Ti.add(this._chart,s),!0}}function KL(t,e){const n=[],s=Object.keys(e);for(let i=0;i<s.length;i++){const a=t[s[i]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}function GL(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function f2(t,e){const n=t&&t.options||{},s=n.reverse,i=n.min===void 0?e:0,a=n.max===void 0?e:0;return{start:s?a:i,end:s?i:a}}function XL(t,e,n){if(n===!1)return!1;const s=f2(t,n),i=f2(e,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function QL(t){let e,n,s,i;return Bt(t)?(e=t.top,n=t.right,s=t.bottom,i=t.left):e=n=s=i=t,{top:e,right:n,bottom:s,left:i,disabled:t===!1}}function Nk(t,e){const n=[],s=t._getSortedDatasetMetas(e);let i,a;for(i=0,a=s.length;i<a;++i)n.push(s[i].index);return n}function h2(t,e,n,s={}){const i=t.keys,a=s.mode==="single";let o,c,u,f;if(e===null)return;let h=!1;for(o=0,c=i.length;o<c;++o){if(u=+i[o],u===n){if(h=!0,s.all)continue;break}f=t.values[u],er(f)&&(a||e===0||yi(e)===yi(f))&&(e+=f)}return!h&&!s.all?0:e}function JL(t,e){const{iScale:n,vScale:s}=e,i=n.axis==="x"?"x":"y",a=s.axis==="x"?"x":"y",o=Object.keys(t),c=new Array(o.length);let u,f,h;for(u=0,f=o.length;u<f;++u)h=o[u],c[u]={[i]:h,[a]:t[h]};return c}function Bm(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function ZL(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function eO(t){const{min:e,max:n,minDefined:s,maxDefined:i}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function tO(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function p2(t,e,n,s){for(const i of e.getMatchingVisibleMetas(s).reverse()){const a=t[i.index];if(n&&a>0||!n&&a<0)return i.index}return null}function m2(t,e){const{chart:n,_cachedMeta:s}=t,i=n._stacks||(n._stacks={}),{iScale:a,vScale:o,index:c}=s,u=a.axis,f=o.axis,h=ZL(a,o,s),p=e.length;let m;for(let g=0;g<p;++g){const y=e[g],{[u]:b,[f]:v}=y,w=y._stacks||(y._stacks={});m=w[f]=tO(i,h,b),m[c]=v,m._top=p2(m,o,!0,s.type),m._bottom=p2(m,o,!1,s.type);const N=m._visualValues||(m._visualValues={});N[c]=v}}function qm(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function nO(t,e){return Ya(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function rO(t,e,n){return Ya(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Yc(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const i of e){const a=i._stacks;if(!a||a[s]===void 0||a[s][n]===void 0)return;delete a[s][n],a[s]._visualValues!==void 0&&a[s]._visualValues[n]!==void 0&&delete a[s]._visualValues[n]}}}const Wm=t=>t==="reset"||t==="none",x2=(t,e)=>e?t:Object.assign({},t),sO=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Nk(n,!0),values:null};class qo{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Bm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Yc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(p,m,g,y)=>p==="x"?m:p==="r"?y:g,a=n.xAxisID=Rt(s.xAxisID,qm(e,"x")),o=n.yAxisID=Rt(s.yAxisID,qm(e,"y")),c=n.rAxisID=Rt(s.rAxisID,qm(e,"r")),u=n.indexAxis,f=n.iAxisID=i(u,a,o,c),h=n.vAxisID=i(u,o,a,c);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(c),n.iScale=this.getScaleForId(f),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&J1(this._data,this),e._stacked&&Yc(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Bt(n)){const i=this._cachedMeta;this._data=JL(n,i)}else if(s!==n){if(s){J1(s,this);const i=this._cachedMeta;Yc(i),i._parsed=[]}n&&Object.isExtensible(n)&&B6(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const a=n._stacked;n._stacked=Bm(n.vScale,n),n.stack!==s.stack&&(i=!0,Yc(n),n.stack=s.stack),this._resyncElements(e),(i||a!==n._stacked)&&(m2(this,n._parsed),n._stacked=Bm(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:i}=this,{iScale:a,_stacked:o}=s,c=a.axis;let u=e===0&&n===i.length?!0:s._sorted,f=e>0&&s._parsed[e-1],h,p,m;if(this._parsing===!1)s._parsed=i,s._sorted=!0,m=i;else{dn(i[e])?m=this.parseArrayData(s,i,e,n):Bt(i[e])?m=this.parseObjectData(s,i,e,n):m=this.parsePrimitiveData(s,i,e,n);const g=()=>p[c]===null||f&&p[c]<f[c];for(h=0;h<n;++h)s._parsed[h+e]=p=m[h],u&&(g()&&(u=!1),f=p);s._sorted=u}o&&m2(this,m)}parsePrimitiveData(e,n,s,i){const{iScale:a,vScale:o}=e,c=a.axis,u=o.axis,f=a.getLabels(),h=a===o,p=new Array(i);let m,g,y;for(m=0,g=i;m<g;++m)y=m+s,p[m]={[c]:h||a.parse(f[y],y),[u]:o.parse(n[y],y)};return p}parseArrayData(e,n,s,i){const{xScale:a,yScale:o}=e,c=new Array(i);let u,f,h,p;for(u=0,f=i;u<f;++u)h=u+s,p=n[h],c[u]={x:a.parse(p[0],h),y:o.parse(p[1],h)};return c}parseObjectData(e,n,s,i){const{xScale:a,yScale:o}=e,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,f=new Array(i);let h,p,m,g;for(h=0,p=i;h<p;++h)m=h+s,g=n[m],f[h]={x:a.parse(Ua(g,c),m),y:o.parse(Ua(g,u),m)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const i=this.chart,a=this._cachedMeta,o=n[e.axis],c={keys:Nk(i,!0),values:n._stacks[e.axis]._visualValues};return h2(c,o,a.index,{mode:s})}updateRangeFromParsed(e,n,s,i){const a=s[n.axis];let o=a===null?NaN:a;const c=i&&s._stacks[n.axis];i&&c&&(i.values=c,o=h2(i,a,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,i=s._parsed,a=s._sorted&&e===s.iScale,o=i.length,c=this._getOtherScale(e),u=sO(n,s,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=eO(c);let m,g;function y(){g=i[m];const b=g[c.axis];return!er(g[e.axis])||h>b||p<b}for(m=0;m<o&&!(!y()&&(this.updateRangeFromParsed(f,e,g,u),a));++m);if(a){for(m=o-1;m>=0;--m)if(!y()){this.updateRangeFromParsed(f,e,g,u);break}}return f}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let i,a,o;for(i=0,a=n.length;i<a;++i)o=n[i][e.axis],er(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,i=n.vScale,a=this.getParsed(e);return{label:s?""+s.getLabelForValue(a[s.axis]):"",value:i?""+i.getLabelForValue(a[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=QL(Rt(this.options.clip,XL(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],a=n.chartArea,o=[],c=this._drawStart||0,u=this._drawCount||i.length-c,f=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(e,a,c,u),h=c;h<c+u;++h){const p=i[h];p.hidden||(p.active&&f?o.push(p):p.draw(e,a))}for(h=0;h<o.length;++h)o[h].draw(e,a)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const i=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];a=o.$context||(o.$context=rO(this.getContext(),e,o)),a.parsed=this.getParsed(e),a.raw=i.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=nO(this.chart.getContext(),this.index)),a.dataset=i,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=s,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const i=n==="active",a=this._cachedDataOpts,o=e+"-"+n,c=a[o],u=this.enableOptionSharing&&ds(s);if(c)return x2(c,u);const f=this.chart.config,h=f.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],m=f.getOptionScopes(this.getDataset(),h),g=Object.keys(Dn.elements[e]),y=()=>this.getContext(s,i,n),b=f.resolveNamedOptions(m,g,y,p);return b.$shared&&(b.$shared=u,a[o]=Object.freeze(x2(b,u))),b}_resolveAnimations(e,n,s){const i=this.chart,a=this._cachedDataOpts,o=`animation-${n}`,c=a[o];if(c)return c;let u;if(i.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,n),m=h.getOptionScopes(this.getDataset(),p);u=h.createResolver(m,this.getContext(e,s,n))}const f=new jy(i,u&&u.animations);return u&&u._cacheable&&(a[o]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Wm(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),i=this._sharedOptions,a=this.getSharedOptions(s),o=this.includeOptions(n,a)||a!==i;return this.updateSharedOptions(a,n,s),{sharedOptions:a,includeOptions:o}}updateElement(e,n,s,i){Wm(i)?Object.assign(e,s):this._resolveAnimations(n,i).update(e,s)}updateSharedOptions(e,n,s){e&&!Wm(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,i){e.active=i;const a=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(e,{options:!i&&this.getSharedOptions(a)||a})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[c,u,f]of this._syncList)this[c](u,f);this._syncList=[];const i=s.length,a=n.length,o=Math.min(a,i);o&&this.parse(0,o),a>i?this._insertElements(i,a-i,e):a<i&&this._removeElements(a,i-a)}_insertElements(e,n,s=!0){const i=this._cachedMeta,a=i.data,o=e+n;let c;const u=f=>{for(f.length+=n,c=f.length-1;c>=o;c--)f[c]=f[c-n]};for(u(a),c=e;c<o;++c)a[c]=new this.dataElementType;this._parsing&&u(i._parsed),this.parse(e,n),s&&this.updateElements(a,e,n,"reset")}updateElements(e,n,s,i){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(e,n);s._stacked&&Yc(s,i)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,i]=e;this[n](s,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ut(qo,"defaults",{}),ut(qo,"datasetElementType",null),ut(qo,"dataElementType",null);function iO(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let i=0,a=n.length;i<a;i++)s=s.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=ok(s.sort((i,a)=>i-a))}return t._cache.$bar}function aO(t){const e=t.iScale,n=iO(e,t.type);let s=e._length,i,a,o,c;const u=()=>{o===32767||o===-32768||(ds(c)&&(s=Math.min(s,Math.abs(o-c)||s)),c=o)};for(i=0,a=n.length;i<a;++i)o=e.getPixelForValue(n[i]),u();for(c=void 0,i=0,a=e.ticks.length;i<a;++i)o=e.getPixelForTick(i),u();return s}function oO(t,e,n,s){const i=n.barThickness;let a,o;return nn(i)?(a=e.min*n.categoryPercentage,o=n.barPercentage):(a=i*s,o=1),{chunk:a/s,ratio:o,start:e.pixels[t]-a/2}}function lO(t,e,n,s){const i=e.pixels,a=i[t];let o=t>0?i[t-1]:null,c=t<i.length-1?i[t+1]:null;const u=n.categoryPercentage;o===null&&(o=a-(c===null?e.end-e.start:c-a)),c===null&&(c=a+a-o);const f=a-(a-Math.min(o,c))/2*u;return{chunk:Math.abs(c-o)/2*u/s,ratio:n.barPercentage,start:f}}function cO(t,e,n,s){const i=n.parse(t[0],s),a=n.parse(t[1],s),o=Math.min(i,a),c=Math.max(i,a);let u=o,f=c;Math.abs(o)>Math.abs(c)&&(u=c,f=o),e[n.axis]=f,e._custom={barStart:u,barEnd:f,start:i,end:a,min:o,max:c}}function _k(t,e,n,s){return dn(t)?cO(t,e,n,s):e[n.axis]=n.parse(t,s),e}function g2(t,e,n,s){const i=t.iScale,a=t.vScale,o=i.getLabels(),c=i===a,u=[];let f,h,p,m;for(f=n,h=n+s;f<h;++f)m=e[f],p={},p[i.axis]=c||i.parse(o[f],f),u.push(_k(m,p,a,f));return u}function Um(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function dO(t,e,n){return t!==0?yi(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function uO(t){let e,n,s,i,a;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(i="end",a="start"):(i="start",a="end"),{start:n,end:s,reverse:e,top:i,bottom:a}}function fO(t,e,n,s){let i=e.borderSkipped;const a={};if(!i){t.borderSkipped=a;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:u,top:f,bottom:h}=uO(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?i=f:(n._bottom||0)===s?i=h:(a[y2(h,o,c,u)]=!0,i=f)),a[y2(i,o,c,u)]=!0,t.borderSkipped=a}function y2(t,e,n,s){return s?(t=hO(t,e,n),t=v2(t,n,e)):t=v2(t,e,n),t}function hO(t,e,n){return t===e?n:t===n?e:t}function v2(t,e,n){return t==="start"?e:t==="end"?n:t}function pO(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Bf extends qo{parsePrimitiveData(e,n,s,i){return g2(e,n,s,i)}parseArrayData(e,n,s,i){return g2(e,n,s,i)}parseObjectData(e,n,s,i){const{iScale:a,vScale:o}=e,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,f=a.axis==="x"?c:u,h=o.axis==="x"?c:u,p=[];let m,g,y,b;for(m=s,g=s+i;m<g;++m)b=n[m],y={},y[a.axis]=a.parse(Ua(b,f),m),p.push(_k(Ua(b,h),y,o,m));return p}updateRangeFromParsed(e,n,s,i){super.updateRangeFromParsed(e,n,s,i);const a=s._custom;a&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:i}=n,a=this.getParsed(e),o=a._custom,c=Um(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(a[i.axis]);return{label:""+s.getLabelForValue(a[s.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,i){const a=i==="reset",{index:o,_cachedMeta:{vScale:c}}=this,u=c.getBasePixel(),f=c.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:m}=this._getSharedOptions(n,i);for(let g=n;g<n+s;g++){const y=this.getParsed(g),b=a||nn(y[c.axis])?{base:u,head:u}:this._calculateBarValuePixels(g),v=this._calculateBarIndexPixels(g,h),w=(y._stacks||{})[c.axis],N={horizontal:f,base:b.base,enableBorderRadius:!w||Um(y._custom)||o===w._top||o===w._bottom,x:f?b.head:v.center,y:f?v.center:b.head,height:f?v.size:Math.abs(b.size),width:f?Math.abs(b.size):v.size};m&&(N.options=p||this.resolveDataElementOptions(g,e[g].active?"active":i));const k=N.options||e[g].options;fO(N,k,w,o),pO(N,k,h.ratio),this.updateElement(e[g],g,N,i)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),a=s.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(n),u=c&&c[s.axis],f=h=>{const p=h._parsed.find(g=>g[s.axis]===u),m=p&&p[h.vScale.axis];if(nn(m)||isNaN(m))return!0};for(const h of i)if(!(n!==void 0&&f(h))&&((a===!1||o.indexOf(h.stack)===-1||a===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[Rt(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const i=this._getStacks(e,s),a=n!==void 0?i.indexOf(n):-1;return a===-1?i.length-1:a}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,i=[];let a,o;for(a=0,o=n.data.length;a<o;++a)i.push(s.getPixelForValue(this.getParsed(a)[s.axis],a));const c=e.barThickness;return{min:c||aO(n),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:i},options:{base:a,minBarLength:o}}=this,c=a||0,u=this.getParsed(e),f=u._custom,h=Um(f);let p=u[n.axis],m=0,g=s?this.applyStack(n,u,s):p,y,b;g!==p&&(m=g-p,g=p),h&&(p=f.barStart,g=f.barEnd-f.barStart,p!==0&&yi(p)!==yi(f.barEnd)&&(m=0),m+=p);const v=!nn(a)&&!h?a:m;let w=n.getPixelForValue(v);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(m+g):y=w,b=y-w,Math.abs(b)<o){b=dO(b,n,c)*o,p===c&&(w-=b/2);const N=n.getPixelForDecimal(0),k=n.getPixelForDecimal(1),j=Math.min(N,k),S=Math.max(N,k);w=Math.max(Math.min(w,S),j),y=w+b,s&&!h&&(u._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(w))}if(w===n.getPixelForValue(c)){const N=yi(b)*n.getLineWidthForValue(c)/2;w+=N,b-=N}return{size:b,base:w,head:y,center:y+b/2}}_calculateBarIndexPixels(e,n){const s=n.scale,i=this.options,a=i.skipNull,o=Rt(i.maxBarThickness,1/0);let c,u;const f=this._getAxisCount();if(n.grouped){const h=a?this._getStackCount(e):n.stackCount,p=i.barThickness==="flex"?lO(e,n,i,h*f):oO(e,n,i,h*f),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(Rt(m,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+g;c=p.start+p.chunk*y+p.chunk/2,u=Math.min(o,p.chunk*p.ratio)}else c=s.getPixelForValue(this.getParsed(e)[s.axis],e),u=Math.min(o,n.min*n.ratio);return{base:c-u/2,head:c+u/2,center:c,size:u}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,i=s.length;let a=0;for(;a<i;++a)this.getParsed(a)[n.axis]!==null&&!s[a].hidden&&s[a].draw(this._ctx)}}ut(Bf,"id","bar"),ut(Bf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ut(Bf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function mO(t,e,n){let s=1,i=1,a=0,o=0;if(e<wn){const c=t,u=c+e,f=Math.cos(c),h=Math.sin(c),p=Math.cos(u),m=Math.sin(u),g=(k,j,S)=>Cd(k,c,u,!0)?1:Math.max(j,j*n,S,S*n),y=(k,j,S)=>Cd(k,c,u,!0)?-1:Math.min(j,j*n,S,S*n),b=g(0,f,p),v=g(Mn,h,m),w=y(Wt,f,p),N=y(Wt+Mn,h,m);s=(b-w)/2,i=(v-N)/2,a=-(b+w)/2,o=-(v+N)/2}return{ratioX:s,ratioY:i,offsetX:a,offsetY:o}}class Co extends qo{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let a=u=>+s[u];if(Bt(s[e])){const{key:u="value"}=this._parsing;a=f=>+Ua(s[f],u)}let o,c;for(o=e,c=e+n;o<c;++o)i._parsed[o]=a(o)}}_getRotation(){return or(this.options.rotation-90)}_getCircumference(){return or(this.options.circumference)}_getRotationExtents(){let e=wn,n=-wn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,a=i._getRotation(),o=i._getCircumference();e=Math.min(e,a),n=Math.max(n,a+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,a=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,c=Math.max((Math.min(s.width,s.height)-o)/2,0),u=Math.min(k6(this.options.cutout,c),1),f=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:m,ratioY:g,offsetX:y,offsetY:b}=mO(p,h,u),v=(s.width-o)/m,w=(s.height-o)/g,N=Math.max(Math.min(v,w)/2,0),k=rk(this.options.radius,N),j=Math.max(k*u,0),S=(k-j)/this._getVisibleDatasetWeightTotal();this.offsetX=y*k,this.offsetY=b*k,i.total=this.calculateTotal(),this.outerRadius=k-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*f,0),this.updateElements(a,0,a.length,e)}_circumference(e,n){const s=this.options,i=this._cachedMeta,a=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*a/wn)}updateElements(e,n,s,i){const a=i==="reset",o=this.chart,c=o.chartArea,f=o.options.animation,h=(c.left+c.right)/2,p=(c.top+c.bottom)/2,m=a&&f.animateScale,g=m?0:this.innerRadius,y=m?0:this.outerRadius,{sharedOptions:b,includeOptions:v}=this._getSharedOptions(n,i);let w=this._getRotation(),N;for(N=0;N<n;++N)w+=this._circumference(N,a);for(N=n;N<n+s;++N){const k=this._circumference(N,a),j=e[N],S={x:h+this.offsetX,y:p+this.offsetY,startAngle:w,endAngle:w+k,circumference:k,outerRadius:y,innerRadius:g};v&&(S.options=b||this.resolveDataElementOptions(N,j.active?"active":i)),w+=k,this.updateElement(j,N,S,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,i;for(i=0;i<n.length;i++){const a=e._parsed[i];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(a))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?wn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],a=py(n._parsed[e],s.options.locale);return{label:i[e]||"",value:a}}getMaxBorderWidth(e){let n=0;const s=this.chart;let i,a,o,c,u;if(!e){for(i=0,a=s.data.datasets.length;i<a;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),e=o.data,c=o.controller;break}}if(!e)return 0;for(i=0,a=e.length;i<a;++i)u=c.resolveDataElementOptions(i),u.borderAlign!=="inner"&&(n=Math.max(n,u.borderWidth||0,u.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,i=e.length;s<i;++s){const a=this.resolveDataElementOptions(s);n=Math.max(n,a.offset||0,a.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Rt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ut(Co,"id","doughnut"),ut(Co,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ut(Co,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ut(Co,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:i,color:a,useBorderRadius:o,borderRadius:c}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((u,f)=>{const p=e.getDatasetMeta(0).controller.getStyle(f);return{text:u,fillStyle:p.backgroundColor,fontColor:a,hidden:!e.getDataVisibility(f),lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:p.borderWidth,strokeStyle:p.borderColor,textAlign:i,pointStyle:s,borderRadius:o&&(c||p.borderRadius),index:f}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class gg extends Co{}ut(gg,"id","pie"),ut(gg,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class qf extends qo{getLabelAndValue(e){const n=this._cachedMeta.vScale,s=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(s[n.axis])}}parseObjectData(e,n,s,i){return vL.bind(this)(e,n,s,i)}update(e){const n=this._cachedMeta,s=n.dataset,i=n.data||[],a=n.iScale.getLabels();if(s.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const c={_loop:!0,_fullLoop:a.length===i.length,options:o};this.updateElement(s,void 0,c,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,s,i){const a=this._cachedMeta.rScale,o=i==="reset";for(let c=n;c<n+s;c++){const u=e[c],f=this.resolveDataElementOptions(c,u.active?"active":i),h=a.getPointPositionForValue(c,this.getParsed(c).r),p=o?a.xCenter:h.x,m=o?a.yCenter:h.y,g={x:p,y:m,angle:h.angle,skip:isNaN(p)||isNaN(m),options:f};this.updateElement(u,c,g,i)}}}ut(qf,"id","radar"),ut(qf,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ut(qf,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});function bo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ny{constructor(e){ut(this,"options");this.options=e||{}}static override(e){Object.assign(Ny.prototype,e)}init(){}formats(){return bo()}parse(){return bo()}format(){return bo()}add(){return bo()}diff(){return bo()}startOf(){return bo()}endOf(){return bo()}}var xO={_date:Ny};function gO(t,e,n,s){const{controller:i,data:a,_sorted:o}=t,c=i._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&o&&a.length){const f=c._reversePixels?F6:pg;if(s){if(i._sharedOptions){const h=a[0],p=typeof h.getRange=="function"&&h.getRange(e);if(p){const m=f(a,e,n-p),g=f(a,e,n+p);return{lo:m.lo,hi:g.hi}}}}else{const h=f(a,e,n);if(u){const{vScale:p}=i._cachedMeta,{_parsed:m}=t,g=m.slice(0,h.lo+1).reverse().findIndex(b=>!nn(b[p.axis]));h.lo-=Math.max(0,g);const y=m.slice(h.hi).findIndex(b=>!nn(b[p.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:a.length-1}}function Lh(t,e,n,s,i){const a=t.getSortedVisibleDatasetMetas(),o=n[e];for(let c=0,u=a.length;c<u;++c){const{index:f,data:h}=a[c],{lo:p,hi:m}=gO(a[c],e,o,i);for(let g=p;g<=m;++g){const y=h[g];y.skip||s(y,f,g)}}}function yO(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,i){const a=e?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function Hm(t,e,n,s,i){const a=[];return!i&&!t.isPointInArea(e)||Lh(t,n,e,function(c,u,f){!i&&!Hi(c,t.chartArea,0)||c.inRange(e.x,e.y,s)&&a.push({element:c,datasetIndex:u,index:f})},!0),a}function vO(t,e,n,s){let i=[];function a(o,c,u){const{startAngle:f,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:p}=nh(o,{x:e.x,y:e.y});Cd(p,f,h)&&i.push({element:o,datasetIndex:c,index:u})}return Lh(t,n,e,a),i}function bO(t,e,n,s,i,a){let o=[];const c=yO(n);let u=Number.POSITIVE_INFINITY;function f(h,p,m){const g=h.inRange(e.x,e.y,i);if(s&&!g)return;const y=h.getCenterPoint(i);if(!(!!a||t.isPointInArea(y))&&!g)return;const v=c(e,y);v<u?(o=[{element:h,datasetIndex:p,index:m}],u=v):v===u&&o.push({element:h,datasetIndex:p,index:m})}return Lh(t,n,e,f),o}function $m(t,e,n,s,i,a){return!a&&!t.isPointInArea(e)?[]:n==="r"&&!s?vO(t,e,n,i):bO(t,e,n,s,i,a)}function b2(t,e,n,s,i){const a=[],o=n==="x"?"inXRange":"inYRange";let c=!1;return Lh(t,n,e,(u,f,h)=>{u[o]&&u[o](e[n],i)&&(a.push({element:u,datasetIndex:f,index:h}),c=c||u.inRange(e.x,e.y,i))}),s&&!c?[]:a}var wO={modes:{index(t,e,n,s){const i=jo(e,t),a=n.axis||"x",o=n.includeInvisible||!1,c=n.intersect?Hm(t,i,a,s,o):$m(t,i,a,!1,s,o),u=[];return c.length?(t.getSortedVisibleDatasetMetas().forEach(f=>{const h=c[0].index,p=f.data[h];p&&!p.skip&&u.push({element:p,datasetIndex:f.index,index:h})}),u):[]},dataset(t,e,n,s){const i=jo(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;let c=n.intersect?Hm(t,i,a,s,o):$m(t,i,a,!1,s,o);if(c.length>0){const u=c[0].datasetIndex,f=t.getDatasetMeta(u).data;c=[];for(let h=0;h<f.length;++h)c.push({element:f[h],datasetIndex:u,index:h})}return c},point(t,e,n,s){const i=jo(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;return Hm(t,i,a,s,o)},nearest(t,e,n,s){const i=jo(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;return $m(t,i,a,n.intersect,s,o)},x(t,e,n,s){const i=jo(e,t);return b2(t,i,"x",n.intersect,s)},y(t,e,n,s){const i=jo(e,t);return b2(t,i,"y",n.intersect,s)}}};const kk=["left","top","right","bottom"];function Kc(t,e){return t.filter(n=>n.pos===e)}function w2(t,e){return t.filter(n=>kk.indexOf(n.pos)===-1&&n.box.axis===e)}function Gc(t,e){return t.sort((n,s)=>{const i=e?s:n,a=e?n:s;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function jO(t){const e=[];let n,s,i,a,o,c;for(n=0,s=(t||[]).length;n<s;++n)i=t[n],{position:a,options:{stack:o,stackWeight:c=1}}=i,e.push({index:n,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&a+o,stackWeight:c});return e}function NO(t){const e={};for(const n of t){const{stack:s,pos:i,stackWeight:a}=n;if(!s||!kk.includes(i))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return e}function _O(t,e){const n=NO(t),{vBoxMaxWidth:s,hBoxMaxHeight:i}=e;let a,o,c;for(a=0,o=t.length;a<o;++a){c=t[a];const{fullSize:u}=c.box,f=n[c.stack],h=f&&c.stackWeight/f.weight;c.horizontal?(c.width=h?h*s:u&&e.availableWidth,c.height=i):(c.width=s,c.height=h?h*i:u&&e.availableHeight)}return n}function kO(t){const e=jO(t),n=Gc(e.filter(f=>f.box.fullSize),!0),s=Gc(Kc(e,"left"),!0),i=Gc(Kc(e,"right")),a=Gc(Kc(e,"top"),!0),o=Gc(Kc(e,"bottom")),c=w2(e,"x"),u=w2(e,"y");return{fullSize:n,leftAndTop:s.concat(a),rightAndBottom:i.concat(u).concat(o).concat(c),chartArea:Kc(e,"chartArea"),vertical:s.concat(i).concat(u),horizontal:a.concat(o).concat(c)}}function j2(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function Sk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function SO(t,e,n,s){const{pos:i,box:a}=n,o=t.maxPadding;if(!Bt(i)){n.size&&(t[i]-=n.size);const p=s[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?a.height:a.width),n.size=p.size/p.count,t[i]+=n.size}a.getPadding&&Sk(o,a.getPadding());const c=Math.max(0,e.outerWidth-j2(o,t,"left","right")),u=Math.max(0,e.outerHeight-j2(o,t,"top","bottom")),f=c!==t.w,h=u!==t.h;return t.w=c,t.h=u,n.horizontal?{same:f,other:h}:{same:h,other:f}}function CO(t){const e=t.maxPadding;function n(s){const i=Math.max(e[s]-t[s],0);return t[s]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function AO(t,e){const n=e.maxPadding;function s(i){const a={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{a[o]=Math.max(e[o],n[o])}),a}return s(t?["left","right"]:["top","bottom"])}function ld(t,e,n,s){const i=[];let a,o,c,u,f,h;for(a=0,o=t.length,f=0;a<o;++a){c=t[a],u=c.box,u.update(c.width||e.w,c.height||e.h,AO(c.horizontal,e));const{same:p,other:m}=SO(e,n,c,s);f|=p&&i.length,h=h||m,u.fullSize||i.push(c)}return f&&ld(i,e,n,s)||h}function wf(t,e,n,s,i){t.top=n,t.left=e,t.right=e+s,t.bottom=n+i,t.width=s,t.height=i}function N2(t,e,n,s){const i=n.padding;let{x:a,y:o}=e;for(const c of t){const u=c.box,f=s[c.stack]||{placed:0,weight:1},h=c.stackWeight/f.weight||1;if(c.horizontal){const p=e.w*h,m=f.size||u.height;ds(f.start)&&(o=f.start),u.fullSize?wf(u,i.left,o,n.outerWidth-i.right-i.left,m):wf(u,e.left+f.placed,o,p,m),f.start=o,f.placed+=p,o=u.bottom}else{const p=e.h*h,m=f.size||u.width;ds(f.start)&&(a=f.start),u.fullSize?wf(u,a,i.top,m,n.outerHeight-i.bottom-i.top):wf(u,a,e.top+f.placed,m,p),f.start=a,f.placed+=p,a=u.right}}e.x=a,e.y=o}var Rs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const i=Xn(t.options.layout.padding),a=Math.max(e-i.width,0),o=Math.max(n-i.height,0),c=kO(t.boxes),u=c.vertical,f=c.horizontal;un(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=u.reduce((b,v)=>v.box.options&&v.box.options.display===!1?b:b+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/h,hBoxMaxHeight:o/2}),m=Object.assign({},i);Sk(m,Xn(s));const g=Object.assign({maxPadding:m,w:a,h:o,x:i.left,y:i.top},i),y=_O(u.concat(f),p);ld(c.fullSize,g,p,y),ld(u,g,p,y),ld(f,g,p,y)&&ld(u,g,p,y),CO(g),N2(c.leftAndTop,g,p,y),g.x+=g.w,g.y+=g.h,N2(c.rightAndBottom,g,p,y),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},un(c.chartArea,b=>{const v=b.box;Object.assign(v,t.chartArea),v.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Ck{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,i){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(e){return!0}updateConfig(e){}}class EO extends Ck{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Wf="$chartjs",LO={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},_2=t=>t===null||t==="";function OO(t,e){const n=t.style,s=t.getAttribute("height"),i=t.getAttribute("width");if(t[Wf]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",_2(i)){const a=o2(t,"width");a!==void 0&&(t.width=a)}if(_2(s))if(t.style.height==="")t.height=t.width/(e||2);else{const a=o2(t,"height");a!==void 0&&(t.height=a)}return t}const Ak=PL?{passive:!0}:!1;function MO(t,e,n){t&&t.addEventListener(e,n,Ak)}function PO(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Ak)}function RO(t,e){const n=LO[t.type]||t.type,{x:s,y:i}=jo(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:i!==void 0?i:null}}function ih(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function TO(t,e,n){const s=t.canvas,i=new MutationObserver(a=>{let o=!1;for(const c of a)o=o||ih(c.addedNodes,s),o=o&&!ih(c.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function DO(t,e,n){const s=t.canvas,i=new MutationObserver(a=>{let o=!1;for(const c of a)o=o||ih(c.removedNodes,s),o=o&&!ih(c.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Ad=new Map;let k2=0;function Ek(){const t=window.devicePixelRatio;t!==k2&&(k2=t,Ad.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function IO(t,e){Ad.size||window.addEventListener("resize",Ek),Ad.set(t,e)}function FO(t){Ad.delete(t),Ad.size||window.removeEventListener("resize",Ek)}function zO(t,e,n){const s=t.canvas,i=s&&wy(s);if(!i)return;const a=ck((c,u)=>{const f=i.clientWidth;n(c,u),f<i.clientWidth&&n()},window),o=new ResizeObserver(c=>{const u=c[0],f=u.contentRect.width,h=u.contentRect.height;f===0&&h===0||a(f,h)});return o.observe(i),IO(t,a),o}function Vm(t,e,n){n&&n.disconnect(),e==="resize"&&FO(t)}function BO(t,e,n){const s=t.canvas,i=ck(a=>{t.ctx!==null&&n(RO(a,t))},t);return MO(s,e,i),i}class qO extends Ck{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(OO(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Wf])return!1;const s=n[Wf].initial;["height","width"].forEach(a=>{const o=s[a];nn(o)?n.removeAttribute(a):n.setAttribute(a,o)});const i=s.style||{};return Object.keys(i).forEach(a=>{n.style[a]=i[a]}),n.width=n.width,delete n[Wf],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:TO,detach:DO,resize:zO}[n]||BO;i[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),i=s[n];if(!i)return;({attach:Vm,detach:Vm,resize:Vm}[n]||PO)(e,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,i){return ML(e,n,s,i)}isAttached(e){const n=e&&wy(e);return!!(n&&n.isConnected)}}function WO(t){return!by()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?EO:qO}class xr{constructor(){ut(this,"x");ut(this,"y");ut(this,"active",!1);ut(this,"options");ut(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return Gl(this.x)&&Gl(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const i={};return e.forEach(a=>{i[a]=s[a]&&s[a].active()?s[a]._to:this[a]}),i}}ut(xr,"defaults",{}),ut(xr,"defaultRoutes");function UO(t,e){const n=t.options.ticks,s=HO(t),i=Math.min(n.maxTicksLimit||s,s),a=n.major.enabled?VO(e):[],o=a.length,c=a[0],u=a[o-1],f=[];if(o>i)return YO(e,f,a,o/i),f;const h=$O(a,e,i);if(o>0){let p,m;const g=o>1?Math.round((u-c)/(o-1)):null;for(jf(e,f,h,nn(g)?0:c-g,c),p=0,m=o-1;p<m;p++)jf(e,f,h,a[p],a[p+1]);return jf(e,f,h,u,nn(g)?e.length:u+g),f}return jf(e,f,h),f}function HO(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(s,i))}function $O(t,e,n){const s=KO(t),i=e.length/n;if(!s)return Math.max(i,1);const a=M6(s);for(let o=0,c=a.length-1;o<c;o++){const u=a[o];if(u>i)return u}return Math.max(i,1)}function VO(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function YO(t,e,n,s){let i=0,a=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===a&&(e.push(t[o]),i++,a=n[i*s])}function jf(t,e,n,s,i){const a=Rt(s,0),o=Math.min(Rt(i,t.length),t.length);let c=0,u,f,h;for(n=Math.ceil(n),i&&(u=i-s,n=u/Math.floor(u/n)),h=a;h<0;)c++,h=Math.round(a+c*n);for(f=Math.max(a,0);f<o;f++)f===h&&(e.push(t[f]),c++,h=Math.round(a+c*n))}function KO(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const GO=t=>t==="left"?"right":t==="right"?"left":t,S2=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,C2=(t,e)=>Math.min(e||t,t);function A2(t,e){const n=[],s=t.length/e,i=t.length;let a=0;for(;a<i;a+=s)n.push(t[Math.floor(a)]);return n}function XO(t,e,n){const s=t.ticks.length,i=Math.min(e,s-1),a=t._startPixel,o=t._endPixel,c=1e-6;let u=t.getPixelForTick(i),f;if(!(n&&(s===1?f=Math.max(u-a,o-u):e===0?f=(t.getPixelForTick(1)-u)/2:f=(u-t.getPixelForTick(i-1))/2,u+=i<e?f:-f,u<a-c||u>o+c)))return u}function QO(t,e){un(t,n=>{const s=n.gc,i=s.length/2;let a;if(i>e){for(a=0;a<i;++a)delete n.data[s[a]];s.splice(0,i)}})}function Xc(t){return t.drawTicks?t.tickLength:0}function E2(t,e){if(!t.display)return 0;const n=qn(t.font,e),s=Xn(t.padding);return(dn(t.text)?t.text.length:1)*n.lineHeight+s.height}function JO(t,e){return Ya(t,{scale:e,type:"scale"})}function ZO(t,e,n){return Ya(t,{tick:n,index:e,type:"tick"})}function eM(t,e,n){let s=fy(t);return(n&&e!=="right"||!n&&e==="right")&&(s=GO(s)),s}function tM(t,e,n,s){const{top:i,left:a,bottom:o,right:c,chart:u}=t,{chartArea:f,scales:h}=u;let p=0,m,g,y;const b=o-i,v=c-a;if(t.isHorizontal()){if(g=Pr(s,a,c),Bt(n)){const w=Object.keys(n)[0],N=n[w];y=h[w].getPixelForValue(N)+b-e}else n==="center"?y=(f.bottom+f.top)/2+b-e:y=S2(t,n,e);m=c-a}else{if(Bt(n)){const w=Object.keys(n)[0],N=n[w];g=h[w].getPixelForValue(N)-v+e}else n==="center"?g=(f.left+f.right)/2-v+e:g=S2(t,n,e);y=Pr(s,o,i),p=n==="left"?-Mn:Mn}return{titleX:g,titleY:y,maxWidth:m,rotation:p}}class oc extends xr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return e=fi(e,Number.POSITIVE_INFINITY),n=fi(n,Number.NEGATIVE_INFINITY),s=fi(s,Number.POSITIVE_INFINITY),i=fi(i,Number.NEGATIVE_INFINITY),{min:fi(e,s),max:fi(n,i),minDefined:er(e),maxDefined:er(n)}}getMinMax(e){let{min:n,max:s,minDefined:i,maxDefined:a}=this.getUserBounds(),o;if(i&&a)return{min:n,max:s};const c=this.getMatchingVisibleMetas();for(let u=0,f=c.length;u<f;++u)o=c[u].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),a||(s=Math.max(s,o.max));return n=a&&n>s?s:n,s=i&&n>s?n:s,{min:fi(n,fi(s,n)),max:fi(s,fi(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){cn(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:i,grace:a,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=cL(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?A2(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=UO(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){cn(this.options.afterUpdate,[this])}beforeSetDimensions(){cn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){cn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),cn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){cn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,i,a;for(s=0,i=e.length;s<i;s++)a=e[s],a.label=cn(n.callback,[a.value,s,e],this)}afterTickToLabelConversion(){cn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){cn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=C2(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,a=n.maxRotation;let o=i,c,u,f;if(!this._isVisible()||!n.display||i>=a||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),p=h.widest.width,m=h.highest.height,g=as(this.chart.width-p,0,this.maxWidth);c=e.offset?this.maxWidth/s:g/(s-1),p+6>c&&(c=g/(s-(e.offset?.5:1)),u=this.maxHeight-Xc(e.grid)-n.padding-E2(e.title,this.chart.options.font),f=Math.sqrt(p*p+m*m),o=Ah(Math.min(Math.asin(as((h.highest.height+6)/c,-1,1)),Math.asin(as(u/f,-1,1))-Math.asin(as(m/f,-1,1)))),o=Math.max(i,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){cn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){cn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:a}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const u=E2(i,n.options.font);if(c?(e.width=this.maxWidth,e.height=Xc(a)+u):(e.height=this.maxHeight,e.width=Xc(a)+u),s.display&&this.ticks.length){const{first:f,last:h,widest:p,highest:m}=this._getLabelSizes(),g=s.padding*2,y=or(this.labelRotation),b=Math.cos(y),v=Math.sin(y);if(c){const w=s.mirror?0:v*p.width+b*m.height;e.height=Math.min(this.maxHeight,e.height+w+g)}else{const w=s.mirror?0:b*p.width+v*m.height;e.width=Math.min(this.maxWidth,e.width+w+g)}this._calculatePadding(f,h,v,b)}}this._handleMargins(),c?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,i){const{ticks:{align:a,padding:o},position:c}=this.options,u=this.labelRotation!==0,f=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,g=0;u?f?(m=i*e.width,g=s*n.height):(m=s*e.height,g=i*n.width):a==="start"?g=n.width:a==="end"?m=e.width:a!=="inner"&&(m=e.width/2,g=n.width/2),this.paddingLeft=Math.max((m-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-p+o)*this.width/(this.width-p),0)}else{let h=n.height/2,p=e.height/2;a==="start"?(h=0,p=e.height):a==="end"&&(h=n.height,p=0),this.paddingTop=h+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){cn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)nn(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=A2(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:i,_longestTextCache:a}=this,o=[],c=[],u=Math.floor(n/C2(n,s));let f=0,h=0,p,m,g,y,b,v,w,N,k,j,S;for(p=0;p<n;p+=u){if(y=e[p].label,b=this._resolveTickFontOptions(p),i.font=v=b.string,w=a[v]=a[v]||{data:{},gc:[]},N=b.lineHeight,k=j=0,!nn(y)&&!dn(y))k=rh(i,w.data,w.gc,k,y),j=N;else if(dn(y))for(m=0,g=y.length;m<g;++m)S=y[m],!nn(S)&&!dn(S)&&(k=rh(i,w.data,w.gc,k,S),j+=N);o.push(k),c.push(j),f=Math.max(k,f),h=Math.max(j,h)}QO(a,n);const C=o.indexOf(f),O=c.indexOf(h),M=B=>({width:o[B]||0,height:c[B]||0});return{first:M(0),last:M(n-1),widest:M(C),highest:M(O),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return I6(this._alignToPixels?vo(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=ZO(this.getContext(),e,s))}return this.$context||(this.$context=JO(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=or(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),a=this._getLabelSizes(),o=e.autoSkipPadding||0,c=a?a.widest.width+o:0,u=a?a.highest.height+o:0;return this.isHorizontal()?u*s>c*i?c/s:u/i:u*i<c*s?u/s:c/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,i=this.options,{grid:a,position:o,border:c}=i,u=a.offset,f=this.isHorizontal(),p=this.ticks.length+(u?1:0),m=Xc(a),g=[],y=c.setContext(this.getContext()),b=y.display?y.width:0,v=b/2,w=function(ne){return vo(s,ne,b)};let N,k,j,S,C,O,M,B,I,R,P,q;if(o==="top")N=w(this.bottom),O=this.bottom-m,B=N-v,R=w(e.top)+v,q=e.bottom;else if(o==="bottom")N=w(this.top),R=e.top,q=w(e.bottom)-v,O=N+v,B=this.top+m;else if(o==="left")N=w(this.right),C=this.right-m,M=N-v,I=w(e.left)+v,P=e.right;else if(o==="right")N=w(this.left),I=e.left,P=w(e.right)-v,C=N+v,M=this.left+m;else if(n==="x"){if(o==="center")N=w((e.top+e.bottom)/2+.5);else if(Bt(o)){const ne=Object.keys(o)[0],X=o[ne];N=w(this.chart.scales[ne].getPixelForValue(X))}R=e.top,q=e.bottom,O=N+v,B=O+m}else if(n==="y"){if(o==="center")N=w((e.left+e.right)/2);else if(Bt(o)){const ne=Object.keys(o)[0],X=o[ne];N=w(this.chart.scales[ne].getPixelForValue(X))}C=N-v,M=C-m,I=e.left,P=e.right}const H=Rt(i.ticks.maxTicksLimit,p),G=Math.max(1,Math.ceil(p/H));for(k=0;k<p;k+=G){const ne=this.getContext(k),X=a.setContext(ne),ee=c.setContext(ne),Y=X.lineWidth,U=X.color,T=ee.dash||[],W=ee.dashOffset,z=X.tickWidth,Q=X.tickColor,Z=X.tickBorderDash||[],V=X.tickBorderDashOffset;j=XO(this,k,u),j!==void 0&&(S=vo(s,j,Y),f?C=M=I=P=S:O=B=R=q=S,g.push({tx1:C,ty1:O,tx2:M,ty2:B,x1:I,y1:R,x2:P,y2:q,width:Y,color:U,borderDash:T,borderDashOffset:W,tickWidth:z,tickColor:Q,tickBorderDash:Z,tickBorderDashOffset:V}))}return this._ticksLength=p,this._borderValue=N,g}_computeLabelItems(e){const n=this.axis,s=this.options,{position:i,ticks:a}=s,o=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:f,padding:h,mirror:p}=a,m=Xc(s.grid),g=m+h,y=p?-h:g,b=-or(this.labelRotation),v=[];let w,N,k,j,S,C,O,M,B,I,R,P,q="middle";if(i==="top")C=this.bottom-y,O=this._getXAxisLabelAlignment();else if(i==="bottom")C=this.top+y,O=this._getXAxisLabelAlignment();else if(i==="left"){const G=this._getYAxisLabelAlignment(m);O=G.textAlign,S=G.x}else if(i==="right"){const G=this._getYAxisLabelAlignment(m);O=G.textAlign,S=G.x}else if(n==="x"){if(i==="center")C=(e.top+e.bottom)/2+g;else if(Bt(i)){const G=Object.keys(i)[0],ne=i[G];C=this.chart.scales[G].getPixelForValue(ne)+g}O=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")S=(e.left+e.right)/2-g;else if(Bt(i)){const G=Object.keys(i)[0],ne=i[G];S=this.chart.scales[G].getPixelForValue(ne)}O=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(u==="start"?q="top":u==="end"&&(q="bottom"));const H=this._getLabelSizes();for(w=0,N=c.length;w<N;++w){k=c[w],j=k.label;const G=a.setContext(this.getContext(w));M=this.getPixelForTick(w)+a.labelOffset,B=this._resolveTickFontOptions(w),I=B.lineHeight,R=dn(j)?j.length:1;const ne=R/2,X=G.color,ee=G.textStrokeColor,Y=G.textStrokeWidth;let U=O;o?(S=M,O==="inner"&&(w===N-1?U=this.options.reverse?"left":"right":w===0?U=this.options.reverse?"right":"left":U="center"),i==="top"?f==="near"||b!==0?P=-R*I+I/2:f==="center"?P=-H.highest.height/2-ne*I+I:P=-H.highest.height+I/2:f==="near"||b!==0?P=I/2:f==="center"?P=H.highest.height/2-ne*I:P=H.highest.height-R*I,p&&(P*=-1),b!==0&&!G.showLabelBackdrop&&(S+=I/2*Math.sin(b))):(C=M,P=(1-R)*I/2);let T;if(G.showLabelBackdrop){const W=Xn(G.backdropPadding),z=H.heights[w],Q=H.widths[w];let Z=P-W.top,V=0-W.left;switch(q){case"middle":Z-=z/2;break;case"bottom":Z-=z;break}switch(O){case"center":V-=Q/2;break;case"right":V-=Q;break;case"inner":w===N-1?V-=Q:w>0&&(V-=Q/2);break}T={left:V,top:Z,width:Q+W.width,height:z+W.height,color:G.backdropColor}}v.push({label:j,font:B,textOffset:P,options:{rotation:b,color:X,strokeColor:ee,strokeWidth:Y,textAlign:U,textBaseline:q,translation:[S,C],backdrop:T}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-or(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:i,padding:a}}=this.options,o=this._getLabelSizes(),c=e+a,u=o.widest.width;let f,h;return n==="left"?i?(h=this.right+a,s==="near"?f="left":s==="center"?(f="center",h+=u/2):(f="right",h+=u)):(h=this.right-c,s==="near"?f="right":s==="center"?(f="center",h-=u/2):(f="left",h=this.left)):n==="right"?i?(h=this.left+a,s==="near"?f="right":s==="center"?(f="center",h-=u/2):(f="left",h-=u)):(h=this.left+c,s==="near"?f="left":s==="center"?(f="center",h+=u/2):(f="right",h=this.right)):f="right",{textAlign:f,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:i,width:a,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,i,a,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(a=>a.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,o;const c=(u,f,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(u.x,u.y),s.lineTo(f.x,f.y),s.stroke(),s.restore())};if(n.display)for(a=0,o=i.length;a<o;++a){const u=i[a];n.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:i}}=this,a=s.setContext(this.getContext()),o=s.display?a.width:0;if(!o)return;const c=i.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let f,h,p,m;this.isHorizontal()?(f=vo(e,this.left,o)-o/2,h=vo(e,this.right,c)+c/2,p=m=u):(p=vo(e,this.top,o)-o/2,m=vo(e,this.bottom,c)+c/2,f=h=u),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(f,p),n.lineTo(h,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&Vd(s,i);const a=this.getLabelItems(e);for(const o of a){const c=o.options,u=o.font,f=o.label,h=o.textOffset;Vo(s,f,0,h,u,c)}i&&Yd(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const a=qn(s.font),o=Xn(s.padding),c=s.align;let u=a.lineHeight/2;n==="bottom"||n==="center"||Bt(n)?(u+=o.bottom,dn(s.text)&&(u+=a.lineHeight*(s.text.length-1))):u+=o.top;const{titleX:f,titleY:h,maxWidth:p,rotation:m}=tM(this,u,n,c);Vo(e,s.text,0,0,a,{color:s.color,maxWidth:p,rotation:m,textAlign:eM(c,n,i),textBaseline:"middle",translation:[f,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Rt(e.grid&&e.grid.z,-1),i=Rt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==oc.prototype.draw?[{z:n,draw:a=>{this.draw(a)}}]:[{z:s,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let a,o;for(a=0,o=n.length;a<o;++a){const c=n[a];c[s]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return qn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Nf{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;sM(n)&&(s=this.register(n));const i=this.items,a=e.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in i||(i[a]=e,nM(e,o,s),this.override&&Dn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,i=this.scope;s in n&&delete n[s],i&&s in Dn[i]&&(delete Dn[i][s],this.override&&delete $o[s])}}function nM(t,e,n){const s=vi(Object.create(null),[n?Dn.get(n):{},Dn.get(e),t.defaults]);Dn.set(e,s),t.defaultRoutes&&rM(e,t.defaultRoutes),t.descriptors&&Dn.describe(e,t.descriptors)}function rM(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),i=s.pop(),a=[t].concat(s).join("."),o=e[n].split("."),c=o.pop(),u=o.join(".");Dn.route(a,i,u,c)})}function sM(t){return"id"in t&&"defaults"in t}class iM{constructor(){this.controllers=new Nf(qo,"datasets",!0),this.elements=new Nf(xr,"elements"),this.plugins=new Nf(Object,"plugins"),this.scales=new Nf(oc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(i=>{const a=s||this._getRegistryForType(i);s||a.isForType(i)||a===this.plugins&&i.id?this._exec(e,a,i):un(i,o=>{const c=s||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,n,s){const i=cy(e);cn(s["before"+i],[],s),n[e](s),cn(s["after"+i],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return i}}var pi=new iM;class aM{constructor(){this._init=void 0}notify(e,n,s,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const a=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(a,e,n,s);return n==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,i){i=i||{};for(const a of e){const o=a.plugin,c=o[s],u=[n,i,a.options];if(cn(c,u,o)===!1&&i.cancelable)return!1}return!0}invalidate(){nn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,i=Rt(s.options&&s.options.plugins,{}),a=oM(s);return i===!1&&!n?[]:cM(e,a,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,i=(a,o)=>a.filter(c=>!o.some(u=>c.plugin.id===u.plugin.id));this._notify(i(n,s),e,"stop"),this._notify(i(s,n),e,"start")}}function oM(t){const e={},n=[],s=Object.keys(pi.plugins.items);for(let a=0;a<s.length;a++)n.push(pi.getPlugin(s[a]));const i=t.plugins||[];for(let a=0;a<i.length;a++){const o=i[a];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function lM(t,e){return!e&&t===!1?null:t===!0?{}:t}function cM(t,{plugins:e,localIds:n},s,i){const a=[],o=t.getContext();for(const c of e){const u=c.id,f=lM(s[u],i);f!==null&&a.push({plugin:c,options:dM(t.config,{plugin:c,local:n[u]},f,o)})}return a}function dM(t,{plugin:e,local:n},s,i){const a=t.pluginScopeKeys(e),o=t.getOptionScopes(s,a);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function yg(t,e){const n=Dn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function uM(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function fM(t,e){return t===e?"_index_":"_value_"}function L2(t){if(t==="x"||t==="y"||t==="r")return t}function hM(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function vg(t,...e){if(L2(t))return t;for(const n of e){const s=n.axis||hM(n.position)||t.length>1&&L2(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function O2(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function pM(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return O2(t,"x",n[0])||O2(t,"y",n[0])}return{}}function mM(t,e){const n=$o[t.type]||{scales:{}},s=e.scales||{},i=yg(t.type,e),a=Object.create(null);return Object.keys(s).forEach(o=>{const c=s[o];if(!Bt(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=vg(o,c,pM(o,t),Dn.scales[c.type]),f=fM(u,i),h=n.scales||{};a[o]=pd(Object.create(null),[{axis:u},c,h[u],h[f]])}),t.data.datasets.forEach(o=>{const c=o.type||t.type,u=o.indexAxis||yg(c,e),h=($o[c]||{}).scales||{};Object.keys(h).forEach(p=>{const m=uM(p,u),g=o[m+"AxisID"]||m;a[g]=a[g]||Object.create(null),pd(a[g],[{axis:m},s[g],h[p]])})}),Object.keys(a).forEach(o=>{const c=a[o];pd(c,[Dn.scales[c.type],Dn.scale])}),a}function Lk(t){const e=t.options||(t.options={});e.plugins=Rt(e.plugins,{}),e.scales=mM(t,e)}function Ok(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function xM(t){return t=t||{},t.data=Ok(t.data),Lk(t),t}const M2=new Map,Mk=new Set;function _f(t,e){let n=M2.get(t);return n||(n=e(),M2.set(t,n),Mk.add(n)),n}const Qc=(t,e,n)=>{const s=Ua(e,n);s!==void 0&&t.add(s)};class gM{constructor(e){this._config=xM(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ok(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Lk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return _f(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return _f(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return _f(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return _f(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let i=s.get(e);return(!i||n)&&(i=new Map,s.set(e,i)),i}getOptionScopes(e,n,s){const{options:i,type:a}=this,o=this._cachedScopes(e,s),c=o.get(n);if(c)return c;const u=new Set;n.forEach(h=>{e&&(u.add(e),h.forEach(p=>Qc(u,e,p))),h.forEach(p=>Qc(u,i,p)),h.forEach(p=>Qc(u,$o[a]||{},p)),h.forEach(p=>Qc(u,Dn,p)),h.forEach(p=>Qc(u,mg,p))});const f=Array.from(u);return f.length===0&&f.push(Object.create(null)),Mk.has(n)&&o.set(n,f),f}chartOptionScopes(){const{options:e,type:n}=this;return[e,$o[n]||{},Dn.datasets[n]||{},{type:n},Dn,mg]}resolveNamedOptions(e,n,s,i=[""]){const a={$shared:!0},{resolver:o,subPrefixes:c}=P2(this._resolverCache,e,i);let u=o;if(vM(o,n)){a.$shared=!1,s=cs(s)?s():s;const f=this.createResolver(e,s,c);u=Jl(o,s,f)}for(const f of n)a[f]=u[f];return a}createResolver(e,n,s=[""],i){const{resolver:a}=P2(this._resolverCache,e,s);return Bt(n)?Jl(a,n,void 0,i):a}}function P2(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const i=n.join();let a=s.get(i);return a||(a={resolver:gy(e,n),subPrefixes:n.filter(c=>!c.toLowerCase().includes("hover"))},s.set(i,a)),a}const yM=t=>Bt(t)&&Object.getOwnPropertyNames(t).some(e=>cs(t[e]));function vM(t,e){const{isScriptable:n,isIndexable:s}=fk(t);for(const i of e){const a=n(i),o=s(i),c=(o||a)&&t[i];if(a&&(cs(c)||yM(c))||o&&dn(c))return!0}return!1}var bM="4.5.1";const wM=["top","bottom","left","right","chartArea"];function R2(t,e){return t==="top"||t==="bottom"||wM.indexOf(t)===-1&&e==="x"}function T2(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function D2(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),cn(n&&n.onComplete,[t],e)}function jM(t){const e=t.chart,n=e.options.animation;cn(n&&n.onProgress,[t],e)}function Pk(t){return by()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Uf={},I2=t=>{const e=Pk(t);return Object.values(Uf).filter(n=>n.canvas===e).pop()};function NM(t,e,n){const s=Object.keys(t);for(const i of s){const a=+i;if(a>=e){const o=t[i];delete t[i],(n>0||a>e)&&(t[a+n]=o)}}}function _M(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var va;let Ba=(va=class{static register(...e){pi.add(...e),F2()}static unregister(...e){pi.remove(...e),F2()}constructor(e,n){const s=this.config=new gM(n),i=Pk(e),a=I2(i);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||WO(i)),this.platform.updateConfig(s);const c=this.platform.acquireContext(i,o.aspectRatio),u=c&&c.canvas,f=u&&u.height,h=u&&u.width;if(this.id=_6(),this.ctx=c,this.canvas=u,this.width=h,this.height=f,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new aM,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=q6(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],Uf[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}Ti.listen(this,"complete",D2),Ti.listen(this,"progress",jM),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:i,_aspectRatio:a}=this;return nn(e)?n&&a?a:i?s/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return pi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():a2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return r2(this.canvas,this.ctx),this}stop(){return Ti.stop(this),this}resize(e,n){Ti.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,i=this.canvas,a=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,a),c=s.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,a2(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),cn(s.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};un(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,i=Object.keys(s).reduce((o,c)=>(o[c]=!1,o),{});let a=[];n&&(a=a.concat(Object.keys(n).map(o=>{const c=n[o],u=vg(o,c),f=u==="r",h=u==="x";return{options:c,dposition:f?"chartArea":h?"bottom":"left",dtype:f?"radialLinear":h?"category":"linear"}}))),un(a,o=>{const c=o.options,u=c.id,f=vg(u,c),h=Rt(c.type,o.dtype);(c.position===void 0||R2(c.position,f)!==R2(o.dposition))&&(c.position=o.dposition),i[u]=!0;let p=null;if(u in s&&s[u].type===h)p=s[u];else{const m=pi.getScale(h);p=new m({id:u,type:h,ctx:this.ctx,chart:this}),s[p.id]=p}p.init(c,e)}),un(i,(o,c)=>{o||delete s[c]}),un(s,o=>{Rs.configure(this,o,o.options),Rs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((i,a)=>i.index-a.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(T2("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,i)=>{n.filter(a=>a===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const a=n[s];let o=this.getDatasetMeta(s);const c=a.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=c,o.indexAxis=a.indexAxis||yg(c,this.options),o.order=a.order||0,o.index=s,o.label=""+a.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const u=pi.getController(c),{datasetElementType:f,dataElementType:h}=Dn.datasets[c];Object.assign(u,{dataElementType:pi.getElement(h),datasetElementType:f&&pi.getElement(f)}),o.controller=new u(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){un(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let f=0,h=this.data.datasets.length;f<h;f++){const{controller:p}=this.getDatasetMeta(f),m=!i&&a.indexOf(p)===-1;p.buildOrUpdateElements(m),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||un(a,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(T2("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){un(this.scales,e=>{Rs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!G1(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:a}of n){const o=s==="_removeElements"?-a:a;NM(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=a=>new Set(e.filter(o=>o[0]===a).map((o,c)=>c+","+o.splice(1).join(","))),i=s(0);for(let a=1;a<n;a++)if(!G1(i,s(a)))return;return Array.from(i).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Rs.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],un(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,a)=>{i._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,cs(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),i={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ti.has(this)?this.attached&&!Ti.running(this)&&Ti.start(this):(this.draw(),D2({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let i,a;for(i=0,a=n.length;i<a;++i){const o=n[i];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},i=jk(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&Vd(n,i),e.controller.draw(),i&&Yd(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Hi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,i){const a=wO.modes[n];return typeof a=="function"?a(this,e,s,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let i=s.filter(a=>a&&a._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Ya(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const i=s?"show":"hide",a=this.getDatasetMeta(e),o=a.controller._resolveAnimations(void 0,i);ds(n)?(a.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(a,{visible:s}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ti.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),r2(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Uf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(a,o)=>{n.addEventListener(this,a,o),e[a]=o},i=(a,o,c)=>{a.offsetX=o,a.offsetY=c,this._eventHandler(a)};un(this.options.events,a=>s(a,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(u,f)=>{n.addEventListener(this,u,f),e[u]=f},i=(u,f)=>{e[u]&&(n.removeEventListener(this,u,f),delete e[u])},a=(u,f)=>{this.canvas&&this.resize(u,f)};let o;const c=()=>{i("attach",c),this.attached=!0,this.resize(),s("resize",a),s("detach",o)};o=()=>{this.attached=!1,i("resize",a),this._stop(),this._resize(0,0),s("attach",c)},n.isAttached(this.canvas)?c():o()}unbindEvents(){un(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},un(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const i=s?"set":"remove";let a,o,c,u;for(n==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+i+"DatasetHoverStyle"]()),c=0,u=e.length;c<u;++c){o=e[c];const f=o&&this.getDatasetMeta(o.datasetIndex).controller;f&&f[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:a,index:o})=>{const c=this.getDatasetMeta(a);if(!c)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:c.data[o],index:o}});!Jf(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const i=this.options.hover,a=(u,f)=>u.filter(h=>!f.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),o=a(n,e),c=s?e:a(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const a=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(a||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:i=[],options:a}=this,o=n,c=this._getActiveElements(e,i,s,o),u=L6(e),f=_M(e,this._lastEvent,s,u);s&&(this._lastEvent=null,cn(a.onHover,[e,c,this],this),u&&cn(a.onClick,[e,c,this],this));const h=!Jf(c,i);return(h||n)&&(this._active=c,this._updateHoverStyles(c,i,n)),this._lastEvent=f,h}_getActiveElements(e,n,s,i){if(e.type==="mouseout")return[];if(!s)return n;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,i)}},ut(va,"defaults",Dn),ut(va,"instances",Uf),ut(va,"overrides",$o),ut(va,"registry",pi),ut(va,"version",bM),ut(va,"getChart",I2),va);function F2(){return un(Ba.instances,t=>t._plugins.invalidate())}function kM(t,e,n){const{startAngle:s,x:i,y:a,outerRadius:o,innerRadius:c,options:u}=e,{borderWidth:f,borderJoinStyle:h}=u,p=Math.min(f/o,Rr(s-n));if(t.beginPath(),t.arc(i,a,o-f/2,s+p/2,n-p/2),c>0){const m=Math.min(f/c,Rr(s-n));t.arc(i,a,c+f/2,n-m/2,s+m/2,!0)}else{const m=Math.min(f/2,o*Rr(s-n));if(h==="round")t.arc(i,a,m,n-Wt/2,s+Wt/2,!0);else if(h==="bevel"){const g=2*m*m,y=-g*Math.cos(n+Wt/2)+i,b=-g*Math.sin(n+Wt/2)+a,v=g*Math.cos(s+Wt/2)+i,w=g*Math.sin(s+Wt/2)+a;t.lineTo(y,b),t.lineTo(v,w)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function SM(t,e,n){const{startAngle:s,pixelMargin:i,x:a,y:o,outerRadius:c,innerRadius:u}=e;let f=i/c;t.beginPath(),t.arc(a,o,c,s-f,n+f),u>i?(f=i/u,t.arc(a,o,u,n+f,s-f,!0)):t.arc(a,o,i,n+Mn,s-Mn),t.closePath(),t.clip()}function CM(t){return xy(t,["outerStart","outerEnd","innerStart","innerEnd"])}function AM(t,e,n,s){const i=CM(t.options.borderRadius),a=(n-e)/2,o=Math.min(a,s*e/2),c=u=>{const f=(n-Math.min(a,u))*s/2;return as(u,0,Math.min(a,f))};return{outerStart:c(i.outerStart),outerEnd:c(i.outerEnd),innerStart:as(i.innerStart,0,o),innerEnd:as(i.innerEnd,0,o)}}function Al(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function ah(t,e,n,s,i,a){const{x:o,y:c,startAngle:u,pixelMargin:f,innerRadius:h}=e,p=Math.max(e.outerRadius+s+n-f,0),m=h>0?h+s+n+f:0;let g=0;const y=i-u;if(s){const G=h>0?h-s:0,ne=p>0?p-s:0,X=(G+ne)/2,ee=X!==0?y*X/(X+s):y;g=(y-ee)/2}const b=Math.max(.001,y*p-n/Wt)/p,v=(y-b)/2,w=u+v+g,N=i-v-g,{outerStart:k,outerEnd:j,innerStart:S,innerEnd:C}=AM(e,m,p,N-w),O=p-k,M=p-j,B=w+k/O,I=N-j/M,R=m+S,P=m+C,q=w+S/R,H=N-C/P;if(t.beginPath(),a){const G=(B+I)/2;if(t.arc(o,c,p,B,G),t.arc(o,c,p,G,I),j>0){const Y=Al(M,I,o,c);t.arc(Y.x,Y.y,j,I,N+Mn)}const ne=Al(P,N,o,c);if(t.lineTo(ne.x,ne.y),C>0){const Y=Al(P,H,o,c);t.arc(Y.x,Y.y,C,N+Mn,H+Math.PI)}const X=(N-C/m+(w+S/m))/2;if(t.arc(o,c,m,N-C/m,X,!0),t.arc(o,c,m,X,w+S/m,!0),S>0){const Y=Al(R,q,o,c);t.arc(Y.x,Y.y,S,q+Math.PI,w-Mn)}const ee=Al(O,w,o,c);if(t.lineTo(ee.x,ee.y),k>0){const Y=Al(O,B,o,c);t.arc(Y.x,Y.y,k,w-Mn,B)}}else{t.moveTo(o,c);const G=Math.cos(B)*p+o,ne=Math.sin(B)*p+c;t.lineTo(G,ne);const X=Math.cos(I)*p+o,ee=Math.sin(I)*p+c;t.lineTo(X,ee)}t.closePath()}function EM(t,e,n,s,i){const{fullCircles:a,startAngle:o,circumference:c}=e;let u=e.endAngle;if(a){ah(t,e,n,s,u,i);for(let f=0;f<a;++f)t.fill();isNaN(c)||(u=o+(c%wn||wn))}return ah(t,e,n,s,u,i),t.fill(),u}function LM(t,e,n,s,i){const{fullCircles:a,startAngle:o,circumference:c,options:u}=e,{borderWidth:f,borderJoinStyle:h,borderDash:p,borderDashOffset:m,borderRadius:g}=u,y=u.borderAlign==="inner";if(!f)return;t.setLineDash(p||[]),t.lineDashOffset=m,y?(t.lineWidth=f*2,t.lineJoin=h||"round"):(t.lineWidth=f,t.lineJoin=h||"bevel");let b=e.endAngle;if(a){ah(t,e,n,s,b,i);for(let v=0;v<a;++v)t.stroke();isNaN(c)||(b=o+(c%wn||wn))}y&&SM(t,e,b),u.selfJoin&&b-o>=Wt&&g===0&&h!=="miter"&&kM(t,e,b),a||(ah(t,e,n,s,b,i),t.stroke())}class Ao extends xr{constructor(n){super();ut(this,"circumference");ut(this,"endAngle");ut(this,"fullCircles");ut(this,"innerRadius");ut(this,"outerRadius");ut(this,"pixelMargin");ut(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,i){const a=this.getProps(["x","y"],i),{angle:o,distance:c}=nh(a,{x:n,y:s}),{startAngle:u,endAngle:f,innerRadius:h,outerRadius:p,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),g=(this.options.spacing+this.options.borderWidth)/2,y=Rt(m,f-u),b=Cd(o,u,f)&&u!==f,v=y>=wn||b,w=Ui(c,h+g,p+g);return v&&w}getCenterPoint(n){const{x:s,y:i,startAngle:a,endAngle:o,innerRadius:c,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:f,spacing:h}=this.options,p=(a+o)/2,m=(c+u+h+f)/2;return{x:s+Math.cos(p)*m,y:i+Math.sin(p)*m}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:i}=this,a=(s.offset||0)/4,o=(s.spacing||0)/2,c=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=i>wn?Math.floor(i/wn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const u=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(u)*a,Math.sin(u)*a);const f=1-Math.sin(Math.min(Wt,i||0)),h=a*f;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,EM(n,this,h,o,c),LM(n,this,h,o,c),n.restore()}}ut(Ao,"id","arc"),ut(Ao,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ut(Ao,"defaultRoutes",{backgroundColor:"backgroundColor"}),ut(Ao,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function Rk(t,e,n=e){t.lineCap=Rt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Rt(n.borderDash,e.borderDash)),t.lineDashOffset=Rt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Rt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Rt(n.borderWidth,e.borderWidth),t.strokeStyle=Rt(n.borderColor,e.borderColor)}function OM(t,e,n){t.lineTo(n.x,n.y)}function MM(t){return t.stepped?eL:t.tension||t.cubicInterpolationMode==="monotone"?tL:OM}function Tk(t,e,n={}){const s=t.length,{start:i=0,end:a=s-1}=n,{start:o,end:c}=e,u=Math.max(i,o),f=Math.min(a,c),h=i<o&&a<o||i>c&&a>c;return{count:s,start:u,loop:e.loop,ilen:f<u&&!h?s+f-u:f-u}}function PM(t,e,n,s){const{points:i,options:a}=e,{count:o,start:c,loop:u,ilen:f}=Tk(i,n,s),h=MM(a);let{move:p=!0,reverse:m}=s||{},g,y,b;for(g=0;g<=f;++g)y=i[(c+(m?f-g:g))%o],!y.skip&&(p?(t.moveTo(y.x,y.y),p=!1):h(t,b,y,m,a.stepped),b=y);return u&&(y=i[(c+(m?f:0))%o],h(t,b,y,m,a.stepped)),!!u}function RM(t,e,n,s){const i=e.points,{count:a,start:o,ilen:c}=Tk(i,n,s),{move:u=!0,reverse:f}=s||{};let h=0,p=0,m,g,y,b,v,w;const N=j=>(o+(f?c-j:j))%a,k=()=>{b!==v&&(t.lineTo(h,v),t.lineTo(h,b),t.lineTo(h,w))};for(u&&(g=i[N(0)],t.moveTo(g.x,g.y)),m=0;m<=c;++m){if(g=i[N(m)],g.skip)continue;const j=g.x,S=g.y,C=j|0;C===y?(S<b?b=S:S>v&&(v=S),h=(p*h+j)/++p):(k(),t.lineTo(j,S),y=C,p=0,b=v=S),w=S}k()}function bg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?RM:PM}function TM(t){return t.stepped?RL:t.tension||t.cubicInterpolationMode==="monotone"?TL:No}function DM(t,e,n,s){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,s)&&i.closePath()),Rk(t,e.options),t.stroke(i)}function IM(t,e,n,s){const{segments:i,options:a}=e,o=bg(e);for(const c of i)Rk(t,a,c.style),t.beginPath(),o(t,e,c,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const FM=typeof Path2D=="function";function zM(t,e,n,s){FM&&!e.options.segment?DM(t,e,n,s):IM(t,e,n,s)}class $i extends xr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;SL(this._points,s,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=qL(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,i=e[n],a=this.points,o=wk(this,{property:n,start:i,end:i});if(!o.length)return;const c=[],u=TM(s);let f,h;for(f=0,h=o.length;f<h;++f){const{start:p,end:m}=o[f],g=a[p],y=a[m];if(g===y){c.push(g);continue}const b=Math.abs((i-g[n])/(y[n]-g[n])),v=u(g,y,b,s.stepped);v[n]=e[n],c.push(v)}return c.length===1?c[0]:c}pathSegment(e,n,s){return bg(this)(e,this,n,s)}path(e,n,s){const i=this.segments,a=bg(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const c of i)o&=a(e,this,c,{start:n,end:n+s-1});return!!o}draw(e,n,s,i){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),zM(e,this,s,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ut($i,"id","line"),ut($i,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ut($i,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ut($i,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function z2(t,e,n,s){const i=t.options,{[n]:a}=t.getProps([n],s);return Math.abs(e-a)<i.radius+i.hitRadius}class Pl extends xr{constructor(n){super();ut(this,"parsed");ut(this,"skip");ut(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,i){const a=this.options,{x:o,y:c}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(s-c,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(n,s){return z2(this,n,"x",s)}inYRange(n,s){return z2(this,n,"y",s)}getCenterPoint(n){const{x:s,y:i}=this.getProps(["x","y"],n);return{x:s,y:i}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const i=s&&n.borderWidth||0;return(s+i)*2}draw(n,s){const i=this.options;this.skip||i.radius<.1||!Hi(this,s,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,xg(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ut(Pl,"id","point"),ut(Pl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ut(Pl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Dk(t,e){const{x:n,y:s,base:i,width:a,height:o}=t.getProps(["x","y","base","width","height"],e);let c,u,f,h,p;return t.horizontal?(p=o/2,c=Math.min(n,i),u=Math.max(n,i),f=s-p,h=s+p):(p=a/2,c=n-p,u=n+p,f=Math.min(s,i),h=Math.max(s,i)),{left:c,top:f,right:u,bottom:h}}function Ta(t,e,n,s){return t?0:as(e,n,s)}function BM(t,e,n){const s=t.options.borderWidth,i=t.borderSkipped,a=uk(s);return{t:Ta(i.top,a.top,0,n),r:Ta(i.right,a.right,0,e),b:Ta(i.bottom,a.bottom,0,n),l:Ta(i.left,a.left,0,e)}}function qM(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,a=za(i),o=Math.min(e,n),c=t.borderSkipped,u=s||Bt(i);return{topLeft:Ta(!u||c.top||c.left,a.topLeft,0,o),topRight:Ta(!u||c.top||c.right,a.topRight,0,o),bottomLeft:Ta(!u||c.bottom||c.left,a.bottomLeft,0,o),bottomRight:Ta(!u||c.bottom||c.right,a.bottomRight,0,o)}}function WM(t){const e=Dk(t),n=e.right-e.left,s=e.bottom-e.top,i=BM(t,n/2,s/2),a=qM(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:a},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function Ym(t,e,n,s){const i=e===null,a=n===null,c=t&&!(i&&a)&&Dk(t,s);return c&&(i||Ui(e,c.left,c.right))&&(a||Ui(n,c.top,c.bottom))}function UM(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function HM(t,e){t.rect(e.x,e.y,e.w,e.h)}function Km(t,e,n={}){const s=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,a=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+s,y:t.y+i,w:t.w+a,h:t.h+o,radius:t.radius}}class Rl extends xr{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:i}}=this,{inner:a,outer:o}=WM(this),c=UM(o.radius)?Ql:HM;e.save(),(o.w!==a.w||o.h!==a.h)&&(e.beginPath(),c(e,Km(o,n,a)),e.clip(),c(e,Km(a,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),c(e,Km(a,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,s){return Ym(this,e,n,s)}inXRange(e,n){return Ym(this,e,null,n)}inYRange(e,n){return Ym(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:i,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(n+i)/2:n,y:a?s:(s+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ut(Rl,"id","bar"),ut(Rl,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ut(Rl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function $M(t,e,n){const s=t.segments,i=t.points,a=e.points,o=[];for(const c of s){let{start:u,end:f}=c;f=Oh(u,f,i);const h=wg(n,i[u],i[f],c.loop);if(!e.segments){o.push({source:c,target:h,start:i[u],end:i[f]});continue}const p=wk(e,h);for(const m of p){const g=wg(n,a[m.start],a[m.end],m.loop),y=bk(c,i,g);for(const b of y)o.push({source:b,target:m,start:{[n]:B2(h,g,"start",Math.max)},end:{[n]:B2(h,g,"end",Math.min)}})}}return o}function wg(t,e,n,s){if(s)return;let i=e[t],a=n[t];return t==="angle"&&(i=Rr(i),a=Rr(a)),{property:t,start:i,end:a}}function VM(t,e){const{x:n=null,y:s=null}=t||{},i=e.points,a=[];return e.segments.forEach(({start:o,end:c})=>{c=Oh(o,c,i);const u=i[o],f=i[c];s!==null?(a.push({x:u.x,y:s}),a.push({x:f.x,y:s})):n!==null&&(a.push({x:n,y:u.y}),a.push({x:n,y:f.y}))}),a}function Oh(t,e,n){for(;e>t;e--){const s=n[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function B2(t,e,n,s){return t&&e?s(t[n],e[n]):t?t[n]:e?e[n]:0}function Ik(t,e){let n=[],s=!1;return dn(t)?(s=!0,n=t):n=VM(t,e),n.length?new $i({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function q2(t){return t&&t.fill!==!1}function YM(t,e,n){let i=t[e].fill;const a=[e];let o;if(!n)return i;for(;i!==!1&&a.indexOf(i)===-1;){if(!er(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;a.push(i),i=o.fill}return!1}function KM(t,e,n){const s=JM(t);if(Bt(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return er(i)&&Math.floor(i)===i?GM(s[0],e,i,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function GM(t,e,n,s){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=s?!1:n}function XM(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Bt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function QM(t,e,n){let s;return t==="start"?s=n:t==="end"?s=e.options.reverse?e.min:e.max:Bt(t)?s=t.value:s=e.getBaseValue(),s}function JM(t){const e=t.options,n=e.fill;let s=Rt(n&&n.target,n);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function ZM(t){const{scale:e,index:n,line:s}=t,i=[],a=s.segments,o=s.points,c=eP(e,n);c.push(Ik({x:null,y:e.bottom},s));for(let u=0;u<a.length;u++){const f=a[u];for(let h=f.start;h<=f.end;h++)tP(i,o[h],c)}return new $i({points:i,options:{}})}function eP(t,e){const n=[],s=t.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const a=s[i];if(a.index===e)break;a.hidden||n.unshift(a.dataset)}return n}function tP(t,e,n){const s=[];for(let i=0;i<n.length;i++){const a=n[i],{first:o,last:c,point:u}=nP(a,e,"x");if(!(!u||o&&c)){if(o)s.unshift(u);else if(t.push(u),!c)break}}t.push(...s)}function nP(t,e,n){const s=t.interpolate(e,n);if(!s)return{};const i=s[n],a=t.segments,o=t.points;let c=!1,u=!1;for(let f=0;f<a.length;f++){const h=a[f],p=o[h.start][n],m=o[h.end][n];if(Ui(i,p,m)){c=i===p,u=i===m;break}}return{first:c,last:u,point:s}}class Fk{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,s){const{x:i,y:a,radius:o}=this;return n=n||{start:0,end:wn},e.arc(i,a,o,n.end,n.start,!0),!s.bounds}interpolate(e){const{x:n,y:s,radius:i}=this,a=e.angle;return{x:n+Math.cos(a)*i,y:s+Math.sin(a)*i,angle:a}}}function rP(t){const{chart:e,fill:n,line:s}=t;if(er(n))return sP(e,n);if(n==="stack")return ZM(t);if(n==="shape")return!0;const i=iP(t);return i instanceof Fk?i:Ik(i,s)}function sP(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function iP(t){return(t.scale||{}).getPointPositionForValue?oP(t):aP(t)}function aP(t){const{scale:e={},fill:n}=t,s=XM(n,e);if(er(s)){const i=e.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function oP(t){const{scale:e,fill:n}=t,s=e.options,i=e.getLabels().length,a=s.reverse?e.max:e.min,o=QM(n,e,a),c=[];if(s.grid.circular){const u=e.getPointPositionForValue(0,a);return new Fk({x:u.x,y:u.y,radius:e.getDistanceFromCenterForValue(o)})}for(let u=0;u<i;++u)c.push(e.getPointPositionForValue(u,o));return c}function Gm(t,e,n){const s=rP(e),{chart:i,index:a,line:o,scale:c,axis:u}=e,f=o.options,h=f.fill,p=f.backgroundColor,{above:m=p,below:g=p}=h||{},y=i.getDatasetMeta(a),b=jk(i,y);s&&o.points.length&&(Vd(t,n),lP(t,{line:o,target:s,above:m,below:g,area:n,scale:c,axis:u,clip:b}),Yd(t))}function lP(t,e){const{line:n,target:s,above:i,below:a,area:o,scale:c,clip:u}=e,f=n._loop?"angle":e.axis;t.save();let h=a;a!==i&&(f==="x"?(W2(t,s,o.top),Xm(t,{line:n,target:s,color:i,scale:c,property:f,clip:u}),t.restore(),t.save(),W2(t,s,o.bottom)):f==="y"&&(U2(t,s,o.left),Xm(t,{line:n,target:s,color:a,scale:c,property:f,clip:u}),t.restore(),t.save(),U2(t,s,o.right),h=i)),Xm(t,{line:n,target:s,color:h,scale:c,property:f,clip:u}),t.restore()}function W2(t,e,n){const{segments:s,points:i}=e;let a=!0,o=!1;t.beginPath();for(const c of s){const{start:u,end:f}=c,h=i[u],p=i[Oh(u,f,i)];a?(t.moveTo(h.x,h.y),a=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,c,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function U2(t,e,n){const{segments:s,points:i}=e;let a=!0,o=!1;t.beginPath();for(const c of s){const{start:u,end:f}=c,h=i[u],p=i[Oh(u,f,i)];a?(t.moveTo(h.x,h.y),a=!1):(t.lineTo(n,h.y),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,c,{move:o}),o?t.closePath():t.lineTo(n,p.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Xm(t,e){const{line:n,target:s,property:i,color:a,scale:o,clip:c}=e,u=$M(n,s,i);for(const{source:f,target:h,start:p,end:m}of u){const{style:{backgroundColor:g=a}={}}=f,y=s!==!0;t.save(),t.fillStyle=g,cP(t,o,c,y&&wg(i,p,m)),t.beginPath();const b=!!n.pathSegment(t,f);let v;if(y){b?t.closePath():H2(t,s,m,i);const w=!!s.pathSegment(t,h,{move:b,reverse:!0});v=b&&w,v||H2(t,s,p,i)}t.closePath(),t.fill(v?"evenodd":"nonzero"),t.restore()}}function cP(t,e,n,s){const i=e.chart.chartArea,{property:a,start:o,end:c}=s||{};if(a==="x"||a==="y"){let u,f,h,p;a==="x"?(u=o,f=i.top,h=c,p=i.bottom):(u=i.left,f=o,h=i.right,p=c),t.beginPath(),n&&(u=Math.max(u,n.left),h=Math.min(h,n.right),f=Math.max(f,n.top),p=Math.min(p,n.bottom)),t.rect(u,f,h-u,p-f),t.clip()}}function H2(t,e,n,s){const i=e.interpolate(n,s);i&&t.lineTo(i.x,i.y)}var zk={id:"filler",afterDatasetsUpdate(t,e,n){const s=(t.data.datasets||[]).length,i=[];let a,o,c,u;for(o=0;o<s;++o)a=t.getDatasetMeta(o),c=a.dataset,u=null,c&&c.options&&c instanceof $i&&(u={visible:t.isDatasetVisible(o),index:o,fill:KM(c,o,s),chart:t,axis:a.controller.options.indexAxis,scale:a.vScale,line:c}),a.$filler=u,i.push(u);for(o=0;o<s;++o)u=i[o],!(!u||u.fill===!1)&&(u.fill=YM(i,o,n.propagate))},beforeDraw(t,e,n){const s=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),a=t.chartArea;for(let o=i.length-1;o>=0;--o){const c=i[o].$filler;c&&(c.line.updateControlPoints(a,c.axis),s&&c.fill&&Gm(t.ctx,c,a))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=t.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const a=s[i].$filler;q2(a)&&Gm(t.ctx,a,t.chartArea)}},beforeDatasetDraw(t,e,n){const s=e.meta.$filler;!q2(s)||n.drawTime!=="beforeDatasetDraw"||Gm(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const $2=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},dP=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class V2 extends xr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=cn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,i)=>e.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,i=qn(s.font),a=i.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=$2(s,a);let f,h;n.font=i.string,this.isHorizontal()?(f=this.maxWidth,h=this._fitRows(o,a,c,u)+10):(h=this.maxHeight,f=this._fitCols(o,i,c,u)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,i){const{ctx:a,maxWidth:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],f=this.lineWidths=[0],h=i+c;let p=e;a.textAlign="left",a.textBaseline="middle";let m=-1,g=-h;return this.legendItems.forEach((y,b)=>{const v=s+n/2+a.measureText(y.text).width;(b===0||f[f.length-1]+v+2*c>o)&&(p+=h,f[f.length-(b>0?0:1)]=0,g+=h,m++),u[b]={left:0,top:g,row:m,width:v,height:i},f[f.length-1]+=v+c}),p}_fitCols(e,n,s,i){const{ctx:a,maxHeight:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],f=this.columnSizes=[],h=o-e;let p=c,m=0,g=0,y=0,b=0;return this.legendItems.forEach((v,w)=>{const{itemWidth:N,itemHeight:k}=uP(s,n,a,v,i);w>0&&g+k+2*c>h&&(p+=m+c,f.push({width:m,height:g}),y+=m+c,b++,m=g=0),u[w]={left:y,top:g,col:b,width:N,height:k},m=Math.max(m,N),g+=k+c}),p+=m,f.push({width:m,height:g}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:a}}=this,o=Ml(a,this.left,this.width);if(this.isHorizontal()){let c=0,u=Pr(s,this.left+i,this.right-this.lineWidths[c]);for(const f of n)c!==f.row&&(c=f.row,u=Pr(s,this.left+i,this.right-this.lineWidths[c])),f.top+=this.top+e+i,f.left=o.leftForLtr(o.x(u),f.width),u+=f.width+i}else{let c=0,u=Pr(s,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const f of n)f.col!==c&&(c=f.col,u=Pr(s,this.top+e+i,this.bottom-this.columnSizes[c].height)),f.top=u,f.left+=this.left+i,f.left=o.leftForLtr(o.x(f.left),f.width),u+=f.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Vd(e,this),this._draw(),Yd(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:i}=this,{align:a,labels:o}=e,c=Dn.color,u=Ml(e.rtl,this.left,this.width),f=qn(o.font),{padding:h}=o,p=f.size,m=p/2;let g;this.drawTitle(),i.textAlign=u.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=f.string;const{boxWidth:y,boxHeight:b,itemHeight:v}=$2(o,p),w=function(C,O,M){if(isNaN(y)||y<=0||isNaN(b)||b<0)return;i.save();const B=Rt(M.lineWidth,1);if(i.fillStyle=Rt(M.fillStyle,c),i.lineCap=Rt(M.lineCap,"butt"),i.lineDashOffset=Rt(M.lineDashOffset,0),i.lineJoin=Rt(M.lineJoin,"miter"),i.lineWidth=B,i.strokeStyle=Rt(M.strokeStyle,c),i.setLineDash(Rt(M.lineDash,[])),o.usePointStyle){const I={radius:b*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:B},R=u.xPlus(C,y/2),P=O+m;dk(i,I,R,P,o.pointStyleWidth&&y)}else{const I=O+Math.max((p-b)/2,0),R=u.leftForLtr(C,y),P=za(M.borderRadius);i.beginPath(),Object.values(P).some(q=>q!==0)?Ql(i,{x:R,y:I,w:y,h:b,radius:P}):i.rect(R,I,y,b),i.fill(),B!==0&&i.stroke()}i.restore()},N=function(C,O,M){Vo(i,M.text,C,O+v/2,f,{strikethrough:M.hidden,textAlign:u.textAlign(M.textAlign)})},k=this.isHorizontal(),j=this._computeTitleHeight();k?g={x:Pr(a,this.left+h,this.right-s[0]),y:this.top+h+j,line:0}:g={x:this.left+h,y:Pr(a,this.top+j+h,this.bottom-n[0].height),line:0},gk(this.ctx,e.textDirection);const S=v+h;this.legendItems.forEach((C,O)=>{i.strokeStyle=C.fontColor,i.fillStyle=C.fontColor;const M=i.measureText(C.text).width,B=u.textAlign(C.textAlign||(C.textAlign=o.textAlign)),I=y+m+M;let R=g.x,P=g.y;u.setWidth(this.width),k?O>0&&R+I+h>this.right&&(P=g.y+=S,g.line++,R=g.x=Pr(a,this.left+h,this.right-s[g.line])):O>0&&P+S>this.bottom&&(R=g.x=R+n[g.line].width+h,g.line++,P=g.y=Pr(a,this.top+j+h,this.bottom-n[g.line].height));const q=u.x(R);if(w(q,P,C),R=W6(B,R+y+m,k?R+I:this.right,e.rtl),N(u.x(R),P,C),k)g.x+=I+h;else if(typeof C.text!="string"){const H=f.lineHeight;g.y+=Bk(C,H)+h}else g.y+=S}),yk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=qn(n.font),i=Xn(n.padding);if(!n.display)return;const a=Ml(e.rtl,this.left,this.width),o=this.ctx,c=n.position,u=s.size/2,f=i.top+u;let h,p=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+f,p=Pr(e.align,p,this.right-m);else{const y=this.columnSizes.reduce((b,v)=>Math.max(b,v.height),0);h=f+Pr(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const g=Pr(c,p,p+m);o.textAlign=a.textAlign(fy(c)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Vo(o,n.text,g,h,s)}_computeTitleHeight(){const e=this.options.title,n=qn(e.font),s=Xn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,i,a;if(Ui(e,this.left,this.right)&&Ui(n,this.top,this.bottom)){for(a=this.legendHitBoxes,s=0;s<a.length;++s)if(i=a[s],Ui(e,i.left,i.left+i.width)&&Ui(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!pP(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,a=dP(i,s);i&&!a&&cn(n.onLeave,[e,i,this],this),this._hoveredItem=s,s&&!a&&cn(n.onHover,[e,s,this],this)}else s&&cn(n.onClick,[e,s,this],this)}}function uP(t,e,n,s,i){const a=fP(s,t,e,n),o=hP(i,s,e.lineHeight);return{itemWidth:a,itemHeight:o}}function fP(t,e,n,s){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((a,o)=>a.length>o.length?a:o)),e+n.size/2+s.measureText(i).width}function hP(t,e,n){let s=t;return typeof e.text!="string"&&(s=Bk(e,n)),s}function Bk(t,e){const n=t.text?t.text.length:0;return e*n}function pP(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var qk={id:"legend",_element:V2,start(t,e,n){const s=t.legend=new V2({ctx:t.ctx,options:n,chart:t});Rs.configure(t,s,n),Rs.addBox(t,s)},stop(t){Rs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Rs.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),e.hidden=!0):(i.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:a,useBorderRadius:o,borderRadius:c}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const f=u.controller.getStyle(n?0:void 0),h=Xn(f.borderWidth);return{text:e[u.index].label,fillStyle:f.backgroundColor,fontColor:a,hidden:!u.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:f.borderColor,pointStyle:s||f.pointStyle,rotation:f.rotation,textAlign:i||f.textAlign,borderRadius:o&&(c||f.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Wk extends xr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=dn(s.text)?s.text.length:1;this._padding=Xn(s.padding);const a=i*qn(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:i,right:a,options:o}=this,c=o.align;let u=0,f,h,p;return this.isHorizontal()?(h=Pr(c,s,a),p=n+e,f=a-s):(o.position==="left"?(h=s+e,p=Pr(c,i,n),u=Wt*-.5):(h=a-e,p=Pr(c,n,i),u=Wt*.5),f=i-n),{titleX:h,titleY:p,maxWidth:f,rotation:u}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=qn(n.font),a=s.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:u,rotation:f}=this._drawArgs(a);Vo(e,n.text,0,0,s,{color:n.color,maxWidth:u,rotation:f,textAlign:fy(n.align),textBaseline:"middle",translation:[o,c]})}}function mP(t,e){const n=new Wk({ctx:t.ctx,options:e,chart:t});Rs.configure(t,n,e),Rs.addBox(t,n),t.titleBlock=n}var Uk={id:"title",_element:Wk,start(t,e,n){mP(t,n)},stop(t){const e=t.titleBlock;Rs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Rs.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const cd={average(t){if(!t.length)return!1;let e,n,s=new Set,i=0,a=0;for(e=0,n=t.length;e<n;++e){const c=t[e].element;if(c&&c.hasValue()){const u=c.tooltipPosition();s.add(u.x),i+=u.y,++a}}return a===0||s.size===0?!1:{x:[...s].reduce((c,u)=>c+u)/s.size,y:i/a}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,i=Number.POSITIVE_INFINITY,a,o,c;for(a=0,o=t.length;a<o;++a){const u=t[a].element;if(u&&u.hasValue()){const f=u.getCenterPoint(),h=Xl(e,f);h<i&&(i=h,c=u)}}if(c){const u=c.tooltipPosition();n=u.x,s=u.y}return{x:n,y:s}}};function hi(t,e){return e&&(dn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Di(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function xP(t,e){const{element:n,datasetIndex:s,index:i}=e,a=t.getDatasetMeta(s).controller,{label:o,value:c}=a.getLabelAndValue(i);return{chart:t,label:o,parsed:a.getParsed(i),raw:t.data.datasets[s].data[i],formattedValue:c,dataset:a.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function Y2(t,e){const n=t.chart.ctx,{body:s,footer:i,title:a}=t,{boxWidth:o,boxHeight:c}=e,u=qn(e.bodyFont),f=qn(e.titleFont),h=qn(e.footerFont),p=a.length,m=i.length,g=s.length,y=Xn(e.padding);let b=y.height,v=0,w=s.reduce((j,S)=>j+S.before.length+S.lines.length+S.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,p&&(b+=p*f.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),w){const j=e.displayColors?Math.max(c,u.lineHeight):u.lineHeight;b+=g*j+(w-g)*u.lineHeight+(w-1)*e.bodySpacing}m&&(b+=e.footerMarginTop+m*h.lineHeight+(m-1)*e.footerSpacing);let N=0;const k=function(j){v=Math.max(v,n.measureText(j).width+N)};return n.save(),n.font=f.string,un(t.title,k),n.font=u.string,un(t.beforeBody.concat(t.afterBody),k),N=e.displayColors?o+2+e.boxPadding:0,un(s,j=>{un(j.before,k),un(j.lines,k),un(j.after,k)}),N=0,n.font=h.string,un(t.footer,k),n.restore(),v+=y.width,{width:v,height:b}}function gP(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function yP(t,e,n,s){const{x:i,width:a}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&i+a+o>e.width||t==="right"&&i-a-o<0)return!0}function vP(t,e,n,s){const{x:i,width:a}=n,{width:o,chartArea:{left:c,right:u}}=t;let f="center";return s==="center"?f=i<=(c+u)/2?"left":"right":i<=a/2?f="left":i>=o-a/2&&(f="right"),yP(f,t,e,n)&&(f="center"),f}function K2(t,e,n){const s=n.yAlign||e.yAlign||gP(t,n);return{xAlign:n.xAlign||e.xAlign||vP(t,e,n,s),yAlign:s}}function bP(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function wP(t,e,n){let{y:s,height:i}=t;return e==="top"?s+=n:e==="bottom"?s-=i+n:s-=i/2,s}function G2(t,e,n,s){const{caretSize:i,caretPadding:a,cornerRadius:o}=t,{xAlign:c,yAlign:u}=n,f=i+a,{topLeft:h,topRight:p,bottomLeft:m,bottomRight:g}=za(o);let y=bP(e,c);const b=wP(e,u,f);return u==="center"?c==="left"?y+=f:c==="right"&&(y-=f):c==="left"?y-=Math.max(h,m)+i:c==="right"&&(y+=Math.max(p,g)+i),{x:as(y,0,s.width-e.width),y:as(b,0,s.height-e.height)}}function kf(t,e,n){const s=Xn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function X2(t){return hi([],Di(t))}function jP(t,e,n){return Ya(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Q2(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Hk={beforeTitle:Pi,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:Pi,beforeBody:Pi,beforeLabel:Pi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return nn(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Pi,afterBody:Pi,beforeFooter:Pi,footer:Pi,afterFooter:Pi};function Zr(t,e,n,s){const i=t[e].call(n,s);return typeof i>"u"?Hk[e].call(n,s):i}class jg extends xr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,a=new jy(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=jP(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,i=Zr(s,"beforeTitle",this,e),a=Zr(s,"title",this,e),o=Zr(s,"afterTitle",this,e);let c=[];return c=hi(c,Di(i)),c=hi(c,Di(a)),c=hi(c,Di(o)),c}getBeforeBody(e,n){return X2(Zr(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,i=[];return un(e,a=>{const o={before:[],lines:[],after:[]},c=Q2(s,a);hi(o.before,Di(Zr(c,"beforeLabel",this,a))),hi(o.lines,Zr(c,"label",this,a)),hi(o.after,Di(Zr(c,"afterLabel",this,a))),i.push(o)}),i}getAfterBody(e,n){return X2(Zr(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,i=Zr(s,"beforeFooter",this,e),a=Zr(s,"footer",this,e),o=Zr(s,"afterFooter",this,e);let c=[];return c=hi(c,Di(i)),c=hi(c,Di(a)),c=hi(c,Di(o)),c}_createItems(e){const n=this._active,s=this.chart.data,i=[],a=[],o=[];let c=[],u,f;for(u=0,f=n.length;u<f;++u)c.push(xP(this.chart,n[u]));return e.filter&&(c=c.filter((h,p,m)=>e.filter(h,p,m,s))),e.itemSort&&(c=c.sort((h,p)=>e.itemSort(h,p,s))),un(c,h=>{const p=Q2(e.callbacks,h);i.push(Zr(p,"labelColor",this,h)),a.push(Zr(p,"labelPointStyle",this,h)),o.push(Zr(p,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=c,c}update(e,n){const s=this.options.setContext(this.getContext()),i=this._active;let a,o=[];if(!i.length)this.opacity!==0&&(a={opacity:0});else{const c=cd[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const u=this._size=Y2(this,s),f=Object.assign({},c,u),h=K2(this.chart,s,f),p=G2(s,f,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,a={opacity:1,x:p.x,y:p.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,i){const a=this.getCaretPosition(e,s,i);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(e,n,s){const{xAlign:i,yAlign:a}=this,{caretSize:o,cornerRadius:c}=s,{topLeft:u,topRight:f,bottomLeft:h,bottomRight:p}=za(c),{x:m,y:g}=e,{width:y,height:b}=n;let v,w,N,k,j,S;return a==="center"?(j=g+b/2,i==="left"?(v=m,w=v-o,k=j+o,S=j-o):(v=m+y,w=v+o,k=j-o,S=j+o),N=v):(i==="left"?w=m+Math.max(u,h)+o:i==="right"?w=m+y-Math.max(f,p)-o:w=this.caretX,a==="top"?(k=g,j=k-o,v=w-o,N=w+o):(k=g+b,j=k+o,v=w+o,N=w-o),S=k),{x1:v,x2:w,x3:N,y1:k,y2:j,y3:S}}drawTitle(e,n,s){const i=this.title,a=i.length;let o,c,u;if(a){const f=Ml(s.rtl,this.x,this.width);for(e.x=kf(this,s.titleAlign,s),n.textAlign=f.textAlign(s.titleAlign),n.textBaseline="middle",o=qn(s.titleFont),c=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,u=0;u<a;++u)n.fillText(i[u],f.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+c,u+1===a&&(e.y+=s.titleMarginBottom-c)}}_drawColorBox(e,n,s,i,a){const o=this.labelColors[s],c=this.labelPointStyles[s],{boxHeight:u,boxWidth:f}=a,h=qn(a.bodyFont),p=kf(this,"left",a),m=i.x(p),g=u<h.lineHeight?(h.lineHeight-u)/2:0,y=n.y+g;if(a.usePointStyle){const b={radius:Math.min(f,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},v=i.leftForLtr(m,f)+f/2,w=y+u/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,xg(e,b,v,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,xg(e,b,v,w)}else{e.lineWidth=Bt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=i.leftForLtr(m,f),v=i.leftForLtr(i.xPlus(m,1),f-2),w=za(o.borderRadius);Object.values(w).some(N=>N!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Ql(e,{x:b,y,w:f,h:u,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Ql(e,{x:v,y:y+1,w:f-2,h:u-2,radius:w}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(b,y,f,u),e.strokeRect(b,y,f,u),e.fillStyle=o.backgroundColor,e.fillRect(v,y+1,f-2,u-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:i}=this,{bodySpacing:a,bodyAlign:o,displayColors:c,boxHeight:u,boxWidth:f,boxPadding:h}=s,p=qn(s.bodyFont);let m=p.lineHeight,g=0;const y=Ml(s.rtl,this.x,this.width),b=function(M){n.fillText(M,y.x(e.x+g),e.y+m/2),e.y+=m+a},v=y.textAlign(o);let w,N,k,j,S,C,O;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=kf(this,v,s),n.fillStyle=s.bodyColor,un(this.beforeBody,b),g=c&&v!=="right"?o==="center"?f/2+h:f+2+h:0,j=0,C=i.length;j<C;++j){for(w=i[j],N=this.labelTextColors[j],n.fillStyle=N,un(w.before,b),k=w.lines,c&&k.length&&(this._drawColorBox(n,e,j,y,s),m=Math.max(p.lineHeight,u)),S=0,O=k.length;S<O;++S)b(k[S]),m=p.lineHeight;un(w.after,b)}g=0,m=p.lineHeight,un(this.afterBody,b),e.y-=a}drawFooter(e,n,s){const i=this.footer,a=i.length;let o,c;if(a){const u=Ml(s.rtl,this.x,this.width);for(e.x=kf(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=u.textAlign(s.footerAlign),n.textBaseline="middle",o=qn(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,c=0;c<a;++c)n.fillText(i[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,i){const{xAlign:a,yAlign:o}=this,{x:c,y:u}=e,{width:f,height:h}=s,{topLeft:p,topRight:m,bottomLeft:g,bottomRight:y}=za(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(c+p,u),o==="top"&&this.drawCaret(e,n,s,i),n.lineTo(c+f-m,u),n.quadraticCurveTo(c+f,u,c+f,u+m),o==="center"&&a==="right"&&this.drawCaret(e,n,s,i),n.lineTo(c+f,u+h-y),n.quadraticCurveTo(c+f,u+h,c+f-y,u+h),o==="bottom"&&this.drawCaret(e,n,s,i),n.lineTo(c+g,u+h),n.quadraticCurveTo(c,u+h,c,u+h-g),o==="center"&&a==="left"&&this.drawCaret(e,n,s,i),n.lineTo(c,u+p),n.quadraticCurveTo(c,u,c+p,u),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,i=s&&s.x,a=s&&s.y;if(i||a){const o=cd[e.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=Y2(this,e),u=Object.assign({},o,this._size),f=K2(n,e,u),h=G2(e,u,f,n);(i._to!==h.x||a._to!==h.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},a={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Xn(n.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&c&&(e.save(),e.globalAlpha=s,this.drawBackground(a,e,i,n),gk(e,n.textDirection),a.y+=o.top,this.drawTitle(a,e,n),this.drawBody(a,e,n),this.drawFooter(a,e,n),yk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,i=e.map(({datasetIndex:c,index:u})=>{const f=this.chart.getDatasetMeta(c);if(!f)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:f.data[u],index:u}}),a=!Jf(s,i),o=this._positionChanged(i,n);(a||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,a=this._active||[],o=this._getActiveElements(e,a,n,s),c=this._positionChanged(o,e),u=n||!Jf(o,a)||c;return u&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),u}_getActiveElements(e,n,s,i){const a=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,a.mode,a,s);return a.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:i,options:a}=this,o=cd[a.position].call(this,e,n);return o!==!1&&(s!==o.x||i!==o.y)}}ut(jg,"positioners",cd);var $k={id:"tooltip",_element:jg,positioners:cd,afterInit(t,e,n){n&&(t.tooltip=new jg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Hk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const NP=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function _P(t,e,n,s){const i=t.indexOf(e);if(i===-1)return NP(t,e,n,s);const a=t.lastIndexOf(e);return i!==a?n:i}const kP=(t,e)=>t===null?null:as(Math.round(t),0,e);function J2(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class oh extends oc{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:a}of n)s[i]===a&&s.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(nn(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:_P(s,e,Rt(n,e),this._addedLabels),kP(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,i=[];let a=this.getLabels();a=e===0&&n===a.length-1?a:a.slice(e,n+1),this._valueRange=Math.max(a.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return J2.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ut(oh,"id","category"),ut(oh,"defaults",{ticks:{callback:J2}});function SP(t,e){const n=[],{bounds:i,step:a,min:o,max:c,precision:u,count:f,maxTicks:h,maxDigits:p,includeBounds:m}=t,g=a||1,y=h-1,{min:b,max:v}=e,w=!nn(o),N=!nn(c),k=!nn(f),j=(v-b)/(p+1);let S=X1((v-b)/y/g)*g,C,O,M,B;if(S<1e-14&&!w&&!N)return[{value:b},{value:v}];B=Math.ceil(v/S)-Math.floor(b/S),B>y&&(S=X1(B*S/y/g)*g),nn(u)||(C=Math.pow(10,u),S=Math.ceil(S*C)/C),i==="ticks"?(O=Math.floor(b/S)*S,M=Math.ceil(v/S)*S):(O=b,M=v),w&&N&&a&&R6((c-o)/a,S/1e3)?(B=Math.round(Math.min((c-o)/S,h)),S=(c-o)/B,O=o,M=c):k?(O=w?o:O,M=N?c:M,B=f-1,S=(M-O)/B):(B=(M-O)/S,md(B,Math.round(B),S/1e3)?B=Math.round(B):B=Math.ceil(B));const I=Math.max(Q1(S),Q1(O));C=Math.pow(10,nn(u)?I:u),O=Math.round(O*C)/C,M=Math.round(M*C)/C;let R=0;for(w&&(m&&O!==o?(n.push({value:o}),O<o&&R++,md(Math.round((O+R*S)*C)/C,o,Z2(o,j,t))&&R++):O<o&&R++);R<B;++R){const P=Math.round((O+R*S)*C)/C;if(N&&P>c)break;n.push({value:P})}return N&&m&&M!==c?n.length&&md(n[n.length-1].value,c,Z2(c,j,t))?n[n.length-1].value=c:n.push({value:c}):(!N||M===c)&&n.push({value:M}),n}function Z2(t,e,{horizontal:n,minRotation:s}){const i=or(s),a=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/a,o)}class Ng extends oc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return nn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:a}=this;const o=u=>i=n?i:u,c=u=>a=s?a:u;if(e){const u=yi(i),f=yi(a);u<0&&f<0?c(0):u>0&&f>0&&o(0)}if(i===a){let u=a===0?1:Math.abs(a*.05);c(a+u),e||o(i-u)}this.min=i,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},a=this._range||this,o=SP(i,a);return e.bounds==="ticks"&&T6(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const i=(s-n)/Math.max(e.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return py(e,this.chart.options.locale,this.options.ticks.format)}}class lh extends Ng{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=er(e)?e:0,this.max=er(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=or(this.options.ticks.minRotation),i=(e?Math.sin(s):Math.cos(s))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,a.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ut(lh,"id","linear"),ut(lh,"defaults",{ticks:{callback:my.formatters.numeric}});function _g(t){const e=t.ticks;if(e.display&&t.display){const n=Xn(e.backdropPadding);return Rt(e.font&&e.font.size,Dn.font.size)+n.height}return 0}function CP(t,e,n){return n=dn(n)?n:[n],{w:Z6(t,e.string,n),h:n.length*e.lineHeight}}function ew(t,e,n,s,i){return t===s||t===i?{start:e-n/2,end:e+n/2}:t<s||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function AP(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),s=[],i=[],a=t._pointLabels.length,o=t.options.pointLabels,c=o.centerPointLabels?Wt/a:0;for(let u=0;u<a;u++){const f=o.setContext(t.getPointLabelContext(u));i[u]=f.padding;const h=t.getPointPosition(u,t.drawingArea+i[u],c),p=qn(f.font),m=CP(t.ctx,p,t._pointLabels[u]);s[u]=m;const g=Rr(t.getIndexAngle(u)+c),y=Math.round(Ah(g)),b=ew(y,h.x,m.w,0,180),v=ew(y,h.y,m.h,90,270);EP(n,e,g,b,v)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=MP(t,s,i)}function EP(t,e,n,s,i){const a=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let c=0,u=0;s.start<e.l?(c=(e.l-s.start)/a,t.l=Math.min(t.l,e.l-c)):s.end>e.r&&(c=(s.end-e.r)/a,t.r=Math.max(t.r,e.r+c)),i.start<e.t?(u=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-u)):i.end>e.b&&(u=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+u))}function LP(t,e,n){const s=t.drawingArea,{extra:i,additionalAngle:a,padding:o,size:c}=n,u=t.getPointPosition(e,s+i+o,a),f=Math.round(Ah(Rr(u.angle+Mn))),h=TP(u.y,c.h,f),p=PP(f),m=RP(u.x,c.w,p);return{visible:!0,x:u.x,y:h,textAlign:p,left:m,top:h,right:m+c.w,bottom:h+c.h}}function OP(t,e){if(!e)return!0;const{left:n,top:s,right:i,bottom:a}=t;return!(Hi({x:n,y:s},e)||Hi({x:n,y:a},e)||Hi({x:i,y:s},e)||Hi({x:i,y:a},e))}function MP(t,e,n){const s=[],i=t._pointLabels.length,a=t.options,{centerPointLabels:o,display:c}=a.pointLabels,u={extra:_g(a)/2,additionalAngle:o?Wt/i:0};let f;for(let h=0;h<i;h++){u.padding=n[h],u.size=e[h];const p=LP(t,h,u);s.push(p),c==="auto"&&(p.visible=OP(p,f),p.visible&&(f=p))}return s}function PP(t){return t===0||t===180?"center":t<180?"left":"right"}function RP(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function TP(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function DP(t,e,n){const{left:s,top:i,right:a,bottom:o}=n,{backdropColor:c}=e;if(!nn(c)){const u=za(e.borderRadius),f=Xn(e.backdropPadding);t.fillStyle=c;const h=s-f.left,p=i-f.top,m=a-s+f.width,g=o-i+f.height;Object.values(u).some(y=>y!==0)?(t.beginPath(),Ql(t,{x:h,y:p,w:m,h:g,radius:u}),t.fill()):t.fillRect(h,p,m,g)}}function IP(t,e){const{ctx:n,options:{pointLabels:s}}=t;for(let i=e-1;i>=0;i--){const a=t._pointLabelItems[i];if(!a.visible)continue;const o=s.setContext(t.getPointLabelContext(i));DP(n,o,a);const c=qn(o.font),{x:u,y:f,textAlign:h}=a;Vo(n,t._pointLabels[i],u,f+c.lineHeight/2,c,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Vk(t,e,n,s){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,wn);else{let a=t.getPointPosition(0,e);i.moveTo(a.x,a.y);for(let o=1;o<s;o++)a=t.getPointPosition(o,e),i.lineTo(a.x,a.y)}}function FP(t,e,n,s,i){const a=t.ctx,o=e.circular,{color:c,lineWidth:u}=e;!o&&!s||!c||!u||n<0||(a.save(),a.strokeStyle=c,a.lineWidth=u,a.setLineDash(i.dash||[]),a.lineDashOffset=i.dashOffset,a.beginPath(),Vk(t,n,o,s),a.closePath(),a.stroke(),a.restore())}function zP(t,e,n){return Ya(t,{label:n,index:e,type:"pointLabel"})}class dd extends Ng{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Xn(_g(this.options)/2),n=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=er(e)&&!isNaN(e)?e:0,this.max=er(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/_g(this.options))}generateTickLabels(e){Ng.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,s)=>{const i=cn(this.options.pointLabels.callback,[n,s],this);return i||i===0?i:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?AP(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,s,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,s,i))}getIndexAngle(e){const n=wn/(this._pointLabels.length||1),s=this.options.startAngle||0;return Rr(e*n+or(s))}getDistanceFromCenterForValue(e){if(nn(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(nn(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const s=n[e];return zP(this.getContext(),e,s)}}getPointPosition(e,n,s=0){const i=this.getIndexAngle(e)-Mn+s;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:s,right:i,bottom:a}=this._pointLabelItems[e];return{left:n,top:s,right:i,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),Vk(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:s,grid:i,border:a}=n,o=this._pointLabels.length;let c,u,f;if(n.pointLabels.display&&IP(this,o),i.display&&this.ticks.forEach((h,p)=>{if(p!==0||p===0&&this.min<0){u=this.getDistanceFromCenterForValue(h.value);const m=this.getContext(p),g=i.setContext(m),y=a.setContext(m);FP(this,g,u,o,y)}}),s.display){for(e.save(),c=o-1;c>=0;c--){const h=s.setContext(this.getPointLabelContext(c)),{color:p,lineWidth:m}=h;!m||!p||(e.lineWidth=m,e.strokeStyle=p,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,u=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),f=this.getPointPosition(c,u),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(f.x,f.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let a,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((c,u)=>{if(u===0&&this.min>=0&&!n.reverse)return;const f=s.setContext(this.getContext(u)),h=qn(f.font);if(a=this.getDistanceFromCenterForValue(this.ticks[u].value),f.showLabelBackdrop){e.font=h.string,o=e.measureText(c.label).width,e.fillStyle=f.backdropColor;const p=Xn(f.backdropPadding);e.fillRect(-o/2-p.left,-a-h.size/2-p.top,o+p.width,h.size+p.height)}Vo(e,c.label,0,-a,h,{color:f.color,strokeColor:f.textStrokeColor,strokeWidth:f.textStrokeWidth})}),e.restore()}drawTitle(){}}ut(dd,"id","radialLinear"),ut(dd,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:my.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ut(dd,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ut(dd,"descriptors",{angleLines:{_fallback:"grid"}});const Mh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},is=Object.keys(Mh);function tw(t,e){return t-e}function nw(t,e){if(nn(e))return null;const n=t._adapter,{parser:s,round:i,isoWeekday:a}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),er(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Gl(a)||a===!0)?n.startOf(o,"isoWeek",a):n.startOf(o,i)),+o)}function rw(t,e,n,s){const i=is.length;for(let a=is.indexOf(t);a<i-1;++a){const o=Mh[is[a]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(c*o.size))<=s)return is[a]}return is[i-1]}function BP(t,e,n,s,i){for(let a=is.length-1;a>=is.indexOf(n);a--){const o=is[a];if(Mh[o].common&&t._adapter.diff(i,s,o)>=e-1)return o}return is[n?is.indexOf(n):0]}function qP(t){for(let e=is.indexOf(t)+1,n=is.length;e<n;++e)if(Mh[is[e]].common)return is[e]}function sw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:i}=uy(n,e),a=n[s]>=e?n[s]:n[i];t[a]=!0}}function WP(t,e,n,s){const i=t._adapter,a=+i.startOf(e[0].value,s),o=e[e.length-1].value;let c,u;for(c=a;c<=o;c=+i.add(c,1,s))u=n[c],u>=0&&(e[u].major=!0);return e}function iw(t,e,n){const s=[],i={},a=e.length;let o,c;for(o=0;o<a;++o)c=e[o],i[c]=o,s.push({value:c,major:!1});return a===0||!n?s:WP(t,s,i,n)}class ch extends oc{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),i=this._adapter=new xO._date(e.adapters.date);i.init(n),pd(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:nw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:i,max:a,minDefined:o,maxDefined:c}=this.getUserBounds();function u(f){!o&&!isNaN(f.min)&&(i=Math.min(i,f.min)),!c&&!isNaN(f.max)&&(a=Math.max(a,f.max))}(!o||!c)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),i=er(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),a=er(a)&&!isNaN(a)?a:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const a=this.min,o=this.max,c=z6(i,a,o);return this._unit=n.unit||(s.autoSkip?rw(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):BP(this,c.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:qP(this._unit),this.initOffsets(i),e.reverse&&c.reverse(),iw(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,i,a;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?s=a:s=(a-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=as(n,0,o),s=as(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,i=this.options,a=i.time,o=a.unit||rw(a.minUnit,n,s,this._getLabelCapacity(n)),c=Rt(i.ticks.stepSize,1),u=o==="week"?a.isoWeekday:!1,f=Gl(u)||u===!0,h={};let p=n,m,g;if(f&&(p=+e.startOf(p,"isoWeek",u)),p=+e.startOf(p,f?"day":o),e.diff(s,n,o)>1e5*c)throw new Error(n+" and "+s+" are too far apart with stepSize of "+c+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(m=p,g=0;m<s;m=+e.add(m,c,o),g++)sw(h,m,y);return(m===s||i.bounds==="ticks"||g===1)&&sw(h,m,y),Object.keys(h).sort(tw).map(b=>+b)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,a=this._unit,o=n||i[a];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,i){const a=this.options,o=a.ticks.callback;if(o)return cn(o,[e,n,s],this);const c=a.time.displayFormats,u=this._unit,f=this._majorUnit,h=u&&c[u],p=f&&c[f],m=s[n],g=f&&p&&m&&m.major;return this._adapter.format(e,i||(g?p:h))}generateTickLabels(e){let n,s,i;for(n=0,s=e.length;n<s;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,i=or(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(i),o=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:s*a+c*o,h:s*o+c*a}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,a=this._tickFormatFunction(e,0,iw(this,[e],this._majorUnit),i),o=this._getLabelSize(a),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)e.push(nw(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ok(e.sort(tw))}}ut(ch,"id","time"),ut(ch,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Sf(t,e,n){let s=0,i=t.length-1,a,o,c,u;n?(e>=t[s].pos&&e<=t[i].pos&&({lo:s,hi:i}=pg(t,"pos",e)),{pos:a,time:c}=t[s],{pos:o,time:u}=t[i]):(e>=t[s].time&&e<=t[i].time&&({lo:s,hi:i}=pg(t,"time",e)),{time:a,pos:c}=t[s],{time:o,pos:u}=t[i]);const f=o-a;return f?c+(u-c)*(e-a)/f:c}class aw extends ch{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Sf(n,this.min),this._tableRange=Sf(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,i=[],a=[];let o,c,u,f,h;for(o=0,c=e.length;o<c;++o)f=e[o],f>=n&&f<=s&&i.push(f);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,c=i.length;o<c;++o)h=i[o+1],u=i[o-1],f=i[o],Math.round((h+u)/2)!==f&&a.push({time:f,pos:o/(c-1)});return a}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,a)=>i-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Sf(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Sf(this._table,s*this._tableRange+this._minPos,!0)}}ut(aw,"id","timeseries"),ut(aw,"defaults",ch.defaults);/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var ow=(function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1})(),yd={toTextLines:function(t){var e=[],n;for(t=[].concat(t);t.length;)n=t.pop(),typeof n=="string"?e.unshift.apply(e,n.split(`
`)):Array.isArray(n)?t.push.apply(t,n):nn(t)||e.unshift(""+n);return e},textSize:function(t,e,n){var s=[].concat(e),i=s.length,a=t.font,o=0,c;for(t.font=n.string,c=0;c<i;++c)o=Math.max(t.measureText(s[c]).width,o);return t.font=a,{height:i*n.lineHeight,width:o}},bound:function(t,e,n){return Math.max(t,Math.min(e,n))},arrayDiff:function(t,e){var n=t.slice(),s=[],i,a,o,c;for(i=0,o=e.length;i<o;++i)c=e[i],a=n.indexOf(c),a===-1?s.push([c,1]):n.splice(a,1);for(i=0,o=n.length;i<o;++i)s.push([n[i],-1]);return s},rasterize:function(t){return Math.round(t*ow)/ow}};function Qm(t,e){var n=e.x,s=e.y;if(n===null)return{x:0,y:-1};if(s===null)return{x:1,y:0};var i=t.x-n,a=t.y-s,o=Math.sqrt(i*i+a*a);return{x:o?i/o:0,y:o?a/o:-1}}function UP(t,e,n,s,i){switch(i){case"center":n=s=0;break;case"bottom":n=0,s=1;break;case"right":n=1,s=0;break;case"left":n=-1,s=0;break;case"top":n=0,s=-1;break;case"start":n=-n,s=-s;break;case"end":break;default:i*=Math.PI/180,n=Math.cos(i),s=Math.sin(i);break}return{x:t,y:e,vx:n,vy:s}}var HP=0,Yk=1,Kk=2,Gk=4,Xk=8;function Cf(t,e,n){var s=HP;return t<n.left?s|=Yk:t>n.right&&(s|=Kk),e<n.top?s|=Xk:e>n.bottom&&(s|=Gk),s}function $P(t,e){for(var n=t.x0,s=t.y0,i=t.x1,a=t.y1,o=Cf(n,s,e),c=Cf(i,a,e),u,f,h;!(!(o|c)||o&c);)u=o||c,u&Xk?(f=n+(i-n)*(e.top-s)/(a-s),h=e.top):u&Gk?(f=n+(i-n)*(e.bottom-s)/(a-s),h=e.bottom):u&Kk?(h=s+(a-s)*(e.right-n)/(i-n),f=e.right):u&Yk&&(h=s+(a-s)*(e.left-n)/(i-n),f=e.left),u===o?(n=f,s=h,o=Cf(n,s,e)):(i=f,a=h,c=Cf(i,a,e));return{x0:n,x1:i,y0:s,y1:a}}function Af(t,e){var n=e.anchor,s=t,i,a;return e.clamp&&(s=$P(s,e.area)),n==="start"?(i=s.x0,a=s.y0):n==="end"?(i=s.x1,a=s.y1):(i=(s.x0+s.x1)/2,a=(s.y0+s.y1)/2),UP(i,a,t.vx,t.vy,e.align)}var Ef={arc:function(t,e){var n=(t.startAngle+t.endAngle)/2,s=Math.cos(n),i=Math.sin(n),a=t.innerRadius,o=t.outerRadius;return Af({x0:t.x+s*a,y0:t.y+i*a,x1:t.x+s*o,y1:t.y+i*o,vx:s,vy:i},e)},point:function(t,e){var n=Qm(t,e.origin),s=n.x*t.options.radius,i=n.y*t.options.radius;return Af({x0:t.x-s,y0:t.y-i,x1:t.x+s,y1:t.y+i,vx:n.x,vy:n.y},e)},bar:function(t,e){var n=Qm(t,e.origin),s=t.x,i=t.y,a=0,o=0;return t.horizontal?(s=Math.min(t.x,t.base),a=Math.abs(t.base-t.x)):(i=Math.min(t.y,t.base),o=Math.abs(t.base-t.y)),Af({x0:s,y0:i+o,x1:s+a,y1:i,vx:n.x,vy:n.y},e)},fallback:function(t,e){var n=Qm(t,e.origin);return Af({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:n.x,vy:n.y},e)}},Vi=yd.rasterize;function VP(t){var e=t.borderWidth||0,n=t.padding,s=t.size.height,i=t.size.width,a=-i/2,o=-s/2;return{frame:{x:a-n.left-e,y:o-n.top-e,w:i+n.width+e*2,h:s+n.height+e*2},text:{x:a,y:o,w:i,h:s}}}function YP(t,e){var n=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var s=n.getBasePixel();return t.horizontal?{x:s,y:null}:{x:null,y:s}}function KP(t){return t instanceof Ao?Ef.arc:t instanceof Pl?Ef.point:t instanceof Rl?Ef.bar:Ef.fallback}function GP(t,e,n,s,i,a){var o=Math.PI/2;if(a){var c=Math.min(a,i/2,s/2),u=e+c,f=n+c,h=e+s-c,p=n+i-c;t.moveTo(e,f),u<h&&f<p?(t.arc(u,f,c,-Math.PI,-o),t.arc(h,f,c,-o,0),t.arc(h,p,c,0,o),t.arc(u,p,c,o,Math.PI)):u<h?(t.moveTo(u,n),t.arc(h,f,c,-o,o),t.arc(u,f,c,o,Math.PI+o)):f<p?(t.arc(u,f,c,-Math.PI,0),t.arc(u,p,c,0,Math.PI)):t.arc(u,f,c,-Math.PI,Math.PI),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,s,i)}function XP(t,e,n){var s=n.backgroundColor,i=n.borderColor,a=n.borderWidth;!s&&(!i||!a)||(t.beginPath(),GP(t,Vi(e.x)+a/2,Vi(e.y)+a/2,Vi(e.w)-a,Vi(e.h)-a,n.borderRadius),t.closePath(),s&&(t.fillStyle=s,t.fill()),i&&a&&(t.strokeStyle=i,t.lineWidth=a,t.lineJoin="miter",t.stroke()))}function QP(t,e,n){var s=n.lineHeight,i=t.w,a=t.x,o=t.y+s/2;return e==="center"?a+=i/2:(e==="end"||e==="right")&&(a+=i),{h:s,w:i,x:a,y:o}}function JP(t,e,n){var s=t.shadowBlur,i=n.stroked,a=Vi(n.x),o=Vi(n.y),c=Vi(n.w);i&&t.strokeText(e,a,o,c),n.filled&&(s&&i&&(t.shadowBlur=0),t.fillText(e,a,o,c),s&&i&&(t.shadowBlur=s))}function ZP(t,e,n,s){var i=s.textAlign,a=s.color,o=!!a,c=s.font,u=e.length,f=s.textStrokeColor,h=s.textStrokeWidth,p=f&&h,m;if(!(!u||!o&&!p))for(n=QP(n,i,c),t.font=c.string,t.textAlign=i,t.textBaseline="middle",t.shadowBlur=s.textShadowBlur,t.shadowColor=s.textShadowColor,o&&(t.fillStyle=a),p&&(t.lineJoin="round",t.lineWidth=h,t.strokeStyle=f),m=0,u=e.length;m<u;++m)JP(t,e[m],{stroked:p,filled:o,w:n.w,x:n.x,y:n.y+n.h*m})}var Qk=function(t,e,n,s){var i=this;i._config=t,i._index=s,i._model=null,i._rects=null,i._ctx=e,i._el=n};vi(Qk.prototype,{_modelize:function(t,e,n,s){var i=this,a=i._index,o=qn(Rn([n.font,{}],s,a)),c=Rn([n.color,Dn.color],s,a);return{align:Rn([n.align,"center"],s,a),anchor:Rn([n.anchor,"center"],s,a),area:s.chart.chartArea,backgroundColor:Rn([n.backgroundColor,null],s,a),borderColor:Rn([n.borderColor,null],s,a),borderRadius:Rn([n.borderRadius,0],s,a),borderWidth:Rn([n.borderWidth,0],s,a),clamp:Rn([n.clamp,!1],s,a),clip:Rn([n.clip,!1],s,a),color:c,display:t,font:o,lines:e,offset:Rn([n.offset,4],s,a),opacity:Rn([n.opacity,1],s,a),origin:YP(i._el,s),padding:Xn(Rn([n.padding,4],s,a)),positioner:KP(i._el),rotation:Rn([n.rotation,0],s,a)*(Math.PI/180),size:yd.textSize(i._ctx,e,o),textAlign:Rn([n.textAlign,"start"],s,a),textShadowBlur:Rn([n.textShadowBlur,0],s,a),textShadowColor:Rn([n.textShadowColor,c],s,a),textStrokeColor:Rn([n.textStrokeColor,c],s,a),textStrokeWidth:Rn([n.textStrokeWidth,0],s,a)}},update:function(t){var e=this,n=null,s=null,i=e._index,a=e._config,o,c,u,f=Rn([a.display,!0],t,i);f&&(o=t.dataset.data[i],c=Rt(cn(a.formatter,[o,t]),o),u=nn(c)?[]:yd.toTextLines(c),u.length&&(n=e._modelize(f,u,a,t),s=VP(n))),e._model=n,e._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var n=this,s=t.ctx,i=n._model,a=n._rects,o;this.visible()&&(s.save(),i.clip&&(o=i.area,s.beginPath(),s.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),s.clip()),s.globalAlpha=yd.bound(0,i.opacity,1),s.translate(Vi(e.x),Vi(e.y)),s.rotate(i.rotation),XP(s,a.frame,i),ZP(s,i.lines,a.text,i),s.restore())}});var eR=Number.MIN_SAFE_INTEGER||-9007199254740991,tR=Number.MAX_SAFE_INTEGER||9007199254740991;function Jc(t,e,n){var s=Math.cos(n),i=Math.sin(n),a=e.x,o=e.y;return{x:a+s*(t.x-a)-i*(t.y-o),y:o+i*(t.x-a)+s*(t.y-o)}}function lw(t,e){var n=tR,s=eR,i=e.origin,a,o,c,u,f;for(a=0;a<t.length;++a)o=t[a],c=o.x-i.x,u=o.y-i.y,f=e.vx*c+e.vy*u,n=Math.min(n,f),s=Math.max(s,f);return{min:n,max:s}}function Lf(t,e){var n=e.x-t.x,s=e.y-t.y,i=Math.sqrt(n*n+s*s);return{vx:(e.x-t.x)/i,vy:(e.y-t.y)/i,origin:t,ln:i}}var Jk=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};vi(Jk.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,n){this._rotation=n,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this,n=1,s=e._rect;return t=Jc(t,e.center(),-e._rotation),!(t.x<s.x-n||t.y<s.y-n||t.x>s.x+s.w+n*2||t.y>s.y+s.h+n*2)},intersects:function(t){var e=this._points(),n=t._points(),s=[Lf(e[0],e[1]),Lf(e[0],e[3])],i,a,o;for(this._rotation!==t._rotation&&s.push(Lf(n[0],n[1]),Lf(n[0],n[3])),i=0;i<s.length;++i)if(a=lw(e,s[i]),o=lw(n,s[i]),a.max<o.min||o.max<a.min)return!1;return!0},_points:function(){var t=this,e=t._rect,n=t._rotation,s=t.center();return[Jc({x:e.x,y:e.y},s,n),Jc({x:e.x+e.w,y:e.y},s,n),Jc({x:e.x+e.w,y:e.y+e.h},s,n),Jc({x:e.x,y:e.y+e.h},s,n)]}});function Zk(t,e,n){var s=e.positioner(t,e),i=s.vx,a=s.vy;if(!i&&!a)return{x:s.x,y:s.y};var o=n.w,c=n.h,u=e.rotation,f=Math.abs(o/2*Math.cos(u))+Math.abs(c/2*Math.sin(u)),h=Math.abs(o/2*Math.sin(u))+Math.abs(c/2*Math.cos(u)),p=1/Math.max(Math.abs(i),Math.abs(a));return f*=i*p,h*=a*p,f+=e.offset*i,h+=e.offset*a,{x:s.x+f,y:s.y+h}}function nR(t,e){var n,s,i,a;for(n=t.length-1;n>=0;--n)for(i=t[n].$layout,s=n-1;s>=0&&i._visible;--s)a=t[s].$layout,a._visible&&i._box.intersects(a._box)&&e(i,a);return t}function rR(t){var e,n,s,i,a,o,c;for(e=0,n=t.length;e<n;++e)s=t[e],i=s.$layout,i._visible&&(c=new Proxy(s._el,{get:(u,f)=>u.getProps([f],!0)[f]}),a=s.geometry(),o=Zk(c,s.model(),a),i._box.update(o,a,s.rotation()));return nR(t,function(u,f){var h=u._hidable,p=f._hidable;h&&p||p?f._visible=!1:h&&(u._visible=!1)})}var vd={prepare:function(t){var e=[],n,s,i,a,o;for(n=0,i=t.length;n<i;++n)for(s=0,a=t[n].length;s<a;++s)o=t[n][s],e.push(o),o.$layout={_box:new Jk,_hidable:!1,_visible:!0,_set:n,_idx:o._index};return e.sort(function(c,u){var f=c.$layout,h=u.$layout;return f._idx===h._idx?h._set-f._set:h._idx-f._idx}),this.update(e),e},update:function(t){var e=!1,n,s,i,a,o;for(n=0,s=t.length;n<s;++n)i=t[n],a=i.model(),o=i.$layout,o._hidable=a&&a.display==="auto",o._visible=i.visible(),e|=o._hidable;e&&rR(t)},lookup:function(t,e){var n,s;for(n=t.length-1;n>=0;--n)if(s=t[n].$layout,s&&s._visible&&s._box.contains(e))return t[n];return null},draw:function(t,e){var n,s,i,a,o,c;for(n=0,s=e.length;n<s;++n)i=e[n],a=i.$layout,a._visible&&(o=i.geometry(),c=Zk(i._el,i.model(),o),a._box.update(c,o,i.rotation()),i.draw(t,c))}},sR=function(t){if(nn(t))return null;var e=t,n,s,i;if(Bt(t))if(!nn(t.label))e=t.label;else if(!nn(t.r))e=t.r;else for(e="",n=Object.keys(t),i=0,s=n.length;i<s;++i)e+=(i!==0?", ":"")+n[i]+": "+t[n[i]];return""+e},iR={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:sR,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},es="$datalabels",e5="$default";function aR(t,e){var n=t.datalabels,s={},i=[],a,o;return n===!1?null:(n===!0&&(n={}),e=vi({},[e,n]),a=e.labels||{},o=Object.keys(a),delete e.labels,o.length?o.forEach(function(c){a[c]&&i.push(vi({},[e,a[c],{_key:c}]))}):i.push(e),s=i.reduce(function(c,u){return un(u.listeners||{},function(f,h){c[h]=c[h]||{},c[h][u._key||e5]=f}),delete u.listeners,c},{}),{labels:i,listeners:s})}function kg(t,e,n,s){if(e){var i=n.$context,a=n.$groups,o;e[a._set]&&(o=e[a._set][a._key],o&&cn(o,[i,s])===!0&&(t[es]._dirty=!0,n.update(i)))}}function oR(t,e,n,s,i){var a,o;!n&&!s||(n?s?n!==s&&(o=a=!0):o=!0:a=!0,o&&kg(t,e.leave,n,i),a&&kg(t,e.enter,s,i))}function lR(t,e){var n=t[es],s=n._listeners,i,a;if(!(!s.enter&&!s.leave)){if(e.type==="mousemove")a=vd.lookup(n._labels,e);else if(e.type!=="mouseout")return;i=n._hovered,n._hovered=a,oR(t,s,i,a,e)}}function cR(t,e){var n=t[es],s=n._listeners.click,i=s&&vd.lookup(n._labels,e);i&&kg(t,s,i,e)}var dR={id:"datalabels",defaults:iR,beforeInit:function(t){t[es]={_actives:[]}},beforeUpdate:function(t){var e=t[es];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,n){var s=e.index,i=t[es],a=i._datasets[s]=[],o=t.isDatasetVisible(s),c=t.data.datasets[s],u=aR(c,n),f=e.meta.data||[],h=t.ctx,p,m,g,y,b,v,w,N;for(h.save(),p=0,g=f.length;p<g;++p)if(w=f[p],w[es]=[],o&&w&&t.getDataVisibility(p)&&!w.skip)for(m=0,y=u.labels.length;m<y;++m)b=u.labels[m],v=b._key,N=new Qk(b,h,w,p),N.$groups={_set:s,_key:v||e5},N.$context={active:!1,chart:t,dataIndex:p,dataset:c,datasetIndex:s},N.update(N.$context),w[es].push(N),a.push(N);h.restore(),vi(i._listeners,u.listeners,{merger:function(k,j,S){j[k]=j[k]||{},j[k][e.index]=S[k],i._listened=!0}})},afterUpdate:function(t){t[es]._labels=vd.prepare(t[es]._datasets)},afterDatasetsDraw:function(t){vd.draw(t,t[es]._labels)},beforeEvent:function(t,e){if(t[es]._listened){var n=e.event;switch(n.type){case"mousemove":case"mouseout":lR(t,n);break;case"click":cR(t,n);break}}},afterEvent:function(t){var e=t[es],n=e._actives,s=e._actives=t.getActiveElements(),i=yd.arrayDiff(n,s),a,o,c,u,f,h,p;for(a=0,o=i.length;a<o;++a)if(f=i[a],f[1])for(p=f[0].element[es]||[],c=0,u=p.length;c<u;++c)h=p[c],h.$context.active=f[1]===1,h.update(h.$context);(e._dirty||i.length)&&(vd.update(e._labels),t.render()),delete e._dirty}};/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const cw={modes:{point(t,e){return Hf(t,e,{intersect:!0})},nearest(t,e,n){return hR(t,e,n)},x(t,e,n){return Hf(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return Hf(t,e,{intersect:n.intersect,axis:"y"})}}};function _y(t,e,n){return(cw.modes[n.mode]||cw.modes.nearest)(t,e,n)}function uR(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function fR(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function Hf(t,e,n){return t.filter(s=>n.intersect?s.inRange(e.x,e.y):uR(s,e,n.axis))}function hR(t,e,n){let s=Number.POSITIVE_INFINITY;return Hf(t,e,n).reduce((i,a)=>{const o=a.getCenterPoint(),c=fR(e,o,n.axis),u=Xl(e,c);return u<s?(i=[a],s=u):u===s&&i.push(a),i},[]).sort((i,a)=>i._index-a._index).slice(0,1)}function Xo(t,e,n){const s=Math.cos(n),i=Math.sin(n),a=e.x,o=e.y;return{x:a+s*(t.x-a)-i*(t.y-o),y:o+i*(t.x-a)+s*(t.y-o)}}const pR=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Eo=.001,Ph=(t,e,n)=>Math.min(n,Math.max(e,t)),t5=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function mR(t,e,n){for(const s of Object.keys(t))t[s]=Ph(t[s],e,n);return t}function xR(t,e,n,s){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function n5(t,{x:e,y:n,x2:s,y2:i},a,{borderWidth:o,hitTolerance:c}){const u=(o+c)/2,f=t.x>=e-u-Eo&&t.x<=s+u+Eo,h=t.y>=n-u-Eo&&t.y<=i+u+Eo;return a==="x"?f:(a==="y"||f)&&h}function r5(t,{rect:e,center:n},s,{rotation:i,borderWidth:a,hitTolerance:o}){const c=Xo(t,n,or(-i));return n5(c,e,s,{borderWidth:a,hitTolerance:o})}function Qo(t,e){const{centerX:n,centerY:s}=t.getProps(["centerX","centerY"],e);return{x:n,y:s}}function gR(t,e,n,s=!0){const i=n.split(".");let a=0;for(const o of e.split(".")){const c=i[a++];if(parseInt(o,10)<parseInt(c,10))break;if(pR(c,o)){if(s)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const s5=t=>typeof t=="string"&&t.endsWith("%"),i5=t=>parseFloat(t)/100,a5=t=>Ph(i5(t),0,1),Zc=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),yR={box:t=>Zc(t.centerX,t.centerY),doughnutLabel:t=>Zc(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>Zc(t.centerX,t.centerY),line:t=>Zc(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>Zc(t.centerX,t.centerY)};function ky(t,e){return e==="start"?0:e==="end"?t:s5(e)?a5(e)*t:t/2}function Ha(t,e,n=!0){return typeof e=="number"?e:s5(e)?(n?a5(e):i5(e))*t:t}function vR(t,e){const{x:n,width:s}=t,i=e.textAlign;return i==="center"?n+s/2:i==="end"||i==="right"?n+s:n}function o5(t,e,{borderWidth:n,position:s,xAdjust:i,yAdjust:a},o){const c=Bt(o),u=e.width+(c?o.width:0)+n,f=e.height+(c?o.height:0)+n,h=Sy(s),p=dw(t.x,u,i,h.x),m=dw(t.y,f,a,h.y);return{x:p,y:m,x2:p+u,y2:m+f,width:u,height:f,centerX:p+u/2,centerY:m+f/2}}function Sy(t,e="center"){return Bt(t)?{x:Rt(t.x,e),y:Rt(t.y,e)}:(t=Rt(t,e),{x:t,y:t})}const l5=(t,e)=>t&&t.autoFit&&e<1;function c5(t,e){const n=t.font,s=dn(n)?n:[n];return l5(t,e)?s.map(function(i){const a=qn(i);return a.size=Math.floor(i.size*e),a.lineHeight=i.lineHeight,qn(a)}):s.map(i=>qn(i))}function d5(t){return t&&(ds(t.xValue)||ds(t.yValue))}function dw(t,e,n=0,s){return t-ky(e,s)+n}function lc(t,e,n){const s=n.init;if(s){if(s===!0)return f5(e,n)}else return;return bR(t,e,n)}function u5(t,e,n){let s=!1;return e.forEach(i=>{cs(t[i])?(s=!0,n[i]=t[i]):ds(n[i])&&delete n[i]}),s}function f5(t,e){const n=e.type||"line";return yR[n](t)}function bR(t,e,n){const s=cn(n.init,[{chart:t,properties:e,options:n}]);if(s===!0)return f5(e,n);if(Bt(s))return s}const Jm=new Map,wR=t=>isNaN(t)||t<=0,jR=t=>t.reduce(function(e,n){return e+=n.string,e},"");function Rh(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function Th(t,{x:e,y:n},s){s&&(t.translate(e,n),t.rotate(or(s)),t.translate(-e,-n))}function Gi(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function cc(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function Dh(t,e){const n=e.content;if(Rh(n))return{width:Ha(n.width,e.width),height:Ha(n.height,e.height)};const s=c5(e),i=e.textStrokeWidth,a=dn(n)?n:[n],o=a.join()+jR(s)+i+(t._measureText?"-spriting":"");return Jm.has(o)||Jm.set(o,SR(t,a,s,i)),Jm.get(o)}function h5(t,e,n){const{x:s,y:i,width:a,height:o}=e;t.save(),cc(t,n);const c=Gi(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),Ql(t,{x:s,y:i,w:a,h:o,radius:mR(za(n.borderRadius),0,Math.min(a,o)/2)}),t.closePath(),t.fill(),c&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function p5(t,e,n,s){const i=n.content;if(Rh(i)){t.save(),t.globalAlpha=ER(n.opacity,i.style.opacity),t.drawImage(i,e.x,e.y,e.width,e.height),t.restore();return}const a=dn(i)?i:[i],o=c5(n,s),c=n.color,u=dn(c)?c:[c],f=vR(e,n),h=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,NR(t,n)&&CR(t,{x:f,y:h},a,o),AR(t,{x:f,y:h},a,{fonts:o,colors:u}),t.restore()}function NR(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function _R(t,e,n,s){const{radius:i,options:a}=e,o=a.pointStyle,c=a.rotation;let u=(c||0)*dy;if(Rh(o)){t.save(),t.translate(n,s),t.rotate(u),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}wR(i)||kR(t,{x:n,y:s,radius:i,rotation:c,style:o,rad:u})}function kR(t,{x:e,y:n,radius:s,rotation:i,style:a,rad:o}){let c,u,f,h;switch(t.beginPath(),a){default:t.arc(e,n,s,0,wn),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=th,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=th,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),t.closePath();break;case"rectRounded":h=s*.516,f=s-h,c=Math.cos(o+Ms)*f,u=Math.sin(o+Ms)*f,t.arc(e-c,n-u,h,o-Wt,o-Mn),t.arc(e+u,n-c,h,o-Mn,o),t.arc(e+c,n+u,h,o,o+Mn),t.arc(e-u,n+c,h,o+Mn,o+Wt),t.closePath();break;case"rect":if(!i){f=Math.SQRT1_2*s,t.rect(e-f,n-f,2*f,2*f);break}o+=Ms;case"rectRot":c=Math.cos(o)*s,u=Math.sin(o)*s,t.moveTo(e-c,n-u),t.lineTo(e+u,n-c),t.lineTo(e+c,n+u),t.lineTo(e-u,n+c),t.closePath();break;case"crossRot":o+=Ms;case"cross":c=Math.cos(o)*s,u=Math.sin(o)*s,t.moveTo(e-c,n-u),t.lineTo(e+c,n+u),t.moveTo(e+u,n-c),t.lineTo(e-u,n+c);break;case"star":c=Math.cos(o)*s,u=Math.sin(o)*s,t.moveTo(e-c,n-u),t.lineTo(e+c,n+u),t.moveTo(e+u,n-c),t.lineTo(e-u,n+c),o+=Ms,c=Math.cos(o)*s,u=Math.sin(o)*s,t.moveTo(e-c,n-u),t.lineTo(e+c,n+u),t.moveTo(e+u,n-c),t.lineTo(e-u,n+c);break;case"line":c=Math.cos(o)*s,u=Math.sin(o)*s,t.moveTo(e-c,n-u),t.lineTo(e+c,n+u);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*s,n+Math.sin(o)*s);break}t.fill()}function SR(t,e,n,s){t.save();const i=e.length;let a=0,o=s;for(let c=0;c<i;c++){const u=n[Math.min(c,n.length-1)];t.font=u.string;const f=e[c];a=Math.max(a,t.measureText(f).width+s),o+=u.lineHeight}return t.restore(),{width:a,height:o}}function CR(t,{x:e,y:n},s,i){t.beginPath();let a=0;s.forEach(function(o,c){const u=i[Math.min(c,i.length-1)],f=u.lineHeight;t.font=u.string,t.strokeText(o,e,n+f/2+a),a+=f}),t.stroke()}function AR(t,{x:e,y:n},s,{fonts:i,colors:a}){let o=0;s.forEach(function(c,u){const f=a[Math.min(u,a.length-1)],h=i[Math.min(u,i.length-1)],p=h.lineHeight;t.beginPath(),t.font=h.string,t.fillStyle=f,t.fillText(c,e,n+p/2+o),o+=p,t.fill()})}function ER(t,e){const n=Gl(t)?t:e;return Gl(n)?Ph(n,0,1):1}const m5=["left","bottom","top","right"];function LR(t,e){const{pointX:n,pointY:s,options:i}=e,a=i.callout,o=a&&a.display&&TR(e,a);if(!o||IR(e,a,o))return;if(t.save(),t.beginPath(),!Gi(t,a))return t.restore();const{separatorStart:u,separatorEnd:f}=OR(e,o),{sideStart:h,sideEnd:p}=PR(e,o,u);(a.margin>0||i.borderWidth===0)&&(t.moveTo(u.x,u.y),t.lineTo(f.x,f.y)),t.moveTo(h.x,h.y),t.lineTo(p.x,p.y);const m=Xo({x:n,y:s},e.getCenterPoint(),or(-e.rotation));t.lineTo(m.x,m.y),t.stroke(),t.restore()}function OR(t,e){const{x:n,y:s,x2:i,y2:a}=t,o=MR(t,e);let c,u;return e==="left"||e==="right"?(c={x:n+o,y:s},u={x:c.x,y:a}):(c={x:n,y:s+o},u={x:i,y:c.y}),{separatorStart:c,separatorEnd:u}}function MR(t,e){const{width:n,height:s,options:i}=t,a=i.callout.margin+i.borderWidth/2;return e==="right"?n+a:e==="bottom"?s+a:-a}function PR(t,e,n){const{y:s,width:i,height:a,options:o}=t,c=o.callout.start,u=RR(e,o.callout);let f,h;return e==="left"||e==="right"?(f={x:n.x,y:s+Ha(a,c)},h={x:f.x+u,y:f.y}):(f={x:n.x+Ha(i,c),y:n.y},h={x:f.x,y:f.y+u}),{sideStart:f,sideEnd:h}}function RR(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function TR(t,e){const n=e.position;return m5.includes(n)?n:DR(t,e)}function DR(t,e){const{x:n,y:s,x2:i,y2:a,width:o,height:c,pointX:u,pointY:f,centerX:h,centerY:p,rotation:m}=t,g={x:h,y:p},y=e.start,b=Ha(o,y),v=Ha(c,y),w=[n,n+b,n+b,i],N=[s+v,a,s,a],k=[];for(let j=0;j<4;j++){const S=Xo({x:w[j],y:N[j]},g,or(m));k.push({position:m5[j],distance:Xl(S,{x:u,y:f})})}return k.sort((j,S)=>j.distance-S.distance)[0].position}function IR(t,e,n){const{pointX:s,pointY:i}=t,a=e.margin;let o=s,c=i;return n==="left"?o+=a:n==="right"?o-=a:n==="top"?c+=a:n==="bottom"&&(c-=a),t.inRange(o,c)}const uw={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function ec(t,e,n){return e=typeof e=="number"?e:t.parse(e),er(e)?t.getPixelForValue(e):n}function Yo(t,e,n){const s=e[n];if(s||n==="scaleID")return s;const i=n.charAt(0),a=Object.values(t).filter(o=>o.axis&&o.axis===i);return a.length?a[0].id:i}function x5(t,e){if(t){const n=t.options.reverse,s=ec(t,e.min,n?e.end:e.start),i=ec(t,e.max,n?e.start:e.end);return{start:s,end:i}}}function g5(t,e){const{chartArea:n,scales:s}=t,i=s[Yo(s,e,"xScaleID")],a=s[Yo(s,e,"yScaleID")];let o=n.width/2,c=n.height/2;return i&&(o=ec(i,e.xValue,i.left+i.width/2)),a&&(c=ec(a,e.yValue,a.top+a.height/2)),{x:o,y:c}}function Cy(t,e){const n=t.scales,s=n[Yo(n,e,"xScaleID")],i=n[Yo(n,e,"yScaleID")];if(!s&&!i)return{};let{left:a,right:o}=s||t.chartArea,{top:c,bottom:u}=i||t.chartArea;const f=fw(s,{min:e.xMin,max:e.xMax,start:a,end:o});a=f.start,o=f.end;const h=fw(i,{min:e.yMin,max:e.yMax,start:u,end:c});return c=h.start,u=h.end,{x:a,y:c,x2:o,y2:u,width:o-a,height:u-c,centerX:a+(o-a)/2,centerY:c+(u-c)/2}}function y5(t,e){if(!d5(e)){const n=Cy(t,e);let s=e.radius;(!s||isNaN(s))&&(s=Math.min(n.width,n.height)/2,e.radius=s);const i=s*2,a=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:a-s,y:o-s,x2:a+s,y2:o+s,centerX:a,centerY:o,width:i,height:i,radius:s}}return zR(t,e)}function FR(t,e){const{scales:n,chartArea:s}=t,i=n[e.scaleID],a={x:s.left,y:s.top,x2:s.right,y2:s.bottom};return i?BR(i,a,e):qR(n,a,e),a}function v5(t,e){const n=Cy(t,e);return n.initProperties=lc(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:HR(t,n,e),initProperties:n.initProperties}],n}function zR(t,e){const n=g5(t,e),s=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:s,height:s}}function fw(t,e){const n=x5(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function BR(t,e,n){const s=ec(t,n.value,NaN),i=ec(t,n.endValue,s);t.isHorizontal()?(e.x=s,e.x2=i):(e.y=s,e.y2=i)}function qR(t,e,n){for(const s of Object.keys(uw)){const i=t[Yo(t,n,s)];if(i){const{min:a,max:o,start:c,end:u,startProp:f,endProp:h}=uw[s],p=x5(i,{min:n[a],max:n[o],start:i[c],end:i[u]});e[f]=p.start,e[h]=p.end}}}function WR({properties:t,options:e},n,s,i){const{x:a,x2:o,width:c}=t;return b5({start:a,end:o,borderWidth:e.borderWidth},{position:s.x,padding:{start:i.left,end:i.right},adjust:e.label.xAdjust,size:n.width})}function UR({properties:t,options:e},n,s,i){const{y:a,y2:o,height:c}=t;return b5({start:a,end:o,borderWidth:e.borderWidth},{position:s.y,padding:{start:i.top,end:i.bottom},adjust:e.label.yAdjust,size:n.height})}function b5(t,e){const{start:n,end:s,borderWidth:i}=t,{position:a,padding:{start:o,end:c},adjust:u}=e,f=s-i-n-o-c-e.size;return n+i/2+u+ky(f,a)}function HR(t,e,n){const s=n.label;s.backgroundColor="transparent",s.callout.display=!1;const i=Sy(s.position),a=Xn(s.padding),o=Dh(t.ctx,s),c=WR({properties:e,options:n},o,i,a),u=UR({properties:e,options:n},o,i,a),f=o.width+a.width,h=o.height+a.height;return{x:c,y:u,x2:c+f,y2:u+h,width:f,height:h,centerX:c+f/2,centerY:u+h/2,rotation:s.rotation}}const Sg=["enter","leave"],Ay=Sg.concat("click");function $R(t,e,n){e.listened=u5(n,Ay,e.listeners),e.moveListened=!1,Sg.forEach(s=>{cs(n[s])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(s=>{!e.listened&&cs(s.click)&&(e.listened=!0),e.moveListened||Sg.forEach(i=>{cs(s[i])&&(e.listened=!0,e.moveListened=!0)})})}function VR(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return YR(t,e,n);case"click":return KR(t,e,n)}}function YR(t,e,n){if(!t.moveListened)return;let s;e.type==="mousemove"?s=_y(t.visibleElements,e,n.interaction):s=[];const i=t.hovered;t.hovered=s;const a={state:t,event:e};let o=hw(a,"leave",i,s);return hw(a,"enter",s,i)||o}function hw({state:t,event:e},n,s,i){let a;for(const o of s)i.indexOf(o)<0&&(a=w5(o.options[n]||t.listeners[n],o,e)||a);return a}function KR(t,e,n){const s=t.listeners,i=_y(t.visibleElements,e,n.interaction);let a;for(const o of i)a=w5(o.options.click||s.click,o,e)||a;return a}function w5(t,e,n){return cn(t,[e.$context,n])===!0}const dh=["afterDraw","beforeDraw"];function GR(t,e,n){const s=e.visibleElements;e.hooked=u5(n,dh,e.hooks),e.hooked||s.forEach(i=>{e.hooked||dh.forEach(a=>{cs(i.options[a])&&(e.hooked=!0)})})}function pw(t,e,n){if(t.hooked){const s=e.options[n]||t.hooks[n];return cn(s,[e.$context])}}function XR(t,e,n){const s=tT(t.scales,e,n);let i=mw(e,s,"min","suggestedMin");i=mw(e,s,"max","suggestedMax")||i,i&&cs(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function QR(t,e){for(const n of t)ZR(n,e)}function mw(t,e,n,s){if(er(e[n])&&!JR(t.options,n,s)){const i=t[n]!==e[n];return t[n]=e[n],i}}function JR(t,e,n){return ds(t[e])||ds(t[n])}function ZR(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const s=Yo(e,t,n);s&&!e[s]&&eT(t,n)&&console.warn(`No scale found with id '${s}' for annotation '${t.id}'`)}}function eT(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const s of["Min","Max","Value"])if(ds(t[n+s]))return!0;return!1}function tT(t,e,n){const s=e.axis,i=e.id,a=s+"ScaleID",o={min:Rt(e.min,Number.NEGATIVE_INFINITY),max:Rt(e.max,Number.POSITIVE_INFINITY)};for(const c of n)c.scaleID===i?xw(c,e,["value","endValue"],o):Yo(t,c,a)===i&&xw(c,e,[s+"Min",s+"Max",s+"Value"],o);return o}function xw(t,e,n,s){for(const i of n){const a=t[i];if(ds(a)){const o=e.parse(a);s.min=Math.min(s.min,o),s.max=Math.max(s.max,o)}}}class dc extends xr{inRange(e,n,s,i){const{x:a,y:o}=Xo({x:e,y:n},this.getCenterPoint(i),or(-this.options.rotation));return n5({x:a,y:o},this.getProps(["x","y","x2","y2"],i),s,this.options)}getCenterPoint(e){return Qo(this,e)}draw(e){e.save(),Th(e,this.getCenterPoint(),this.options.rotation),h5(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return v5(e,n)}}dc.id="boxAnnotation";dc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};dc.defaultRoutes={borderColor:"color",backgroundColor:"color"};dc.descriptors={label:{_fallback:!0}};class Ih extends xr{inRange(e,n,s,i){return r5({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},s,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Qo(this,e)}draw(e){const n=this.options;!n.display||!n.content||(oT(e,this),e.save(),Th(e,this.getCenterPoint(),this.rotation),p5(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const s=nT(e,n);if(!s)return{};const{controllerMeta:i,point:a,radius:o}=sT(e,n,s);let c=Dh(e.ctx,n);const u=iT(c,o);l5(n,u)&&(c={width:c.width*u,height:c.height*u});const{position:f,xAdjust:h,yAdjust:p}=n,m=o5(a,c,{borderWidth:0,position:f,xAdjust:h,yAdjust:p});return{initProperties:lc(e,m,n),...m,...i,rotation:n.rotation,_fitRatio:u}}}Ih.id="doughnutLabelAnnotation";Ih.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};Ih.defaultRoutes={};function nT(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,s){const i=s.controller;return i instanceof Co&&rT(t,e,s.data)&&(!n||i.innerRadius<n.controller.innerRadius)&&i.options.circumference>=90?s:n},void 0)}function rT(t,e,n){if(!e.autoHide)return!0;for(let s=0;s<n.length;s++)if(!n[s].hidden&&t.getDataVisibility(s))return!0}function sT({chartArea:t},e,n){const{left:s,top:i,right:a,bottom:o}=t,{innerRadius:c,offsetX:u,offsetY:f}=n.controller,h=(s+a)/2+u,p=(i+o)/2+f,m={left:Math.max(h-c,s),right:Math.min(h+c,a),top:Math.max(p-c,i),bottom:Math.min(p+c,o)},g={x:(m.left+m.right)/2,y:(m.top+m.bottom)/2},y=e.spacing+e.borderWidth/2,b=c-y,v=g.y>p,w=v?i+y:o-y,N=aT(w,h,p,b);return{controllerMeta:{_centerX:h,_centerY:p,_radius:b,_counterclockwise:v,...N},point:g,radius:Math.min(c,Math.min(m.right-m.left,m.bottom-m.top)/2)}}function iT({width:t,height:e},n){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/s}function aT(t,e,n,s){const i=Math.pow(n-t,2),a=Math.pow(s,2),o=e*-2,c=Math.pow(e,2)+i-a,u=Math.pow(o,2)-4*c;if(u<=0)return{_startAngle:0,_endAngle:wn};const f=(-o-Math.sqrt(u))/2,h=(-o+Math.sqrt(u))/2;return{_startAngle:nh({x:e,y:n},{x:f,y:t}).angle,_endAngle:nh({x:e,y:n},{x:h,y:t}).angle}}function oT(t,e){const{_centerX:n,_centerY:s,_radius:i,_startAngle:a,_endAngle:o,_counterclockwise:c,options:u}=e;t.save();const f=Gi(t,u);t.fillStyle=u.backgroundColor,t.beginPath(),t.arc(n,s,i,a,o,c),t.closePath(),t.fill(),f&&t.stroke(),t.restore()}class Kd extends xr{inRange(e,n,s,i){return r5({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},s,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Qo(this,e)}draw(e){const n=this.options,s=!ds(this._visible)||this._visible;!n.display||!n.content||!s||(e.save(),Th(e,this.getCenterPoint(),this.rotation),LR(e,this),h5(e,this,n),p5(e,lT(this),n),e.restore())}resolveElementProperties(e,n){let s;if(d5(n))s=g5(e,n);else{const{centerX:c,centerY:u}=Cy(e,n);s={x:c,y:u}}const i=Xn(n.padding),a=Dh(e.ctx,n),o=o5(s,a,n,i);return{initProperties:lc(e,o,n),pointX:s.x,pointY:s.y,...o,rotation:n.rotation}}}Kd.id="labelAnnotation";Kd.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Kd.defaultRoutes={borderColor:"color"};function lT({x:t,y:e,width:n,height:s,options:i}){const a=i.borderWidth/2,o=Xn(i.padding);return{x:t+o.left+a,y:e+o.top+a,width:n-o.left-o.right-i.borderWidth,height:s-o.top-o.bottom-i.borderWidth}}const Ey=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),Cg=(t,e,n)=>Ey(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,gw=(t,e,n)=>Ey(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,ud=t=>t*t,cT=(t,e,{x:n,y:s,x2:i,y2:a},o)=>o==="y"?{start:Math.min(s,a),end:Math.max(s,a),value:e}:{start:Math.min(n,i),end:Math.max(n,i),value:t},yw=(t,e,n,s)=>(1-s)*(1-s)*t+2*(1-s)*s*e+s*s*n,Ag=(t,e,n,s)=>({x:yw(t.x,e.x,n.x,s),y:yw(t.y,e.y,n.y,s)}),vw=(t,e,n,s)=>2*(1-s)*(e-t)+2*s*(n-e),bw=(t,e,n,s)=>-Math.atan2(vw(t.x,e.x,n.x,s),vw(t.y,e.y,n.y,s))+.5*Wt;class Gd extends xr{inRange(e,n,s,i){const a=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y"){const o={mouseX:e,mouseY:n},{path:c,ctx:u}=this;if(c){Gi(u,this.options),u.lineWidth+=this.options.hitTolerance;const{chart:h}=this.$context,p=e*h.currentDevicePixelRatio,m=n*h.currentDevicePixelRatio,g=u.isPointInStroke(c,p,m)||Eg(this,o,i);return u.restore(),g}const f=ud(a);return hT(this,o,f,i)||Eg(this,o,i)}return dT(this,{mouseX:e,mouseY:n},s,{hitSize:a,useFinalPosition:i})}getCenterPoint(e){return Qo(this,e)}draw(e){const{x:n,y:s,x2:i,y2:a,cp:o,options:c}=this;if(e.save(),!Gi(e,c))return e.restore();cc(e,c);const u=Math.sqrt(Math.pow(i-n,2)+Math.pow(a-s,2));if(c.curve&&o)return wT(e,this,o,u),e.restore();const{startOpts:f,endOpts:h,startAdjust:p,endAdjust:m}=j5(this),g=Math.atan2(a-s,i-n);e.translate(n,s),e.rotate(g),e.beginPath(),e.moveTo(0+p,0),e.lineTo(u-m,0),e.shadowColor=c.borderShadowColor,e.stroke(),Lg(e,0,p,f),Lg(e,u,-m,h),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const s=FR(e,n),{x:i,y:a,x2:o,y2:c}=s,u=uT(s,e.chartArea),f=u?fT({x:i,y:a},{x:o,y:c},e.chartArea):{x:i,y:a,x2:o,y2:c,width:Math.abs(o-i),height:Math.abs(c-a)};if(f.centerX=(o+i)/2,f.centerY=(c+a)/2,f.initProperties=lc(e,f,n),n.curve){const p={x:f.x,y:f.y},m={x:f.x2,y:f.y2};f.cp=bT(f,n,Xl(p,m))}const h=pT(e,f,n.label);return h._visible=u,f.elements=[{type:"label",optionScope:"label",properties:h,initProperties:f.initProperties}],f}}Gd.id="lineAnnotation";const ww={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Gd.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},ww),fill:!1,length:12,start:Object.assign({},ww),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Kd.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Gd.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Gd.defaultRoutes={borderColor:"color"};function dT(t,{mouseX:e,mouseY:n},s,{hitSize:i,useFinalPosition:a}){const o=cT(e,n,t.getProps(["x","y","x2","y2"],a),s);return t5(o,i)||Eg(t,{mouseX:e,mouseY:n},a,s)}function uT({x:t,y:e,x2:n,y2:s},{top:i,right:a,bottom:o,left:c}){return!(t<c&&n<c||t>a&&n>a||e<i&&s<i||e>o&&s>o)}function jw({x:t,y:e},n,{top:s,right:i,bottom:a,left:o}){return t<o&&(e=gw(o,{x:t,y:e},n),t=o),t>i&&(e=gw(i,{x:t,y:e},n),t=i),e<s&&(t=Cg(s,{x:t,y:e},n),e=s),e>a&&(t=Cg(a,{x:t,y:e},n),e=a),{x:t,y:e}}function fT(t,e,n){const{x:s,y:i}=jw(t,e,n),{x:a,y:o}=jw(e,t,n);return{x:s,y:i,x2:a,y2:o,width:Math.abs(a-s),height:Math.abs(o-i)}}function hT(t,{mouseX:e,mouseY:n},s=Eo,i){const{x:a,y:o,x2:c,y2:u}=t.getProps(["x","y","x2","y2"],i),f=c-a,h=u-o,p=ud(f)+ud(h),m=p===0?-1:((e-a)*f+(n-o)*h)/p;let g,y;return m<0?(g=a,y=o):m>1?(g=c,y=u):(g=a+m*f,y=o+m*h),ud(e-g)+ud(n-y)<=s}function Eg(t,{mouseX:e,mouseY:n},s,i){const a=t.label;return a.options.display&&a.inRange(e,n,i,s)}function pT(t,e,n){const s=n.borderWidth,i=Xn(n.padding),a=Dh(t.ctx,n),o=a.width+i.width+s,c=a.height+i.height+s;return xT(e,n,{width:o,height:c,padding:i},t.chartArea)}function mT(t){const{x:e,y:n,x2:s,y2:i}=t,a=Math.atan2(i-n,s-e);return a>Wt/2?a-Wt:a<Wt/-2?a+Wt:a}function xT(t,e,n,s){const{width:i,height:a,padding:o}=n,{xAdjust:c,yAdjust:u}=e,f={x:t.x,y:t.y},h={x:t.x2,y:t.y2},p=e.rotation==="auto"?mT(t):or(e.rotation),m=gT(i,a,p),g=yT(t,e,{labelSize:m,padding:o},s),y=t.cp?Ag(f,t.cp,h,g):Ey(f,h,g),b={size:m.w,min:s.left,max:s.right,padding:o.left},v={size:m.h,min:s.top,max:s.bottom,padding:o.top},w=_w(y.x,b)+c,N=_w(y.y,v)+u;return{x:w-i/2,y:N-a/2,x2:w+i/2,y2:N+a/2,centerX:w,centerY:N,pointX:y.x,pointY:y.y,width:i,height:a,rotation:Ah(p)}}function gT(t,e,n){const s=Math.cos(n),i=Math.sin(n);return{w:Math.abs(t*s)+Math.abs(e*i),h:Math.abs(t*i)+Math.abs(e*s)}}function yT(t,e,n,s){let i;const a=vT(t,s);return e.position==="start"?i=Nw({w:t.x2-t.x,h:t.y2-t.y},n,e,a):e.position==="end"?i=1-Nw({w:t.x-t.x2,h:t.y-t.y2},n,e,a):i=ky(1,e.position),i}function Nw(t,e,n,s){const{labelSize:i,padding:a}=e,o=t.w*s.dx,c=t.h*s.dy,u=o>0&&(i.w/2+a.left-s.x)/o,f=c>0&&(i.h/2+a.top-s.y)/c;return Ph(Math.max(u,f),0,.25)}function vT(t,e){const{x:n,x2:s,y:i,y2:a}=t,o=Math.min(i,a)-e.top,c=Math.min(n,s)-e.left,u=e.bottom-Math.max(i,a),f=e.right-Math.max(n,s);return{x:Math.min(c,f),y:Math.min(o,u),dx:c<=f?1:-1,dy:o<=u?1:-1}}function _w(t,e){const{size:n,min:s,max:i,padding:a}=e,o=n/2;return n>i-s?(i+s)/2:(s>=t-a-o&&(t=s+a+o),i<=t+a+o&&(t=i-a-o),t)}function j5(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,s=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:s,startAdjust:kw(t,n),endAdjust:kw(t,s)}}function kw(t,e){if(!e||!e.display)return 0;const{length:n,width:s}=e,i=t.options.borderWidth/2,a={x:n,y:s+i};return Math.abs(Cg(0,a,{x:0,y:i}))}function Lg(t,e,n,s){if(!s||!s.display)return;const{length:i,width:a,fill:o,backgroundColor:c,borderColor:u}=s,f=Math.abs(e-i)+n;t.beginPath(),cc(t,s),Gi(t,s),t.moveTo(f,-a),t.lineTo(e+n,0),t.lineTo(f,a),o===!0?(t.fillStyle=c||u,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=s.borderShadowColor,t.stroke()}function bT(t,e,n){const{x:s,y:i,x2:a,y2:o,centerX:c,centerY:u}=t,f=Math.atan2(o-i,a-s),h=Sy(e.controlPoint,0),p={x:c+Ha(n,h.x,!1),y:u+Ha(n,h.y,!1)};return Xo(p,{x:c,y:u},f)}function Sw(t,{x:e,y:n},{angle:s,adjust:i},a){!a||!a.display||(t.save(),t.translate(e,n),t.rotate(s),Lg(t,0,-i,a),t.restore())}function wT(t,e,n,s){const{x:i,y:a,x2:o,y2:c,options:u}=e,{startOpts:f,endOpts:h,startAdjust:p,endAdjust:m}=j5(e),g={x:i,y:a},y={x:o,y:c},b=bw(g,n,y,0),v=bw(g,n,y,1)-Wt,w=Ag(g,n,y,p/s),N=Ag(g,n,y,1-m/s),k=new Path2D;t.beginPath(),k.moveTo(w.x,w.y),k.quadraticCurveTo(n.x,n.y,N.x,N.y),t.shadowColor=u.borderShadowColor,t.stroke(k),e.path=k,e.ctx=t,Sw(t,w,{angle:b,adjust:p},f),Sw(t,N,{angle:v,adjust:m},h)}class Xd extends xr{inRange(e,n,s,i){const a=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y")return jT({x:e,y:n},this.getProps(["width","height","centerX","centerY"],i),a,o);const{x:c,y:u,x2:f,y2:h}=this.getProps(["x","y","x2","y2"],i),p=s==="y"?{start:u,end:h}:{start:c,end:f},m=Xo({x:e,y:n},this.getCenterPoint(i),or(-a));return m[s]>=p.start-o-Eo&&m[s]<=p.end+o+Eo}getCenterPoint(e){return Qo(this,e)}draw(e){const{width:n,height:s,centerX:i,centerY:a,options:o}=this;e.save(),Th(e,this.getCenterPoint(),o.rotation),cc(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const c=Gi(e,o);e.ellipse(i,a,s/2,n/2,Wt/2,0,2*Wt),e.fill(),c&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return v5(e,n)}}Xd.id="ellipseAnnotation";Xd.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},dc.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Xd.defaultRoutes={borderColor:"color",backgroundColor:"color"};Xd.descriptors={label:{_fallback:!0}};function jT(t,e,n,s){const{width:i,height:a,centerX:o,centerY:c}=e,u=i/2,f=a/2;if(u<=0||f<=0)return!1;const h=or(n||0),p=Math.cos(h),m=Math.sin(h),g=Math.pow(p*(t.x-o)+m*(t.y-c),2),y=Math.pow(m*(t.x-o)-p*(t.y-c),2);return g/Math.pow(u+s,2)+y/Math.pow(f+s,2)<=1.0001}class Fh extends xr{inRange(e,n,s,i){const{x:a,y:o,x2:c,y2:u,width:f}=this.getProps(["x","y","x2","y2","width"],i),h=(this.options.borderWidth+this.options.hitTolerance)/2;return s!=="x"&&s!=="y"?xR({x:e,y:n},this.getCenterPoint(i),f/2,h):t5(s==="y"?{start:o,end:u,value:n}:{start:a,end:c,value:e},h)}getCenterPoint(e){return Qo(this,e)}draw(e){const n=this.options,s=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,cc(e,n);const i=Gi(e,n);_R(e,this,this.centerX,this.centerY),i&&!Rh(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=s}resolveElementProperties(e,n){const s=y5(e,n);return s.initProperties=lc(e,s,n),s}}Fh.id="pointAnnotation";Fh.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Fh.defaultRoutes={borderColor:"color",backgroundColor:"color"};class zh extends xr{inRange(e,n,s,i){if(s!=="x"&&s!=="y")return this.options.radius>=.1&&this.elements.length>1&&_T(this.elements,e,n,i);const a=Xo({x:e,y:n},this.getCenterPoint(i),or(-this.options.rotation)),o=this.elements.map(f=>s==="y"?f.bY:f.bX),c=Math.min(...o),u=Math.max(...o);return a[s]>=c&&a[s]<=u}getCenterPoint(e){return Qo(this,e)}draw(e){const{elements:n,options:s}=this;e.save(),e.beginPath(),e.fillStyle=s.backgroundColor,cc(e,s);const i=Gi(e,s);let a=!0;for(const o of n)a?(e.moveTo(o.x,o.y),a=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),i&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const s=y5(e,n),{sides:i,rotation:a}=n,o=[],c=2*Wt/i;let u=a*dy;for(let f=0;f<i;f++,u+=c){const h=NT(s,n,u);h.initProperties=lc(e,s,n),o.push(h)}return s.elements=o,s}}zh.id="polygonAnnotation";zh.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};zh.defaultRoutes={borderColor:"color",backgroundColor:"color"};function NT({centerX:t,centerY:e},{radius:n,borderWidth:s,hitTolerance:i},a){const o=(s+i)/2,c=Math.sin(a),u=Math.cos(a),f={x:t+c*n,y:e-u*n};return{type:"point",optionScope:"point",properties:{x:f.x,y:f.y,centerX:f.x,centerY:f.y,bX:t+c*(n+o),bY:e-u*(n+o)}}}function _T(t,e,n,s){let i=!1,a=t[t.length-1].getProps(["bX","bY"],s);for(const o of t){const c=o.getProps(["bX","bY"],s);c.bY>n!=a.bY>n&&e<(a.bX-c.bX)*(n-c.bY)/(a.bY-c.bY)+c.bX&&(i=!i),a=c}return i}const qa={box:dc,doughnutLabel:Ih,ellipse:Xd,label:Kd,line:Gd,point:Fh,polygon:zh};Object.keys(qa).forEach(t=>{Dn.describe(`elements.${qa[t].id}`,{_fallback:"plugins.annotation.common"})});const kT={update:Object.assign},ST=Ay.concat(dh),Cw=(t,e)=>Bt(e)?Mg(t,e):t,Og=t=>t==="color"||t==="font";function Ly(t="line"){return qa[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function CT(t,e,n,s){const i=ET(t,n.animations,s),a=e.annotations,o=MT(e.elements,a);for(let c=0;c<a.length;c++){const u=a[c],f=N5(o,c,u.type),h=u.setContext(OT(t,f,o,u)),p=f.resolveElementProperties(t,h);p.skip=AT(p),"elements"in p&&(LT(f,p.elements,h,i),delete p.elements),ds(f.x)||Object.assign(f,p),Object.assign(f,p.initProperties),p.options=_5(h),i.update(f,p)}}function AT(t){return isNaN(t.x)||isNaN(t.y)}function ET(t,e,n){return n==="reset"||n==="none"||n==="resize"?kT:new jy(t,e)}function LT(t,e,n,s){const i=t.elements||(t.elements=[]);i.length=e.length;for(let a=0;a<e.length;a++){const o=e[a],c=o.properties,u=N5(i,a,o.type,o.initProperties),f=n[o.optionScope].override(o);c.options=_5(f),s.update(u,c)}}function N5(t,e,n,s){const i=qa[Ly(n)];let a=t[e];return(!a||!(a instanceof i))&&(a=t[e]=new i,Object.assign(a,s)),a}function _5(t){const e=qa[Ly(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,Mg(t,e.defaults),Mg(t,e.defaultRoutes));for(const s of ST)n[s]=t[s];return n}function Mg(t,e){const n={};for(const s of Object.keys(e)){const i=e[s],a=t[s];Og(s)&&dn(a)?n[s]=a.map(o=>Cw(o,i)):n[s]=Cw(a,i)}return n}function OT(t,e,n,s){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(i=>i&&i.options)},id:s.id,type:"annotation"}))}function MT(t,e){const n=e.length,s=t.length;if(s<n){const i=n-s;t.splice(s,0,...new Array(i))}else s>n&&t.splice(n,s-n);return t}var PT="3.1.0";const wa=new Map,Aw=t=>t.type!=="doughnutLabel",RT=Ay.concat(dh);var TT={id:"annotation",version:PT,beforeRegister(){gR("chart.js","4.0",Ba.version)},afterRegister(){Ba.register(qa)},afterUnregister(){Ba.unregister(qa)},beforeInit(t){wa.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const s=wa.get(t),i=s.annotations=[];let a=n.annotations;Bt(a)?Object.keys(a).forEach(o=>{const c=a[o];Bt(c)&&(c.id=o,i.push(c))}):dn(a)&&i.push(...a),QR(i.filter(Aw),t.scales)},afterDataLimits(t,e){const n=wa.get(t);XR(t,e.scale,n.annotations.filter(Aw).filter(s=>s.display&&s.adjustScaleRange))},afterUpdate(t,e,n){const s=wa.get(t);$R(t,s,n),CT(t,s,n,e.mode),s.visibleElements=s.elements.filter(i=>!i.skip&&i.options.display),GR(t,s,n)},beforeDatasetsDraw(t,e,n){ed(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){ed(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){ed(t,e.index,n.clip)},beforeDraw(t,e,n){ed(t,"beforeDraw",n.clip)},afterDraw(t,e,n){ed(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const s=wa.get(t);VR(s,e.event,n)&&(e.changed=!0)},afterDestroy(t){wa.delete(t)},getAnnotations(t){const e=wa.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return _y(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!RT.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${qa[Ly(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:Og,_fallback:!0},_indexable:Og}},additionalOptionScopes:[""]};function ed(t,e,n){const{ctx:s,chartArea:i}=t,a=wa.get(t);n&&Vd(s,i);const o=DT(a.visibleElements,e).sort((c,u)=>c.element.options.z-u.element.options.z);for(const c of o)IT(s,i,a,c);n&&Yd(s)}function DT(t,e){const n=[];for(const s of t)if(s.options.drawTime===e&&n.push({element:s,main:!0}),s.elements&&s.elements.length)for(const i of s.elements)i.options.display&&i.options.drawTime===e&&n.push({element:i});return n}function IT(t,e,n,s){const i=s.element;s.main?(pw(n,i,"beforeDraw"),i.draw(t,e),pw(n,i,"afterDraw")):i.draw(t,e)}Ba.register(oh,lh,Rl,$i,Pl,Ao,Uk,$k,qk,zk,dR,TT);const Bh=({title:t,subtitle:e,children:n,actions:s,className:i,loading:a=!1,error:o,padding:c})=>r.jsxs(Ie,{variant:"elevated",padding:c,className:F("",i),children:[(t||e||s)&&r.jsx(vt,{title:t,subtitle:e,action:s}),a?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-purple-600"})}):o?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:o})]})}):r.jsx("div",{className:"relative w-full",children:n})]}),Oy=t=>({responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:!0,position:"top"},tooltip:{enabled:!0,mode:"index",intersect:!1},datalabels:{display:!1}},...t}),k5="label";function Ew(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function FT(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function S5(t,e){t.labels=e}function C5(t,e,n=k5){const s=[];t.datasets=e.map(i=>{const a=t.datasets.find(o=>o[n]===i[n]);return!a||!i.data||s.includes(a)?{...i}:(s.push(a),Object.assign(a,i),a)})}function zT(t,e=k5){const n={labels:[],datasets:[]};return S5(n,t.labels),C5(n,t.datasets,e),n}function BT(t,e){const{height:n=150,width:s=300,redraw:i=!1,datasetIdKey:a,type:o,data:c,options:u,plugins:f=[],fallbackContent:h,updateMode:p,...m}=t,g=L.useRef(null),y=L.useRef(null),b=()=>{g.current&&(y.current=new Ba(g.current,{type:o,data:zT(c,a),options:u&&{...u},plugins:f}),Ew(e,y.current))},v=()=>{Ew(e,null),y.current&&(y.current.destroy(),y.current=null)};return L.useEffect(()=>{!i&&y.current&&u&&FT(y.current,u)},[i,u]),L.useEffect(()=>{!i&&y.current&&S5(y.current.config.data,c.labels)},[i,c.labels]),L.useEffect(()=>{!i&&y.current&&c.datasets&&C5(y.current.config.data,c.datasets,a)},[i,c.datasets]),L.useEffect(()=>{y.current&&(i?(v(),setTimeout(b)):y.current.update(p))},[i,u,c.labels,c.datasets,p]),L.useEffect(()=>{y.current&&(v(),setTimeout(b))},[o]),L.useEffect(()=>(b(),()=>v()),[]),r.jsx("canvas",{ref:g,role:"img",height:n,width:s,...m,children:h})}const qT=L.forwardRef(BT);function qh(t,e){return Ba.register(e),L.forwardRef((n,s)=>r.jsx(qT,{...n,ref:s,type:t}))}const A5=qh("bar",Bf),WT=qh("radar",qf),UT=qh("doughnut",Co),HT=qh("pie",gg),Pg=({data:t,options:e,height:n=300,...s})=>{const a={...Oy({indexAxis:"x",scales:{y:{beginAtZero:!0}}}),...e};return r.jsx(Bh,{...s,children:r.jsx("div",{style:{height:`${n}px`},children:r.jsx(A5,{data:t,options:a})})})},Wh=({data:t,options:e,height:n=300,...s})=>{const a={...Oy({maintainAspectRatio:!1,aspectRatio:1,layout:{padding:{top:8,right:8,bottom:8,left:8}},plugins:{legend:{display:!0,position:"right"},datalabels:{color:"#fff",formatter:(o,c)=>{const f=c.dataset.data.filter(p=>p!==null).reduce((p,m)=>p+m,0);return`${(o/f*100).toFixed(1)}%`},font:{weight:"bold",size:12}}}}),...e};return r.jsx(Bh,{...s,children:r.jsx("div",{style:{height:`${n}px`},children:r.jsx(HT,{data:t,options:a})})})},$T=({data:t,options:e,height:n=300,...s})=>{const a={...Oy({plugins:{legend:{display:!0,position:"right"},datalabels:{color:"#fff",formatter:(o,c)=>{const f=c.dataset.data.filter(p=>p!==null).reduce((p,m)=>p+m,0);return`${(o/f*100).toFixed(1)}%`},font:{weight:"bold",size:12}}}}),...e};return r.jsx(Bh,{...s,children:r.jsx("div",{style:{height:`${n}px`},children:r.jsx(UT,{data:t,options:a})})})},Lw=({data:t,loading:e=!1,title:n="Finding Actions Age Distribution",subtitle:s,height:i=350,actions:a,isMobile:o=!1})=>{var u;const c={responsive:!0,maintainAspectRatio:!1,indexAxis:o?"y":"x",plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,displayColors:!0,callbacks:{label:function(f){const h=o?f.parsed.x:f.parsed.y;return`${f.dataset.label}: ${h} actions`},title:function(f){var p;const h=((p=f[0])==null?void 0:p.label)||"";return h.startsWith("-")?`${h} days (Overdue)`:h==="720+"?`${h} days`:`${h} days (Upcoming)`}}},datalabels:{display:!1}},scales:o?{x:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:9},color:"#6B7280",padding:4},title:{display:!0,text:"Number of Actions",font:{size:10,weight:"bold"},color:"#374151"},border:{display:!1}},y:{grid:{display:!1},ticks:{font:{size:9},color:"#374151"},title:{display:!1},border:{display:!1}}}:{x:{grid:{display:!1},ticks:{font:{size:10},color:"#374151",maxRotation:45,minRotation:45},title:{display:!0,text:"Days Until/Past Due Date",font:{size:12,weight:"bold"},color:"#374151"},border:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{stepSize:1,font:{size:11},color:"#6B7280",padding:8},title:{display:!0,text:"Number of Actions",font:{size:12,weight:"bold"},color:"#374151"},border:{display:!1}}},interaction:{mode:"index",intersect:!1},animation:{duration:750,easing:"easeInOutQuart"}};return r.jsx(Ie,{variant:"elevated",children:r.jsxs("div",{className:o?"p-3":"p-6",children:[r.jsxs("div",{className:F("flex items-center justify-between mb-4",o&&"mb-2"),children:[r.jsxs("div",{children:[r.jsx("h3",{className:F("font-semibold text-gray-900",o?"text-sm":"text-lg"),children:n}),s&&r.jsx("p",{className:F("text-gray-600 mt-1",o?"text-xs":"text-sm"),children:s})]}),a&&r.jsx("div",{children:a})]}),r.jsx("div",{style:{height:`${o?Math.max(300,(((u=t.labels)==null?void 0:u.length)||0)*35):i}px`},children:e?r.jsx("div",{className:"h-full flex items-center justify-center",children:r.jsx(Nt,{size:"lg"})}):r.jsx(A5,{data:t,options:c})})]})})},My=t=>kn({queryKey:["auditPlans",t],queryFn:async()=>{const e=t&&t!=="All Years"?{year:t}:{},{data:n}=await jn.get("/api/audit-plans",{params:e});return n}}),VT=t=>kn({queryKey:["auditPlanHistory",t],queryFn:async()=>{const{data:e}=await jn.get(`/api/audit-plans/${t}/history`);return e},enabled:!!t}),YT=()=>{const t=Ud();return sy({mutationFn:async e=>{const{data:n}=await jn.post("/api/audit-plans",e);return n},onSuccess:()=>{t.invalidateQueries({queryKey:["auditPlans"]})},onError:e=>{var n,s;console.error("Failed to create audit plan:",((s=(n=e.response)==null?void 0:n.data)==null?void 0:s.error)||e.message)}})},KT=()=>{const t=Ud();return sy({mutationFn:async({id:e,updates:n})=>{const{data:s}=await jn.put(`/api/audit-plans/${e}`,n);return s},onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["auditPlans"]}),t.invalidateQueries({queryKey:["auditPlan",n.id]}),t.invalidateQueries({queryKey:["auditPlanHistory",n.id]})},onError:e=>{var n,s;console.error("Failed to update audit plan:",((s=(n=e.response)==null?void 0:n.data)==null?void 0:s.error)||e.message)}})},GT=()=>{const t=Ud();return sy({mutationFn:async({id:e,status:n})=>{const{data:s}=await jn.put(`/api/audit-plans/${e}/status`,{status:n});return s},onSuccess:()=>{setTimeout(()=>{t.invalidateQueries({queryKey:["auditPlans"]})},500)}})},$n=["Planned","Fieldwork","Pre Closing Meeting","Closing Meeting","Completed"],Rg=t=>{const e=$n.indexOf(t);return e===-1?0:(e+1)/$n.length*100},Ol=t=>{switch(t){case"Planned":return"bg-blue-500";case"Fieldwork":return"bg-yellow-500";case"Pre Closing Meeting":return"bg-orange-500";case"Closing Meeting":return"bg-purple-500";case"Completed":return"bg-green-500";default:return"bg-gray-500"}},Zm=(t,e,n,s,i,a,o,c,u)=>{const f=u&&u.id===t.id?u.status:t.status,h=Rg(f),p=Ol(f),m=$n.indexOf(f),g=c===t.id;return r.jsxs("tr",{className:`
                cursor-pointer border-b
                ${g?"bg-indigo-50/50 border-indigo-300 shadow-md z-10":e%2===0?"bg-white border-gray-100":"bg-gray-50/30 border-gray-100"}
                hover:bg-indigo-50/50
                ${n?"text-[11px]":""}
            `,onClick:()=>s(t),style:{transition:"transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease-in-out, background-color 0.3s ease-in-out, border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out",transform:g?"scale(1.01)":"scale(1)"},children:[r.jsx("td",{className:n?"px-2 py-2":"px-3 py-2",style:{width:n?"35%":"40%"},children:r.jsxs("div",{className:"flex flex-col gap-1.5",children:[r.jsx("span",{className:`font-medium ${n?"text-sm":"text-base"} text-gray-900 leading-tight hover:text-indigo-600 transition-colors line-clamp-2`,children:t.audit_name||t.audit_type}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`${n?"h-5 w-5 text-[10px]":"h-6 w-6 text-xs"} rounded-full bg-indigo-100 flex items-center justify-center font-medium text-indigo-700 flex-shrink-0`,children:(t.audit_lead_name||t.audit_lead_email).charAt(0).toUpperCase()}),r.jsx("span",{className:`${n?"text-xs":"text-sm"} text-gray-600 truncate`,title:t.audit_lead_email,children:t.audit_lead_name||t.audit_lead_email.split("@")[0]})]})]})}),r.jsx("td",{className:n?"px-2 py-2":"px-3 py-2",style:{width:n?"65%":"60%"},children:r.jsxs("div",{className:"w-full relative overflow-visible",onClick:y=>y.stopPropagation(),children:[r.jsxs("div",{className:`flex justify-between items-center ${n?"text-xs mb-1.5":"text-sm mb-2"}`,children:[r.jsxs("span",{className:"font-medium text-gray-700",children:[Math.round(h),"%"]}),r.jsxs("span",{className:"text-gray-500",children:[m+1,"/",$n.length]})]}),r.jsx("div",{className:`relative w-full bg-gray-100 rounded-full ${n?"h-2.5":"h-3"} overflow-hidden ${n?"":"cursor-pointer hover:bg-gray-200"} transition-colors`,onClick:y=>{if(y.stopPropagation(),!n){const b=y.currentTarget.getBoundingClientRect(),w=(y.clientX-b.left)/b.width*100,N=Math.min(Math.floor(w/(100/$n.length)),$n.length-1),k=$n[N];k&&k!==t.status&&i(t.id,k)}},children:r.jsx("div",{className:`h-full rounded-full ${p} transition-all duration-700 ease-in-out`,style:{width:`${h}%`}})}),r.jsx("div",{className:`flex justify-between items-center ${n?"mt-2 gap-0.5":"mt-2 gap-1"} relative overflow-visible`,children:$n.map((y,b)=>{const v=b<=m,w=b===m,N=Ol(y),k=y!==t.status,j=(a==null?void 0:a.planId)===t.id&&(a==null?void 0:a.stepIndex)===b;return r.jsxs("div",{className:"relative flex-1 flex justify-center overflow-visible",children:[r.jsx("button",{type:"button",onClick:S=>{S.stopPropagation(),k&&!n&&i(t.id,y)},onMouseEnter:()=>o({planId:t.id,stepIndex:b}),onMouseLeave:()=>o(null),className:`
                                            ${n?"text-[9px]":"text-xs"} text-center truncate px-0.5 w-full
                                            transition-all duration-200
                                            ${k&&!n?"cursor-pointer hover:opacity-80":"cursor-default"}
                                            ${!k||n?"opacity-50":""}
                                            ${w?"font-semibold text-gray-900":v?"text-gray-700":"text-gray-400"}
                                        `,children:r.jsx("div",{className:"flex flex-col items-center gap-0.5",children:r.jsx("div",{className:`
                                                    ${n?"w-2 h-2":"w-2.5 h-2.5"} rounded-full transition-all duration-200
                                                    ${v?N:"bg-gray-300"}
                                                    ${k&&!n?"hover:scale-125":""}
                                                `})})}),j&&r.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-gray-900 text-white text-[10px] px-2 py-1 rounded shadow-lg z-[100] whitespace-nowrap pointer-events-none",children:[y,r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]},y)})})]})})]},t.id)},E5=({plans:t,onView:e,onStatusChange:n,year:s,compact:i=!1,twoColumn:a=!1})=>{var k;const[o,c]=L.useState(null),u=L.useRef({}),[f,h]=L.useState(null),[p,m]=L.useState(null),g=L.useMemo(()=>[...t].sort((S,C)=>{const O=$n.indexOf(S.status),M=$n.indexOf(C.status);return O-M}),[t]),[y,b]=L.useState(null);L.useEffect(()=>{if(p!==null&&y){const j=setTimeout(()=>{n(y.id,y.status),b(null);const S=setTimeout(()=>{m(null)},1e3);return()=>clearTimeout(S)},700);return()=>clearTimeout(j)}},[p,y,n]);const v=(j,S)=>{m(j),b({id:j,status:S})};L.useEffect(()=>{const j=S=>{if(o!==null){const C=u.current[o];C&&!C.contains(S.target)&&c(null)}};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[o]);const w=s||(t&&t.length>0?(k=t[0])==null?void 0:k.audit_year:new Date().getFullYear()),N=i?2:3;return r.jsxs(Ie,{className:`w-full bg-white shadow-sm h-auto md:h-full flex flex-col ${i?"border-0 shadow-none":""}`,children:[!i&&r.jsx(vt,{className:"pb-1.5 pt-3 px-4 border-b border-gray-100 flex-shrink-0",children:r.jsxs("h3",{className:"font-semibold text-base text-gray-900",children:[w," Audit Plan"]})}),r.jsx(Q_,{className:`p-0 relative md:flex-1 md:min-h-0 ${i?"pt-0":""} md:overflow-hidden`,children:r.jsx("div",{className:"md:overflow-x-auto md:overflow-y-auto md:h-full",children:a?r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 md:divide-x md:divide-gray-200",children:[r.jsx("div",{className:"hidden md:block min-w-0",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"sticky top-0 bg-white z-10",children:r.jsxs("tr",{className:"bg-gray-50/50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:[r.jsx("th",{className:i?"px-2 py-2":"px-3 py-2",children:"Audit & Lead"}),r.jsx("th",{className:i?"px-2 py-2":"px-3 py-2",children:"Progress"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:g.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:2,className:`${i?"px-2 py-4":"px-3 py-8"} text-center text-gray-500`,children:"No audit plans found."})}):g.filter((j,S)=>S%2===0).map((j,S)=>Zm(j,S*2,i,e,v,f,h,p,y))})]})}),r.jsx("div",{className:"hidden md:block min-w-0",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"sticky top-0 bg-white z-10",children:r.jsxs("tr",{className:"bg-gray-50/50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:[r.jsx("th",{className:i?"px-2 py-2":"px-3 py-2",children:"Audit & Lead"}),r.jsx("th",{className:i?"px-2 py-2":"px-3 py-2",children:"Progress"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:g.length===0?null:g.filter((j,S)=>S%2===1).map((j,S)=>Zm(j,S*2+1,i,e,v,f,h,p,y))})]})}),r.jsx("div",{className:"md:hidden min-w-0 px-2 py-2 space-y-2",style:{transition:"all 0.8s cubic-bezier(0.4, 0, 0.2, 1)"},children:g.length===0?r.jsx("div",{className:"text-center py-6 text-gray-500 text-xs",children:"No audit plans found."}):g.map(j=>{const S=y&&y.id===j.id?y.status:j.status,C=Rg(S),O=Ol(S),M=$n.indexOf(S),B=p===j.id;return r.jsxs("div",{onClick:()=>e(j),className:`
                                                    bg-white rounded-lg border p-2.5 active:bg-gray-50 cursor-pointer
                                                    ${B?"border-indigo-400 shadow-lg ring-2 ring-indigo-200 bg-indigo-50/30 z-10":"border-gray-200"}
                                                `,style:{transition:"transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease-in-out, box-shadow 0.3s ease-in-out",transform:B?"scale(1.02)":"scale(1)"},children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-xs font-bold text-gray-900 leading-tight mb-1 line-clamp-2",children:j.audit_name||j.audit_type}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"h-5 w-5 rounded-full bg-indigo-100 flex items-center justify-center font-semibold text-indigo-700 flex-shrink-0 text-[10px]",children:(j.audit_lead_name||j.audit_lead_email).charAt(0).toUpperCase()}),r.jsx("span",{className:"text-[10px] text-gray-600 truncate font-medium",children:j.audit_lead_name||j.audit_lead_email.split("@")[0]})]})]}),r.jsxs("div",{className:"flex-shrink-0 text-right",children:[r.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[Math.round(C),"%"]}),r.jsxs("div",{className:"text-[9px] text-gray-500 mt-0.5",children:[M+1,"/",$n.length]})]})]}),r.jsx("div",{className:"relative w-full bg-gray-100 rounded-full h-2 overflow-hidden mb-2",onClick:I=>{I.stopPropagation();const R=I.currentTarget.getBoundingClientRect(),q=(I.clientX-R.left)/R.width*100,H=Math.min(Math.floor(q/(100/$n.length)),$n.length-1),G=$n[H];G&&G!==j.status&&v(j.id,G)},children:r.jsx("div",{className:`h-full rounded-full ${O} transition-all duration-700 ease-in-out`,style:{width:`${C}%`}})}),r.jsx("div",{className:"flex justify-between items-center gap-0.5 relative",children:$n.map((I,R)=>{const P=R<=M,q=R===M,H=Ol(I),G=I!==j.status,ne=(f==null?void 0:f.planId)===j.id&&(f==null?void 0:f.stepIndex)===R;return r.jsxs("div",{className:"relative flex-1 flex flex-col items-center",children:[r.jsxs("button",{type:"button",onClick:X=>{X.stopPropagation(),G&&v(j.id,I)},onTouchStart:()=>h({planId:j.id,stepIndex:R}),onTouchEnd:()=>h(null),className:`
                                                                        w-full flex flex-col items-center gap-0.5
                                                                        transition-all duration-200
                                                                        ${G?"active:opacity-80":""}
                                                                    `,children:[r.jsx("div",{className:`
                                                                            w-3 h-3 rounded-full transition-all duration-200
                                                                            ${P?H:"bg-gray-300"}
                                                                            ${q?"ring-1 ring-offset-0.5 ring-gray-400":""}
                                                                        `}),r.jsx("span",{className:`
                                                                        text-[8px] text-center leading-tight
                                                                        ${q?"font-bold text-gray-900":P?"text-gray-700 font-medium":"text-gray-400"}
                                                                    `,children:I.split(" ")[0]})]}),ne&&r.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-1.5 bg-gray-900 text-white text-[8px] px-1.5 py-0.5 rounded shadow-lg z-[100] whitespace-nowrap pointer-events-none",children:[I,r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-3 border-r-3 border-t-3 border-transparent border-t-gray-900"})]})]},I)})})]},j.id)})})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"md:hidden px-2 py-2 space-y-2",style:{transition:"all 0.8s cubic-bezier(0.4, 0, 0.2, 1)"},children:g.length===0?r.jsx("div",{className:"text-center py-6 text-gray-500 text-xs",children:"No audit plans found for the selected year."}):g.map(j=>{const S=y&&y.id===j.id?y.status:j.status,C=Rg(S),O=Ol(S),M=$n.indexOf(S),B=p===j.id;return r.jsxs("div",{onClick:()=>e(j),className:`
                                                    bg-white rounded-lg border p-2.5 active:bg-gray-50 cursor-pointer
                                                    ${B?"border-indigo-400 shadow-lg ring-2 ring-indigo-200 bg-indigo-50/30 z-10":"border-gray-200"}
                                                `,style:{transition:"transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease-in-out, box-shadow 0.3s ease-in-out",transform:B?"scale(1.02)":"scale(1)"},children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-xs font-bold text-gray-900 leading-tight mb-1 line-clamp-2",children:j.audit_name||j.audit_type}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"h-5 w-5 rounded-full bg-indigo-100 flex items-center justify-center font-semibold text-indigo-700 flex-shrink-0 text-[10px]",children:(j.audit_lead_name||j.audit_lead_email).charAt(0).toUpperCase()}),r.jsx("span",{className:"text-[10px] text-gray-600 truncate font-medium",children:j.audit_lead_name||j.audit_lead_email.split("@")[0]})]})]}),r.jsxs("div",{className:"flex-shrink-0 text-right",children:[r.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[Math.round(C),"%"]}),r.jsxs("div",{className:"text-[9px] text-gray-500 mt-0.5",children:[M+1,"/",$n.length]})]})]}),r.jsx("div",{className:"relative w-full bg-gray-100 rounded-full h-2 overflow-hidden mb-2",onClick:I=>{I.stopPropagation();const R=I.currentTarget.getBoundingClientRect(),q=(I.clientX-R.left)/R.width*100,H=Math.min(Math.floor(q/(100/$n.length)),$n.length-1),G=$n[H];G&&G!==j.status&&v(j.id,G)},children:r.jsx("div",{className:`h-full rounded-full ${O} transition-all duration-700 ease-in-out`,style:{width:`${C}%`}})}),r.jsx("div",{className:"flex justify-between items-center gap-0.5 relative",children:$n.map((I,R)=>{const P=R<=M,q=R===M,H=Ol(I),G=I!==j.status,ne=(f==null?void 0:f.planId)===j.id&&(f==null?void 0:f.stepIndex)===R;return r.jsxs("div",{className:"relative flex-1 flex flex-col items-center",children:[r.jsxs("button",{type:"button",onClick:X=>{X.stopPropagation(),G&&v(j.id,I)},onTouchStart:()=>h({planId:j.id,stepIndex:R}),onTouchEnd:()=>h(null),className:`
                                                                        w-full flex flex-col items-center gap-0.5
                                                                        transition-all duration-200
                                                                        ${G?"active:opacity-80":""}
                                                                    `,children:[r.jsx("div",{className:`
                                                                            w-3 h-3 rounded-full transition-all duration-200
                                                                            ${P?H:"bg-gray-300"}
                                                                            ${q?"ring-1 ring-offset-0.5 ring-gray-400":""}
                                                                        `}),r.jsx("span",{className:`
                                                                        text-[8px] text-center leading-tight
                                                                        ${q?"font-bold text-gray-900":P?"text-gray-700 font-medium":"text-gray-400"}
                                                                    `,children:I.split(" ")[0]})]}),ne&&r.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-1.5 bg-gray-900 text-white text-[8px] px-1.5 py-0.5 rounded shadow-lg z-[100] whitespace-nowrap pointer-events-none",children:[I,r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-3 border-r-3 border-t-3 border-transparent border-t-gray-900"})]})]},I)})})]},j.id)})}),r.jsxs("table",{className:"hidden md:table w-full",children:[r.jsx("thead",{className:"sticky top-0 bg-white z-10",children:r.jsxs("tr",{className:"bg-gray-50/50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:[r.jsx("th",{className:i?"px-2 py-2":"px-3 py-2",children:"Audit & Lead"}),r.jsx("th",{className:i?"px-2 py-2":"px-3 py-2",children:"Progress"}),!i&&r.jsx("th",{className:"px-3 py-2 text-center",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:g.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:N,className:`${i?"px-2 py-4":"px-3 py-8"} text-center text-gray-500`,children:"No audit plans found for the selected year."})}):g.map((j,S)=>Zm(j,S,i,e,v,f,h,p,y))})]})]})})})]})};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QT=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),Ow=t=>{const e=QT(t);return e.charAt(0).toUpperCase()+e.slice(1)},L5=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),JT=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...c},u)=>L.createElement("svg",{ref:u,...ZT,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:L5("lucide",i),...!a&&!JT(c)&&{"aria-hidden":"true"},...c},[...o.map(([f,h])=>L.createElement(f,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=(t,e)=>{const n=L.forwardRef(({className:s,...i},a)=>L.createElement(eD,{ref:a,iconNode:e,className:L5(`lucide-${XT(Ow(t))}`,`lucide-${t}`,s),...i}));return n.displayName=Ow(t),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],nD=gr("activity",tD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],O5=gr("calendar",rD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Py=gr("chevron-down",sD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],aD=gr("chevron-left",iD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Mw=gr("chevron-right",oD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],M5=gr("circle-check",lD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],dD=gr("circle-play",cD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pw=gr("circle",uD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hD=gr("clock",fD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]],mD=gr("construction",pD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gD=gr("file-text",xD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M5 3v14",key:"9nsxs2"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"M19 3v18",key:"1sk56x"}]],vD=gr("kanban",yD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],wD=gr("layout-list",bD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ND=gr("plus",jD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],kD=gr("square-pen",_D);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ed=gr("user",SD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],AD=gr("users",CD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],P5=gr("x",ED),R5=6048e5,LD=864e5,T5=6e4,D5=36e5,Of=43200,Rw=1440,Tw=Symbol.for("constructDateFrom");function us(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Tw in t?t[Tw](e):t instanceof Date?new t.constructor(e):new Date(e)}function gn(t,e){return us(e||t,t)}function OD(t,e,n){const s=gn(t,n==null?void 0:n.in);return isNaN(e)?us(t,NaN):(e&&s.setDate(s.getDate()+e),s)}function Ry(t,e,n){const s=gn(t,n==null?void 0:n.in);if(isNaN(e))return us(t,NaN);if(!e)return s;const i=s.getDate(),a=us(t,s.getTime());a.setMonth(s.getMonth()+e+1,0);const o=a.getDate();return i>=o?a:(s.setFullYear(a.getFullYear(),a.getMonth(),i),s)}let MD={};function uc(){return MD}function Wa(t,e){var c,u,f,h;const n=uc(),s=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,i=gn(t,e==null?void 0:e.in),a=i.getDay(),o=(a<s?7:0)+a-s;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function uh(t,e){return Wa(t,{...e,weekStartsOn:1})}function I5(t,e){const n=gn(t,e==null?void 0:e.in),s=n.getFullYear(),i=us(n,0);i.setFullYear(s+1,0,4),i.setHours(0,0,0,0);const a=uh(i),o=us(n,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const c=uh(o);return n.getTime()>=a.getTime()?s+1:n.getTime()>=c.getTime()?s:s-1}function fh(t){const e=gn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Ka(t,...e){const n=us.bind(null,t||e.find(s=>typeof s=="object"));return e.map(n)}function Wi(t,e){const n=gn(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function F5(t,e,n){const[s,i]=Ka(n==null?void 0:n.in,t,e),a=Wi(s),o=Wi(i),c=+a-fh(a),u=+o-fh(o);return Math.round((c-u)/LD)}function PD(t,e){const n=I5(t,e),s=us(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),uh(s)}function z5(t,e,n){return OD(t,e*7,n)}function B5(t,e,n){return Ry(t,e*12,n)}function $f(t,e){const n=+gn(t)-+gn(e);return n<0?-1:n>0?1:n}function ga(t,e,n){const[s,i]=Ka(n==null?void 0:n.in,t,e);return+Wi(s)==+Wi(i)}function RD(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function TD(t){return!(!RD(t)&&typeof t!="number"||isNaN(+gn(t)))}function DD(t,e,n){const[s,i]=Ka(n==null?void 0:n.in,t,e),a=s.getFullYear()-i.getFullYear(),o=s.getMonth()-i.getMonth();return a*12+o}function Dw(t,e,n){const[s,i]=Ka(n==null?void 0:n.in,t,e),a=Iw(s,i),o=Math.abs(F5(s,i));s.setDate(s.getDate()-a*o);const c=+(Iw(s,i)===-a),u=a*(o-c);return u===0?0:u}function Iw(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function ID(t){return e=>{const s=(t?Math[t]:Math.trunc)(e);return s===0?0:s}}function FD(t,e){return+gn(t)-+gn(e)}function zD(t,e){const n=gn(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function Tg(t,e){const n=gn(t,e==null?void 0:e.in),s=n.getMonth();return n.setFullYear(n.getFullYear(),s+1,0),n.setHours(23,59,59,999),n}function BD(t,e){const n=gn(t,e==null?void 0:e.in);return+zD(n,e)==+Tg(n,e)}function qD(t,e,n){const[s,i,a]=Ka(n==null?void 0:n.in,t,t,e),o=$f(i,a),c=Math.abs(DD(i,a));if(c<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*c);let u=$f(i,a)===-o;BD(s)&&c===1&&$f(s,a)===1&&(u=!1);const f=o*(c-+u);return f===0?0:f}function WD(t,e,n){const s=FD(t,e)/1e3;return ID(n==null?void 0:n.roundingMethod)(s)}function q5(t,e){const[n,s]=Ka(t,e.start,e.end);return{start:n,end:s}}function Fw(t,e){const{start:n,end:s}=q5(e==null?void 0:e.in,t);let i=+n>+s;const a=i?+n:+s,o=i?s:n;o.setHours(0,0,0,0);let c=1;const u=[];for(;+o<=a;)u.push(us(n,o)),o.setDate(o.getDate()+c),o.setHours(0,0,0,0);return i?u.reverse():u}function UD(t,e){const{start:n,end:s}=q5(e==null?void 0:e.in,t);let i=+n>+s;const a=i?+n:+s,o=i?s:n;o.setHours(0,0,0,0),o.setDate(1);let c=1;const u=[];for(;+o<=a;)u.push(us(n,o)),o.setMonth(o.getMonth()+c);return i?u.reverse():u}function zw(t,e){const n=gn(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function HD(t,e){const n=gn(t,e==null?void 0:e.in),s=n.getFullYear();return n.setFullYear(s+1,0,0),n.setHours(23,59,59,999),n}function W5(t,e){const n=gn(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function e0(t,e){var c,u,f,h;const n=uc(),s=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,i=gn(t,e==null?void 0:e.in),a=i.getDay(),o=(a<s?-7:0)+6-(a-s);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}const $D={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},VD=(t,e,n)=>{let s;const i=$D[t];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function t0(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const YD={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},KD={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},GD={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XD={date:t0({formats:YD,defaultWidth:"full"}),time:t0({formats:KD,defaultWidth:"full"}),dateTime:t0({formats:GD,defaultWidth:"full"})},QD={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},JD=(t,e,n,s)=>QD[t];function td(t){return(e,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let i;if(s==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):o;i=t.formattingValues[c]||t.formattingValues[o]}else{const o=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[c]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const ZD={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},e7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},t7={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},n7={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},r7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},s7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},i7=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},a7={ordinalNumber:i7,era:td({values:ZD,defaultWidth:"wide"}),quarter:td({values:e7,defaultWidth:"wide",argumentCallback:t=>t-1}),month:td({values:t7,defaultWidth:"wide"}),day:td({values:n7,defaultWidth:"wide"}),dayPeriod:td({values:r7,defaultWidth:"wide",formattingValues:s7,defaultFormattingWidth:"wide"})};function nd(t){return(e,n={})=>{const s=n.width,i=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],c=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?l7(c,p=>p.test(o)):o7(c,p=>p.test(o));let f;f=t.valueCallback?t.valueCallback(u):u,f=n.valueCallback?n.valueCallback(f):f;const h=e.slice(o.length);return{value:f,rest:h}}}function o7(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function l7(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function c7(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const i=s[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const c=e.slice(i.length);return{value:o,rest:c}}}const d7=/^(\d+)(th|st|nd|rd)?/i,u7=/\d+/i,f7={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},h7={any:[/^b/i,/^(a|c)/i]},p7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},m7={any:[/1/i,/2/i,/3/i,/4/i]},x7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},g7={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},y7={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},v7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},b7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},w7={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},j7={ordinalNumber:c7({matchPattern:d7,parsePattern:u7,valueCallback:t=>parseInt(t,10)}),era:nd({matchPatterns:f7,defaultMatchWidth:"wide",parsePatterns:h7,defaultParseWidth:"any"}),quarter:nd({matchPatterns:p7,defaultMatchWidth:"wide",parsePatterns:m7,defaultParseWidth:"any",valueCallback:t=>t+1}),month:nd({matchPatterns:x7,defaultMatchWidth:"wide",parsePatterns:g7,defaultParseWidth:"any"}),day:nd({matchPatterns:y7,defaultMatchWidth:"wide",parsePatterns:v7,defaultParseWidth:"any"}),dayPeriod:nd({matchPatterns:b7,defaultMatchWidth:"any",parsePatterns:w7,defaultParseWidth:"any"})},U5={code:"en-US",formatDistance:VD,formatLong:XD,formatRelative:JD,localize:a7,match:j7,options:{weekStartsOn:0,firstWeekContainsDate:1}};function N7(t,e){const n=gn(t,e==null?void 0:e.in);return F5(n,W5(n))+1}function _7(t,e){const n=gn(t,e==null?void 0:e.in),s=+uh(n)-+PD(n);return Math.round(s/R5)+1}function H5(t,e){var h,p,m,g;const n=gn(t,e==null?void 0:e.in),s=n.getFullYear(),i=uc(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(m=i.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=us((e==null?void 0:e.in)||t,0);o.setFullYear(s+1,0,a),o.setHours(0,0,0,0);const c=Wa(o,e),u=us((e==null?void 0:e.in)||t,0);u.setFullYear(s,0,a),u.setHours(0,0,0,0);const f=Wa(u,e);return+n>=+c?s+1:+n>=+f?s:s-1}function k7(t,e){var c,u,f,h;const n=uc(),s=(e==null?void 0:e.firstWeekContainsDate)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,i=H5(t,e),a=us((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,s),a.setHours(0,0,0,0),Wa(a,e)}function S7(t,e){const n=gn(t,e==null?void 0:e.in),s=+Wa(n,e)-+k7(n,e);return Math.round(s/R5)+1}function mn(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const ya={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return mn(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):mn(n+1,2)},d(t,e){return mn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return mn(t.getHours()%12||12,e.length)},H(t,e){return mn(t.getHours(),e.length)},m(t,e){return mn(t.getMinutes(),e.length)},s(t,e){return mn(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),i=Math.trunc(s*Math.pow(10,n-3));return mn(i,e.length)}},El={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Bw={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return ya.y(t,e)},Y:function(t,e,n,s){const i=H5(t,s),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return mn(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):mn(a,e.length)},R:function(t,e){const n=I5(t);return mn(n,e.length)},u:function(t,e){const n=t.getFullYear();return mn(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return mn(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return mn(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return ya.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return mn(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const i=S7(t,s);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):mn(i,e.length)},I:function(t,e,n){const s=_7(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):mn(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ya.d(t,e)},D:function(t,e,n){const s=N7(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):mn(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const i=t.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return mn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const i=t.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return mn(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),i=s===0?7:s;switch(e){case"i":return String(i);case"ii":return mn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let i;switch(s===12?i=El.noon:s===0?i=El.midnight:i=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let i;switch(s>=17?i=El.evening:s>=12?i=El.afternoon:s>=4?i=El.morning:i=El.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return ya.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ya.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):mn(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):mn(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ya.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ya.s(t,e)},S:function(t,e){return ya.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Ww(s);case"XXXX":case"XX":return _o(s);case"XXXXX":case"XXX":default:return _o(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return Ww(s);case"xxxx":case"xx":return _o(s);case"xxxxx":case"xxx":default:return _o(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+qw(s,":");case"OOOO":default:return"GMT"+_o(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+qw(s,":");case"zzzz":default:return"GMT"+_o(s,":")}},t:function(t,e,n){const s=Math.trunc(+t/1e3);return mn(s,e.length)},T:function(t,e,n){return mn(+t,e.length)}};function qw(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),i=Math.trunc(s/60),a=s%60;return a===0?n+String(i):n+String(i)+e+mn(a,2)}function Ww(t,e){return t%60===0?(t>0?"-":"+")+mn(Math.abs(t)/60,2):_o(t,e)}function _o(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),i=mn(Math.trunc(s/60),2),a=mn(s%60,2);return n+i+e+a}const Uw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},$5=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},C7=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return Uw(t,e);let a;switch(s){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Uw(s,e)).replace("{{time}}",$5(i,e))},A7={p:$5,P:C7},E7=/^D+$/,L7=/^Y+$/,O7=["D","DD","YY","YYYY"];function M7(t){return E7.test(t)}function P7(t){return L7.test(t)}function R7(t,e,n){const s=T7(t,e,n);if(console.warn(s),O7.includes(t))throw new RangeError(s)}function T7(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const D7=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,I7=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,F7=/^'([^]*?)'?$/,z7=/''/g,B7=/[a-zA-Z]/;function ys(t,e,n){var h,p,m,g;const s=uc(),i=s.locale??U5,a=s.firstWeekContainsDate??((p=(h=s.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=s.weekStartsOn??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,c=gn(t,n==null?void 0:n.in);if(!TD(c))throw new RangeError("Invalid time value");let u=e.match(I7).map(y=>{const b=y[0];if(b==="p"||b==="P"){const v=A7[b];return v(y,i.formatLong)}return y}).join("").match(D7).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:q7(y)};if(Bw[b])return{isToken:!0,value:y};if(b.match(B7))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(u=i.localize.preprocessor(c,u));const f={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return u.map(y=>{if(!y.isToken)return y.value;const b=y.value;(P7(b)||M7(b))&&R7(b,e,String(t));const v=Bw[b[0]];return v(c,b,i.localize,f)}).join("")}function q7(t){const e=t.match(F7);return e?e[1].replace(z7,"'"):t}function W7(t,e,n){const s=uc(),i=(n==null?void 0:n.locale)??s.locale??U5,a=2520,o=$f(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[u,f]=Ka(n==null?void 0:n.in,...o>0?[e,t]:[t,e]),h=WD(f,u),p=(fh(f)-fh(u))/1e3,m=Math.round((h-p)/60);let g;if(m<2)return n!=null&&n.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,c):h<10?i.formatDistance("lessThanXSeconds",10,c):h<20?i.formatDistance("lessThanXSeconds",20,c):h<40?i.formatDistance("halfAMinute",0,c):h<60?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",1,c):m===0?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",m,c);if(m<45)return i.formatDistance("xMinutes",m,c);if(m<90)return i.formatDistance("aboutXHours",1,c);if(m<Rw){const y=Math.round(m/60);return i.formatDistance("aboutXHours",y,c)}else{if(m<a)return i.formatDistance("xDays",1,c);if(m<Of){const y=Math.round(m/Rw);return i.formatDistance("xDays",y,c)}else if(m<Of*2)return g=Math.round(m/Of),i.formatDistance("aboutXMonths",g,c)}if(g=qD(f,u),g<12){const y=Math.round(m/Of);return i.formatDistance("xMonths",y,c)}else{const y=g%12,b=Math.trunc(g/12);return y<3?i.formatDistance("aboutXYears",b,c):y<9?i.formatDistance("overXYears",b,c):i.formatDistance("almostXYears",b+1,c)}}function n0(t,e,n){const[s,i]=Ka(n==null?void 0:n.in,t,e);return s.getFullYear()===i.getFullYear()&&s.getMonth()===i.getMonth()}function U7(t,e,n){const s=+gn(t,n==null?void 0:n.in),[i,a]=[+gn(e.start,n==null?void 0:n.in),+gn(e.end,n==null?void 0:n.in)].sort((o,c)=>o-c);return s>=i&&s<=a}function V5(t,e){const n=()=>us(e==null?void 0:e.in,NaN),i=Y7(t);let a;if(i.date){const f=K7(i.date,2);a=G7(f.restDateString,f.year)}if(!a||isNaN(+a))return n();const o=+a;let c=0,u;if(i.time&&(c=X7(i.time),isNaN(c)))return n();if(i.timezone){if(u=Q7(i.timezone),isNaN(u))return n()}else{const f=new Date(o+c),h=gn(0,e==null?void 0:e.in);return h.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),h.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),h}return gn(o+c+u,e==null?void 0:e.in)}const Mf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},H7=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,$7=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,V7=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Y7(t){const e={},n=t.split(Mf.dateTimeDelimiter);let s;if(n.length>2)return e;if(/:/.test(n[0])?s=n[0]:(e.date=n[0],s=n[1],Mf.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Mf.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const i=Mf.timezone.exec(s);i?(e.time=s.replace(i[1],""),e.timezone=i[1]):e.time=s}return e}function K7(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};const i=s[1]?parseInt(s[1]):null,a=s[2]?parseInt(s[2]):null;return{year:a===null?i:a*100,restDateString:t.slice((s[1]||s[2]).length)}}function G7(t,e){if(e===null)return new Date(NaN);const n=t.match(H7);if(!n)return new Date(NaN);const s=!!n[4],i=rd(n[1]),a=rd(n[2])-1,o=rd(n[3]),c=rd(n[4]),u=rd(n[5])-1;if(s)return n8(e,c,u)?J7(e,c,u):new Date(NaN);{const f=new Date(0);return!e8(e,a,o)||!t8(e,i)?new Date(NaN):(f.setUTCFullYear(e,a,Math.max(i,o)),f)}}function rd(t){return t?parseInt(t):1}function X7(t){const e=t.match($7);if(!e)return NaN;const n=r0(e[1]),s=r0(e[2]),i=r0(e[3]);return r8(n,s,i)?n*D5+s*T5+i*1e3:NaN}function r0(t){return t&&parseFloat(t.replace(",","."))||0}function Q7(t){if(t==="Z")return 0;const e=t.match(V7);if(!e)return 0;const n=e[1]==="+"?-1:1,s=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return s8(s,i)?n*(s*D5+i*T5):NaN}function J7(t,e,n){const s=new Date(0);s.setUTCFullYear(t,0,4);const i=s.getUTCDay()||7,a=(e-1)*7+n+1-i;return s.setUTCDate(s.getUTCDate()+a),s}const Z7=[31,null,31,30,31,30,31,31,30,31,30,31];function Y5(t){return t%400===0||t%4===0&&t%100!==0}function e8(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Z7[e]||(Y5(t)?29:28))}function t8(t,e){return e>=1&&e<=(Y5(t)?366:365)}function n8(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function r8(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function s8(t,e){return e>=0&&e<=59}function i8(t,e,n){return Ry(t,-1,n)}function a8(t,e,n){return z5(t,-1,n)}function o8(t,e,n){return B5(t,-1,n)}const K5=({plan:t,onClose:e,onEdit:n,viewOnly:s=!1})=>{const[i,a]=L.useState("details"),{data:o,isLoading:c}=VT(t.id);return wt.useEffect(()=>{const u=f=>{f.key==="Escape"&&e()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[e]),r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm md:items-center md:justify-center",children:r.jsxs("div",{className:"bg-white md:rounded-xl shadow-2xl w-full h-full md:h-auto md:max-w-3xl md:max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 md:p-6 border-b border-gray-100 bg-white",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-1 flex-wrap",children:[r.jsx("h2",{className:"text-base md:text-xl font-bold text-gray-900 truncate",children:t.audit_name||t.audit_type}),r.jsx(Ze,{variant:"purple",className:"text-[10px] md:text-xs px-1.5 md:px-2 py-0.5 md:py-1",children:t.audit_year}),r.jsx(Ze,{variant:t.status==="Completed"?"success":t.status==="Planned"?"info":"warning",className:"text-[10px] md:text-xs px-1.5 md:px-2 py-0.5 md:py-1",children:t.status})]}),r.jsxs("p",{className:"text-xs md:text-sm text-gray-500 truncate",children:[t.audit_type,"  ",t.department,"  ",t.process||"No Process"]})]}),r.jsx("button",{onClick:e,className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-full transition-colors flex-shrink-0 ml-2",children:r.jsx(P5,{className:"h-4 w-4 md:h-5 md:w-5 text-gray-500"})})]}),r.jsxs("div",{className:"flex border-b border-gray-100 px-3 md:px-6",children:[r.jsx("button",{className:`py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium border-b-2 transition-colors ${i==="details"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>a("details"),children:"Details"}),r.jsx("button",{className:`py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium border-b-2 transition-colors ${i==="history"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>a("history"),children:"History"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-6 bg-gray-50/50",children:i==="details"?r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-6",children:[r.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-lg border border-gray-100 shadow-sm",children:[r.jsxs("h3",{className:"text-xs md:text-sm font-semibold text-gray-900 mb-3 md:mb-4 flex items-center gap-1.5 md:gap-2",children:[r.jsx(Ed,{className:"h-3.5 w-3.5 md:h-4 md:w-4 text-indigo-500"}),"Responsibility"]}),r.jsxs("div",{className:"space-y-2.5 md:space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Audit Lead"}),r.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.audit_lead_name||t.audit_lead_email}),r.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-0.5",children:t.audit_lead_email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Department"}),r.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.department||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Process"}),r.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.process||"-"})]})]})]}),r.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-lg border border-gray-100 shadow-sm",children:[r.jsxs("h3",{className:"text-xs md:text-sm font-semibold text-gray-900 mb-3 md:mb-4 flex items-center gap-1.5 md:gap-2",children:[r.jsx(O5,{className:"h-3.5 w-3.5 md:h-4 md:w-4 text-indigo-500"}),"Timeline"]}),r.jsxs("div",{className:"space-y-2.5 md:space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Start Date"}),r.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.start_date?ys(new Date(t.start_date),"MMM d, yyyy"):"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"End Date"}),r.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.end_date?ys(new Date(t.end_date),"MMM d, yyyy"):"-"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Duration"}),r.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.audit_duration_weeks?`${t.audit_duration_weeks} weeks`:"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Report Release Date"}),r.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.report_release_date?ys(new Date(t.report_release_date),"MMM d, yyyy"):"-"})]})]})]}),r.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-lg border border-gray-100 shadow-sm md:col-span-2",children:[r.jsxs("h3",{className:"text-xs md:text-sm font-semibold text-gray-900 mb-3 md:mb-4 flex items-center gap-1.5 md:gap-2",children:[r.jsx(nD,{className:"h-3.5 w-3.5 md:h-4 md:w-4 text-indigo-500"}),"Outcome"]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Report Rating"}),r.jsx("div",{className:"mt-1",children:t.audit_report_rating?r.jsx(Ze,{variant:"default",className:"text-[10px] md:text-xs",children:t.audit_report_rating}):r.jsx("span",{className:"text-xs md:text-sm text-gray-400",children:"Not rated yet"})})]})]})]}):r.jsx("div",{className:"space-y-2.5 md:space-y-4",children:c?r.jsx("div",{className:"text-center py-6 md:py-8 text-gray-500 text-xs md:text-sm",children:"Loading history..."}):o&&o.length>0?o.map(u=>r.jsxs("div",{className:"flex gap-2.5 md:gap-4 bg-white p-3 md:p-4 rounded-lg border border-gray-100 shadow-sm",children:[r.jsx("div",{className:`
                      w-6 h-6 md:w-8 md:h-8 rounded-full flex items-center justify-center flex-shrink-0
                      ${u.event_type==="CREATE"?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"}
                    `,children:u.event_type==="CREATE"?r.jsx(gD,{className:"h-3 w-3 md:h-4 md:w-4"}):r.jsx(kD,{className:"h-3 w-3 md:h-4 md:w-4"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex justify-between items-start gap-2",children:[r.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900",children:u.event_type==="CREATE"?"Audit Plan Created":`Updated ${u.field_name}`}),r.jsx("span",{className:"text-[10px] md:text-xs text-gray-400 flex-shrink-0",children:ys(new Date(u.changed_at),"MMM d, HH:mm")})]}),r.jsxs("p",{className:"text-[10px] md:text-xs text-gray-500 mt-0.5",children:["by ",u.changed_by]}),u.event_type==="UPDATE"&&r.jsx("div",{className:"mt-1.5 md:mt-2 text-[10px] md:text-xs bg-gray-50 p-1.5 md:p-2 rounded border border-gray-100",children:r.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 flex-wrap",children:[r.jsx("span",{className:"text-red-500 line-through",children:u.old_value||"Empty"}),r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("span",{className:"text-green-600 font-medium",children:u.new_value||"Empty"})]})})]})]},u.id)):r.jsx("div",{className:"text-center py-6 md:py-8 text-gray-500 text-xs md:text-sm",children:"No history available"})})}),r.jsxs("div",{className:"p-3 md:p-6 border-t border-gray-100 bg-white flex flex-col md:flex-row gap-2 md:gap-0 md:justify-end",children:[!s&&r.jsx(Be,{variant:"outline",onClick:()=>n(t),className:"w-full md:w-auto md:mr-2 text-xs md:text-sm py-2 md:py-1.5",children:"Edit Audit Detail"}),r.jsx(Be,{variant:"primary",onClick:e,className:"w-full md:w-auto text-xs md:text-sm py-2 md:py-1.5",children:"Close"})]})]})})};function l8({selectedLead:t="",selectedYear:e="2025",onYearChange:n,availableYears:s=[],isYearDropdownOpen:i=!1,onYearDropdownToggle:a,yearDropdownRef:o}){const c=L.useRef(null),u=o||c,[f,h]=L.useState(new Set(["all"])),[p,m]=L.useState(void 0),g=e?parseInt(e):new Date().getFullYear(),{data:y=[],isLoading:b}=My(e),v=O=>{h(M=>{const B=new Set(M);if(O==="all")if(B.has("all")){B.clear();const I=k[0];I&&B.add(I)}else B.clear(),B.add("all");else B.delete("all"),B.has(O)?(B.delete(O),B.size===0&&B.add("all")):(B.add(O),B.size===k.length&&(B.clear(),B.add("all")));return B})},w=O=>f.has("all")?!0:f.has(O),N=f.has("all"),k=L.useMemo(()=>{const O=new Set;return y.forEach(M=>{const B=M.audit_lead_name||M.audit_lead_email;B&&O.add(B)}),Array.from(O).sort()},[y]),j=L.useMemo(()=>{let O=y;return t&&t!==""&&(O=y.filter(M=>{const B=M.audit_lead_name||M.audit_lead_email;return B&&B.toLowerCase().includes(t.toLowerCase())})),f.has("all")?O:O.filter(M=>{const B=M.audit_lead_name||M.audit_lead_email;return B&&f.has(B)})},[y,t,f]),S=O=>{m(O)},C=()=>{console.log("Status changes are not available from dashboard. Please use the Annual Audit Plan page.")};return L.useEffect(()=>{const O=M=>{M.key==="Escape"&&p&&m(void 0)};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[p]),b?r.jsx("div",{className:"flex items-center justify-center h-[400px]",children:r.jsx(Nt,{size:"lg"})}):!j||j.length===0?r.jsx("div",{className:"flex items-center justify-center h-[400px] text-gray-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsxs("p",{className:"text-sm",children:["No audit plans found for ",e||"selected year"]})]})}):r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center sm:justify-between px-2 md:px-2 pb-2 border-b border-gray-200 flex-shrink-0 gap-2 sm:gap-3",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 bg-white/95 backdrop-blur-sm px-2 py-1.5 rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("span",{className:"text-[10px] md:text-[9px] text-gray-600 font-medium whitespace-nowrap",children:"Audit Lead:"}),N?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>v("all"),className:`
                  hidden md:flex relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1 flex-shrink-0
                  ${f.has("all")?"bg-indigo-600":"bg-gray-300"}
                `,children:r.jsx("span",{className:`
                  inline-block h-3.5 w-3.5 transform rounded-full bg-white transition-transform shadow-sm
                  ${f.has("all")?"translate-x-5":"translate-x-0.5"}
                `})}),r.jsx("button",{onClick:()=>v("all"),className:`
                  md:hidden px-2.5 py-1 rounded-full text-[10px] font-medium transition-all duration-200
                  focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1
                  ${f.has("all")?"bg-indigo-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}
                `,children:"All"}),r.jsx("span",{className:"hidden md:inline text-[9px] text-gray-600 font-medium whitespace-nowrap",children:"All"})]}):r.jsx(r.Fragment,{children:k.map(O=>r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>v(O),className:`
                      hidden md:flex relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1
                      ${w(O)?"bg-indigo-600":"bg-gray-300"}
                    `,children:r.jsx("span",{className:`
                      inline-block h-3.5 w-3.5 transform rounded-full bg-white transition-transform shadow-sm
                      ${w(O)?"translate-x-5":"translate-x-0.5"}
                    `})}),r.jsx("span",{className:"hidden md:inline text-[9px] text-gray-600 whitespace-nowrap",children:O}),r.jsx("button",{onClick:()=>v(O),className:`
                      md:hidden px-2.5 py-1 rounded-full text-[10px] font-medium transition-all duration-200 whitespace-nowrap
                      focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1
                      ${w(O)?"bg-indigo-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}
                    `,children:O})]},O))})]}),n&&s.length>0&&r.jsxs("div",{className:"relative",ref:u,children:[r.jsxs("button",{onClick:()=>a&&a(!i),className:"flex items-center gap-2 px-3 py-1.5 bg-white border border-gray-300 rounded-lg hover:border-indigo-400 hover:bg-indigo-50/30 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1 shadow-sm",children:[r.jsx("span",{className:"text-xs md:text-sm font-semibold text-gray-700 md:text-gray-900",children:e}),r.jsx(Py,{className:`h-3 w-3 md:h-4 md:w-4 text-gray-500 transition-transform duration-200 ${i?"rotate-180":""}`})]}),i&&r.jsx("div",{className:"absolute top-full right-0 mt-1 w-24 bg-white border border-gray-200 rounded-lg shadow-lg z-50 overflow-hidden",children:s.map(O=>r.jsx("button",{onClick:()=>{n(O.toString()),a&&a(!1)},className:`
                      w-full px-3 py-2 text-left text-xs transition-colors
                      ${e===O.toString()?"bg-indigo-50 text-indigo-700 font-semibold":"text-gray-700 hover:bg-gray-50"}
                    `,children:O},O))})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:r.jsx(E5,{plans:j,onView:S,onStatusChange:C,year:g,compact:!0,twoColumn:!0})}),p&&r.jsx(K5,{plan:p,onClose:()=>m(void 0),onEdit:()=>{window.location.href=`/annual-audit-plan?selectedPlanId=${p.id}&selectedYear=${g}`},viewOnly:!0})]})}const Hw=({title:t,subtitle:e,data:n,height:s=300,loading:i=!1,options:a={},className:o,wrapperPadding:c})=>{const f={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{padding:15,usePointStyle:!0,font:{size:12,weight:"bold"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1}},scales:{r:{beginAtZero:!0,min:0,max:5,ticks:{stepSize:1,font:{size:10},backdropColor:"transparent"},pointLabels:{display:!0,font:{size:11,weight:"bold"},color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"},angleLines:{color:"rgba(0, 0, 0, 0.1)"}}}},...a};return r.jsx(Bh,{title:t,subtitle:e,loading:i,className:o,padding:c,children:r.jsx("div",{style:{height:`${s}px`,width:"100%"},children:r.jsx(WT,{data:n,options:f})})})},$w=["Critical","High","Medium","Low"],Vw=t=>{const e={Critical:"bg-gray-900",High:"bg-red-500",Medium:"bg-orange-500",Low:"bg-yellow-500",Unassigned:"bg-gray-400"};return e[t]||e.Unassigned};function c8({data:t,isLoading:e,onCellClick:n}){return e?r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-12 bg-gray-200 rounded"}),r.jsx("div",{className:"h-12 bg-gray-200 rounded"}),r.jsx("div",{className:"h-12 bg-gray-200 rounded"})]}):!t||t.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No data available"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-auto",style:{maxHeight:"350px"},children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-[9.6px] py-[6.4px] text-left text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"Year"}),r.jsx("th",{className:"px-[9.6px] py-[6.4px] text-left text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"Audit Name"}),r.jsx("th",{className:"px-[9.6px] py-[6.4px] text-center text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"Critical"}),r.jsx("th",{className:"px-[9.6px] py-[6.4px] text-center text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"High"}),r.jsx("th",{className:"px-[9.6px] py-[6.4px] text-center text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"Medium"}),r.jsx("th",{className:"px-[9.6px] py-[6.4px] text-center text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"Low"}),r.jsx("th",{className:"px-[9.6px] py-[6.4px] text-center text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((s,i)=>{const a=`${s.auditYear}-${s.auditName}-${i}`;return r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-[9.6px] py-[6.4px] whitespace-nowrap font-medium text-gray-900",children:s.auditYear}),r.jsx("td",{className:"px-[9.6px] py-[6.4px] text-gray-900",children:r.jsx("div",{className:"max-w-xs truncate",title:s.auditName,children:s.auditName})}),$w.map(o=>{const c=s.riskBreakdown[o],u=(c==null?void 0:c.total)||0,f=(c==null?void 0:c.completed)||0;return r.jsx("td",{className:"px-[9.6px] py-[6.4px] text-center",children:u>0?r.jsxs("button",{onClick:()=>n==null?void 0:n(s.auditYear,s.auditName,o),className:"inline-flex items-center gap-[3.2px] hover:bg-purple-50 hover:underline px-[6.4px] py-[3.2px] rounded transition-all cursor-pointer group",title:`Click to view ${u} ${o} actions`,children:[r.jsx("span",{className:F("w-1.5 h-1.5 rounded-full",Vw(o))}),r.jsx("span",{className:"font-medium text-gray-900 group-hover:text-purple-600",children:u}),r.jsxs("span",{className:"text-[9.6px] text-gray-500",children:["(",f,")"]})]}):r.jsx("span",{className:"text-gray-400",children:"-"})},o)}),r.jsx("td",{className:"px-[9.6px] py-[6.4px] text-center",children:r.jsx("button",{onClick:()=>n==null?void 0:n(s.auditYear,s.auditName),className:"font-semibold text-gray-900 hover:text-purple-600 hover:underline transition-all cursor-pointer px-3 py-1 hover:bg-purple-50 rounded",title:`Click to view all ${s.total} actions`,children:s.total})})]},a)})})]})}),r.jsx("div",{className:"md:hidden overflow-x-auto -mx-6 px-6",children:r.jsx("div",{className:"min-w-full inline-block",children:r.jsxs("table",{className:"min-w-full text-[10px]",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b-2 border-gray-300",children:[r.jsx("th",{className:"text-left py-1.5 pr-1.5 font-semibold text-gray-700 sticky left-0 bg-white z-10 min-w-[120px]",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[8px] font-normal text-gray-500",children:"Year"}),r.jsx("span",{className:"text-[10px]",children:"Audit Name"})]})}),r.jsx("th",{className:"text-center py-1.5 px-0.5 font-semibold text-gray-900 bg-gray-900 text-white min-w-[36px] text-[9px]",children:"C"}),r.jsx("th",{className:"text-center py-1.5 px-0.5 font-semibold text-red-600 bg-red-50 min-w-[36px] text-[9px]",children:"H"}),r.jsx("th",{className:"text-center py-1.5 px-0.5 font-semibold text-orange-600 bg-orange-50 min-w-[36px] text-[9px]",children:"M"}),r.jsx("th",{className:"text-center py-1.5 px-0.5 font-semibold text-yellow-600 bg-yellow-50 min-w-[36px] text-[9px]",children:"L"}),r.jsx("th",{className:"text-center py-1.5 px-0.5 font-semibold text-gray-700 bg-gray-100 min-w-[36px] text-[9px]",children:"T"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map((s,i)=>{const a=`mobile-${s.auditYear}-${s.auditName}-${i}`;return r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"py-1.5 pr-1.5 sticky left-0 bg-white z-10 border-r border-gray-200 min-w-[120px]",children:r.jsxs("button",{onClick:()=>n==null?void 0:n(s.auditYear,s.auditName),className:"text-left hover:text-purple-600 transition-colors w-full",children:[r.jsx("div",{className:"text-[8px] text-gray-500 mb-0.5",children:s.auditYear}),r.jsx("div",{className:"text-[10px] font-semibold text-gray-900 line-clamp-2 leading-tight",title:s.auditName,children:s.auditName})]})}),$w.map(o=>{const c=s.riskBreakdown[o],u=(c==null?void 0:c.total)||0,f=(c==null?void 0:c.completed)||0;return r.jsx("td",{className:"text-center py-1.5 px-0.5",children:u>0?r.jsxs("button",{onClick:()=>n==null?void 0:n(s.auditYear,s.auditName,o),className:"flex flex-col items-center gap-0.5 hover:bg-purple-50 rounded px-0.5 py-0.5 transition-all w-full group",children:[r.jsx("span",{className:F("w-1 h-1 rounded-full",Vw(o))}),r.jsx("span",{className:"text-[10px] font-bold text-gray-900 group-hover:text-purple-600",children:u}),r.jsxs("span",{className:"text-[7px] text-gray-500 leading-none",children:["(",f,")"]})]}):r.jsx("span",{className:"text-gray-300 text-[9px]",children:"-"})},o)}),r.jsx("td",{className:"text-center py-1.5 px-0.5",children:r.jsx("button",{onClick:()=>n==null?void 0:n(s.auditYear,s.auditName),className:"text-[10px] font-bold text-gray-900 hover:text-purple-600 transition-colors",children:s.total})})]},a)})})]})})})]})}const qr=({component:t,children:e,fallback:n=null,requireInteraction:s=!1})=>{const{hasComponent:i,canInteract:a}=J_();return(s?a(t):i(t))?r.jsx(r.Fragment,{children:e}):r.jsx(r.Fragment,{children:n})};function kr(t,e="PPP"){const n=typeof t=="string"?V5(t):t;return ys(n,e)}function d8(t){const e=typeof t=="string"?V5(t):t;return W7(e,new Date,{addSuffix:!0})}function mr(t){if(!t||isNaN(t))return"0 ";const e=parseFloat(t.toString());if(e>=1e6){const n=e/1e6;return`${n%1===0?n.toFixed(0):n.toFixed(2)}M `}else if(e>=1e3){const n=e/1e3;return`${n%1===0?n.toFixed(0):n.toFixed(2)}K `}else return`${e.toFixed(0)} `}const u8=({isOpen:t,onClose:e,status:n,auditYear:s})=>{const[i,a]=L.useState([]),[o,c]=L.useState(!1),[u,f]=L.useState("");L.useEffect(()=>{t&&n&&h()},[t,n,s]),L.useEffect(()=>{const g=y=>{y.key==="Escape"&&t&&e()};if(t)return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[t,e]);const h=async()=>{c(!0);try{const g=await Yt.getActionsByStatus(n,s);a(g)}catch{a([])}finally{c(!1)}},p=i.filter(g=>{var b,v,w,N;if(!u)return!0;const y=u.toLowerCase();return((b=g.key)==null?void 0:b.toLowerCase().includes(y))||((v=g.summary)==null?void 0:v.toLowerCase().includes(y))||((w=g.auditName)==null?void 0:w.toLowerCase().includes(y))||((N=g.actionResponsible)==null?void 0:N.toLowerCase().includes(y))}),m=g=>{const y=g.toLowerCase();return y.includes("completed")?"bg-green-100 text-green-800 border-green-300":y.includes("overdue")?"bg-red-100 text-red-800 border-red-300":y.includes("risk")?"bg-purple-100 text-purple-800 border-purple-300":"bg-blue-100 text-blue-800 border-blue-300"};return t?r.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:e}),r.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:r.jsxs("div",{className:"relative w-full max-w-6xl max-h-[85vh] bg-white rounded-2xl shadow-2xl transform transition-all flex flex-col",onClick:g=>g.stopPropagation(),children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 px-6 py-4 rounded-t-2xl flex-shrink-0",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`px-3 py-1.5 rounded-lg ${m(n)} border font-bold text-sm`,children:n}),r.jsxs("div",{className:"text-white",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Finding Actions Details"}),r.jsxs("p",{className:"text-purple-100 text-sm",children:[p.length," ",p.length===1?"action":"actions"," found"]})]})]}),r.jsx("button",{onClick:e,className:"text-white hover:text-purple-200 transition-colors p-1.5 rounded-lg hover:bg-white/10",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsx("div",{className:"px-6 py-2 border-b bg-gray-50 flex-shrink-0",children:r.jsxs("div",{className:"relative",children:[r.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),r.jsx("input",{type:"text",placeholder:"Search by action key, description, audit name, or responsible...",value:u,onChange:g=>f(g.target.value),className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})}),r.jsx("div",{className:"px-6 py-4 flex-1 overflow-y-auto",children:o?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx(Nt,{size:"xl",text:"Loading actions..."})}):p.length===0?r.jsxs("div",{className:"text-center py-20",children:[r.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No actions found"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:u?"Try adjusting your search terms":"No actions available for this status"})]}):r.jsx("div",{className:"space-y-2",children:p.map((g,y)=>{var b,v,w;return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:shadow-md transition-all duration-200 hover:border-purple-300 bg-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-purple-600 font-mono font-bold text-sm",children:g.key}),r.jsx(Ze,{variant:(b=g.status)!=null&&b.toLowerCase().includes("completed")?"success":(v=g.status)!=null&&v.toLowerCase().includes("overdue")?"danger":(w=g.status)!=null&&w.toLowerCase().includes("risk")?"default":"info",children:g.status})]}),r.jsxs(Be,{variant:"ghost",size:"sm",onClick:()=>window.open(`https://getirdev.atlassian.net/browse/${g.key}`,"_blank"),children:[r.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Jira"]})]}),r.jsxs("div",{className:"mb-2",children:[r.jsx("p",{className:"text-gray-500 text-xs font-semibold mb-0.5",children:"Action Summary"}),r.jsx("h4",{className:"text-gray-900 font-medium text-sm",children:g.summary})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-gray-500 text-xs font-semibold mb-0.5",children:"Action Description"}),r.jsx("p",{className:"text-gray-700 text-xs line-clamp-2",children:g.description})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-x-4 gap-y-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 font-semibold mb-0.5",children:"Audit Name"}),r.jsx("p",{className:"text-gray-900 truncate",children:g.auditName})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 font-semibold mb-0.5",children:"Due Date"}),r.jsx("p",{className:"text-gray-900",children:g.dueDate?kr(g.dueDate,"PP"):"Not set"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 font-semibold mb-0.5",children:"Responsible"}),r.jsx("p",{className:"text-gray-900 truncate",children:g.actionResponsible})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 font-semibold mb-0.5",children:"C-Level"}),r.jsx("p",{className:"text-gray-900 truncate",children:g.cLevel||"N/A"})]})]})]},g.key||y)})})}),r.jsxs("div",{className:"px-6 py-3 bg-gray-50 rounded-b-2xl border-t flex items-center justify-between flex-shrink-0",children:[r.jsxs("div",{className:"text-xs text-gray-600",children:["Showing ",r.jsx("span",{className:"font-semibold text-gray-900",children:p.length})," of"," ",r.jsx("span",{className:"font-semibold text-gray-900",children:i.length})," actions"]}),r.jsx(Be,{variant:"outline",size:"sm",onClick:e,children:"Close"})]})]})})]}):null},ss=({columnKey:t,width:e,onResizeStart:n,isResizing:s=!1,children:i,className:a="",onClick:o,onDragStart:c,onDragOver:u,onDrop:f,onDragEnd:h,isDragging:p=!1,isDragOver:m=!1})=>{const g=L.useRef(!1),y=()=>{!g.current&&o&&o(),setTimeout(()=>{g.current=!1},100)},b=v=>{v.stopPropagation(),g.current=!0,n(t,v)};return r.jsxs("th",{className:F("relative group text-left",a,p&&"opacity-50",m&&"bg-purple-100 border-l-4 border-purple-500"),style:{width:e?`${e}px`:void 0},onClick:y,draggable:!0,onDragStart:v=>{v.stopPropagation(),c==null||c(t)},onDragOver:v=>u==null?void 0:u(v,t),onDrop:v=>{v.preventDefault(),f==null||f(t)},onDragEnd:h,children:[r.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity cursor-move",children:r.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M9 3h2v2H9V3zm0 4h2v2H9V7zm0 4h2v2H9v-2zm0 4h2v2H9v-2zm0 4h2v2H9v-2zm4-16h2v2h-2V3zm0 4h2v2h-2V7zm0 4h2v2h-2v-2zm0 4h2v2h-2v-2zm0 4h2v2h-2v-2z"})})}),r.jsx("div",{className:F(a.includes("text-center")?"flex items-center justify-center":"pl-8 text-left"),children:i}),r.jsx("div",{className:F("absolute top-0 right-0 w-1 h-full cursor-col-resize group","hover:bg-purple-500 hover:opacity-70",s&&"bg-purple-500 opacity-100","transition-colors"),onMouseDown:b,title:"Drag to resize column",children:r.jsx("div",{className:"absolute top-0 right-0 w-4 h-full -mr-1.5"})}),r.jsx("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-50 transition-opacity pointer-events-none",children:r.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})})]})},f8=({isOpen:t,onClose:e,findingKey:n,findingSummary:s,findingData:i})=>{var S;const[a,o]=L.useState([]),[c,u]=L.useState(!1),[f,h]=L.useState(null),[p,m]=L.useState(null),[g,y]=L.useState(!1);L.useEffect(()=>{t&&n&&(b(),h(null),m(null))},[t,n]),L.useEffect(()=>{const C=O=>{O.key==="Escape"&&t&&(O.preventDefault(),O.stopPropagation(),f?N():e())};if(t)return document.addEventListener("keydown",C,{capture:!0}),()=>document.removeEventListener("keydown",C,{capture:!0})},[t,f,e]);const b=async()=>{u(!0);try{const C=await qe.get(`/api/finding-child-actions/${n}`);o(C)}catch(C){console.error("Failed to fetch child actions:",C),o([])}finally{u(!1)}},v=async C=>{y(!0),h(C);try{const O=await qe.get(`/api/action-detail/${C}`);m(O)}catch(O){console.error("Failed to fetch action detail:",O),m(null)}finally{y(!1)}},w=C=>{v(C)},N=()=>{h(null),m(null)},k=C=>{const O=C.toLowerCase();return O.includes("completed")?"bg-green-100 text-green-800 border-green-300":O.includes("overdue")?"bg-red-100 text-red-800 border-red-300":O.includes("risk")?"bg-purple-100 text-purple-800 border-purple-300":"bg-blue-100 text-blue-800 border-blue-300"},j=C=>{switch(C){case"Critical":return"bg-gray-900 text-white";case"High":return"bg-red-500 text-white";case"Medium":return"bg-orange-500 text-white";case"Low":return"bg-yellow-500 text-white";default:return"bg-gray-400 text-white"}};return t?r.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:()=>{f?N():e()}}),r.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:r.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-white rounded-2xl shadow-2xl transform transition-all flex flex-col",onClick:C=>C.stopPropagation(),children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 px-6 py-4 rounded-t-2xl flex-shrink-0",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`px-3 py-1.5 rounded-lg ${k(i==null?void 0:i.status)} border font-bold text-sm`,children:(i==null?void 0:i.status)||"Unknown"}),r.jsxs("div",{className:"text-white",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Finding Details"}),r.jsx("p",{className:"text-purple-100 text-sm",children:n})]})]}),r.jsx("button",{onClick:e,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[f&&r.jsxs("button",{onClick:N,className:"flex items-center gap-2 text-purple-600 hover:text-purple-700 font-medium text-sm",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Finding"]}),c||g?r.jsx("div",{className:"py-12",children:r.jsx(Nt,{})}):f&&p?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Action Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Action Key:"}),r.jsx("p",{className:"text-gray-900 mt-1 font-mono",children:p.key})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Status:"}),r.jsx("div",{className:"mt-1",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k(p.status)}`,children:p.status})})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Summary:"}),r.jsx("p",{className:"text-gray-900 mt-1",children:p.summary})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Audit Lead:"}),r.jsx("p",{className:"text-gray-900 mt-1",children:p.auditLead||"Unassigned"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Due Date:"}),r.jsx("p",{className:"text-gray-900 mt-1",children:p.dueDate||"-"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Responsible:"}),r.jsx("p",{className:"text-gray-900 mt-1",children:p.responsibleEmail||"-"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"C-Level:"}),r.jsx("p",{className:"text-gray-900 mt-1",children:p.cLevel||"-"})]})]}),p.description&&r.jsxs("div",{className:"mt-3",children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Action Description:"}),r.jsx("p",{className:"text-gray-700 mt-1 text-sm",children:p.description})]})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 space-y-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Parent Finding"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Finding:"}),r.jsx("p",{className:"text-gray-900 mt-1",children:p.findingSummary})]}),p.findingDescription&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Finding Description:"}),r.jsx("p",{className:"text-gray-700 mt-1",children:p.findingDescription})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Finding Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Summary:"}),r.jsx("p",{className:"text-gray-900 mt-1",children:s})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Audit:"}),r.jsx("p",{className:"text-gray-900 mt-1",children:(i==null?void 0:i.auditName)||"-"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Audit Year:"}),r.jsx("p",{className:"text-gray-900 mt-1",children:(i==null?void 0:i.auditYear)||"-"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Audit Lead:"}),r.jsx("p",{className:"text-gray-900 mt-1",children:((S=a[0])==null?void 0:S.auditLead)||(i==null?void 0:i.auditLead)||"Unassigned"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Risk Level:"}),r.jsx("div",{className:"mt-1",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${j((i==null?void 0:i.riskLevel)||"")}`,children:(i==null?void 0:i.riskLevel)||"Unknown"})})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Financial Impact:"}),r.jsx("p",{className:"text-gray-900 mt-1 font-semibold",children:mr((i==null?void 0:i.financialImpact)||0)})]})]}),(i==null?void 0:i.description)&&r.jsxs("div",{className:"mt-3",children:[r.jsx("span",{className:"text-gray-500 font-medium",children:"Description:"}),r.jsx("p",{className:"text-gray-700 mt-1 text-sm",children:i.description})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3",children:["Related Actions (",a.length,")"]}),a.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg",children:"No child actions found for this finding"}):r.jsx("div",{className:"space-y-2",children:a.map(C=>r.jsxs("button",{onClick:()=>w(C.key),className:"w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-purple-50 hover:border-purple-300 transition-all cursor-pointer text-left group",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 group-hover:text-purple-600",children:C.summary}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:C.key})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ze,{variant:C.status==="Completed"?"success":C.status==="Overdue"?"danger":"warning",children:C.status}),r.jsx("svg",{className:"w-4 h-4 text-gray-400 group-hover:text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},C.key))})]})]})]})]})})]}):null},Yw=({isOpen:t,onClose:e,title:n,subtitle:s,actions:i,loading:a,headerBgColor:o="bg-gray-50",showDaysUntilDue:c=!1,mode:u="actions",actionType:f,onActionTypeChange:h,overdueCount:p=0,upcomingCount:m=0})=>{const[g,y]=L.useState(null),[b,v]=L.useState(!1),[w,N]=L.useState(f==="overdue"?{key:"daysOverdue",direction:"desc"}:null),[k,j]=L.useState(!1),[S,C]=L.useState(null),[O,M]=L.useState(()=>typeof window<"u"?window.innerWidth<768:!1);L.useEffect(()=>{const z=()=>{M(window.innerWidth<768)};return window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]);const B=u==="findings"?["status","audit","auditYear","auditLead","riskLevel","description","actions"]:c?["status","audit","auditYear","auditLead","dueDate","daysUntilDue","riskLevel","responsible","cLevel","description","actions"]:f==="overdue"?["status","audit","auditYear","auditLead","dueDate","daysOverdue","riskLevel","responsible","cLevel","description","actions"]:["status","audit","auditYear","auditLead","dueDate","riskLevel","responsible","cLevel","description","actions"],[I,R]=L.useState(B),[P,q]=L.useState(null);L.useEffect(()=>{R(u==="findings"?["status","audit","auditYear","auditLead","riskLevel","description","actions"]:c?["status","audit","auditYear","auditLead","dueDate","daysUntilDue","riskLevel","responsible","cLevel","description","actions"]:f==="overdue"?["status","audit","auditYear","auditLead","dueDate","daysOverdue","riskLevel","responsible","cLevel","description","actions"]:["status","audit","auditYear","auditLead","dueDate","riskLevel","responsible","cLevel","description","actions"])},[u,c,f]);const{columnWidths:H,handleMouseDown:G}=Go({status:120,audit:200,auditYear:100,auditLead:180,dueDate:130,daysUntilDue:100,daysOverdue:110,riskLevel:120,responsible:200,cLevel:180,description:300,actions:120},void 0,"actions-modal-column-widths"),ne=z=>{let Q="asc";w&&w.key===z&&w.direction==="asc"&&(Q="desc"),N({key:z,direction:Q})},X=L.useMemo(()=>!i||!w?i||[]:[...i].sort((Q,Z)=>{let V,ie;if(w.key==="daysOverdue"){const fe=new Date;if(Q.dueDate){const ve=new Date(Q.dueDate);V=Math.floor((fe.getTime()-ve.getTime())/(1e3*60*60*24))}if(Z.dueDate){const ve=new Date(Z.dueDate);ie=Math.floor((fe.getTime()-ve.getTime())/(1e3*60*60*24))}}else V=Q[w.key],ie=Z[w.key];if(V===ie)return 0;if(!V&&V!==0)return 1;if(!ie&&ie!==0)return-1;const de=V>ie?1:-1;return w.direction==="asc"?de:-de}),[i,w]),ee=z=>{const Q=z.toLowerCase();return Q==="completed"?"success":Q==="risk accepted"?"default":Q==="overdue"?"danger":Q==="closed"?"info":"warning"},Y=z=>{q(z)},U=z=>{z.preventDefault()},T=z=>{if(!P||P===z){q(null);return}const Q=[...I],Z=Q.indexOf(P),V=Q.indexOf(z);Q.splice(Z,1),Q.splice(V,0,P),R(Q),q(null)};L.useEffect(()=>{const z=Q=>{if(Q.key==="Escape"&&t){if(k)return;b?(v(!1),y(null)):e()}};if(t)return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[t,b,k,e]);const W={status:{label:"Status",render:z=>r.jsx(Ze,{variant:ee(z.status),children:z.status})},audit:{label:"Audit",sortable:!0,sortKey:"auditName",render:z=>r.jsx("span",{className:"text-gray-600 text-sm",children:z.auditName||"-"})},auditYear:{label:"Audit Year",sortable:!0,sortKey:"auditYear",render:z=>r.jsx("span",{className:"text-gray-600 text-sm",children:z.auditYear||"-"})},auditLead:{label:"Audit Lead",sortable:!0,sortKey:"auditLead",render:z=>r.jsx("span",{className:"text-gray-600 text-sm",children:z.auditLead||"-"})},daysUntilDue:{label:"Days Until Due",sortable:!0,sortKey:"daysUntilDue",render:z=>z.daysUntilDue!==null&&z.daysUntilDue!==void 0?r.jsxs("span",{className:`text-sm font-medium ${z.daysUntilDue<7?"text-red-600":z.daysUntilDue<14?"text-orange-600":"text-gray-600"}`,children:[z.daysUntilDue," days"]}):r.jsx("span",{className:"text-gray-400",children:"-"})},daysOverdue:{label:"Days Overdue",sortable:!0,sortKey:"daysOverdue",render:z=>{if(!z.dueDate)return r.jsx("span",{className:"text-gray-400",children:"-"});const Q=new Date,Z=new Date(z.dueDate),V=Math.floor((Q.getTime()-Z.getTime())/(1e3*60*60*24));return V<=0?r.jsx("span",{className:"text-gray-400",children:"-"}):r.jsxs("span",{className:`text-sm font-medium ${V>30?"text-red-600":V>15?"text-orange-600":"text-gray-600"}`,children:[V," days"]})}},dueDate:{label:"Due Date",render:z=>r.jsx("span",{className:"text-gray-600 text-sm",children:z.dueDate?kr(z.dueDate,"PP"):"-"})},riskLevel:{label:"Risk Level",render:z=>r.jsx(Ze,{variant:z.riskLevel==="Critical"?"danger":z.riskLevel==="High"?"warning":z.riskLevel==="Medium"?"info":"default",children:z.riskLevel||"Unassigned"})},responsible:{label:"Responsible",render:z=>r.jsx("span",{className:"text-gray-600 text-sm",children:z.responsibleEmail||"-"})},cLevel:{label:"C-Level",render:z=>r.jsx("span",{className:"text-gray-600 text-sm",children:z.cLevel||"-"})},description:{label:"Description",render:z=>r.jsx("span",{className:"text-gray-700 text-sm line-clamp-2",title:z.description,children:z.description||"-"})},actions:{label:u==="findings"?"Finding Detail":"Action Detail",render:z=>r.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>{u==="findings"?(C(z),j(!0)):(y(z),v(!0))},children:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})}};return t?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 md:p-4",children:r.jsxs("div",{className:F("bg-white rounded-lg shadow-xl w-full overflow-hidden flex flex-col",O?"max-w-full max-h-[95vh]":"max-w-[95vw] max-h-[90vh]"),children:[r.jsxs("div",{className:F("border-b border-gray-200",f?f==="overdue"?"bg-red-50":"bg-blue-50":o,O?"px-3 py-3":"px-6 py-4"),children:[r.jsxs("div",{className:"flex justify-between items-start mb-3 relative",children:[r.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[r.jsx("h3",{className:F("font-semibold text-gray-900",O?"text-base":"text-lg"),children:f?f==="overdue"?"Overdue Actions":"Upcoming Actions":n}),r.jsx("p",{className:F("text-gray-600 mt-1",O?"text-xs":"text-sm"),children:a?"Loading...":f?f==="overdue"?`${p} actions past due date`:`${m} actions due within 30 days`:s})]}),r.jsx("button",{onClick:e,className:F("transition-colors flex-shrink-0 rounded-full hover:bg-gray-200 active:bg-gray-300 relative z-10",O?"text-gray-700 bg-white shadow-sm p-1 border border-gray-300":"text-gray-500 hover:text-gray-700 p-1"),"aria-label":"Close modal",children:r.jsx("svg",{className:F("fill-none stroke-currentColor",O?"w-4 h-4":"w-6 h-6"),viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),f&&h&&r.jsxs("div",{className:F("inline-flex items-center bg-white rounded-xl shadow-md border border-gray-200/50 backdrop-blur-sm",O?"p-1 w-full":"p-1.5"),children:[r.jsxs("button",{onClick:()=>h("overdue"),className:F("relative rounded-lg font-semibold transition-all duration-200 flex items-center gap-1.5 flex-1 justify-center",O?"px-2 py-1.5 text-xs":"px-5 py-2.5 text-sm",f==="overdue"?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/30 transform scale-105":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[r.jsx("span",{className:O?"text-sm":"text-base",children:""}),r.jsx("span",{children:"Overdue"}),p>0&&r.jsx("span",{className:F("rounded-full font-bold",O?"px-1.5 py-0.5 text-[10px]":"px-2 py-0.5 text-xs",f==="overdue"?"bg-white/20 text-white":"bg-red-100 text-red-700"),children:p})]}),r.jsxs("button",{onClick:()=>h("upcoming"),className:F("relative rounded-lg font-semibold transition-all duration-200 flex items-center gap-1.5 flex-1 justify-center",O?"px-2 py-1.5 text-xs":"px-5 py-2.5 text-sm",f==="upcoming"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/30 transform scale-105":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[r.jsx("span",{className:O?"text-sm":"text-base",children:""}),r.jsx("span",{children:"Upcoming"}),m>0&&r.jsx("span",{className:F("rounded-full font-bold",O?"px-1.5 py-0.5 text-[10px]":"px-2 py-0.5 text-xs",f==="upcoming"?"bg-white/20 text-white":"bg-blue-100 text-blue-700"),children:m})]})]})]}),r.jsx("div",{className:F("flex-1 overflow-auto",O?"p-2":"p-6"),children:a?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Nt,{size:"lg"})}):i&&i.length>0?r.jsxs(r.Fragment,{children:[!O&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm border-collapse",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:r.jsx("tr",{children:I.map(z=>{const Q=W[z];return Q?r.jsx(ss,{columnKey:z,width:H[z],onResizeStart:G,isResizing:!1,onClick:Q.sortable?()=>ne(Q.sortKey):void 0,onDragStart:()=>Y(z),onDragOver:Z=>U(Z),onDrop:()=>T(z),isDragging:P===z,className:`px-4 py-3 text-left font-semibold text-gray-700 border-r border-gray-200 bg-gray-50 ${Q.sortable?"cursor-pointer hover:bg-gray-100":""}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[Q.label,Q.sortable&&r.jsx("span",{className:w&&w.key===Q.sortKey?"text-purple-600":"text-gray-400",children:w&&w.key===Q.sortKey?w.direction==="asc"?"":"":""})]})},z):null})})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:X.map(z=>r.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:I.map(Q=>{const Z=W[Q];return Z?r.jsx("td",{className:"px-4 py-3 border-r border-gray-100",style:{width:`${H[Q]}px`},children:Z.render(z)},Q):null})},z.key))})]})}),O&&r.jsx("div",{className:"space-y-2",children:X.map(z=>r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-[10px] font-mono text-purple-600 mb-1 truncate",children:z.key}),W.status&&r.jsx("div",{className:"mb-2",children:W.status.render(z)})]}),W.actions&&r.jsx("div",{className:"flex-shrink-0",children:W.actions.render(z)})]}),W.description&&r.jsxs("div",{children:[r.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-1",children:"Description"}),r.jsx("div",{className:"text-xs text-gray-700 line-clamp-2",children:z.description||"-"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[W.audit&&r.jsxs("div",{children:[r.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Audit"}),r.jsx("div",{className:"text-gray-700 truncate",children:z.auditName||"-"})]}),W.auditYear&&r.jsxs("div",{children:[r.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Year"}),r.jsx("div",{className:"text-gray-700",children:z.auditYear||"-"})]}),W.dueDate&&r.jsxs("div",{children:[r.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Due Date"}),r.jsx("div",{className:"text-gray-700",children:z.dueDate?kr(z.dueDate,"PP"):"-"})]}),W.daysUntilDue&&z.daysUntilDue!==null&&z.daysUntilDue!==void 0&&r.jsxs("div",{children:[r.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Days Until"}),r.jsxs("div",{className:`text-xs font-medium ${z.daysUntilDue<7?"text-red-600":z.daysUntilDue<14?"text-orange-600":"text-gray-600"}`,children:[z.daysUntilDue," days"]})]}),W.daysOverdue&&z.dueDate&&(()=>{const Q=new Date,Z=new Date(z.dueDate),V=Math.floor((Q.getTime()-Z.getTime())/(1e3*60*60*24));return V>0?r.jsxs("div",{children:[r.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Days Overdue"}),r.jsxs("div",{className:`text-xs font-medium ${V>30?"text-red-600":V>15?"text-orange-600":"text-gray-600"}`,children:[V," days"]})]}):null})(),W.riskLevel&&r.jsxs("div",{children:[r.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Risk"}),r.jsx("div",{children:W.riskLevel.render(z)})]}),W.responsible&&r.jsxs("div",{children:[r.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Responsible"}),r.jsx("div",{className:"text-gray-700 text-[10px] truncate",children:z.responsibleEmail||"-"})]}),W.cLevel&&r.jsxs("div",{children:[r.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"C-Level"}),r.jsx("div",{className:"text-gray-700 text-[10px] truncate",children:z.cLevel||"-"})]}),W.auditLead&&r.jsxs("div",{children:[r.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Audit Lead"}),r.jsx("div",{className:"text-gray-700 text-[10px] truncate",children:z.auditLead||"-"})]})]})]})},z.key))})]}):r.jsx("div",{className:"text-center py-12 text-gray-500",children:"No actions found"})})]})}),b&&g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-2 md:p-4",children:r.jsxs("div",{className:F("bg-white rounded-lg shadow-xl w-full overflow-hidden flex flex-col",O?"max-w-full max-h-[95vh]":"max-w-3xl max-h-[85vh]"),children:[r.jsxs("div",{className:F("border-b border-gray-200 flex justify-between items-center bg-gradient-to-r from-purple-50 to-indigo-50 relative",O?"px-3 py-3":"px-6 py-4"),children:[r.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[r.jsx("h3",{className:F("font-semibold text-gray-900",O?"text-base":"text-lg"),children:"Action Details"}),r.jsx("p",{className:F("text-gray-600 mt-1",O?"text-xs":"text-sm"),children:g.key})]}),r.jsx("button",{onClick:()=>{v(!1),y(null)},className:F("transition-colors flex-shrink-0 rounded-full hover:bg-gray-200 active:bg-gray-300 relative z-10",O?"text-gray-700 bg-white shadow-sm p-1 border border-gray-300":"text-gray-500 hover:text-gray-700 p-1"),"aria-label":"Close modal",children:r.jsx("svg",{className:F("fill-none stroke-currentColor",O?"w-4 h-4":"w-6 h-6"),viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:F("flex-1 overflow-auto",O?"p-3":"p-6"),children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ACTION SUMMARY"}),r.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:g.summary})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ACTION DESCRIPTION"}),r.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg whitespace-pre-wrap",children:g.description||"No description available"})]}),g.findingDescription&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"FINDING DESCRIPTION"}),r.jsx("p",{className:"text-gray-900 bg-blue-50 p-3 rounded-lg whitespace-pre-wrap border-l-4 border-blue-500",children:g.findingDescription})]}),r.jsxs("div",{className:F("grid gap-4",O?"grid-cols-1":"grid-cols-2"),children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"STATUS"}),r.jsx(Ze,{variant:ee(g.status),children:g.status})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"DUE DATE"}),r.jsx("p",{className:"text-gray-900",children:g.dueDate?kr(g.dueDate,"PPP"):"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ACTION RESPONSIBLE"}),r.jsx("p",{className:"text-gray-900",children:g.responsibleEmail||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"C-LEVEL"}),r.jsx("p",{className:"text-gray-900",children:g.cLevel||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"AUDIT NAME"}),r.jsx("p",{className:"text-gray-900",children:g.auditName||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"AUDIT YEAR"}),r.jsx("p",{className:"text-gray-900",children:g.auditYear||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"AUDIT LEAD"}),r.jsx("p",{className:"text-gray-900",children:g.auditLead||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"RISK LEVEL"}),r.jsx(Ze,{variant:g.riskLevel==="Critical"?"danger":g.riskLevel==="High"?"warning":g.riskLevel==="Medium"?"info":"default",children:g.riskLevel||"Unassigned"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"FINANCIAL IMPACT"}),r.jsx("p",{className:"text-gray-900 font-semibold text-indigo-600",children:g.financialImpact>0?mr(g.financialImpact):"-"})]})]})]})}),r.jsx("div",{className:F("border-t border-gray-200 bg-gray-50 flex justify-end",O?"px-3 py-3":"px-6 py-4"),children:r.jsx(Be,{variant:"outline",size:O?"sm":"md",onClick:()=>{v(!1),y(null)},children:"Close"})})]})}),S&&r.jsx(f8,{isOpen:k,onClose:()=>j(!1),findingKey:S.key,findingSummary:S.summary,findingData:S})]}):null},Es={getUsers:async()=>qe.get("/api/users"),getAccessManagementUsers:async()=>qe.get("/api/access-management/users"),getUser:async t=>qe.get(`/api/users/${t}`),createUser:async t=>qe.post("/api/users",t),updateUser:async(t,e)=>qe.put(`/api/users/${t}`,e),deleteUser:async t=>qe.delete(`/api/users/${t}`),getUserRole:async t=>qe.get(`/api/users/${t}/role`),getExternalUsers:async()=>{const t=await qe.get("/api/admin/external-users");return{success:t.success,data:t.users||[]}},getExternalUser:async t=>qe.get(`/api/external-users/${t}`),createExternalUser:async t=>{const e=await qe.post("/api/admin/external-users",t);return{success:e.success,data:e.user}},updateExternalUser:async(t,e)=>qe.put(`/api/admin/external-users/${t}`,e),deleteExternalUser:async t=>qe.delete(`/api/admin/external-users/${t}`),getExternalUserPermissions:async t=>qe.get(`/api/external-users/${t}/permissions`),updateExternalUserPermissions:async(t,e)=>qe.put(`/api/external-users/${t}/permissions`,{permissions:e}),getRoles:async()=>qe.get("/api/roles"),getRole:async t=>qe.get(`/api/roles/${t}`),createRole:async t=>qe.post("/api/admin/roles",t),updateRole:async(t,e)=>qe.put(`/api/roles/${t}`,e),deleteRole:async t=>qe.delete(`/api/roles/${t}`),syncGoogleGroup:async()=>qe.post("/api/admin/sync-google-group")},Qd=({onSelectUser:t,className:e="",filterByRole:n})=>{const[s,i]=L.useState(!1),[a,o]=L.useState(""),[c,u]=L.useState([]),[f,h]=L.useState([]),[p,m]=L.useState(!1),g=L.useRef(null),y=iy(a,300);L.useEffect(()=>{s&&(async()=>{try{m(!0);const w=await Es.getAccessManagementUsers();if(w.success&&w.data){const N=w.data;let k=N;n&&(Array.isArray(n)?k=N.filter(S=>n.includes(S.role)):k=N.filter(S=>S.role===n));const j=k.filter(S=>S.status==="active");u(j),h(j)}}catch{}finally{m(!1)}})()},[s,n]),L.useEffect(()=>{if(!y){h(c);return}const v=c.filter(w=>{var N;return w.email.toLowerCase().includes(y.toLowerCase())||((N=w.name)==null?void 0:N.toLowerCase().includes(y.toLowerCase()))});h(v)},[y,c]),L.useEffect(()=>{const v=w=>{g.current&&!g.current.contains(w.target)&&i(!1)};return s&&document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[s]);const b=v=>{t(v),i(!1),o("")};return r.jsxs("div",{className:`relative hidden md:block ${e}`,ref:g,children:[r.jsxs(Be,{variant:"outline",size:"sm",onClick:()=>i(!s),className:"flex items-center gap-[6.4px] px-[9.6px] py-[6.4px] h-auto text-[10px] whitespace-nowrap",children:[r.jsx("svg",{className:"w-[12.8px] h-[12.8px] flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.jsx("span",{className:"whitespace-nowrap",children:"View As"})]}),s&&r.jsxs("div",{className:F("absolute top-full right-0 mt-2 z-[100]","bg-white rounded-lg shadow-2xl border-2 border-gray-300","overflow-hidden flex flex-col","w-72 max-h-80"),children:[r.jsx("div",{className:"p-[11px] border-b border-gray-200",children:r.jsx(Tn,{placeholder:"Search users...",value:a,onChange:v=>o(v.target.value),fullWidth:!0,autoFocus:!1,className:"text-[15px]",style:{fontSize:"15px"}})}),r.jsx("div",{className:"overflow-y-auto flex-1",children:p?r.jsx("div",{className:"flex items-center justify-center p-7",children:r.jsx(Nt,{size:"md"})}):f.length===0?r.jsxs("div",{className:"text-center p-7 text-gray-500",children:[r.jsx("svg",{className:"mx-auto h-11 w-11 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),r.jsx("p",{className:"mt-2 text-[12px]",children:"No users found"})]}):r.jsx("div",{className:"divide-y divide-gray-100",children:f.map(v=>{var w;return r.jsx("button",{onClick:()=>b(v.email),className:"w-full text-left px-[12px] py-[8.5px] hover:bg-purple-50 active:bg-purple-100 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-[8.8px]",children:[r.jsx("div",{className:"w-[24px] h-[24px] rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-semibold text-[10.5px] flex-shrink-0",children:((w=v.name)==null?void 0:w.charAt(0))||v.email.charAt(0).toUpperCase()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-[10.5px] font-medium text-gray-900 truncate",children:v.name||v.email}),r.jsx("p",{className:"text-[9px] text-gray-500 truncate",children:v.email}),v.role&&r.jsx("span",{className:"inline-block mt-[2.8px] text-[9px] px-[6px] py-[1.5px] bg-gray-100 text-gray-700 rounded",children:v.role.replace("_"," ")})]})]})},v.email)})})})]})]})},h8=({onSelectUser:t,filterByRole:e})=>{const[n,s]=L.useState(!1),[i,a]=L.useState(""),[o,c]=L.useState([]),[u,f]=L.useState([]),[h,p]=L.useState(!1),m=iy(i,300);L.useEffect(()=>{n&&(async()=>{try{p(!0);const b=await Es.getAccessManagementUsers();if(b.success&&b.data){const v=b.data;let w=v;e&&(Array.isArray(e)?w=v.filter(k=>e.includes(k.role)):w=v.filter(k=>k.role===e));const N=w.filter(k=>k.status==="active");c(N),f(N)}}catch{}finally{p(!1)}})()},[n,e]),L.useEffect(()=>{if(!m){f(o);return}const y=o.filter(b=>{var v;return b.email.toLowerCase().includes(m.toLowerCase())||((v=b.name)==null?void 0:v.toLowerCase().includes(m.toLowerCase()))});f(y)},[m,o]),L.useEffect(()=>{if(n){const y=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${y}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,y)}}},[n]);const g=y=>{t(y),s(!1),a("")};return r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>s(!0),className:"flex items-center justify-center w-8 h-8 rounded-full bg-purple-100 text-purple-600 active:bg-purple-200 transition-colors touch-manipulation","aria-label":"View As",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),n&&r.jsxs("div",{className:"fixed inset-0 z-[9999] md:hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>s(!1)}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl shadow-2xl max-h-[65vh] flex flex-col transform transition-transform duration-300 ease-out",style:{animation:"slideUp 0.3s ease-out"},children:[r.jsx("div",{className:"flex justify-center pt-2 pb-1.5",children:r.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),r.jsxs("div",{className:"px-3 pb-2 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"View As User"}),r.jsx("button",{onClick:()=>s(!1),className:"p-1.5 -mr-1.5 text-gray-400 hover:text-gray-600 active:bg-gray-100 rounded-full transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx(Tn,{placeholder:"Search users...",value:i,onChange:y=>a(y.target.value),fullWidth:!0,autoFocus:!0,className:"text-sm",style:{fontSize:"16px"}})]}),r.jsx("div",{className:"overflow-y-auto flex-1 px-3 py-1.5",children:h?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Nt,{size:"md"})}):u.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("svg",{className:"mx-auto h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),r.jsx("p",{className:"mt-2 text-xs",children:"No users found"})]}):r.jsx("div",{className:"divide-y divide-gray-100",children:u.map(y=>{var b;return r.jsx("button",{onClick:()=>g(y.email),className:"w-full text-left px-2 py-2.5 active:bg-purple-50 transition-colors touch-manipulation",children:r.jsxs("div",{className:"flex items-center gap-2.5",children:[r.jsx("div",{className:"w-9 h-9 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-semibold text-sm flex-shrink-0",children:((b=y.name)==null?void 0:b.charAt(0))||y.email.charAt(0).toUpperCase()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:y.name||y.email}),r.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:y.email}),y.role&&r.jsx("span",{className:"inline-block mt-1.5 text-[10px] px-2 py-0.5 bg-gray-100 text-gray-700 rounded-full",children:y.role.replace("_"," ")})]})]})},y.email)})})})]})]})]})},Ot={getAuditFindings:async t=>{const e=new URLSearchParams;t!=null&&t.audit_name&&e.append("audit_name",t.audit_name),t!=null&&t.audit_year&&e.append("audit_year",t.audit_year),t!=null&&t.status&&e.append("status",t.status),t!=null&&t.risk_level&&e.append("risk_level",t.risk_level);const n=e.toString();return qe.get(`/api/audit-findings${n?`?${n}`:""}`)},getAuditFinding:async t=>qe.get(`/api/audit-findings/${t}`),createAuditFinding:async t=>qe.post("/api/audit-findings",t),updateAuditFinding:async(t,e)=>qe.put(`/api/audit-findings/${t}`,e),deleteAuditFinding:async t=>qe.delete(`/api/audit-findings/${t}`),getDropdownOptions:async t=>qe.get(`/api/dropdown-options/${t}`),getDropdownOptionsFull:async t=>qe.get(`/api/dropdown-options-full/${t}`),getDropdownOptionsByParent:async(t,e)=>{const n=e?`?parent=${encodeURIComponent(e)}`:"";return qe.get(`/api/dropdown-options-by-parent/${t}${n}`)},createDropdownOption:async t=>qe.post("/api/dropdown-options",t),updateDropdownOption:async(t,e)=>qe.put(`/api/dropdown-options/${t}`,e),deleteDropdownOption:async t=>qe.delete(`/api/dropdown-options/${t}`),addAttachment:async(t,e)=>qe.post(`/api/audit-findings/${t}/attachments`,e),deleteAttachment:async t=>qe.delete(`/api/attachments/${t}`),getFindingActions:async t=>qe.get(`/api/finding-actions?finding_id=${t}`),getFindingAction:async t=>qe.get(`/api/finding-actions/${t}`),createFindingAction:async t=>qe.post("/api/finding-actions",t),updateFindingAction:async(t,e)=>qe.put(`/api/finding-actions/${t}`,e),deleteFindingAction:async t=>qe.delete(`/api/finding-actions/${t}`),getUsersByRole:async t=>qe.get(`/api/users-by-role/${t}`),getUserHierarchy:async t=>qe.get(`/api/user-hierarchy/${encodeURIComponent(t)}`),getFindingHistory:async t=>qe.get(`/api/audit-findings/${t}/history`),getActionHistory:async t=>qe.get(`/api/finding-actions/${t}/history`),bulkUploadFindings:async t=>qe.post("/api/audit-findings/bulk-upload",t,{headers:{"Content-Type":"multipart/form-data"}})},p8=()=>{var En,Fn,vr,ri,Qn,Ds,lr,bt,br,Ir;const[t,e]=L.useState("2024+"),[n,s]=L.useState("2025"),[i,a]=L.useState(!1),[o,c]=L.useState(""),[u,f]=L.useState(!1),[h,p]=L.useState(!1),[m,g]=L.useState(!1),[y,b]=L.useState(()=>typeof window<"u"?window.innerWidth<640:!1),[v,w]=L.useState(0),[N,k]=L.useState(0),[j,S]=L.useState(null),[C,O]=L.useState(null),[M,B]=L.useState(null),[I,R]=L.useState(null),P=wt.useRef(null),q=wt.useRef(null),H=wt.useRef(null),[G,ne]=L.useState(!1),[X,ee]=L.useState(!1),[Y,U]=L.useState("overdue"),[T,W]=L.useState(!1),[z,Q]=L.useState(null),[Z,V]=L.useState([]),[ie,de]=L.useState(!1),[fe,ve]=L.useState("actions"),[He,$e]=L.useState(!1),[st,_e]=L.useState(!1),[it,rt]=L.useState(!1),at=L.useRef(!1),[Oe,oe]=L.useState("2025"),[ge,Ne]=L.useState(!1),[Ae,ke]=L.useState([]),re=L.useRef(null),{user:te,role:J,startImpersonation:ue}=Dr();L.useEffect(()=>{G&&(async()=>{try{const Se=(await Ot.getDropdownOptions("audit_year")).map(je=>parseInt(je)).filter(je=>!isNaN(je)).sort((je,ye)=>ye-je),ae=Se.length>0?Se:[new Date().getFullYear()];ke(ae),ae.length>0&&ae[0]!==void 0&&!Oe&&oe(ae[0].toString())}catch(we){console.error("Failed to fetch years:",we);const Se=new Date().getFullYear();ke([Se]),Oe||oe(Se.toString())}})()},[G]),L.useEffect(()=>{const se=we=>{re.current&&!re.current.contains(we.target)&&Ne(!1)};if(ge)return document.addEventListener("mousedown",se),()=>{document.removeEventListener("mousedown",se)}},[ge]);const Ce=se=>{oe(se.toString()),Ne(!1)},ze=F("shadow-md hover:shadow-lg transition-all whitespace-nowrap",y?"w-full justify-center py-3 text-base":"min-w-[150px]");L.useEffect(()=>{const se=()=>{b(window.innerWidth<640)};return se(),window.addEventListener("resize",se),()=>window.removeEventListener("resize",se)},[]);const Fe=async se=>{try{await ue(se),window.location.reload()}catch{}};wt.useEffect(()=>{console.log("Dashboard Role:",J),console.log("Should show View As:",J==="admin")},[J]),wt.useEffect(()=>{h&&P.current&&setTimeout(()=>{const se=P.current;if(se){const we=se.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:we-200,behavior:"smooth"})}},200)},[h]),wt.useEffect(()=>{u&&q.current&&setTimeout(()=>{const se=q.current;if(se){const we=se.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:we-200,behavior:"smooth"})}},200)},[u]),wt.useEffect(()=>{const se=Se=>{Se.key==="Escape"&&m&&g(!1)},we=Se=>{const ae=Se.target;m&&H.current&&!H.current.contains(ae)&&g(!1)};if(m)return window.addEventListener("keydown",se),window.addEventListener("click",we),()=>{window.removeEventListener("keydown",se),window.removeEventListener("click",we)}},[m]);const{data:Ue,isLoading:ht}=SE(),{data:Te,isLoading:St}=CE(),{data:Dt,isLoading:yr}=AE(void 0,void 0),{data:It,isLoading:Sn}=U1(t),{data:yn,isLoading:Sr}=U1("2024+"),{data:Ct,isLoading:Xt}=RE(),{data:Qt,isLoading:vn}=TE(),{data:At,isLoading:Jt}=IE({}),{data:ct,isLoading:rn}=FE(t),{data:Tt,isLoading:Ft}=Z_(),{data:jt,isLoading:sn}=DE(),{data:zt,isLoading:hn}=qE(),{data:Ht,isLoading:Cn}=WE(),Nn=wt.useCallback(se=>{if(se==null)return"-";let we=null;if(typeof se=="number")we=Number.isNaN(se)?null:se;else{const De=se.trim();if(!De||De==="-")return"-";const kt=De.replace(/,/g,""),Jn=Number(kt);we=Number.isFinite(Jn)?Jn:null}if(we===null)return typeof se=="string"?se:"-";if(we===0)return"0";const Se=we<0?"-":"",ae=Math.abs(we),je=(De,kt,Jn)=>{const wr=De/kt,Yn=wr>=100?0:wr>=10?1:2;return`${wr.toFixed(Yn)}${Jn}`};let ye;return ae>=1e9?ye=je(ae,1e9,"B"):ae>=1e6?ye=je(ae,1e6,"M"):ae>=1e3?ye=je(ae,1e3,"K"):ye=Math.round(ae).toLocaleString("en-US"),`${Se}${ye}`},[]),{data:xn,isLoading:ei}=UE(),{data:Mt,isLoading:Cr}=HE(),{data:le,isLoading:We}=zE(t),{data:Ve,isLoading:ot}=BE(t),{data:Ut,isLoading:bn}=EE(t),{data:tr,isLoading:Ts}=LE(t),In=L.useMemo(()=>{if(!(It!=null&&It.statusDistribution))return{labels:[],datasets:[]};const se=It.statusDistribution,we=Object.keys(se),Se=Object.values(se),ae={Open:"rgba(59, 130, 246, 0.8)","Risk Accepted":"rgba(147, 51, 234, 0.8)",Completed:"rgba(34, 197, 94, 0.8)",Overdue:"rgba(239, 68, 68, 0.8)"},je={Open:"rgba(59, 130, 246, 1)","Risk Accepted":"rgba(147, 51, 234, 1)",Completed:"rgba(34, 197, 94, 1)",Overdue:"rgba(239, 68, 68, 1)"};return{labels:we,datasets:[{data:Se,backgroundColor:we.map(ye=>ae[ye]||"rgba(156, 163, 175, 0.8)"),borderColor:we.map(ye=>je[ye]||"rgba(156, 163, 175, 1)"),borderWidth:2}]}},[It]),on=L.useMemo(()=>{if(!ct||typeof ct!="object")return{labels:[],datasets:[]};const se=ct,we=Object.keys(se).filter(je=>je!=="Unassigned").slice(0,10),Se=["Open","Risk Accepted","Completed","Overdue"],ae={Open:"rgba(59, 130, 246, 0.9)","Risk Accepted":"rgba(147, 51, 234, 0.9)",Completed:"rgba(34, 197, 94, 0.9)",Overdue:"rgba(239, 68, 68, 0.9)"};return{labels:we,datasets:Se.map(je=>({label:je,data:we.map(ye=>{const De=se[ye];return De&&De[je]||0}),backgroundColor:ae[je]||"rgba(156, 163, 175, 0.9)",barPercentage:.7,categoryPercentage:.8}))}},[ct]),bi=L.useMemo(()=>{if(!Dt||typeof Dt!="object")return{labels:[],datasets:[]};const se=Object.keys(Dt).sort(),we=["Completed","Risk Accepted","Open"],Se={Completed:"rgba(34, 197, 94, 0.9)","Risk Accepted":"rgba(147, 51, 234, 0.9)",Open:"rgba(59, 130, 246, 0.9)"};return{labels:se,datasets:we.map(ae=>({label:ae,data:se.map(je=>{const ye=Dt[je];return ye&&typeof ye=="object"&&ye[ae]||0}),backgroundColor:Se[ae]||"rgba(156, 163, 175, 0.9)"}))}},[Dt]),vs=L.useMemo(()=>{if(!At||typeof At!="object")return{labels:[],datasets:[]};const se=["-720360","-360180","-18090","-9030","-300","030","3090","90180","180360","360720","720+"],we={"-720360":{bg:"rgba(185, 28, 28, 0.9)",border:"rgba(185, 28, 28, 1)"},"-360180":{bg:"rgba(220, 38, 38, 0.9)",border:"rgba(220, 38, 38, 1)"},"-18090":{bg:"rgba(239, 68, 68, 0.9)",border:"rgba(239, 68, 68, 1)"},"-9030":{bg:"rgba(248, 113, 113, 0.9)",border:"rgba(248, 113, 113, 1)"},"-300":{bg:"rgba(251, 146, 60, 0.9)",border:"rgba(251, 146, 60, 1)"},"030":{bg:"rgba(250, 204, 21, 0.9)",border:"rgba(250, 204, 21, 1)"},"3090":{bg:"rgba(163, 230, 53, 0.9)",border:"rgba(163, 230, 53, 1)"},"90180":{bg:"rgba(74, 222, 128, 0.9)",border:"rgba(74, 222, 128, 1)"},"180360":{bg:"rgba(34, 197, 94, 0.9)",border:"rgba(34, 197, 94, 1)"},"360720":{bg:"rgba(22, 163, 74, 0.9)",border:"rgba(22, 163, 74, 1)"},"720+":{bg:"rgba(21, 128, 61, 0.9)",border:"rgba(21, 128, 61, 1)"}},Se=se.filter(ae=>At[ae]!==void 0);return{labels:Se,datasets:[{label:"Number of Actions",data:Se.map(ae=>At[ae]||0),backgroundColor:Se.map(ae=>{var je;return((je=we[ae])==null?void 0:je.bg)||"rgba(156, 163, 175, 0.9)"}),borderColor:Se.map(ae=>{var je;return((je=we[ae])==null?void 0:je.border)||"rgba(156, 163, 175, 1)"}),borderWidth:2}]}},[At]),Ga=L.useMemo(()=>jt!=null&&jt.labels?{labels:jt.labelsWithGroups?jt.labelsWithGroups.map(we=>we.fullLabel):jt.labels,datasets:[{label:"2024",data:jt.data2024,backgroundColor:"rgba(251, 146, 60, 0.2)",borderColor:"rgba(251, 146, 60, 1)",borderWidth:y?4:3,pointBackgroundColor:"rgba(251, 146, 60, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(251, 146, 60, 1)",pointRadius:y?6:5,pointHoverRadius:8,tension:.1},{label:"2025",data:jt.data2025,backgroundColor:"rgba(59, 130, 246, 0.2)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:y?4:3,pointBackgroundColor:"rgba(59, 130, 246, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(59, 130, 246, 1)",pointRadius:y?6:5,pointHoverRadius:8,tension:.1}]}:{labels:[],datasets:[]},[jt,y]),ti=se=>{c(se),a(!0)},Xa=async(se,we,Se)=>{de(!0),Q({auditYear:se,auditName:we,riskLevel:Se}),W(!0);try{const ae=fe==="actions"?await Yt.getActionsByAuditRiskDetail(se,we,Se):await Yt.getFindingsByAuditRiskDetail(se,we,Se);V(ae)}catch(ae){console.error("Failed to fetch audit risk data:",ae),V([])}finally{de(!1)}},ni=()=>{ne(!0)};wt.useEffect(()=>{if(!G)return;const se=[];if(y){const we=setTimeout(()=>{const Se=document.getElementById("audit-plan-section");if(Se){const ae=Se.getBoundingClientRect(),je=window.pageYOffset||document.documentElement.scrollTop,ye=ae.top+je;window.scrollTo({top:Math.max(0,ye-20),behavior:"smooth"})}},300);se.push(we)}else{const we=setTimeout(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{const Se=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);window.scrollTo({top:Se,behavior:"smooth"})})})},1e3);se.push(we)}return()=>{se.forEach(we=>clearTimeout(we))}},[G,y]);const bs=()=>{ne(!1),$e(!1),at.current=!1,window.scrollTo({top:0,behavior:"smooth"})};wt.useEffect(()=>{if(!u&&!h){$e(!1);return}const se=()=>{if(!u&&!h){$e(!1);return}const we=document.getElementById("scorecard-toggle");if(we){const Se=we.getBoundingClientRect();$e(Se.top<0)}else $e(!1)};return window.addEventListener("scroll",se),se(),()=>window.removeEventListener("scroll",se)},[u,h]),wt.useEffect(()=>{if(!u&&!h){_e(!1);return}const se=()=>{var ye,De;if((window.pageYOffset||document.documentElement.scrollTop)<100){_e(!1);return}const Se=(ye=q.current)==null?void 0:ye.getBoundingClientRect(),ae=(De=P.current)==null?void 0:De.getBoundingClientRect(),je=!!(u&&Se&&Se.top<200||h&&ae&&ae.top<200);_e(je)};return window.addEventListener("scroll",se),se(),()=>window.removeEventListener("scroll",se)},[u,h]),wt.useEffect(()=>{if(!G){rt(!1);return}if(!y){rt(!1);return}const se=()=>{const we=document.getElementById("audit-plan-section");if(!we){rt(!1);return}const ae=we.getBoundingClientRect().top<0;rt(ae)};return window.addEventListener("scroll",se),se(),()=>{window.removeEventListener("scroll",se)}},[G,y]);const An=()=>{switch(J){case"admin":return"Admin Dashboard - Full System Control";case"top_management":return"Executive Dashboard - Strategic Overview";case"department_director":return"Director Dashboard - Department Metrics";case"VP":return"VP Dashboard - High-Level Insights";case"team":return"Team Dashboard - Your Tasks & Projects";case"auditor":return"Auditor Dashboard - Your Audits";default:return"Dashboard - Overview"}},Vn=L.useMemo(()=>{const se=In.labels,we=In.datasets&&In.datasets[0]?In.datasets[0]:void 0;if(!se||!(we!=null&&we.data))return[];const Se=Array.isArray(we.backgroundColor)?we.backgroundColor:se.map(()=>we.backgroundColor||"#9ca3af");return se.map((ae,je)=>{var ye;return{label:ae,value:Number(((ye=we.data)==null?void 0:ye[je])??0),color:Se[je]||"#9ca3af"}})},[In]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:F("flex items-center",y?"gap-2":"gap-3"),children:[r.jsx("h1",{className:F("font-bold text-gray-900",y?"text-[12px]":"text-[20px]"),children:"Dashboard"}),r.jsx(Ze,{variant:J==="admin"?"danger":J==="top_management"?"warning":J==="department_director"?"info":"default",size:y?"xs":"md",children:J==null?void 0:J.replace("_"," ").toUpperCase()})]}),r.jsxs("p",{className:F("text-gray-500",y?"text-[7.2px] mt-0.5":"text-[9px]"),children:[An(),"  Welcome, ",(te==null?void 0:te.name)||"User","!"]})]}),r.jsx("div",{className:F("flex items-center gap-4",y&&"gap-1.5"),children:J==="admin"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"md:hidden",children:r.jsx(h8,{onSelectUser:Fe,filterByRole:["team","team_manager"]})}),r.jsx("div",{className:"hidden md:block",children:r.jsx(Qd,{onSelectUser:Fe,filterByRole:["team","team_manager"]})})]})})]}),r.jsx(qr,{component:"audit_projects_by_year_chart",children:r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:F("flex items-center justify-between mb-6",y&&"mb-4"),children:[r.jsx("h2",{className:F("font-bold text-gray-900",y?"text-[12.8px]":"text-[16px]"),children:"Performance Overview"}),r.jsxs("div",{ref:H,className:"relative flex items-center gap-2",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("button",{onClick:()=>g(!m),className:F("relative inline-flex items-center justify-center rounded-lg transition-all duration-200 hover:scale-105",y?"h-[22.4px] px-[6.4px] gap-[4.8px]":"h-[28.8px] px-[9.6px] gap-[6.4px]",u||h||m?"bg-gradient-to-br from-purple-500 to-indigo-600 text-white shadow-lg shadow-purple-500/40":"bg-gray-100 text-gray-600 hover:bg-purple-100 hover:text-purple-600"),children:[m?r.jsx("svg",{className:F("flex-shrink-0",y?"w-[9.6px] h-[9.6px]":"w-[12.8px] h-[12.8px]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):r.jsx("svg",{className:F("flex-shrink-0",y?"w-[9.6px] h-[9.6px]":"w-[12.8px] h-[12.8px]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r.jsx("span",{className:F("font-medium",y?"text-[6.4px]":"text-[9px]"),children:"View Charts"}),(u||h)&&r.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:r.jsx("span",{className:"text-[8px] text-white",children:""})})]}),r.jsx("div",{className:"absolute right-0 top-full mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10",children:r.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-2 py-1 whitespace-nowrap shadow-lg",children:[m?"Close chart options":"Open chart options",r.jsx("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-gray-900 rotate-45"})]})})]}),m&&r.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-right-2 duration-200",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("button",{onClick:()=>{f(!u)},className:F("relative rounded-full flex items-center justify-center transition-all duration-200","hover:scale-110",y?"w-8 h-8":"w-10 h-10",u?"bg-gradient-to-br from-purple-500 to-indigo-600 text-white shadow-lg shadow-purple-500/40":"bg-gray-100 text-gray-600 hover:bg-purple-100 hover:text-purple-600"),title:u?"Hide Charts":"See All Charts",children:[u?r.jsx("svg",{className:F(y?"w-4 h-4":"w-5 h-5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 15l7-7 7 7"})}):r.jsx("svg",{className:F(y?"w-4 h-4":"w-5 h-5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),u&&r.jsx("span",{className:F("absolute -top-1 -right-1 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",y?"w-3 h-3":"w-4 h-4"),children:r.jsx("span",{className:F("text-white",y?"text-[6px]":"text-[8px]"),children:""})})]}),r.jsx("div",{className:"absolute right-0 top-full mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10",children:r.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-2 py-1 whitespace-nowrap shadow-lg",children:[u?"Hide Charts":"See All Charts",r.jsx("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-gray-900 rotate-45"})]})})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("button",{onClick:()=>{p(!h)},className:F("relative rounded-full flex items-center justify-center transition-all duration-200","hover:scale-110",y?"w-8 h-8":"w-10 h-10",h?"bg-gradient-to-br from-purple-500 to-indigo-600 text-white shadow-lg shadow-purple-500/40":"bg-gray-100 text-gray-600 hover:bg-purple-100 hover:text-purple-600"),title:"Control Analysis (4 charts)",children:[r.jsx("span",{className:F(y?"text-sm":"text-lg"),children:""}),h&&r.jsx("span",{className:F("absolute -top-1 -right-1 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",y?"w-3 h-3":"w-4 h-4"),children:r.jsx("span",{className:F("text-white",y?"text-[6px]":"text-[8px]"),children:""})})]}),r.jsx("div",{className:"absolute right-0 top-full mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10",children:r.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-2 py-1 whitespace-nowrap shadow-lg",children:["Control Analysis",r.jsx("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-gray-900 rotate-45"})]})})]})]})]})]}),r.jsxs("div",{className:F("grid gap-6",y?"hidden":"grid-cols-1 lg:grid-cols-2 xl:grid-cols-4"),children:[r.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-sm",children:[r.jsx(vt,{title:"Audit Projects by Year",className:"border-b border-gray-200 pb-3"}),r.jsx("div",{className:"mt-4 grid grid-cols-6 gap-2",children:ht?r.jsx("div",{className:"col-span-6 flex justify-center py-8",children:r.jsx(Nt,{size:"lg"})}):Ue&&Array.isArray(Ue)?(()=>{const se={2025:"2.17",2024:"1.84",2023:"0.86",2022:"1.15",2021:"1.94"},we={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-3xl",layout:"vertical"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-lg",layout:"vertical"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl",layout:"vertical"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl",layout:"vertical"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl",layout:"vertical"}};return Ue.filter(ae=>ae.auditYear&&ae.auditYear!=="Unknown"&&typeof ae.auditYear=="string").slice(0,5).sort((ae,je)=>{const ye=String(ae.auditYear||"");return String(je.auditYear||"").localeCompare(ye)}).map((ae,je)=>{const ye=we[ae.auditYear]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl",layout:"vertical"};return r.jsxs("div",{className:F("relative p-2.5 overflow-hidden","hover:shadow-lg hover:scale-[1.02]","transition-all duration-300 ease-out","group cursor-pointer","border-2",ye.bgColor,ye.borderColor,ye.shape,je<2?"col-span-3":"col-span-2"),children:[r.jsx("div",{className:F("absolute inset-0 opacity-[0.03]",je%2===0?"bg-[radial-gradient(circle_at_30%_30%,rgba(0,0,0,0.5)_1px,transparent_1px)] bg-[length:16px_16px]":"bg-[linear-gradient(45deg,transparent_25%,rgba(0,0,0,0.05)_25%,rgba(0,0,0,0.05)_50%,transparent_50%,transparent_75%,rgba(0,0,0,0.05)_75%)] bg-[length:12px_12px]")}),r.jsxs("div",{className:F("relative z-10 flex flex-col h-full",ye.layout==="vertical"?"items-center justify-center":"items-start justify-between"),children:[r.jsxs("div",{className:F("flex items-center gap-1 mb-1.5",ye.textColor),children:[r.jsx("div",{className:F("w-4 h-4 rounded flex items-center justify-center","bg-white/60 backdrop-blur-sm","border border-current/20"),children:r.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("p",{className:"text-[10px] font-semibold tracking-wide uppercase",children:ae.auditYear})]}),r.jsx("div",{className:"mb-1.5",children:r.jsx("p",{className:F("text-2xl font-bold",ye.textColor,"group-hover:scale-110 transition-transform duration-300"),children:ae.count})}),r.jsxs("div",{className:F("flex items-center gap-0.5",ye.textColor),children:[r.jsx("svg",{className:F("w-2.5 h-2.5 opacity-70"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),r.jsxs("p",{className:F("text-[9px] font-medium opacity-80 whitespace-nowrap"),children:[se[ae.auditYear]||"0"," per auditor"]})]})]}),ye.shape==="rounded-lg"&&r.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 bg-white/20 transform rotate-45 translate-x-3 -translate-y-3"}),ye.shape==="rounded-3xl"&&r.jsx("div",{className:"absolute bottom-0 left-0 w-10 h-10 bg-white/20 rounded-full blur-xl"}),ye.shape==="rounded-xl"&&r.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 bg-white/20 rounded-full blur-lg"})]},je)})})():r.jsx("div",{className:"col-span-6 text-center text-gray-500 py-8",children:"No data available"})})]}),r.jsx(t6,{investigations:Te,loading:St}),r.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-sm",children:[r.jsx(vt,{title:"Fraud Internal Control by Year",className:"border-b border-gray-200 pb-3"}),r.jsx("div",{className:"mt-4 grid grid-cols-6 gap-2",children:Xt?r.jsx("div",{className:"col-span-6 flex justify-center py-8",children:r.jsx(Nt,{size:"lg"})}):Ct!=null&&Ct.scoreCards&&Array.isArray(Ct.scoreCards)?(()=>{const se={2025:"1.34M",2024:"2.71M",2023:"1.56M",2022:"3.50M",2021:"0.96M"},we=ae=>{if(!ae)return"0";const je=typeof ae=="string"?parseFloat(ae.replace(/,/g,"")):ae;return isNaN(je)?"0":`${(je/1e6).toFixed(2)}M`},Se={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-3xl",layout:"vertical"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-lg",layout:"vertical"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl",layout:"vertical"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl",layout:"vertical"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl",layout:"vertical"}};return Ct.scoreCards.filter(ae=>ae.year&&ae.year!=="2020").sort((ae,je)=>je.year.localeCompare(ae.year)).slice(0,5).map((ae,je)=>{const ye=Se[ae.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl",layout:"vertical"};return r.jsxs("div",{className:F("relative p-2.5 overflow-hidden","hover:shadow-lg hover:scale-[1.02]","transition-all duration-300 ease-out","group cursor-pointer","border-2",ye.bgColor,ye.borderColor,ye.shape,je<2?"col-span-3":"col-span-2"),children:[r.jsx("div",{className:F("absolute inset-0 opacity-[0.03]",je%2===0?"bg-[radial-gradient(circle_at_30%_30%,rgba(0,0,0,0.5)_1px,transparent_1px)] bg-[length:16px_16px]":"bg-[linear-gradient(45deg,transparent_25%,rgba(0,0,0,0.05)_25%,rgba(0,0,0,0.05)_50%,transparent_50%,transparent_75%,rgba(0,0,0,0.05)_75%)] bg-[length:12px_12px]")}),r.jsxs("div",{className:F("relative z-10 flex flex-col h-full",ye.layout==="vertical"?"items-center justify-center":"items-start justify-between"),children:[r.jsxs("div",{className:F("flex items-center gap-1 mb-1.5",ye.textColor),children:[r.jsx("div",{className:F("w-4 h-4 rounded flex items-center justify-center","bg-white/60 backdrop-blur-sm","border border-current/20"),children:r.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("p",{className:"text-[10px] font-semibold tracking-wide uppercase",children:ae.year})]}),r.jsx("div",{className:"mb-1.5",children:r.jsx("p",{className:F(je<2?"text-2xl":"text-[20px]","font-bold",ye.textColor,"group-hover:scale-110 transition-transform duration-300"),children:we(ae.impact)})}),r.jsxs("div",{className:F("flex items-center gap-0.5",ye.textColor),children:[r.jsx("svg",{className:F("w-2.5 h-2.5 opacity-70"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),r.jsxs("p",{className:F("text-[9px] font-medium opacity-80 whitespace-nowrap"),children:[se[ae.year]||"0"," per auditor"]})]})]}),ye.shape==="rounded-lg"&&r.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 bg-white/20 transform rotate-45 translate-x-3 -translate-y-3"}),ye.shape==="rounded-3xl"&&r.jsx("div",{className:"absolute bottom-0 left-0 w-10 h-10 bg-white/20 rounded-full blur-xl"}),ye.shape==="rounded-xl"&&r.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 bg-white/20 rounded-full blur-lg"})]},je)})})():r.jsx("div",{className:"col-span-6 text-center text-gray-500 py-8",children:"No data available"})})]}),r.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-sm",children:[r.jsx(vt,{title:"Loss Prevention Internal Control by Year",className:"border-b border-gray-200 pb-3"}),r.jsx("div",{className:"mt-4 grid grid-cols-6 gap-2",children:vn?r.jsx("div",{className:"col-span-6 flex justify-center py-8",children:r.jsx(Nt,{size:"lg"})}):(()=>{const se=(Qt==null?void 0:Qt.scoreCards)||(Qt==null?void 0:Qt.scoreCards2);if(!se||!Array.isArray(se))return r.jsx("div",{className:"col-span-6 text-center text-gray-500 py-8",children:"No data available"});const we={2025:"0.93M",2024:"0.76M",2023:"0.23M",2022:"0.07M",2021:"0.05M"},Se=je=>{if(!je)return"0";const ye=typeof je=="string"?parseFloat(je.replace(/,/g,"")):je;return isNaN(ye)?"0":`${(ye/1e6).toFixed(2)}M`},ae={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-3xl",layout:"vertical"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-lg",layout:"vertical"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl",layout:"vertical"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl",layout:"vertical"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl",layout:"vertical"}};return se.filter(je=>je.year&&je.year!=="2020").sort((je,ye)=>ye.year.localeCompare(je.year)).slice(0,5).map((je,ye)=>{const De=ae[je.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl",layout:"vertical"};return r.jsxs("div",{className:F("relative p-2.5 overflow-hidden","hover:shadow-lg hover:scale-[1.02]","transition-all duration-300 ease-out","group cursor-pointer","border-2",De.bgColor,De.borderColor,De.shape,ye<2?"col-span-3":"col-span-2"),children:[r.jsx("div",{className:F("absolute inset-0 opacity-[0.03]",ye%2===0?"bg-[radial-gradient(circle_at_30%_30%,rgba(0,0,0,0.5)_1px,transparent_1px)] bg-[length:16px_16px]":"bg-[linear-gradient(45deg,transparent_25%,rgba(0,0,0,0.05)_25%,rgba(0,0,0,0.05)_50%,transparent_50%,transparent_75%,rgba(0,0,0,0.05)_75%)] bg-[length:12px_12px]")}),r.jsxs("div",{className:F("relative z-10 flex flex-col h-full",De.layout==="vertical"?"items-center justify-center":"items-start justify-between"),children:[r.jsxs("div",{className:F("flex items-center gap-1 mb-1.5",De.textColor),children:[r.jsx("div",{className:F("w-4 h-4 rounded flex items-center justify-center","bg-white/60 backdrop-blur-sm","border border-current/20"),children:r.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("p",{className:"text-[10px] font-semibold tracking-wide uppercase",children:je.year})]}),r.jsx("div",{className:"mb-1.5",children:r.jsx("p",{className:F(ye<2?"text-2xl":"text-[20px]","font-bold",De.textColor,"group-hover:scale-110 transition-transform duration-300"),children:Se(je.impact)})}),r.jsxs("div",{className:F("flex items-center gap-0.5",De.textColor),children:[r.jsx("svg",{className:F("w-2.5 h-2.5 opacity-70"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),r.jsxs("p",{className:F("text-[9px] font-medium opacity-80 whitespace-nowrap"),children:[we[je.year]||"0"," per auditor"]})]})]}),De.shape==="rounded-lg"&&r.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 bg-white/20 transform rotate-45 translate-x-3 -translate-y-3"}),De.shape==="rounded-3xl"&&r.jsx("div",{className:"absolute bottom-0 left-0 w-10 h-10 bg-white/20 rounded-full blur-xl"}),De.shape==="rounded-xl"&&r.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 bg-white/20 rounded-full blur-lg"})]},ye)})})()})]})]}),y&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-50 via-indigo-50 to-purple-50 rounded-2xl p-2 shadow-inner",children:[r.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{label:"Audit",icon:"",index:0},{label:"Invest.",icon:"",index:1},{label:"Fraud",icon:"",index:2},{label:"LP",icon:"",index:3}].map(({label:se,icon:we,index:Se})=>r.jsxs("button",{onClick:()=>w(Se),className:F("relative px-2 py-1.5 rounded-lg text-[10px] font-bold transition-all duration-300","active:scale-95",v===Se?"bg-gradient-to-br from-purple-600 to-indigo-600 text-white shadow-lg transform scale-105":"bg-white/60 text-gray-600 hover:bg-white/80"),children:[r.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[r.jsx("span",{className:"text-sm",children:we}),r.jsx("span",{children:se})]}),v===Se&&r.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"})]},Se))}),r.jsx("div",{className:"mt-3 flex items-center justify-center gap-1.5",children:[0,1,2,3].map(se=>r.jsx("div",{className:F("h-1.5 rounded-full transition-all duration-500 ease-out",v===se?"w-8 bg-gradient-to-r from-purple-600 to-indigo-600 shadow-md":"w-1.5 bg-white/60")},se))})]}),r.jsxs("div",{className:"relative overflow-hidden",onTouchStart:se=>{var we;O(null),S(((we=se.targetTouches[0])==null?void 0:we.clientX)||null)},onTouchMove:se=>{var we;O(((we=se.targetTouches[0])==null?void 0:we.clientX)||null)},onTouchEnd:()=>{if(!j||!C)return;const se=j-C;Math.abs(se)>50&&(se>0&&v<3?w(v+1):se<0&&v>0&&w(v-1))},children:[v===0&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[r.jsx(vt,{title:"Audit Projects by Year",className:"border-b border-gray-200 pb-3 text-base font-bold"}),r.jsx("div",{className:"mt-4 space-y-3",children:ht?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(Nt,{size:"lg"})}):Ue&&Array.isArray(Ue)?(()=>{const se={2025:"2.17",2024:"1.84",2023:"0.86",2022:"1.15",2021:"1.94"},we={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-2xl"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-xl"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl"}},Se=Ue.filter(ae=>ae.auditYear&&ae.auditYear!=="Unknown"&&typeof ae.auditYear=="string").slice(0,5).sort((ae,je)=>{const ye=String(ae.auditYear||"");return String(je.auditYear||"").localeCompare(ye)});return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-2 gap-3",children:Se.slice(0,2).map((ae,je)=>{const ye=we[ae.auditYear]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return r.jsx("div",{className:F("relative p-4 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",ye.bgColor,ye.borderColor,ye.shape),children:r.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[r.jsx("p",{className:F("text-[10px] font-bold uppercase mb-2",ye.textColor),children:ae.auditYear}),r.jsx("p",{className:F("text-2xl font-bold mb-1",ye.textColor),children:ae.count}),r.jsxs("p",{className:F("text-[9px] font-medium opacity-70",ye.textColor),children:[se[ae.auditYear]||"0"," per auditor"]})]})},je)})}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:Se.slice(2,5).map((ae,je)=>{const ye=we[ae.auditYear]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return r.jsx("div",{className:F("relative p-3 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",ye.bgColor,ye.borderColor,ye.shape),children:r.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[r.jsx("p",{className:F("text-[9px] font-bold uppercase mb-1.5",ye.textColor),children:ae.auditYear}),r.jsx("p",{className:F("text-xl font-bold mb-1",ye.textColor),children:ae.count}),r.jsxs("p",{className:F("text-[8px] font-medium opacity-70",ye.textColor),children:[se[ae.auditYear]||"0"," per auditor"]})]})},je+2)})})]})})():r.jsx("div",{className:"text-center text-gray-500 py-8 text-sm",children:"No data available"})})]})}),v===1&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[r.jsx(vt,{title:"Investigations by Year",className:"border-b border-gray-200 pb-3 text-base font-bold"}),r.jsx("div",{className:"mt-4 space-y-3",children:St?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(Nt,{size:"lg"})}):Te&&Array.isArray(Te)&&Te.length>0?(()=>{const se={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-2xl"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-xl"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl"}},we=Te.reduce((ae,je)=>{const ye=je.year||"Unknown";if(ye!=="Unknown"&&ye!=="2020"){ae[ye]||(ae[ye]={total:0,year:ye,perAuditor:je.yearPerAuditor||"0.00"});const De=ae[ye];De&&(De.total+=je.count||1,je.yearPerAuditor&&(De.perAuditor=je.yearPerAuditor))}return ae},{}),Se=Object.values(we).filter(ae=>ae.year&&ae.year!=="Unknown").sort((ae,je)=>je.year.localeCompare(ae.year)).slice(0,5);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-2 gap-3",children:Se.slice(0,2).map((ae,je)=>{const ye=se[ae.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return r.jsx("div",{className:F("relative p-4 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",ye.bgColor,ye.borderColor,ye.shape),children:r.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[r.jsx("p",{className:F("text-[10px] font-bold uppercase mb-2",ye.textColor),children:ae.year}),r.jsx("p",{className:F("text-2xl font-bold mb-1",ye.textColor),children:ae.total}),r.jsxs("p",{className:F("text-[9px] font-medium opacity-70",ye.textColor),children:[ae.perAuditor||"0"," per auditor"]})]})},je)})}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:Se.slice(2,5).map((ae,je)=>{const ye=se[ae.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return r.jsx("div",{className:F("relative p-3 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",ye.bgColor,ye.borderColor,ye.shape),children:r.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[r.jsx("p",{className:F("text-[9px] font-bold uppercase mb-1.5",ye.textColor),children:ae.year}),r.jsx("p",{className:F("text-xl font-bold mb-1",ye.textColor),children:ae.total}),r.jsxs("p",{className:F("text-[8px] font-medium opacity-70",ye.textColor),children:[ae.perAuditor||"0"," per auditor"]})]})},je+2)})})]})})():r.jsx("div",{className:"text-center text-gray-500 py-8 text-sm",children:"No data available"})})]})}),v===2&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[r.jsx(vt,{title:"Fraud Internal Control by Year",className:"border-b border-gray-200 pb-3 text-base font-bold"}),r.jsx("div",{className:"mt-4 space-y-3",children:Xt?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(Nt,{size:"lg"})}):Ct!=null&&Ct.scoreCards&&Array.isArray(Ct.scoreCards)?(()=>{const se={2025:"1.34M",2024:"2.71M",2023:"1.56M",2022:"3.50M",2021:"0.96M"},we=je=>{if(!je)return"0";const ye=typeof je=="string"?parseFloat(je.replace(/,/g,"")):je;return isNaN(ye)?"0":`${(ye/1e6).toFixed(2)}M`},Se={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-2xl"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-xl"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl"}},ae=Ct.scoreCards.filter(je=>je.year&&je.year!=="2020").sort((je,ye)=>ye.year.localeCompare(je.year)).slice(0,5);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-2 gap-3",children:ae.slice(0,2).map((je,ye)=>{const De=Se[je.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return r.jsx("div",{className:F("relative p-4 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",De.bgColor,De.borderColor,De.shape),children:r.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[r.jsx("p",{className:F("text-[10px] font-bold uppercase mb-2",De.textColor),children:je.year}),r.jsx("p",{className:F("text-2xl font-bold mb-1",De.textColor),children:we(je.impact)}),r.jsxs("p",{className:F("text-[9px] font-medium opacity-70",De.textColor),children:[se[je.year]||"0"," per auditor"]})]})},ye)})}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:ae.slice(2,5).map((je,ye)=>{const De=Se[je.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return r.jsx("div",{className:F("relative p-3 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",De.bgColor,De.borderColor,De.shape),children:r.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[r.jsx("p",{className:F("text-[9px] font-bold uppercase mb-1.5",De.textColor),children:je.year}),r.jsx("p",{className:F("text-xl font-bold mb-1",De.textColor),children:we(je.impact)}),r.jsxs("p",{className:F("text-[8px] font-medium opacity-70",De.textColor),children:[se[je.year]||"0"," per auditor"]})]})},ye+2)})})]})})():r.jsx("div",{className:"text-center text-gray-500 py-8 text-sm",children:"No data available"})})]})}),v===3&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[r.jsx(vt,{title:"Loss Prevention by Year",className:"border-b border-gray-200 pb-3 text-sm font-bold"}),r.jsx("div",{className:"mt-4 space-y-3",children:vn?r.jsx("div",{className:"col-span-2 flex justify-center py-8",children:r.jsx(Nt,{size:"lg"})}):(()=>{const se=(Qt==null?void 0:Qt.scoreCards)||(Qt==null?void 0:Qt.scoreCards2);if(!se||!Array.isArray(se))return r.jsx("div",{className:"text-center text-gray-500 py-8 text-sm",children:"No data available"});const we={2025:"0.93M",2024:"0.76M",2023:"0.23M",2022:"0.07M",2021:"0.05M"},Se=ye=>{if(!ye)return"0";const De=typeof ye=="string"?parseFloat(ye.replace(/,/g,"")):ye;return isNaN(De)?"0":`${(De/1e6).toFixed(2)}M`},ae={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-2xl"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-xl"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl"}},je=se.filter(ye=>ye.year&&ye.year!=="2020").sort((ye,De)=>De.year.localeCompare(ye.year)).slice(0,5);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-2 gap-3",children:je.slice(0,2).map((ye,De)=>{const kt=ae[ye.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return r.jsx("div",{className:F("relative p-4 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",kt.bgColor,kt.borderColor,kt.shape),children:r.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[r.jsx("p",{className:F("text-[10px] font-bold uppercase mb-2",kt.textColor),children:ye.year}),r.jsx("p",{className:F("text-2xl font-bold mb-1",kt.textColor),children:Se(ye.impact)}),r.jsxs("p",{className:F("text-[9px] font-medium opacity-70",kt.textColor),children:[we[ye.year]||"0"," per auditor"]})]})},De)})}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:je.slice(2,5).map((ye,De)=>{const kt=ae[ye.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return r.jsx("div",{className:F("relative p-3 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",kt.bgColor,kt.borderColor,kt.shape),children:r.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[r.jsx("p",{className:F("text-[9px] font-bold uppercase mb-1.5",kt.textColor),children:ye.year}),r.jsx("p",{className:F("text-xl font-bold mb-1",kt.textColor),children:Se(ye.impact)}),r.jsxs("p",{className:F("text-[8px] font-medium opacity-70",kt.textColor),children:[we[ye.year]||"0"," per auditor"]})]})},De+2)})})]})})()})]})})]})]})]})}),r.jsxs(qr,{component:"finding_actions_status_chart",children:[r.jsxs("div",{id:"scorecard-toggle",className:F("flex items-center justify-between mb-4",y&&"mb-3"),children:[r.jsx("h2",{className:F("font-semibold text-gray-800",y?"text-[12.8px]":"text-[16px]"),children:"Key Metrics"}),r.jsxs("div",{className:F("flex rounded-lg",y?"gap-1 bg-gray-100 p-0.5":"gap-2 bg-gray-100 p-1"),children:[r.jsx(Be,{variant:t==="2024+"?"primary":"outline",size:"sm",onClick:()=>e("2024+"),className:F(y?"!px-1.5 !py-0.5 !text-[7px] !h-5 !min-h-0 leading-tight":"!px-2.5 !py-1.5 !text-xs !h-8"),children:" As of 2024"}),r.jsx(Be,{variant:t==="all"?"primary":"outline",size:"sm",onClick:()=>e("all"),className:F(y?"!px-1.5 !py-0.5 !text-[7px] !h-5 !min-h-0 leading-tight":"!px-2.5 !py-1.5 !text-xs !h-8"),children:" All Results"})]})]}),He&&(u||h)&&!G?r.jsxs("div",{className:F("fixed top-20 right-4 z-40 flex flex-col gap-2"),children:[r.jsxs("div",{className:"relative group",children:[r.jsx(Be,{variant:t==="2024+"?"primary":"outline",size:"sm",onClick:()=>e("2024+"),className:F("!rounded-full !p-0 !min-w-0 flex items-center justify-center !shadow-md",y?"!w-12 !h-12":"!w-10 !h-10"),children:r.jsxs("svg",{className:F(y?"w-5 h-5":"w-4 h-4"),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",fill:"none"}),r.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10",strokeWidth:"1.5"}),r.jsx("text",{x:"12",y:"19",textAnchor:"middle",fontSize:"11",fontWeight:"500",fill:"currentColor",fontFamily:"system-ui, -apple-system, sans-serif",children:"24"})]})}),r.jsx("div",{className:"absolute right-full mr-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap",children:r.jsx("div",{className:"bg-gray-900 text-white text-xs py-1.5 px-2 rounded shadow-lg",children:"As of 2024"})})]}),r.jsxs("div",{className:"relative group",children:[r.jsx(Be,{variant:t==="all"?"primary":"outline",size:"sm",onClick:()=>e("all"),className:F("!rounded-full !p-0 !min-w-0 flex items-center justify-center !shadow-md !bg-white",y?"!w-12 !h-12":"!w-10 !h-10"),children:r.jsx("span",{className:F(y?"text-base":"text-sm"),children:""})}),r.jsx("div",{className:"absolute right-full mr-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap",children:r.jsx("div",{className:"bg-gray-900 text-white text-xs py-1.5 px-2 rounded shadow-lg",children:"All Results"})})]})]}):null,y?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-50 via-indigo-50 to-purple-50 rounded-2xl p-2 shadow-inner",children:[r.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:[{label:"Total",icon:"",index:0},{label:"Open",icon:"",index:1},{label:"Overdue",icon:"",index:2},{label:"Financial",icon:"",index:3},{label:"Maturity",icon:"",index:4}].map(({label:se,icon:we,index:Se})=>r.jsxs("button",{onClick:()=>k(Se),className:F("relative px-1.5 py-1 rounded-lg text-[9px] font-bold transition-all duration-300","active:scale-95",N===Se?"bg-gradient-to-br from-purple-600 to-indigo-600 text-white shadow-lg transform scale-105":"bg-white/60 text-gray-600 hover:bg-white/80"),children:[r.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[r.jsx("span",{className:"text-xs",children:we}),r.jsx("span",{className:"leading-tight",children:se})]}),N===Se&&r.jsx("div",{className:"absolute -bottom-0.5 left-1/2 transform -translate-x-1/2 w-0.5 h-0.5 bg-white rounded-full"})]},Se))}),r.jsx("div",{className:"mt-2 flex items-center justify-center gap-1",children:[0,1,2,3,4].map(se=>r.jsx("div",{className:F("h-1 rounded-full transition-all duration-500 ease-out",N===se?"w-6 bg-gradient-to-r from-purple-600 to-indigo-600 shadow-md":"w-1 bg-white/60")},se))})]}),r.jsxs("div",{className:"relative overflow-hidden",onTouchStart:se=>{var we;R(null),B(((we=se.targetTouches[0])==null?void 0:we.clientX)||null)},onTouchMove:se=>{var we;R(((we=se.targetTouches[0])==null?void 0:we.clientX)||null)},onTouchEnd:()=>{if(!M||!I)return;const se=M-I;Math.abs(se)>50&&(se>0&&N<4?k(N+1):se<0&&N>0&&k(N-1))},children:[N===0&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[r.jsx(vt,{title:"Total Actions",subtitle:"All finding actions",action:r.jsx(Ze,{variant:"default",size:"sm",children:t==="2024+"?"2024+":"All"})}),r.jsx("div",{className:"mt-3 min-h-[120px] flex flex-col justify-center items-center px-4 pb-3",children:Sn?r.jsx("div",{className:"flex justify-center items-center",children:r.jsx(Nt,{size:"sm"})}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-3xl font-bold text-purple-600 mb-2",children:It!=null&&It.statusDistribution?Object.values(It.statusDistribution).reduce((se,we)=>se+we,0):0}),r.jsx("p",{className:"text-[10px] text-gray-500 text-center",children:"All statuses (Open, Overdue, etc.)"})]})})]})}),N===1&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[r.jsx(vt,{title:"Open Actions",subtitle:"Pending finding actions",action:r.jsx(Ze,{variant:"default",size:"sm",children:t==="2024+"?"2024+":"All"})}),r.jsx("div",{className:"mt-3 min-h-[120px] flex flex-col justify-center items-center px-4 pb-3",children:Sn?r.jsx("div",{className:"flex justify-center items-center",children:r.jsx(Nt,{size:"sm"})}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-3xl font-bold text-yellow-600 mb-2",children:((En=It==null?void 0:It.statusDistribution)==null?void 0:En.Open)||0}),r.jsx("p",{className:"text-[10px] text-gray-500 text-center",children:"Status: Open"})]})})]})}),N===2&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[r.jsx(vt,{title:"Overdue Actions",subtitle:"Past due date",action:r.jsx(Ze,{variant:"default",size:"sm",children:t==="2024+"?"2024+":"All"})}),r.jsx("div",{className:"mt-3 min-h-[120px] flex flex-col justify-center items-center px-4 pb-3",children:Sn?r.jsx("div",{className:"flex justify-center items-center",children:r.jsx(Nt,{size:"sm"})}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-3xl font-bold text-red-600 mb-2",children:((Fn=It==null?void 0:It.statusDistribution)==null?void 0:Fn.Overdue)||0}),r.jsx("p",{className:"text-[10px] text-gray-500 text-center",children:"Status: Overdue"})]})})]})}),N===3&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[r.jsx(vt,{title:"Financial Impact",subtitle:"Total monetary impact",action:r.jsx(Ze,{variant:"default",size:"sm",children:"2024+"})}),r.jsx("div",{className:"mt-3 min-h-[120px] flex flex-col justify-center items-center px-4 pb-3",children:Sr?r.jsx("div",{className:"flex justify-center items-center",children:r.jsx(Nt,{size:"sm"})}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-2xl font-bold text-green-600 mb-2 text-center",children:yn!=null&&yn.totalFinancialImpact?mr(yn.totalFinancialImpact):"0 "}),r.jsxs("p",{className:"text-[10px] text-gray-500 text-center",children:["From ",((vr=yn==null?void 0:yn.parentKeys)==null?void 0:vr.length)||0," findings"]})]})})]})}),N===4&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsxs(Ie,{variant:"elevated",className:"bg-gradient-to-br from-indigo-50 to-white border border-gray-200 shadow-lg",children:[r.jsx(vt,{title:"Audit Maturity",subtitle:"Average Score",action:r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>s("2024"),className:F("px-2 py-1 text-xs font-medium rounded transition-colors",n==="2024"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"2024"}),r.jsx("button",{onClick:()=>s("2025"),className:F("px-2 py-1 text-xs font-medium rounded transition-colors",n==="2025"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"2025"})]})}),r.jsx("div",{className:"mt-3 min-h-[120px] flex flex-col justify-center items-center px-4 pb-3",children:Ft?r.jsx("div",{className:"flex justify-center items-center",children:r.jsx(Nt,{size:"sm"})}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"flex items-baseline gap-1.5 justify-center",children:[r.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:n==="2024"?Tt!=null&&Tt.average2024?Tt.average2024.toFixed(1):"-":Tt!=null&&Tt.average2025?Tt.average2025.toFixed(1):"-"}),r.jsx("span",{className:"text-lg text-indigo-400 font-medium",children:"/ 5.0"})]})})})]})})]})]}):r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-[19.2px]",children:[r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Total Actions",subtitle:"All finding actions",action:r.jsx(Ze,{variant:"default",size:"sm",children:t==="2024+"?"2024+":"All"})}),r.jsx("div",{className:"mt-4 min-h-[100px] flex flex-col justify-center",children:Sn?r.jsx("div",{className:"flex justify-center items-center",children:r.jsx(Nt,{size:"lg"})}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-3xl font-bold text-purple-600",children:It!=null&&It.statusDistribution?Object.values(It.statusDistribution).reduce((se,we)=>se+we,0):0}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"All statuses (Open, Overdue, etc.)"})]})})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Open Actions",subtitle:"Pending finding actions",action:r.jsx(Ze,{variant:"default",size:"sm",children:t==="2024+"?"2024+":"All"})}),r.jsx("div",{className:"mt-4 min-h-[100px] flex flex-col justify-center",children:Sn?r.jsx("div",{className:"flex justify-center items-center",children:r.jsx(Nt,{size:"lg"})}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:((ri=It==null?void 0:It.statusDistribution)==null?void 0:ri.Open)||0}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Status: Open"})]})})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Overdue Actions",subtitle:"Past due date",action:r.jsx(Ze,{variant:"default",size:"sm",children:t==="2024+"?"2024+":"All"})}),r.jsx("div",{className:"mt-4 min-h-[100px] flex flex-col justify-center",children:Sn?r.jsx("div",{className:"flex justify-center items-center",children:r.jsx(Nt,{size:"lg"})}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-3xl font-bold text-red-600",children:((Qn=It==null?void 0:It.statusDistribution)==null?void 0:Qn.Overdue)||0}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Status: Overdue"})]})})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Financial Impact",subtitle:"Total monetary impact",action:r.jsx(Ze,{variant:"default",size:"sm",children:"2024+"})}),r.jsx("div",{className:"mt-4 min-h-[100px] flex flex-col justify-center",children:Sr?r.jsx("div",{className:"flex justify-center items-center",children:r.jsx(Nt,{size:"lg"})}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:yn!=null&&yn.totalFinancialImpact?mr(yn.totalFinancialImpact):"0 "}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["From ",((Ds=yn==null?void 0:yn.parentKeys)==null?void 0:Ds.length)||0," findings"]})]})})]}),r.jsxs(Ie,{variant:"elevated",className:"bg-gradient-to-br from-indigo-50 to-white",children:[r.jsx(vt,{title:"Audit Maturity",subtitle:"Average Score",action:r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>s("2024"),className:`px-3 py-1 text-xs font-medium rounded transition-colors ${n==="2024"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"2024"}),r.jsx("button",{onClick:()=>s("2025"),className:`px-3 py-1 text-xs font-medium rounded transition-colors ${n==="2025"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"2025"})]})}),r.jsx("div",{className:"mt-4 min-h-[70px] flex flex-col justify-center",children:Ft?r.jsx("div",{className:"flex justify-center items-center",children:r.jsx(Nt,{size:"lg"})}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"flex items-baseline gap-2 justify-center",children:[r.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:n==="2024"?Tt!=null&&Tt.average2024?Tt.average2024.toFixed(1):"-":Tt!=null&&Tt.average2025?Tt.average2025.toFixed(1):"-"}),r.jsx("span",{className:"text-lg text-indigo-400 font-medium",children:"/ 5.0"})]})})})]})]}),r.jsxs("div",{className:F("flex flex-wrap justify-start gap-3 mt-6",y&&"justify-start"),children:[r.jsxs(Be,{variant:"outline",size:"sm",onClick:()=>{U("overdue"),ee(!0)},className:ze,children:[r.jsx("span",{className:"mr-2",children:""}),"Action Alerts"]}),r.jsxs(Be,{variant:"outline",size:"sm",onClick:ni,className:ze,children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"View Audit Plan"]})]})]}),h&&!u&&r.jsxs("div",{ref:P,className:"mt-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("div",{className:"h-px bg-gradient-to-r from-purple-500 to-indigo-600 flex-1"}),r.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2 whitespace-nowrap",children:[r.jsx("span",{children:""}),"Control Analysis Charts"]}),r.jsx("div",{className:"h-px bg-gradient-to-r from-indigo-600 to-purple-500 flex-1"})]}),r.jsxs("button",{onClick:()=>{p(!1),$e(!1),window.scrollTo({top:0,behavior:"smooth"})},className:F("flex items-center gap-2 px-4 py-2 rounded-lg","bg-gradient-to-r from-gray-100 to-gray-50","border border-gray-300","text-gray-700 font-medium text-sm","hover:from-gray-200 hover:to-gray-100","hover:border-gray-400","hover:shadow-md","transition-all duration-200","group"),children:[r.jsx("span",{className:"text-gray-500 group-hover:text-gray-700 transition-colors",children:""}),r.jsx("span",{children:"Hide"})]})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.jsx(qr,{component:"finding_distribution_risk_chart",children:r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Finding Distribution by Risk Type and Risk Level",children:r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",t==="2024+"?"As of 2024":"All Results"]}),r.jsx("span",{className:F("px-2 py-0.5 text-xs font-medium rounded-full",t==="2024+"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:t==="2024+"?" Filtered":" All Data"})]})}),r.jsx("div",{className:"mt-4 overflow-x-auto",children:ot?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"lg"})}):Ve&&Array.isArray(Ve)?r.jsx(r.Fragment,{children:y?r.jsx("div",{className:"grid grid-cols-2 gap-1.5 px-1",children:Ve.map((se,we)=>{var je;const Se=((je=se.type)==null?void 0:je.trim())||"-",ae=Se.toLowerCase().includes("total");return r.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",ae?"border-blue-700 col-span-2":"border-gray-200"),children:[r.jsx("div",{className:F("px-1.5 py-1",ae?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:r.jsx("h4",{className:"text-white font-semibold text-xs",children:Se})}),r.jsxs("div",{className:F("p-1.5 space-y-0.5",ae?"bg-blue-50":"bg-white"),children:[r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsx("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:"Critical:"}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:se.Critical||0})]}),r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsx("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:"High:"}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:se.High||0})]}),r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsx("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:"Medium:"}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:se.Medium||0})]}),r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsx("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:"Low:"}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:se.Low||0})]}),r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsx("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:"Total:"}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:se.Total||0})]})]})]},we)})}):r.jsxs("table",{className:F("w-full",y?"text-xs":"text-sm"),children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b-2 border-purple-600",children:[r.jsx("th",{className:F("text-left bg-blue-900 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"RISK TYPE"}),r.jsx("th",{className:F("text-center bg-gray-900 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"CRITICAL"}),r.jsx("th",{className:F("text-center bg-red-600 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"HIGH"}),r.jsx("th",{className:F("text-center bg-orange-500 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"MEDIUM"}),r.jsx("th",{className:F("text-center bg-green-600 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"LOW"}),r.jsx("th",{className:F("text-center bg-blue-600 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"T:"})]})}),r.jsx("tbody",{children:Ve.map((se,we)=>{var ae;const Se=(ae=se.type)==null?void 0:ae.includes("Total");return r.jsxs("tr",{className:`border-b ${Se?"bg-gray-100 font-bold":"hover:bg-gray-50"}`,children:[r.jsx("td",{className:F("text-left",y?"p-1.5":"p-3"),children:se.type}),r.jsx("td",{className:F("text-center",y?"p-1.5":"p-3"),children:se.Critical||0}),r.jsx("td",{className:F("text-center",y?"p-1.5":"p-3"),children:se.High||0}),r.jsx("td",{className:F("text-center",y?"p-1.5":"p-3"),children:se.Medium||0}),r.jsx("td",{className:F("text-center",y?"p-1.5":"p-3"),children:se.Low||0}),r.jsx("td",{className:F("text-center font-semibold",y?"p-1.5":"p-3"),children:se.Total||0})]},we)})})]})}):r.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(qr,{component:"finding_distribution_risk_chart",children:r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Fraud Internal Control",subtitle:"Data from Google Sheets"}),r.jsx("div",{className:"mt-4 overflow-x-auto",children:hn?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"lg"})}):zt!=null&&zt.result&&Array.isArray(zt.result)&&zt.result.length>0?r.jsx(r.Fragment,{children:y?r.jsx("div",{className:"grid grid-cols-2 gap-1.5 px-1",children:zt.result.slice(1).map((se,we)=>{var ye;const Se=((ye=se[0])==null?void 0:ye.trim())||"-",ae=Se.toLowerCase().includes("total"),je=zt.result[0]||[];return r.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",ae?"border-blue-700 col-span-2":"border-gray-200"),children:[r.jsx("div",{className:F("px-1.5 py-1",ae?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:r.jsx("h4",{className:"text-white font-semibold text-xs",children:Se==="Total"?"Total (EUR)":Se})}),r.jsx("div",{className:F("p-1.5 space-y-0.5",ae?"bg-blue-50":"bg-white"),children:se.slice(1).map((De,kt)=>{const Jn=je[kt+1],wr=Nn(De);return r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsxs("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:[Jn,":"]}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:wr})]},kt)})})]},we)})}):r.jsxs("table",{className:F("w-full",y?"text-xs":"text-sm"),children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b-2 border-purple-600",children:(lr=zt.result[0])==null?void 0:lr.map((se,we)=>r.jsx("th",{className:F("bg-blue-900 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3",we===0?"text-left":"text-center"),children:se},we))})}),r.jsx("tbody",{children:zt.result.slice(1).map((se,we)=>r.jsx("tr",{className:"border-b hover:bg-gray-50",children:se.map((Se,ae)=>{let je;if(ae===0){const ye=(Se==null?void 0:Se.trim())||"-";je=ye==="Total"?"Total (EUR)":ye}else je=Nn(Se);return r.jsx("td",{className:F(y?"p-1.5":"p-3",ae===0?"text-left":"text-center"),children:je},ae)})},we))})]})}):r.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})}),r.jsx(qr,{component:"finding_distribution_control_chart",children:r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Loss Prevention Internal Control",subtitle:"Data from Google Sheets"}),r.jsx("div",{className:"mt-4 overflow-x-auto",children:Cn?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"lg"})}):Ht!=null&&Ht.result&&Array.isArray(Ht.result)&&Ht.result.length>0?r.jsx(r.Fragment,{children:y?r.jsx("div",{className:"grid grid-cols-2 gap-1.5 px-1",children:Ht.result.slice(1).map((se,we)=>{var ye;const Se=((ye=se[0])==null?void 0:ye.trim())||"-",ae=Se.toLowerCase().includes("total"),je=Ht.result[0]||[];return r.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",ae?"border-blue-700 col-span-2":"border-gray-200"),children:[r.jsx("div",{className:F("px-1.5 py-1",ae?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:r.jsx("h4",{className:"text-white font-semibold text-xs",children:Se==="Total"?"Total (EUR)":Se})}),r.jsx("div",{className:F("p-1.5 space-y-0.5",ae?"bg-blue-50":"bg-white"),children:se.slice(1).map((De,kt)=>{const Jn=je[kt+1],wr=Nn(De);return r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsxs("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:[Jn,":"]}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:wr})]},kt)})})]},we)})}):r.jsxs("table",{className:F("w-full",y?"text-xs":"text-sm"),children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b-2 border-purple-600",children:(bt=Ht.result[0])==null?void 0:bt.map((se,we)=>r.jsx("th",{className:F("bg-blue-900 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3",we===0?"text-left":"text-center"),children:se},we))})}),r.jsx("tbody",{children:Ht.result.slice(1).map((se,we)=>r.jsx("tr",{className:"border-b hover:bg-gray-50",children:se.map((Se,ae)=>{let je;if(ae===0){const ye=(Se==null?void 0:Se.trim())||"-";je=ye==="Total"?"Total (EUR)":ye}else je=Nn(Se);return r.jsx("td",{className:F(y?"p-1.5":"p-3",ae===0?"text-left":"text-center"),children:je},ae)})},we))})]})}):r.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})})]})]}),u&&r.jsxs(r.Fragment,{children:[st&&(u||h)&&r.jsx("div",{className:F("fixed z-50 shadow-lg rounded-lg bg-white border border-gray-200","md:top-24 md:left-4 md:p-2",y?"top-20 left-2 p-0.5":"top-20 left-2 p-1"),children:r.jsx("button",{onClick:()=>{f(!1),p(!1),$e(!1),y?(window.scrollTo(0,0),setTimeout(()=>{window.scrollTo({top:0,behavior:"auto"}),document.documentElement.scrollTop=0,document.body.scrollTop=0},50)):window.scrollTo({top:0,behavior:"smooth"})},className:F("rounded-lg","bg-gradient-to-r from-gray-100 to-gray-50","border border-gray-300","text-gray-700 font-medium","hover:from-gray-200 hover:to-gray-100","hover:border-gray-400","hover:shadow-md","transition-all duration-200","group",y?"flex items-center justify-center px-1.5 py-2 h-auto min-h-[50px] w-8":"flex items-center justify-center px-2 py-2 w-10 h-10"),children:r.jsx("span",{className:"text-gray-500 group-hover:text-gray-700 transition-colors text-lg md:text-xl",children:""})})}),r.jsxs("div",{ref:q,className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(qr,{component:"finding_actions_status_chart",children:r.jsxs(Ie,{children:[r.jsx(vt,{children:r.jsxs("div",{children:[r.jsx("h2",{className:F("font-semibold text-gray-900",y?"text-base":"text-xl"),children:"Finding Actions Status"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("p",{className:F("text-gray-500 truncate flex-1",y?"text-xs":"text-sm"),children:"Current distribution (Click on a slice to view details)"}),r.jsx("span",{className:F("font-medium rounded-full flex-shrink-0",y?"px-1.5 py-0.5 text-[10px]":"px-2 py-0.5 text-xs",t==="2024+"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:t==="2024+"?" Filtered":" All Data"})]})]})}),r.jsx("div",{className:F("p-6",y&&"flex flex-col items-center"),children:r.jsxs("div",{className:F("w-full",y?"max-w-[360px]":""),children:[r.jsx(Wh,{data:In,height:y?320:360,loading:Sn,options:{onClick:(se,we)=>{var Se;if(we&&we.length>0&&we[0]){const ae=we[0].index,je=(Se=In.labels)==null?void 0:Se[ae];je&&ti(je)}},plugins:{legend:{display:!y,position:"bottom",labels:{padding:15,usePointStyle:!0,font:{size:12},generateLabels:se=>{const we=se.data;if(we.labels&&we.datasets&&we.datasets.length>0){const Se=we.datasets[0];if(!Se)return[];const ae=Se.backgroundColor;return we.labels.map((je,ye)=>{const De=Array.isArray(Se.data)?Se.data[ye]:0,kt=Array.isArray(ae)?ae[ye]:ae;return{text:`${je}: ${De}`,fillStyle:typeof kt=="string"?kt:"rgba(156, 163, 175, 0.8)",hidden:!1,index:ye}})}return[]}}},datalabels:{display:!1},tooltip:{callbacks:{label:se=>{const we=se.label||"",Se=se.parsed||0,je=se.dataset.data.reduce((De,kt)=>De+kt,0),ye=(Se/je*100).toFixed(1);return`${we}: ${Se} (${ye}%) - Click to view details`}}}}}}),y&&Vn.length>0&&r.jsx("div",{className:"mt-4 grid w-full max-w-[360px] grid-cols-2 gap-x-4 gap-y-3",children:Vn.map(se=>r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-700",children:[r.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full flex-shrink-0",style:{backgroundColor:se.color}}),r.jsxs("span",{className:"font-medium text-[11px] truncate",children:[se.label,":"]}),r.jsx("span",{className:"font-bold flex-shrink-0",children:se.value})]},se.label))})]})})]})}),r.jsx(qr,{component:"finding_actions_by_lead_chart",children:r.jsxs(Ie,{children:[r.jsx(vt,{children:r.jsxs("div",{children:[r.jsx("h2",{className:F("font-semibold text-gray-900",y?"text-base":"text-xl"),children:"Finding Actions by Lead and Status"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsxs("p",{className:F("text-gray-500",y?"text-xs":"text-sm"),children:["Action distribution by lead and status (",t==="2024+"?"2024+":"All",")"]}),r.jsx("span",{className:F("font-medium rounded-full",y?"px-1.5 py-0.5 text-[10px]":"px-2 py-0.5 text-xs",t==="2024+"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:t==="2024+"?" Filtered":" All Data"})]})]})}),r.jsx("div",{className:"p-6",children:y?r.jsx("div",{className:"flex flex-col gap-3",children:(()=>{var Se;return(((Se=on.labels)==null?void 0:Se.map((ae,je)=>{const ye=on.datasets.map(kt=>({label:kt.label,value:kt.data[je]||0,color:kt.backgroundColor})).filter(kt=>kt.value>0),De=ye.reduce((kt,Jn)=>kt+Jn.value,0);return{leadName:ae,statusBreakdown:ye,totalActions:De}}))||[]).filter(ae=>ae.totalActions>0).sort((ae,je)=>je.totalActions-ae.totalActions).map(({leadName:ae,statusBreakdown:je,totalActions:ye})=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 flex flex-col gap-3 transition-all active:scale-[0.99]",children:[r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900 text-[15px] leading-tight",children:ae}),r.jsx("span",{className:"text-[11px] text-gray-400 font-medium",children:"Lead Auditor"})]}),r.jsxs("div",{className:"flex items-baseline gap-1",children:[r.jsx("span",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:ye}),r.jsx("span",{className:"text-[10px] font-semibold text-gray-400 uppercase tracking-wider",children:"Actions"})]})]}),r.jsx("div",{className:"h-2.5 w-full flex rounded-full overflow-hidden bg-gray-100",children:je.map((De,kt)=>r.jsx("div",{style:{width:`${De.value/ye*100}%`,backgroundColor:De.color},className:"h-full first:rounded-l-full last:rounded-r-full"},kt))}),r.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:je.map(De=>r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-2 h-2 rounded-full ring-1 ring-white",style:{backgroundColor:De.color}}),r.jsxs("div",{className:"flex items-baseline gap-1",children:[r.jsx("span",{className:"text-[11px] font-bold text-gray-700",children:De.value}),r.jsx("span",{className:"text-[10px] text-gray-500 font-medium truncate max-w-[60px]",children:De.label})]})]},De.label))})]},ae))})()}):r.jsx(Pg,{data:on,height:400,loading:rn,options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,elements:{bar:{borderRadius:4}},plugins:{legend:{display:!0,position:"top",align:"end",labels:{padding:15,usePointStyle:!0,pointStyle:"circle",font:{size:12,weight:"bold"},color:"#374151"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,displayColors:!0,callbacks:{label:se=>{const we=se.dataset.label||"",Se=se.parsed.x||0;return`${we}: ${Se} actions`}}},datalabels:{display:!1}},scales:{x:{stacked:!0,beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11},color:"#6B7280",padding:8},border:{display:!1}},y:{stacked:!0,grid:{display:!1},ticks:{font:{size:11,weight:"bold"},color:"#374151",crossAlign:"far"},border:{display:!1}}},interaction:{mode:"y",intersect:!1},animation:{duration:750,easing:"easeInOutQuart"}}})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Ie,{children:[r.jsx(vt,{className:"relative",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 w-full",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:F("font-semibold text-gray-900",y?"text-base":"text-xl"),children:[fe==="actions"?"Action":"Finding"," Breakdown by Audit & Risk Level"]}),r.jsxs("p",{className:F("text-gray-500 mt-1 flex items-center gap-2",y?"text-xs":"text-sm"),children:["Breakdown by audit and risk (",t==="2024+"?"2024+":"All",")",r.jsx("span",{className:F("font-medium rounded-full",y?"px-1.5 py-0.5 text-[10px]":"px-2 py-0.5 text-xs",t==="2024+"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:t==="2024+"?" Filtered":" All Data"})]})]}),r.jsxs("div",{className:"bg-gray-100/80 p-0.5 rounded-lg flex items-center shadow-inner backdrop-blur-sm self-start md:self-auto",children:[r.jsx("button",{onClick:()=>ve("actions"),className:F("px-2.5 py-1 text-[11px] font-semibold rounded-md transition-all duration-200",fe==="actions"?"bg-white text-purple-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"Actions"}),r.jsx("button",{onClick:()=>ve("findings"),className:F("px-2.5 py-1 text-[11px] font-semibold rounded-md transition-all duration-200",fe==="findings"?"bg-white text-purple-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"Findings"})]})]})}),r.jsx("div",{className:"p-6",children:r.jsx(c8,{data:fe==="actions"?Ut||[]:tr||[],isLoading:fe==="actions"?bn:Ts,onCellClick:Xa})})]}),r.jsx(qr,{component:"audit_findings_chart",children:r.jsx(Pg,{title:"Audit Findings by Year and Status",subtitle:"Findings breakdown by year and status",data:bi,height:400,loading:yr,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",align:"end",labels:{padding:15,usePointStyle:!0,pointStyle:"circle",font:{size:12,weight:"bold"},color:"#374151"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,displayColors:!0,callbacks:{label:se=>{const we=se.dataset.label||"",Se=se.parsed.y||0;return`${we}: ${Se} findings`}}},datalabels:{display:!1}},scales:{x:{stacked:!0,grid:{display:!1},ticks:{font:{size:11,weight:"bold"},color:"#374151"},border:{display:!1}},y:{stacked:!0,beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11},color:"#6B7280",padding:8},border:{display:!1}}},interaction:{mode:"index",intersect:!1},animation:{duration:750,easing:"easeInOutQuart"}}})})]}),r.jsx(qr,{component:"department_actions_chart",children:y?r.jsxs(r.Fragment,{children:[r.jsx(qr,{component:"finding_actions_aging_chart",children:r.jsx(Lw,{data:vs,loading:Jt,title:"Finding Actions Age Distribution",subtitle:"All Open actions by days until/past due date",height:400,isMobile:y})}),r.jsx("div",{className:"mt-6 w-full",children:r.jsx(Hw,{title:"Audit Maturity",subtitle:"Maturity assessment across key dimensions",data:Ga,height:400,loading:sn,labelColors:jt!=null&&jt.labelsWithGroups?jt.labelsWithGroups.map(se=>({Governance:"#1f2937","Use of Technology":"#8b5cf6",People:"#10b981",Communications:"#3b82f6","Scope of Work":"#f59e0b"})[se.group]||"#374151"):void 0,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:0,bottom:0,left:0,right:0}},elements:{line:{borderWidth:3,tension:.1},point:{radius:4,hoverRadius:6,borderWidth:2}},scales:{r:{beginAtZero:!0,min:0,max:5,angleLines:{display:!0,color:"rgba(107, 114, 128, 0.3)",lineWidth:1.5},grid:{color:"rgba(107, 114, 128, 0.25)",lineWidth:1},ticks:{stepSize:1,font:{size:8,weight:500},color:"#9ca3af",backdropColor:"transparent",backdropPadding:1,z:1},pointLabels:{display:!0,font:{size:8.5,weight:600},color:se=>{var Se;const we={Governance:"#1f2937","Use of Technology":"#8b5cf6",People:"#10b981",Communications:"#3b82f6","Scope of Work":"#f59e0b"};if((Se=jt==null?void 0:jt.labelsWithGroups)!=null&&Se[se.index]){const ae=jt.labelsWithGroups[se.index].group;return we[ae]||"#374151"}return"#374151"},padding:1,callback:(se,we)=>{var ye;if(!se)return"";const Se={"Functional Reporting & Positioning (Governance)":"Functional Reporting",Resource:"Resource","Use of Technology":"Technology","Overall Opinions":"Overall Opinions","Audit Methodology & Reporting (Communications)":"Methodology","Planning (Scope of Work)":"Planning","Assurance (Scope of Work)":"Assurance","Risk Assessment (Scope of Work)":"Risk Assessment"};let ae="";Se[se]?ae=Se[se]:(ae=se.split(" (")[0]||se,ae.length>15&&(ae=ae.substring(0,12)+"..."));let je="";return(ye=jt==null?void 0:jt.labelsWithGroups)!=null&&ye[we.index]&&(je=jt.labelsWithGroups[we.index].group,je={Governance:"Gov","Use of Technology":"Tech",People:"People",Communications:"Comm","Scope of Work":"Scope"}[je]||je),je?`${ae}
${je}`:ae}}}},plugins:{legend:{display:!0,position:"top",align:"center",labels:{padding:10,usePointStyle:!0,font:{size:10,weight:600},color:"#374151",boxWidth:12,boxHeight:12}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#f9fafb",bodyColor:"#f9fafb",borderColor:"#4b5563",borderWidth:1,cornerRadius:6,padding:6,titleFont:{size:10,weight:600},bodyFont:{size:9},displayColors:!1,callbacks:{title:se=>{var ae;const we=((ae=se[0])==null?void 0:ae.label)||"";return String(we).split(" (")[0]},label:se=>{const we=se.dataset.label||"",Se=se.parsed.r||0;return`${we}: ${Se.toFixed(1)} / 5`}}}},animation:{duration:1500,easing:"easeInOutQuart"},interaction:{intersect:!1,mode:"index"}}})})]}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(qr,{component:"finding_actions_aging_chart",children:r.jsx(Lw,{data:vs,loading:Jt,title:"Finding Actions Age Distribution",subtitle:"All Open actions by days until/past due date",height:450,isMobile:y})}),r.jsx(Hw,{title:"Audit Maturity",subtitle:"Maturity assessment across key dimensions",data:Ga,height:450,loading:sn,labelColors:jt!=null&&jt.labelsWithGroups?jt.labelsWithGroups.map(se=>({Governance:"#1f2937","Use of Technology":"#8b5cf6",People:"#10b981",Communications:"#3b82f6","Scope of Work":"#d97706"})[se.group]||"#374151"):void 0,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:-10,bottom:20,left:-10,right:-10}},elements:{line:{borderWidth:4,tension:.1},point:{radius:5,hoverRadius:8,borderWidth:3}},scales:{r:{beginAtZero:!0,min:0,max:5,angleLines:{display:!0,color:"rgba(107, 114, 128, 0.45)",lineWidth:2},grid:{color:"rgba(107, 114, 128, 0.15)",lineWidth:1,drawOnChartArea:!0,drawTicks:!1,z:-1},ticks:{stepSize:1,display:!0,font:{size:12,weight:600,family:"'SF Pro Display', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif"},color:"#1e293b",backdropColor:"transparent",backdropPadding:0,showLabelBackdrop:!1,z:10},pointLabels:{display:!0,font:{size:11,weight:700},color:se=>{var Se;const we={Governance:"#1f2937","Use of Technology":"#8b5cf6",People:"#10b981",Communications:"#3b82f6","Scope of Work":"#d97706"};if((Se=jt==null?void 0:jt.labelsWithGroups)!=null&&Se[se.index]){const ae=jt.labelsWithGroups[se.index].group;return we[ae]||"#374151"}return"#374151"},padding:12,callback:(se,we)=>{if(!se)return"";const Se=se.split(" (");let ae=Se[0]??se,je="";if(Se.length>1&&Se[1]&&(je=Se[1].replace(")","").trim()),!je&&(jt!=null&&jt.labelsWithGroups)&&we.index!==void 0){const De=jt.labelsWithGroups[we.index];De&&De.group&&(je=De.group)}const ye={"Functional Reporting & Positioning":"Functional Reporting",Resource:"Resources","Use of Technology":"Technology","Overall Opinions":"Overall Opinions","Audit Methodology & Reporting":"Methodology",Planning:"Planning",Assurance:"Assurance","Risk Assessment":"Risk Assessment"};if(ae){const De=ye[ae];De?ae=De:ae.length>18&&(ae=ae.substring(0,15)+"...")}else return"";return je?[ae,`(${je})`]:ae}}}},plugins:{legend:{display:!0,position:"bottom",align:"center",fullSize:!1,labels:{padding:40,usePointStyle:!0,pointStyle:"line",boxWidth:32,boxHeight:4,font:{size:13,weight:700},generateLabels:se=>se.data.datasets.map((Se,ae)=>{const je=Se.label||"",ye=Se.borderColor||"#000";return{text:je,fillStyle:ye,strokeStyle:ye,fontColor:ye,lineWidth:4,hidden:!1,index:ae,datasetIndex:ae,pointStyle:"line"}})}},tooltip:{enabled:!0,backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#f9fafb",bodyColor:"#e5e7eb",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:6,padding:8,titleFont:{size:11,weight:600},bodyFont:{size:10,weight:500},displayColors:!0,usePointStyle:!1,boxWidth:8,boxHeight:8,boxPadding:4,animation:{duration:150},position:"nearest",filter:se=>se.parsed.r!==null&&se.parsed.r!==void 0,callbacks:{title:se=>{var ae;if(!se||se.length===0)return"";const we=((ae=se[0])==null?void 0:ae.label)||"";return String(we).split(" [")[0]||we},label:se=>{if(!se||se.parsed.r===null||se.parsed.r===void 0)return"";const we=se.dataset.label||"",Se=se.parsed.r||0;return`${we}: ${Se.toFixed(1)}`},labelColor:se=>({borderColor:se.dataset.borderColor||"#000",backgroundColor:se.dataset.borderColor||"#000",borderWidth:2,borderRadius:1})}}},animation:{duration:1500,easing:"easeInOutQuart"},interaction:{intersect:!0,mode:"point"}}})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(qr,{component:"finding_distribution_risk_chart",children:r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Finding Distribution by Risk Type and Risk Level",children:r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",t==="2024+"?"As of 2024":"All Results"]}),r.jsx("span",{className:F("px-2 py-0.5 text-xs font-medium rounded-full",t==="2024+"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:t==="2024+"?" Filtered":" All Data"})]})}),r.jsx("div",{className:"mt-4 overflow-x-auto",children:ot?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"lg"})}):Ve&&Array.isArray(Ve)?r.jsx(r.Fragment,{children:y?r.jsx("div",{className:"grid grid-cols-2 gap-1.5 px-1",children:Ve.map((se,we)=>{var je;const Se=((je=se.type)==null?void 0:je.trim())||"-",ae=Se.toLowerCase().includes("total");return r.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",ae?"border-blue-700 col-span-2":"border-gray-200"),children:[r.jsx("div",{className:F("px-1.5 py-1",ae?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:r.jsx("h4",{className:"text-white font-semibold text-xs",children:Se})}),r.jsxs("div",{className:F("p-1.5 space-y-0.5",ae?"bg-blue-50":"bg-white"),children:[r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsx("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:"Critical:"}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:se.Critical||0})]}),r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsx("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:"High:"}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:se.High||0})]}),r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsx("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:"Medium:"}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:se.Medium||0})]}),r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsx("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:"Low:"}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:se.Low||0})]}),r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsx("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:"Total:"}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:se.Total||0})]})]})]},we)})}):r.jsxs("table",{className:F("w-full",y?"text-xs":"text-sm"),children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b-2 border-purple-600",children:[r.jsx("th",{className:F("text-left bg-blue-900 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"RISK TYPE"}),r.jsx("th",{className:F("text-center bg-gray-900 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"CRITICAL"}),r.jsx("th",{className:F("text-center bg-red-600 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"HIGH"}),r.jsx("th",{className:F("text-center bg-orange-500 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"MEDIUM"}),r.jsx("th",{className:F("text-center bg-green-600 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"LOW"}),r.jsx("th",{className:F("text-center bg-blue-600 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"T:"})]})}),r.jsx("tbody",{children:Ve.map((se,we)=>{var ae;const Se=(ae=se.type)==null?void 0:ae.includes("Total");return r.jsxs("tr",{className:`border-b ${Se?"bg-gray-100 font-bold":"hover:bg-gray-50"}`,children:[r.jsx("td",{className:F("text-left",y?"p-1.5":"p-3"),children:se.type}),r.jsx("td",{className:F("text-center",y?"p-1.5":"p-3"),children:se.Critical||0}),r.jsx("td",{className:F("text-center",y?"p-1.5":"p-3"),children:se.High||0}),r.jsx("td",{className:F("text-center",y?"p-1.5":"p-3"),children:se.Medium||0}),r.jsx("td",{className:F("text-center",y?"p-1.5":"p-3"),children:se.Low||0}),r.jsx("td",{className:F("text-center font-semibold",y?"p-1.5":"p-3"),children:se.Total||0})]},we)})})]})}):r.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})}),r.jsx(qr,{component:"finding_distribution_control_chart",children:r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Finding Distribution by Internal Control Element and Risk Level",children:r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",t==="2024+"?"As of 2024":"All Results"]}),r.jsx("span",{className:F("px-2 py-0.5 text-xs font-medium rounded-full",t==="2024+"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:t==="2024+"?" Filtered":" All Data"})]})}),r.jsx("div",{className:"mt-4 overflow-x-auto",children:We?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"lg"})}):le&&Array.isArray(le)?r.jsx(r.Fragment,{children:y?r.jsx("div",{className:"space-y-1.5 px-1",children:(()=>{const se=le.filter(ae=>{var ye;return!(((ye=ae.control)==null?void 0:ye.trim())||"-").toLowerCase().includes("total")}),we=le.find(ae=>{var ye;return(((ye=ae.control)==null?void 0:ye.trim())||"-").toLowerCase().includes("total")}),Se=(ae,je,ye=!1,De=!1)=>{var kt;return r.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",ye?"border-blue-700":"border-gray-200"),children:[r.jsx("div",{className:F(De?"px-1.5 py-1":"px-2 py-1.5",ye?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:r.jsx("h4",{className:F("text-white font-semibold",De?"text-[9px] leading-tight":"text-xs"),children:((kt=ae.control)==null?void 0:kt.trim())||"-"})}),r.jsxs("div",{className:F(De?"p-1.5 space-y-0.5":"p-2 space-y-1",ye?"bg-blue-50":"bg-white"),children:[r.jsxs("div",{className:F("flex justify-between items-center",De?"py-0.5 text-[9px]":"py-0.5 text-[10px]"),children:[r.jsx("span",{className:F("font-medium",ye?"text-blue-700":"text-gray-600"),children:"Critical:"}),r.jsx("span",{className:F("font-semibold",ye?"text-blue-900 text-[11px]":De?"text-gray-900 text-[10px]":"text-gray-900 text-[11px]"),children:ae.Critical||0})]}),r.jsxs("div",{className:F("flex justify-between items-center",De?"py-0.5 text-[9px]":"py-0.5 text-[10px]"),children:[r.jsx("span",{className:F("font-medium",ye?"text-blue-700":"text-gray-600"),children:"High:"}),r.jsx("span",{className:F("font-semibold",ye?"text-blue-900 text-[11px]":De?"text-gray-900 text-[10px]":"text-gray-900 text-[11px]"),children:ae.High||0})]}),r.jsxs("div",{className:F("flex justify-between items-center",De?"py-0.5 text-[9px]":"py-0.5 text-[10px]"),children:[r.jsx("span",{className:F("font-medium",ye?"text-blue-700":"text-gray-600"),children:"Medium:"}),r.jsx("span",{className:F("font-semibold",ye?"text-blue-900 text-[11px]":De?"text-gray-900 text-[10px]":"text-gray-900 text-[11px]"),children:ae.Medium||0})]}),r.jsxs("div",{className:F("flex justify-between items-center",De?"py-0.5 text-[9px]":"py-0.5 text-[10px]"),children:[r.jsx("span",{className:F("font-medium",ye?"text-blue-700":"text-gray-600"),children:"Low:"}),r.jsx("span",{className:F("font-semibold",ye?"text-blue-900 text-[11px]":De?"text-gray-900 text-[10px]":"text-gray-900 text-[11px]"),children:ae.Low||0})]}),r.jsxs("div",{className:F("flex justify-between items-center",De?"py-0.5 text-[9px]":"py-0.5 text-[10px]"),children:[r.jsx("span",{className:F("font-medium",ye?"text-blue-700":"text-gray-600"),children:"Total:"}),r.jsx("span",{className:F("font-semibold",ye?"text-blue-900 text-[11px]":De?"text-gray-900 text-[10px]":"text-gray-900 text-[11px]"),children:ae.Total||0})]})]})]},je)};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:se.slice(0,2).map((ae,je)=>Se(ae,je,!1,!1))}),r.jsx("div",{className:"grid grid-cols-3 gap-1",children:se.slice(2,5).map((ae,je)=>Se(ae,je+2,!1,!0))}),we&&r.jsx("div",{className:"w-full",children:Se(we,se.length,!0,!1)})]})})()}):r.jsxs("table",{className:F("w-full",y?"text-xs":"text-sm"),children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b-2 border-purple-600",children:[r.jsx("th",{className:F("text-left bg-blue-900 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"INTERNAL CONTROL ELEMENT"}),r.jsx("th",{className:F("text-center bg-gray-900 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"CRITICAL"}),r.jsx("th",{className:F("text-center bg-red-600 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"HIGH"}),r.jsx("th",{className:F("text-center bg-orange-500 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"MEDIUM"}),r.jsx("th",{className:F("text-center bg-green-600 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"LOW"}),r.jsx("th",{className:F("text-center bg-blue-600 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3"),children:"TOTAL"})]})}),r.jsx("tbody",{children:le.map((se,we)=>{var ae;const Se=(ae=se.control)==null?void 0:ae.includes("Total");return r.jsxs("tr",{className:`border-b ${Se?"bg-gray-100 font-bold":"hover:bg-gray-50"}`,children:[r.jsx("td",{className:F("text-left",y?"p-1.5":"p-3"),children:se.control}),r.jsx("td",{className:F("text-center",y?"p-1.5":"p-3"),children:se.Critical||0}),r.jsx("td",{className:F("text-center",y?"p-1.5":"p-3"),children:se.High||0}),r.jsx("td",{className:F("text-center",y?"p-1.5":"p-3"),children:se.Medium||0}),r.jsx("td",{className:F("text-center",y?"p-1.5":"p-3"),children:se.Low||0}),r.jsx("td",{className:F("text-center font-semibold",y?"p-1.5":"p-3"),children:se.Total||0})]},we)})})]})}):r.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(qr,{component:"finding_distribution_risk_chart",children:r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Fraud Internal Control",subtitle:"Data from Google Sheets"}),r.jsx("div",{className:"mt-4 overflow-x-auto",children:hn?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"lg"})}):zt!=null&&zt.result&&Array.isArray(zt.result)&&zt.result.length>0?r.jsx(r.Fragment,{children:y?r.jsx("div",{className:"grid grid-cols-2 gap-2 px-1",children:zt.result.slice(1).map((se,we)=>{var ye;const Se=((ye=se[0])==null?void 0:ye.trim())||"-",ae=Se.toLowerCase().includes("total"),je=zt.result[0]||[];return r.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",ae?"border-blue-700 col-span-2":"border-gray-200"),children:[r.jsx("div",{className:F("px-2 py-1.5",ae?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:r.jsx("h4",{className:"text-white font-semibold text-xs",children:Se==="Total"?"Total (EUR)":Se})}),r.jsx("div",{className:F("p-2 space-y-1",ae?"bg-blue-50":"bg-white"),children:se.slice(1).map((De,kt)=>{const Jn=je[kt+1],wr=Nn(De);return r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsxs("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:[Jn,":"]}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:wr})]},kt)})})]},we)})}):r.jsxs("table",{className:F("w-full",y?"text-xs":"text-sm"),children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b-2 border-purple-600",children:(br=zt.result[0])==null?void 0:br.map((se,we)=>r.jsx("th",{className:F("bg-blue-900 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3",we===0?"text-left":"text-center"),children:se},we))})}),r.jsx("tbody",{children:zt.result.slice(1).map((se,we)=>r.jsx("tr",{className:"border-b hover:bg-gray-50",children:se.map((Se,ae)=>{let je;if(ae===0){const ye=(Se==null?void 0:Se.trim())||"-";je=ye==="Total"?"Total (EUR)":ye}else je=Nn(Se);return r.jsx("td",{className:F(y?"p-1.5":"p-3",ae===0?"text-left":"text-center"),children:je},ae)})},we))})]})}):r.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})}),r.jsx(qr,{component:"finding_distribution_control_chart",children:r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Loss Prevention Internal Control",subtitle:"Data from Google Sheets"}),r.jsx("div",{className:"mt-4 overflow-x-auto",children:Cn?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"lg"})}):Ht!=null&&Ht.result&&Array.isArray(Ht.result)&&Ht.result.length>0?r.jsx(r.Fragment,{children:y?r.jsx("div",{className:"grid grid-cols-2 gap-2 px-1",children:Ht.result.slice(1).map((se,we)=>{var ye;const Se=((ye=se[0])==null?void 0:ye.trim())||"-",ae=Se.toLowerCase().includes("total"),je=Ht.result[0]||[];return r.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",ae?"border-blue-700 col-span-2":"border-gray-200"),children:[r.jsx("div",{className:F("px-2 py-1.5",ae?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:r.jsx("h4",{className:"text-white font-semibold text-xs",children:Se==="Total"?"Total (EUR)":Se})}),r.jsx("div",{className:F("p-2 space-y-1",ae?"bg-blue-50":"bg-white"),children:se.slice(1).map((De,kt)=>{const Jn=je[kt+1],wr=Nn(De);return r.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[r.jsxs("span",{className:F("font-medium",ae?"text-blue-700":"text-gray-600"),children:[Jn,":"]}),r.jsx("span",{className:F("font-semibold",ae?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:wr})]},kt)})})]},we)})}):r.jsxs("table",{className:F("w-full",y?"text-xs":"text-sm"),children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b-2 border-purple-600",children:(Ir=Ht.result[0])==null?void 0:Ir.map((se,we)=>r.jsx("th",{className:F("bg-blue-900 text-white font-semibold",y?"p-1.5 text-[10px]":"p-3",we===0?"text-left":"text-center"),children:se},we))})}),r.jsx("tbody",{children:Ht.result.slice(1).map((se,we)=>r.jsx("tr",{className:"border-b hover:bg-gray-50",children:se.map((Se,ae)=>{let je;if(ae===0){const ye=(Se==null?void 0:Se.trim())||"-";je=ye==="Total"?"Total (EUR)":ye}else je=Nn(Se);return r.jsx("td",{className:F(y?"p-1.5":"p-3",ae===0?"text-left":"text-center"),children:je},ae)})},we))})]})}):r.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})})]})]}),G&&r.jsx("div",{id:"audit-plan-section",className:"mt-6",children:r.jsxs(Ie,{variant:"elevated",className:"bg-gradient-to-br from-violet-50 via-purple-50 to-white shadow-lg hover:shadow-xl transition-all duration-300",children:[r.jsx("div",{className:"hidden md:block",children:r.jsx(vt,{title:"Audit Plan - Progress Tracker",subtitle:"Current audit progress across all stages",action:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:bs,className:"text-sm text-gray-500 hover:text-gray-700 font-medium transition-all duration-200 flex items-center gap-1 px-3 py-1.5 rounded-lg hover:bg-gray-100",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Hide"]}),r.jsxs("a",{href:"/annual-audit-plan",className:"group text-sm text-purple-600 hover:text-purple-700 font-semibold transition-all duration-200 flex items-center gap-1 px-3 py-1.5 rounded-lg hover:bg-purple-100",children:["View All",r.jsx("svg",{className:"w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})}),r.jsxs("div",{className:"md:hidden flex items-start justify-between mb-4",children:[r.jsx("div",{children:r.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Audit Plan - Progress Tracker"})}),r.jsxs("div",{className:"ml-4 flex items-center gap-1.5",children:[r.jsxs("button",{onClick:bs,className:"text-xs text-gray-500 hover:text-gray-700 font-medium transition-all duration-200 flex items-center gap-0.5 px-2 py-1 rounded-lg hover:bg-gray-100",children:[r.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Hide"]}),r.jsxs("a",{href:"/annual-audit-plan",className:"group text-[10px] text-purple-600 hover:text-purple-700 font-medium transition-all duration-200 flex items-center gap-0.5 px-2 py-1 rounded-lg hover:bg-purple-100",children:["View All",r.jsx("svg",{className:"w-3 h-3 group-hover:translate-x-0.5 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),r.jsx("div",{className:"mt-6 p-4 bg-white rounded-xl shadow-sm",children:r.jsx(l8,{selectedYear:Oe,onYearChange:Ce,availableYears:Ae,isYearDropdownOpen:ge,onYearDropdownToggle:Ne,yearDropdownRef:re})})]})}),it&&G&&y&&r.jsx("div",{className:"fixed top-16 right-2 z-40",children:r.jsxs("button",{onClick:bs,className:"flex items-center gap-1 px-2 py-1.5 bg-white/95 backdrop-blur-sm border border-gray-200 rounded-lg shadow-lg hover:bg-white transition-all duration-200 active:scale-95",children:[r.jsx("svg",{className:"w-3.5 h-3.5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),r.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Hide"})]})}),r.jsx(u8,{isOpen:i,onClose:()=>a(!1),status:o,auditYear:t}),r.jsx(Yw,{isOpen:X,onClose:()=>ee(!1),title:Y==="overdue"?"Overdue Actions":"Upcoming Actions",subtitle:Y==="overdue"?`${(xn==null?void 0:xn.length)||0} actions past due date`:`${(Mt==null?void 0:Mt.length)||0} actions due within 30 days`,actions:Y==="overdue"?xn:Mt,loading:Y==="overdue"?ei:Cr,headerBgColor:Y==="overdue"?"bg-red-50":"bg-blue-50",showDaysUntilDue:Y==="upcoming",actionType:Y,onActionTypeChange:U,overdueCount:(xn==null?void 0:xn.length)||0,upcomingCount:(Mt==null?void 0:Mt.length)||0}),r.jsx(Yw,{isOpen:T,onClose:()=>W(!1),title:z!=null&&z.riskLevel?`${z.riskLevel} Risk ${fe==="actions"?"Actions":"Findings"} - ${z.auditName}`:`All ${fe==="actions"?"Actions":"Findings"} - ${(z==null?void 0:z.auditName)||""}`,subtitle:`${Z.length} ${fe==="actions"?"actions":"findings"} in ${(z==null?void 0:z.auditYear)||""}`,actions:Z,loading:ie,headerBgColor:"bg-purple-50",showDaysUntilDue:!1,mode:fe})]})},hh=({placeholder:t="Search...",onSearch:e,delay:n=500,className:s})=>{const[i,a]=L.useState(""),o=iy(i,n),c=L.useRef(e);L.useEffect(()=>{c.current=e},[e]),L.useEffect(()=>{c.current(o)},[o]);const u=()=>{a(""),e("")};return r.jsx(Tn,{type:"text",placeholder:t,value:i,onChange:f=>a(f.target.value),className:s,leftIcon:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),rightIcon:i?r.jsx("button",{type:"button",onClick:u,className:"hover:text-gray-600",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}):null})},m8={getTasks:async t=>{const e=new URLSearchParams;return t&&Object.entries(t).forEach(([n,s])=>{s&&(Array.isArray(s)?s.forEach(i=>e.append(n,i)):e.append(n,s))}),qe.get(`/api/tasks?${e.toString()}`)},getPaginatedTasks:async(t=1,e=10,n)=>{const s=new URLSearchParams({page:t.toString(),limit:e.toString()});return n&&Object.entries(n).forEach(([i,a])=>{a&&(Array.isArray(a)?a.forEach(o=>s.append(i,o)):s.append(i,a))}),qe.get(`/api/tasks/paginated?${s.toString()}`)},getTask:async t=>qe.get(`/api/tasks/${t}`),createTask:async t=>qe.post("/api/tasks",t),updateTask:async(t,e)=>qe.put(`/api/tasks/${t}`,e),deleteTask:async t=>qe.delete(`/api/tasks/${t}`),getTaskAuditLog:async t=>qe.get(`/api/tasks/${t}/audit-log`),getTaskPermissions:async()=>qe.get("/api/tasks/permissions"),exportTasks:async t=>{const e=new URLSearchParams;return t&&Object.entries(t).forEach(([n,s])=>{s&&(Array.isArray(s)?s.forEach(i=>e.append(n,i)):e.append(n,s))}),qe.get(`/api/tasks/export?${e.toString()}`,{responseType:"blob"})}},x8=()=>{var b;const[t,e]=L.useState([]),[n,s]=L.useState(!0),[i,a]=L.useState(""),[o,c]=L.useState("all"),{permissions:u}=Dr(),{addNotification:f}=Ki();L.useEffect(()=>{h()},[]);const h=async()=>{try{s(!0);const v=await m8.getTasks();v.success&&v.data&&e(v.data)}catch{f({type:"error",message:"Failed to load tasks"})}finally{s(!1)}},p=t.filter(v=>{var k;const w=v.title.toLowerCase().includes(i.toLowerCase())||((k=v.description)==null?void 0:k.toLowerCase().includes(i.toLowerCase())),N=o==="all"||v.status===o;return w&&N}),m=v=>{switch(v){case"done":return"success";case"in_progress":return"info";case"blocked":return"danger";default:return"default"}},g=v=>{switch(v){case"urgent":return"danger";case"high":return"warning";case"medium":return"info";default:return"default"}},y={all:t.length,to_do:t.filter(v=>v.status==="to_do").length,in_progress:t.filter(v=>v.status==="in_progress").length,done:t.filter(v=>v.status==="done").length,blocked:t.filter(v=>v.status==="blocked").length};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-[24px] font-bold text-gray-900",children:"Task Manager"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and track your tasks"})]}),((b=u==null?void 0:u.tasks)==null?void 0:b.can_create)&&r.jsxs(Be,{variant:"primary",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Task"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-[12.8px]",children:[r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-[24px] font-bold text-purple-600",children:y.all}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Total Tasks"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-[24px] font-bold text-gray-600",children:y.to_do}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"To Do"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-[24px] font-bold text-blue-600",children:y.in_progress}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"In Progress"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-[24px] font-bold text-green-600",children:y.done}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Done"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-[24px] font-bold text-red-600",children:y.blocked}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Blocked"})]})})]}),r.jsx(Ie,{children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-[12.8px]",children:[r.jsx("div",{className:"flex-1",children:r.jsx(hh,{placeholder:"Search tasks...",onSearch:a})}),r.jsx("div",{className:"flex gap-2",children:["all","to_do","in_progress","done","blocked"].map(v=>r.jsx(Be,{variant:o===v?"primary":"outline",size:"sm",onClick:()=>c(v),children:v.replace("_"," ").charAt(0).toUpperCase()+v.slice(1).replace("_"," ")},v))})]})}),n?r.jsx(Ie,{children:r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-purple-600"})})}):r.jsx("div",{className:"grid grid-cols-1 gap-[12.8px]",children:p.length===0?r.jsx(Ie,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"mt-2 text-xs font-medium text-gray-900",children:"No tasks found"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Get started by creating a new task."})]})}):p.map(v=>{var w,N;return r.jsx(Ie,{variant:"elevated",className:"hover:shadow-xl transition-shadow",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-900",children:v.title}),r.jsx(Ze,{variant:m(v.status),children:v.status.replace("_"," ")}),r.jsx(Ze,{variant:g(v.priority),children:v.priority})]}),v.description&&r.jsx("p",{className:"text-gray-600 mb-3",children:v.description}),r.jsxs("div",{className:"flex items-center gap-[12.8px] text-xs text-gray-500",children:[v.assignee&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),v.assignee]}),v.due_date&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(v.due_date).toLocaleDateString()]}),r.jsxs("span",{children:["Created ",d8(v.created_at)]})]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[((w=u==null?void 0:u.tasks)==null?void 0:w.can_edit)&&r.jsx(Be,{variant:"ghost",size:"sm",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),((N=u==null?void 0:u.tasks)==null?void 0:N.can_delete)&&r.jsx(Be,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},v.id)})})]})},Ll={getRoles:async()=>qe.get("/api/admin/roles"),getDashboardComponents:async()=>qe.get("/api/admin/dashboard-components"),getRolePermissions:async t=>qe.get(`/api/admin/role-permissions/${t}`),updateRolePermissions:async(t,e)=>qe.put(`/api/admin/role-permissions/${t}`,e),bulkUpdatePermissions:async t=>qe.post("/api/admin/bulk-permissions",t)},g8=()=>{var ei,Mt,Cr;const[t,e]=L.useState("users"),[n,s]=L.useState(""),[i,a]=L.useState("all"),[o,c]=L.useState("all"),[u,f]=L.useState([]),[h,p]=L.useState(!0),[m,g]=L.useState(null),[y,b]=L.useState(!1),[v,w]=L.useState(null),[N,k]=L.useState(null),[j,S]=L.useState(null),[C,O]=L.useState(""),[M,B]=L.useState([]),[I,R]=L.useState([]),[P,q]=L.useState(null),[H,G]=L.useState([]),[ne,X]=L.useState(!1),[ee,Y]=L.useState(new Map),[U,T]=L.useState("all"),[W,z]=L.useState(!1),[Q,Z]=L.useState(""),[V,ie]=L.useState(""),[de,fe]=L.useState(!1),[ve,He]=L.useState([]),[$e,st]=L.useState(!1),[_e,it]=L.useState(!1),[rt,at]=L.useState({email:"",name:"",company:"",access_reason:"",expires_at:"",notes:"",role:"external_user"}),[Oe,oe]=L.useState(!1),[ge,Ne]=L.useState({}),[Ae,ke]=L.useState(!1),[re,te]=L.useState("audit_type"),[J,ue]=L.useState(!1),[Ce,ze]=L.useState(null),[Fe,Ue]=L.useState({field_name:"audit_type",option_value:"",display_order:0,parent_department:""}),[ht,Te]=L.useState(!1),St=[{value:"audit_type",label:"Audit Type"},{value:"risk_type",label:"Risk Type"},{value:"internal_control_element",label:"Internal Control Element"},{value:"country",label:"Country"},{value:"audit_year",label:"Audit Year"},{value:"risk_level",label:"Risk Level"},{value:"status",label:"Status"},{value:"department",label:"Department"},{value:"process",label:"Process"},{value:"business_unit",label:"Business Unit"}];L.useEffect(()=>{(async()=>{try{p(!0),g(null);const We=await Es.getAccessManagementUsers();We.success&&We.data?f(We.data):g("Failed to load users")}catch{g("Failed to load users. Please try again.")}finally{p(!1)}})()},[]),L.useEffect(()=>{(async()=>{try{const We=await Ll.getRoles();We.success&&We.data&&B(We.data)}catch{}})()},[t]),L.useEffect(()=>{(async()=>{if(t==="external-users")try{st(!0);const We=await Es.getExternalUsers();We.success&&We.data&&He(We.data)}catch(We){console.error("Failed to load external users:",We)}finally{st(!1)}})()},[t]);const Dt=L.useCallback(async()=>{try{ke(!0);const le={};for(const We of St)try{const Ve=await Ot.getDropdownOptionsFull(We.value);Ve&&Array.isArray(Ve)?le[We.value]=Ve:le[We.value]=[]}catch(Ve){console.error(`Failed to load options for ${We.value}:`,Ve),le[We.value]=[]}Ne(le)}catch(le){console.error("Failed to load dropdown options:",le)}finally{ke(!1)}},[]);L.useEffect(()=>{t==="dropdown-options"&&Dt()},[t,Dt]),L.useEffect(()=>{(async()=>{if(t==="components")try{X(!0);const We=await Ll.getDashboardComponents();We.success&&We.data&&R(We.data)}catch{}finally{X(!1)}})()},[t]),L.useEffect(()=>{(async()=>{if(P)try{X(!0);const We=await Ll.getRolePermissions(P);We.success&&We.data&&(G(We.data),Y(new Map))}catch{}finally{X(!1)}})()},[P]);const yr=(le,We,Ve)=>{const ot=H.find(Ts=>Ts.component_id===le),Ut=ee.get(le),bn={canView:(Ut==null?void 0:Ut.canView)??(ot==null?void 0:ot.can_view)??!1,canInteract:(Ut==null?void 0:Ut.canInteract)??(ot==null?void 0:ot.can_interact)??!1,[We]:Ve};We==="canView"&&!Ve&&(bn.canInteract=!1);const tr=new Map(ee);tr.set(le,bn),Y(tr)},It=async()=>{if(P)try{X(!0);const le=H.map(Ve=>{const ot=ee.get(Ve.component_id);return{componentId:Ve.component_id,canView:(ot==null?void 0:ot.canView)??Ve.can_view,canInteract:(ot==null?void 0:ot.canInteract)??Ve.can_interact}});if((await Ll.updateRolePermissions(P,{permissions:le})).success){const Ve=await Ll.getRolePermissions(P);Ve.success&&Ve.data&&(G(Ve.data),Y(new Map),alert("Permissions saved successfully!"))}}catch{alert("Failed to save permissions. Please try again.")}finally{X(!1)}},Sn=()=>{Y(new Map)},yn=async()=>{var le,We;if(!Fe.option_value.trim()){alert("Option value is required");return}try{Te(!0),(await Ot.createDropdownOption({field_name:Fe.field_name,option_value:Fe.option_value,display_order:Fe.display_order,parent_department:Fe.parent_department||void 0})).success&&(ue(!1),Ue({field_name:re,option_value:"",display_order:0,parent_department:""}),await Dt(),alert("Option created successfully"))}catch(Ve){alert(((We=(le=Ve==null?void 0:Ve.response)==null?void 0:le.data)==null?void 0:We.error)||"Failed to create option")}finally{Te(!1)}},Sr=le=>{ze(le),Ue({field_name:le.field_name,option_value:le.option_value,display_order:le.display_order,parent_department:le.parent_department||le.parent_business_unit||""}),ue(!0)},Ct=async()=>{var le,We;if(!Ce||!Fe.option_value.trim()){alert("Option value is required");return}try{Te(!0),(await Ot.updateDropdownOption(Ce.id,{option_value:Fe.option_value,display_order:Fe.display_order,is_active:Ce.is_active,parent_department:Fe.parent_department||void 0})).success&&(ue(!1),ze(null),Ue({field_name:re,option_value:"",display_order:0,parent_department:""}),await Dt(),alert("Option updated successfully"))}catch(Ve){alert(((We=(le=Ve==null?void 0:Ve.response)==null?void 0:le.data)==null?void 0:We.error)||"Failed to update option")}finally{Te(!1)}},Xt=async le=>{var We,Ve;if(confirm(`Are you sure you want to delete "${le.option_value}"?`))try{(await Ot.deleteDropdownOption(le.id)).success&&(await Dt(),alert("Option deleted successfully"))}catch(ot){alert(((Ve=(We=ot==null?void 0:ot.response)==null?void 0:We.data)==null?void 0:Ve.error)||"Failed to delete option")}},Qt=le=>{const We=new Map(ee);Ft.forEach(Ve=>{const ot=We.get(Ve.id),Ut=H.find(bn=>bn.component_id===Ve.id);We.set(Ve.id,{canView:le,canInteract:le?(ot==null?void 0:ot.canInteract)??(Ut==null?void 0:Ut.can_interact)??!1:!1})}),Y(We)},vn=le=>{const We=new Map(ee);Ft.forEach(Ve=>{const ot=We.get(Ve.id),Ut=H.find(tr=>tr.component_id===Ve.id),bn=(ot==null?void 0:ot.canView)??(Ut==null?void 0:Ut.can_view)??!1;bn&&We.set(Ve.id,{canView:bn,canInteract:le})}),Y(We)},At=async()=>{try{b(!0);const le=await Es.syncGoogleGroup();if(le.success&&le.data){k(le.data.stats),w(le.data.timestamp);const We=await Es.getAccessManagementUsers();We.success&&We.data&&f(We.data),alert(`Sync completed!
Added: ${le.data.stats.newUsersAdded}
Reactivated: ${le.data.stats.usersReactivated}
Deactivated: ${le.data.stats.usersDeactivated}`)}}catch{alert("Failed to sync with Google Group")}finally{b(!1)}},Jt=(le,We)=>{S(le),O(We)},ct=()=>{S(null),O("")},rn=async le=>{try{const Ve=await(await fetch("/api/access-management/update-user",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:le,role:C})})).json();Ve.success?(f(ot=>ot.map(Ut=>Ut.email===le?{...Ut,role:C}:Ut)),alert(`User role updated successfully to ${C}`),S(null),O("")):alert(`Failed to update user role: ${Ve.error}`)}catch{alert("Failed to update user role")}},Tt=u.filter(le=>{const We=le.name.toLowerCase().includes(n.toLowerCase())||le.email.toLowerCase().includes(n.toLowerCase()),Ve=i==="all"||le.role===i,ot=o==="all"||le.status===o;return We&&Ve&&ot}),Ft=I.filter(le=>U==="all"||le.category===U),jt=(le,We)=>{const Ve=ee.get(le);if(Ve)return We==="canView"?Ve.canView:Ve.canInteract;const ot=H.find(Ut=>Ut.component_id===le);return We==="canView"?(ot==null?void 0:ot.can_view)??!1:(ot==null?void 0:ot.can_interact)??!1},sn=Ft.every(le=>jt(le.id,"canView")),zt=Ft.every(le=>jt(le.id,"canView")&&jt(le.id,"canInteract")),hn=ee.size>0,Ht=["all",...new Set(I.map(le=>le.category).filter(Boolean))],Cn=Array.from(new Set(u.map(le=>le.role))).sort(),Nn=le=>{switch(le){case"admin":return"danger";case"top_management":return"warning";case"department_director":return"info";default:return"default"}},xn={all:u.length,admin:u.filter(le=>le.role==="admin").length,team:u.filter(le=>le.role==="team").length,action_operator:u.filter(le=>le.role==="action_operator").length,department_director:u.filter(le=>le.role==="department_director").length,top_management:u.filter(le=>le.role==="top_management").length};return h?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx(Nt,{size:"lg"})}):m?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx(Ie,{className:"max-w-md",children:r.jsxs("div",{className:"text-center p-8",children:[r.jsx("div",{className:"text-red-600 mb-4",children:r.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Error Loading Users"}),r.jsx("p",{className:"text-gray-600 mb-4",children:m}),r.jsx(Be,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-[24px] font-bold text-gray-900",children:"Access Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage users, roles, and component permissions"})]})}),r.jsx(Ie,{children:r.jsxs("div",{className:"flex border-b border-gray-200",children:[r.jsxs("button",{onClick:()=>e("users"),className:F("px-[19.2px] py-[9.6px] font-medium text-xs border-b-2 transition-colors",t==="users"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[r.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Users (",u.length,")"]}),r.jsxs("button",{onClick:()=>e("roles"),className:F("px-[19.2px] py-[9.6px] font-medium text-xs border-b-2 transition-colors",t==="roles"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[r.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Roles (",Cn.length,")"]}),r.jsxs("button",{onClick:()=>e("components"),className:F("px-[19.2px] py-[9.6px] font-medium text-xs border-b-2 transition-colors",t==="components"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[r.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),"Component Permissions"]}),r.jsxs("button",{onClick:()=>e("external-users"),className:F("px-[19.2px] py-[9.6px] font-medium text-xs border-b-2 transition-colors",t==="external-users"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[r.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"External Users (",ve.length,")"]}),r.jsxs("button",{onClick:()=>e("dropdown-options"),className:F("px-[19.2px] py-[9.6px] font-medium text-xs border-b-2 transition-colors",t==="dropdown-options"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[r.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),"Dropdown Options"]})]})}),t==="users"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-[12.8px]",children:[r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-[24px] font-bold text-purple-600",children:xn.all}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Total Users"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-[24px] font-bold text-red-600",children:xn.admin}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Admins"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-[24px] font-bold text-blue-600",children:xn.team}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Team Members"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-[24px] font-bold text-yellow-600",children:xn.department_director}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Directors"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-[24px] font-bold text-green-600",children:xn.top_management}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Executives"})]})})]}),r.jsx(Ie,{children:r.jsxs("div",{className:"flex flex-col gap-[12.8px]",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-[12.8px] items-start md:items-center justify-between",children:[r.jsx("div",{className:"flex-1",children:r.jsx(hh,{placeholder:"Search users...",onSearch:s})}),r.jsx(Be,{variant:"primary",size:"sm",onClick:At,disabled:y,children:y?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Syncing..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Sync with Google Group"]})})]}),v&&r.jsxs("div",{className:"text-xs text-gray-500",children:["Last sync: ",new Date(v).toLocaleString(),N&&` (${N.activeUsers} active users)`]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("div",{className:"text-xs font-medium text-gray-700 mr-2 flex items-center",children:"Role:"}),["all","admin","team","team_manager","action_operator","management","department_director","top_management","VP","auditor","ceo"].map(le=>r.jsx(Be,{variant:i===le?"primary":"outline",size:"sm",onClick:()=>a(le),children:le==="all"?"All":le.replace("_"," ").split(" ").map(We=>We.charAt(0).toUpperCase()+We.slice(1)).join(" ")},le))]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("div",{className:"text-xs font-medium text-gray-700 mr-2 flex items-center",children:"Status:"}),["all","active","inactive"].map(le=>r.jsx(Be,{variant:o===le?"primary":"outline",size:"sm",onClick:()=>c(le),children:le.charAt(0).toUpperCase()+le.slice(1)},le))]})]})}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Users",subtitle:`${Tt.length} users found`}),r.jsx("div",{className:"overflow-x-auto mt-4",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"User"}),r.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Email"}),r.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Role"}),r.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Department"}),r.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Status"}),r.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Last Login"}),r.jsx("th",{className:"text-right py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:Tt.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"py-12 text-center",children:r.jsxs("div",{className:"text-gray-400",children:[r.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),r.jsx("p",{className:"text-base font-medium",children:"No users found"}),r.jsx("p",{className:"text-xs mt-1",children:"Try adjusting your search or filters"})]})})}):Tt.map(le=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:r.jsx("span",{className:"text-purple-600 font-semibold",children:le.name.split(" ").map(We=>We[0]).join("")})}),r.jsx("span",{className:"font-medium text-gray-900",children:le.name})]})}),r.jsx("td",{className:"py-4 px-4 text-gray-600",children:le.email}),r.jsx("td",{className:"py-4 px-4",children:j===le.id?r.jsx("select",{value:C,onChange:We=>O(We.target.value),className:"px-[9.6px] py-[4.8px] border border-gray-300 rounded-md text-xs focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",children:M.map(We=>r.jsx("option",{value:We.name,children:We.name.replace("_"," ").split(" ").map(Ve=>Ve.charAt(0).toUpperCase()+Ve.slice(1)).join(" ")},We.id))}):r.jsx(Ze,{variant:Nn(le.role),children:le.role.replace("_"," ")})}),r.jsx("td",{className:"py-4 px-4 text-gray-600",children:le.department||"-"}),r.jsx("td",{className:"py-4 px-4",children:r.jsx(Ze,{variant:le.status==="active"?"success":"default",children:le.status})}),r.jsx("td",{className:"py-4 px-4 text-gray-600",children:le.lastLogin?new Date(le.lastLogin).toLocaleDateString():"-"}),r.jsx("td",{className:"py-4 px-4",children:r.jsx("div",{className:"flex justify-end gap-2",children:j===le.id?r.jsxs(r.Fragment,{children:[r.jsx(Be,{variant:"primary",size:"sm",onClick:()=>rn(le.email),children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx(Be,{variant:"outline",size:"sm",onClick:ct,children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):r.jsxs(r.Fragment,{children:[r.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>Jt(le.id,le.role),children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsx(Be,{variant:"ghost",size:"sm",className:"text-red-600",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})})]},le.id))})]})})]})]}),t==="roles"&&r.jsxs(r.Fragment,{children:[r.jsx(Ie,{children:r.jsxs("div",{className:"flex items-center justify-between p-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Roles"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Manage system roles and permissions"})]}),r.jsxs(Be,{variant:"primary",onClick:()=>z(!0),children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Role"]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-[12.8px]",children:Cn.map(le=>{const We=u.filter(ot=>ot.role===le),Ve=M.find(ot=>ot.name===le);return r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ze,{variant:Nn(le),className:"mb-2",children:le.replace("_"," ").split(" ").map(ot=>ot.charAt(0).toUpperCase()+ot.slice(1)).join(" ")}),r.jsx("p",{className:"text-3xl font-bold text-purple-600",children:We.length}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:We.length===1?"User":"Users"}),r.jsx(Be,{variant:"outline",size:"sm",className:"mt-3 w-full",onClick:()=>{e("components"),q((Ve==null?void 0:Ve.id)||null)},children:"Manage Permissions"})]})},le)})}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Role Details",subtitle:"Overview of all roles and their users"}),r.jsx("div",{className:"overflow-x-auto mt-4",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Role"}),r.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Users"}),r.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"User Count"}),r.jsx("th",{className:"text-right py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:Cn.map(le=>{const We=u.filter(ot=>ot.role===le),Ve=M.find(ot=>ot.name===le);return r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"py-4 px-4",children:r.jsx(Ze,{variant:Nn(le),children:le.replace("_"," ").split(" ").map(ot=>ot.charAt(0).toUpperCase()+ot.slice(1)).join(" ")})}),r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[We.slice(0,3).map(ot=>r.jsx("span",{className:"text-xs text-gray-600 bg-gray-100 px-[6.4px] py-[3.2px] rounded",children:ot.name},ot.id)),We.length>3&&r.jsxs("span",{className:"text-xs text-gray-500 px-[6.4px] py-[3.2px]",children:["+",We.length-3," more"]})]})}),r.jsx("td",{className:"py-4 px-4",children:r.jsx("span",{className:"text-xs font-medium text-gray-900",children:We.length})}),r.jsx("td",{className:"py-4 px-4",children:r.jsx("div",{className:"flex justify-end gap-2",children:r.jsxs(Be,{variant:"outline",size:"sm",onClick:()=>{e("components"),q((Ve==null?void 0:Ve.id)||null)},children:[r.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Permissions"]})})})]},le)})})]})})]})]}),t==="components"&&r.jsxs(r.Fragment,{children:[r.jsx(Ie,{children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Role"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Choose a role to manage component permissions"})]}),hn&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Be,{variant:"outline",size:"sm",onClick:Sn,children:"Reset Changes"}),r.jsxs(Be,{variant:"primary",size:"sm",onClick:It,isLoading:ne,children:["Save Changes (",ee.size,")"]})]})]}),r.jsx("div",{className:"flex gap-3 flex-wrap",children:M.map(le=>{const We=P===le.id,Ve=u.filter(ot=>ot.role===le.name).length;return r.jsxs(Be,{variant:We?"primary":"outline",size:"sm",onClick:()=>q(le.id),children:[le.name.replace("_"," ").split(" ").map(ot=>ot.charAt(0).toUpperCase()+ot.slice(1)).join(" "),Ve>0&&r.jsxs("span",{className:"ml-1 opacity-70",children:["(",Ve,")"]})]},le.id)})})]})}),P&&r.jsxs(r.Fragment,{children:[r.jsx(Ie,{children:r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Filter by category:"}),Ht.map(le=>r.jsx(Be,{variant:U===le?"primary":"outline",size:"sm",onClick:()=>T(le),children:le==="all"?"All":le.charAt(0).toUpperCase()+le.slice(1)},le))]})})}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Component Permissions",subtitle:`${Ft.length} components ${U!=="all"?`in ${U}`:""}`}),ne?r.jsx("div",{className:"flex items-center justify-center p-12",children:r.jsx(Nt,{size:"lg"})}):r.jsx("div",{className:"overflow-x-auto mt-4",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Component"}),r.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Type"}),r.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"text-center py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("span",{children:"Can View"}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>Qt(!0),disabled:sn,className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Select all",children:"All"}),r.jsx("button",{onClick:()=>Qt(!1),disabled:!Ft.some(le=>jt(le.id,"canView")),className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Deselect all",children:"None"})]})]})}),r.jsx("th",{className:"text-center py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("span",{children:"Can Interact"}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>vn(!0),disabled:zt||Ft.every(le=>!jt(le.id,"canView")),className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Select all (only for viewable components)",children:"All"}),r.jsx("button",{onClick:()=>vn(!1),disabled:!Ft.some(le=>jt(le.id,"canInteract")),className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Deselect all",children:"None"})]})]})})]})}),r.jsx("tbody",{children:Ft.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"py-12 text-center text-gray-500",children:"No components found"})}):Ft.map(le=>{const We=jt(le.id,"canView"),Ve=jt(le.id,"canInteract"),ot=ee.has(le.id);return r.jsxs("tr",{className:F("border-b border-gray-100 hover:bg-gray-50 transition-colors",ot&&"bg-purple-50"),children:[r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:le.display_name}),le.description&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:le.description})]})}),r.jsx("td",{className:"py-4 px-4",children:r.jsx(Ze,{variant:"default",children:le.component_type})}),r.jsx("td",{className:"py-4 px-4",children:r.jsx("span",{className:"text-xs text-gray-600",children:le.category})}),r.jsx("td",{className:"py-4 px-4 text-center",children:r.jsx(Dm,{checked:We,onChange:Ut=>yr(le.id,"canView",Ut),size:"sm"})}),r.jsx("td",{className:"py-4 px-4 text-center",children:r.jsx(Dm,{checked:Ve,onChange:Ut=>yr(le.id,"canInteract",Ut),disabled:!We,size:"sm"})})]},le.id)})})]})})]})]}),!P&&r.jsx(Ie,{children:r.jsxs("div",{className:"p-12 text-center text-gray-500",children:[r.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),r.jsx("p",{className:"text-lg font-medium",children:"Select a role to manage permissions"}),r.jsx("p",{className:"text-xs mt-1",children:"Choose a role from the buttons above to view and edit component permissions"})]})})]}),t==="external-users"&&r.jsxs(r.Fragment,{children:[r.jsx(Ie,{children:r.jsxs("div",{className:"flex items-center justify-between p-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"External Users"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage external user accounts"})]}),r.jsxs(Be,{variant:"primary",onClick:()=>it(!0),children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create External User"]})]})}),$e?r.jsx("div",{className:"flex items-center justify-center p-12",children:r.jsx(Nt,{size:"lg"})}):r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"External Users",subtitle:`${ve.length} external users`}),r.jsx("div",{className:"overflow-x-auto mt-4",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Email"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Company"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Access Reason"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Role"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Expires"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:ve.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"py-12 text-center",children:r.jsxs("div",{className:"text-gray-400",children:[r.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),r.jsx("p",{className:"text-lg font-medium",children:"No external users found"}),r.jsx("p",{className:"text-sm mt-1",children:'Click "Create External User" to add a new user'})]})})}):ve.map(le=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"py-4 px-4 font-medium text-gray-900",children:le.name}),r.jsx("td",{className:"py-4 px-4 text-gray-600",children:le.email}),r.jsx("td",{className:"py-4 px-4 text-gray-600",children:le.company||"-"}),r.jsx("td",{className:"py-4 px-4 text-gray-600",children:le.access_reason||"-"}),r.jsx("td",{className:"py-4 px-4",children:r.jsx(Ze,{variant:"default",children:le.role||"default"})}),r.jsx("td",{className:"py-4 px-4",children:r.jsx(Ze,{variant:le.is_active?"success":"default",children:le.is_active?"Active":"Inactive"})}),r.jsx("td",{className:"py-4 px-4 text-gray-600",children:le.expires_at?new Date(le.expires_at).toLocaleDateString():"Never"}),r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>{alert("Edit functionality coming soon")},title:"Edit External User",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsx(Be,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:async()=>{if(confirm(`Are you sure you want to delete ${le.name}?`))try{const We=await Es.deleteExternalUser(le.id);if(We.success){const Ve=await Es.getExternalUsers();Ve.success&&Ve.data&&He(Ve.data),alert("External user deleted successfully")}else alert(We.error||"Failed to delete external user")}catch(We){alert(We.userMessage||"Failed to delete external user")}},title:"Delete External User",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},le.id))})]})})]})]}),t==="dropdown-options"&&r.jsxs(r.Fragment,{children:[r.jsx(Ie,{children:r.jsxs("div",{className:"flex items-center justify-between p-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dropdown Options Management"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage dropdown field options for Audit Finding forms"})]}),r.jsxs("div",{className:"flex items-center gap-[12.8px]",children:[r.jsx(Gt,{label:"Select Field",value:re,onChange:le=>{te(le.target.value),Ue({...Fe,field_name:le.target.value})},options:St.map(le=>({value:le.value,label:le.label})),className:"min-w-[200px]"}),r.jsxs(Be,{variant:"primary",onClick:()=>{ze(null),Ue({field_name:re,option_value:"",display_order:0,parent_department:""}),ue(!0)},children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Option"]})]})]})}),Ae?r.jsx("div",{className:"flex items-center justify-center p-12",children:r.jsx(Nt,{size:"lg"})}):r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:`${((ei=St.find(le=>le.value===re))==null?void 0:ei.label)||"Options"}`,subtitle:`${((Mt=ge[re])==null?void 0:Mt.length)||0} options`}),r.jsx("div",{className:"overflow-x-auto mt-4",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Order"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Option Value"}),re==="process"&&r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Parent Department"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:!ge[re]||ge[re].length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:re==="process"?5:4,className:"py-12 text-center",children:r.jsxs("div",{className:"text-gray-400",children:[r.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),r.jsx("p",{className:"text-lg font-medium",children:"No options found"}),r.jsx("p",{className:"text-sm mt-1",children:'Click "Add Option" to create a new option'})]})})}):ge[re].sort((le,We)=>le.display_order-We.display_order).map(le=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"py-4 px-4 text-gray-600",children:le.display_order}),r.jsx("td",{className:"py-4 px-4 font-medium text-gray-900",children:le.option_value.split(" ").map(We=>We.includes("&")?We.split("&").map(Ve=>Ve.charAt(0).toUpperCase()+Ve.slice(1).toLowerCase()).join("&"):We.charAt(0).toUpperCase()+We.slice(1).toLowerCase()).join(" ")}),re==="process"&&r.jsx("td",{className:"py-4 px-4 text-gray-600",children:le.parent_department||le.parent_business_unit||"-"}),r.jsx("td",{className:"py-4 px-4",children:r.jsx(Ze,{variant:le.is_active?"success":"default",children:le.is_active?"Active":"Inactive"})}),r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>Sr(le),title:"Edit Option",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsx(Be,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>Xt(le),title:"Delete Option",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},le.id))})]})})]}),J&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs(Ie,{className:"max-w-md w-full",children:[r.jsx(vt,{title:Ce?"Edit Option":"Create New Option",subtitle:Ce?"Update dropdown option":"Add a new option to the dropdown"}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Field Name"}),r.jsx(Tn,{value:((Cr=St.find(le=>le.value===Fe.field_name))==null?void 0:Cr.label)||Fe.field_name,disabled:!0,fullWidth:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Option Value ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(Tn,{value:Fe.option_value,onChange:le=>Ue({...Fe,option_value:le.target.value}),placeholder:"Enter option value",required:!0,fullWidth:!0})]}),re==="process"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Parent Department"}),r.jsx(Gt,{value:Fe.parent_department,onChange:le=>Ue({...Fe,parent_department:le.target.value}),options:[{value:"",label:"None (Standalone)"},...(ge.department||[]).filter(le=>le.is_active).sort((le,We)=>le.display_order-We.display_order).map(le=>({value:le.option_value,label:le.option_value}))],fullWidth:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the Department this Process belongs to"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Order"}),r.jsx(Tn,{type:"number",value:Fe.display_order,onChange:le=>Ue({...Fe,display_order:parseInt(le.target.value)||0}),placeholder:"0",fullWidth:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first in the dropdown"})]}),Ce&&r.jsx("div",{children:r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx(Dm,{checked:Ce.is_active,onChange:le=>ze({...Ce,is_active:le})}),r.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsxs(Be,{variant:"primary",onClick:Ce?Ct:yn,disabled:ht||!Fe.option_value.trim(),isLoading:ht,children:[Ce?"Update":"Create"," Option"]}),r.jsx(Be,{variant:"outline",onClick:()=>{ue(!1),ze(null),Ue({field_name:re,option_value:"",display_order:0,parent_department:""})},disabled:ht,children:"Cancel"})]})]})]})})]}),W&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs(Ie,{className:"max-w-md w-full",children:[r.jsx(vt,{title:"Create New Role",subtitle:"Add a new role to the system"}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Role Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:Q,onChange:le=>Z(le.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),placeholder:"e.g., external_viewer",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:de}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only lowercase letters, numbers, and underscores allowed"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:V,onChange:le=>ie(le.target.value),placeholder:"Role description (optional)",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:de})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(Be,{variant:"primary",onClick:async()=>{if(!Q.trim()){alert("Role name is required");return}fe(!0);try{const le=await Es.createRole({name:Q.trim(),description:V.trim()||void 0});if(le.success&&le.data){const We=await Ll.getRoles();We.success&&We.data&&B(We.data),z(!1),Z(""),ie(""),alert("Role created successfully!")}else alert(le.error||"Failed to create role")}catch(le){alert(le.userMessage||"Failed to create role")}finally{fe(!1)}},disabled:de||!Q.trim(),isLoading:de,children:"Create Role"}),r.jsx(Be,{variant:"outline",onClick:()=>{z(!1),Z(""),ie("")},disabled:de,children:"Cancel"})]})]})]})}),_e&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs(Ie,{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx(vt,{title:"Create External User",subtitle:"Add a new external user account"}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-[12.8px]",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",value:rt.email,onChange:le=>at({...rt,email:le.target.value}),placeholder:"user@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:Oe})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:rt.name,onChange:le=>at({...rt,name:le.target.value}),placeholder:"Full Name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:Oe})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:rt.company,onChange:le=>at({...rt,company:le.target.value}),placeholder:"Company Name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:Oe})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Access Reason ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:rt.access_reason,onChange:le=>at({...rt,access_reason:le.target.value}),placeholder:"Reason for access",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:Oe})]}),r.jsx("div",{className:"grid grid-cols-2 gap-[12.8px]",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expires At"}),r.jsx("input",{type:"date",value:rt.expires_at,onChange:le=>at({...rt,expires_at:le.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:Oe})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),r.jsx("textarea",{value:rt.notes,onChange:le=>at({...rt,notes:le.target.value}),placeholder:"Additional notes (optional)",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:Oe})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(Be,{variant:"primary",onClick:async()=>{var le,We,Ve,ot;if(!rt.email||!rt.name||!rt.company||!rt.access_reason){alert("Email, name, company, and access reason are required");return}oe(!0);try{const Ut=await Es.createExternalUser({email:rt.email.trim(),name:rt.name.trim(),company:rt.company.trim(),access_reason:rt.access_reason.trim(),expires_at:rt.expires_at||void 0,notes:rt.notes.trim()||void 0,role:rt.role});if(Ut.success){const bn=await Es.getExternalUsers();bn.success&&bn.data&&He(bn.data),it(!1),at({email:"",name:"",company:"",access_reason:"",expires_at:"",notes:"",role:"external_user"}),alert("External user created successfully! Welcome email has been sent.")}else alert(Ut.error||"Failed to create external user")}catch(Ut){if(console.error("Create external user error:",Ut),(We=(le=Ut.response)==null?void 0:le.data)!=null&&We.success&&((ot=(Ve=Ut.response)==null?void 0:Ve.data)!=null&&ot.user)){const bn=await Es.getExternalUsers();bn.success&&bn.data&&He(bn.data),it(!1),at({email:"",name:"",company:"",access_reason:"",expires_at:"",notes:"",role:"external_user"}),alert("External user created successfully! Welcome email has been sent.")}else alert(Ut.userMessage||Ut.message||"Failed to create external user")}finally{oe(!1)}},disabled:Oe||!rt.email||!rt.name||!rt.company||!rt.access_reason,isLoading:Oe,children:"Create User"}),r.jsx(Be,{variant:"outline",onClick:()=>{it(!1),at({email:"",name:"",company:"",access_reason:"",expires_at:"",notes:"",role:"default"})},disabled:Oe,children:"Cancel"})]})]})]})})]})},y8=()=>{const t={labels:["Critical","High","Medium","Low"],datasets:[{data:[12,35,58,23],backgroundColor:["rgba(239, 68, 68, 0.8)","rgba(249, 115, 22, 0.8)","rgba(234, 179, 8, 0.8)","rgba(34, 197, 94, 0.8)"],borderColor:["rgba(239, 68, 68, 1)","rgba(249, 115, 22, 1)","rgba(234, 179, 8, 1)","rgba(34, 197, 94, 1)"],borderWidth:2}]},e={labels:["Q1","Q2","Q3","Q4"],datasets:[{label:"Identified Risks",data:[45,52,48,38],backgroundColor:"rgba(239, 68, 68, 0.8)"},{label:"Mitigated Risks",data:[38,45,42,35],backgroundColor:"rgba(34, 197, 94, 0.8)"}]},n=[{id:1,title:"Cybersecurity Threats",level:"critical",category:"Technology",probability:"High",impact:"High"},{id:2,title:"Regulatory Compliance",level:"high",category:"Compliance",probability:"Medium",impact:"High"},{id:3,title:"Data Privacy Breach",level:"critical",category:"Security",probability:"Medium",impact:"High"},{id:4,title:"Operational Inefficiency",level:"medium",category:"Operations",probability:"High",impact:"Medium"},{id:5,title:"Third-Party Dependencies",level:"high",category:"Vendor",probability:"Medium",impact:"High"}],s=i=>{switch(i){case"critical":return"danger";case"high":return"warning";case"medium":return"info";default:return"success"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-[24px] font-bold text-gray-900",children:"Risk Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor and manage organizational risks"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-[19.2px]",children:[r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Total Risks",subtitle:"Currently tracked"}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-4xl font-bold text-purple-600",children:"128"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Across all categories"})]})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Critical Risks",subtitle:"Immediate attention"}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-4xl font-bold text-red-600",children:"12"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Requires action"})]})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Mitigated",subtitle:"This quarter"}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-4xl font-bold text-green-600",children:"45"}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[r.jsx("span",{className:"text-green-600 font-medium",children:" 15%"})," from last quarter"]})]})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Risk Score",subtitle:"Overall assessment"}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-4xl font-bold text-yellow-600",children:"6.8"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Out of 10"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-[19.2px]",children:[r.jsx($T,{title:"Risk Distribution by Severity",subtitle:"Current risk portfolio",data:t,height:350}),r.jsx(Pg,{title:"Risk Trends",subtitle:"Quarterly comparison",data:e,height:350})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Top Risks",subtitle:"Highest priority items requiring attention"}),r.jsx("div",{className:"overflow-x-auto mt-4",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Risk"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Level"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Probability"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Impact"})]})}),r.jsx("tbody",{children:n.map(i=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"py-4 px-4",children:r.jsx("span",{className:"font-medium text-gray-900",children:i.title})}),r.jsx("td",{className:"py-4 px-4 text-gray-600",children:i.category}),r.jsx("td",{className:"py-4 px-4",children:r.jsx(Ze,{variant:s(i.level),children:i.level})}),r.jsx("td",{className:"py-4 px-4 text-gray-600",children:i.probability}),r.jsx("td",{className:"py-4 px-4 text-gray-600",children:i.impact})]},i.id))})]})})]})]})},v8=()=>{const[t,e]=L.useState("2024+"),[n,s]=L.useState(1),[i,a]=L.useState(25),[o,c]=L.useState(null),[u,f]=L.useState(!1),[h,p]=L.useState(null),[m,g]=L.useState("asc"),[y,b]=L.useState("all"),[v,w]=L.useState("all"),[N,k]=L.useState("all"),[j,S]=L.useState(null),[C,O]=L.useState(null),{role:M,isImpersonating:B,originalUser:I,startImpersonation:R}=Dr(),{isExporting:P,exportFindingActions:q}=Hd(),H=L.useRef(null),[G,ne]=L.useState(()=>{const ke=localStorage.getItem("my-actions-column-order");return ke?JSON.parse(ke):["key","summary","description","status","audit","dueDate","riskLevel","responsible","actions"]}),[X,ee]=L.useState(null),[Y,U]=L.useState(null),T=()=>{b("all"),w("all"),k("all"),p(null),g("asc")},W=async ke=>{try{await R(ke),window.location.reload()}catch{}},z=ke=>{ee(ke)},Q=(ke,re)=>{ke.preventDefault(),U(re)},Z=ke=>{if(!X||X===ke){ee(null),U(null);return}const re=[...G],te=re.indexOf(X),J=re.indexOf(ke);re.splice(te,1),re.splice(J,0,X),ne(re),localStorage.setItem("my-actions-column-order",JSON.stringify(re)),ee(null),U(null)},V=()=>{ee(null),U(null)},ie={key:120,summary:250,description:280,status:120,audit:200,dueDate:120,riskLevel:100,responsible:180,actions:120},{columnWidths:de,resizing:fe,handleMouseDown:ve}=Go(H,ie,"my-actions-columns"),He={key:{label:"Key",render:ke=>r.jsx("span",{className:"text-purple-600 font-mono text-xs",children:ke.key})},summary:{label:"Summary",render:ke=>r.jsx("span",{className:"font-medium text-gray-900 line-clamp-2",children:ke.summary})},description:{label:"Description",render:ke=>r.jsx("span",{className:"text-gray-700 text-xs line-clamp-2",children:ke.description||"-"})},status:{label:"Status",sortable:!0,sortKey:"displayStatus",render:ke=>r.jsx(Ze,{variant:Ae(ke.status),children:ke.displayStatus})},audit:{label:"Audit",sortable:!0,sortKey:"auditName",render:ke=>r.jsx("span",{className:"text-gray-600 text-xs",children:ke.auditName||"-"})},dueDate:{label:"Due Date",sortable:!0,sortKey:"dueDate",render:ke=>r.jsx("span",{className:"text-gray-600 text-xs",children:ke.dueDate?kr(ke.dueDate,"PP"):"-"})},riskLevel:{label:"Risk Level",sortable:!0,sortKey:"riskLevel",render:ke=>r.jsx(Ze,{variant:ke.riskLevel==="Critical"?"danger":ke.riskLevel==="High"?"warning":ke.riskLevel==="Medium"?"info":"default",children:ke.riskLevel||"Unassigned"})},responsible:{label:"Responsible",render:ke=>r.jsx("span",{className:"text-gray-600 text-xs",children:ke.responsibleEmail||"-"})},actions:{label:"Action Detail",render:ke=>r.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>{c(ke),f(!0)},children:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})}},{data:$e,isLoading:st}=$E({auditYear:t==="all"?void 0:t,managerEmail:j||void 0}),_e=L.useMemo(()=>$e?Array.isArray($e)?$e:$e.data||[]:[],[$e]);L.useEffect(()=>{console.log(" MyActionsPage - actionsData:",$e),console.log(" MyActionsPage - role:",M),console.log(" MyActionsPage - isImpersonating:",B),$e&&!Array.isArray($e)&&$e.managerInfo?(console.log(" ManagerInfo found:",$e.managerInfo),O($e.managerInfo),!j&&$e.managerInfo.manager1&&S($e.managerInfo.manager1.email)):$e&&Array.isArray($e)&&(console.log(" No managerInfo in response (array format)"),O(null))},[$e,j,M,B]),L.useEffect(()=>{const ke=re=>{re.key==="Escape"&&u&&f(!1)};if(u)return document.addEventListener("keydown",ke),()=>document.removeEventListener("keydown",ke)},[u]);const it=ke=>{h===ke?g(m==="asc"?"desc":"asc"):(p(ke),g("asc"))},rt=L.useMemo(()=>{if(!_e||!Array.isArray(_e))return[];const ke=te=>te==="COMPLETED"?"Completed":te==="RISK ACCEPTED"?"Risk Accepted":te;let re=_e.map(te=>({...te,displayStatus:ke(te.status)}));return y!=="all"&&(re=re.filter(te=>te.displayStatus===y)),v!=="all"&&(re=re.filter(te=>te.auditName===v)),N!=="all"&&(re=re.filter(te=>te.riskLevel===N)),h&&re.sort((te,J)=>{let ue=te[h],Ce=J[h];return h==="dueDate"&&(ue=ue?new Date(ue).getTime():0,Ce=Ce?new Date(Ce).getTime():0),typeof ue=="string"&&(ue=ue.toLowerCase()),typeof Ce=="string"&&(Ce=Ce.toLowerCase()),ue<Ce?m==="asc"?-1:1:ue>Ce?m==="asc"?1:-1:0}),re},[_e,h,m,y,v,N]),at=L.useMemo(()=>{const ke=(n-1)*i,re=ke+i;return rt.slice(ke,re)},[rt,n,i]),Oe=L.useMemo(()=>{if(!_e||!Array.isArray(_e))return[];const ke=re=>re==="COMPLETED"?"Completed":re==="RISK ACCEPTED"?"Risk Accepted":re;return[...new Set(_e.map(re=>ke(re.status)))]},[_e]),oe=L.useMemo(()=>!_e||!Array.isArray(_e)?[]:[...new Set(_e.map(ke=>ke.auditName).filter(Boolean))],[_e]),ge=L.useMemo(()=>!_e||!Array.isArray(_e)?[]:[...new Set(_e.map(ke=>ke.riskLevel).filter(Boolean))],[_e]),Ne=L.useMemo(()=>{if(!_e||!Array.isArray(_e))return{total:0,open:0,overdue:0,completed:0,moneyOpen:0,moneyOverdue:0};const ke=_e.filter(ze=>ze.status==="Open"),re=_e.filter(ze=>ze.status==="Overdue"),te=new Set(ke.map(ze=>ze.parentKey).filter(Boolean)),J=new Set(re.map(ze=>ze.parentKey).filter(Boolean)),ue=Array.from(te).reduce((ze,Fe)=>{const Ue=ke.find(ht=>ht.parentKey===Fe);return ze+((Ue==null?void 0:Ue.monetaryImpact)||0)},0),Ce=Array.from(J).reduce((ze,Fe)=>{const Ue=re.find(ht=>ht.parentKey===Fe);return ze+((Ue==null?void 0:Ue.monetaryImpact)||0)},0);return{total:_e.length,open:ke.length,overdue:re.length,completed:_e.filter(ze=>ze.status==="COMPLETED"||ze.status==="Completed").length,moneyOpen:ue,moneyOverdue:Ce}},[_e]),Ae=ke=>({COMPLETED:"success",Completed:"success",Open:"danger",Overdue:"warning","In Progress":"info","RISK ACCEPTED":"default"})[ke]||"default";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-[24px] font-bold text-gray-900",children:"My Team Actions"}),r.jsx("p",{className:"text-gray-600 mt-1",children:M==="team_manager"?"Actions managed by your team":"Actions from your manager's team"})]}),r.jsxs("div",{className:"flex items-center gap-[12.8px]",children:[(M==="admin"||B&&(I==null?void 0:I.role)==="admin")&&r.jsx(Qd,{onSelectUser:W,filterByRole:["team","team_manager"]}),r.jsxs("div",{className:"inline-flex rounded-lg border border-gray-300 bg-white p-1 shadow-sm",children:[r.jsxs("button",{onClick:()=>e("2024+"),className:`flex items-center gap-[6.4px] px-[12.8px] py-[6.4px] text-xs font-medium rounded-md transition-all ${t==="2024+"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",fill:t==="2024+"?"white":"#E5E7EB"}),r.jsx("rect",{x:"3",y:"4",width:"18",height:"6",rx:"2",fill:t==="2024+"?"#DC2626":"#991B1B"}),r.jsx("text",{x:"12",y:"8",textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"bold",children:"JUL"}),r.jsx("text",{x:"12",y:"16",textAnchor:"middle",fill:t==="2024+"?"#6B7280":"#1F2937",fontSize:"8",fontWeight:"bold",children:"17"})]}),"As of 2024"]}),r.jsxs("button",{onClick:()=>e("all"),className:`flex items-center gap-[6.4px] px-[12.8px] py-[6.4px] text-xs font-medium rounded-md transition-all ${t==="all"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("rect",{x:"4",y:"14",width:"3",height:"6",fill:"#10B981",rx:"0.5"}),r.jsx("rect",{x:"10",y:"8",width:"3",height:"12",fill:"#EF4444",rx:"0.5"}),r.jsx("rect",{x:"16",y:"11",width:"3",height:"9",fill:"#3B82F6",rx:"0.5"}),r.jsx("line",{x1:"3",y1:"7",x2:"21",y2:"7",stroke:t==="all"?"white":"#9CA3AF",strokeWidth:"1.5"})]}),"All Results"]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[r.jsxs(Ie,{variant:"elevated",className:"p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Total Actions"}),r.jsx(Ze,{variant:"default",size:"sm",className:"text-xs",children:t==="2024+"?"2024+":"All"})]}),st?r.jsx(Nt,{size:"sm"}):r.jsx("p",{className:"text-[16px] font-bold text-purple-600",children:Ne.total})]}),r.jsxs(Ie,{variant:"elevated",className:"p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Open Actions"}),r.jsx(Ze,{variant:"default",size:"sm",className:"text-xs",children:t==="2024+"?"2024+":"All"})]}),st?r.jsx(Nt,{size:"sm"}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-[16px] font-bold text-red-600",children:Ne.open}),r.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[Ne.total>0?`${Math.round(Ne.open/Ne.total*100)}%`:"0%"," of total"]})]})]}),r.jsxs(Ie,{variant:"elevated",className:"p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Overdue Actions"}),r.jsx(Ze,{variant:"default",size:"sm",className:"text-xs",children:t==="2024+"?"2024+":"All"})]}),st?r.jsx(Nt,{size:"sm"}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-[16px] font-bold text-yellow-600",children:Ne.overdue}),r.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[Ne.total>0?`${Math.round(Ne.overdue/Ne.total*100)}%`:"0%"," of total"]})]})]}),r.jsxs(Ie,{variant:"elevated",className:"p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Completed Actions"}),r.jsx(Ze,{variant:"default",size:"sm",className:"text-xs",children:t==="2024+"?"2024+":"All"})]}),st?r.jsx(Nt,{size:"sm"}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-[16px] font-bold text-green-600",children:Ne.completed}),r.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[Ne.total>0?`${Math.round(Ne.completed/Ne.total*100)}%`:"0%"," of total"]})]})]})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Team Finding Actions",subtitle:`${rt.length} actions found${rt.length!==((_e==null?void 0:_e.length)||0)?` (filtered from ${(_e==null?void 0:_e.length)||0} total)`:""}`,action:r.jsxs(Be,{variant:"primary",size:"sm",onClick:()=>{const ke=rt.map(re=>re.key);q({auditYear:t,role:"team",actionKeys:ke.length>0?ke.join(","):void 0,statusFilter:y!=="all"?y:void 0,auditFilter:v!=="all"?v:void 0,riskLevelFilter:N!=="all"?N:void 0})},isLoading:P,children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export to Excel"]})}),st?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"xl",text:"Loading team actions..."})}):!_e||!Array.isArray(_e)?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"mt-2 text-xs font-medium text-gray-900",children:"No actions found"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No team actions available for the selected filters."})]}):r.jsxs(r.Fragment,{children:[M==="team"&&C&&r.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Manager:"}),r.jsxs("div",{className:"relative inline-flex items-center bg-gray-200 rounded-full p-1 cursor-pointer",style:{width:"fit-content"},children:[r.jsx("div",{className:`absolute top-1 bottom-1 rounded-full bg-white shadow-md transition-all duration-300 ease-in-out ${j===C.manager1.email?"left-1":"right-1"}`,style:{width:"calc(50% - 4px)"}}),r.jsx("button",{onClick:()=>S(C.manager1.email),className:`relative z-10 px-5 py-2 text-sm font-medium rounded-full transition-colors duration-300 ${j===C.manager1.email?"text-purple-600":"text-gray-600"}`,children:C.manager1.name}),r.jsx("button",{onClick:()=>S(C.manager2.email),className:`relative z-10 px-5 py-2 text-sm font-medium rounded-full transition-colors duration-300 ${j===C.manager2.email?"text-purple-600":"text-gray-600"}`,children:C.manager2.name})]})]}),r.jsxs("div",{className:"overflow-x-auto mt-4",children:[r.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3 justify-between",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Status:"}),r.jsxs("select",{value:y,onChange:ke=>b(ke.target.value),className:"px-3 py-1.5 text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[r.jsx("option",{value:"all",children:"All Statuses"}),Oe.map(ke=>r.jsx("option",{value:ke,children:ke},ke))]})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Audit:"}),r.jsxs("select",{value:v,onChange:ke=>w(ke.target.value),className:"px-3 py-1.5 text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer max-w-xs",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[r.jsx("option",{value:"all",children:"All Audits"}),oe.map(ke=>r.jsx("option",{value:ke,children:ke},ke))]})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Risk Level:"}),r.jsxs("select",{value:N,onChange:ke=>k(ke.target.value),className:"px-3 py-1.5 text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[r.jsx("option",{value:"all",children:"All Levels"}),ge.map(ke=>r.jsx("option",{value:ke,children:ke},ke))]})]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(Be,{variant:"outline",size:"sm",onClick:T,className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset"]})})]}),r.jsxs("table",{ref:H,className:"w-full",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b border-gray-200",children:G.map(ke=>{const re=He[ke];return re?r.jsx(ss,{columnKey:ke,width:de[ke],onResizeStart:ve,isResizing:fe===ke,className:F("text-left py-3 px-4 text-sm font-semibold text-gray-700",re.sortable&&"cursor-pointer hover:bg-purple-50 transition-colors select-none",ke==="actions"&&"text-center"),onClick:re.sortable&&re.sortKey?()=>it(re.sortKey):void 0,onDragStart:z,onDragOver:Q,onDrop:Z,onDragEnd:V,isDragging:X===ke,isDragOver:Y===ke,children:re.sortable&&re.sortKey?r.jsxs("div",{className:"flex items-center gap-2",children:[re.label,r.jsx("span",{className:h===re.sortKey?"text-purple-600":"text-gray-400",children:h===re.sortKey?m==="asc"?"":"":""})]}):re.label},ke):null})})}),r.jsx("tbody",{children:at.map(ke=>r.jsx("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:G.map(re=>{const te=He[re];return te?r.jsx("td",{className:F("py-4 px-4",re==="actions"&&"text-center"),style:{width:de[re]},children:te.render(ke)},re):null})},ke.key))})]})]})]}),rt&&rt.length>0&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsx(Ch,{currentPage:n,totalItems:rt.length,itemsPerPage:i,onPageChange:s,onItemsPerPageChange:a})})]}),u&&o&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[85vh] overflow-y-auto",onClick:ke=>ke.stopPropagation(),children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 px-6 py-4 rounded-t-2xl",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Finding Action Details"}),r.jsx("p",{className:"text-purple-100 text-sm mt-1",children:o.key})]}),r.jsx("button",{onClick:()=>f(!1),className:"text-white hover:text-purple-200 transition-colors p-2",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Audit Name"}),r.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.auditName||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Status"}),r.jsx("div",{className:"mt-1",children:r.jsx(Ze,{variant:Ae(o.status),children:o.status==="COMPLETED"?"Completed":o.status==="RISK ACCEPTED"?"Risk Accepted":o.status})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Due Date"}),r.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.dueDate?kr(o.dueDate,"PPP"):"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Financial Impact"}),r.jsx("p",{className:"text-gray-900 font-medium mt-1",children:mr(o.monetaryImpact)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Action Responsible"}),r.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.responsibleEmail||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Manager"}),r.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.managerEmail||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"C-Level"}),r.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.cLevel||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Risk Level"}),r.jsx("div",{className:"mt-1",children:r.jsx(Ze,{variant:o.riskLevel==="Critical"?"danger":o.riskLevel==="High"?"warning":o.riskLevel==="Medium"?"info":"default",children:o.riskLevel||"Unassigned"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Action Summary"}),r.jsx("p",{className:"text-gray-900 mt-2 p-4 bg-gray-50 rounded-lg",children:o.summary})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Action Description"}),r.jsx("p",{className:"text-gray-700 mt-2 p-4 bg-gray-50 rounded-lg whitespace-pre-wrap",children:o.description||"No description available"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Finding Description"}),r.jsx("p",{className:"text-gray-700 mt-2 p-4 bg-purple-50 rounded-lg whitespace-pre-wrap border border-purple-200",children:o.parentDescription||"No description available"})]}),r.jsx("div",{className:"flex justify-end items-center pt-4 border-t",children:r.jsx(Be,{variant:"outline",onClick:()=>f(!1),children:"Close"})})]})]})})]})},b8={COMPLETED:"Completed",Completed:"Completed","RISK ACCEPTED":"Risk Accepted","Risk Accepted":"Risk Accepted",Open:"Open",Overdue:"Overdue","In Progress":"In Progress"},s0=t=>b8[t]||t,Kw={Open:"rgba(59, 130, 246, 0.8)",Overdue:"rgba(239, 68, 68, 0.8)",Completed:"rgba(34, 197, 94, 0.8)","Risk Accepted":"rgba(147, 51, 234, 0.8)","In Progress":"rgba(59, 130, 246, 0.8)"},w8={COMPLETED:"success",Completed:"success",Open:"danger",Overdue:"warning","In Progress":"info","RISK ACCEPTED":"default","Risk Accepted":"default"},i0=t=>w8[t]||"default",Gw=t=>{if(!t||!Array.isArray(t))return 0;const e=new Set(t.map(n=>n.parentKey).filter(n=>!!n));return Array.from(e).reduce((n,s)=>{const i=t.find(a=>a.parentKey===s);return n+((i==null?void 0:i.monetaryImpact)||0)},0)},j8=t=>L.useMemo(()=>{if(!t||!Array.isArray(t))return{total:0,open:0,overdue:0,completed:0,moneyOpen:0,moneyOverdue:0};const e=t.filter(o=>o.status==="Open"),n=t.filter(o=>o.status==="Overdue"),s=t.filter(o=>o.status==="COMPLETED"||o.status==="Completed"),i=Gw(e),a=Gw(n);return{total:t.length,open:e.length,overdue:n.length,completed:s.length,moneyOpen:i,moneyOverdue:a}},[t]),Pf={columnWidths:{key:120,summary:250,description:280,status:120,audit:200,dueDate:120,riskLevel:100,responsible:180,actions:120},defaultColumnOrder:["key","summary","description","status","audit","dueDate","riskLevel","responsible","actions"],localStorage:{columnOrderKey:"department-actions-column-order",columnWidthsKey:"department-actions-columns"}},N8=()=>{const[t,e]=L.useState("2024+"),[n,s]=L.useState(1),[i,a]=L.useState(25),[o,c]=L.useState(null),[u,f]=L.useState(!1),[h,p]=L.useState(window.innerWidth<768),[m,g]=L.useState(null);L.useEffect(()=>{const re=()=>p(window.innerWidth<768);return window.addEventListener("resize",re),()=>window.removeEventListener("resize",re)},[]);const[y,b]=L.useState(null),[v,w]=L.useState("asc"),[N,k]=L.useState("all"),[j,S]=L.useState("all"),[C,O]=L.useState("all"),[M,B]=L.useState(""),{user:I,role:R,isImpersonating:P,originalUser:q,startImpersonation:H}=Dr(),{isExporting:G,exportFindingActions:ne}=Hd(),X=L.useRef(null),[ee,Y]=L.useState(()=>{const re=localStorage.getItem(Pf.localStorage.columnOrderKey);return re?JSON.parse(re):Pf.defaultColumnOrder}),[U,T]=L.useState(null),[W,z]=L.useState(null),Q=()=>{k("all"),S("all"),O("all"),B(""),b(null),w("asc")},Z=async re=>{try{await H(re),window.location.reload()}catch{}},V=re=>{T(re)},ie=(re,te)=>{re.preventDefault(),z(te)},de=re=>{if(!U||U===re){T(null),z(null);return}const te=[...ee],J=te.indexOf(U),ue=te.indexOf(re);te.splice(J,1),te.splice(ue,0,U),Y(te),localStorage.setItem("department-actions-column-order",JSON.stringify(te)),T(null),z(null)},fe=()=>{T(null),z(null)},{columnWidths:ve,resizing:He,handleMouseDown:$e}=Go(X,Pf.columnWidths,Pf.localStorage.columnWidthsKey),st={key:{label:"Key",render:re=>r.jsx("span",{className:"text-purple-600 font-mono text-xs",children:re.key})},summary:{label:"Summary",render:re=>r.jsx("span",{className:"text-xs font-medium text-gray-900 line-clamp-2",children:re.summary})},description:{label:"Description",render:re=>r.jsx("span",{className:"text-gray-700 text-xs line-clamp-2",children:re.description||"-"})},status:{label:"Status",sortable:!0,sortKey:"displayStatus",render:re=>r.jsx(Ze,{variant:i0(re.status),children:re.displayStatus})},audit:{label:"Audit",sortable:!0,sortKey:"auditName",render:re=>r.jsx("span",{className:"text-gray-600 text-xs",children:re.auditName||"-"})},dueDate:{label:"Due Date",sortable:!0,sortKey:"dueDate",render:re=>r.jsx("span",{className:"text-gray-600 text-xs",children:re.dueDate?kr(re.dueDate,"PP"):"-"})},riskLevel:{label:"Risk Level",sortable:!0,sortKey:"riskLevel",render:re=>r.jsx(Ze,{variant:re.riskLevel==="Critical"?"danger":re.riskLevel==="High"?"warning":re.riskLevel==="Medium"?"info":"default",children:re.riskLevel||"Unassigned"})},responsible:{label:"Responsible",render:re=>r.jsx("span",{className:"text-gray-600 text-xs",children:re.responsibleEmail||"-"})},actions:{label:"Action Detail",render:re=>r.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>{c(re),f(!0)},children:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})}},{data:_e,isLoading:it}=OE({auditYear:t==="all"?void 0:t});L.useEffect(()=>{const re=te=>{te.key==="Escape"&&u&&f(!1)};if(u)return document.addEventListener("keydown",re),()=>document.removeEventListener("keydown",re)},[u]);const rt=re=>{y===re?w(v==="asc"?"desc":"asc"):(b(re),w("asc"))},at=L.useMemo(()=>{if(!_e||!Array.isArray(_e))return[];let re=_e.map(te=>({...te,displayStatus:s0(te.status)}));if(N!=="all"&&(re=re.filter(te=>te.displayStatus===N)),j!=="all"&&(re=re.filter(te=>te.auditName===j)),C!=="all"&&(re=re.filter(te=>te.riskLevel===C)),M.trim()){const te=M.toLowerCase();re=re.filter(J=>J.key.toLowerCase().includes(te)||J.summary.toLowerCase().includes(te)||J.auditName&&J.auditName.toLowerCase().includes(te)||J.description&&J.description.toLowerCase().includes(te))}return y&&re.sort((te,J)=>{let ue=te[y],Ce=J[y];return y==="dueDate"&&(ue=ue?new Date(ue).getTime():0,Ce=Ce?new Date(Ce).getTime():0),typeof ue=="string"&&(ue=ue.toLowerCase()),typeof Ce=="string"&&(Ce=Ce.toLowerCase()),ue<Ce?v==="asc"?-1:1:ue>Ce?v==="asc"?1:-1:0}),re},[_e,y,v,N,j,C,M]),Oe=L.useMemo(()=>{const re=(n-1)*i,te=re+i;return at.slice(re,te)},[at,n,i]),oe=L.useMemo(()=>!_e||!Array.isArray(_e)?[]:[...new Set(_e.map(re=>s0(re.status)))],[_e]),ge=L.useMemo(()=>!_e||!Array.isArray(_e)?[]:[...new Set(_e.map(re=>re.auditName).filter(Boolean))],[_e]),Ne=L.useMemo(()=>!_e||!Array.isArray(_e)?[]:[...new Set(_e.map(re=>re.riskLevel).filter(Boolean))],[_e]),Ae=j8(_e),ke=L.useMemo(()=>{if(!_e||!Array.isArray(_e))return{labels:[],datasets:[]};const re={};_e.forEach(Ce=>{re[Ce.status]=(re[Ce.status]||0)+1});const te={};Object.entries(re).forEach(([Ce,ze])=>{const Fe=s0(Ce);te[Fe]=(te[Fe]||0)+ze});const J=Object.keys(te),ue=Object.values(te);return{labels:J,datasets:[{data:ue,backgroundColor:J.map(Ce=>Kw[Ce]||"rgba(147, 51, 234, 0.8)"),borderColor:J.map(Ce=>(Kw[Ce]||"rgba(147, 51, 234, 0.8)").replace("0.8","1")),borderWidth:2}]}},[_e]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-[12.8px] md:gap-0",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-[13px] md:text-[22px] font-bold text-gray-900",children:"Department Actions"}),r.jsxs("p",{className:"text-[9.6px] md:text-xs text-gray-600 mt-1",children:["Actions for ",I&&"department"in I&&I.department?`${I.department} Department`:"your department"]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-[6.4px] md:gap-[12.8px] w-full md:w-auto justify-end md:justify-start",children:[(R==="admin"||P&&(q==null?void 0:q.role)==="admin")&&r.jsx(Qd,{onSelectUser:Z,filterByRole:["department_director"],className:"text-xs md:text-sm"}),!it&&Ae.total>0&&r.jsxs("div",{className:"inline-flex rounded-lg border border-gray-300 bg-white p-0.5 md:p-1 shadow-sm",children:[r.jsxs("button",{onClick:()=>e("2024+"),className:`flex items-center gap-[3.2px] md:gap-[6.4px] px-[4.8px] py-[3.2px] md:px-[12.8px] md:py-[6.4px] text-[8px] md:text-xs font-medium rounded-md transition-all ${t==="2024+"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("svg",{className:"w-3 h-3 md:w-5 md:h-5",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",fill:t==="2024+"?"white":"#E5E7EB"}),r.jsx("rect",{x:"3",y:"4",width:"18",height:"6",rx:"2",fill:t==="2024+"?"#DC2626":"#991B1B"}),r.jsx("text",{x:"12",y:"8",textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"bold",children:"JUL"}),r.jsx("text",{x:"12",y:"16",textAnchor:"middle",fill:t==="2024+"?"#6B7280":"#1F2937",fontSize:"8",fontWeight:"bold",children:"17"})]}),!h&&r.jsx("span",{children:"As of 2024"}),h&&r.jsx("span",{children:"As of 2024"})]}),r.jsxs("button",{onClick:()=>e("all"),className:`flex items-center gap-[3.2px] md:gap-[6.4px] px-[4.8px] py-[3.2px] md:px-[12.8px] md:py-[6.4px] text-[8px] md:text-xs font-medium rounded-md transition-all ${t==="all"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("svg",{className:"w-3 h-3 md:w-5 md:h-5",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("rect",{x:"4",y:"14",width:"3",height:"6",fill:"#10B981",rx:"0.5"}),r.jsx("rect",{x:"10",y:"8",width:"3",height:"12",fill:"#EF4444",rx:"0.5"}),r.jsx("rect",{x:"16",y:"11",width:"3",height:"9",fill:"#3B82F6",rx:"0.5"}),r.jsx("line",{x1:"3",y1:"7",x2:"21",y2:"7",stroke:t==="all"?"white":"#9CA3AF",strokeWidth:"1.5"})]}),!h&&r.jsx("span",{children:"All Results"}),h&&r.jsx("span",{children:"All"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-3 lg:grid-cols-6 gap-1.5 md:gap-2",children:[r.jsxs(Ie,{variant:"elevated",className:"relative border-t-4 border-t-purple-600 hover:shadow-lg transition-all",children:[r.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-1.5 md:right-1.5 text-[7px] md:text-[9px] px-0.5 md:px-1 py-0.5 bg-purple-100 text-purple-700 rounded-full",children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:"py-[1.71px] md:py-[5.13px] px-[3.42px] md:px-[6.84px]",children:[r.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 text-purple-600 mb-0.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),r.jsx("p",{className:"text-[15.3px] md:text-[20.7px] font-bold text-purple-600 text-center leading-tight",children:Ae.total}),r.jsx("p",{className:"text-[7.65px] md:text-[9.9px] text-gray-600 text-center",children:"Total"})]})]}),r.jsxs(Ie,{variant:"elevated",className:"relative border-t-4 border-t-amber-600 hover:shadow-lg transition-all",children:[r.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-1.5 md:right-1.5 text-[7px] md:text-[9px] px-0.5 md:px-1 py-0.5 bg-amber-100 text-amber-700 rounded-full",children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:"py-[1.71px] md:py-[5.13px] px-[3.42px] md:px-[6.84px]",children:[r.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 text-amber-600 mb-0.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"text-[15.3px] md:text-[20.7px] font-bold text-amber-600 text-center leading-tight",children:Ae.open}),r.jsx("p",{className:"text-[7.65px] md:text-[9.9px] text-gray-600 text-center",children:"Open"})]})]}),r.jsxs(Ie,{variant:"elevated",className:"relative border-t-4 border-t-red-600 hover:shadow-lg transition-all",children:[r.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-1.5 md:right-1.5 text-[7px] md:text-[9px] px-0.5 md:px-1 py-0.5 bg-red-100 text-red-700 rounded-full",children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:"py-[1.71px] md:py-[5.13px] px-[3.42px] md:px-[6.84px]",children:[r.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 text-red-600 mb-0.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsx("p",{className:"text-[15.3px] md:text-[20.7px] font-bold text-red-600 text-center leading-tight",children:Ae.overdue}),r.jsx("p",{className:"text-[7.65px] md:text-[9.9px] text-gray-600 text-center",children:"Overdue"})]})]}),r.jsxs(Ie,{variant:"elevated",className:"relative border-t-4 border-t-green-600 hover:shadow-lg transition-all",children:[r.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-1.5 md:right-1.5 text-[7px] md:text-[9px] px-0.5 md:px-1 py-0.5 bg-green-100 text-green-700 rounded-full",children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:"py-[1.71px] md:py-[5.13px] px-[3.42px] md:px-[6.84px]",children:[r.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 text-green-600 mb-0.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"text-[15.3px] md:text-[20.7px] font-bold text-green-600 text-center leading-tight",children:Ae.completed}),r.jsx("p",{className:"text-[7.65px] md:text-[9.9px] text-gray-600 text-center",children:"Done"})]})]}),r.jsxs(Ie,{variant:"elevated",className:"relative border-t-4 border-t-orange-600 hover:shadow-lg transition-all",children:[r.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-1.5 md:right-1.5 text-[7px] md:text-[9px] px-0.5 md:px-1 py-0.5 bg-orange-100 text-orange-700 rounded-full",children:"2024+"}),r.jsxs("div",{className:"py-[1.71px] md:py-[5.13px] px-[3.42px] md:px-[6.84px] flex flex-col justify-center items-center",children:[r.jsx("div",{className:"h-[14px] md:h-[18px]"}),r.jsx("p",{className:"text-[15.3px] md:text-[20.7px] font-bold text-orange-600 text-center leading-tight",children:mr(Ae.moneyOpen)}),r.jsx("p",{className:"text-[7.65px] md:text-[9.9px] text-gray-600 text-center",children:"Open "})]})]}),r.jsxs(Ie,{variant:"elevated",className:"relative border-t-4 border-t-rose-600 hover:shadow-lg transition-all",children:[r.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-1.5 md:right-1.5 text-[7px] md:text-[9px] px-0.5 md:px-1 py-0.5 bg-rose-100 text-rose-700 rounded-full",children:"2024+"}),r.jsxs("div",{className:"py-[1.71px] md:py-[5.13px] px-[3.42px] md:px-[6.84px] flex flex-col justify-center items-center",children:[r.jsx("div",{className:"h-[14px] md:h-[18px]"}),r.jsx("p",{className:"text-[15.3px] md:text-[20.7px] font-bold text-rose-600 text-center leading-tight",children:mr(Ae.moneyOverdue)}),r.jsx("p",{className:"text-[7.65px] md:text-[9.9px] text-gray-600 text-center",children:"Overdue "})]})]})]}),it?r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-[12.16px]",children:[r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Department Actions Status Distribution"}),r.jsx("div",{className:"h-[270px] flex items-center justify-center",children:r.jsx(Nt,{size:"xl",text:"Loading chart..."})})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Key Metrics",subtitle:"Department performance"}),r.jsx("div",{className:"h-[270px] flex items-center justify-center",children:r.jsx(Nt,{size:"xl",text:"Loading metrics..."})})]})]}):Ae.total>0?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-[12.16px]",children:[r.jsx(Wh,{title:"Department Actions Status Distribution",data:ke,height:270,loading:!1,options:{cutout:"60%",plugins:{legend:{display:!0,position:"bottom",labels:{padding:10,usePointStyle:!0,font:{size:9},generateLabels:re=>{const te=re.data;if(te.labels&&te.datasets&&te.datasets.length>0){const J=te.datasets[0];if(!J)return[];const ue=J.backgroundColor;return te.labels.map((Ce,ze)=>{const Fe=Array.isArray(J.data)?J.data[ze]:0,Ue=Array.isArray(ue)?ue[ze]:ue;return{text:`${Ce}: ${Fe}`,fillStyle:typeof Ue=="string"?Ue:"rgba(156, 163, 175, 0.8)",hidden:!1,index:ze}})}return[]}}},datalabels:{display:!1},tooltip:{callbacks:{label:re=>{const te=re.label||"",J=re.parsed||0,Ce=re.dataset.data.reduce((Fe,Ue)=>Fe+Ue,0),ze=(J/Ce*100).toFixed(1);return`${te}: ${J} (${ze}%)`}}}}}}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Key Metrics",subtitle:"Department performance"}),r.jsxs("div",{className:"mt-2.5 space-y-[9px] p-2.5",children:[r.jsxs("div",{className:"flex justify-between items-center p-[9px] bg-gradient-to-r from-green-50 to-green-100/50 rounded-lg border-l-4 border-green-500",children:[r.jsx("span",{className:"text-gray-700 font-semibold text-xs md:text-sm",children:"Completion Rate"}),r.jsxs("span",{className:"text-xl font-bold text-green-600",children:[Ae.total>0?Math.round(Ae.completed/Ae.total*100):0,"%"]})]}),r.jsxs("div",{className:"flex justify-between items-center p-[9px] bg-gradient-to-r from-red-50 to-red-100/50 rounded-lg border-l-4 border-red-500",children:[r.jsx("span",{className:"text-gray-700 font-semibold text-xs md:text-sm",children:"Overdue Rate"}),r.jsxs("span",{className:"text-xl font-bold text-red-600",children:[Ae.total>0?Math.round(Ae.overdue/Ae.total*100):0,"%"]})]}),r.jsxs("div",{className:"flex justify-between items-center p-[9px] bg-gradient-to-r from-purple-50 to-purple-100/50 rounded-lg border-l-4 border-purple-500",children:[r.jsx("span",{className:"text-gray-700 font-semibold text-xs md:text-sm",children:"Total Financial Impact"}),r.jsx("span",{className:"text-xl font-bold text-purple-600",children:mr(Ae.moneyOpen+Ae.moneyOverdue)})]})]})]})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Department Finding Actions",subtitle:`${at.length} actions found${at.length!==((_e==null?void 0:_e.length)||0)?` (filtered from ${(_e==null?void 0:_e.length)||0} total)`:""}`,action:r.jsxs(Be,{variant:"primary",size:"sm",onClick:()=>{const re=at.map(te=>te.key);ne({auditYear:t,role:"department",actionKeys:re.length>0?re.join(","):void 0,statusFilter:N!=="all"?N:void 0,auditFilter:j!=="all"?j:void 0,riskLevelFilter:C!=="all"?C:void 0})},isLoading:G,className:"text-[9.6px] md:text-xs px-[6.4px] md:px-[12.8px]",children:[r.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{className:"hidden md:inline",children:"Export to Excel"}),r.jsx("span",{className:"md:hidden",children:"Export"})]})}),!_e||!Array.isArray(_e)?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"mt-2 text-xs font-medium text-gray-900",children:"No actions found"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"No department actions available for the selected filters."})]}):r.jsxs("div",{className:"overflow-x-auto mt-4",children:[r.jsxs("div",{className:"mb-4 space-y-3",children:[r.jsxs("div",{className:"relative max-w-md",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:r.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),r.jsx("input",{type:"text",placeholder:"Search by key, summary, audit, or description...",value:M,onChange:re=>B(re.target.value),className:"w-full pl-[32px] pr-[12.8px] py-[8px] text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all"}),M&&r.jsx("button",{onClick:()=>B(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(N!=="all"||j!=="all"||C!=="all"||M)&&r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Active filters:"}),N!=="all"&&r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:["Status: ",N,r.jsx("button",{onClick:()=>k("all"),className:"hover:bg-blue-200 rounded-full p-0.5",children:r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),j!=="all"&&r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:["Audit: ",j.length>20?j.substring(0,20)+"...":j,r.jsx("button",{onClick:()=>S("all"),className:"hover:bg-green-200 rounded-full p-0.5",children:r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C!=="all"&&r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:["Risk: ",C,r.jsx("button",{onClick:()=>O("all"),className:"hover:bg-amber-200 rounded-full p-0.5",children:r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),M&&r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:['Search: "',M.length>15?M.substring(0,15)+"...":M,'"',r.jsx("button",{onClick:()=>B(""),className:"hover:bg-purple-200 rounded-full p-0.5",children:r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("button",{onClick:Q,className:"text-xs text-gray-500 hover:text-gray-700 underline",children:"Clear all"})]})]}),r.jsxs("div",{className:"mb-4 flex flex-col md:flex-row md:flex-wrap md:items-center gap-3 md:justify-between",children:[r.jsxs("div",{className:"grid grid-cols-1 md:flex md:flex-wrap md:items-center gap-3 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-1.5 col-span-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 whitespace-nowrap",children:"Audit:"}),r.jsxs("select",{value:j,onChange:re=>S(re.target.value),className:"flex-1 md:flex-none px-3 py-1.5 text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer md:max-w-xs",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[r.jsx("option",{value:"all",children:"All Audits"}),ge.map(re=>r.jsx("option",{value:re,children:re},re))]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:flex gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 whitespace-nowrap",children:"Status:"}),r.jsxs("select",{value:N,onChange:re=>k(re.target.value),className:"flex-1 md:flex-none px-3 py-1.5 text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[r.jsx("option",{value:"all",children:"All Statuses"}),oe.map(re=>r.jsx("option",{value:re,children:re},re))]})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 whitespace-nowrap",children:"Risk Level:"}),r.jsxs("select",{value:C,onChange:re=>O(re.target.value),className:"flex-1 md:flex-none px-3 py-1.5 text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[r.jsx("option",{value:"all",children:"All Levels"}),Ne.map(re=>r.jsx("option",{value:re,children:re},re))]})]})]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(Be,{variant:"outline",size:"sm",onClick:Q,className:"border-purple-300 text-purple-700 hover:bg-purple-50 text-[9.6px] md:text-xs px-[6.4px] md:px-[12.8px]",children:[r.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 md:mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.jsx("span",{className:"hidden md:inline",children:"Reset"})]})})]}),r.jsxs("table",{ref:X,className:"w-full hidden md:table table-fixed",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b border-gray-200",children:ee.map(re=>{const te=st[re];return te?r.jsx(ss,{columnKey:re,width:h?void 0:ve[re],onResizeStart:$e,isResizing:He===re,className:F("text-left py-[9.6px] px-[6.4px] md:px-[12.8px] text-xs font-semibold text-gray-700",te.sortable&&"cursor-pointer hover:bg-purple-50 transition-colors select-none",re==="actions"&&"text-center",re==="key"&&"w-[22%]",re==="status"&&"w-[28%]",re==="summary"&&"w-[50%]",["description","audit","dueDate","riskLevel","monetaryImpact","responsible","cLevel","actions"].includes(re)&&"hidden md:table-cell"),onClick:te.sortable&&te.sortKey?()=>rt(te.sortKey):void 0,onDragStart:V,onDragOver:ie,onDrop:de,onDragEnd:fe,isDragging:U===re,isDragOver:W===re,children:te.sortable&&te.sortKey?r.jsxs("div",{className:"flex items-center gap-2",children:[te.label,r.jsx("span",{className:y===te.sortKey?"text-purple-600":"text-gray-400",children:y===te.sortKey?v==="asc"?"":"":""})]}):te.label},re):null})})}),r.jsx("tbody",{children:Oe.map(re=>r.jsx("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:ee.map(te=>{const J=st[te];return J?r.jsx("td",{className:F("py-[12.8px] px-[6.4px] md:px-[12.8px] align-top",te==="actions"&&"text-center",["description","audit","dueDate","riskLevel","monetaryImpact","responsible","cLevel","actions"].includes(te)&&"hidden md:table-cell"),style:{width:h?void 0:ve[te]},children:J.render(re)},te):null})},re.key))})]}),r.jsx("div",{className:"block md:hidden space-y-2 mt-2",children:Oe.map(re=>{const te=i0(re.status),J=m===re.key;return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden transition-all duration-200",children:[r.jsxs("div",{onClick:()=>g(J?null:re.key),className:"p-3 cursor-pointer active:bg-gray-50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-[10px] font-bold text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded font-mono",children:re.key}),r.jsx(Ze,{variant:te,size:"sm",className:"text-[10px] px-1.5 py-0.5 h-5",children:re.displayStatus})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:ue=>{ue.stopPropagation(),c(re),f(!0)},className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",children:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),r.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${J?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),r.jsx("h4",{className:`text-xs font-medium text-gray-900 leading-snug mb-2 ${J?"":"line-clamp-2"}`,children:re.summary}),r.jsxs("div",{className:"flex items-center justify-between text-[10px] text-gray-500 border-t border-gray-50 pt-2 mt-1",children:[r.jsxs("div",{className:"flex items-center gap-1 max-w-[60%]",children:[r.jsx("svg",{className:"w-3 h-3 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{className:"truncate",children:re.auditName||"-"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("span",{children:re.dueDate?kr(re.dueDate):"-"})]})]})]}),J&&r.jsxs("div",{className:"px-3 pb-3 pt-0 bg-gray-50/50 border-t border-gray-100",children:[re.description&&r.jsx("div",{className:"mt-2 mb-3",children:r.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:re.description})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-gray-400 font-semibold uppercase",children:"Risk Level"}),r.jsx("div",{children:r.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium ${re.riskLevel==="Critical"?"bg-red-100 text-red-700":re.riskLevel==="High"?"bg-orange-100 text-orange-700":re.riskLevel==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:re.riskLevel||"Unassigned"})})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-gray-400 font-semibold uppercase",children:"Responsible"}),r.jsx("span",{className:"text-gray-700 truncate",children:re.responsibleEmail||"-"})]})]})]})]},re.key)})})]}),at&&at.length>0&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsx(Ch,{currentPage:n,totalItems:at.length,itemsPerPage:i,onPageChange:s,onItemsPerPageChange:a})})]})]}):r.jsx(Ie,{variant:"elevated",className:"mt-6 overflow-hidden",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 via-violet-50 to-purple-100 opacity-50"}),r.jsx("div",{className:"relative text-center py-8 md:py-10 px-6",children:r.jsxs("div",{className:"max-w-lg mx-auto",children:[r.jsx("div",{className:"mb-4 flex justify-center",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-purple-200 rounded-full blur-xl opacity-30 animate-pulse"}),r.jsx("div",{className:"relative w-16 h-16 md:w-20 md:h-20 rounded-2xl bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform duration-300",children:r.jsx("svg",{className:"w-8 h-8 md:w-10 md:h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})})]})}),r.jsx("h3",{className:"text-lg md:text-xl font-bold mb-3 bg-gradient-to-r from-purple-600 to-violet-600 bg-clip-text text-transparent",children:"No Action Responsible Assignments"}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("p",{className:"text-sm md:text-base text-gray-700 leading-relaxed font-medium",children:"You currently don't have any audit finding actions assigned to you as Action Responsible."}),r.jsx("p",{className:"text-xs md:text-sm text-gray-600 leading-relaxed",children:"As ongoing audits are completed and findings are identified, any actions assigned to you will appear here. You'll be able to view their details, track progress, and manage them from this dashboard."})]}),r.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-400 opacity-60"}),r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-violet-400 opacity-60"}),r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-400 opacity-60"})]})]})})]})}),u&&o&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:r.jsxs("div",{className:"bg-white rounded-2xl md:rounded-2xl rounded-t-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] md:max-h-[85vh] overflow-y-auto",onClick:re=>re.stopPropagation(),children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 px-[12.8px] py-[9.6px] md:px-[19.2px] md:py-[12.8px] rounded-t-2xl",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg md:text-2xl font-bold text-white",children:"Finding Action Details"}),r.jsx("p",{className:"text-purple-100 text-[9.6px] md:text-xs mt-0.5 md:mt-1",children:o.key})]}),r.jsx("button",{onClick:()=>f(!1),className:"text-white hover:text-purple-200 transition-colors p-2",children:r.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"p-3 md:p-6 space-y-3 md:space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-[9.6px] md:gap-[19.2px]",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Audit Name"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-xs md:text-sm",children:o.auditName||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Status"}),r.jsx("div",{className:"mt-0.5 md:mt-1",children:r.jsx(Ze,{variant:i0(o.status),size:"sm",className:"text-[10px] md:text-xs",children:o.status==="COMPLETED"?"Completed":o.status==="RISK ACCEPTED"?"Risk Accepted":o.status})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Risk Level"}),r.jsx("div",{className:"mt-0.5 md:mt-1",children:r.jsx(Ze,{size:"sm",className:"text-[10px] md:text-xs",variant:o.riskLevel==="Critical"?"danger":o.riskLevel==="High"?"warning":o.riskLevel==="Medium"?"info":"default",children:o.riskLevel||"Unassigned"})})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Due Date"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-xs md:text-sm",children:o.dueDate?kr(o.dueDate,"PPP"):"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Financial Impact"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-xs md:text-sm",children:mr(o.monetaryImpact||0)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Responsible"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base truncate",children:o.responsibleEmail||"-"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"C-Level"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base truncate",children:o.cLevel||"-"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Summary"}),r.jsx("p",{className:"text-gray-900 mt-1 md:mt-2 p-[9.6px] md:p-[12.8px] bg-gray-50 rounded-lg text-xs md:text-sm",children:o.summary})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Description"}),r.jsx("p",{className:"text-gray-700 mt-1 md:mt-2 p-[9.6px] md:p-[12.8px] bg-gray-50 rounded-lg whitespace-pre-wrap text-xs md:text-sm",children:o.description||"No description available"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Finding Description"}),r.jsx("p",{className:"text-gray-700 mt-1 md:mt-2 p-[9.6px] md:p-[12.8px] bg-purple-50 rounded-lg whitespace-pre-wrap border border-purple-200 text-xs md:text-sm",children:o.parentDescription||"No description available"})]}),r.jsx("div",{className:"hidden md:flex justify-end items-center pt-3 md:pt-4 border-t",children:r.jsx(Be,{variant:"outline",onClick:()=>f(!1),children:"Close"})})]})]})})]})},_8=()=>{const[t,e]=L.useState("2024+"),[n,s]=L.useState(1),[i,a]=L.useState(25),[o,c]=L.useState(null),[u,f]=L.useState(!1),[h,p]=L.useState(window.innerWidth<768),[m,g]=L.useState(null),[y,b]=L.useState(null),[v,w]=L.useState("asc"),[N,k]=L.useState("all"),[j,S]=L.useState("all"),[C,O]=L.useState("all"),[M,B]=L.useState(""),[I,R]=L.useState(null);L.useEffect(()=>{const J=()=>p(window.innerWidth<768);return window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)},[]);const{role:P,isImpersonating:q,originalUser:H,startImpersonation:G}=Dr(),{isExporting:ne,exportFindingActions:X}=Hd(),ee=L.useRef(null),[Y,U]=L.useState(()=>{const J=localStorage.getItem("clevel-actions-column-order");return J?JSON.parse(J):["key","summary","description","status","audit","dueDate","riskLevel","responsible","actions"]}),[T,W]=L.useState(null),[z,Q]=L.useState(null),{data:Z=[],isLoading:V}=ME({auditYear:t==="all"?void 0:t});L.useEffect(()=>{const J=ue=>{ue.key==="Escape"&&u&&f(!1)};if(u)return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[u]);const ie=()=>{k("all"),S("all"),O("all"),B(""),b(null),w("asc")},de=async J=>{try{await G(J),window.location.reload()}catch{}},fe=J=>{W(J)},ve=(J,ue)=>{J.preventDefault(),Q(ue)},He=J=>{if(!T||T===J){W(null),Q(null);return}const ue=[...Y],Ce=ue.indexOf(T),ze=ue.indexOf(J);ue.splice(Ce,1),ue.splice(ze,0,T),U(ue),localStorage.setItem("clevel-actions-column-order",JSON.stringify(ue)),W(null),Q(null)},$e=()=>{W(null),Q(null)},st={key:120,summary:250,description:280,status:120,audit:200,dueDate:120,riskLevel:100,responsible:180,actions:120},{columnWidths:_e,resizing:it,handleMouseDown:rt}=Go(ee,st,"clevel-actions-columns"),at=L.useMemo(()=>{if(!Z||!Array.isArray(Z))return{total:0,open:0,overdue:0,completed:0,financialImpact:0,completionRate:"0.0",overdueRate:"0.0",moneyOpen:0,moneyOverdue:0};const J=Z.filter(ht=>ht.status==="Open"),ue=Z.filter(ht=>ht.status==="Overdue"),Ce=new Set(J.map(ht=>ht.parentKey).filter(Boolean)),ze=new Set(ue.map(ht=>ht.parentKey).filter(Boolean)),Fe=Array.from(Ce).reduce((ht,Te)=>{const St=J.find(Dt=>Dt.parentKey===Te);return ht+((St==null?void 0:St.monetaryImpact)||0)},0),Ue=Array.from(ze).reduce((ht,Te)=>{const St=ue.find(Dt=>Dt.parentKey===Te);return ht+((St==null?void 0:St.monetaryImpact)||0)},0);return{total:Z.length,open:J.length,overdue:ue.length,completed:Z.filter(ht=>ht.status==="COMPLETED"||ht.status==="Completed").length,financialImpact:Fe+Ue,moneyOpen:Fe,moneyOverdue:Ue,completionRate:Z.length>0?(Z.filter(ht=>ht.status==="COMPLETED"||ht.status==="Completed").length/Z.length*100).toFixed(1):"0.0",overdueRate:Z.length>0?(Z.filter(ht=>ht.status==="Overdue").length/Z.length*100).toFixed(1):"0.0"}},[Z]),Oe=L.useMemo(()=>{if(!Z||!Array.isArray(Z))return{labels:[],datasets:[]};const J={};Z.forEach(Te=>{J[Te.status]=(J[Te.status]||0)+1});const ue={COMPLETED:"Completed",Completed:"Completed","RISK ACCEPTED":"Risk Accepted","Risk Accepted":"Risk Accepted",Open:"Open",Overdue:"Overdue","In Progress":"In Progress"},Ce={Open:"rgba(59, 130, 246, 0.8)",Overdue:"rgba(239, 68, 68, 0.8)",Completed:"rgba(34, 197, 94, 0.8)","Risk Accepted":"rgba(147, 51, 234, 0.8)","In Progress":"rgba(59, 130, 246, 0.8)"},ze={};Object.entries(J).forEach(([Te,St])=>{const Dt=ue[Te]||Te;ze[Dt]=(ze[Dt]||0)+St});const Fe=Object.keys(ze),Ue=Fe.map(Te=>ze[Te]||0),ht=Fe.map(Te=>Ce[Te]||"rgba(156, 163, 175, 0.8)");return{labels:Fe,datasets:[{data:Ue,backgroundColor:ht,borderColor:"#fff",borderWidth:2}]}},[Z]),oe=L.useMemo(()=>{let J=[...Z];if(N!=="all"&&(J=J.filter(ue=>ue.status===N)),j!=="all"&&(J=J.filter(ue=>ue.auditName===j)),C!=="all"&&(J=J.filter(ue=>ue.riskLevel===C)),M.trim()){const ue=M.toLowerCase();J=J.filter(Ce=>Ce.key.toLowerCase().includes(ue)||Ce.summary.toLowerCase().includes(ue)||Ce.auditName&&Ce.auditName.toLowerCase().includes(ue)||Ce.description&&Ce.description.toLowerCase().includes(ue))}return y&&J.sort((ue,Ce)=>{const ze=ue[y],Fe=Ce[y],Ue=ze<Fe?-1:ze>Fe?1:0;return v==="asc"?Ue:-Ue}),J},[Z,y,v,N,j,C,M]),ge=L.useMemo(()=>[...new Set(Z.map(ue=>ue.status))].filter(Boolean).map(ue=>ue==="COMPLETED"?"Completed":ue==="RISK ACCEPTED"?"Risk Accepted":ue).sort(),[Z]),Ne=L.useMemo(()=>[...new Set(Z.map(ue=>ue.auditName))].filter(Boolean).sort(),[Z]),Ae=L.useMemo(()=>[...new Set(Z.map(ue=>ue.riskLevel))].filter(Boolean).sort(),[Z]),ke=L.useMemo(()=>{const J=(n-1)*i,ue=J+i;return oe.slice(J,ue)},[oe,n,i]),re=J=>{y===J?w(v==="asc"?"desc":"asc"):(b(J),w("asc"))},te=J=>J==="COMPLETED"||J==="Completed"?"success":J==="Overdue"?"danger":J==="Open"?"warning":J==="RISK ACCEPTED"||J==="Risk Accepted"?"info":"default";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-[12.8px] md:gap-0",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-[13px] md:text-[22px] font-bold text-gray-900",children:"C-Level Actions"}),r.jsx("p",{className:"text-[9.6px] md:text-xs text-gray-600 mt-1",children:"Executive-level audit finding actions overview"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-[6.4px] md:gap-[12.8px] w-full md:w-auto justify-end md:justify-start",children:[(P==="admin"||q&&(H==null?void 0:H.role)==="admin")&&r.jsx(Qd,{onSelectUser:de,filterByRole:"top_management",className:"text-xs md:text-sm"}),r.jsxs("div",{className:"inline-flex rounded-lg border border-gray-300 bg-white p-0.5 md:p-1 shadow-sm",children:[r.jsxs("button",{onClick:()=>e("2024+"),className:`flex items-center gap-[3.2px] md:gap-[6.4px] px-[4.8px] py-[3.2px] md:px-[12.8px] md:py-[6.4px] text-[8px] md:text-xs font-medium rounded-md transition-all ${t==="2024+"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("svg",{className:"w-3 h-3 md:w-5 md:h-5",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",fill:t==="2024+"?"white":"#E5E7EB"}),r.jsx("rect",{x:"3",y:"4",width:"18",height:"6",rx:"2",fill:t==="2024+"?"#DC2626":"#991B1B"}),r.jsx("text",{x:"12",y:"8",textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"bold",children:"JUL"}),r.jsx("text",{x:"12",y:"16",textAnchor:"middle",fill:t==="2024+"?"#6B7280":"#1F2937",fontSize:"8",fontWeight:"bold",children:"17"})]}),!h&&r.jsx("span",{children:"As of 2024"}),h&&r.jsx("span",{children:"As of 2024"})]}),r.jsxs("button",{onClick:()=>e("all"),className:`flex items-center gap-[3.2px] md:gap-[6.4px] px-[4.8px] py-[3.2px] md:px-[12.8px] md:py-[6.4px] text-[8px] md:text-xs font-medium rounded-md transition-all ${t==="all"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("svg",{className:"w-3 h-3 md:w-5 md:h-5",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("rect",{x:"4",y:"14",width:"3",height:"6",fill:"#10B981",rx:"0.5"}),r.jsx("rect",{x:"10",y:"8",width:"3",height:"12",fill:"#EF4444",rx:"0.5"}),r.jsx("rect",{x:"16",y:"11",width:"3",height:"9",fill:"#3B82F6",rx:"0.5"}),r.jsx("line",{x1:"3",y1:"7",x2:"21",y2:"7",stroke:t==="all"?"white":"#9CA3AF",strokeWidth:"1.5"})]}),!h&&r.jsx("span",{children:"All Results"}),h&&r.jsx("span",{children:"All"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-4 lg:grid-cols-8 gap-1.5 md:gap-2",children:[r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-purple-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-purple-100 text-purple-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsx("svg",{className:F("text-purple-600 mb-0.5 md:mb-1.5",h?"w-3 h-3":"w-4 md:h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),r.jsx("p",{className:F("font-bold text-purple-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:at.total}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Total"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-amber-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-amber-100 text-amber-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsx("svg",{className:F("text-amber-600 mb-0.5 md:mb-1.5",h?"w-3 h-3":"w-4 md:h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:F("font-bold text-amber-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:at.open}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Open"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-red-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-red-100 text-red-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsx("svg",{className:F("text-red-600 mb-0.5 md:mb-1.5",h?"w-3 h-3":"w-4 md:h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsx("p",{className:F("font-bold text-red-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:at.overdue}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Overdue"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-green-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-green-100 text-green-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsx("svg",{className:F("text-green-600 mb-0.5 md:mb-1.5",h?"w-3 h-3":"w-4 md:h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:F("font-bold text-green-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:at.completed}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Done"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-blue-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-blue-100 text-blue-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsxs("p",{className:F("font-bold text-blue-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:[at.completionRate,"%"]}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Completion Rate"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-orange-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-orange-100 text-orange-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsxs("p",{className:F("font-bold text-orange-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:[at.overdueRate,"%"]}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Overdue Rate"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 border-t-amber-600 hover:shadow-lg transition-all flex flex-col",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-amber-100 text-amber-700 rounded-full",h&&"top-0.5 right-0.5"),children:"2024+"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsx("p",{className:F("font-bold text-amber-600 text-center leading-tight whitespace-nowrap",h?"text-xs":"text-lg md:text-xl"),children:mr(at.moneyOpen)}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Open"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 border-t-rose-600 hover:shadow-lg transition-all flex flex-col",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-rose-100 text-rose-700 rounded-full",h&&"top-0.5 right-0.5"),children:"2024+"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsx("p",{className:F("font-bold text-rose-600 text-center leading-tight whitespace-nowrap",h?"text-xs":"text-lg md:text-xl"),children:mr(at.moneyOverdue)}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Overdue"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(Wh,{title:"C-Level Actions Status Distribution",subtitle:"Current status breakdown",data:Oe,height:h?280:330,loading:V,options:{plugins:{legend:{display:!0,position:"bottom",labels:{padding:h?8:14,usePointStyle:!0,font:{size:h?9:11},generateLabels:J=>{const ue=J.data;if(ue.labels&&ue.datasets&&ue.datasets.length>0){const Ce=ue.datasets[0];if(!Ce)return[];const ze=Ce.backgroundColor;return ue.labels.map((Fe,Ue)=>{const ht=Array.isArray(Ce.data)?Ce.data[Ue]:0,Te=Array.isArray(ze)?ze[Ue]:ze;return{text:h?`${Fe}: ${ht}`:`${Fe}: ${ht}`,fillStyle:typeof Te=="string"?Te:"rgba(156, 163, 175, 0.8)",hidden:!1,index:Ue}})}return[]}}},datalabels:{display:!1},tooltip:{callbacks:{label:J=>{const ue=J.label||"",Ce=J.parsed||0,Fe=J.dataset.data.reduce((ht,Te)=>ht+Te,0),Ue=(Ce/Fe*100).toFixed(1);return`${ue}: ${Ce} (${Ue}%)`}}}}}}),r.jsxs(Ie,{className:F("",!h&&"flex flex-col"),children:[r.jsx(vt,{title:"Actions by Responsible and Status",subtitle:"Distribution by action responsible",className:"flex-shrink-0"}),r.jsx("div",{className:F("p-2.5 md:p-5 flex-1",!h&&"overflow-y-auto min-h-0"),children:V?r.jsx(Nt,{size:"lg"}):r.jsxs("div",{className:F("space-y-1.5",h&&"space-y-1.5"),children:[(()=>{const J={};return Z.forEach(Ce=>{const ze=Ce.responsibleEmail||"Unassigned",Fe=Ce.status==="COMPLETED"?"Completed":Ce.status==="RISK ACCEPTED"?"Risk Accepted":Ce.status;J[ze]||(J[ze]={}),J[ze][Fe]=(J[ze][Fe]||0)+1}),Object.entries(J).sort((Ce,ze)=>{const Fe=Object.values(Ce[1]).reduce((ht,Te)=>ht+Te,0);return Object.values(ze[1]).reduce((ht,Te)=>ht+Te,0)-Fe}).slice(0,6).map(([Ce,ze])=>{const Fe=Object.values(ze).reduce((Dt,yr)=>Dt+yr,0),Ue=ze.Completed||0,ht=ze.Open||0,Te=ze.Overdue||0,St=ze["Risk Accepted"]||0;return r.jsxs("div",{className:F("space-y-0.5 md:space-y-0.5 relative"),children:[r.jsxs("div",{className:F("flex items-center justify-between",h?"text-[10px]":"text-[11px]"),children:[r.jsx("span",{className:F("text-gray-700 font-medium truncate",h?"max-w-[140px]":"max-w-[200px]"),title:Ce,children:Ce}),r.jsxs("span",{className:F("text-gray-500",h?"text-[9px]":""),children:[Fe," actions"]})]}),r.jsxs("div",{className:F("flex rounded-full overflow-visible bg-gray-100 relative",h?"h-3.5":"h-[22px]"),children:[Ue>0&&r.jsxs("div",{className:F("bg-green-500 flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-90 transition-opacity relative group",h?"text-[8px]":"text-xs"),style:{width:`${Ue/Fe*100}%`},onMouseEnter:()=>R({responsible:Ce,status:"Completed",percentage:(Ue/Fe*100).toFixed(1)}),onMouseLeave:()=>R(null),children:[Ue>0&&Ue/Fe*100>8&&r.jsx("span",{className:F("px-0.5",h&&"text-[7px]"),children:Ue}),(I==null?void 0:I.responsible)===Ce&&(I==null?void 0:I.status)==="Completed"&&r.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-3 py-1.5 rounded-lg text-xs whitespace-nowrap z-50 shadow-lg",children:["Completed: ",Ue," (",I.percentage,"%)",r.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"})]})]}),ht>0&&r.jsxs("div",{className:F("bg-blue-500 flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-90 transition-opacity relative group",h?"text-[8px]":"text-xs"),style:{width:`${ht/Fe*100}%`},onMouseEnter:()=>R({responsible:Ce,status:"Open",percentage:(ht/Fe*100).toFixed(1)}),onMouseLeave:()=>R(null),children:[ht>0&&ht/Fe*100>8&&r.jsx("span",{className:F("px-0.5",h&&"text-[7px]"),children:ht}),(I==null?void 0:I.responsible)===Ce&&(I==null?void 0:I.status)==="Open"&&r.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-3 py-1.5 rounded-lg text-xs whitespace-nowrap z-50 shadow-lg",children:["Open: ",ht," (",I.percentage,"%)",r.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"})]})]}),Te>0&&r.jsxs("div",{className:F("bg-red-500 flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-90 transition-opacity relative group",h?"text-[8px]":"text-xs"),style:{width:`${Te/Fe*100}%`},onMouseEnter:()=>R({responsible:Ce,status:"Overdue",percentage:(Te/Fe*100).toFixed(1)}),onMouseLeave:()=>R(null),children:[Te>0&&Te/Fe*100>8&&r.jsx("span",{className:F("px-0.5",h&&"text-[7px]"),children:Te}),(I==null?void 0:I.responsible)===Ce&&(I==null?void 0:I.status)==="Overdue"&&r.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-3 py-1.5 rounded-lg text-xs whitespace-nowrap z-50 shadow-lg",children:["Overdue: ",Te," (",I.percentage,"%)",r.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"})]})]}),St>0&&r.jsxs("div",{className:F("bg-purple-500 flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-90 transition-opacity relative group",h?"text-[8px]":"text-xs"),style:{width:`${St/Fe*100}%`},onMouseEnter:()=>R({responsible:Ce,status:"Risk Accepted",percentage:(St/Fe*100).toFixed(1)}),onMouseLeave:()=>R(null),children:[St>0&&St/Fe*100>8&&r.jsx("span",{className:F("px-0.5",h&&"text-[7px]"),children:St}),(I==null?void 0:I.responsible)===Ce&&(I==null?void 0:I.status)==="Risk Accepted"&&r.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-3 py-1.5 rounded-lg text-xs whitespace-nowrap z-50 shadow-lg",children:["Risk Accepted: ",St," (",I.percentage,"%)",r.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"})]})]})]})]},Ce)})})(),r.jsxs("div",{className:F("flex flex-wrap gap-2 md:gap-3 mt-3 md:mt-4 pt-3 md:pt-4 border-t border-gray-200 justify-center",h&&"gap-1.5"),children:[r.jsxs("div",{className:F("flex items-center gap-1",h&&"gap-0.5"),children:[r.jsx("div",{className:F("bg-green-500 rounded",h?"w-2 h-2":"w-3 h-3")}),r.jsx("span",{className:F("text-gray-600",h?"text-[9px]":"text-xs"),children:"Completed"})]}),r.jsxs("div",{className:F("flex items-center gap-1",h&&"gap-0.5"),children:[r.jsx("div",{className:F("bg-blue-500 rounded",h?"w-2 h-2":"w-3 h-3")}),r.jsx("span",{className:F("text-gray-600",h?"text-[9px]":"text-xs"),children:"Open"})]}),r.jsxs("div",{className:F("flex items-center gap-1",h&&"gap-0.5"),children:[r.jsx("div",{className:F("bg-red-500 rounded",h?"w-2 h-2":"w-3 h-3")}),r.jsx("span",{className:F("text-gray-600",h?"text-[9px]":"text-xs"),children:"Overdue"})]}),r.jsxs("div",{className:F("flex items-center gap-1",h&&"gap-0.5"),children:[r.jsx("div",{className:F("bg-purple-500 rounded",h?"w-2 h-2":"w-3 h-3")}),r.jsx("span",{className:F("text-gray-600",h?"text-[9px]":"text-xs"),children:"Risk Accepted"})]})]})]})})]})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"C-Level Finding Actions",subtitle:`${oe.length} actions found${oe.length!==((Z==null?void 0:Z.length)||0)?` (filtered from ${(Z==null?void 0:Z.length)||0} total)`:""}`,action:r.jsxs(Be,{variant:"primary",size:"sm",onClick:()=>X({auditYear:t,role:"clevel"}),isLoading:ne,className:"text-xs md:text-sm px-2 md:px-4",children:[r.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{className:"hidden md:inline",children:"Export to Excel"}),r.jsx("span",{className:"md:hidden",children:"Export"})]})}),V?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"xl",text:"Loading C-Level actions..."})}):!Z||!Array.isArray(Z)?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No actions found"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No C-Level actions available for the selected filters."})]}):r.jsxs("div",{className:"overflow-x-auto mt-4",children:[r.jsxs("div",{className:"mb-4 space-y-3",children:[r.jsxs("div",{className:"relative max-w-md",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:r.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),r.jsx("input",{type:"text",placeholder:"Search by key, summary, audit, or description...",value:M,onChange:J=>B(J.target.value),className:"w-full pl-10 pr-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all"}),M&&r.jsx("button",{onClick:()=>B(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(N!=="all"||j!=="all"||C!=="all"||M)&&r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Active filters:"}),N!=="all"&&r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:["Status: ",N,r.jsx("button",{onClick:()=>k("all"),className:"hover:bg-blue-200 rounded-full p-0.5",children:r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),j!=="all"&&r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:["Audit: ",j.length>20?j.substring(0,20)+"...":j,r.jsx("button",{onClick:()=>S("all"),className:"hover:bg-green-200 rounded-full p-0.5",children:r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C!=="all"&&r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:["Risk: ",C,r.jsx("button",{onClick:()=>O("all"),className:"hover:bg-amber-200 rounded-full p-0.5",children:r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),M&&r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:['Search: "',M.length>15?M.substring(0,15)+"...":M,'"',r.jsx("button",{onClick:()=>B(""),className:"hover:bg-purple-200 rounded-full p-0.5",children:r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("button",{onClick:ie,className:"text-xs text-gray-500 hover:text-gray-700 underline",children:"Clear all"})]})]}),r.jsxs("div",{className:F("mb-3 md:mb-4 flex flex-col md:flex-row md:flex-wrap md:items-center gap-2 md:gap-3 md:justify-between",h&&"px-2"),children:[r.jsxs("div",{className:F("grid gap-2 md:flex md:flex-wrap md:items-center flex-1",h?"grid-cols-1":""),children:[r.jsxs("div",{className:F("flex items-center",h?"gap-1":"gap-1.5"),children:[r.jsx("label",{className:F("font-medium text-gray-600 whitespace-nowrap",h?"text-[10px]":"text-xs"),children:"Audit:"}),r.jsxs("select",{value:j,onChange:J=>S(J.target.value),className:F("flex-1 md:flex-none bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer md:max-w-xs",h?"px-2 py-1 text-[10px]":"px-3 py-1.5 text-xs"),style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.3rem center",backgroundRepeat:"no-repeat",backgroundSize:h?"0.9em 0.9em":"1.2em 1.2em",paddingRight:h?"1.5rem":"2rem"},children:[r.jsx("option",{value:"all",children:"All Audits"}),Ne.map(J=>r.jsx("option",{value:J,children:J},J))]})]}),r.jsxs("div",{className:F("grid gap-2 md:flex",h?"grid-cols-2":""),children:[r.jsxs("div",{className:F("flex items-center",h?"gap-1":"gap-1.5"),children:[r.jsx("label",{className:F("font-medium text-gray-600 whitespace-nowrap",h?"text-[10px]":"text-xs"),children:"Status:"}),r.jsxs("select",{value:N,onChange:J=>k(J.target.value),className:F("flex-1 md:flex-none bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",h?"px-2 py-1 text-[10px]":"px-3 py-1.5 text-xs"),style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.3rem center",backgroundRepeat:"no-repeat",backgroundSize:h?"0.9em 0.9em":"1.2em 1.2em",paddingRight:h?"1.5rem":"2rem"},children:[r.jsx("option",{value:"all",children:"All Statuses"}),ge.map(J=>r.jsx("option",{value:J,children:J},J))]})]}),r.jsxs("div",{className:F("flex items-center",h?"gap-1":"gap-1.5"),children:[r.jsx("label",{className:F("font-medium text-gray-600 whitespace-nowrap",h?"text-[10px]":"text-xs"),children:"Risk:"}),r.jsxs("select",{value:C,onChange:J=>O(J.target.value),className:F("flex-1 md:flex-none bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",h?"px-2 py-1 text-[10px]":"px-3 py-1.5 text-xs"),style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.3rem center",backgroundRepeat:"no-repeat",backgroundSize:h?"0.9em 0.9em":"1.2em 1.2em",paddingRight:h?"1.5rem":"2rem"},children:[r.jsx("option",{value:"all",children:"All Levels"}),Ae.map(J=>r.jsx("option",{value:J,children:J},J))]})]})]})]}),r.jsx("div",{className:F("flex gap-2",h&&"justify-end"),children:r.jsxs(Be,{variant:"outline",size:"sm",onClick:ie,className:F("border-purple-300 text-purple-700 hover:bg-purple-50",h?"px-2 py-1 text-[10px]":"text-xs md:text-sm px-2 md:px-4"),children:[r.jsx("svg",{className:F("md:mr-1",h?"w-3 h-3":"w-3 h-3 md:w-4 md:h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),!h&&r.jsx("span",{children:"Reset"})]})})]}),r.jsxs("table",{ref:ee,className:"w-full hidden md:table table-fixed",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b border-gray-200",children:Y.map(J=>{const ue={key:{label:"Key",sortable:!0,sortKey:"key"},summary:{label:"Summary",sortable:!1},description:{label:"Description",sortable:!1},status:{label:"Status",sortable:!0,sortKey:"status"},audit:{label:"Audit",sortable:!0,sortKey:"auditName"},dueDate:{label:"Due Date",sortable:!0,sortKey:"dueDate"},riskLevel:{label:"Risk Level",sortable:!0,sortKey:"riskLevel"},responsible:{label:"Responsible",sortable:!1},actions:{label:"Action Detail",sortable:!1}}[J];return r.jsx(ss,{columnKey:J,width:_e[J],onResizeStart:rt,isResizing:it===J,className:F("text-left py-3 px-4 text-sm font-semibold text-gray-700",(ue==null?void 0:ue.sortable)&&"cursor-pointer hover:bg-purple-50 transition-colors select-none",J==="actions"&&"text-center"),onClick:ue!=null&&ue.sortable&&(ue!=null&&ue.sortKey)?()=>re(ue.sortKey):void 0,onDragStart:fe,onDragOver:ve,onDrop:He,onDragEnd:$e,isDragging:T===J,isDragOver:z===J,children:ue!=null&&ue.sortable&&(ue!=null&&ue.sortKey)?r.jsxs("div",{className:"flex items-center gap-2",children:[ue==null?void 0:ue.label,r.jsx("span",{className:y===ue.sortKey?"text-purple-600":"text-gray-400",children:y===ue.sortKey?v==="asc"?"":"":""})]}):ue==null?void 0:ue.label},J)})})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:ke.map(J=>r.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:Y.map(ue=>r.jsxs("td",{className:"px-4 py-3 text-sm",style:{width:_e[ue]},children:[ue==="key"&&r.jsx("span",{className:"text-purple-600 font-mono font-semibold",children:J.key}),ue==="summary"&&r.jsx("span",{className:"text-gray-900 font-medium",children:J.summary}),ue==="description"&&r.jsx("span",{className:"text-gray-600 text-sm",children:J.description||"-"}),ue==="status"&&r.jsx(Ze,{variant:te(J.status),children:J.status==="COMPLETED"?"Completed":J.status==="RISK ACCEPTED"?"Risk Accepted":J.status}),ue==="audit"&&r.jsx("span",{className:"text-gray-600 text-sm",children:J.auditName||"-"}),ue==="dueDate"&&r.jsx("span",{className:"text-gray-600 text-sm",children:J.dueDate?kr(J.dueDate,"PP"):"-"}),ue==="riskLevel"&&r.jsx(Ze,{variant:J.riskLevel==="Critical"?"danger":J.riskLevel==="High"?"warning":J.riskLevel==="Medium"?"info":"default",children:J.riskLevel||"Unassigned"}),ue==="responsible"&&r.jsx("span",{className:"text-gray-600 text-sm",children:J.responsibleEmail||"-"}),ue==="actions"&&r.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>{c(J),f(!0)},children:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]},ue))},J.key))})]}),r.jsx("div",{className:"block md:hidden space-y-2 mt-2",children:ke.map(J=>{const ue=m===J.key;return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden transition-all duration-200",children:[r.jsxs("div",{onClick:()=>g(ue?null:J.key),className:"p-3 cursor-pointer active:bg-gray-50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-[10px] font-bold text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded font-mono",children:J.key}),r.jsx(Ze,{variant:te(J.status),size:"sm",className:"text-[10px] px-1.5 py-0.5 h-5",children:J.status==="COMPLETED"?"Completed":J.status==="RISK ACCEPTED"?"Risk Accepted":J.status})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),c(J),f(!0)},className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",children:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),r.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${ue?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),r.jsx("h4",{className:`text-xs font-medium text-gray-900 leading-snug mb-2 ${ue?"":"line-clamp-2"}`,children:J.summary}),r.jsxs("div",{className:"flex items-center justify-between text-[10px] text-gray-500 border-t border-gray-50 pt-2 mt-1",children:[r.jsxs("div",{className:"flex items-center gap-1 max-w-[60%]",children:[r.jsx("svg",{className:"w-3 h-3 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{className:"truncate",children:J.auditName||"-"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("span",{children:J.dueDate?kr(J.dueDate):"-"})]})]})]}),ue&&r.jsxs("div",{className:"px-3 pb-3 pt-0 bg-gray-50/50 border-t border-gray-100",children:[J.description&&r.jsx("div",{className:"mt-2 mb-3",children:r.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:J.description})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-gray-400 font-semibold uppercase",children:"Risk Level"}),r.jsx("div",{children:r.jsx(Ze,{variant:J.riskLevel==="Critical"?"danger":J.riskLevel==="High"?"warning":J.riskLevel==="Medium"?"info":"default",size:"sm",className:"text-[10px] px-1.5 py-0.5",children:J.riskLevel||"Unassigned"})})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-gray-400 font-semibold uppercase",children:"Responsible"}),r.jsx("span",{className:"text-gray-700 truncate",children:J.responsibleEmail||"-"})]})]})]})]},J.key)})})]}),oe.length>0&&r.jsx("div",{className:F("mt-3 md:mt-4 pt-3 md:pt-4 border-t border-gray-200",h&&"px-2"),children:r.jsxs("div",{className:F("flex flex-col md:flex-row items-stretch md:items-center gap-3 md:gap-4",h&&"gap-2"),children:[r.jsxs("div",{className:F("flex items-center gap-1.5 md:gap-2",h&&"justify-center"),children:[r.jsx("span",{className:F("text-gray-600",h?"text-[10px]":"text-sm"),children:"Show:"}),r.jsx("select",{value:i,onChange:J=>{a(parseInt(J.target.value,10)),s(1)},className:F("border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",h?"px-2 py-1 text-[10px]":"px-3 py-1.5 text-sm"),children:[10,25,50,100].map(J=>r.jsx("option",{value:J,children:J},J))}),r.jsx("span",{className:F("text-gray-600",h?"text-[10px]":"text-sm"),children:"per page"})]}),r.jsx("div",{className:F("flex-1 text-center",h&&"text-[10px]"),children:r.jsxs("span",{className:F("font-medium text-gray-700",h?"text-[10px]":"text-sm"),children:["Showing ",oe.length===0?0:(n-1)*i+1," to ",Math.min(n*i,oe.length)," of ",oe.length," items"]})}),r.jsxs("div",{className:F("flex items-center gap-1.5 md:gap-2",h&&"justify-center"),children:[r.jsxs(Be,{variant:"outline",size:"sm",onClick:()=>s(Math.max(1,n-1)),disabled:n===1,className:F(h?"px-2 py-1 text-[10px] min-w-[60px]":"min-w-[80px]"),children:[r.jsx("svg",{className:F("mr-1",h?"w-3 h-3":"w-4 h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),!h&&"Previous",h&&"Prev"]}),r.jsxs("span",{className:F("text-gray-600 px-1 md:px-2",h?"text-[10px]":"text-sm"),children:["Page ",n," of ",Math.ceil(oe.length/i)]}),r.jsxs(Be,{variant:"outline",size:"sm",onClick:()=>s(Math.min(Math.ceil(oe.length/i),n+1)),disabled:n>=Math.ceil(oe.length/i),className:F(h?"px-2 py-1 text-[10px] min-w-[60px]":"min-w-[80px]"),children:[!h&&"Next",h&&"Next",r.jsx("svg",{className:F("ml-1",h?"w-3 h-3":"w-4 h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})})]}),u&&o&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-2 md:p-4",onClick:()=>f(!1),children:r.jsxs("div",{className:"bg-white rounded-2xl md:rounded-2xl rounded-t-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] md:max-h-[90vh] overflow-y-auto",onClick:J=>J.stopPropagation(),children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 px-4 py-3 md:px-6 md:py-4 rounded-t-2xl",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[r.jsx("h2",{className:"text-lg md:text-2xl font-bold text-white",children:"Finding Action Details"}),r.jsx("p",{className:"text-purple-100 text-xs md:text-sm mt-0.5 md:mt-1",children:o.key})]}),r.jsx("button",{onClick:()=>f(!1),className:"text-white hover:text-purple-200 transition-colors p-2 flex-shrink-0",children:r.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"p-3 md:p-6 space-y-3 md:space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-6",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Audit Name"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base",children:o.auditName||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Status"}),r.jsx("div",{className:"mt-0.5 md:mt-1",children:r.jsx(Ze,{variant:te(o.status),size:"sm",className:"text-[10px] md:text-xs",children:o.status==="COMPLETED"?"Completed":o.status==="RISK ACCEPTED"?"Risk Accepted":o.status})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Risk Level"}),r.jsx("div",{className:"mt-0.5 md:mt-1",children:r.jsx(Ze,{size:"sm",className:"text-[10px] md:text-xs",variant:o.riskLevel==="Critical"?"danger":o.riskLevel==="High"?"warning":o.riskLevel==="Medium"?"info":"default",children:o.riskLevel||"Unassigned"})})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Due Date"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base",children:o.dueDate?kr(o.dueDate,"PPP"):"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Financial Impact"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base",children:mr(o.monetaryImpact||0)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Responsible"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base truncate",children:o.responsibleEmail||"-"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"C-Level"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base truncate",children:o.cLevel||"-"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Summary"}),r.jsx("p",{className:"text-gray-900 mt-1 md:mt-2 p-3 md:p-4 bg-gray-50 rounded-lg text-sm md:text-base",children:o.summary})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Description"}),r.jsx("p",{className:"text-gray-700 mt-1 md:mt-2 p-3 md:p-4 bg-gray-50 rounded-lg whitespace-pre-wrap text-sm md:text-base",children:o.description||"No description available"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Finding Description"}),r.jsx("p",{className:"text-gray-700 mt-1 md:mt-2 p-3 md:p-4 bg-purple-50 rounded-lg whitespace-pre-wrap border border-purple-200 text-sm md:text-base",children:o.parentDescription||"No description available"})]}),r.jsx("div",{className:"hidden md:flex justify-end items-center pt-3 md:pt-4 border-t",children:r.jsx(Be,{onClick:()=>f(!1),variant:"outline",children:"Close"})})]})]})})]})},k8=()=>{const[t,e]=L.useState("2024+"),[n,s]=L.useState(1),[i,a]=L.useState(25),[o,c]=L.useState(null),[u,f]=L.useState(!1),[h,p]=L.useState(window.innerWidth<768),[m,g]=L.useState(null);L.useEffect(()=>{const te=()=>p(window.innerWidth<768);return window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]);const[y,b]=L.useState(null),[v,w]=L.useState("asc"),[N,k]=L.useState("all"),[j,S]=L.useState("all"),[C,O]=L.useState("all"),[M,B]=L.useState("all"),{role:I,isImpersonating:R,originalUser:P,startImpersonation:q}=Dr(),{isExporting:H,exportFindingActions:G}=Hd(),ne=L.useRef(null),[X,ee]=L.useState(()=>{const te=localStorage.getItem("management-actions-column-order");return te?JSON.parse(te):["key","summary","description","status","audit","dueDate","riskLevel","responsible","actions"]}),[Y,U]=L.useState(null),[T,W]=L.useState(null),{data:z=[],isLoading:Q}=VE({auditYear:t==="all"?void 0:t});L.useEffect(()=>{const te=J=>{J.key==="Escape"&&u&&f(!1)};if(u)return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[u]);const Z=()=>{k("all"),S("all"),O("all"),B("all"),b(null),w("asc")},V=async te=>{try{await q(te),window.location.reload()}catch{}},ie=te=>{U(te)},de=(te,J)=>{te.preventDefault(),W(J)},fe=te=>{if(!Y||Y===te){U(null),W(null);return}const J=[...X],ue=J.indexOf(Y),Ce=J.indexOf(te);J.splice(ue,1),J.splice(Ce,0,Y),ee(J),localStorage.setItem("management-actions-column-order",JSON.stringify(J)),U(null),W(null)},ve=()=>{U(null),W(null)},He={key:120,summary:250,description:280,status:120,audit:200,dueDate:120,riskLevel:100,responsible:180,actions:120},{columnWidths:$e,resizing:st,handleMouseDown:_e}=Go(ne,He,"management-actions-columns"),it=L.useMemo(()=>{if(!z||!Array.isArray(z))return{total:0,open:0,overdue:0,completed:0,financialImpact:0,completionRate:"0.0",overdueRate:"0.0",moneyOpen:0,moneyOverdue:0};const te=z.filter(Ue=>Ue.status==="Open"),J=z.filter(Ue=>Ue.status==="Overdue"),ue=new Set(te.map(Ue=>Ue.parentKey).filter(Boolean)),Ce=new Set(J.map(Ue=>Ue.parentKey).filter(Boolean)),ze=Array.from(ue).reduce((Ue,ht)=>{const Te=te.find(St=>St.parentKey===ht);return Ue+((Te==null?void 0:Te.monetaryImpact)||0)},0),Fe=Array.from(Ce).reduce((Ue,ht)=>{const Te=J.find(St=>St.parentKey===ht);return Ue+((Te==null?void 0:Te.monetaryImpact)||0)},0);return{total:z.length,open:te.length,overdue:J.length,completed:z.filter(Ue=>Ue.status==="COMPLETED"||Ue.status==="Completed").length,financialImpact:ze+Fe,moneyOpen:ze,moneyOverdue:Fe,completionRate:z.length>0?(z.filter(Ue=>Ue.status==="COMPLETED"||Ue.status==="Completed").length/z.length*100).toFixed(1):"0.0",overdueRate:z.length>0?(z.filter(Ue=>Ue.status==="Overdue").length/z.length*100).toFixed(1):"0.0"}},[z]),rt=L.useMemo(()=>{if(!z||!Array.isArray(z))return{labels:[],datasets:[]};const te={};z.forEach(Fe=>{const Ue=Fe.status==="COMPLETED"?"Completed":Fe.status==="RISK ACCEPTED"?"Risk Accepted":Fe.status;te[Ue]=(te[Ue]||0)+1});const J={Open:"rgba(59, 130, 246, 0.8)",Overdue:"rgba(239, 68, 68, 0.8)",Completed:"rgba(34, 197, 94, 0.8)","Risk Accepted":"rgba(147, 51, 234, 0.8)"},ue=Object.keys(te),Ce=ue.map(Fe=>te[Fe]||0),ze=ue.map(Fe=>J[Fe]||"rgba(156,163,175,0.8)");return{labels:ue,datasets:[{data:Ce,backgroundColor:ze,borderColor:"#fff",borderWidth:2}]}},[z]),at=L.useMemo(()=>{if(!z||!Array.isArray(z))return[];const te=ue=>ue==="COMPLETED"?"Completed":ue==="RISK ACCEPTED"?"Risk Accepted":ue;let J=z.map(ue=>({...ue,displayStatus:te(ue.status)}));return N!=="all"&&(J=J.filter(ue=>ue.displayStatus===N)),j!=="all"&&(J=J.filter(ue=>ue.auditName===j)),C!=="all"&&(J=J.filter(ue=>ue.riskLevel===C)),M!=="all"&&(J=J.filter(ue=>ue.responsibleEmail===M)),y&&J.sort((ue,Ce)=>{const ze=ue[y],Fe=Ce[y],Ue=ze<Fe?-1:ze>Fe?1:0;return v==="asc"?Ue:-Ue}),J},[z,y,v,N,j,C,M]),Oe=L.useMemo(()=>[...new Set(z.map(J=>J.status))].filter(Boolean).map(J=>J==="COMPLETED"?"Completed":J==="RISK ACCEPTED"?"Risk Accepted":J).sort(),[z]),oe=L.useMemo(()=>[...new Set(z.map(J=>J.auditName))].filter(Boolean).sort(),[z]),ge=L.useMemo(()=>[...new Set(z.map(J=>J.riskLevel))].filter(Boolean).sort(),[z]),Ne=L.useMemo(()=>[...new Set(z.map(J=>J.responsibleEmail))].filter(Boolean).sort(),[z]),Ae=L.useMemo(()=>{const te=(n-1)*i,J=te+i;return at.slice(te,J)},[at,n,i]),ke=te=>{y===te?w(v==="asc"?"desc":"asc"):(b(te),w("asc"))},re=te=>te==="COMPLETED"||te==="Completed"?"success":te==="Overdue"?"danger":te==="Open"?"warning":te==="RISK ACCEPTED"||te==="Risk Accepted"?"info":"default";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-[12.8px] md:gap-0",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-[13px] md:text-[22px] font-bold text-gray-900",children:"Management Level Actions"}),r.jsx("p",{className:"text-[9.6px] md:text-xs text-gray-600 mt-1",children:"Actions assigned to you via management field"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-[6.4px] md:gap-[12.8px] w-full md:w-auto justify-end md:justify-start",children:[(I==="admin"||R&&(P==null?void 0:P.role)==="admin")&&r.jsx(Qd,{onSelectUser:V,filterByRole:"management"}),r.jsxs("div",{className:"inline-flex rounded-lg border border-gray-300 bg-white p-0.5 md:p-1 shadow-sm",children:[r.jsxs("button",{onClick:()=>e("2024+"),className:`flex items-center gap-[3.2px] md:gap-[6.4px] px-[4.8px] py-[3.2px] md:px-[12.8px] md:py-[6.4px] text-[8px] md:text-xs font-medium rounded-md transition-all ${t==="2024+"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("svg",{className:"w-3 h-3 md:w-5 md:h-5",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",fill:t==="2024+"?"white":"#E5E7EB"}),r.jsx("rect",{x:"3",y:"4",width:"18",height:"6",rx:"2",fill:t==="2024+"?"#DC2626":"#991B1B"}),r.jsx("text",{x:"12",y:"8",textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"bold",children:"JUL"}),r.jsx("text",{x:"12",y:"16",textAnchor:"middle",fill:t==="2024+"?"#6B7280":"#1F2937",fontSize:"8",fontWeight:"bold",children:"17"})]}),!h&&r.jsx("span",{children:"As of 2024"}),h&&r.jsx("span",{children:"As of 2024"})]}),r.jsxs("button",{onClick:()=>e("all"),className:`flex items-center gap-[3.2px] md:gap-[6.4px] px-[4.8px] py-[3.2px] md:px-[12.8px] md:py-[6.4px] text-[8px] md:text-xs font-medium rounded-md transition-all ${t==="all"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("svg",{className:"w-3 h-3 md:w-5 md:h-5",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("rect",{x:"4",y:"14",width:"3",height:"6",fill:"#10B981",rx:"0.5"}),r.jsx("rect",{x:"10",y:"8",width:"3",height:"12",fill:"#EF4444",rx:"0.5"}),r.jsx("rect",{x:"16",y:"11",width:"3",height:"9",fill:"#3B82F6",rx:"0.5"}),r.jsx("line",{x1:"3",y1:"7",x2:"21",y2:"7",stroke:t==="all"?"white":"#9CA3AF",strokeWidth:"1.5"})]}),!h&&r.jsx("span",{children:"All Results"}),h&&r.jsx("span",{children:"All"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-4 lg:grid-cols-8 gap-1.5 md:gap-2",children:[r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-purple-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-purple-100 text-purple-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsx("p",{className:F("font-bold text-purple-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:it.total}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Total"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-amber-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-amber-100 text-amber-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsx("p",{className:F("font-bold text-amber-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:it.open}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Open"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-red-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-red-100 text-red-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsx("p",{className:F("font-bold text-red-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:it.overdue}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Overdue"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-green-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-green-100 text-green-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsx("p",{className:F("font-bold text-green-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:it.completed}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Done"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-blue-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-blue-100 text-blue-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsxs("p",{className:F("font-bold text-blue-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:[it.completionRate,"%"]}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5 whitespace-nowrap",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Completion Rate"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-orange-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-orange-100 text-orange-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsxs("p",{className:F("font-bold text-orange-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:[it.overdueRate,"%"]}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5 whitespace-nowrap",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Overdue Rate"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 border-t-amber-600 hover:shadow-lg transition-all flex flex-col",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-amber-100 text-amber-700 rounded-full",h&&"top-0.5 right-0.5"),children:"2024+"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsx("p",{className:F("font-bold text-amber-600 text-center leading-tight whitespace-nowrap",h?"text-xs":"text-lg md:text-xl"),children:mr(it.moneyOpen)}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Open"})]})]}),r.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 border-t-rose-600 hover:shadow-lg transition-all flex flex-col",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[r.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-rose-100 text-rose-700 rounded-full",h&&"top-0.5 right-0.5"),children:"2024+"}),r.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[r.jsx("p",{className:F("font-bold text-rose-600 text-center leading-tight whitespace-nowrap",h?"text-xs":"text-lg md:text-xl"),children:mr(it.moneyOverdue)}),r.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Overdue"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-[12.16px]",children:[r.jsx(Wh,{title:"Status Distribution",subtitle:"Current status breakdown",data:rt,height:270,loading:Q,options:{plugins:{legend:{display:!0,position:"bottom",labels:{padding:10,usePointStyle:!0,font:{size:9}}},datalabels:{display:!1},tooltip:{callbacks:{label:te=>{const J=te.label||"",ue=te.parsed||0,ze=te.dataset.data.reduce((Ue,ht)=>Ue+ht,0),Fe=(ue/ze*100).toFixed(1);return`${J}: ${ue} (${Fe}%)`}}}},cutout:"60%"}}),r.jsxs(Ie,{children:[r.jsx(vt,{title:"Action Ownership Breakdown",subtitle:"Top action responsibles with status details"}),r.jsx("div",{className:"p-2.5",children:Q?r.jsx(Nt,{size:"lg"}):r.jsx("div",{className:"space-y-2 max-h-[270px] overflow-y-auto",children:(()=>{const te=["#3B82F6","#EF4444","#22C55E","#9333EA","#F59E0B","#EC4899","#0EA5E9","#A855F7","#22D3EE","#FB923C"],J={};z.forEach(Ce=>{const ze=Ce.responsibleEmail||"Unassigned";J[ze]||(J[ze]={total:0,completed:0,open:0,overdue:0,riskAccepted:0}),J[ze].total++;const Fe=Ce.status==="COMPLETED"?"Completed":Ce.status==="RISK ACCEPTED"?"Risk Accepted":Ce.status;Fe==="Completed"?J[ze].completed++:Fe==="Open"?J[ze].open++:Fe==="Overdue"?J[ze].overdue++:Fe==="Risk Accepted"&&J[ze].riskAccepted++});const ue=z.length;return Object.entries(J).sort((Ce,ze)=>ze[1].total-Ce[1].total).slice(0,10).map(([Ce,ze],Fe)=>{const Ue=(ze.total/ue*100).toFixed(1),ht=te[Fe],Te=Ce.split("@")[0];return r.jsxs("div",{className:"border-b border-gray-200 pb-2 last:border-b-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:ht}}),r.jsxs("div",{className:"flex-1 min-w-0 flex items-center justify-between",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"font-semibold text-xs text-gray-900 truncate",children:Te}),r.jsx("div",{className:"text-[9.6px] text-gray-500 truncate",children:Ce})]}),r.jsxs("span",{className:"font-bold text-gray-900 ml-2 text-xs",children:[ze.total," ",r.jsxs("span",{className:"text-gray-500 text-[9.6px]",children:["(",Ue,"%)"]})]})]})]}),r.jsxs("div",{className:F("flex flex-wrap ml-5",h?"gap-1":"gap-1.5"),children:[ze.open>0&&r.jsxs(Ze,{variant:"danger",size:h?"xs":"sm",className:F(h&&"!text-[8px] !px-1 !py-0"),children:["OPEN: ",ze.open]}),ze.completed>0&&r.jsxs(Ze,{variant:"success",size:h?"xs":"sm",className:F(h&&"!text-[8px] !px-1 !py-0"),children:["COMPLETED: ",ze.completed]}),ze.riskAccepted>0&&r.jsxs(Ze,{variant:"info",size:h?"xs":"sm",className:F(h&&"!text-[8px] !px-1 !py-0"),children:["RISK ACCEPTED: ",ze.riskAccepted]})]})]},Ce)})})()})})]})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Management Level Finding Actions",subtitle:`${at.length} actions found${at.length!==((z==null?void 0:z.length)||0)?` (filtered from ${(z==null?void 0:z.length)||0} total)`:""}`,action:r.jsxs(Be,{variant:"primary",size:"sm",onClick:()=>{const te=at.map(J=>J.key);G({auditYear:t,role:"management",actionKeys:te.length>0?te.join(","):void 0,statusFilter:N!=="all"?N:void 0,auditFilter:j!=="all"?j:void 0,riskLevelFilter:C!=="all"?C:void 0,responsibleFilter:M!=="all"?M:void 0})},isLoading:H,className:"text-[9.6px] md:text-xs px-[6.4px] md:px-[12.8px]",children:[r.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{className:"hidden md:inline",children:"Export to Excel"}),r.jsx("span",{className:"md:hidden",children:"Export"})]})}),Q?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"xl",text:"Loading management actions..."})}):!z||!Array.isArray(z)?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"mt-2 text-xs font-medium text-gray-900",children:"No actions found"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"No management actions available for the selected filters."})]}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3 justify-between",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 whitespace-nowrap",children:"Status:"}),r.jsxs("select",{value:N,onChange:te=>k(te.target.value),className:"px-[9.6px] py-[4.8px] text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[r.jsx("option",{value:"all",children:"All Statuses"}),Oe.map(te=>r.jsx("option",{value:te,children:te},te))]})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 whitespace-nowrap",children:"Audit:"}),r.jsxs("select",{value:j,onChange:te=>S(te.target.value),className:"px-[9.6px] py-[4.8px] text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer max-w-xs",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[r.jsx("option",{value:"all",children:"All Audits"}),oe.map(te=>r.jsx("option",{value:te,children:te},te))]})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 whitespace-nowrap",children:"Risk Level:"}),r.jsxs("select",{value:C,onChange:te=>O(te.target.value),className:"px-[9.6px] py-[4.8px] text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[r.jsx("option",{value:"all",children:"All Levels"}),ge.map(te=>r.jsx("option",{value:te,children:te},te))]})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 whitespace-nowrap",children:"Responsible:"}),r.jsxs("select",{value:M,onChange:te=>B(te.target.value),className:"px-[9.6px] py-[4.8px] text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer max-w-xs",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[r.jsx("option",{value:"all",children:"All"}),Ne.map(te=>r.jsx("option",{value:te,children:te},te))]})]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(Be,{variant:"outline",size:"sm",onClick:Z,className:"border-purple-300 text-purple-700 hover:bg-purple-50 text-[9.6px] md:text-xs px-[6.4px] md:px-[12.8px]",children:[r.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 md:mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.jsx("span",{className:"hidden md:inline",children:"Reset"})]})})]}),h&&r.jsx("div",{className:"space-y-3 mt-4",children:Ae.map(te=>{const J=m===te.key,ue=re(te.status);return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",onClick:()=>g(J?null:te.key),children:[r.jsxs("div",{className:"p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-[10px] font-bold text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded font-mono",children:te.key}),r.jsx(Ze,{variant:ue,size:"sm",className:"text-[10px] px-1.5 py-0.5 h-5",children:te.status==="COMPLETED"?"Completed":te.status==="RISK ACCEPTED"?"Risk Accepted":te.status})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),c(te),f(!0)},className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",children:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),r.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${J?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),r.jsx("h4",{className:`text-xs font-medium text-gray-900 leading-snug mb-2 ${J?"":"line-clamp-2"}`,children:te.summary}),r.jsxs("div",{className:"flex items-center justify-between text-[10px] text-gray-500 border-t border-gray-50 pt-2 mt-1",children:[r.jsxs("div",{className:"flex items-center gap-1 max-w-[60%]",children:[r.jsx("svg",{className:"w-3 h-3 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{className:"truncate",children:te.auditName||"-"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("span",{children:te.dueDate?kr(te.dueDate):"-"})]})]})]}),J&&r.jsxs("div",{className:"px-[9.6px] pb-[9.6px] pt-0 bg-gray-50/50 border-t border-gray-100",children:[te.description&&r.jsx("div",{className:"mt-2 mb-3",children:r.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:te.description})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-gray-400 font-semibold uppercase",children:"Risk Level"}),r.jsx("div",{children:r.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium ${te.riskLevel==="Critical"?"bg-red-100 text-red-700":te.riskLevel==="High"?"bg-orange-100 text-orange-700":te.riskLevel==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:te.riskLevel||"Unassigned"})})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-gray-400 font-semibold uppercase",children:"Responsible"}),r.jsx("span",{className:"text-gray-700 truncate",children:te.responsibleEmail||"-"})]})]})]})]},te.key)})}),!h&&r.jsx("div",{className:"overflow-x-auto mt-4",children:r.jsxs("table",{ref:ne,className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b border-gray-200",children:X.map(te=>{const J={key:{label:"Key",sortable:!0,sortKey:"key"},summary:{label:"Summary",sortable:!1},description:{label:"Description",sortable:!1},status:{label:"Status",sortable:!0,sortKey:"status"},audit:{label:"Audit",sortable:!0,sortKey:"auditName"},dueDate:{label:"Due Date",sortable:!0,sortKey:"dueDate"},riskLevel:{label:"Risk Level",sortable:!0,sortKey:"riskLevel"},responsible:{label:"Responsible",sortable:!1},actions:{label:"Action Detail",sortable:!1}}[te];return r.jsx(ss,{columnKey:te,width:$e[te],onResizeStart:_e,isResizing:st===te,className:F("text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",(J==null?void 0:J.sortable)&&"cursor-pointer hover:bg-purple-50 transition-colors select-none",te==="actions"&&"text-center"),onClick:J!=null&&J.sortable&&(J!=null&&J.sortKey)?()=>ke(J.sortKey):void 0,onDragStart:ie,onDragOver:de,onDrop:fe,onDragEnd:ve,isDragging:Y===te,isDragOver:T===te,children:J!=null&&J.sortable&&(J!=null&&J.sortKey)?r.jsxs("div",{className:"flex items-center gap-2",children:[J==null?void 0:J.label,r.jsx("span",{className:y===J.sortKey?"text-purple-600":"text-gray-400",children:y===J.sortKey?v==="asc"?"":"":""})]}):J==null?void 0:J.label},te)})})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:Ae.map(te=>r.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:X.map(J=>r.jsxs("td",{className:"px-[12.8px] py-[9.6px] text-xs align-top",style:{width:$e[J]},children:[J==="key"&&r.jsx("span",{className:"text-purple-600 font-mono text-xs",children:te.key}),J==="summary"&&r.jsx("span",{className:"text-xs font-medium text-gray-900 line-clamp-2",children:te.summary}),J==="description"&&r.jsx("span",{className:"text-gray-700 text-xs line-clamp-2",children:te.description||"-"}),J==="status"&&r.jsx(Ze,{variant:re(te.status),children:te.status==="COMPLETED"?"Completed":te.status==="RISK ACCEPTED"?"Risk Accepted":te.status}),J==="audit"&&r.jsx("span",{className:"text-gray-600 text-xs",children:te.auditName||"-"}),J==="dueDate"&&r.jsx("span",{className:"text-gray-600 text-xs",children:te.dueDate?kr(te.dueDate,"PP"):"-"}),J==="riskLevel"&&r.jsx(Ze,{variant:te.riskLevel==="Critical"?"danger":te.riskLevel==="High"?"warning":te.riskLevel==="Medium"?"info":"default",children:te.riskLevel||"Unassigned"}),J==="responsible"&&r.jsx("span",{className:"text-gray-600 text-xs",children:te.responsibleEmail||"-"}),J==="actions"&&r.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>{c(te),f(!0)},children:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]},J))},te.key))})]})}),at.length>0&&r.jsx("div",{className:"mt-4 p-4 border-t border-gray-200",children:r.jsx(Ch,{currentPage:n,totalItems:at.length,itemsPerPage:i,onPageChange:s,onItemsPerPageChange:a,isMobile:h})})]})]}),u&&o&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:r.jsxs("div",{className:"bg-white rounded-2xl md:rounded-2xl rounded-t-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] md:max-h-[85vh] overflow-y-auto",onClick:te=>te.stopPropagation(),children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 px-[12.8px] py-[9.6px] md:px-[19.2px] md:py-[12.8px] rounded-t-2xl",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg md:text-2xl font-bold text-white",children:"Finding Action Details"}),r.jsx("p",{className:"text-purple-100 text-[9.6px] md:text-xs mt-0.5 md:mt-1",children:o.key})]}),r.jsx("button",{onClick:()=>f(!1),className:"text-white hover:text-purple-200 transition-colors p-2",children:r.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"p-3 md:p-6 space-y-3 md:space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-[9.6px] md:gap-[19.2px]",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Audit Name"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-xs md:text-sm",children:o.auditName||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Status"}),r.jsx("div",{className:"mt-0.5 md:mt-1",children:r.jsx(Ze,{variant:re(o.status),size:"sm",className:"text-[10px] md:text-xs",children:o.status==="COMPLETED"?"Completed":o.status==="RISK ACCEPTED"?"Risk Accepted":o.status})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Risk Level"}),r.jsx("div",{className:"mt-0.5 md:mt-1",children:r.jsx(Ze,{size:"sm",className:"text-[10px] md:text-xs",variant:o.riskLevel==="Critical"?"danger":o.riskLevel==="High"?"warning":o.riskLevel==="Medium"?"info":"default",children:o.riskLevel||"Unassigned"})})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Due Date"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-xs md:text-sm",children:o.dueDate?kr(o.dueDate,"PPP"):"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Financial Impact"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-xs md:text-sm",children:mr(o.monetaryImpact||0)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Responsible"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base truncate",children:o.responsibleEmail||"-"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"C-Level"}),r.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base truncate",children:o.cLevel||"-"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Summary"}),r.jsx("p",{className:"text-gray-900 mt-1 md:mt-2 p-[9.6px] md:p-[12.8px] bg-gray-50 rounded-lg text-xs md:text-sm",children:o.summary})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Description"}),r.jsx("p",{className:"text-gray-700 mt-1 md:mt-2 p-[9.6px] md:p-[12.8px] bg-gray-50 rounded-lg whitespace-pre-wrap text-xs md:text-sm",children:o.description||"No description available"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Finding Description"}),r.jsx("p",{className:"text-gray-700 mt-1 md:mt-2 p-[9.6px] md:p-[12.8px] bg-purple-50 rounded-lg whitespace-pre-wrap border border-purple-200 text-xs md:text-sm",children:o.parentDescription||"No description available"})]}),r.jsx("div",{className:"hidden md:flex justify-end items-center pt-3 md:pt-4 border-t",children:r.jsx(Be,{variant:"outline",onClick:()=>f(!1),children:"Close"})})]})]})})]})},S8=({onGenerateReport:t,isExporting:e=!1})=>{const{user:n}=Dr(),[s,i]=L.useState(!1),[a,o]=L.useState([{id:"1",type:"system",content:'Hello! You can write your request in natural language to create a report. Example: "Export all actions with Open status"',timestamp:new Date}]),[c,u]=L.useState(""),[f,h]=L.useState(!1),p=L.useRef(null),m=L.useRef(null),g=()=>{var N,k,j;if(!(n!=null&&n.name))return"U";const w=n.name.trim().split(/\s+/).filter(Boolean);if(w.length>=2){const S=(N=w[0])==null?void 0:N[0],C=(k=w[w.length-1])==null?void 0:k[0];if(S&&C)return(S+C).toUpperCase()}return(j=w[0])!=null&&j[0]?w[0][0].toUpperCase():"U"},y=()=>{var w;(w=p.current)==null||w.scrollIntoView({behavior:"smooth"})};L.useEffect(()=>{y()},[a]),L.useEffect(()=>{s&&m.current&&m.current.focus()},[s]);const b=async()=>{if(!c.trim()||f||e)return;const w={id:Date.now().toString(),type:"user",content:c.trim(),timestamp:new Date};o(N=>[...N,w]),u(""),h(!0);try{const N=await t(w.content);if(N.success){const k={id:(Date.now()+1).toString(),type:"assistant",content:N.message||"Generating report...",timestamp:new Date,filters:N.filters};o(j=>[...j,k])}else{const k={id:(Date.now()+1).toString(),type:"error",content:N.error||"Your request could not be understood. Please try again with more details.",timestamp:new Date};o(j=>[...j,k])}}catch{const k={id:(Date.now()+1).toString(),type:"error",content:"An error occurred. Please try again.",timestamp:new Date};o(j=>[...j,k])}finally{h(!1)}},v=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),b())};return r.jsxs(r.Fragment,{children:[r.jsx("style",{children:`
        @keyframes robot-blink {
          0%, 90%, 100% { opacity: 1; }
          95% { opacity: 0.1; }
        }
        @keyframes robot-wiggle {
          0%, 100% { transform: rotate(0deg); }
          25% { transform: rotate(-5deg); }
          75% { transform: rotate(5deg); }
        }
        @keyframes robot-bounce {
         0%, 100% { transform: translateY(0); }
         50% { transform: translateY(-8px); }
        }
        @keyframes robot-bounce-slow {
         0%, 100% { transform: translateY(0); }
         50% { transform: translateY(-3px); }
        }
        .robot-eye-blink {
          animation: robot-blink 3s infinite;
        }
        .robot-antenna-wiggle {
          animation: robot-wiggle 2s ease-in-out infinite;
          transform-origin: bottom center;
        }
        .robot-bounce {
          animation: robot-bounce 1.5s ease-in-out infinite;
        }
        .robot-bounce-slow {
          animation: robot-bounce-slow 2s ease-in-out infinite;
        }
      `}),!s&&r.jsx("button",{onClick:()=>i(!0),className:"fixed bottom-6 right-6 z-50 group","aria-label":"Open report chatbot",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-ping opacity-20"}),r.jsx("div",{className:"relative bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full p-4 shadow-xl transform transition-all duration-300 hover:scale-110 hover:shadow-2xl hover:shadow-purple-500/50 robot-bounce",children:r.jsxs("div",{className:"relative w-6 h-6",children:[r.jsx("div",{className:"absolute inset-0 bg-white rounded"}),r.jsxs("div",{className:"absolute top-1 left-1.5 flex gap-0.5",children:[r.jsx("div",{className:"w-1 h-1 bg-purple-600 rounded-full robot-eye-blink"}),r.jsx("div",{className:"w-1 h-1 bg-purple-600 rounded-full robot-eye-blink",style:{animationDelay:"0.15s"}})]}),r.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-2 h-0.5 bg-purple-600 rounded-full"}),r.jsx("div",{className:"absolute -top-0.5 left-1/2 -translate-x-1/2 w-0.5 h-1 bg-white rounded-t-full robot-antenna-wiggle"})]})})]})}),s&&r.jsxs("div",{className:"fixed bottom-6 right-6 z-50 w-[400px] h-[520px] bg-white rounded-2xl shadow-2xl flex flex-col border border-gray-100 overflow-hidden backdrop-blur-xl",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2.5",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/20 backdrop-blur-sm flex items-center justify-center robot-bounce-slow",children:r.jsxs("div",{className:"relative w-5 h-5",children:[r.jsx("div",{className:"absolute inset-0 bg-white rounded"}),r.jsxs("div",{className:"absolute top-0.5 left-1 flex gap-0.5",children:[r.jsx("div",{className:"w-1 h-1 bg-purple-600 rounded-full robot-eye-blink"}),r.jsx("div",{className:"w-1 h-1 bg-purple-600 rounded-full robot-eye-blink",style:{animationDelay:"0.1s"}})]}),r.jsx("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1.5 h-0.5 bg-purple-600 rounded-full"}),r.jsx("div",{className:"absolute -top-0.5 left-1/2 -translate-x-1/2 w-0.5 h-1 bg-white rounded-t-full robot-antenna-wiggle"})]})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-base",children:"AuditBot"}),r.jsx("p",{className:"text-xs text-white/80",children:"AI assistant"})]})]}),r.jsx("button",{onClick:()=>i(!1),className:"text-white/80 hover:text-white hover:bg-white/20 rounded-lg p-1.5 transition-all","aria-label":"Close chatbot",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2.5 bg-gray-50/50",children:[a.map(w=>r.jsxs("div",{className:F("flex gap-2",w.type==="user"?"justify-end":"justify-start"),children:[w.type!=="user"&&r.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mt-0.5 hover:scale-110 transition-transform duration-200 robot-bounce-slow",children:r.jsxs("div",{className:"relative w-4 h-4",children:[r.jsx("div",{className:"absolute inset-0 bg-white/90 rounded"}),r.jsxs("div",{className:"absolute top-0.5 left-0.5 flex gap-0.5",children:[r.jsx("div",{className:"w-0.5 h-0.5 bg-purple-600 rounded-full robot-eye-blink"}),r.jsx("div",{className:"w-0.5 h-0.5 bg-purple-600 rounded-full robot-eye-blink",style:{animationDelay:"0.15s"}})]}),r.jsx("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-0.5 bg-purple-600 rounded-full"}),r.jsx("div",{className:"absolute -top-0.5 left-1/2 -translate-x-1/2 w-0.5 h-0.5 bg-white rounded-t-full robot-antenna-wiggle"})]})}),r.jsxs("div",{className:F("max-w-[75%] rounded-xl px-3 py-2 text-sm",w.type==="user"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-br-sm":w.type==="error"?"bg-red-50 text-red-800 border border-red-200 rounded-bl-sm":w.type==="system"?"bg-blue-50 text-blue-800 border border-blue-200 rounded-bl-sm":w.content.includes("Found **")||w.content.includes("** action")?"bg-gradient-to-br from-purple-50 to-pink-50 text-gray-800 border-2 border-purple-200 rounded-bl-sm shadow-md":"bg-white text-gray-800 border border-gray-200 rounded-bl-sm shadow-sm"),children:[w.content.includes("**")&&(w.content.includes("I found")||w.content.includes("There")||w.content.includes("Found")||w.content.includes("counted"))?r.jsx("div",{className:"leading-relaxed",children:r.jsx("p",{className:"leading-relaxed",dangerouslySetInnerHTML:{__html:w.content.replace(/\*\*(.*?)\*\*/g,'<span class="text-2xl font-bold text-purple-600 inline-block mx-1">$1</span>')}})}):r.jsx("p",{className:"leading-relaxed whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:w.content.replace(/\*\*(.*?)\*\*/g,'<strong class="font-bold text-purple-700">$1</strong>')}}),r.jsx("p",{className:"text-xs opacity-50 mt-1.5",children:w.timestamp.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),w.type==="user"&&r.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-lg bg-gradient-to-br from-gray-500 to-gray-600 flex items-center justify-center mt-0.5 shadow-sm hover:scale-110 transition-transform duration-200",children:r.jsx("span",{className:"text-xs font-bold text-white",children:g()})})]},w.id)),(f||e)&&r.jsxs("div",{className:"flex justify-start gap-2",children:[r.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center animate-bounce",style:{animationDuration:"1s"},children:r.jsxs("div",{className:"relative w-4 h-4",children:[r.jsx("div",{className:"absolute inset-0 bg-white/90 rounded"}),r.jsxs("div",{className:"absolute top-0.5 left-0.5 flex gap-0.5",children:[r.jsx("div",{className:"w-0.5 h-0.5 bg-purple-600 rounded-full animate-pulse",style:{animationDuration:"0.5s"}}),r.jsx("div",{className:"w-0.5 h-0.5 bg-purple-600 rounded-full animate-pulse",style:{animationDuration:"0.5s",animationDelay:"0.15s"}})]}),r.jsx("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-0.5 bg-purple-600 rounded-full"}),r.jsx("div",{className:"absolute -top-0.5 left-1/2 -translate-x-1/2 w-0.5 h-0.5 bg-white rounded-t-full robot-antenna-wiggle",style:{animationDuration:"0.8s"}})]})}),r.jsx("div",{className:"bg-white border border-gray-200 rounded-xl rounded-bl-sm px-3 py-2 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex gap-0.5",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("div",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),r.jsx("span",{className:"text-xs font-medium text-gray-600",children:e?"Generating...":"Thinking..."})]})})]}),r.jsx("div",{ref:p})]}),r.jsx("div",{className:"border-t border-gray-200 bg-white p-3",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{ref:m,type:"text",value:c,onChange:w=>u(w.target.value),onKeyPress:v,placeholder:"Ask AuditBot...",disabled:f||e,className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed"}),r.jsx("button",{onClick:b,disabled:!c.trim()||f||e,className:F("rounded-lg p-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed",c.trim()&&!f&&!e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 active:scale-95 shadow-md":"bg-gray-200 text-gray-400"),children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]})},C8={ak:"Open",open:"Open",gecikmi:"Overdue",overdue:"Overdue",tamamlanm:"Completed",completed:"Completed",tamamland:"Completed","risk kabul":"Risk Accepted","risk accepted":"Risk Accepted","risk kabul edildi":"Risk Accepted"},A8={kritik:"Critical",critical:"Critical",yksek:"High",high:"High",orta:"Medium",medium:"Medium",dk:"Low",low:"Low",atanmam:"Unassigned",unassigned:"Unassigned"},rs=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),E8=t=>{const e=rs(t);for(const[n,s]of Object.entries(C8))if(e.includes(n))return s},L8=t=>{const e=rs(t);for(const[n,s]of Object.entries(A8))if(e.includes(n))return s},O8=t=>{const e=[/(?:audit|denetim)\s+(?:name|isim|ad)?\s*[:=]?\s*["']?([^"'\n]+)["']?/i,/["']([^"'\n]+)["']\s+(?:audit|denetim)/i,/(?:audit|denetim)\s+["']([^"'\n]+)["']/i];for(const n of e){const s=t.match(n);if(s&&s[1])return s[1].trim()}},M8=t=>{const e=[/(?:audit\s+)?lead\s+(?:is|name|ad)?\s*[:=]?\s*["']?([^"'\n]+)["']?/i,/["']([^"'\n]+)["']\s+(?:audit\s+)?lead/i,/(?:denetim\s+)?lider\s+(?:is|name|ad)?\s*[:=]?\s*["']?([^"'\n]+)["']?/i];for(const n of e){const s=t.match(n);if(s&&s[1])return s[1].trim()}},P8=t=>{const e=[/(?:action\s+)?responsible\s+(?:is|email|isim)?\s*[:=]?\s*["']?([^"'\n]+)["']?/i,/["']([^"'\n]+)["']\s+(?:action\s+)?responsible/i,/(?:sorumlu|responsible)\s+(?:is|email|isim)?\s*[:=]?\s*["']?([^"'\n]+)["']?/i,/\b([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})\b/,/["']?([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*)["']?(?:\s+(?:nun|nin|nn|nn|'s|'nin))?/i];for(const n of e){const s=t.match(n);if(s&&s[1]){const i=s[1].trim(),a=i.toLowerCase();if(/\b(?:from|in|for|since|during|iin|iinde|ylnda|yl)\s+\d{4}\b/i.test(i)||/^\d{4}$/.test(i)||["action","actions","actionlar","actionlarn","there","here"].includes(a)||a.includes("how many")||a.includes("how many")||a.includes("in there")||a.includes("from"))continue;return i}}},R8=t=>{const e=[/(?:c[-_]?level|clevel)\s+(?:is|email|isim)?\s*[:=]?\s*["']?([^"'\n]+)["']?/i,/["']([^"'\n]+)["']\s+(?:c[-_]?level|clevel)/i,/(?:c[-_]?level|clevel).*?([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/i];for(const n of e){const s=t.match(n);if(s&&s[1])return s[1].trim()}},T8=t=>{const e=rs(t),n=/\b(?:from|in|for|since|during|iin|iinde|ylnda|yl)\s+(\d{4})\b/i,s=t.match(n);if(s&&s[1])return s[1];const i=/\b(\d{4})\s+(?:from|in|for|since|during|iin|iinde|ylnda|yl)\b/i,a=t.match(i);if(a&&a[1])return a[1];const o=/(?:just|only|sadece)\s+(?:year|yl|yl)?\s*(\d{4})/i,c=t.match(o);if(c&&c[1])return c[1];const u=/(?:year|yl|yl|audit\s+year)\s+(?:is\s+)?(?:all|tm|hepsi|tm)/i;if(t.match(u)||(e.includes("all")||e.includes("tm")||e.includes("hepsi")||e.includes("tm"))&&!e.includes("all actions")&&!e.includes("all results")&&!e.includes("all finding")&&!e.includes("export all")&&!e.includes("show all")&&/(?:year|yl|yl|audit).*?(?:all|tm|hepsi|tm)|(?:all|tm|hepsi|tm).*?(?:year|yl|yl|audit)/i.test(t))return"all";const h=/(?:just|only|sadece)\s+(\d{4})/i,p=t.match(h);if(p&&p[1])return p[1];const m=/(?:year|yl|yl|audit\s+year)\s*(?:is\s+)?(?:just|only|sadece)?\s*(?:=|\:)?\s*(\d{4})/i,g=t.match(m);if(g&&g[1]){const v=t.substring(0,g.index||0);return/(?:just|only|sadece)/i.test(v)?g[1]:parseInt(g[1])>=2024?"2024+":g[1]}if(e.includes("2024+")||e.includes("2024 ve sonras"))return"2024+";const y=/\b(20\d{2})\b/,b=t.match(y);if(b&&b[1]){const v=b[1];if(/(?:year|yl|yl|audit|just|only|sadece|from|in|for|since|during|iin|iinde|ylnda|yl).*?(?:20\d{2})|(?:20\d{2}).*?(?:year|yl|yl|audit|just|only|sadece|from|in|for|since|during|iin|iinde|ylnda|yl)/i.test(t))return/(?:just|only|sadece)/i.test(t)?v:parseInt(v)>=2024?"2024+":v}},D8=t=>[/\b(them|those|it|same|also|too|as well|bunlar|onlar|ayn|da|de)\b/i,/export\s+(them|those|it)/i,/(show|list|get|fetch)\s+(them|those|it)/i].some(n=>n.test(t)),I8=t=>{const e=rs(t);return[/^export\s*(pls|please|ltfen)?\s*$/i,/^export\s*(them|those|it|all)?\s*(pls|please|ltfen)?\s*$/i,/^(pls|please|ltfen)\s+export\s*$/i,/^export$/i].some(s=>s.test(e.trim()))},F8=t=>{const e=[/^(hi|hello|hey|merhaba|selam|gnaydn|iyi gnler|good morning|good afternoon|good evening)$/i,/^(hi|hello|hey|merhaba|selam)\s+(there|auditbot|bot)/i,/how\s+are\s+you/i,/how\s+do\s+you\s+do/i,/naslsn|naslsnz/i],n=[/^(thanks|thank you|teekkr|teekkrler|teekkr ederim|sa ol|saol)$/i,/^(thanks|thank you|teekkr|teekkrler|teekkr ederim)\s+(a lot|so much|very much|ok)/i,/^ty$/i,/^thx$/i],s=[/^(bye|goodbye|see you|grrz|hoa kal|iyi gnler)$/i,/^(bye|goodbye|see you|grrz)\s+(then|later|soon)/i],i=[/^(good|great|nice|awesome|cool|harika|sper|mkemmel)\s+(job|work|bot|assistant)/i,/you\s+(are|'re)\s+(great|awesome|cool|amazing|wonderful|harika|sper)/i];if(e.some(a=>a.test(t))){const a=["Hello!  How can I help you with your audit reports today?","Hi there!  Ready to generate some reports?","Hey! I'm doing great, thanks for asking! What can I do for you?","Good morning!  How can I assist you today?","Hello! I'm here and ready to help! "];return{isCasual:!0,response:a[Math.floor(Math.random()*a.length)]}}if(n.some(a=>a.test(t))){const a=["You're welcome!  Happy to help!","Anytime! Let me know if you need anything else! ","My pleasure! Feel free to ask for more reports! ","Glad I could help! ","You're very welcome! "];return{isCasual:!0,response:a[Math.floor(Math.random()*a.length)]}}if(s.some(a=>a.test(t))){const a=["See you later!  Have a great day!","Goodbye! Take care! ","Bye! Come back anytime you need reports! ","See you soon! "];return{isCasual:!0,response:a[Math.floor(Math.random()*a.length)]}}if(i.some(a=>a.test(t))){const a=["Aww, thanks!  I'm here to help anytime!","You're too kind!  Let me know if you need anything else!","Thank you! That means a lot! ","Much appreciated!  Happy to be of service!"];return{isCasual:!0,response:a[Math.floor(Math.random()*a.length)]}}return{isCasual:!1}},z8=(t,e,n)=>{if(!t||!t.trim())return{success:!1,filters:{},error:`Could not extract filters from your request. Please use these examples:
 "Export all actions with Open status"
 "Show actions with Critical risk and Overdue status"
 "Completed actions for year 2024"`};const s=F8(t);if(s.isCasual&&s.response)return{success:!0,filters:{},message:s.response,isCountRequest:!1};const i={},a=D8(t),o=I8(t);(a||o)&&n&&Object.keys(n).length>0&&Object.assign(i,n);const u=[/(?:ka|how\s+many|count|say|number|ka\s+tane|how\s+many\s+actions?)/i,/(?:gster|show|list).*?(?:ka|how\s+many|count)/i].some(w=>w.test(t)),f=E8(t);f&&(e!=null&&e.statuses&&e.statuses.includes(f)?i.status=f:e!=null&&e.statuses||(i.status=f));const h=L8(t);h&&(e!=null&&e.riskLevels&&e.riskLevels.includes(h)?i.riskLevel=h:e!=null&&e.riskLevels||(i.riskLevel=h));const p=O8(t);if(p)if(e!=null&&e.auditNames){const w=e.auditNames.find(N=>rs(N)===rs(p));w&&(i.auditName=w)}else i.auditName=p;const m=M8(t);if(m)if(e!=null&&e.auditLeads){const w=e.auditLeads.find(N=>rs(N)===rs(m));w&&(i.auditLead=w)}else i.auditLead=m;const g=P8(t);if(g)if(g.includes("@"))e!=null&&e.responsibleEmails&&e.responsibleEmails.includes(g)?i.responsibleEmail=g:e!=null&&e.responsibleEmails||(i.responsibleEmail=g);else if(e!=null&&e.responsibleEmails){const w=e.responsibleEmails.find(N=>{const k=N.split("@")[0];return k?rs(N).includes(rs(g))||rs(g).includes(rs(k)):!1});w&&(i.responsibleEmail=w)}else i.responsibleEmail=g;const y=R8(t);if(y)if(e!=null&&e.cLevels){const w=e.cLevels.find(N=>rs(N)===rs(y)||y.includes("@")&&N===y);w&&(i.cLevel=w)}else i.cLevel=y;const b=T8(t);return b&&(i.auditYear=b),Object.keys(i).length>0?{success:!0,filters:i,message:void 0,isCountRequest:u}:{success:!1,filters:{},error:`Could not extract filters from your request. Please use these examples:
 "Export all actions with Open status"
 "How many actions with Critical risk?"
 "Completed actions for year 2024"`}},B8=()=>{const[t,e]=L.useState("2024+"),[n,s]=L.useState(1),[i,a]=L.useState(25),[o,c]=L.useState(null),[u,f]=L.useState(!1),[h,p]=L.useState(null),[m,g]=L.useState("asc"),[y,b]=L.useState([]),[v,w]=L.useState(!1),[N,k]=L.useState(!1),[j,S]=L.useState(null),{isExporting:C,exportFindingActions:O}=Hd(),M=L.useRef(null),[B,I]=L.useState(()=>{const oe=localStorage.getItem("all-actions-column-order");return oe?JSON.parse(oe):["key","summary","description","status","audit","dueDate","riskLevel","responsible","clevel","actions"]}),[R,P]=L.useState(null),[q,H]=L.useState(null),G=[{value:"status",label:"Status"},{value:"auditName",label:"Audit Name"},{value:"auditLead",label:"Audit Lead"},{value:"riskLevel",label:"Risk Level"},{value:"responsibleEmail",label:"Action Responsible"},{value:"cLevel",label:"C-Level"}],{data:ne=[],isLoading:X}=PE({auditYear:t});L.useEffect(()=>{const oe=ge=>{ge.key==="Escape"&&u&&f(!1)};if(u)return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[u]);const ee=L.useMemo(()=>{if(!N)return[];let oe=[...ne];return y.forEach(ge=>{oe=oe.filter(Ne=>{const Ae=Ne[ge.field];return ge.value==="all"?!0:ge.field==="status"?(Ne.status==="COMPLETED"?"Completed":Ne.status==="RISK ACCEPTED"?"Risk Accepted":Ne.status)===ge.value:Ae===ge.value})}),oe},[ne,y,N]),Y=oe=>{const ge=G.find(Ae=>Ae.value===oe);if(!ge)return;const Ne={id:`${oe}-${Date.now()}`,field:oe,value:"all",label:ge.label};b([...y,Ne]),w(!1),k(!0)},U=oe=>{const ge=y.filter(Ne=>Ne.id!==oe);b(ge),ge.length===0&&k(!1)},T=(oe,ge)=>{b(y.map(Ne=>Ne.id===oe?{...Ne,value:ge}:Ne)),k(!0)},W=()=>{b([]),k(!1),p(null),g("asc")},z=oe=>{P(oe)},Q=(oe,ge)=>{oe.preventDefault(),H(ge)},Z=oe=>{if(!R||R===oe){P(null),H(null);return}const ge=[...B],Ne=ge.indexOf(R),Ae=ge.indexOf(oe);ge.splice(Ne,1),ge.splice(Ae,0,R),I(ge),localStorage.setItem("all-actions-column-order",JSON.stringify(ge)),P(null),H(null)},V=()=>{P(null),H(null)},ie={key:120,summary:250,description:280,status:120,audit:200,dueDate:120,riskLevel:100,responsible:180,clevel:180,actions:120},{columnWidths:de,resizing:fe,handleMouseDown:ve}=Go(M,ie,"all-actions-columns"),He=L.useMemo(()=>{if(!ee||!Array.isArray(ee))return{total:0,open:0,overdue:0,completed:0,financialImpact:0,completionRate:"0.0",overdueRate:"0.0",moneyOpen:0,moneyOverdue:0};const oe=ee.filter(te=>te.status==="Open"),ge=ee.filter(te=>te.status==="Overdue"),Ne=new Set(oe.map(te=>te.parentKey).filter(Boolean)),Ae=new Set(ge.map(te=>te.parentKey).filter(Boolean)),ke=Array.from(Ne).reduce((te,J)=>{const ue=oe.find(Ce=>Ce.parentKey===J);return te+((ue==null?void 0:ue.monetaryImpact)||0)},0),re=Array.from(Ae).reduce((te,J)=>{const ue=ge.find(Ce=>Ce.parentKey===J);return te+((ue==null?void 0:ue.monetaryImpact)||0)},0);return{total:ee.length,open:oe.length,overdue:ge.length,completed:ee.filter(te=>te.status==="COMPLETED"||te.status==="Completed").length,financialImpact:ke+re,moneyOpen:ke,moneyOverdue:re,completionRate:ee.length>0?(ee.filter(te=>te.status==="COMPLETED"||te.status==="Completed").length/ee.length*100).toFixed(1):"0.0",overdueRate:ee.length>0?(ee.filter(te=>te.status==="Overdue").length/ee.length*100).toFixed(1):"0.0"}},[ee]),$e=oe=>{if(!ne||ne.length===0)return[];const ge=[...new Set(ne.map(Ne=>Ne[oe]))].filter(Boolean);return oe==="status"?ge.map(Ne=>Ne==="COMPLETED"?"Completed":Ne==="RISK ACCEPTED"?"Risk Accepted":Ne).sort():ge.sort()},_e=L.useMemo(()=>{if(!ee||!Array.isArray(ee))return[];let oe=[...ee];return h&&oe.sort((ge,Ne)=>{const Ae=ge[h],ke=Ne[h],re=Ae<ke?-1:Ae>ke?1:0;return m==="asc"?re:-re}),oe},[ee,h,m]),it=L.useMemo(()=>{const oe=(n-1)*i,ge=oe+i;return _e.slice(oe,ge)},[_e,n,i]),rt=oe=>{h===oe?g(m==="asc"?"desc":"asc"):(p(oe),g("asc"))},at=oe=>oe==="COMPLETED"||oe==="Completed"?"success":oe==="Overdue"?"danger":oe==="Open"?"warning":oe==="RISK ACCEPTED"||oe==="Risk Accepted"?"info":"default",Oe=async oe=>{const ge={statuses:$e("status"),auditNames:$e("auditName"),auditLeads:$e("auditLead"),riskLevels:$e("riskLevel"),responsibleEmails:$e("responsibleEmail"),cLevels:$e("cLevel")},Ne=z8(oe,ge,j||void 0);if(!Ne.success)return{success:!1,error:Ne.error};if(Ne.message&&Object.keys(Ne.filters).length===0)return{success:!0,filters:{},message:Ne.message};Ne.success&&Object.keys(Ne.filters).length>0&&S(Ne.filters);let Ae=[...ne];if(Ne.filters.status&&(Ae=Ae.filter(ue=>(ue.status==="COMPLETED"?"Completed":ue.status==="RISK ACCEPTED"?"Risk Accepted":ue.status)===Ne.filters.status)),Ne.filters.auditName&&(Ae=Ae.filter(ue=>ue.auditName===Ne.filters.auditName)),Ne.filters.auditLead&&(Ae=Ae.filter(ue=>ue.auditLead===Ne.filters.auditLead)),Ne.filters.riskLevel&&(Ae=Ae.filter(ue=>ue.riskLevel===Ne.filters.riskLevel)),Ne.filters.responsibleEmail&&(Ae=Ae.filter(ue=>ue.responsibleEmail===Ne.filters.responsibleEmail)),Ne.filters.cLevel&&(Ae=Ae.filter(ue=>ue.cLevel===Ne.filters.cLevel)),Ne.filters.auditYear){const ue=Ne.filters.auditYear;ue==="2024+"?Ae=Ae.filter(Ce=>{if(!Ce.auditYear)return!1;const ze=String(Ce.auditYear);return ze.includes("2024")||ze.includes("2025")||ze.includes("2026")||parseInt(ze)>=2024}):ue==="all"||(Ae=Ae.filter(Ce=>{if(!Ce.auditYear)return!1;const ze=String(Ce.auditYear),Fe=ze.match(/\b(\d{4})\b/);return Fe?Fe[1]===ue:ze.includes(ue)}))}if(h&&Ae.sort((ue,Ce)=>{const ze=ue[h],Fe=Ce[h],Ue=ze<Fe?-1:ze>Fe?1:0;return m==="asc"?Ue:-Ue}),Ne.isCountRequest){Ne.filters.auditYear;const ue=Ae.length,Ce=[`I found **${ue}** action${ue!==1?"s":""} matching your request! `,`There ${ue===1?"is":"are"} **${ue}** action${ue!==1?"s":""} in total. `,`Great! I counted **${ue}** action${ue!==1?"s":""} for you. `,`Found **${ue}** action${ue!==1?"s":""}! ${ue===0?"No matches this time.":ue<10?"That's a small batch!":ue<50?"Nice collection!":"That's quite a lot!"} `],ze=Ce[Math.floor(Math.random()*Ce.length)];return{success:!0,filters:Ne.filters,message:ze}}const ke=Ae.map(ue=>ue.key).filter(Boolean),re=Ne.filters.auditYear;if(re&&re!=="2024+"&&re!=="all"&&re!==t&&!Ne.isCountRequest){const ue={auditYear:re,role:"all"};Ne.filters.status&&(ue.statusFilter=Ne.filters.status),Ne.filters.auditName&&(ue.auditFilter=Ne.filters.auditName),Ne.filters.riskLevel&&(ue.riskLevelFilter=Ne.filters.riskLevel),Ne.filters.responsibleEmail&&(ue.responsibleFilter=Ne.filters.responsibleEmail);try{await O(ue);const Ce=["Perfect! Your report is ready and downloading now... ","All set! I've prepared your report and it's downloading... ","Done! Your report is ready. Check your downloads! ","Great! I've generated your report and it's on its way... ","Excellent! Your report is ready and downloading... "],ze=Ce[Math.floor(Math.random()*Ce.length)];return{success:!0,filters:Ne.filters,message:ze}}catch{return{success:!1,error:"Oops! Something went wrong while generating your report. Please try again."}}}if(ke.length===0)return{success:!1,error:"Hmm, I couldn't find any actions matching your request. Try different filters! "};try{await O({auditYear:Ne.filters.auditYear||t,role:"all",actionKeys:ke.join(",")});const ue=[`Perfect! I've prepared your report with ${ke.length} action${ke.length!==1?"s":""} and it's downloading now... `,`All set! Your report with ${ke.length} action${ke.length!==1?"s":""} is ready. Check your downloads! `,`Done! I've generated your report (${ke.length} action${ke.length!==1?"s":""}) and it's on its way... `,`Great! Your report is ready with ${ke.length} action${ke.length!==1?"s":""}. Downloading now... `,`Excellent! I've prepared your report (${ke.length} action${ke.length!==1?"s":""}) and it's downloading... `],Ce=ue[Math.floor(Math.random()*ue.length)];return{success:!0,filters:Ne.filters,message:Ce}}catch{return{success:!1,error:"Oops! Something went wrong while generating your report. Please try again."}}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-[24px] font-bold text-gray-900",children:"All Findings & Actions"}),r.jsx("p",{className:"text-[11.2px] text-gray-600 mt-1",children:"Complete overview of all audit finding actions"})]}),r.jsx("div",{className:"flex items-center gap-[12.8px]",children:r.jsxs("div",{className:"inline-flex rounded-lg border border-gray-300 bg-white p-1 shadow-sm",children:[r.jsxs("button",{onClick:()=>e("2024+"),className:`flex items-center gap-[6.4px] px-[12.8px] py-[6.4px] text-xs font-medium rounded-md transition-all ${t==="2024+"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("svg",{className:"w-[16px] h-[16px]",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",fill:t==="2024+"?"white":"#E5E7EB"}),r.jsx("rect",{x:"3",y:"4",width:"18",height:"6",rx:"2",fill:t==="2024+"?"#DC2626":"#991B1B"}),r.jsx("text",{x:"12",y:"8",textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"bold",children:"JUL"}),r.jsx("text",{x:"12",y:"16",textAnchor:"middle",fill:t==="2024+"?"#6B7280":"#1F2937",fontSize:"8",fontWeight:"bold",children:"17"})]}),"As of 2024"]}),r.jsxs("button",{onClick:()=>e("all"),className:`flex items-center gap-[6.4px] px-[12.8px] py-[6.4px] text-xs font-medium rounded-md transition-all ${t==="all"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[r.jsxs("svg",{className:"w-[16px] h-[16px]",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("rect",{x:"4",y:"14",width:"3",height:"6",fill:"#10B981",rx:"0.5"}),r.jsx("rect",{x:"10",y:"8",width:"3",height:"12",fill:"#EF4444",rx:"0.5"}),r.jsx("rect",{x:"16",y:"11",width:"3",height:"9",fill:"#3B82F6",rx:"0.5"}),r.jsx("line",{x1:"3",y1:"7",x2:"21",y2:"7",stroke:t==="all"?"white":"#9CA3AF",strokeWidth:"1.5"})]}),"All Results"]})]})})]}),!N&&r.jsx(Ie,{children:r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Select Filters"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Choose fields to filter and analyze finding actions"})]}),r.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-6",children:G.map(oe=>{const ge=y.some(Ne=>Ne.field===oe.value);return r.jsxs("button",{onClick:()=>{ge?U(y.find(Ne=>Ne.field===oe.value).id):Y(oe.value)},className:F("px-[12.8px] py-[6.4px] rounded-lg text-xs font-medium transition-all",ge?"bg-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-purple-50 hover:text-purple-700"),children:[ge?"":"+"," ",oe.label]},oe.value)})}),y.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-2 mb-6",children:y.map(oe=>r.jsxs("div",{className:"flex items-center gap-2 bg-purple-50 rounded-lg p-3",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-700 w-32",children:[oe.label,":"]}),r.jsxs("select",{value:oe.value,onChange:ge=>T(oe.id,ge.target.value),className:"flex-1 text-xs border border-gray-300 rounded-lg px-[9.6px] py-[4.8px] focus:ring-2 focus:ring-purple-500 focus:outline-none",children:[r.jsx("option",{value:"all",children:"All"}),$e(oe.field).map(ge=>r.jsx("option",{value:ge,children:ge},ge))]}),r.jsx("button",{onClick:()=>U(oe.id),className:"text-gray-400 hover:text-red-600 p-1",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},oe.id))}),r.jsx("div",{className:"flex justify-center",children:r.jsx(Be,{variant:"ghost",onClick:W,children:"Clear All"})})]})]})}),N&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-8 gap-[12.8px]",children:[r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:He.total}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Total"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:He.open}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Open"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:He.overdue}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Overdue"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:He.completed}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Completed"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[He.completionRate,"%"]}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Completion Rate"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[He.overdueRate,"%"]}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Overdue Rate"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:mr(He.moneyOpen)}),r.jsx("p",{className:"text-xs text-gray-700 font-semibold mt-1",children:"Financial Impact"}),r.jsx("p",{className:"text-xs text-gray-500",children:"(Open Status)"})]})}),r.jsx(Ie,{variant:"elevated",padding:"sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:mr(He.moneyOverdue)}),r.jsx("p",{className:"text-xs text-gray-700 font-semibold mt-1",children:"Financial Impact"}),r.jsx("p",{className:"text-xs text-gray-500",children:"(Overdue Status)"})]})})]}),N&&r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"All Finding Actions",subtitle:`${(_e==null?void 0:_e.length)||0} actions found (filtered from ${(ee==null?void 0:ee.length)||0} total)`,action:r.jsxs(Be,{variant:"primary",size:"sm",onClick:async()=>{const ge=(_e&&_e.length>0?_e:ee&&ee.length>0?ee:ne).map(Ne=>Ne.key).filter(Boolean);ge.length!==0&&await O({auditYear:t,role:"all",actionKeys:ge.join(",")})},isLoading:C,children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export to Excel"]})}),X?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"xl",text:"Loading all finding actions..."})}):!ee||!Array.isArray(ee)?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"mt-2 text-xs font-medium text-gray-900",children:"No actions found"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"No finding actions available for the selected filters."})]}):r.jsxs("div",{className:"overflow-x-auto mt-4",children:[r.jsxs("div",{className:"mb-6 space-y-4",children:[y.length>0&&r.jsx("div",{className:"flex flex-wrap items-center gap-2",children:y.map(oe=>r.jsxs("div",{className:"inline-flex items-center gap-[6.4px] bg-purple-50 border border-purple-200 rounded-lg px-[9.6px] py-[6.4px]",children:[r.jsxs("span",{className:"text-xs font-medium text-purple-700",children:[oe.label,":"]}),r.jsxs("select",{value:oe.value,onChange:ge=>T(oe.id,ge.target.value),className:"text-[9.6px] bg-white border border-purple-300 rounded px-[6.4px] py-[3.2px] focus:ring-2 focus:ring-purple-500 focus:outline-none",children:[r.jsx("option",{value:"all",children:"All"}),$e(oe.field).map(ge=>r.jsx("option",{value:ge,children:ge},ge))]}),r.jsx("button",{onClick:()=>U(oe.id),className:"text-purple-600 hover:text-purple-800 hover:bg-purple-100 rounded p-0.5",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},oe.id))}),r.jsx("div",{className:"flex flex-wrap items-center gap-3 justify-between",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsxs(Be,{variant:"outline",size:"sm",onClick:()=>w(!v),className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Filter"]}),v&&r.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl z-50 min-w-[200px]",children:r.jsxs("div",{className:"p-2 space-y-1",children:[G.filter(oe=>!y.some(ge=>ge.field===oe.value)).map(oe=>r.jsx("button",{onClick:()=>Y(oe.value),className:"w-full text-left px-[9.6px] py-[6.4px] text-xs text-gray-700 hover:bg-purple-50 hover:text-purple-700 rounded transition-colors",children:oe.label},oe.value)),G.filter(oe=>!y.some(ge=>ge.field===oe.value)).length===0&&r.jsx("div",{className:"px-[9.6px] py-[6.4px] text-xs text-gray-500",children:"All filters added"})]})})]}),y.length>0&&r.jsxs(Be,{variant:"outline",size:"sm",onClick:W,className:"border-red-300 text-red-700 hover:bg-red-50",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Reset All"]})]})})]}),r.jsxs("table",{ref:M,className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b border-gray-200",children:B.map(oe=>{const ge={key:{label:"Key",sortable:!0,sortKey:"key"},summary:{label:"Summary",sortable:!1},description:{label:"Description",sortable:!1},status:{label:"Status",sortable:!0,sortKey:"status"},audit:{label:"Audit",sortable:!0,sortKey:"auditName"},dueDate:{label:"Due Date",sortable:!0,sortKey:"dueDate"},riskLevel:{label:"Risk Level",sortable:!0,sortKey:"riskLevel"},responsible:{label:"Responsible",sortable:!1},clevel:{label:"C-Level",sortable:!1},actions:{label:"Action Detail",sortable:!1}}[oe];return r.jsx(ss,{columnKey:oe,width:de[oe],onResizeStart:ve,isResizing:fe===oe,className:F("text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",(ge==null?void 0:ge.sortable)&&"cursor-pointer hover:bg-purple-50 transition-colors select-none",oe==="actions"&&"text-center"),onClick:ge!=null&&ge.sortable&&(ge!=null&&ge.sortKey)?()=>rt(ge.sortKey):void 0,onDragStart:z,onDragOver:Q,onDrop:Z,onDragEnd:V,isDragging:R===oe,isDragOver:q===oe,children:ge!=null&&ge.sortable&&(ge!=null&&ge.sortKey)?r.jsxs("div",{className:"flex items-center gap-1",children:[ge==null?void 0:ge.label,r.jsx("svg",{className:`w-4 h-4 transition-opacity ${h===ge.sortKey?"opacity-100 text-purple-600":"opacity-40"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:h===ge.sortKey&&m==="desc"?"M19 9l-7 7-7-7":"M5 15l7-7 7 7"})})]}):ge==null?void 0:ge.label},oe)})})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:it.map(oe=>r.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:B.map(ge=>r.jsxs("td",{className:"px-[12.8px] py-[9.6px] text-xs",style:{width:de[ge]},children:[ge==="key"&&r.jsx("span",{className:"text-purple-600 font-mono font-semibold",children:oe.key}),ge==="summary"&&r.jsx("span",{className:"text-gray-900 font-medium",children:oe.summary}),ge==="description"&&r.jsx("span",{className:"text-gray-600 text-xs",children:oe.description||"-"}),ge==="status"&&r.jsx(Ze,{variant:at(oe.status),children:oe.status==="COMPLETED"?"Completed":oe.status==="RISK ACCEPTED"?"Risk Accepted":oe.status}),ge==="audit"&&r.jsx("span",{className:"text-gray-600 text-xs",children:oe.auditName||"-"}),ge==="dueDate"&&r.jsx("span",{className:"text-gray-600 text-xs",children:oe.dueDate?kr(oe.dueDate,"PP"):"-"}),ge==="riskLevel"&&r.jsx(Ze,{variant:oe.riskLevel==="Critical"?"danger":oe.riskLevel==="High"?"warning":oe.riskLevel==="Medium"?"info":"default",children:oe.riskLevel||"Unassigned"}),ge==="responsible"&&r.jsx("span",{className:"text-gray-600 text-xs",children:oe.responsibleEmail||"-"}),ge==="clevel"&&r.jsx("span",{className:"text-gray-600 text-xs",children:oe.cLevel||"-"}),ge==="actions"&&r.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>{c(oe),f(!0)},children:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]},ge))},oe.key))})]})]}),_e.length>0&&r.jsx("div",{className:"mt-4 p-4 border-t border-gray-200",children:r.jsx(Ch,{currentPage:n,totalItems:_e.length,itemsPerPage:i,onPageChange:s,onItemsPerPageChange:a})})]}),u&&o&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:oe=>oe.stopPropagation(),children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 px-6 py-4 rounded-t-2xl",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-[16px] font-bold text-white",children:"Finding Action Details"}),r.jsx("p",{className:"text-purple-100 text-xs mt-1",children:o.key})]}),r.jsx("button",{onClick:()=>f(!1),className:"text-white hover:text-purple-200 transition-colors p-2",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-[19.2px]",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Audit Name"}),r.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.auditName||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Status"}),r.jsx("div",{className:"mt-1",children:r.jsx(Ze,{variant:at(o.status),children:o.status==="COMPLETED"?"Completed":o.status==="RISK ACCEPTED"?"Risk Accepted":o.status})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Due Date"}),r.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.dueDate?kr(o.dueDate,"PPP"):"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Financial Impact"}),r.jsx("p",{className:"text-gray-900 font-medium mt-1",children:mr(o.monetaryImpact)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Action Responsible"}),r.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.responsibleEmail||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"C-Level"}),r.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.cLevel||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Risk Level"}),r.jsx("div",{className:"mt-1",children:r.jsx(Ze,{variant:o.riskLevel==="Critical"?"danger":o.riskLevel==="High"?"warning":o.riskLevel==="Medium"?"info":"default",children:o.riskLevel||"Unassigned"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Action Summary"}),r.jsx("p",{className:"text-gray-900 mt-2 p-4 bg-gray-50 rounded-lg",children:o.summary})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Action Description"}),r.jsx("p",{className:"text-gray-700 mt-2 p-4 bg-gray-50 rounded-lg whitespace-pre-wrap",children:o.description||"No description available"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Finding Description"}),r.jsx("p",{className:"text-gray-700 mt-2 p-4 bg-purple-50 rounded-lg whitespace-pre-wrap border border-purple-200",children:o.parentDescription||"No description available"})]}),r.jsx("div",{className:"flex justify-end items-center pt-4 border-t",children:r.jsx(Be,{onClick:()=>f(!1),variant:"primary",children:"Close"})})]})]})}),r.jsx(S8,{onGenerateReport:Oe,isExporting:C})]})},q8=()=>{const{data:t,isLoading:e}=Z_(),{data:n,isLoading:s}=kn({queryKey:["google-sheet-data"],queryFn:()=>Yt.getGoogleSheetData()});return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-[24px] font-bold text-gray-900",children:"Audit Maturity Assessment"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track audit maturity scores and progress"})]})}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Maturity Scores",subtitle:"From Jira MAT project"}),e?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"xl",text:"Loading MAT scores..."})}):r.jsx("div",{className:"overflow-x-auto mt-4",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Object"}),r.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Score"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"})]})}),r.jsx("tbody",{children:t==null?void 0:t.map((i,a)=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[r.jsx("td",{className:"py-4 px-4 text-gray-900",children:i.object}),r.jsx("td",{className:"py-4 px-4 text-center",children:r.jsxs("span",{className:`inline-block px-3 py-1 rounded-full font-semibold ${i.score>=4?"bg-green-100 text-green-800":i.score>=3?"bg-blue-100 text-blue-800":i.score>=2?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[i.score,"/5"]})}),r.jsx("td",{className:"py-4 px-4 text-gray-600",children:i.status})]},a))})]})})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Additional Maturity Data",subtitle:"From Google Sheets"}),s?r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(Nt,{size:"xl",text:"Loading Google Sheets data..."})}):n&&n.length>0?r.jsx("div",{className:"overflow-x-auto mt-4",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b border-gray-200",children:Object.keys(n[0]).map(i=>r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:i},i))})}),r.jsx("tbody",{children:n.map((i,a)=>r.jsx("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:Object.values(i).map((o,c)=>r.jsx("td",{className:"py-4 px-4 text-gray-900",children:o},c))},a))})]})}):r.jsx("p",{className:"text-gray-500 text-center py-8",children:"No Google Sheets data available"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-[19.2px]",children:[r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Average Score"}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-4xl font-bold text-purple-600",children:t&&t.length>0?(t.reduce((i,a)=>i+a.score,0)/t.length).toFixed(2):"0.00"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Out of 5.00"})]})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"High Performers"}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-4xl font-bold text-green-600",children:(t==null?void 0:t.filter(i=>i.score>=4).length)||0}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Scores 4.0+"})]})]}),r.jsxs(Ie,{variant:"elevated",children:[r.jsx(vt,{title:"Needs Improvement"}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-4xl font-bold text-red-600",children:(t==null?void 0:t.filter(i=>i.score<3).length)||0}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Scores below 3.0"})]})]})]})]})};function W8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return L.useMemo(()=>s=>{e.forEach(i=>i(s))},e)}const Uh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function fc(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Ty(t){return"nodeType"in t}function $r(t){var e,n;return t?fc(t)?t:Ty(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Dy(t){const{Document:e}=$r(t);return t instanceof e}function Jd(t){return fc(t)?!1:t instanceof $r(t).HTMLElement}function G5(t){return t instanceof $r(t).SVGElement}function hc(t){return t?fc(t)?t.document:Ty(t)?Dy(t)?t:Jd(t)||G5(t)?t.ownerDocument:document:document:document}const Qs=Uh?L.useLayoutEffect:L.useEffect;function Hh(t){const e=L.useRef(t);return Qs(()=>{e.current=t}),L.useCallback(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return e.current==null?void 0:e.current(...s)},[])}function U8(){const t=L.useRef(null),e=L.useCallback((s,i)=>{t.current=setInterval(s,i)},[]),n=L.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Ld(t,e){e===void 0&&(e=[t]);const n=L.useRef(t);return Qs(()=>{n.current!==t&&(n.current=t)},e),n}function Zd(t,e){const n=L.useRef();return L.useMemo(()=>{const s=t(n.current);return n.current=s,s},[...e])}function ph(t){const e=Hh(t),n=L.useRef(null),s=L.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,s]}function mh(t){const e=L.useRef();return L.useEffect(()=>{e.current=t},[t]),e.current}let a0={};function eu(t,e){return L.useMemo(()=>{if(e)return e;const n=a0[t]==null?0:a0[t]+1;return a0[t]=n,t+"-"+n},[t,e])}function X5(t){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((a,o)=>{const c=Object.entries(o);for(const[u,f]of c){const h=a[u];h!=null&&(a[u]=h+t*f)}return a},{...e})}}const Tl=X5(1),Od=X5(-1);function H8(t){return"clientX"in t&&"clientY"in t}function $h(t){if(!t)return!1;const{KeyboardEvent:e}=$r(t.target);return e&&t instanceof e}function $8(t){if(!t)return!1;const{TouchEvent:e}=$r(t.target);return e&&t instanceof e}function xh(t){if($8(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return H8(t)?{x:t.clientX,y:t.clientY}:null}const $a=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[$a.Translate.toString(t),$a.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:s}=t;return e+" "+n+"ms "+s}}}),Xw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function V8(t){return t.matches(Xw)?t:t.querySelector(Xw)}const Y8={display:"none"};function K8(t){let{id:e,value:n}=t;return wt.createElement("div",{id:e,style:Y8},n)}function G8(t){let{id:e,announcement:n,ariaLiveType:s="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return wt.createElement("div",{id:e,style:i,role:"status","aria-live":s,"aria-atomic":!0},n)}function X8(){const[t,e]=L.useState("");return{announce:L.useCallback(s=>{s!=null&&e(s)},[]),announcement:t}}const Q5=L.createContext(null);function Q8(t){const e=L.useContext(Q5);L.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function J8(){const[t]=L.useState(()=>new Set),e=L.useCallback(s=>(t.add(s),()=>t.delete(s)),[t]);return[L.useCallback(s=>{let{type:i,event:a}=s;t.forEach(o=>{var c;return(c=o[i])==null?void 0:c.call(o,a)})},[t]),e]}const Z8={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},e9={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function t9(t){let{announcements:e=e9,container:n,hiddenTextDescribedById:s,screenReaderInstructions:i=Z8}=t;const{announce:a,announcement:o}=X8(),c=eu("DndLiveRegion"),[u,f]=L.useState(!1);if(L.useEffect(()=>{f(!0)},[]),Q8(L.useMemo(()=>({onDragStart(p){let{active:m}=p;a(e.onDragStart({active:m}))},onDragMove(p){let{active:m,over:g}=p;e.onDragMove&&a(e.onDragMove({active:m,over:g}))},onDragOver(p){let{active:m,over:g}=p;a(e.onDragOver({active:m,over:g}))},onDragEnd(p){let{active:m,over:g}=p;a(e.onDragEnd({active:m,over:g}))},onDragCancel(p){let{active:m,over:g}=p;a(e.onDragCancel({active:m,over:g}))}}),[a,e])),!u)return null;const h=wt.createElement(wt.Fragment,null,wt.createElement(K8,{id:s,value:i.draggable}),wt.createElement(G8,{id:c,announcement:o}));return n?id.createPortal(h,n):h}var ir;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(ir||(ir={}));function gh(){}function o0(t,e){return L.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function n9(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return L.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const Js=Object.freeze({x:0,y:0});function r9(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function s9(t,e){const n=xh(t);if(!n)return"0 0";const s={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function i9(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return n-s}function a9(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return s-n}function Qw(t){let{left:e,top:n,height:s,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+s},{x:e+i,y:n+s}]}function J5(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}const o9=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const i=Qw(e),a=[];for(const o of s){const{id:c}=o,u=n.get(c);if(u){const f=Qw(u),h=i.reduce((m,g,y)=>m+r9(f[y],g),0),p=Number((h/4).toFixed(4));a.push({id:c,data:{droppableContainer:o,value:p}})}}return a.sort(i9)};function l9(t,e){const n=Math.max(e.top,t.top),s=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),o=i-s,c=a-n;if(s<i&&n<a){const u=e.width*e.height,f=t.width*t.height,h=o*c,p=h/(u+f-h);return Number(p.toFixed(4))}return 0}const Z5=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const i=[];for(const a of s){const{id:o}=a,c=n.get(o);if(c){const u=l9(c,e);u>0&&i.push({id:o,data:{droppableContainer:a,value:u}})}}return i.sort(a9)};function c9(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function e4(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Js}function d9(t){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return i.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...n})}}const u9=d9(1);function t4(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function f9(t,e,n){const s=t4(e);if(!s)return t;const{scaleX:i,scaleY:a,x:o,y:c}=s,u=t.left-o-(1-i)*parseFloat(n),f=t.top-c-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?t.width/i:t.width,p=a?t.height/a:t.height;return{width:h,height:p,top:f,right:u+h,bottom:f+p,left:u}}const h9={ignoreTransform:!1};function pc(t,e){e===void 0&&(e=h9);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:h}=$r(t).getComputedStyle(t);f&&(n=f9(n,f,h))}const{top:s,left:i,width:a,height:o,bottom:c,right:u}=n;return{top:s,left:i,width:a,height:o,bottom:c,right:u}}function Jw(t){return pc(t,{ignoreTransform:!0})}function p9(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function m9(t,e){return e===void 0&&(e=$r(t).getComputedStyle(t)),e.position==="fixed"}function x9(t,e){e===void 0&&(e=$r(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=e[i];return typeof a=="string"?n.test(a):!1})}function Vh(t,e){const n=[];function s(i){if(e!=null&&n.length>=e||!i)return n;if(Dy(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Jd(i)||G5(i)||n.includes(i))return n;const a=$r(t).getComputedStyle(i);return i!==t&&x9(i,a)&&n.push(i),m9(i,a)?n:s(i.parentNode)}return t?s(t):n}function n4(t){const[e]=Vh(t,1);return e??null}function l0(t){return!Uh||!t?null:fc(t)?t:Ty(t)?Dy(t)||t===hc(t).scrollingElement?window:Jd(t)?t:null:null}function r4(t){return fc(t)?t.scrollX:t.scrollLeft}function s4(t){return fc(t)?t.scrollY:t.scrollTop}function Dg(t){return{x:r4(t),y:s4(t)}}var pr;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(pr||(pr={}));function i4(t){return!Uh||!t?!1:t===document.scrollingElement}function a4(t){const e={x:0,y:0},n=i4(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,o=t.scrollTop>=s.y,c=t.scrollLeft>=s.x;return{isTop:i,isLeft:a,isBottom:o,isRight:c,maxScroll:s,minScroll:e}}const g9={x:.2,y:.2};function y9(t,e,n,s,i){let{top:a,left:o,right:c,bottom:u}=n;s===void 0&&(s=10),i===void 0&&(i=g9);const{isTop:f,isBottom:h,isLeft:p,isRight:m}=a4(t),g={x:0,y:0},y={x:0,y:0},b={height:e.height*i.y,width:e.width*i.x};return!f&&a<=e.top+b.height?(g.y=pr.Backward,y.y=s*Math.abs((e.top+b.height-a)/b.height)):!h&&u>=e.bottom-b.height&&(g.y=pr.Forward,y.y=s*Math.abs((e.bottom-b.height-u)/b.height)),!m&&c>=e.right-b.width?(g.x=pr.Forward,y.x=s*Math.abs((e.right-b.width-c)/b.width)):!p&&o<=e.left+b.width&&(g.x=pr.Backward,y.x=s*Math.abs((e.left+b.width-o)/b.width)),{direction:g,speed:y}}function v9(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:e,left:n,right:s,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:s,bottom:i,width:t.clientWidth,height:t.clientHeight}}function o4(t){return t.reduce((e,n)=>Tl(e,Dg(n)),Js)}function b9(t){return t.reduce((e,n)=>e+r4(n),0)}function w9(t){return t.reduce((e,n)=>e+s4(n),0)}function l4(t,e){if(e===void 0&&(e=pc),!t)return;const{top:n,left:s,bottom:i,right:a}=e(t);n4(t)&&(i<=0||a<=0||n>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const j9=[["x",["left","right"],b9],["y",["top","bottom"],w9]];class Iy{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Vh(n),i=o4(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,o,c]of j9)for(const u of o)Object.defineProperty(this,u,{get:()=>{const f=c(s),h=i[a]-f;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class bd{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var i;(i=this.target)==null||i.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function N9(t){const{EventTarget:e}=$r(t);return t instanceof e?t:hc(t)}function c0(t,e){const n=Math.abs(t.x),s=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var Ps;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ps||(Ps={}));function Zw(t){t.preventDefault()}function _9(t){t.stopPropagation()}var tn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(tn||(tn={}));const c4={start:[tn.Space,tn.Enter],cancel:[tn.Esc],end:[tn.Space,tn.Enter,tn.Tab]},k9=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case tn.Right:return{...n,x:n.x+25};case tn.Left:return{...n,x:n.x-25};case tn.Down:return{...n,y:n.y+25};case tn.Up:return{...n,y:n.y-25}}};class Fy{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new bd(hc(n)),this.windowListeners=new bd($r(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ps.Resize,this.handleCancel),this.windowListeners.add(Ps.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ps.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&l4(s),n(Js)}handleKeyDown(e){if($h(e)){const{active:n,context:s,options:i}=this.props,{keyboardCodes:a=c4,coordinateGetter:o=k9,scrollBehavior:c="smooth"}=i,{code:u}=e;if(a.end.includes(u)){this.handleEnd(e);return}if(a.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:f}=s.current,h=f?{x:f.left,y:f.top}:Js;this.referenceCoordinates||(this.referenceCoordinates=h);const p=o(e,{active:n,context:s.current,currentCoordinates:h});if(p){const m=Od(p,h),g={x:0,y:0},{scrollableAncestors:y}=s.current;for(const b of y){const v=e.code,{isTop:w,isRight:N,isLeft:k,isBottom:j,maxScroll:S,minScroll:C}=a4(b),O=v9(b),M={x:Math.min(v===tn.Right?O.right-O.width/2:O.right,Math.max(v===tn.Right?O.left:O.left+O.width/2,p.x)),y:Math.min(v===tn.Down?O.bottom-O.height/2:O.bottom,Math.max(v===tn.Down?O.top:O.top+O.height/2,p.y))},B=v===tn.Right&&!N||v===tn.Left&&!k,I=v===tn.Down&&!j||v===tn.Up&&!w;if(B&&M.x!==p.x){const R=b.scrollLeft+m.x,P=v===tn.Right&&R<=S.x||v===tn.Left&&R>=C.x;if(P&&!m.y){b.scrollTo({left:R,behavior:c});return}P?g.x=b.scrollLeft-R:g.x=v===tn.Right?b.scrollLeft-S.x:b.scrollLeft-C.x,g.x&&b.scrollBy({left:-g.x,behavior:c});break}else if(I&&M.y!==p.y){const R=b.scrollTop+m.y,P=v===tn.Down&&R<=S.y||v===tn.Up&&R>=C.y;if(P&&!m.x){b.scrollTo({top:R,behavior:c});return}P?g.y=b.scrollTop-R:g.y=v===tn.Down?b.scrollTop-S.y:b.scrollTop-C.y,g.y&&b.scrollBy({top:-g.y,behavior:c});break}}this.handleMove(e,Tl(Od(p,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Fy.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:s=c4,onActivation:i}=e,{active:a}=n;const{code:o}=t.nativeEvent;if(s.start.includes(o)){const c=a.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function ej(t){return!!(t&&"distance"in t)}function tj(t){return!!(t&&"delay"in t)}class zy{constructor(e,n,s){var i;s===void 0&&(s=N9(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:a}=e,{target:o}=a;this.props=e,this.events=n,this.document=hc(o),this.documentListeners=new bd(this.document),this.listeners=new bd(s),this.windowListeners=new bd($r(o)),this.initialCoordinates=(i=xh(a))!=null?i:Js,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ps.Resize,this.handleCancel),this.windowListeners.add(Ps.DragStart,Zw),this.windowListeners.add(Ps.VisibilityChange,this.handleCancel),this.windowListeners.add(Ps.ContextMenu,Zw),this.documentListeners.add(Ps.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(tj(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(ej(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:i}=this.props;i(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ps.Click,_9,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ps.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:i,props:a}=this,{onMove:o,options:{activationConstraint:c}}=a;if(!i)return;const u=(n=xh(e))!=null?n:Js,f=Od(i,u);if(!s&&c){if(ej(c)){if(c.tolerance!=null&&c0(f,c.tolerance))return this.handleCancel();if(c0(f,c.distance))return this.handleStart()}if(tj(c)&&c0(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===tn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const S9={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class By extends zy{constructor(e){const{event:n}=e,s=hc(n.target);super(e,S9,s)}}By.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const C9={move:{name:"mousemove"},end:{name:"mouseup"}};var Ig;(function(t){t[t.RightClick=2]="RightClick"})(Ig||(Ig={}));class A9 extends zy{constructor(e){super(e,C9,hc(e.event.target))}}A9.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return n.button===Ig.RightClick?!1:(s==null||s({event:n}),!0)}}];const d0={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class d4 extends zy{constructor(e){super(e,d0)}static setup(){return window.addEventListener(d0.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(d0.move.name,e)};function e(){}}}d4.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;const{touches:i}=n;return i.length>1?!1:(s==null||s({event:n}),!0)}}];var wd;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(wd||(wd={}));var yh;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(yh||(yh={}));function E9(t){let{acceleration:e,activator:n=wd.Pointer,canScroll:s,draggingRect:i,enabled:a,interval:o=5,order:c=yh.TreeOrder,pointerCoordinates:u,scrollableAncestors:f,scrollableAncestorRects:h,delta:p,threshold:m}=t;const g=O9({delta:p,disabled:!a}),[y,b]=U8(),v=L.useRef({x:0,y:0}),w=L.useRef({x:0,y:0}),N=L.useMemo(()=>{switch(n){case wd.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case wd.DraggableRect:return i}},[n,i,u]),k=L.useRef(null),j=L.useCallback(()=>{const C=k.current;if(!C)return;const O=v.current.x*w.current.x,M=v.current.y*w.current.y;C.scrollBy(O,M)},[]),S=L.useMemo(()=>c===yh.TreeOrder?[...f].reverse():f,[c,f]);L.useEffect(()=>{if(!a||!f.length||!N){b();return}for(const C of S){if((s==null?void 0:s(C))===!1)continue;const O=f.indexOf(C),M=h[O];if(!M)continue;const{direction:B,speed:I}=y9(C,M,N,e,m);for(const R of["x","y"])g[R][B[R]]||(I[R]=0,B[R]=0);if(I.x>0||I.y>0){b(),k.current=C,y(j,o),v.current=I,w.current=B;return}}v.current={x:0,y:0},w.current={x:0,y:0},b()},[e,j,s,b,a,o,JSON.stringify(N),JSON.stringify(g),y,f,S,h,JSON.stringify(m)])}const L9={x:{[pr.Backward]:!1,[pr.Forward]:!1},y:{[pr.Backward]:!1,[pr.Forward]:!1}};function O9(t){let{delta:e,disabled:n}=t;const s=mh(e);return Zd(i=>{if(n||!s||!i)return L9;const a={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[pr.Backward]:i.x[pr.Backward]||a.x===-1,[pr.Forward]:i.x[pr.Forward]||a.x===1},y:{[pr.Backward]:i.y[pr.Backward]||a.y===-1,[pr.Forward]:i.y[pr.Forward]||a.y===1}}},[n,e,s])}function M9(t,e){const n=e!=null?t.get(e):void 0,s=n?n.node.current:null;return Zd(i=>{var a;return e==null?null:(a=s??i)!=null?a:null},[s,e])}function P9(t,e){return L.useMemo(()=>t.reduce((n,s)=>{const{sensor:i}=s,a=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,s)}));return[...n,...a]},[]),[t,e])}var Md;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Md||(Md={}));var Fg;(function(t){t.Optimized="optimized"})(Fg||(Fg={}));const nj=new Map;function R9(t,e){let{dragging:n,dependencies:s,config:i}=e;const[a,o]=L.useState(null),{frequency:c,measure:u,strategy:f}=i,h=L.useRef(t),p=v(),m=Ld(p),g=L.useCallback(function(w){w===void 0&&(w=[]),!m.current&&o(N=>N===null?w:N.concat(w.filter(k=>!N.includes(k))))},[m]),y=L.useRef(null),b=Zd(w=>{if(p&&!n)return nj;if(!w||w===nj||h.current!==t||a!=null){const N=new Map;for(let k of t){if(!k)continue;if(a&&a.length>0&&!a.includes(k.id)&&k.rect.current){N.set(k.id,k.rect.current);continue}const j=k.node.current,S=j?new Iy(u(j),j):null;k.rect.current=S,S&&N.set(k.id,S)}return N}return w},[t,a,n,p,u]);return L.useEffect(()=>{h.current=t},[t]),L.useEffect(()=>{p||g()},[n,p]),L.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),L.useEffect(()=>{p||typeof c!="number"||y.current!==null||(y.current=setTimeout(()=>{g(),y.current=null},c))},[c,p,g,...s]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:a!=null};function v(){switch(f){case Md.Always:return!1;case Md.BeforeDragging:return n;default:return!n}}}function qy(t,e){return Zd(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function T9(t,e){return qy(t,e)}function D9(t){let{callback:e,disabled:n}=t;const s=Hh(e),i=L.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,n]);return L.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Yh(t){let{callback:e,disabled:n}=t;const s=Hh(e),i=L.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[n]);return L.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function I9(t){return new Iy(pc(t),t)}function rj(t,e,n){e===void 0&&(e=I9);const[s,i]=L.useState(null);function a(){i(u=>{if(!t)return null;if(t.isConnected===!1){var f;return(f=u??n)!=null?f:null}const h=e(t);return JSON.stringify(u)===JSON.stringify(h)?u:h})}const o=D9({callback(u){if(t)for(const f of u){const{type:h,target:p}=f;if(h==="childList"&&p instanceof HTMLElement&&p.contains(t)){a();break}}}}),c=Yh({callback:a});return Qs(()=>{a(),t?(c==null||c.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[t]),s}function F9(t){const e=qy(t);return e4(t,e)}const sj=[];function z9(t){const e=L.useRef(t),n=Zd(s=>t?s&&s!==sj&&t&&e.current&&t.parentNode===e.current.parentNode?s:Vh(t):sj,[t]);return L.useEffect(()=>{e.current=t},[t]),n}function B9(t){const[e,n]=L.useState(null),s=L.useRef(t),i=L.useCallback(a=>{const o=l0(a.target);o&&n(c=>c?(c.set(o,Dg(o)),new Map(c)):null)},[]);return L.useEffect(()=>{const a=s.current;if(t!==a){o(a);const c=t.map(u=>{const f=l0(u);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,Dg(f)]):null}).filter(u=>u!=null);n(c.length?new Map(c):null),s.current=t}return()=>{o(t),o(a)};function o(c){c.forEach(u=>{const f=l0(u);f==null||f.removeEventListener("scroll",i)})}},[i,t]),L.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,o)=>Tl(a,o),Js):o4(t):Js,[t,e])}function ij(t,e){e===void 0&&(e=[]);const n=L.useRef(null);return L.useEffect(()=>{n.current=null},e),L.useEffect(()=>{const s=t!==Js;s&&!n.current&&(n.current=t),!s&&n.current&&(n.current=null)},[t]),n.current?Od(t,n.current):Js}function q9(t){L.useEffect(()=>{if(!Uh)return;const e=t.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function W9(t,e){return L.useMemo(()=>t.reduce((n,s)=>{let{eventName:i,handler:a}=s;return n[i]=o=>{a(o,e)},n},{}),[t,e])}function u4(t){return L.useMemo(()=>t?p9(t):null,[t])}const aj=[];function U9(t,e){e===void 0&&(e=pc);const[n]=t,s=u4(n?$r(n):null),[i,a]=L.useState(aj);function o(){a(()=>t.length?t.map(u=>i4(u)?s:new Iy(e(u),u)):aj)}const c=Yh({callback:o});return Qs(()=>{c==null||c.disconnect(),o(),t.forEach(u=>c==null?void 0:c.observe(u))},[t]),i}function f4(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Jd(e)?e:t}function H9(t){let{measure:e}=t;const[n,s]=L.useState(null),i=L.useCallback(f=>{for(const{target:h}of f)if(Jd(h)){s(p=>{const m=e(h);return p?{...p,width:m.width,height:m.height}:m});break}},[e]),a=Yh({callback:i}),o=L.useCallback(f=>{const h=f4(f);a==null||a.disconnect(),h&&(a==null||a.observe(h)),s(h?e(h):null)},[e,a]),[c,u]=ph(o);return L.useMemo(()=>({nodeRef:c,rect:n,setRef:u}),[n,c,u])}const $9=[{sensor:By,options:{}},{sensor:Fy,options:{}}],V9={current:{}},Vf={draggable:{measure:Jw},droppable:{measure:Jw,strategy:Md.WhileDragging,frequency:Fg.Optimized},dragOverlay:{measure:pc}};class jd extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const Y9={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new jd,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:gh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Vf,measureDroppableContainers:gh,windowRect:null,measuringScheduled:!1},h4={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:gh,draggableNodes:new Map,over:null,measureDroppableContainers:gh},tu=L.createContext(h4),p4=L.createContext(Y9);function K9(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new jd}}}function G9(t,e){switch(e.type){case ir.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case ir.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case ir.DragEnd:case ir.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ir.RegisterDroppable:{const{element:n}=e,{id:s}=n,i=new jd(t.droppable.containers);return i.set(s,n),{...t,droppable:{...t.droppable,containers:i}}}case ir.SetDroppableDisabled:{const{id:n,key:s,disabled:i}=e,a=t.droppable.containers.get(n);if(!a||s!==a.key)return t;const o=new jd(t.droppable.containers);return o.set(n,{...a,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case ir.UnregisterDroppable:{const{id:n,key:s}=e,i=t.droppable.containers.get(n);if(!i||s!==i.key)return t;const a=new jd(t.droppable.containers);return a.delete(n),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function X9(t){let{disabled:e}=t;const{active:n,activatorEvent:s,draggableNodes:i}=L.useContext(tu),a=mh(s),o=mh(n==null?void 0:n.id);return L.useEffect(()=>{if(!e&&!s&&a&&o!=null){if(!$h(a)||document.activeElement===a.target)return;const c=i.get(o);if(!c)return;const{activatorNode:u,node:f}=c;if(!u.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[u.current,f.current]){if(!h)continue;const p=V8(h);if(p){p.focus();break}}})}},[s,e,i,o,a]),null}function m4(t,e){let{transform:n,...s}=e;return t!=null&&t.length?t.reduce((i,a)=>a({transform:i,...s}),n):n}function Q9(t){return L.useMemo(()=>({draggable:{...Vf.draggable,...t==null?void 0:t.draggable},droppable:{...Vf.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Vf.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function J9(t){let{activeNode:e,measure:n,initialRect:s,config:i=!0}=t;const a=L.useRef(!1),{x:o,y:c}=typeof i=="boolean"?{x:i,y:i}:i;Qs(()=>{if(!o&&!c||!e){a.current=!1;return}if(a.current||!s)return;const f=e==null?void 0:e.node.current;if(!f||f.isConnected===!1)return;const h=n(f),p=e4(h,s);if(o||(p.x=0),c||(p.y=0),a.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=n4(f);m&&m.scrollBy({top:p.y,left:p.x})}},[e,o,c,s,n])}const Kh=L.createContext({...Js,scaleX:1,scaleY:1});var ja;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ja||(ja={}));const Z9=L.memo(function(e){var n,s,i,a;let{id:o,accessibility:c,autoScroll:u=!0,children:f,sensors:h=$9,collisionDetection:p=Z5,measuring:m,modifiers:g,...y}=e;const b=L.useReducer(G9,void 0,K9),[v,w]=b,[N,k]=J8(),[j,S]=L.useState(ja.Uninitialized),C=j===ja.Initialized,{draggable:{active:O,nodes:M,translate:B},droppable:{containers:I}}=v,R=O!=null?M.get(O):null,P=L.useRef({initial:null,translated:null}),q=L.useMemo(()=>{var Xt;return O!=null?{id:O,data:(Xt=R==null?void 0:R.data)!=null?Xt:V9,rect:P}:null},[O,R]),H=L.useRef(null),[G,ne]=L.useState(null),[X,ee]=L.useState(null),Y=Ld(y,Object.values(y)),U=eu("DndDescribedBy",o),T=L.useMemo(()=>I.getEnabled(),[I]),W=Q9(m),{droppableRects:z,measureDroppableContainers:Q,measuringScheduled:Z}=R9(T,{dragging:C,dependencies:[B.x,B.y],config:W.droppable}),V=M9(M,O),ie=L.useMemo(()=>X?xh(X):null,[X]),de=Ct(),fe=T9(V,W.draggable.measure);J9({activeNode:O!=null?M.get(O):null,config:de.layoutShiftCompensation,initialRect:fe,measure:W.draggable.measure});const ve=rj(V,W.draggable.measure,fe),He=rj(V?V.parentElement:null),$e=L.useRef({activatorEvent:null,active:null,activeNode:V,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),st=I.getNodeFor((n=$e.current.over)==null?void 0:n.id),_e=H9({measure:W.dragOverlay.measure}),it=(s=_e.nodeRef.current)!=null?s:V,rt=C?(i=_e.rect)!=null?i:ve:null,at=!!(_e.nodeRef.current&&_e.rect),Oe=F9(at?null:ve),oe=u4(it?$r(it):null),ge=z9(C?st??V:null),Ne=U9(ge),Ae=m4(g,{transform:{x:B.x-Oe.x,y:B.y-Oe.y,scaleX:1,scaleY:1},activatorEvent:X,active:q,activeNodeRect:ve,containerNodeRect:He,draggingNodeRect:rt,over:$e.current.over,overlayNodeRect:_e.rect,scrollableAncestors:ge,scrollableAncestorRects:Ne,windowRect:oe}),ke=ie?Tl(ie,B):null,re=B9(ge),te=ij(re),J=ij(re,[ve]),ue=Tl(Ae,te),Ce=rt?u9(rt,Ae):null,ze=q&&Ce?p({active:q,collisionRect:Ce,droppableRects:z,droppableContainers:T,pointerCoordinates:ke}):null,Fe=J5(ze,"id"),[Ue,ht]=L.useState(null),Te=at?Ae:Tl(Ae,J),St=c9(Te,(a=Ue==null?void 0:Ue.rect)!=null?a:null,ve),Dt=L.useRef(null),yr=L.useCallback((Xt,Qt)=>{let{sensor:vn,options:At}=Qt;if(H.current==null)return;const Jt=M.get(H.current);if(!Jt)return;const ct=Xt.nativeEvent,rn=new vn({active:H.current,activeNode:Jt,event:ct,options:At,context:$e,onAbort(Ft){if(!M.get(Ft))return;const{onDragAbort:sn}=Y.current,zt={id:Ft};sn==null||sn(zt),N({type:"onDragAbort",event:zt})},onPending(Ft,jt,sn,zt){if(!M.get(Ft))return;const{onDragPending:Ht}=Y.current,Cn={id:Ft,constraint:jt,initialCoordinates:sn,offset:zt};Ht==null||Ht(Cn),N({type:"onDragPending",event:Cn})},onStart(Ft){const jt=H.current;if(jt==null)return;const sn=M.get(jt);if(!sn)return;const{onDragStart:zt}=Y.current,hn={activatorEvent:ct,active:{id:jt,data:sn.data,rect:P}};id.unstable_batchedUpdates(()=>{zt==null||zt(hn),S(ja.Initializing),w({type:ir.DragStart,initialCoordinates:Ft,active:jt}),N({type:"onDragStart",event:hn}),ne(Dt.current),ee(ct)})},onMove(Ft){w({type:ir.DragMove,coordinates:Ft})},onEnd:Tt(ir.DragEnd),onCancel:Tt(ir.DragCancel)});Dt.current=rn;function Tt(Ft){return async function(){const{active:sn,collisions:zt,over:hn,scrollAdjustedTranslate:Ht}=$e.current;let Cn=null;if(sn&&Ht){const{cancelDrop:Nn}=Y.current;Cn={activatorEvent:ct,active:sn,collisions:zt,delta:Ht,over:hn},Ft===ir.DragEnd&&typeof Nn=="function"&&await Promise.resolve(Nn(Cn))&&(Ft=ir.DragCancel)}H.current=null,id.unstable_batchedUpdates(()=>{w({type:Ft}),S(ja.Uninitialized),ht(null),ne(null),ee(null),Dt.current=null;const Nn=Ft===ir.DragEnd?"onDragEnd":"onDragCancel";if(Cn){const xn=Y.current[Nn];xn==null||xn(Cn),N({type:Nn,event:Cn})}})}}},[M]),It=L.useCallback((Xt,Qt)=>(vn,At)=>{const Jt=vn.nativeEvent,ct=M.get(At);if(H.current!==null||!ct||Jt.dndKit||Jt.defaultPrevented)return;const rn={active:ct};Xt(vn,Qt.options,rn)===!0&&(Jt.dndKit={capturedBy:Qt.sensor},H.current=At,yr(vn,Qt))},[M,yr]),Sn=P9(h,It);q9(h),Qs(()=>{ve&&j===ja.Initializing&&S(ja.Initialized)},[ve,j]),L.useEffect(()=>{const{onDragMove:Xt}=Y.current,{active:Qt,activatorEvent:vn,collisions:At,over:Jt}=$e.current;if(!Qt||!vn)return;const ct={active:Qt,activatorEvent:vn,collisions:At,delta:{x:ue.x,y:ue.y},over:Jt};id.unstable_batchedUpdates(()=>{Xt==null||Xt(ct),N({type:"onDragMove",event:ct})})},[ue.x,ue.y]),L.useEffect(()=>{const{active:Xt,activatorEvent:Qt,collisions:vn,droppableContainers:At,scrollAdjustedTranslate:Jt}=$e.current;if(!Xt||H.current==null||!Qt||!Jt)return;const{onDragOver:ct}=Y.current,rn=At.get(Fe),Tt=rn&&rn.rect.current?{id:rn.id,rect:rn.rect.current,data:rn.data,disabled:rn.disabled}:null,Ft={active:Xt,activatorEvent:Qt,collisions:vn,delta:{x:Jt.x,y:Jt.y},over:Tt};id.unstable_batchedUpdates(()=>{ht(Tt),ct==null||ct(Ft),N({type:"onDragOver",event:Ft})})},[Fe]),Qs(()=>{$e.current={activatorEvent:X,active:q,activeNode:V,collisionRect:Ce,collisions:ze,droppableRects:z,draggableNodes:M,draggingNode:it,draggingNodeRect:rt,droppableContainers:I,over:Ue,scrollableAncestors:ge,scrollAdjustedTranslate:ue},P.current={initial:rt,translated:Ce}},[q,V,ze,Ce,M,it,rt,z,I,Ue,ge,ue]),E9({...de,delta:B,draggingRect:Ce,pointerCoordinates:ke,scrollableAncestors:ge,scrollableAncestorRects:Ne});const yn=L.useMemo(()=>({active:q,activeNode:V,activeNodeRect:ve,activatorEvent:X,collisions:ze,containerNodeRect:He,dragOverlay:_e,draggableNodes:M,droppableContainers:I,droppableRects:z,over:Ue,measureDroppableContainers:Q,scrollableAncestors:ge,scrollableAncestorRects:Ne,measuringConfiguration:W,measuringScheduled:Z,windowRect:oe}),[q,V,ve,X,ze,He,_e,M,I,z,Ue,Q,ge,Ne,W,Z,oe]),Sr=L.useMemo(()=>({activatorEvent:X,activators:Sn,active:q,activeNodeRect:ve,ariaDescribedById:{draggable:U},dispatch:w,draggableNodes:M,over:Ue,measureDroppableContainers:Q}),[X,Sn,q,ve,w,U,M,Ue,Q]);return wt.createElement(Q5.Provider,{value:k},wt.createElement(tu.Provider,{value:Sr},wt.createElement(p4.Provider,{value:yn},wt.createElement(Kh.Provider,{value:St},f)),wt.createElement(X9,{disabled:(c==null?void 0:c.restoreFocus)===!1})),wt.createElement(t9,{...c,hiddenTextDescribedById:U}));function Ct(){const Xt=(G==null?void 0:G.autoScrollEnabled)===!1,Qt=typeof u=="object"?u.enabled===!1:u===!1,vn=C&&!Xt&&!Qt;return typeof u=="object"?{...u,enabled:vn}:{enabled:vn}}}),eI=L.createContext(null),oj="button",tI="Draggable";function nI(t){let{id:e,data:n,disabled:s=!1,attributes:i}=t;const a=eu(tI),{activators:o,activatorEvent:c,active:u,activeNodeRect:f,ariaDescribedById:h,draggableNodes:p,over:m}=L.useContext(tu),{role:g=oj,roleDescription:y="draggable",tabIndex:b=0}=i??{},v=(u==null?void 0:u.id)===e,w=L.useContext(v?Kh:eI),[N,k]=ph(),[j,S]=ph(),C=W9(o,e),O=Ld(n);Qs(()=>(p.set(e,{id:e,key:a,node:N,activatorNode:j,data:O}),()=>{const B=p.get(e);B&&B.key===a&&p.delete(e)}),[p,e]);const M=L.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":s,"aria-pressed":v&&g===oj?!0:void 0,"aria-roledescription":y,"aria-describedby":h.draggable}),[s,g,b,v,y,h.draggable]);return{active:u,activatorEvent:c,activeNodeRect:f,attributes:M,isDragging:v,listeners:s?void 0:C,node:N,over:m,setNodeRef:k,setActivatorNodeRef:S,transform:w}}function x4(){return L.useContext(p4)}const rI="Droppable",sI={timeout:25};function Wy(t){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:i}=t;const a=eu(rI),{active:o,dispatch:c,over:u,measureDroppableContainers:f}=L.useContext(tu),h=L.useRef({disabled:n}),p=L.useRef(!1),m=L.useRef(null),g=L.useRef(null),{disabled:y,updateMeasurementsFor:b,timeout:v}={...sI,...i},w=Ld(b??s),N=L.useCallback(()=>{if(!p.current){p.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{f(Array.isArray(w.current)?w.current:[w.current]),g.current=null},v)},[v]),k=Yh({callback:N,disabled:y||!o}),j=L.useCallback((M,B)=>{k&&(B&&(k.unobserve(B),p.current=!1),M&&k.observe(M))},[k]),[S,C]=ph(j),O=Ld(e);return L.useEffect(()=>{!k||!S.current||(k.disconnect(),p.current=!1,k.observe(S.current))},[S,k]),L.useEffect(()=>(c({type:ir.RegisterDroppable,element:{id:s,key:a,disabled:n,node:S,rect:m,data:O}}),()=>c({type:ir.UnregisterDroppable,key:a,id:s})),[s]),L.useEffect(()=>{n!==h.current.disabled&&(c({type:ir.SetDroppableDisabled,id:s,key:a,disabled:n}),h.current.disabled=n)},[s,a,n,c]),{active:o,rect:m,isOver:(u==null?void 0:u.id)===s,node:S,over:u,setNodeRef:C}}function iI(t){let{animation:e,children:n}=t;const[s,i]=L.useState(null),[a,o]=L.useState(null),c=mh(n);return!n&&!s&&c&&i(c),Qs(()=>{if(!a)return;const u=s==null?void 0:s.key,f=s==null?void 0:s.props.id;if(u==null||f==null){i(null);return}Promise.resolve(e(f,a)).then(()=>{i(null)})},[e,s,a]),wt.createElement(wt.Fragment,null,n,s?L.cloneElement(s,{ref:o}):null)}const aI={x:0,y:0,scaleX:1,scaleY:1};function oI(t){let{children:e}=t;return wt.createElement(tu.Provider,{value:h4},wt.createElement(Kh.Provider,{value:aI},e))}const lI={position:"fixed",touchAction:"none"},cI=t=>$h(t)?"transform 250ms ease":void 0,dI=L.forwardRef((t,e)=>{let{as:n,activatorEvent:s,adjustScale:i,children:a,className:o,rect:c,style:u,transform:f,transition:h=cI}=t;if(!c)return null;const p=i?f:{...f,scaleX:1,scaleY:1},m={...lI,width:c.width,height:c.height,top:c.top,left:c.left,transform:$a.Transform.toString(p),transformOrigin:i&&s?s9(s,c):void 0,transition:typeof h=="function"?h(s):h,...u};return wt.createElement(n,{className:o,style:m,ref:e},a)}),uI=t=>e=>{let{active:n,dragOverlay:s}=e;const i={},{styles:a,className:o}=t;if(a!=null&&a.active)for(const[c,u]of Object.entries(a.active))u!==void 0&&(i[c]=n.node.style.getPropertyValue(c),n.node.style.setProperty(c,u));if(a!=null&&a.dragOverlay)for(const[c,u]of Object.entries(a.dragOverlay))u!==void 0&&s.node.style.setProperty(c,u);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[u,f]of Object.entries(i))n.node.style.setProperty(u,f);o!=null&&o.active&&n.node.classList.remove(o.active)}},fI=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:$a.Transform.toString(e)},{transform:$a.Transform.toString(n)}]},hI={duration:250,easing:"ease",keyframes:fI,sideEffects:uI({styles:{active:{opacity:"0"}}})};function pI(t){let{config:e,draggableNodes:n,droppableContainers:s,measuringConfiguration:i}=t;return Hh((a,o)=>{if(e===null)return;const c=n.get(a);if(!c)return;const u=c.node.current;if(!u)return;const f=f4(o);if(!f)return;const{transform:h}=$r(o).getComputedStyle(o),p=t4(h);if(!p)return;const m=typeof e=="function"?e:mI(e);return l4(u,i.draggable.measure),m({active:{id:a,data:c.data,node:u,rect:i.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:o,rect:i.dragOverlay.measure(f)},droppableContainers:s,measuringConfiguration:i,transform:p})})}function mI(t){const{duration:e,easing:n,sideEffects:s,keyframes:i}={...hI,...t};return a=>{let{active:o,dragOverlay:c,transform:u,...f}=a;if(!e)return;const h={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},p={scaleX:u.scaleX!==1?o.rect.width*u.scaleX/c.rect.width:1,scaleY:u.scaleY!==1?o.rect.height*u.scaleY/c.rect.height:1},m={x:u.x-h.x,y:u.y-h.y,...p},g=i({...f,active:o,dragOverlay:c,transform:{initial:u,final:m}}),[y]=g,b=g[g.length-1];if(JSON.stringify(y)===JSON.stringify(b))return;const v=s==null?void 0:s({active:o,dragOverlay:c,...f}),w=c.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(N=>{w.onfinish=()=>{v==null||v(),N()}})}}let lj=0;function xI(t){return L.useMemo(()=>{if(t!=null)return lj++,lj},[t])}const gI=wt.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:s,style:i,transition:a,modifiers:o,wrapperElement:c="div",className:u,zIndex:f=999}=t;const{activatorEvent:h,active:p,activeNodeRect:m,containerNodeRect:g,draggableNodes:y,droppableContainers:b,dragOverlay:v,over:w,measuringConfiguration:N,scrollableAncestors:k,scrollableAncestorRects:j,windowRect:S}=x4(),C=L.useContext(Kh),O=xI(p==null?void 0:p.id),M=m4(o,{activatorEvent:h,active:p,activeNodeRect:m,containerNodeRect:g,draggingNodeRect:v.rect,over:w,overlayNodeRect:v.rect,scrollableAncestors:k,scrollableAncestorRects:j,transform:C,windowRect:S}),B=qy(m),I=pI({config:s,draggableNodes:y,droppableContainers:b,measuringConfiguration:N}),R=B?v.setRef:void 0;return wt.createElement(oI,null,wt.createElement(iI,{animation:I},p&&O?wt.createElement(dI,{key:O,id:p.id,ref:R,as:c,activatorEvent:h,adjustScale:e,className:u,transition:a,rect:B,style:{zIndex:f,...i},transform:M},n):null))});function g4(t,e,n){const s=t.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function yI(t,e){return t.reduce((n,s,i)=>{const a=e.get(s);return a&&(n[i]=a),n},Array(t.length))}function Rf(t){return t!==null&&t>=0}function vI(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function bI(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const y4=t=>{let{rects:e,activeIndex:n,overIndex:s,index:i}=t;const a=g4(e,s,n),o=e[i],c=a[i];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},Tf={scaleX:1,scaleY:1},zg=t=>{var e;let{activeIndex:n,activeNodeRect:s,index:i,rects:a,overIndex:o}=t;const c=(e=a[n])!=null?e:s;if(!c)return null;if(i===n){const f=a[o];return f?{x:0,y:n<o?f.top+f.height-(c.top+c.height):f.top-c.top,...Tf}:null}const u=wI(a,i,n);return i>n&&i<=o?{x:0,y:-c.height-u,...Tf}:i<n&&i>=o?{x:0,y:c.height+u,...Tf}:{x:0,y:0,...Tf}};function wI(t,e,n){const s=t[e],i=t[e-1],a=t[e+1];return s?n<e?i?s.top-(i.top+i.height):a?a.top-(s.top+s.height):0:a?a.top-(s.top+s.height):i?s.top-(i.top+i.height):0:0}const v4="Sortable",b4=wt.createContext({activeIndex:-1,containerId:v4,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:y4,disabled:{draggable:!1,droppable:!1}});function Bg(t){let{children:e,id:n,items:s,strategy:i=y4,disabled:a=!1}=t;const{active:o,dragOverlay:c,droppableRects:u,over:f,measureDroppableContainers:h}=x4(),p=eu(v4,n),m=c.rect!==null,g=L.useMemo(()=>s.map(C=>typeof C=="object"&&"id"in C?C.id:C),[s]),y=o!=null,b=o?g.indexOf(o.id):-1,v=f?g.indexOf(f.id):-1,w=L.useRef(g),N=!vI(g,w.current),k=v!==-1&&b===-1||N,j=bI(a);Qs(()=>{N&&y&&h(g)},[N,g,y,h]),L.useEffect(()=>{w.current=g},[g]);const S=L.useMemo(()=>({activeIndex:b,containerId:p,disabled:j,disableTransforms:k,items:g,overIndex:v,useDragOverlay:m,sortedRects:yI(g,u),strategy:i}),[b,p,j.draggable,j.droppable,k,g,v,u,m,i]);return wt.createElement(b4.Provider,{value:S},e)}const jI=t=>{let{id:e,items:n,activeIndex:s,overIndex:i}=t;return g4(n,s,i).indexOf(e)},NI=t=>{let{containerId:e,isSorting:n,wasDragging:s,index:i,items:a,newIndex:o,previousItems:c,previousContainerId:u,transition:f}=t;return!f||!s||c!==a&&i===o?!1:n?!0:o!==i&&e===u},_I={duration:200,easing:"ease"},w4="transform",kI=$a.Transition.toString({property:w4,duration:0,easing:"linear"}),SI={roleDescription:"sortable"};function CI(t){let{disabled:e,index:n,node:s,rect:i}=t;const[a,o]=L.useState(null),c=L.useRef(n);return Qs(()=>{if(!e&&n!==c.current&&s.current){const u=i.current;if(u){const f=pc(s.current,{ignoreTransform:!0}),h={x:u.left-f.left,y:u.top-f.top,scaleX:u.width/f.width,scaleY:u.height/f.height};(h.x||h.y)&&o(h)}}n!==c.current&&(c.current=n)},[e,n,s,i]),L.useEffect(()=>{a&&o(null)},[a]),a}function AI(t){let{animateLayoutChanges:e=NI,attributes:n,disabled:s,data:i,getNewIndex:a=jI,id:o,strategy:c,resizeObserverConfig:u,transition:f=_I}=t;const{items:h,containerId:p,activeIndex:m,disabled:g,disableTransforms:y,sortedRects:b,overIndex:v,useDragOverlay:w,strategy:N}=L.useContext(b4),k=EI(s,g),j=h.indexOf(o),S=L.useMemo(()=>({sortable:{containerId:p,index:j,items:h},...i}),[p,i,j,h]),C=L.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:O,node:M,isOver:B,setNodeRef:I}=Wy({id:o,data:S,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...u}}),{active:R,activatorEvent:P,activeNodeRect:q,attributes:H,setNodeRef:G,listeners:ne,isDragging:X,over:ee,setActivatorNodeRef:Y,transform:U}=nI({id:o,data:S,attributes:{...SI,...n},disabled:k.draggable}),T=W8(I,G),W=!!R,z=W&&!y&&Rf(m)&&Rf(v),Q=!w&&X,Z=Q&&z?U:null,ie=z?Z??(c??N)({rects:b,activeNodeRect:q,activeIndex:m,overIndex:v,index:j}):null,de=Rf(m)&&Rf(v)?a({id:o,items:h,activeIndex:m,overIndex:v}):j,fe=R==null?void 0:R.id,ve=L.useRef({activeId:fe,items:h,newIndex:de,containerId:p}),He=h!==ve.current.items,$e=e({active:R,containerId:p,isDragging:X,isSorting:W,id:o,index:j,items:h,newIndex:ve.current.newIndex,previousItems:ve.current.items,previousContainerId:ve.current.containerId,transition:f,wasDragging:ve.current.activeId!=null}),st=CI({disabled:!$e,index:j,node:M,rect:O});return L.useEffect(()=>{W&&ve.current.newIndex!==de&&(ve.current.newIndex=de),p!==ve.current.containerId&&(ve.current.containerId=p),h!==ve.current.items&&(ve.current.items=h)},[W,de,p,h]),L.useEffect(()=>{if(fe===ve.current.activeId)return;if(fe!=null&&ve.current.activeId==null){ve.current.activeId=fe;return}const it=setTimeout(()=>{ve.current.activeId=fe},50);return()=>clearTimeout(it)},[fe]),{active:R,activeIndex:m,attributes:H,data:S,rect:O,index:j,newIndex:de,items:h,isOver:B,isSorting:W,isDragging:X,listeners:ne,node:M,overIndex:v,over:ee,setNodeRef:T,setActivatorNodeRef:Y,setDroppableNodeRef:I,setDraggableNodeRef:G,transform:st??ie,transition:_e()};function _e(){if(st||He&&ve.current.newIndex===j)return kI;if(!(Q&&!$h(P)||!f)&&(W||$e))return $a.Transition.toString({...f,property:w4})}}function EI(t,e){var n,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(s=t==null?void 0:t.droppable)!=null?s:e.droppable}}function vh(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const LI=[tn.Down,tn.Right,tn.Up,tn.Left],OI=(t,e)=>{let{context:{active:n,collisionRect:s,droppableRects:i,droppableContainers:a,over:o,scrollableAncestors:c}}=e;if(LI.includes(t.code)){if(t.preventDefault(),!n||!s)return;const u=[];a.getEnabled().forEach(p=>{if(!p||p!=null&&p.disabled)return;const m=i.get(p.id);if(m)switch(t.code){case tn.Down:s.top<m.top&&u.push(p);break;case tn.Up:s.top>m.top&&u.push(p);break;case tn.Left:s.left>m.left&&u.push(p);break;case tn.Right:s.left<m.left&&u.push(p);break}});const f=o9({collisionRect:s,droppableRects:i,droppableContainers:u});let h=J5(f,"id");if(h===(o==null?void 0:o.id)&&f.length>1&&(h=f[1].id),h!=null){const p=a.get(n.id),m=a.get(h),g=m?i.get(m.id):null,y=m==null?void 0:m.node.current;if(y&&g&&p&&m){const v=Vh(y).some((C,O)=>c[O]!==C),w=j4(p,m),N=MI(p,m),k=v||!w?{x:0,y:0}:{x:N?s.width-g.width:0,y:N?s.height-g.height:0},j={x:g.left,y:g.top};return k.x&&k.y?j:Od(j,k)}}}};function j4(t,e){return!vh(t)||!vh(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function MI(t,e){return!vh(t)||!vh(e)||!j4(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const sd=["Planned","Fieldwork","Pre Closing Meeting","Closing Meeting","Completed"],Pd=t=>{switch(t){case"Planned":return{borderColor:"border-l-blue-400",gradient:"from-blue-50/60 to-blue-50/30",headerGradient:"from-blue-400/90 to-blue-500/90",icon:Pw,dotColor:"bg-blue-400/90",textColor:"text-blue-600"};case"Fieldwork":return{borderColor:"border-l-amber-400",gradient:"from-amber-50/60 to-amber-50/30",headerGradient:"from-amber-400/90 to-amber-500/90",icon:dD,dotColor:"bg-amber-400/90",textColor:"text-amber-600"};case"Pre Closing Meeting":return{borderColor:"border-l-orange-400",gradient:"from-orange-50/60 to-orange-50/30",headerGradient:"from-orange-400/90 to-orange-500/90",icon:AD,dotColor:"bg-orange-400/90",textColor:"text-orange-600"};case"Closing Meeting":return{borderColor:"border-l-indigo-400",gradient:"from-indigo-50/60 to-indigo-50/30",headerGradient:"from-indigo-400/90 to-indigo-500/90",icon:hD,dotColor:"bg-indigo-400/90",textColor:"text-indigo-600"};case"Completed":return{borderColor:"border-l-emerald-400",gradient:"from-emerald-50/60 to-emerald-50/30",headerGradient:"from-emerald-400/90 to-emerald-500/90",icon:M5,dotColor:"bg-emerald-400/90",textColor:"text-emerald-600"};default:return{borderColor:"border-l-gray-400",gradient:"from-gray-50/60 to-gray-50/30",headerGradient:"from-gray-400/90 to-gray-500/90",icon:Pw,dotColor:"bg-gray-400/90",textColor:"text-gray-600"}}},qg=({plan:t,onClick:e,onLongPress:n})=>{const{attributes:s,listeners:i,setNodeRef:a,transform:o,transition:c,isDragging:u}=AI({id:t.id,animateLayoutChanges:()=>!0}),f=Pd(t.status),[h,p]=wt.useState(!1),m=wt.useRef(null),g={transform:$a.Transform.toString(o),transition:u?void 0:c||"transform 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 150ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",opacity:u?.4:1,willChange:u?"transform":"auto"},y=N=>{window.innerWidth>=768||!n||(p(!0),m.current=setTimeout(()=>{p(!1),n(t)},500))},b=()=>{m.current&&(clearTimeout(m.current),m.current=null),p(!1)},v=()=>{m.current&&(clearTimeout(m.current),m.current=null),p(!1)},w=typeof window<"u"&&window.innerWidth>=768?i:{};return r.jsx("div",{ref:a,style:{...g,WebkitTouchCallout:"none"},...s,...w,className:`mb-2 cursor-grab active:cursor-grabbing group w-full relative transition-transform duration-200 select-none ${h?"scale-95":""}`,onTouchStart:y,onTouchEnd:b,onTouchMove:v,children:r.jsxs("div",{className:`
                    bg-white rounded-md md:rounded-lg shadow-sm border-l-2 md:border-l-4 ${f.borderColor}
                    hover:shadow-lg hover:scale-[1.01] hover:-translate-y-0.5
                    transition-all duration-200 ease-out
                    border border-gray-100
                    group-hover:border-gray-200
                    w-full
                    relative
                `,onClick:N=>{u||(N.stopPropagation(),e())},children:[r.jsx(Ze,{variant:"purple",className:"absolute top-0.5 right-0.5 text-[4px] md:text-[10px] px-0.5 md:px-2 py-0 md:py-1 leading-none font-bold",children:t.audit_year}),r.jsxs("div",{className:"p-1.5 md:p-3",children:[r.jsx("div",{className:"mb-0.5 md:mb-2",children:r.jsx("h4",{className:"font-semibold text-xs md:text-sm text-gray-900 line-clamp-2 leading-tight pr-8",children:t.audit_name||t.audit_type})}),r.jsx("div",{className:`
                        text-[9px] md:text-xs font-medium mb-0.5 md:mb-2.5 px-1.5 md:px-2 py-0.5 md:py-1 rounded-md inline-block
                        bg-gradient-to-r ${f.gradient} ${f.textColor}
                    `,children:t.department}),r.jsxs("div",{className:"flex items-center gap-1 md:gap-2 text-[9px] md:text-[11px] text-gray-500 pt-1 md:pt-2 border-t border-gray-100",children:[r.jsx(Ed,{className:"h-2.5 w-2.5 md:h-3.5 md:w-3.5 flex-shrink-0 text-gray-400"}),r.jsx("span",{className:"truncate",children:t.audit_lead_name||t.audit_lead_email.split("@")[0]})]})]})]})})},PI=({id:t,title:e,plans:n,onCardClick:s})=>{const{setNodeRef:i,isOver:a}=Wy({id:t}),o=Pd(e),c=o.icon;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"md:hidden space-y-1.5",children:[r.jsxs("div",{className:`
                    bg-gradient-to-r ${o.headerGradient}
                    rounded-md px-2.5 py-1.5
                    shadow-sm
                    flex items-center justify-between
                `,children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(c,{className:"h-3 w-3 text-white"}),r.jsx("h3",{className:"font-semibold text-[11px] text-white leading-tight",children:e})]}),r.jsx("span",{className:`
                        ${o.dotColor} text-white text-[10px] font-bold
                        px-1.5 py-0.5 rounded-full min-w-[18px] text-center
                    `,children:n.length})]}),r.jsx("div",{ref:i,className:`
                        overflow-x-auto pb-1.5 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent
                        ${a?"ring-2 ring-offset-1 ring-indigo-300/60 bg-indigo-50/20":""}
                    `,style:{minHeight:"120px",touchAction:"manipulation"},children:r.jsx("div",{className:"flex gap-2 min-w-max",children:n.length===0?r.jsx("div",{className:"flex items-center justify-center w-full h-24 text-gray-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx(c,{className:"h-6 w-6 text-gray-300 mx-auto mb-1"}),r.jsx("p",{className:"text-[10px] font-medium",children:"No audits"})]})}):r.jsx(Bg,{items:n.map(u=>u.id),strategy:zg,children:r.jsx("div",{className:"flex gap-2",children:n.map(u=>r.jsx(qg,{plan:u,onClick:()=>s(u)},u.id))})})})})]}),r.jsxs("div",{ref:i,className:`
                    hidden md:flex
                    flex-shrink-0 md:flex-1 md:min-w-[320px] md:w-auto h-auto self-start
                    bg-gradient-to-b from-gray-50/40 to-white
                    rounded-xl p-4 flex flex-col
                    border border-gray-200/40
                    transition-all duration-200 ease-out
                    min-h-[600px]
                    ${a?"ring-2 ring-offset-2 ring-indigo-300/60 shadow-xl scale-[1.01] bg-gradient-to-b from-indigo-50/30 to-white":""}
                `,children:[r.jsxs("div",{className:`
                    bg-gradient-to-r ${o.headerGradient}
                    rounded-lg px-4 py-3 mb-4
                    shadow-sm backdrop-blur-sm
                    flex items-center justify-between
                    group
                    transition-all duration-300
                    pointer-events-none
                `,children:[r.jsxs("div",{className:"flex items-center gap-2.5",children:[r.jsx(c,{className:"h-4.5 w-4.5 text-white"}),r.jsx("h3",{className:"font-semibold text-base text-white",children:e})]}),r.jsx("span",{className:`
                        ${o.dotColor} text-white text-xs font-bold
                        px-2.5 py-1 rounded-full
                        min-w-[28px] text-center
                        shadow-sm
                        transition-all duration-200
                        ${n.length>0?"scale-110":"scale-100"}
                    `,children:n.length})]}),r.jsx("div",{className:"overflow-x-hidden pr-1 flex-1 relative",style:{minHeight:"100%"},children:n.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-gray-400",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-2",children:r.jsx(c,{className:"h-6 w-6 text-gray-300"})}),r.jsx("p",{className:"text-xs font-medium",children:"No audits"})]}):r.jsx(Bg,{items:n.map(u=>u.id),strategy:zg,children:n.map(u=>r.jsx(qg,{plan:u,onClick:()=>s(u)},u.id))})})]})]})},RI=({status:t,plans:e,isExpanded:n,onToggle:s,onCardClick:i,onLongPress:a,overId:o})=>{const{setNodeRef:c}=Wy({id:t}),u=Pd(t),f=u.icon;return r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[r.jsxs("button",{onClick:s,className:`
                    w-full flex items-center justify-between p-3
                    bg-gradient-to-r ${u.headerGradient}
                    transition-all duration-200
                `,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(f,{className:"h-4 w-4 text-white"}),r.jsx("h3",{className:"font-semibold text-sm text-white",children:t}),r.jsx(Ze,{variant:"default",className:"text-xs px-2 py-0.5 bg-white/20 text-white border-white/40",children:e.length})]}),r.jsx(Py,{className:`h-4 w-4 text-white transition-transform duration-200 ${n?"":"-rotate-90"}`})]}),n&&r.jsx("div",{ref:c,className:`
                        p-2 min-h-[120px] transition-colors duration-200
                        ${o===t?"bg-blue-50 ring-2 ring-inset ring-blue-300":"bg-gray-50"}
                    `,children:e.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-24 text-gray-400",children:[r.jsx(f,{className:"h-8 w-8 text-gray-300 mb-1"}),r.jsx("p",{className:"text-xs font-medium",children:"No audits"})]}):r.jsx(Bg,{items:e.map(h=>h.id),strategy:zg,children:e.map(h=>r.jsx(qg,{plan:h,onClick:()=>i(h),onLongPress:a},h.id))})})]})},TI=t=>{const{active:e,droppableContainers:n}=t,s=e.rect.current.translated;if(!s)return[];const i=s.width*s.height,a=n.map(o=>{const c=o.rect.current;if(!c)return null;const u=Math.max(s.left,c.left),f=Math.min(s.right,c.right),h=Math.max(s.top,c.top),p=Math.min(s.bottom,c.bottom);if(u>=f||h>=p)return null;const g=(f-u)*(p-h)/i;return g>=.5?{id:o.id,data:{droppableContainer:o,value:g}}:null}).filter(o=>o!==null);return a.sort((o,c)=>{var u,f;return(((u=c.data)==null?void 0:u.value)||0)-(((f=o.data)==null?void 0:f.value)||0)}),a.length===0?Z5(t):a},DI=({plans:t,onStatusChange:e,onView:n})=>{const[s,i]=wt.useState(null),[a,o]=wt.useState(null),[c,u]=wt.useState(sd.reduce((C,O)=>({...C,[O]:!0}),{})),[f,h]=wt.useState(null),[p,m]=wt.useState(!1),g=n9(o0(By,{activationConstraint:{distance:5}}),o0(d4),o0(Fy,{coordinateGetter:OI})),y=C=>{u(O=>({...O,[C]:!O[C]}))},b=C=>{typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50),h(C),m(!0)},v=C=>{f&&e(f.id,C),m(!1),h(null)},w=C=>{i(C.active.id),typeof window<"u"&&typeof document<"u"&&window.innerWidth<768&&(document.body.style.overflow="hidden")},N=C=>{C.over?o(C.over.id):o(null)},k=C=>{const{active:O,over:M}=C,B=(M==null?void 0:M.id)||a;B&&O.id!==B&&sd.includes(B)&&e(O.id,B),i(null),o(null),typeof window<"u"&&typeof document<"u"&&window.innerWidth<768&&(document.body.style.overflow="")},j=L.useMemo(()=>s?t.find(C=>C.id===s):null,[s,t]),S=j?Pd(j.status):null;return r.jsxs(Z9,{sensors:g,collisionDetection:TI,onDragStart:w,onDragOver:N,onDragEnd:k,children:[r.jsxs("div",{className:"md:hidden space-y-2 px-1",children:[r.jsx("div",{className:"flex justify-center mb-3",children:r.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-gray-900/5 backdrop-blur-sm rounded-full border border-white/20 shadow-sm",children:[r.jsx("svg",{className:"w-3 h-3 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),r.jsx("span",{className:"text-[10px] font-medium text-gray-600 tracking-wide uppercase",children:"Long press to change status"})]})}),sd.map(C=>{const O=t.filter(M=>M.status===C);return r.jsx(RI,{status:C,plans:O,isExpanded:c[C]??!0,onToggle:()=>y(C),onCardClick:n,onLongPress:b,overId:a},C)})]}),r.jsx("div",{className:"hidden md:flex gap-4 items-start overflow-x-auto pb-4 px-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:sd.map(C=>r.jsx(PI,{id:C,title:C,plans:t.filter(O=>O.status===C),onCardClick:n},C))}),r.jsx(gI,{dropAnimation:{duration:300,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)"},className:"hidden md:block",children:j&&S?r.jsxs("div",{className:`
                        bg-white rounded-lg shadow-2xl border-l-4 ${S.borderColor}
                        w-[320px] rotate-1 scale-105
                        border border-gray-200
                        relative
                    `,style:{willChange:"transform"},children:[r.jsx(Ze,{variant:"purple",className:"absolute top-0.5 right-0.5 text-[10px] px-2 py-1 leading-none font-bold",children:j.audit_year}),r.jsxs("div",{className:"p-3",children:[r.jsx("div",{className:"mb-2",children:r.jsx("h4",{className:"font-semibold text-sm text-gray-900 line-clamp-2 leading-tight pr-8",children:j.audit_name||j.audit_type})}),r.jsx("div",{className:`
                                text-xs font-medium mb-2.5 px-2 py-1 rounded-md inline-block
                                bg-gradient-to-r ${S.gradient} ${S.textColor}
                            `,children:j.department}),r.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-gray-500 pt-2 border-t border-gray-100",children:[r.jsx(Ed,{className:"h-3.5 w-3.5 flex-shrink-0 text-gray-400"}),r.jsx("span",{className:"truncate",children:j.audit_lead_name||j.audit_lead_email.split("@")[0]})]})]})]}):null}),p&&f&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"md:hidden fixed inset-0 bg-black/50 z-40 animate-in fade-in duration-200",onClick:()=>{m(!1),h(null)}}),r.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl shadow-2xl z-50 animate-in slide-in-from-bottom duration-300 select-none pb-safe",children:r.jsxs("div",{className:"p-4 pb-8",children:[r.jsx("div",{className:"w-10 h-1 bg-gray-200 rounded-full mx-auto mb-3"}),r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-0.5",children:"Change Status"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-1 px-4",children:f.audit_name||f.audit_type})]}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:sd.map(C=>{const O=Pd(C),M=O.icon,B=f.status===C,I=O.borderColor.split("-")[2],R=()=>{switch(I){case"blue":return B?"bg-blue-500 text-white shadow-blue-200":"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100";case"amber":return B?"bg-amber-500 text-white shadow-amber-200":"bg-amber-50 text-amber-700 border-amber-200 hover:bg-amber-100";case"orange":return B?"bg-orange-500 text-white shadow-orange-200":"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100";case"indigo":return B?"bg-indigo-500 text-white shadow-indigo-200":"bg-indigo-50 text-indigo-700 border-indigo-200 hover:bg-indigo-100";case"emerald":return B?"bg-emerald-500 text-white shadow-emerald-200":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100";default:return B?"bg-gray-800 text-white":"bg-gray-50 text-gray-700 border-gray-200"}};return r.jsxs("button",{onClick:()=>v(C),className:`
                                                relative flex flex-col items-center justify-center p-2 rounded-xl transition-all duration-200
                                                border ${B?"border-transparent scale-[1.02] shadow-lg ring-2 ring-offset-1 ring-transparent":"border"}
                                                ${R()}
                                            `,children:[r.jsx("div",{className:`
                                                mb-1.5 p-1.5 rounded-full
                                                ${B?"bg-white/20":"bg-white/60"}
                                            `,children:r.jsx(M,{className:"h-4 w-4"})}),r.jsx("span",{className:"text-[10px] font-bold text-center leading-tight",children:C}),B&&r.jsx("div",{className:"absolute -top-1 -right-1 bg-white text-green-600 rounded-full p-0.5 shadow-sm ring-1 ring-black/5",children:r.jsx(M5,{className:"h-3 w-3"})})]},C)})})]})})]})]})},II=({plans:t,onView:e,onCreate:n})=>{const[s,i]=L.useState("month"),[a,o]=L.useState(new Date),[c,u]=L.useState(null),[f,h]=L.useState(null),[p,m]=L.useState(!1),[g,y]=L.useState(new Date),b=L.useRef(null);L.useEffect(()=>{y(a)},[a]);const v={next:()=>{o(s==="week"?z5(a,1):s==="month"?Ry(a,1):B5(a,1))},prev:()=>{o(s==="week"?a8(a):s==="month"?i8(a):o8(a))}},w=()=>o(new Date),N=()=>{if(s==="week"){const X=Wa(a,{weekStartsOn:1}),ee=e0(a,{weekStartsOn:1});return{start:X,end:ee}}else if(s==="month"){const X=zw(a),ee=Tg(X),Y=Wa(X,{weekStartsOn:1}),U=e0(ee,{weekStartsOn:1});return{start:Y,end:U}}else{const X=W5(a),ee=HD(a);return{start:X,end:ee}}},{start:k,end:j}=N(),S=s==="year"?UD({start:k,end:j}):Fw({start:k,end:j}),C=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],O=X=>{s!=="year"&&(m(!0),u(Wi(X)),h(Wi(X)))},M=X=>{if(p&&c){const ee=Wi(X);ee<c?(u(ee),h(c)):h(ee)}},B=()=>{if(p&&c&&f&&n){const X=c<f?c:f,ee=c<f?f:c;Dw(ee,X)>=0&&n(ys(X,"yyyy-MM-dd"),ys(ee,"yyyy-MM-dd"))}m(!1),u(null),h(null)};L.useEffect(()=>{const X=()=>{p&&B()};return document.addEventListener("mouseup",X),()=>document.removeEventListener("mouseup",X)},[p,c,f,n]);const I=t,R=X=>I.filter(ee=>{if(!ee.start_date)return!1;const Y=new Date(ee.start_date);let U;if(ee.end_date)U=new Date(ee.end_date);else if(ee.audit_duration_weeks)U=new Date(Y.getTime()+ee.audit_duration_weeks*7*24*60*60*1e3);else return ga(X,Y);return U7(X,{start:Y,end:U})}),P=X=>{if(!c||!f)return!1;const ee=Wi(X),Y=c<f?c:f,U=c<f?f:c;return ee>=Y&&ee<=U},q=X=>{if(!c||!f)return null;const ee=Wi(X),Y=c<f?c:f,U=c<f?f:c;if(ee<Y||ee>U)return null;const T=ga(ee,Y),W=ga(ee,U);return{isStart:T,isEnd:W,isMiddle:!T&&!W}},H=()=>{if(!c||!f)return null;const X=c<f?c:f,ee=c<f?f:c;return Dw(ee,X)+1},G=["Planned","Fieldwork","Pre Closing Meeting","Closing Meeting","Completed"],ne=X=>{switch(X){case"Planned":return"bg-blue-100 text-blue-700 border-blue-200";case"Fieldwork":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"Pre Closing Meeting":return"bg-orange-100 text-orange-700 border-orange-200";case"Closing Meeting":return"bg-purple-100 text-purple-700 border-purple-200";case"Completed":return"bg-green-100 text-green-700 border-green-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return r.jsxs("div",{className:"flex flex-col h-full bg-white rounded-lg shadow-sm border border-gray-200 relative",style:{minHeight:0},children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6 px-3 md:px-0",children:[r.jsxs("div",{className:"flex items-center justify-between md:justify-start md:gap-4 w-full md:w-auto",children:[r.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-900 md:ml-1",children:ys(a,"MMMM yyyy")}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:v.prev,className:"p-1.5 rounded-full hover:bg-gray-100 text-gray-600 transition-colors active:scale-95",children:r.jsx(aD,{className:"h-5 w-5"})}),r.jsx("button",{onClick:v.next,className:"p-1.5 rounded-full hover:bg-gray-100 text-gray-600 transition-colors active:scale-95",children:r.jsx(Mw,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[r.jsx("div",{className:"flex items-center gap-2.5",children:G.map(X=>{const U=ne(X).split(" ").find(T=>T.startsWith("bg-"))||"bg-gray-100";return r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:`w-3.5 h-3.5 rounded ${U} border-2 border-gray-400 shadow-sm`}),r.jsx("span",{className:"text-[10px] font-medium text-gray-700",children:X})]},X)})}),r.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2"}),r.jsx("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:["week","month","year"].map(X=>r.jsx("button",{onClick:()=>i(X),className:`
                                    px-4 py-1.5 rounded-md text-sm font-medium transition-all
                                    ${s===X?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-900"}
                                `,children:X.charAt(0).toUpperCase()+X.slice(1)},X))}),r.jsx(Be,{variant:"outline",size:"sm",onClick:w,children:"Today"})]})]}),s==="year"?r.jsx("div",{className:"grid grid-cols-4 gap-4 p-4 flex-1 overflow-y-auto",children:S.map(X=>{const ee=zw(X),Y=Tg(ee),U=Wa(ee,{weekStartsOn:1}),T=e0(Y,{weekStartsOn:1}),W=Fw({start:U,end:T});return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 bg-white",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2 text-center",children:ys(X,"MMMM yyyy")}),r.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[C.map(z=>r.jsx("div",{className:"text-[9px] text-center text-gray-500 font-medium py-1",children:z[0]},z)),W.map(z=>{const Q=ga(z,new Date),Z=n0(z,X),V=R(z);return r.jsxs("div",{className:`
                                                    text-[10px] p-0.5 min-h-[20px] rounded
                                                    ${Z?Q?"bg-indigo-100 text-indigo-700 font-semibold":"text-gray-600":"text-gray-300"}
                                                    ${P(z)?"bg-indigo-200":""}
                                                `,children:[r.jsx("div",{className:"text-center",children:ys(z,"d")}),V.length>0&&r.jsx("div",{className:"w-full h-1 bg-indigo-400 rounded mt-0.5"})]},z.toString())})]})]},X.toString())})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:grid grid-cols-7 border-b border-gray-200 bg-gray-50",children:C.map(X=>r.jsx("div",{className:"py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:X},X))}),r.jsxs("div",{ref:b,className:"hidden md:grid grid-cols-7 flex-1 overflow-y-auto overflow-x-hidden relative border border-gray-300",style:{minHeight:0,gridAutoRows:"minmax(120px, 1fr)"},children:[p&&c&&f&&r.jsxs("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 z-20 bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-4 py-2 rounded-full shadow-xl text-sm font-semibold backdrop-blur-sm",children:[H()," day",H()!==1?"s":""," selected"]}),S.map(X=>{const ee=R(X),Y=ga(X,new Date),U=s==="month"?n0(X,a):!0,T=q(X),W=!!T;return r.jsxs("div",{onMouseDown:()=>O(X),onMouseEnter:()=>M(X),className:`
                                        min-h-[120px] border border-gray-300 p-1.5 transition-all duration-200 relative select-none
                                        ${U?"bg-white":"bg-gray-50/30 text-gray-400"}
                                        ${W?"bg-gradient-to-br from-indigo-50 to-purple-50":p?"hover:bg-indigo-50/50":"hover:bg-gray-50"}
                                        ${p?"cursor-crosshair":"cursor-pointer"}
                                        overflow-hidden flex flex-col
                                        z-0
                                    `,children:[T&&r.jsx("div",{className:`
                                            absolute inset-0 pointer-events-none
                                            ${T.isStart?"border-l-4 border-indigo-500 rounded-l":""}
                                            ${T.isEnd?"border-r-4 border-indigo-500 rounded-r":""}
                                            ${T.isMiddle?"border-y-2 border-indigo-300":""}
                                        `}),r.jsxs("div",{className:"flex justify-between items-start mb-1 relative z-10 flex-shrink-0",children:[r.jsx("span",{className:`
                                            text-sm font-medium w-7 h-7 flex items-center justify-center rounded-full transition-all select-none
                                            ${Y&&!W?"bg-indigo-600 text-white":""}
                                            ${W?T!=null&&T.isStart||T!=null&&T.isEnd?"bg-indigo-500 text-white ring-2 ring-indigo-300 ring-offset-1":"bg-indigo-100 text-indigo-700":""}
                                        `,children:ys(X,"d")}),ee.length>0&&r.jsx("span",{className:"text-[9px] font-medium text-gray-500 bg-gray-100 px-1.5 py-0.5 rounded-full",children:ee.length})]}),r.jsxs("div",{className:"relative flex-1 min-h-0 overflow-hidden flex-shrink",children:[r.jsx("div",{className:"flex flex-wrap gap-1 overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100 relative z-10",style:{maxHeight:"100%"},ref:z=>{if(z){const Q=()=>{var fe;const V=z.scrollHeight>z.clientHeight,ie=z.scrollHeight-z.scrollTop<=z.clientHeight+1,de=(fe=z.parentElement)==null?void 0:fe.querySelector(".scroll-indicator");de&&(de.style.opacity=V&&!ie?"1":"0")};z.addEventListener("scroll",Q),setTimeout(Q,0),new ResizeObserver(Q).observe(z)}},children:ee.map(z=>{const Z=ne(z.status).split(" "),V=Z.find(fe=>fe.startsWith("bg-"))||"bg-gray-100",ie=Z.find(fe=>fe.startsWith("text-"))||"text-gray-700",de=Z.find(fe=>fe.startsWith("border-"))||"border-gray-200";return r.jsxs("div",{onClick:fe=>{fe.stopPropagation(),e(z)},className:`
                                                        text-[9px] px-1 py-0.5 rounded border-l-3 border cursor-pointer
                                                        ${V} ${ie} ${de}
                                                        hover:shadow-md hover:scale-[1.01] transition-all
                                                        group relative
                                                        shadow-sm
                                                        flex-shrink-0
                                                        min-w-[120px] max-w-[48%]
                                                        overflow-visible
                                                    `,style:{borderLeftWidth:"3px",borderTopWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"1px"},title:`${z.audit_name||z.audit_type} - ${z.audit_lead_name||z.audit_lead_email.split("@")[0]} - ${z.status}`,children:[r.jsx("div",{className:"absolute -top-1 -right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-[9999] pointer-events-none",children:r.jsx("span",{className:`
                                                            text-[8px] font-semibold px-1.5 py-0.5 rounded-full
                                                            ${V} ${ie} border ${de}
                                                            shadow-lg whitespace-nowrap
                                                            block
                                                            bg-white
                                                        `,children:z.status})}),r.jsxs("div",{className:"flex items-center justify-between gap-1",children:[r.jsx("div",{className:`font-semibold text-[10px] truncate flex-1 min-w-0 ${ie}`,children:z.audit_name||z.audit_type}),r.jsxs("div",{className:`flex items-center gap-0.5 text-[8px] ${ie} opacity-80 flex-shrink-0`,children:[r.jsx(Ed,{className:"h-2 w-2 flex-shrink-0 opacity-70"}),r.jsx("span",{className:"truncate max-w-[35px]",children:z.audit_lead_name||z.audit_lead_email.split("@")[0]})]})]})]},z.id)})}),r.jsx("div",{className:"scroll-indicator absolute bottom-0 left-0 right-0 h-4 bg-gradient-to-t from-white to-transparent pointer-events-none z-20 opacity-0 transition-opacity duration-200"})]})]},X.toString())})]}),r.jsxs("div",{className:"md:hidden flex flex-col h-full bg-white",children:[r.jsx("div",{className:"grid grid-cols-7 border-b border-gray-100 bg-gray-50",children:C.map(X=>r.jsx("div",{className:"py-2 text-center text-[10px] font-semibold text-gray-400 uppercase",children:X[0]},X))}),r.jsx("div",{className:"grid grid-cols-7 border-gray-200",children:S.map(X=>{const ee=R(X),Y=ga(X,new Date),U=n0(X,a),T=ga(X,g);return r.jsxs("div",{onClick:()=>y(X),className:`
                                            aspect-square border-b border-r border-gray-50 relative flex flex-col items-center justify-center cursor-pointer transition-colors
                                            ${U?"bg-white text-gray-700":"bg-gray-50/30 text-gray-300"}
                                            ${T?"bg-indigo-50 ring-inset ring-2 ring-indigo-500 z-10":""}
                                        `,children:[r.jsx("span",{className:`
                                            text-xs font-medium w-6 h-6 flex items-center justify-center rounded-full mb-0.5
                                            ${Y?"bg-indigo-600 text-white":""}
                                            ${T&&!Y?"text-indigo-700 font-bold":""}
                                        `,children:ys(X,"d")}),r.jsxs("div",{className:"flex gap-0.5 h-1.5 px-1 justify-center w-full",children:[ee.slice(0,3).map((W,z)=>{const Z=ne(W.status).split(" ").find(V=>V.startsWith("bg-"))||"bg-gray-400";return r.jsx("div",{className:`w-1 h-1 rounded-full ${Z}`},z)}),ee.length>3&&r.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-300"})]})]},X.toString())})}),r.jsxs("div",{className:"flex-1 overflow-y-auto bg-white px-3 pt-3 pb-4",children:[r.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[r.jsx("h3",{className:"text-xs font-bold text-gray-900",children:ys(g,"EEEE, d MMMM")}),ga(g,new Date)&&r.jsx("span",{className:"text-[9px] font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded-full",children:"TODAY"})]}),R(g).length===0?r.jsx("div",{className:"flex flex-col items-center justify-center h-24 text-gray-400",children:r.jsx("p",{className:"text-[10px] font-medium",children:"No audits planned"})}):r.jsx("div",{className:"space-y-2",children:R(g).map(X=>{const Y=ne(X.status).split(" "),U=Y.find(W=>W.startsWith("bg-"))||"bg-gray-100",T=Y.find(W=>W.startsWith("text-"))||"text-gray-700";return r.jsxs("div",{onClick:()=>e(X),className:"group flex items-center gap-2 p-2 active:bg-gray-50 transition-colors cursor-pointer",children:[r.jsx("div",{className:`flex-shrink-0 w-1.5 h-8 rounded-full ${U.replace("bg-","bg-").replace("100","500").replace("200","500")}`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-1.5 mb-0.5",children:[r.jsx("h4",{className:"text-[11px] font-semibold text-gray-900 leading-tight line-clamp-1",children:X.audit_name||X.audit_type}),r.jsx("span",{className:`flex-shrink-0 text-[8px] font-bold px-1.5 py-0.5 rounded ${U} ${T}`,children:X.status})]}),r.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500",children:[r.jsx(Ed,{className:"h-2.5 w-2.5 text-gray-400 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:X.audit_lead_name||X.audit_lead_email.split("@")[0]})]})]}),r.jsx(Mw,{className:"h-3 w-3 text-gray-300 group-active:text-gray-400 transition-colors flex-shrink-0"})]},X.id)})})]})]})]})]})},FI=({plans:t,selectedLeads:e,onLeadsChange:n})=>{const[s,i]=L.useState(new Set(["all"])),a=e||s,o=L.useMemo(()=>{const f=new Set;return t.forEach(h=>{const p=h.audit_lead_name;p&&p.trim()&&f.add(p.trim())}),Array.from(f).sort()},[t]),c=f=>{if(n){const h=new Set(a);f==="all"?h.has("all")?(h.clear(),o.length>0&&o[0]&&h.add(o[0])):(h.clear(),h.add("all")):(h.delete("all"),h.has(f)?(h.delete(f),h.size===0&&h.add("all")):(h.add(f),h.size===o.length&&(h.clear(),h.add("all")))),n(h)}else i(h=>{const p=new Set(h);return f==="all"?p.has("all")?(p.clear(),o.length>0&&o[0]&&p.add(o[0])):(p.clear(),p.add("all")):(p.delete("all"),p.has(f)?(p.delete(f),p.size===0&&p.add("all")):(p.add(f),p.size===o.length&&(p.clear(),p.add("all")))),p})},u=f=>a.has("all")?!0:a.has(f);return r.jsxs("div",{className:"flex items-center gap-1.5 bg-white/95 backdrop-blur-sm px-1.5 py-1 rounded-lg border border-gray-200 shadow-sm overflow-x-auto max-w-[200px] md:max-w-none no-scrollbar",children:[r.jsx("span",{className:"text-[10px] text-gray-400 font-medium whitespace-nowrap mr-0.5",children:"Lead:"}),r.jsx("button",{onClick:()=>c("all"),className:`
                    flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-[9px] font-bold transition-all border
                    ${a.has("all")?"bg-indigo-600 text-white border-indigo-600 ring-1 ring-indigo-200":"bg-gray-50 text-gray-500 border-gray-200 hover:bg-gray-100"}
                `,title:"All Leads",children:"ALL"}),o.map(f=>{const h=f.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2),p=u(f)&&!a.has("all");return r.jsx("button",{onClick:()=>c(f),className:`
                            flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-[9px] font-bold transition-all border
                            ${p?"bg-indigo-100 text-indigo-700 border-indigo-200 ring-1 ring-indigo-200":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}
                        `,title:f,children:h},f)})]})},zI=["Technology Audit","Process Audit","Financial Audit"],BI=["Critical Deficiency","Significant Improvement","Moderate Improvement Potential","Limited Improvement Potential","Good"],qI=({initialData:t,onSubmit:e,onCancel:n,isOpen:s})=>{var R;const[i,a]=L.useState({audit_year:new Date().getFullYear(),audit_type:"",audit_name:"",audit_lead_name:"",audit_lead_email:"",business_unit:"",department:"",process:"",start_date:"",end_date:"",audit_duration_weeks:void 0,report_release_date:"",audit_report_rating:"",status:"Planned"}),[o,c]=L.useState([]),[u,f]=L.useState(!0),[h,p]=L.useState({}),[m,g]=L.useState([]),[y,b]=L.useState([]),[v,w]=L.useState([]),[N,k]=L.useState(!1),[j,S]=L.useState(!1),[C,O]=L.useState(!1);if(L.useEffect(()=>{s&&(async()=>{try{f(!0);const q=await jn.get("/api/users/by-role?roles=admin,team_manager");c(q.data.data||[])}catch(q){console.error("Error fetching users:",q),c([])}finally{f(!1)}})()},[s]),L.useEffect(()=>{s&&(async()=>{try{k(!0);const q=await Ot.getDropdownOptionsFull("business_unit");g(q||[])}catch(q){console.error("Error fetching business units:",q),g([])}finally{k(!1)}})()},[s]),L.useEffect(()=>{s&&(async()=>{try{S(!0);const q=await Ot.getDropdownOptionsFull("department");b(q||[])}catch(q){console.error("Error fetching departments:",q),b([])}finally{S(!1)}})()},[s]),L.useEffect(()=>{s&&(async()=>{if(!i.department){w([]);return}try{O(!0);const q=await Ot.getDropdownOptionsByParent("process",i.department);w(q||[])}catch(q){console.error("Error fetching processes:",q),w([])}finally{O(!1)}})()},[i.department,s]),L.useEffect(()=>{if(i.start_date&&i.end_date){const P=new Date(i.start_date),q=new Date(i.end_date);if(P<=q){const H=Math.abs(q.getTime()-P.getTime()),G=Math.ceil(H/(1e3*60*60*24)),ne=Math.ceil(G/7);a(X=>({...X,audit_duration_weeks:ne}))}}},[i.start_date,i.end_date]),L.useEffect(()=>{s&&(t&&t.id?a({...t,business_unit:t.business_unit||"",department:t.department||"",process:t.process||"",report_release_date:t.report_release_date?t.report_release_date.split("T")[0]:"",start_date:t.start_date?t.start_date.split("T")[0]:"",end_date:t.end_date?t.end_date.split("T")[0]:""}):a(t?P=>({...P,audit_year:t.audit_year||P.audit_year||new Date().getFullYear(),start_date:t.start_date?t.start_date.split("T")[0]:P.start_date||"",end_date:t.end_date?t.end_date.split("T")[0]:P.end_date||""}):{audit_year:new Date().getFullYear(),audit_type:"",audit_name:"",audit_lead_name:"",audit_lead_email:"",business_unit:"",department:"",process:"",start_date:"",end_date:"",audit_duration_weeks:void 0,report_release_date:"",audit_report_rating:"",status:"Planned"}))},[t==null?void 0:t.id,t==null?void 0:t.start_date,t==null?void 0:t.end_date,s]),!s)return null;const M=(P,q)=>{a(H=>{const G={...H,[P]:q};if(P==="department"&&(G.process=""),P==="audit_lead_email"){const ne=o.find(X=>X.email===q);ne&&(G.audit_lead_name=ne.name,G.audit_lead_email=ne.email)}return G}),h[P]&&p(H=>{const G={...H};return delete G[P],G})},B=()=>{const P={};if(i.audit_year||(P.audit_year="Year is required"),i.audit_type||(P.audit_type="Type is required"),i.audit_name||(P.audit_name="Audit name is required"),i.audit_lead_email||(P.audit_lead_email="Audit lead is required"),i.business_unit||(P.business_unit="Business Unit is required"),i.department||(P.department="Department is required"),i.process||(P.process="Process is required"),i.start_date&&i.end_date){const q=new Date(i.start_date),H=new Date(i.end_date);q>H&&(P.end_date="End date must be after start date")}return p(P),Object.keys(P).length===0},I=P=>{if(P.preventDefault(),B()){const q={};for(const[H,G]of Object.entries(i))G!==void 0&&(G===""&&["report_release_date","audit_report_rating"].includes(H)||H==="audit_duration_weeks"&&G===null||(q[H]=G));e(q)}};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-t-xl",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:t!=null&&t.id?"Edit Audit Detail":"Create Audit"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Fill in the details below to ",t!=null&&t.id?"update":"create"," an audit."]})]}),r.jsx("button",{onClick:n,className:"p-2 hover:bg-white/50 rounded-full transition-colors",children:r.jsx(P5,{className:"h-5 w-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:I,className:"p-4 space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.jsx("div",{className:"space-y-1",children:r.jsx(Gt,{label:"Audit Year",required:!0,value:((R=i.audit_year)==null?void 0:R.toString())||new Date().getFullYear().toString(),onChange:P=>M("audit_year",parseInt(P.target.value)),options:[2023,2024,2025,2026,2027].map(P=>({value:P,label:P.toString()})),error:h.audit_year})}),r.jsx("div",{className:"space-y-1",children:r.jsx(Gt,{label:"Audit Type",required:!0,value:i.audit_type,onChange:P=>M("audit_type",P.target.value),options:[{value:"",label:"Select Type",disabled:!0},...zI.map(P=>({value:P,label:P}))],error:h.audit_type})}),r.jsx("div",{className:"space-y-1",children:r.jsx(Gt,{label:"Audit Lead",required:!0,value:i.audit_lead_email,onChange:P=>M("audit_lead_email",P.target.value),options:[{value:"",label:u?"Loading...":"Select Audit Lead",disabled:!0},...o.map(P=>({value:P.email,label:`${P.name} (${P.role_name})`}))],error:h.audit_lead_email,disabled:u})}),r.jsx("div",{className:"space-y-1 md:col-span-3",children:r.jsx(Tn,{label:"Audit Name",required:!0,type:"text",value:i.audit_name,onChange:P=>M("audit_name",P.target.value),placeholder:"e.g. Q1 Technology Security Audit",error:h.audit_name})}),r.jsx("div",{className:"space-y-1",children:r.jsx(Gt,{label:"Business Unit",required:!0,value:i.business_unit||"",onChange:P=>M("business_unit",P.target.value),disabled:N,options:[{value:"",label:N?"Loading...":"Select Business Unit",disabled:!0},...m.filter(P=>P.is_active!==!1).sort((P,q)=>(P.display_order||0)-(q.display_order||0)).map(P=>({value:P.option_value,label:P.option_value}))],error:h.business_unit})}),r.jsx("div",{className:"space-y-1",children:r.jsx(Gt,{label:"Department",required:!0,value:i.department||"",onChange:P=>M("department",P.target.value),disabled:j,options:[{value:"",label:j?"Loading...":"Select Department",disabled:!0},...y.filter(P=>P.is_active!==!1).sort((P,q)=>(P.display_order||0)-(q.display_order||0)).map(P=>({value:P.option_value,label:P.option_value}))],error:h.department})}),r.jsx("div",{className:"space-y-1",children:r.jsx(Gt,{label:"Process",required:!0,value:i.process||"",onChange:P=>M("process",P.target.value),disabled:!i.department||C,options:[{value:"",label:C?"Loading...":"Select Process",disabled:!0},...v.filter(P=>P.is_active!==!1).sort((P,q)=>(P.display_order||0)-(q.display_order||0)).map(P=>({value:P.option_value,label:P.option_value}))],error:h.process})}),r.jsx("div",{className:"space-y-1",children:r.jsx(Tn,{label:"Start Date",type:"date",value:i.start_date,onChange:P=>M("start_date",P.target.value),error:h.start_date})}),r.jsx("div",{className:"space-y-1",children:r.jsx(Tn,{label:"End Date",type:"date",value:i.end_date,onChange:P=>M("end_date",P.target.value),error:h.end_date})}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(Tn,{label:"Duration (Weeks)",type:"number",min:"1",value:i.audit_duration_weeks||"",onChange:P=>M("audit_duration_weeks",parseInt(P.target.value)),placeholder:"Auto-calculated",disabled:!!(i.start_date&&i.end_date)}),i.start_date&&i.end_date&&r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Auto-calculated from dates"})]}),r.jsx("div",{className:"space-y-1",children:r.jsx(Tn,{label:"Report Release Date",type:"date",value:i.report_release_date,onChange:P=>M("report_release_date",P.target.value)})}),r.jsx("div",{className:"space-y-1",children:r.jsx(Gt,{label:"Report Rating",value:i.audit_report_rating,onChange:P=>M("audit_report_rating",P.target.value),options:[{value:"",label:"Select Rating",disabled:!0},...BI.map(P=>({value:P,label:P}))]})})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-3 border-t border-gray-100 mt-3",children:[r.jsx(Be,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),r.jsx(Be,{type:"submit",variant:"primary",children:t!=null&&t.id?"Save Changes":"Create Audit"})]})]})]})})},WI=()=>{const[t,e]=L.useState("progress"),[n,s]=L.useState(new Date().getFullYear()),[i,a]=L.useState(!1),[o,c]=L.useState(void 0),[u,f]=L.useState(void 0),[h,p]=L.useState(null),[m,g]=L.useState(void 0),[y,b]=L.useState(new Set(["all"])),[v,w]=L.useState(!1),[N,k]=L.useState(!1),[j,S]=L.useState(null),[C,O]=L.useState([]),[M,B]=L.useState([]),[I,R]=L.useState(!1),P=L.useRef(""),q=L.useRef(null),{data:H=[],isLoading:G,error:ne}=My(n.toString());L.useEffect(()=>{const de=JSON.stringify(H.map(fe=>({id:fe.id,status:fe.status})));de!==P.current&&(P.current=de,p(H))},[H]),L.useEffect(()=>{p(null),P.current=""},[n]),L.useEffect(()=>{const de=fe=>{q.current&&!q.current.contains(fe.target)&&w(!1)};if(v)return document.addEventListener("mousedown",de),()=>{document.removeEventListener("mousedown",de)}},[v]),L.useEffect(()=>{const de=fe=>{fe.key==="Escape"&&(i&&(a(!1),c(void 0),g(void 0)),u&&f(void 0))};return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[i,u]);const X=YT(),ee=KT(),Y=GT(),U=async de=>{try{const fe=await X.mutateAsync(de);p(ve=>ve?[...ve,fe]:[fe]),a(!1)}catch(fe){console.error("Failed to create plan:",fe)}},T=async de=>{if(o){p(fe=>fe?fe.map(ve=>ve.id===o.id?{...ve,...de}:ve):null),u&&u.id===o.id&&f({...u,...de});try{await ee.mutateAsync({id:o.id,updates:de}),c(void 0),a(!1)}catch(fe){if(console.error("Failed to update plan:",fe),p(H),u&&u.id===o.id){const ve=H.find(He=>He.id===o.id);ve&&f(ve)}}}},W=async(de,fe)=>{p(ve=>ve?ve.map(He=>He.id===de?{...He,status:fe}:He):null);try{await Y.mutateAsync({id:de,status:fe})}catch(ve){console.error("Failed to update status:",ve),p(H)}},Q=L.useMemo(()=>{const de=h||H;return y.has("all")?de:de.filter(fe=>{const ve=fe.audit_lead_name;return ve&&ve.trim()&&y.has(ve.trim())})},[h,H,y]),Z=de=>{s(de),w(!1)},[V,ie]=L.useState([]);return L.useEffect(()=>{(async()=>{try{const ve=(await Ot.getDropdownOptions("audit_year")).map(He=>parseInt(He)).filter(He=>!isNaN(He)).sort((He,$e)=>$e-He);ie(ve.length>0?ve:[new Date().getFullYear()])}catch(fe){console.error("Failed to fetch years:",fe),ie([new Date().getFullYear()])}})()},[]),r.jsxs("div",{className:"p-4 space-y-4 h-[calc(100vh-80px)] flex flex-col",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-base md:text-[16px] font-bold text-gray-900 leading-tight",children:"Annual Audit Plan"}),r.jsx("p",{className:"text-[10px] md:text-base text-gray-500",children:"Manage and track audit plans"})]}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[r.jsxs("div",{className:"relative hidden md:block",ref:q,children:[r.jsxs("button",{onClick:()=>w(!v),className:"flex items-center gap-1 md:gap-1.5 px-1.5 md:px-3 py-0.5 md:py-1.5 bg-white border border-gray-300 rounded-md md:rounded-lg hover:border-indigo-400 hover:bg-indigo-50/30 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1 shadow-sm h-5 md:h-auto",children:[r.jsx("span",{className:"text-[10px] md:text-sm font-semibold text-gray-900",children:n}),r.jsx(Py,{className:`h-2.5 w-2.5 md:h-3.5 md:w-3.5 text-gray-500 transition-transform duration-200 ${v?"rotate-180":""}`})]}),v&&V.length>0&&r.jsx("div",{className:"absolute top-full left-0 mt-1 w-20 md:w-28 bg-white border border-gray-200 rounded-lg shadow-lg z-50 overflow-hidden",children:V.map(de=>r.jsx("button",{onClick:()=>Z(de),className:`
                      w-full px-2 py-1 md:px-3 md:py-2 text-left text-[10px] md:text-sm transition-colors
                      ${n===de?"bg-indigo-50 text-indigo-700 font-semibold":"text-gray-700 hover:bg-gray-50"}
                    `,children:de},de))})]}),!1,r.jsxs(Be,{onClick:()=>{c(void 0),a(!0)},className:"text-[10px] md:text-xs p-0 md:px-3 md:py-1.5 w-6 h-6 md:w-auto md:h-8 rounded-md md:rounded-lg flex items-center justify-center min-w-[24px]",children:[r.jsx(ND,{className:"h-4 w-4 md:h-3.5 md:w-3.5 md:mr-1 flex-shrink-0"}),r.jsx("span",{className:"hidden md:inline",children:"New Audit"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsxs("div",{className:"flex items-center space-x-0.5 md:space-x-1 bg-gray-100 p-0.5 md:p-1 rounded-lg w-fit",children:[r.jsxs("button",{onClick:()=>e("progress"),className:`p-1.5 md:p-2 rounded-md flex items-center gap-1 md:gap-2 text-xs md:text-sm font-medium transition-colors ${t==="progress"?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[r.jsx(wD,{className:"h-3 w-3 md:h-4 md:w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Progress"})]}),r.jsxs("button",{onClick:()=>e("kanban"),className:`p-1.5 md:p-2 rounded-md flex items-center gap-1 md:gap-2 text-xs md:text-sm font-medium transition-colors ${t==="kanban"?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[r.jsx(vD,{className:"h-3 w-3 md:h-4 md:w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Kanban"})]}),r.jsxs("button",{onClick:()=>e("calendar"),className:`p-1.5 md:p-2 rounded-md flex items-center gap-1 md:gap-2 text-xs md:text-sm font-medium transition-colors ${t==="calendar"?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[r.jsx(O5,{className:"h-3 w-3 md:h-4 md:w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Calendar"})]})]}),(t==="calendar"||t==="progress")&&r.jsx(FI,{plans:h||H,selectedLeads:y,onLeadsChange:b})]}),r.jsx("div",{className:`flex-1 ${t==="kanban"?"md:overflow-y-auto":"md:overflow-hidden"}`,children:G?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):ne?r.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg",children:"Error loading audit plans. Please try again."}):r.jsxs(r.Fragment,{children:[t==="progress"&&r.jsx(E5,{year:n,plans:Q,onView:f,onStatusChange:W}),t==="kanban"&&r.jsx(DI,{plans:Q,onStatusChange:W,onView:f}),t==="calendar"&&r.jsx(II,{plans:Q,onView:f,onCreate:(de,fe)=>{c(void 0),g({startDate:de,endDate:fe}),a(!0)}})]})}),!1,r.jsx(qI,{isOpen:i,onCancel:()=>{a(!1),c(void 0),g(void 0)},onSubmit:o?T:U,initialData:o||(m?{audit_year:n,start_date:m.startDate,end_date:m.endDate}:{audit_year:n})}),u&&r.jsx(K5,{plan:u,onClose:()=>f(void 0),onEdit:de=>{f(void 0),c(de),a(!0)}})]})};var u0,cj;function UI(){if(cj)return u0;cj=1;function t(){this.__data__=[],this.size=0}return u0=t,u0}var f0,dj;function N4(){if(dj)return f0;dj=1;function t(e,n){return e===n||e!==e&&n!==n}return f0=t,f0}var h0,uj;function Gh(){if(uj)return h0;uj=1;var t=N4();function e(n,s){for(var i=n.length;i--;)if(t(n[i][0],s))return i;return-1}return h0=e,h0}var p0,fj;function HI(){if(fj)return p0;fj=1;var t=Gh(),e=Array.prototype,n=e.splice;function s(i){var a=this.__data__,o=t(a,i);if(o<0)return!1;var c=a.length-1;return o==c?a.pop():n.call(a,o,1),--this.size,!0}return p0=s,p0}var m0,hj;function $I(){if(hj)return m0;hj=1;var t=Gh();function e(n){var s=this.__data__,i=t(s,n);return i<0?void 0:s[i][1]}return m0=e,m0}var x0,pj;function VI(){if(pj)return x0;pj=1;var t=Gh();function e(n){return t(this.__data__,n)>-1}return x0=e,x0}var g0,mj;function YI(){if(mj)return g0;mj=1;var t=Gh();function e(n,s){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,s])):i[a][1]=s,this}return g0=e,g0}var y0,xj;function Xh(){if(xj)return y0;xj=1;var t=UI(),e=HI(),n=$I(),s=VI(),i=YI();function a(o){var c=-1,u=o==null?0:o.length;for(this.clear();++c<u;){var f=o[c];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=s,a.prototype.set=i,y0=a,y0}var v0,gj;function KI(){if(gj)return v0;gj=1;var t=Xh();function e(){this.__data__=new t,this.size=0}return v0=e,v0}var b0,yj;function GI(){if(yj)return b0;yj=1;function t(e){var n=this.__data__,s=n.delete(e);return this.size=n.size,s}return b0=t,b0}var w0,vj;function XI(){if(vj)return w0;vj=1;function t(e){return this.__data__.get(e)}return w0=t,w0}var j0,bj;function QI(){if(bj)return j0;bj=1;function t(e){return this.__data__.has(e)}return j0=t,j0}var N0,wj;function _4(){if(wj)return N0;wj=1;var t=typeof df=="object"&&df&&df.Object===Object&&df;return N0=t,N0}var _0,jj;function Qi(){if(jj)return _0;jj=1;var t=_4(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return _0=n,_0}var k0,Nj;function Uy(){if(Nj)return k0;Nj=1;var t=Qi(),e=t.Symbol;return k0=e,k0}var S0,_j;function JI(){if(_j)return S0;_j=1;var t=Uy(),e=Object.prototype,n=e.hasOwnProperty,s=e.toString,i=t?t.toStringTag:void 0;function a(o){var c=n.call(o,i),u=o[i];try{o[i]=void 0;var f=!0}catch{}var h=s.call(o);return f&&(c?o[i]=u:delete o[i]),h}return S0=a,S0}var C0,kj;function ZI(){if(kj)return C0;kj=1;var t=Object.prototype,e=t.toString;function n(s){return e.call(s)}return C0=n,C0}var A0,Sj;function Qh(){if(Sj)return A0;Sj=1;var t=Uy(),e=JI(),n=ZI(),s="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function o(c){return c==null?c===void 0?i:s:a&&a in Object(c)?e(c):n(c)}return A0=o,A0}var E0,Cj;function k4(){if(Cj)return E0;Cj=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return E0=t,E0}var L0,Aj;function S4(){if(Aj)return L0;Aj=1;var t=Qh(),e=k4(),n="[object AsyncFunction]",s="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(c){if(!e(c))return!1;var u=t(c);return u==s||u==i||u==n||u==a}return L0=o,L0}var O0,Ej;function eF(){if(Ej)return O0;Ej=1;var t=Qi(),e=t["__core-js_shared__"];return O0=e,O0}var M0,Lj;function tF(){if(Lj)return M0;Lj=1;var t=eF(),e=(function(){var s=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})();function n(s){return!!e&&e in s}return M0=n,M0}var P0,Oj;function C4(){if(Oj)return P0;Oj=1;var t=Function.prototype,e=t.toString;function n(s){if(s!=null){try{return e.call(s)}catch{}try{return s+""}catch{}}return""}return P0=n,P0}var R0,Mj;function nF(){if(Mj)return R0;Mj=1;var t=S4(),e=tF(),n=k4(),s=C4(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,u=o.toString,f=c.hasOwnProperty,h=RegExp("^"+u.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!n(m)||e(m))return!1;var g=t(m)?h:a;return g.test(s(m))}return R0=p,R0}var T0,Pj;function rF(){if(Pj)return T0;Pj=1;function t(e,n){return e==null?void 0:e[n]}return T0=t,T0}var D0,Rj;function mc(){if(Rj)return D0;Rj=1;var t=nF(),e=rF();function n(s,i){var a=e(s,i);return t(a)?a:void 0}return D0=n,D0}var I0,Tj;function Hy(){if(Tj)return I0;Tj=1;var t=mc(),e=Qi(),n=t(e,"Map");return I0=n,I0}var F0,Dj;function Jh(){if(Dj)return F0;Dj=1;var t=mc(),e=t(Object,"create");return F0=e,F0}var z0,Ij;function sF(){if(Ij)return z0;Ij=1;var t=Jh();function e(){this.__data__=t?t(null):{},this.size=0}return z0=e,z0}var B0,Fj;function iF(){if(Fj)return B0;Fj=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return B0=t,B0}var q0,zj;function aF(){if(zj)return q0;zj=1;var t=Jh(),e="__lodash_hash_undefined__",n=Object.prototype,s=n.hasOwnProperty;function i(a){var o=this.__data__;if(t){var c=o[a];return c===e?void 0:c}return s.call(o,a)?o[a]:void 0}return q0=i,q0}var W0,Bj;function oF(){if(Bj)return W0;Bj=1;var t=Jh(),e=Object.prototype,n=e.hasOwnProperty;function s(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return W0=s,W0}var U0,qj;function lF(){if(qj)return U0;qj=1;var t=Jh(),e="__lodash_hash_undefined__";function n(s,i){var a=this.__data__;return this.size+=this.has(s)?0:1,a[s]=t&&i===void 0?e:i,this}return U0=n,U0}var H0,Wj;function cF(){if(Wj)return H0;Wj=1;var t=sF(),e=iF(),n=aF(),s=oF(),i=lF();function a(o){var c=-1,u=o==null?0:o.length;for(this.clear();++c<u;){var f=o[c];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=s,a.prototype.set=i,H0=a,H0}var $0,Uj;function dF(){if(Uj)return $0;Uj=1;var t=cF(),e=Xh(),n=Hy();function s(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return $0=s,$0}var V0,Hj;function uF(){if(Hj)return V0;Hj=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return V0=t,V0}var Y0,$j;function Zh(){if($j)return Y0;$j=1;var t=uF();function e(n,s){var i=n.__data__;return t(s)?i[typeof s=="string"?"string":"hash"]:i.map}return Y0=e,Y0}var K0,Vj;function fF(){if(Vj)return K0;Vj=1;var t=Zh();function e(n){var s=t(this,n).delete(n);return this.size-=s?1:0,s}return K0=e,K0}var G0,Yj;function hF(){if(Yj)return G0;Yj=1;var t=Zh();function e(n){return t(this,n).get(n)}return G0=e,G0}var X0,Kj;function pF(){if(Kj)return X0;Kj=1;var t=Zh();function e(n){return t(this,n).has(n)}return X0=e,X0}var Q0,Gj;function mF(){if(Gj)return Q0;Gj=1;var t=Zh();function e(n,s){var i=t(this,n),a=i.size;return i.set(n,s),this.size+=i.size==a?0:1,this}return Q0=e,Q0}var J0,Xj;function A4(){if(Xj)return J0;Xj=1;var t=dF(),e=fF(),n=hF(),s=pF(),i=mF();function a(o){var c=-1,u=o==null?0:o.length;for(this.clear();++c<u;){var f=o[c];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=s,a.prototype.set=i,J0=a,J0}var Z0,Qj;function xF(){if(Qj)return Z0;Qj=1;var t=Xh(),e=Hy(),n=A4(),s=200;function i(a,o){var c=this.__data__;if(c instanceof t){var u=c.__data__;if(!e||u.length<s-1)return u.push([a,o]),this.size=++c.size,this;c=this.__data__=new n(u)}return c.set(a,o),this.size=c.size,this}return Z0=i,Z0}var ex,Jj;function gF(){if(Jj)return ex;Jj=1;var t=Xh(),e=KI(),n=GI(),s=XI(),i=QI(),a=xF();function o(c){var u=this.__data__=new t(c);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=s,o.prototype.has=i,o.prototype.set=a,ex=o,ex}var tx,Zj;function yF(){if(Zj)return tx;Zj=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return tx=e,tx}var nx,eN;function vF(){if(eN)return nx;eN=1;function t(e){return this.__data__.has(e)}return nx=t,nx}var rx,tN;function bF(){if(tN)return rx;tN=1;var t=A4(),e=yF(),n=vF();function s(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new t;++a<o;)this.add(i[a])}return s.prototype.add=s.prototype.push=e,s.prototype.has=n,rx=s,rx}var sx,nN;function wF(){if(nN)return sx;nN=1;function t(e,n){for(var s=-1,i=e==null?0:e.length;++s<i;)if(n(e[s],s,e))return!0;return!1}return sx=t,sx}var ix,rN;function jF(){if(rN)return ix;rN=1;function t(e,n){return e.has(n)}return ix=t,ix}var ax,sN;function E4(){if(sN)return ax;sN=1;var t=bF(),e=wF(),n=jF(),s=1,i=2;function a(o,c,u,f,h,p){var m=u&s,g=o.length,y=c.length;if(g!=y&&!(m&&y>g))return!1;var b=p.get(o),v=p.get(c);if(b&&v)return b==c&&v==o;var w=-1,N=!0,k=u&i?new t:void 0;for(p.set(o,c),p.set(c,o);++w<g;){var j=o[w],S=c[w];if(f)var C=m?f(S,j,w,c,o,p):f(j,S,w,o,c,p);if(C!==void 0){if(C)continue;N=!1;break}if(k){if(!e(c,function(O,M){if(!n(k,M)&&(j===O||h(j,O,u,f,p)))return k.push(M)})){N=!1;break}}else if(!(j===S||h(j,S,u,f,p))){N=!1;break}}return p.delete(o),p.delete(c),N}return ax=a,ax}var ox,iN;function NF(){if(iN)return ox;iN=1;var t=Qi(),e=t.Uint8Array;return ox=e,ox}var lx,aN;function _F(){if(aN)return lx;aN=1;function t(e){var n=-1,s=Array(e.size);return e.forEach(function(i,a){s[++n]=[a,i]}),s}return lx=t,lx}var cx,oN;function kF(){if(oN)return cx;oN=1;function t(e){var n=-1,s=Array(e.size);return e.forEach(function(i){s[++n]=i}),s}return cx=t,cx}var dx,lN;function SF(){if(lN)return dx;lN=1;var t=Uy(),e=NF(),n=N4(),s=E4(),i=_F(),a=kF(),o=1,c=2,u="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Map]",m="[object Number]",g="[object RegExp]",y="[object Set]",b="[object String]",v="[object Symbol]",w="[object ArrayBuffer]",N="[object DataView]",k=t?t.prototype:void 0,j=k?k.valueOf:void 0;function S(C,O,M,B,I,R,P){switch(M){case N:if(C.byteLength!=O.byteLength||C.byteOffset!=O.byteOffset)return!1;C=C.buffer,O=O.buffer;case w:return!(C.byteLength!=O.byteLength||!R(new e(C),new e(O)));case u:case f:case m:return n(+C,+O);case h:return C.name==O.name&&C.message==O.message;case g:case b:return C==O+"";case p:var q=i;case y:var H=B&o;if(q||(q=a),C.size!=O.size&&!H)return!1;var G=P.get(C);if(G)return G==O;B|=c,P.set(C,O);var ne=s(q(C),q(O),B,I,R,P);return P.delete(C),ne;case v:if(j)return j.call(C)==j.call(O)}return!1}return dx=S,dx}var ux,cN;function CF(){if(cN)return ux;cN=1;function t(e,n){for(var s=-1,i=n.length,a=e.length;++s<i;)e[a+s]=n[s];return e}return ux=t,ux}var fx,dN;function $y(){if(dN)return fx;dN=1;var t=Array.isArray;return fx=t,fx}var hx,uN;function AF(){if(uN)return hx;uN=1;var t=CF(),e=$y();function n(s,i,a){var o=i(s);return e(s)?o:t(o,a(s))}return hx=n,hx}var px,fN;function EF(){if(fN)return px;fN=1;function t(e,n){for(var s=-1,i=e==null?0:e.length,a=0,o=[];++s<i;){var c=e[s];n(c,s,e)&&(o[a++]=c)}return o}return px=t,px}var mx,hN;function LF(){if(hN)return mx;hN=1;function t(){return[]}return mx=t,mx}var xx,pN;function OF(){if(pN)return xx;pN=1;var t=EF(),e=LF(),n=Object.prototype,s=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(c){return s.call(o,c)}))}:e;return xx=a,xx}var gx,mN;function MF(){if(mN)return gx;mN=1;function t(e,n){for(var s=-1,i=Array(e);++s<e;)i[s]=n(s);return i}return gx=t,gx}var yx,xN;function ep(){if(xN)return yx;xN=1;function t(e){return e!=null&&typeof e=="object"}return yx=t,yx}var vx,gN;function PF(){if(gN)return vx;gN=1;var t=Qh(),e=ep(),n="[object Arguments]";function s(i){return e(i)&&t(i)==n}return vx=s,vx}var bx,yN;function RF(){if(yN)return bx;yN=1;var t=PF(),e=ep(),n=Object.prototype,s=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(o){return e(o)&&s.call(o,"callee")&&!i.call(o,"callee")};return bx=a,bx}var fd={exports:{}},wx,vN;function TF(){if(vN)return wx;vN=1;function t(){return!1}return wx=t,wx}fd.exports;var bN;function L4(){return bN||(bN=1,(function(t,e){var n=Qi(),s=TF(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,c=o?n.Buffer:void 0,u=c?c.isBuffer:void 0,f=u||s;t.exports=f})(fd,fd.exports)),fd.exports}var jx,wN;function DF(){if(wN)return jx;wN=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(s,i){var a=typeof s;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(s))&&s>-1&&s%1==0&&s<i}return jx=n,jx}var Nx,jN;function O4(){if(jN)return Nx;jN=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return Nx=e,Nx}var _x,NN;function IF(){if(NN)return _x;NN=1;var t=Qh(),e=O4(),n=ep(),s="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",c="[object Error]",u="[object Function]",f="[object Map]",h="[object Number]",p="[object Object]",m="[object RegExp]",g="[object Set]",y="[object String]",b="[object WeakMap]",v="[object ArrayBuffer]",w="[object DataView]",N="[object Float32Array]",k="[object Float64Array]",j="[object Int8Array]",S="[object Int16Array]",C="[object Int32Array]",O="[object Uint8Array]",M="[object Uint8ClampedArray]",B="[object Uint16Array]",I="[object Uint32Array]",R={};R[N]=R[k]=R[j]=R[S]=R[C]=R[O]=R[M]=R[B]=R[I]=!0,R[s]=R[i]=R[v]=R[a]=R[w]=R[o]=R[c]=R[u]=R[f]=R[h]=R[p]=R[m]=R[g]=R[y]=R[b]=!1;function P(q){return n(q)&&e(q.length)&&!!R[t(q)]}return _x=P,_x}var kx,_N;function FF(){if(_N)return kx;_N=1;function t(e){return function(n){return e(n)}}return kx=t,kx}var hd={exports:{}};hd.exports;var kN;function zF(){return kN||(kN=1,(function(t,e){var n=_4(),s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===s,o=a&&n.process,c=(function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();t.exports=c})(hd,hd.exports)),hd.exports}var Sx,SN;function M4(){if(SN)return Sx;SN=1;var t=IF(),e=FF(),n=zF(),s=n&&n.isTypedArray,i=s?e(s):t;return Sx=i,Sx}var Cx,CN;function BF(){if(CN)return Cx;CN=1;var t=MF(),e=RF(),n=$y(),s=L4(),i=DF(),a=M4(),o=Object.prototype,c=o.hasOwnProperty;function u(f,h){var p=n(f),m=!p&&e(f),g=!p&&!m&&s(f),y=!p&&!m&&!g&&a(f),b=p||m||g||y,v=b?t(f.length,String):[],w=v.length;for(var N in f)(h||c.call(f,N))&&!(b&&(N=="length"||g&&(N=="offset"||N=="parent")||y&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||i(N,w)))&&v.push(N);return v}return Cx=u,Cx}var Ax,AN;function qF(){if(AN)return Ax;AN=1;var t=Object.prototype;function e(n){var s=n&&n.constructor,i=typeof s=="function"&&s.prototype||t;return n===i}return Ax=e,Ax}var Ex,EN;function WF(){if(EN)return Ex;EN=1;function t(e,n){return function(s){return e(n(s))}}return Ex=t,Ex}var Lx,LN;function UF(){if(LN)return Lx;LN=1;var t=WF(),e=t(Object.keys,Object);return Lx=e,Lx}var Ox,ON;function HF(){if(ON)return Ox;ON=1;var t=qF(),e=UF(),n=Object.prototype,s=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var o=[];for(var c in Object(a))s.call(a,c)&&c!="constructor"&&o.push(c);return o}return Ox=i,Ox}var Mx,MN;function $F(){if(MN)return Mx;MN=1;var t=S4(),e=O4();function n(s){return s!=null&&e(s.length)&&!t(s)}return Mx=n,Mx}var Px,PN;function VF(){if(PN)return Px;PN=1;var t=BF(),e=HF(),n=$F();function s(i){return n(i)?t(i):e(i)}return Px=s,Px}var Rx,RN;function YF(){if(RN)return Rx;RN=1;var t=AF(),e=OF(),n=VF();function s(i){return t(i,n,e)}return Rx=s,Rx}var Tx,TN;function KF(){if(TN)return Tx;TN=1;var t=YF(),e=1,n=Object.prototype,s=n.hasOwnProperty;function i(a,o,c,u,f,h){var p=c&e,m=t(a),g=m.length,y=t(o),b=y.length;if(g!=b&&!p)return!1;for(var v=g;v--;){var w=m[v];if(!(p?w in o:s.call(o,w)))return!1}var N=h.get(a),k=h.get(o);if(N&&k)return N==o&&k==a;var j=!0;h.set(a,o),h.set(o,a);for(var S=p;++v<g;){w=m[v];var C=a[w],O=o[w];if(u)var M=p?u(O,C,w,o,a,h):u(C,O,w,a,o,h);if(!(M===void 0?C===O||f(C,O,c,u,h):M)){j=!1;break}S||(S=w=="constructor")}if(j&&!S){var B=a.constructor,I=o.constructor;B!=I&&"constructor"in a&&"constructor"in o&&!(typeof B=="function"&&B instanceof B&&typeof I=="function"&&I instanceof I)&&(j=!1)}return h.delete(a),h.delete(o),j}return Tx=i,Tx}var Dx,DN;function GF(){if(DN)return Dx;DN=1;var t=mc(),e=Qi(),n=t(e,"DataView");return Dx=n,Dx}var Ix,IN;function XF(){if(IN)return Ix;IN=1;var t=mc(),e=Qi(),n=t(e,"Promise");return Ix=n,Ix}var Fx,FN;function QF(){if(FN)return Fx;FN=1;var t=mc(),e=Qi(),n=t(e,"Set");return Fx=n,Fx}var zx,zN;function JF(){if(zN)return zx;zN=1;var t=mc(),e=Qi(),n=t(e,"WeakMap");return zx=n,zx}var Bx,BN;function ZF(){if(BN)return Bx;BN=1;var t=GF(),e=Hy(),n=XF(),s=QF(),i=JF(),a=Qh(),o=C4(),c="[object Map]",u="[object Object]",f="[object Promise]",h="[object Set]",p="[object WeakMap]",m="[object DataView]",g=o(t),y=o(e),b=o(n),v=o(s),w=o(i),N=a;return(t&&N(new t(new ArrayBuffer(1)))!=m||e&&N(new e)!=c||n&&N(n.resolve())!=f||s&&N(new s)!=h||i&&N(new i)!=p)&&(N=function(k){var j=a(k),S=j==u?k.constructor:void 0,C=S?o(S):"";if(C)switch(C){case g:return m;case y:return c;case b:return f;case v:return h;case w:return p}return j}),Bx=N,Bx}var qx,qN;function ez(){if(qN)return qx;qN=1;var t=gF(),e=E4(),n=SF(),s=KF(),i=ZF(),a=$y(),o=L4(),c=M4(),u=1,f="[object Arguments]",h="[object Array]",p="[object Object]",m=Object.prototype,g=m.hasOwnProperty;function y(b,v,w,N,k,j){var S=a(b),C=a(v),O=S?h:i(b),M=C?h:i(v);O=O==f?p:O,M=M==f?p:M;var B=O==p,I=M==p,R=O==M;if(R&&o(b)){if(!o(v))return!1;S=!0,B=!1}if(R&&!B)return j||(j=new t),S||c(b)?e(b,v,w,N,k,j):n(b,v,O,w,N,k,j);if(!(w&u)){var P=B&&g.call(b,"__wrapped__"),q=I&&g.call(v,"__wrapped__");if(P||q){var H=P?b.value():b,G=q?v.value():v;return j||(j=new t),k(H,G,w,N,j)}}return R?(j||(j=new t),s(b,v,w,N,k,j)):!1}return qx=y,qx}var Wx,WN;function tz(){if(WN)return Wx;WN=1;var t=ez(),e=ep();function n(s,i,a,o,c){return s===i?!0:s==null||i==null||!e(s)&&!e(i)?s!==s&&i!==i:t(s,i,a,o,n,c)}return Wx=n,Wx}var Ux,UN;function nz(){if(UN)return Ux;UN=1;var t=tz();function e(n,s){return t(n,s)}return Ux=e,Ux}var Yf={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var rz=Yf.exports,HN;function sz(){return HN||(HN=1,(function(t,e){(function(s,i){t.exports=i()})(typeof self<"u"?self:rz,function(){return(function(n){var s={};function i(a){if(s[a])return s[a].exports;var o=s[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=s,i.d=function(a,o,c){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:c})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=109)})([(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=i(17),o=i(18),c=i(19),u=i(45),f=i(46),h=i(47),p=i(48),m=i(49),g=i(12),y=i(32),b=i(33),v=i(31),w=i(1),N={Scope:w.Scope,create:w.create,find:w.find,query:w.query,register:w.register,Container:a.default,Format:o.default,Leaf:c.default,Embed:p.default,Scroll:u.default,Block:h.default,Inline:f.default,Text:m.default,Attributor:{Attribute:g.default,Class:y.default,Style:b.default,Store:v.default}};s.default=N}),(function(n,s,i){var a=this&&this.__extends||(function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,N){w.__proto__=N}||function(w,N){for(var k in N)N.hasOwnProperty(k)&&(w[k]=N[k])};return function(w,N){v(w,N);function k(){this.constructor=w}w.prototype=N===null?Object.create(N):(k.prototype=N.prototype,new k)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=(function(v){a(w,v);function w(N){var k=this;return N="[Parchment] "+N,k=v.call(this,N)||this,k.message=N,k.name=k.constructor.name,k}return w})(Error);s.ParchmentError=o;var c={},u={},f={},h={};s.DATA_KEY="__blot";var p;(function(v){v[v.TYPE=3]="TYPE",v[v.LEVEL=12]="LEVEL",v[v.ATTRIBUTE=13]="ATTRIBUTE",v[v.BLOT=14]="BLOT",v[v.INLINE=7]="INLINE",v[v.BLOCK=11]="BLOCK",v[v.BLOCK_BLOT=10]="BLOCK_BLOT",v[v.INLINE_BLOT=6]="INLINE_BLOT",v[v.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",v[v.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",v[v.ANY=15]="ANY"})(p=s.Scope||(s.Scope={}));function m(v,w){var N=y(v);if(N==null)throw new o("Unable to create "+v+" blot");var k=N,j=v instanceof Node||v.nodeType===Node.TEXT_NODE?v:k.create(w);return new k(j,w)}s.create=m;function g(v,w){return w===void 0&&(w=!1),v==null?null:v[s.DATA_KEY]!=null?v[s.DATA_KEY].blot:w?g(v.parentNode,w):null}s.find=g;function y(v,w){w===void 0&&(w=p.ANY);var N;if(typeof v=="string")N=h[v]||c[v];else if(v instanceof Text||v.nodeType===Node.TEXT_NODE)N=h.text;else if(typeof v=="number")v&p.LEVEL&p.BLOCK?N=h.block:v&p.LEVEL&p.INLINE&&(N=h.inline);else if(v instanceof HTMLElement){var k=(v.getAttribute("class")||"").split(/\s+/);for(var j in k)if(N=u[k[j]],N)break;N=N||f[v.tagName]}return N==null?null:w&p.LEVEL&N.scope&&w&p.TYPE&N.scope?N:null}s.query=y;function b(){for(var v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];if(v.length>1)return v.map(function(j){return b(j)});var N=v[0];if(typeof N.blotName!="string"&&typeof N.attrName!="string")throw new o("Invalid definition");if(N.blotName==="abstract")throw new o("Cannot register abstract class");if(h[N.blotName||N.attrName]=N,typeof N.keyName=="string")c[N.keyName]=N;else if(N.className!=null&&(u[N.className]=N),N.tagName!=null){Array.isArray(N.tagName)?N.tagName=N.tagName.map(function(j){return j.toUpperCase()}):N.tagName=N.tagName.toUpperCase();var k=Array.isArray(N.tagName)?N.tagName:[N.tagName];k.forEach(function(j){(f[j]==null||N.className==null)&&(f[j]=N)})}return N}s.register=b}),(function(n,s,i){var a=i(51),o=i(11),c=i(3),u=i(20),f="\0",h=function(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]};h.prototype.insert=function(p,m){var g={};return p.length===0?this:(g.insert=p,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(g.attributes=m),this.push(g))},h.prototype.delete=function(p){return p<=0?this:this.push({delete:p})},h.prototype.retain=function(p,m){if(p<=0)return this;var g={retain:p};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(g.attributes=m),this.push(g)},h.prototype.push=function(p){var m=this.ops.length,g=this.ops[m-1];if(p=c(!0,{},p),typeof g=="object"){if(typeof p.delete=="number"&&typeof g.delete=="number")return this.ops[m-1]={delete:g.delete+p.delete},this;if(typeof g.delete=="number"&&p.insert!=null&&(m-=1,g=this.ops[m-1],typeof g!="object"))return this.ops.unshift(p),this;if(o(p.attributes,g.attributes)){if(typeof p.insert=="string"&&typeof g.insert=="string")return this.ops[m-1]={insert:g.insert+p.insert},typeof p.attributes=="object"&&(this.ops[m-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof g.retain=="number")return this.ops[m-1]={retain:g.retain+p.retain},typeof p.attributes=="object"&&(this.ops[m-1].attributes=p.attributes),this}}return m===this.ops.length?this.ops.push(p):this.ops.splice(m,0,p),this},h.prototype.chop=function(){var p=this.ops[this.ops.length-1];return p&&p.retain&&!p.attributes&&this.ops.pop(),this},h.prototype.filter=function(p){return this.ops.filter(p)},h.prototype.forEach=function(p){this.ops.forEach(p)},h.prototype.map=function(p){return this.ops.map(p)},h.prototype.partition=function(p){var m=[],g=[];return this.forEach(function(y){var b=p(y)?m:g;b.push(y)}),[m,g]},h.prototype.reduce=function(p,m){return this.ops.reduce(p,m)},h.prototype.changeLength=function(){return this.reduce(function(p,m){return m.insert?p+u.length(m):m.delete?p-m.delete:p},0)},h.prototype.length=function(){return this.reduce(function(p,m){return p+u.length(m)},0)},h.prototype.slice=function(p,m){p=p||0,typeof m!="number"&&(m=1/0);for(var g=[],y=u.iterator(this.ops),b=0;b<m&&y.hasNext();){var v;b<p?v=y.next(p-b):(v=y.next(m-b),g.push(v)),b+=u.length(v)}return new h(g)},h.prototype.compose=function(p){var m=u.iterator(this.ops),g=u.iterator(p.ops),y=[],b=g.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){for(var v=b.retain;m.peekType()==="insert"&&m.peekLength()<=v;)v-=m.peekLength(),y.push(m.next());b.retain-v>0&&g.next(b.retain-v)}for(var w=new h(y);m.hasNext()||g.hasNext();)if(g.peekType()==="insert")w.push(g.next());else if(m.peekType()==="delete")w.push(m.next());else{var N=Math.min(m.peekLength(),g.peekLength()),k=m.next(N),j=g.next(N);if(typeof j.retain=="number"){var S={};typeof k.retain=="number"?S.retain=N:S.insert=k.insert;var C=u.attributes.compose(k.attributes,j.attributes,typeof k.retain=="number");if(C&&(S.attributes=C),w.push(S),!g.hasNext()&&o(w.ops[w.ops.length-1],S)){var O=new h(m.rest());return w.concat(O).chop()}}else typeof j.delete=="number"&&typeof k.retain=="number"&&w.push(j)}return w.chop()},h.prototype.concat=function(p){var m=new h(this.ops.slice());return p.ops.length>0&&(m.push(p.ops[0]),m.ops=m.ops.concat(p.ops.slice(1))),m},h.prototype.diff=function(p,m){if(this.ops===p.ops)return new h;var g=[this,p].map(function(N){return N.map(function(k){if(k.insert!=null)return typeof k.insert=="string"?k.insert:f;var j=N===p?"on":"with";throw new Error("diff() called "+j+" non-document")}).join("")}),y=new h,b=a(g[0],g[1],m),v=u.iterator(this.ops),w=u.iterator(p.ops);return b.forEach(function(N){for(var k=N[1].length;k>0;){var j=0;switch(N[0]){case a.INSERT:j=Math.min(w.peekLength(),k),y.push(w.next(j));break;case a.DELETE:j=Math.min(k,v.peekLength()),v.next(j),y.delete(j);break;case a.EQUAL:j=Math.min(v.peekLength(),w.peekLength(),k);var S=v.next(j),C=w.next(j);o(S.insert,C.insert)?y.retain(j,u.attributes.diff(S.attributes,C.attributes)):y.push(C).delete(j);break}k-=j}}),y.chop()},h.prototype.eachLine=function(p,m){m=m||`
`;for(var g=u.iterator(this.ops),y=new h,b=0;g.hasNext();){if(g.peekType()!=="insert")return;var v=g.peek(),w=u.length(v)-g.peekLength(),N=typeof v.insert=="string"?v.insert.indexOf(m,w)-w:-1;if(N<0)y.push(g.next());else if(N>0)y.push(g.next(N));else{if(p(y,g.next(1).attributes||{},b)===!1)return;b+=1,y=new h}}y.length()>0&&p(y,{},b)},h.prototype.transform=function(p,m){if(m=!!m,typeof p=="number")return this.transformPosition(p,m);for(var g=u.iterator(this.ops),y=u.iterator(p.ops),b=new h;g.hasNext()||y.hasNext();)if(g.peekType()==="insert"&&(m||y.peekType()!=="insert"))b.retain(u.length(g.next()));else if(y.peekType()==="insert")b.push(y.next());else{var v=Math.min(g.peekLength(),y.peekLength()),w=g.next(v),N=y.next(v);if(w.delete)continue;N.delete?b.push(N):b.retain(v,u.attributes.transform(w.attributes,N.attributes,m))}return b.chop()},h.prototype.transformPosition=function(p,m){m=!!m;for(var g=u.iterator(this.ops),y=0;g.hasNext()&&y<=p;){var b=g.peekLength(),v=g.peekType();if(g.next(),v==="delete"){p-=Math.min(b,p-y);continue}else v==="insert"&&(y<p||!m)&&(p+=b);y+=b}return p},n.exports=h}),(function(n,s){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=Object.defineProperty,c=Object.getOwnPropertyDescriptor,u=function(g){return typeof Array.isArray=="function"?Array.isArray(g):a.call(g)==="[object Array]"},f=function(g){if(!g||a.call(g)!=="[object Object]")return!1;var y=i.call(g,"constructor"),b=g.constructor&&g.constructor.prototype&&i.call(g.constructor.prototype,"isPrototypeOf");if(g.constructor&&!y&&!b)return!1;var v;for(v in g);return typeof v>"u"||i.call(g,v)},h=function(g,y){o&&y.name==="__proto__"?o(g,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):g[y.name]=y.newValue},p=function(g,y){if(y==="__proto__")if(i.call(g,y)){if(c)return c(g,y).value}else return;return g[y]};n.exports=function m(){var g,y,b,v,w,N,k=arguments[0],j=1,S=arguments.length,C=!1;for(typeof k=="boolean"&&(C=k,k=arguments[1]||{},j=2),(k==null||typeof k!="object"&&typeof k!="function")&&(k={});j<S;++j)if(g=arguments[j],g!=null)for(y in g)b=p(k,y),v=p(g,y),k!==v&&(C&&v&&(f(v)||(w=u(v)))?(w?(w=!1,N=b&&u(b)?b:[]):N=b&&f(b)?b:{},h(k,{name:y,newValue:m(C,N,v)})):typeof v<"u"&&h(k,{name:y,newValue:v}));return k}}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.BlockEmbed=s.bubbleFormats=void 0;var a=(function(){function R(P,q){for(var H=0;H<q.length;H++){var G=q[H];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(P,G.key,G)}}return function(P,q,H){return q&&R(P.prototype,q),H&&R(P,H),P}})(),o=function R(P,q,H){P===null&&(P=Function.prototype);var G=Object.getOwnPropertyDescriptor(P,q);if(G===void 0){var ne=Object.getPrototypeOf(P);return ne===null?void 0:R(ne,q,H)}else{if("value"in G)return G.value;var X=G.get;return X===void 0?void 0:X.call(H)}},c=i(3),u=k(c),f=i(2),h=k(f),p=i(0),m=k(p),g=i(16),y=k(g),b=i(6),v=k(b),w=i(7),N=k(w);function k(R){return R&&R.__esModule?R:{default:R}}function j(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function S(R,P){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:R}function C(R,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);R.prototype=Object.create(P&&P.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(R,P):R.__proto__=P)}var O=1,M=(function(R){C(P,R);function P(){return j(this,P),S(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return a(P,[{key:"attach",value:function(){o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"attach",this).call(this),this.attributes=new m.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new h.default().insert(this.value(),(0,u.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(H,G){var ne=m.default.query(H,m.default.Scope.BLOCK_ATTRIBUTE);ne!=null&&this.attributes.attribute(ne,G)}},{key:"formatAt",value:function(H,G,ne,X){this.format(ne,X)}},{key:"insertAt",value:function(H,G,ne){if(typeof G=="string"&&G.endsWith(`
`)){var X=m.default.create(B.blotName);this.parent.insertBefore(X,H===0?this:this.next),X.insertAt(0,G.slice(0,-1))}else o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,H,G,ne)}}]),P})(m.default.Embed);M.scope=m.default.Scope.BLOCK_BLOT;var B=(function(R){C(P,R);function P(q){j(this,P);var H=S(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,q));return H.cache={},H}return a(P,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(m.default.Leaf).reduce(function(H,G){return G.length()===0?H:H.insert(G.value(),I(G))},new h.default).insert(`
`,I(this))),this.cache.delta}},{key:"deleteAt",value:function(H,G){o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"deleteAt",this).call(this,H,G),this.cache={}}},{key:"formatAt",value:function(H,G,ne,X){G<=0||(m.default.query(ne,m.default.Scope.BLOCK)?H+G===this.length()&&this.format(ne,X):o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"formatAt",this).call(this,H,Math.min(G,this.length()-H-1),ne,X),this.cache={})}},{key:"insertAt",value:function(H,G,ne){if(ne!=null)return o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,H,G,ne);if(G.length!==0){var X=G.split(`
`),ee=X.shift();ee.length>0&&(H<this.length()-1||this.children.tail==null?o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,Math.min(H,this.length()-1),ee):this.children.tail.insertAt(this.children.tail.length(),ee),this.cache={});var Y=this;X.reduce(function(U,T){return Y=Y.split(U,!0),Y.insertAt(0,T),T.length},H+ee.length)}}},{key:"insertBefore",value:function(H,G){var ne=this.children.head;o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertBefore",this).call(this,H,G),ne instanceof y.default&&ne.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"length",this).call(this)+O),this.cache.length}},{key:"moveChildren",value:function(H,G){o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"moveChildren",this).call(this,H,G),this.cache={}}},{key:"optimize",value:function(H){o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,H),this.cache={}}},{key:"path",value:function(H){return o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"path",this).call(this,H,!0)}},{key:"removeChild",value:function(H){o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"removeChild",this).call(this,H),this.cache={}}},{key:"split",value:function(H){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(G&&(H===0||H>=this.length()-O)){var ne=this.clone();return H===0?(this.parent.insertBefore(ne,this),this):(this.parent.insertBefore(ne,this.next),ne)}else{var X=o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"split",this).call(this,H,G);return this.cache={},X}}}]),P})(m.default.Block);B.blotName="block",B.tagName="P",B.defaultChild="break",B.allowedChildren=[v.default,m.default.Embed,N.default];function I(R){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return R==null||(typeof R.formats=="function"&&(P=(0,u.default)(P,R.formats())),R.parent==null||R.parent.blotName=="scroll"||R.parent.statics.scope!==R.statics.scope)?P:I(R.parent,P)}s.bubbleFormats=I,s.BlockEmbed=M,s.default=B}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.overload=s.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},o=(function(){function Y(U,T){var W=[],z=!0,Q=!1,Z=void 0;try{for(var V=U[Symbol.iterator](),ie;!(z=(ie=V.next()).done)&&(W.push(ie.value),!(T&&W.length===T));z=!0);}catch(de){Q=!0,Z=de}finally{try{!z&&V.return&&V.return()}finally{if(Q)throw Z}}return W}return function(U,T){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return Y(U,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),c=(function(){function Y(U,T){for(var W=0;W<T.length;W++){var z=T[W];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(U,z.key,z)}}return function(U,T,W){return T&&Y(U.prototype,T),W&&Y(U,W),U}})();i(50);var u=i(2),f=I(u),h=i(14),p=I(h),m=i(8),g=I(m),y=i(9),b=I(y),v=i(0),w=I(v),N=i(15),k=I(N),j=i(3),S=I(j),C=i(10),O=I(C),M=i(34),B=I(M);function I(Y){return Y&&Y.__esModule?Y:{default:Y}}function R(Y,U,T){return U in Y?Object.defineProperty(Y,U,{value:T,enumerable:!0,configurable:!0,writable:!0}):Y[U]=T,Y}function P(Y,U){if(!(Y instanceof U))throw new TypeError("Cannot call a class as a function")}var q=(0,O.default)("quill"),H=(function(){c(Y,null,[{key:"debug",value:function(T){T===!0&&(T="log"),O.default.level(T)}},{key:"find",value:function(T){return T.__quill||w.default.find(T)}},{key:"import",value:function(T){return this.imports[T]==null&&q.error("Cannot import "+T+". Are you sure it was registered?"),this.imports[T]}},{key:"register",value:function(T,W){var z=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof T!="string"){var Z=T.attrName||T.blotName;typeof Z=="string"?this.register("formats/"+Z,T,W):Object.keys(T).forEach(function(V){z.register(V,T[V],W)})}else this.imports[T]!=null&&!Q&&q.warn("Overwriting "+T+" with",W),this.imports[T]=W,(T.startsWith("blots/")||T.startsWith("formats/"))&&W.blotName!=="abstract"?w.default.register(W):T.startsWith("modules")&&typeof W.register=="function"&&W.register()}}]);function Y(U){var T=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(P(this,Y),this.options=G(U,W),this.container=this.options.container,this.container==null)return q.error("Invalid Quill container",U);this.options.debug&&Y.debug(this.options.debug);var z=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new g.default,this.scroll=w.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new p.default(this.scroll),this.selection=new k.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(g.default.events.EDITOR_CHANGE,function(Z){Z===g.default.events.TEXT_CHANGE&&T.root.classList.toggle("ql-blank",T.editor.isBlank())}),this.emitter.on(g.default.events.SCROLL_UPDATE,function(Z,V){var ie=T.selection.lastRange,de=ie&&ie.length===0?ie.index:void 0;ne.call(T,function(){return T.editor.update(null,V,de)},Z)});var Q=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+z+"<p><br></p></div>");this.setContents(Q),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return c(Y,[{key:"addContainer",value:function(T){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof T=="string"){var z=T;T=document.createElement("div"),T.classList.add(z)}return this.container.insertBefore(T,W),T}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(T,W,z){var Q=this,Z=X(T,W,z),V=o(Z,4);return T=V[0],W=V[1],z=V[3],ne.call(this,function(){return Q.editor.deleteText(T,W)},z,T,-1*W)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(T),this.container.classList.toggle("ql-disabled",!T)}},{key:"focus",value:function(){var T=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=T,this.scrollIntoView()}},{key:"format",value:function(T,W){var z=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;return ne.call(this,function(){var Z=z.getSelection(!0),V=new f.default;if(Z==null)return V;if(w.default.query(T,w.default.Scope.BLOCK))V=z.editor.formatLine(Z.index,Z.length,R({},T,W));else{if(Z.length===0)return z.selection.format(T,W),V;V=z.editor.formatText(Z.index,Z.length,R({},T,W))}return z.setSelection(Z,g.default.sources.SILENT),V},Q)}},{key:"formatLine",value:function(T,W,z,Q,Z){var V=this,ie=void 0,de=X(T,W,z,Q,Z),fe=o(de,4);return T=fe[0],W=fe[1],ie=fe[2],Z=fe[3],ne.call(this,function(){return V.editor.formatLine(T,W,ie)},Z,T,0)}},{key:"formatText",value:function(T,W,z,Q,Z){var V=this,ie=void 0,de=X(T,W,z,Q,Z),fe=o(de,4);return T=fe[0],W=fe[1],ie=fe[2],Z=fe[3],ne.call(this,function(){return V.editor.formatText(T,W,ie)},Z,T,0)}},{key:"getBounds",value:function(T){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=void 0;typeof T=="number"?z=this.selection.getBounds(T,W):z=this.selection.getBounds(T.index,T.length);var Q=this.container.getBoundingClientRect();return{bottom:z.bottom-Q.top,height:z.height,left:z.left-Q.left,right:z.right-Q.left,top:z.top-Q.top,width:z.width}}},{key:"getContents",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-T,z=X(T,W),Q=o(z,2);return T=Q[0],W=Q[1],this.editor.getContents(T,W)}},{key:"getFormat",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof T=="number"?this.editor.getFormat(T,W):this.editor.getFormat(T.index,T.length)}},{key:"getIndex",value:function(T){return T.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(T){return this.scroll.leaf(T)}},{key:"getLine",value:function(T){return this.scroll.line(T)}},{key:"getLines",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof T!="number"?this.scroll.lines(T.index,T.length):this.scroll.lines(T,W)}},{key:"getModule",value:function(T){return this.theme.modules[T]}},{key:"getSelection",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return T&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-T,z=X(T,W),Q=o(z,2);return T=Q[0],W=Q[1],this.editor.getText(T,W)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(T,W,z){var Q=this,Z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Y.sources.API;return ne.call(this,function(){return Q.editor.insertEmbed(T,W,z)},Z,T)}},{key:"insertText",value:function(T,W,z,Q,Z){var V=this,ie=void 0,de=X(T,0,z,Q,Z),fe=o(de,4);return T=fe[0],ie=fe[2],Z=fe[3],ne.call(this,function(){return V.editor.insertText(T,W,ie)},Z,T,W.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(T,W,z){this.clipboard.dangerouslyPasteHTML(T,W,z)}},{key:"removeFormat",value:function(T,W,z){var Q=this,Z=X(T,W,z),V=o(Z,4);return T=V[0],W=V[1],z=V[3],ne.call(this,function(){return Q.editor.removeFormat(T,W)},z,T)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(T){var W=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API;return ne.call(this,function(){T=new f.default(T);var Q=W.getLength(),Z=W.editor.deleteText(0,Q),V=W.editor.applyDelta(T),ie=V.ops[V.ops.length-1];ie!=null&&typeof ie.insert=="string"&&ie.insert[ie.insert.length-1]===`
`&&(W.editor.deleteText(W.getLength()-1,1),V.delete(1));var de=Z.compose(V);return de},z)}},{key:"setSelection",value:function(T,W,z){if(T==null)this.selection.setRange(null,W||Y.sources.API);else{var Q=X(T,W,z),Z=o(Q,4);T=Z[0],W=Z[1],z=Z[3],this.selection.setRange(new N.Range(T,W),z),z!==g.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(T){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API,z=new f.default().insert(T);return this.setContents(z,W)}},{key:"update",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,W=this.scroll.update(T);return this.selection.update(T),W}},{key:"updateContents",value:function(T){var W=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API;return ne.call(this,function(){return T=new f.default(T),W.editor.applyDelta(T,z)},z,!0)}}]),Y})();H.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},H.events=g.default.events,H.sources=g.default.sources,H.version="1.3.7",H.imports={delta:f.default,parchment:w.default,"core/module":b.default,"core/theme":B.default};function G(Y,U){if(U=(0,S.default)(!0,{container:Y,modules:{clipboard:!0,keyboard:!0,history:!0}},U),!U.theme||U.theme===H.DEFAULTS.theme)U.theme=B.default;else if(U.theme=H.import("themes/"+U.theme),U.theme==null)throw new Error("Invalid theme "+U.theme+". Did you register it?");var T=(0,S.default)(!0,{},U.theme.DEFAULTS);[T,U].forEach(function(Q){Q.modules=Q.modules||{},Object.keys(Q.modules).forEach(function(Z){Q.modules[Z]===!0&&(Q.modules[Z]={})})});var W=Object.keys(T.modules).concat(Object.keys(U.modules)),z=W.reduce(function(Q,Z){var V=H.import("modules/"+Z);return V==null?q.error("Cannot load "+Z+" module. Are you sure you registered it?"):Q[Z]=V.DEFAULTS||{},Q},{});return U.modules!=null&&U.modules.toolbar&&U.modules.toolbar.constructor!==Object&&(U.modules.toolbar={container:U.modules.toolbar}),U=(0,S.default)(!0,{},H.DEFAULTS,{modules:z},T,U),["bounds","container","scrollingContainer"].forEach(function(Q){typeof U[Q]=="string"&&(U[Q]=document.querySelector(U[Q]))}),U.modules=Object.keys(U.modules).reduce(function(Q,Z){return U.modules[Z]&&(Q[Z]=U.modules[Z]),Q},{}),U}function ne(Y,U,T,W){if(this.options.strict&&!this.isEnabled()&&U===g.default.sources.USER)return new f.default;var z=T==null?null:this.getSelection(),Q=this.editor.delta,Z=Y();if(z!=null&&(T===!0&&(T=z.index),W==null?z=ee(z,Z,U):W!==0&&(z=ee(z,T,W,U)),this.setSelection(z,g.default.sources.SILENT)),Z.length()>0){var V,ie=[g.default.events.TEXT_CHANGE,Z,Q,U];if((V=this.emitter).emit.apply(V,[g.default.events.EDITOR_CHANGE].concat(ie)),U!==g.default.sources.SILENT){var de;(de=this.emitter).emit.apply(de,ie)}}return Z}function X(Y,U,T,W,z){var Q={};return typeof Y.index=="number"&&typeof Y.length=="number"?typeof U!="number"?(z=W,W=T,T=U,U=Y.length,Y=Y.index):(U=Y.length,Y=Y.index):typeof U!="number"&&(z=W,W=T,T=U,U=0),(typeof T>"u"?"undefined":a(T))==="object"?(Q=T,z=W):typeof T=="string"&&(W!=null?Q[T]=W:z=T),z=z||g.default.sources.API,[Y,U,Q,z]}function ee(Y,U,T,W){if(Y==null)return null;var z=void 0,Q=void 0;if(U instanceof f.default){var Z=[Y.index,Y.index+Y.length].map(function(fe){return U.transformPosition(fe,W!==g.default.sources.USER)}),V=o(Z,2);z=V[0],Q=V[1]}else{var ie=[Y.index,Y.index+Y.length].map(function(fe){return fe<U||fe===U&&W===g.default.sources.USER?fe:T>=0?fe+T:Math.max(U,fe+T)}),de=o(ie,2);z=de[0],Q=de[1]}return new N.Range(z,Q-z)}s.expandConfig=G,s.overload=X,s.default=H}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function v(w,N){for(var k=0;k<N.length;k++){var j=N[k];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,N,k){return N&&v(w.prototype,N),k&&v(w,k),w}})(),o=function v(w,N,k){w===null&&(w=Function.prototype);var j=Object.getOwnPropertyDescriptor(w,N);if(j===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:v(S,N,k)}else{if("value"in j)return j.value;var C=j.get;return C===void 0?void 0:C.call(k)}},c=i(7),u=p(c),f=i(0),h=p(f);function p(v){return v&&v.__esModule?v:{default:v}}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function g(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function y(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var b=(function(v){y(w,v);function w(){return m(this,w),g(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"formatAt",value:function(k,j,S,C){if(w.compare(this.statics.blotName,S)<0&&h.default.query(S,h.default.Scope.BLOT)){var O=this.isolate(k,j);C&&O.wrap(S,C)}else o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"formatAt",this).call(this,k,j,S,C)}},{key:"optimize",value:function(k){if(o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,k),this.parent instanceof w&&w.compare(this.statics.blotName,this.parent.statics.blotName)>0){var j=this.parent.isolate(this.offset(),this.length());this.moveChildren(j),j.wrap(this)}}}],[{key:"compare",value:function(k,j){var S=w.order.indexOf(k),C=w.order.indexOf(j);return S>=0||C>=0?S-C:k===j?0:k<j?-1:1}}]),w})(h.default.Inline);b.allowedChildren=[b,h.default.Embed,u.default],b.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],s.default=b}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=i(0),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function f(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function h(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=(function(m){h(g,m);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g})(o.default.Text);s.default=p}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function N(k,j){for(var S=0;S<j.length;S++){var C=j[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(k,C.key,C)}}return function(k,j,S){return j&&N(k.prototype,j),S&&N(k,S),k}})(),o=function N(k,j,S){k===null&&(k=Function.prototype);var C=Object.getOwnPropertyDescriptor(k,j);if(C===void 0){var O=Object.getPrototypeOf(k);return O===null?void 0:N(O,j,S)}else{if("value"in C)return C.value;var M=C.get;return M===void 0?void 0:M.call(S)}},c=i(54),u=p(c),f=i(10),h=p(f);function p(N){return N&&N.__esModule?N:{default:N}}function m(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function g(N,k){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:N}function y(N,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);N.prototype=Object.create(k&&k.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(N,k):N.__proto__=k)}var b=(0,h.default)("quill:events"),v=["selectionchange","mousedown","mouseup","click"];v.forEach(function(N){document.addEventListener(N,function(){for(var k=arguments.length,j=Array(k),S=0;S<k;S++)j[S]=arguments[S];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(C){if(C.__quill&&C.__quill.emitter){var O;(O=C.__quill.emitter).handleDOM.apply(O,j)}})})});var w=(function(N){y(k,N);function k(){m(this,k);var j=g(this,(k.__proto__||Object.getPrototypeOf(k)).call(this));return j.listeners={},j.on("error",b.error),j}return a(k,[{key:"emit",value:function(){b.log.apply(b,arguments),o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(S){for(var C=arguments.length,O=Array(C>1?C-1:0),M=1;M<C;M++)O[M-1]=arguments[M];(this.listeners[S.type]||[]).forEach(function(B){var I=B.node,R=B.handler;(S.target===I||I.contains(S.target))&&R.apply(void 0,[S].concat(O))})}},{key:"listenDOM",value:function(S,C,O){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push({node:C,handler:O})}}]),k})(u.default);w.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},w.sources={API:"api",SILENT:"silent",USER:"user"},s.default=w}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});function a(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var o=function c(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,c),this.quill=u,this.options=f};o.DEFAULTS={},s.default=o}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=["error","warn","log","info"],o="warn";function c(f){if(a.indexOf(f)<=a.indexOf(o)){for(var h,p=arguments.length,m=Array(p>1?p-1:0),g=1;g<p;g++)m[g-1]=arguments[g];(h=console)[f].apply(h,m)}}function u(f){return a.reduce(function(h,p){return h[p]=c.bind(console,p,f),h},{})}c.level=u.level=function(f){o=f},s.default=u}),(function(n,s,i){var a=Array.prototype.slice,o=i(52),c=i(53),u=n.exports=function(m,g,y){return y||(y={}),m===g?!0:m instanceof Date&&g instanceof Date?m.getTime()===g.getTime():!m||!g||typeof m!="object"&&typeof g!="object"?y.strict?m===g:m==g:p(m,g,y)};function f(m){return m==null}function h(m){return!(!m||typeof m!="object"||typeof m.length!="number"||typeof m.copy!="function"||typeof m.slice!="function"||m.length>0&&typeof m[0]!="number")}function p(m,g,y){var b,v;if(f(m)||f(g)||m.prototype!==g.prototype)return!1;if(c(m))return c(g)?(m=a.call(m),g=a.call(g),u(m,g,y)):!1;if(h(m)){if(!h(g)||m.length!==g.length)return!1;for(b=0;b<m.length;b++)if(m[b]!==g[b])return!1;return!0}try{var w=o(m),N=o(g)}catch{return!1}if(w.length!=N.length)return!1;for(w.sort(),N.sort(),b=w.length-1;b>=0;b--)if(w[b]!=N[b])return!1;for(b=w.length-1;b>=0;b--)if(v=w[b],!u(m[v],g[v],y))return!1;return typeof m==typeof g}}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=i(1),o=(function(){function c(u,f,h){h===void 0&&(h={}),this.attrName=u,this.keyName=f;var p=a.Scope.TYPE&a.Scope.ATTRIBUTE;h.scope!=null?this.scope=h.scope&a.Scope.LEVEL|p:this.scope=a.Scope.ATTRIBUTE,h.whitelist!=null&&(this.whitelist=h.whitelist)}return c.keys=function(u){return[].map.call(u.attributes,function(f){return f.name})},c.prototype.add=function(u,f){return this.canAdd(u,f)?(u.setAttribute(this.keyName,f),!0):!1},c.prototype.canAdd=function(u,f){var h=a.query(u,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return h==null?!1:this.whitelist==null?!0:typeof f=="string"?this.whitelist.indexOf(f.replace(/["']/g,""))>-1:this.whitelist.indexOf(f)>-1},c.prototype.remove=function(u){u.removeAttribute(this.keyName)},c.prototype.value=function(u){var f=u.getAttribute(this.keyName);return this.canAdd(u,f)&&f?f:""},c})();s.default=o}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.Code=void 0;var a=(function(){function M(B,I){var R=[],P=!0,q=!1,H=void 0;try{for(var G=B[Symbol.iterator](),ne;!(P=(ne=G.next()).done)&&(R.push(ne.value),!(I&&R.length===I));P=!0);}catch(X){q=!0,H=X}finally{try{!P&&G.return&&G.return()}finally{if(q)throw H}}return R}return function(B,I){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return M(B,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function M(B,I){for(var R=0;R<I.length;R++){var P=I[R];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(B,P.key,P)}}return function(B,I,R){return I&&M(B.prototype,I),R&&M(B,R),B}})(),c=function M(B,I,R){B===null&&(B=Function.prototype);var P=Object.getOwnPropertyDescriptor(B,I);if(P===void 0){var q=Object.getPrototypeOf(B);return q===null?void 0:M(q,I,R)}else{if("value"in P)return P.value;var H=P.get;return H===void 0?void 0:H.call(R)}},u=i(2),f=N(u),h=i(0),p=N(h),m=i(4),g=N(m),y=i(6),b=N(y),v=i(7),w=N(v);function N(M){return M&&M.__esModule?M:{default:M}}function k(M,B){if(!(M instanceof B))throw new TypeError("Cannot call a class as a function")}function j(M,B){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:M}function S(M,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);M.prototype=Object.create(B&&B.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(M,B):M.__proto__=B)}var C=(function(M){S(B,M);function B(){return k(this,B),j(this,(B.__proto__||Object.getPrototypeOf(B)).apply(this,arguments))}return B})(b.default);C.blotName="code",C.tagName="CODE";var O=(function(M){S(B,M);function B(){return k(this,B),j(this,(B.__proto__||Object.getPrototypeOf(B)).apply(this,arguments))}return o(B,[{key:"delta",value:function(){var R=this,P=this.domNode.textContent;return P.endsWith(`
`)&&(P=P.slice(0,-1)),P.split(`
`).reduce(function(q,H){return q.insert(H).insert(`
`,R.formats())},new f.default)}},{key:"format",value:function(R,P){if(!(R===this.statics.blotName&&P)){var q=this.descendant(w.default,this.length()-1),H=a(q,1),G=H[0];G!=null&&G.deleteAt(G.length()-1,1),c(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"format",this).call(this,R,P)}}},{key:"formatAt",value:function(R,P,q,H){if(P!==0&&!(p.default.query(q,p.default.Scope.BLOCK)==null||q===this.statics.blotName&&H===this.statics.formats(this.domNode))){var G=this.newlineIndex(R);if(!(G<0||G>=R+P)){var ne=this.newlineIndex(R,!0)+1,X=G-ne+1,ee=this.isolate(ne,X),Y=ee.next;ee.format(q,H),Y instanceof B&&Y.formatAt(0,R-ne+P-X,q,H)}}}},{key:"insertAt",value:function(R,P,q){if(q==null){var H=this.descendant(w.default,R),G=a(H,2),ne=G[0],X=G[1];ne.insertAt(X,P)}}},{key:"length",value:function(){var R=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?R:R+1}},{key:"newlineIndex",value:function(R){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(P)return this.domNode.textContent.slice(0,R).lastIndexOf(`
`);var q=this.domNode.textContent.slice(R).indexOf(`
`);return q>-1?R+q:-1}},{key:"optimize",value:function(R){this.domNode.textContent.endsWith(`
`)||this.appendChild(p.default.create("text",`
`)),c(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"optimize",this).call(this,R);var P=this.next;P!=null&&P.prev===this&&P.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===P.statics.formats(P.domNode)&&(P.optimize(R),P.moveChildren(this),P.remove())}},{key:"replace",value:function(R){c(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"replace",this).call(this,R),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(P){var q=p.default.find(P);q==null?P.parentNode.removeChild(P):q instanceof p.default.Embed?q.remove():q.unwrap()})}}],[{key:"create",value:function(R){var P=c(B.__proto__||Object.getPrototypeOf(B),"create",this).call(this,R);return P.setAttribute("spellcheck",!1),P}},{key:"formats",value:function(){return!0}}]),B})(g.default);O.blotName="code-block",O.tagName="PRE",O.TAB="  ",s.Code=C,s.default=O}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},o=(function(){function Y(U,T){var W=[],z=!0,Q=!1,Z=void 0;try{for(var V=U[Symbol.iterator](),ie;!(z=(ie=V.next()).done)&&(W.push(ie.value),!(T&&W.length===T));z=!0);}catch(de){Q=!0,Z=de}finally{try{!z&&V.return&&V.return()}finally{if(Q)throw Z}}return W}return function(U,T){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return Y(U,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),c=(function(){function Y(U,T){for(var W=0;W<T.length;W++){var z=T[W];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(U,z.key,z)}}return function(U,T,W){return T&&Y(U.prototype,T),W&&Y(U,W),U}})(),u=i(2),f=P(u),h=i(20),p=P(h),m=i(0),g=P(m),y=i(13),b=P(y),v=i(24),w=P(v),N=i(4),k=P(N),j=i(16),S=P(j),C=i(21),O=P(C),M=i(11),B=P(M),I=i(3),R=P(I);function P(Y){return Y&&Y.__esModule?Y:{default:Y}}function q(Y,U,T){return U in Y?Object.defineProperty(Y,U,{value:T,enumerable:!0,configurable:!0,writable:!0}):Y[U]=T,Y}function H(Y,U){if(!(Y instanceof U))throw new TypeError("Cannot call a class as a function")}var G=/^[ -~]*$/,ne=(function(){function Y(U){H(this,Y),this.scroll=U,this.delta=this.getDelta()}return c(Y,[{key:"applyDelta",value:function(T){var W=this,z=!1;this.scroll.update();var Q=this.scroll.length();return this.scroll.batchStart(),T=ee(T),T.reduce(function(Z,V){var ie=V.retain||V.delete||V.insert.length||1,de=V.attributes||{};if(V.insert!=null){if(typeof V.insert=="string"){var fe=V.insert;fe.endsWith(`
`)&&z&&(z=!1,fe=fe.slice(0,-1)),Z>=Q&&!fe.endsWith(`
`)&&(z=!0),W.scroll.insertAt(Z,fe);var ve=W.scroll.line(Z),He=o(ve,2),$e=He[0],st=He[1],_e=(0,R.default)({},(0,N.bubbleFormats)($e));if($e instanceof k.default){var it=$e.descendant(g.default.Leaf,st),rt=o(it,1),at=rt[0];_e=(0,R.default)(_e,(0,N.bubbleFormats)(at))}de=p.default.attributes.diff(_e,de)||{}}else if(a(V.insert)==="object"){var Oe=Object.keys(V.insert)[0];if(Oe==null)return Z;W.scroll.insertAt(Z,Oe,V.insert[Oe])}Q+=ie}return Object.keys(de).forEach(function(oe){W.scroll.formatAt(Z,ie,oe,de[oe])}),Z+ie},0),T.reduce(function(Z,V){return typeof V.delete=="number"?(W.scroll.deleteAt(Z,V.delete),Z):Z+(V.retain||V.insert.length||1)},0),this.scroll.batchEnd(),this.update(T)}},{key:"deleteText",value:function(T,W){return this.scroll.deleteAt(T,W),this.update(new f.default().retain(T).delete(W))}},{key:"formatLine",value:function(T,W){var z=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Q).forEach(function(Z){if(!(z.scroll.whitelist!=null&&!z.scroll.whitelist[Z])){var V=z.scroll.lines(T,Math.max(W,1)),ie=W;V.forEach(function(de){var fe=de.length();if(!(de instanceof b.default))de.format(Z,Q[Z]);else{var ve=T-de.offset(z.scroll),He=de.newlineIndex(ve+ie)-ve+1;de.formatAt(ve,He,Z,Q[Z])}ie-=fe})}}),this.scroll.optimize(),this.update(new f.default().retain(T).retain(W,(0,O.default)(Q)))}},{key:"formatText",value:function(T,W){var z=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Q).forEach(function(Z){z.scroll.formatAt(T,W,Z,Q[Z])}),this.update(new f.default().retain(T).retain(W,(0,O.default)(Q)))}},{key:"getContents",value:function(T,W){return this.delta.slice(T,T+W)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(T,W){return T.concat(W.delta())},new f.default)}},{key:"getFormat",value:function(T){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=[],Q=[];W===0?this.scroll.path(T).forEach(function(V){var ie=o(V,1),de=ie[0];de instanceof k.default?z.push(de):de instanceof g.default.Leaf&&Q.push(de)}):(z=this.scroll.lines(T,W),Q=this.scroll.descendants(g.default.Leaf,T,W));var Z=[z,Q].map(function(V){if(V.length===0)return{};for(var ie=(0,N.bubbleFormats)(V.shift());Object.keys(ie).length>0;){var de=V.shift();if(de==null)return ie;ie=X((0,N.bubbleFormats)(de),ie)}return ie});return R.default.apply(R.default,Z)}},{key:"getText",value:function(T,W){return this.getContents(T,W).filter(function(z){return typeof z.insert=="string"}).map(function(z){return z.insert}).join("")}},{key:"insertEmbed",value:function(T,W,z){return this.scroll.insertAt(T,W,z),this.update(new f.default().retain(T).insert(q({},W,z)))}},{key:"insertText",value:function(T,W){var z=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return W=W.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(T,W),Object.keys(Q).forEach(function(Z){z.scroll.formatAt(T,W.length,Z,Q[Z])}),this.update(new f.default().retain(T).insert(W,(0,O.default)(Q)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var T=this.scroll.children.head;return T.statics.blotName!==k.default.blotName||T.children.length>1?!1:T.children.head instanceof S.default}},{key:"removeFormat",value:function(T,W){var z=this.getText(T,W),Q=this.scroll.line(T+W),Z=o(Q,2),V=Z[0],ie=Z[1],de=0,fe=new f.default;V!=null&&(V instanceof b.default?de=V.newlineIndex(ie)-ie+1:de=V.length()-ie,fe=V.delta().slice(ie,ie+de-1).insert(`
`));var ve=this.getContents(T,W+de),He=ve.diff(new f.default().insert(z).concat(fe)),$e=new f.default().retain(T).concat(He);return this.applyDelta($e)}},{key:"update",value:function(T){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Q=this.delta;if(W.length===1&&W[0].type==="characterData"&&W[0].target.data.match(G)&&g.default.find(W[0].target)){var Z=g.default.find(W[0].target),V=(0,N.bubbleFormats)(Z),ie=Z.offset(this.scroll),de=W[0].oldValue.replace(w.default.CONTENTS,""),fe=new f.default().insert(de),ve=new f.default().insert(Z.value()),He=new f.default().retain(ie).concat(fe.diff(ve,z));T=He.reduce(function($e,st){return st.insert?$e.insert(st.insert,V):$e.push(st)},new f.default),this.delta=Q.compose(T)}else this.delta=this.getDelta(),(!T||!(0,B.default)(Q.compose(T),this.delta))&&(T=Q.diff(this.delta,z));return T}}]),Y})();function X(Y,U){return Object.keys(U).reduce(function(T,W){return Y[W]==null||(U[W]===Y[W]?T[W]=U[W]:Array.isArray(U[W])?U[W].indexOf(Y[W])<0&&(T[W]=U[W].concat([Y[W]])):T[W]=[U[W],Y[W]]),T},{})}function ee(Y){return Y.reduce(function(U,T){if(T.insert===1){var W=(0,O.default)(T.attributes);return delete W.image,U.insert({image:T.attributes.image},W)}if(T.attributes!=null&&(T.attributes.list===!0||T.attributes.bullet===!0)&&(T=(0,O.default)(T),T.attributes.list?T.attributes.list="ordered":(T.attributes.list="bullet",delete T.attributes.bullet)),typeof T.insert=="string"){var z=T.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return U.insert(z,T.attributes)}return U.push(T)},new f.default)}s.default=ne}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.Range=void 0;var a=(function(){function M(B,I){var R=[],P=!0,q=!1,H=void 0;try{for(var G=B[Symbol.iterator](),ne;!(P=(ne=G.next()).done)&&(R.push(ne.value),!(I&&R.length===I));P=!0);}catch(X){q=!0,H=X}finally{try{!P&&G.return&&G.return()}finally{if(q)throw H}}return R}return function(B,I){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return M(B,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function M(B,I){for(var R=0;R<I.length;R++){var P=I[R];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(B,P.key,P)}}return function(B,I,R){return I&&M(B.prototype,I),R&&M(B,R),B}})(),c=i(0),u=w(c),f=i(21),h=w(f),p=i(11),m=w(p),g=i(8),y=w(g),b=i(10),v=w(b);function w(M){return M&&M.__esModule?M:{default:M}}function N(M){if(Array.isArray(M)){for(var B=0,I=Array(M.length);B<M.length;B++)I[B]=M[B];return I}else return Array.from(M)}function k(M,B){if(!(M instanceof B))throw new TypeError("Cannot call a class as a function")}var j=(0,v.default)("quill:selection"),S=function M(B){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;k(this,M),this.index=B,this.length=I},C=(function(){function M(B,I){var R=this;k(this,M),this.emitter=I,this.scroll=B,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new S(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){R.mouseDown||setTimeout(R.update.bind(R,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(P,q){P===y.default.events.TEXT_CHANGE&&q.length()>0&&R.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(R.hasFocus()){var P=R.getNativeRange();P!=null&&P.start.node!==R.cursor.textNode&&R.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{R.setNativeRange(P.start.node,P.start.offset,P.end.node,P.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(P,q){if(q.range){var H=q.range,G=H.startNode,ne=H.startOffset,X=H.endNode,ee=H.endOffset;R.setNativeRange(G,ne,X,ee)}}),this.update(y.default.sources.SILENT)}return o(M,[{key:"handleComposition",value:function(){var I=this;this.root.addEventListener("compositionstart",function(){I.composing=!0}),this.root.addEventListener("compositionend",function(){if(I.composing=!1,I.cursor.parent){var R=I.cursor.restore();if(!R)return;setTimeout(function(){I.setNativeRange(R.startNode,R.startOffset,R.endNode,R.endOffset)},1)}})}},{key:"handleDragging",value:function(){var I=this;this.emitter.listenDOM("mousedown",document.body,function(){I.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){I.mouseDown=!1,I.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(I,R){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[I])){this.scroll.update();var P=this.getNativeRange();if(!(P==null||!P.native.collapsed||u.default.query(I,u.default.Scope.BLOCK))){if(P.start.node!==this.cursor.textNode){var q=u.default.find(P.start.node,!1);if(q==null)return;if(q instanceof u.default.Leaf){var H=q.split(P.start.offset);q.parent.insertBefore(this.cursor,H)}else q.insertBefore(this.cursor,P.start.node);this.cursor.attach()}this.cursor.format(I,R),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(I){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,P=this.scroll.length();I=Math.min(I,P-1),R=Math.min(I+R,P-1)-I;var q=void 0,H=this.scroll.leaf(I),G=a(H,2),ne=G[0],X=G[1];if(ne==null)return null;var ee=ne.position(X,!0),Y=a(ee,2);q=Y[0],X=Y[1];var U=document.createRange();if(R>0){U.setStart(q,X);var T=this.scroll.leaf(I+R),W=a(T,2);if(ne=W[0],X=W[1],ne==null)return null;var z=ne.position(X,!0),Q=a(z,2);return q=Q[0],X=Q[1],U.setEnd(q,X),U.getBoundingClientRect()}else{var Z="left",V=void 0;return q instanceof Text?(X<q.data.length?(U.setStart(q,X),U.setEnd(q,X+1)):(U.setStart(q,X-1),U.setEnd(q,X),Z="right"),V=U.getBoundingClientRect()):(V=ne.domNode.getBoundingClientRect(),X>0&&(Z="right")),{bottom:V.top+V.height,height:V.height,left:V[Z],right:V[Z],top:V.top,width:0}}}},{key:"getNativeRange",value:function(){var I=document.getSelection();if(I==null||I.rangeCount<=0)return null;var R=I.getRangeAt(0);if(R==null)return null;var P=this.normalizeNative(R);return j.info("getNativeRange",P),P}},{key:"getRange",value:function(){var I=this.getNativeRange();if(I==null)return[null,null];var R=this.normalizedToRange(I);return[R,I]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(I){var R=this,P=[[I.start.node,I.start.offset]];I.native.collapsed||P.push([I.end.node,I.end.offset]);var q=P.map(function(ne){var X=a(ne,2),ee=X[0],Y=X[1],U=u.default.find(ee,!0),T=U.offset(R.scroll);return Y===0?T:U instanceof u.default.Container?T+U.length():T+U.index(ee,Y)}),H=Math.min(Math.max.apply(Math,N(q)),this.scroll.length()-1),G=Math.min.apply(Math,[H].concat(N(q)));return new S(G,H-G)}},{key:"normalizeNative",value:function(I){if(!O(this.root,I.startContainer)||!I.collapsed&&!O(this.root,I.endContainer))return null;var R={start:{node:I.startContainer,offset:I.startOffset},end:{node:I.endContainer,offset:I.endOffset},native:I};return[R.start,R.end].forEach(function(P){for(var q=P.node,H=P.offset;!(q instanceof Text)&&q.childNodes.length>0;)if(q.childNodes.length>H)q=q.childNodes[H],H=0;else if(q.childNodes.length===H)q=q.lastChild,H=q instanceof Text?q.data.length:q.childNodes.length+1;else break;P.node=q,P.offset=H}),R}},{key:"rangeToNative",value:function(I){var R=this,P=I.collapsed?[I.index]:[I.index,I.index+I.length],q=[],H=this.scroll.length();return P.forEach(function(G,ne){G=Math.min(H-1,G);var X=void 0,ee=R.scroll.leaf(G),Y=a(ee,2),U=Y[0],T=Y[1],W=U.position(T,ne!==0),z=a(W,2);X=z[0],T=z[1],q.push(X,T)}),q.length<2&&(q=q.concat(q)),q}},{key:"scrollIntoView",value:function(I){var R=this.lastRange;if(R!=null){var P=this.getBounds(R.index,R.length);if(P!=null){var q=this.scroll.length()-1,H=this.scroll.line(Math.min(R.index,q)),G=a(H,1),ne=G[0],X=ne;if(R.length>0){var ee=this.scroll.line(Math.min(R.index+R.length,q)),Y=a(ee,1);X=Y[0]}if(!(ne==null||X==null)){var U=I.getBoundingClientRect();P.top<U.top?I.scrollTop-=U.top-P.top:P.bottom>U.bottom&&(I.scrollTop+=P.bottom-U.bottom)}}}}},{key:"setNativeRange",value:function(I,R){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:I,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,H=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(j.info("setNativeRange",I,R,P,q),!(I!=null&&(this.root.parentNode==null||I.parentNode==null||P.parentNode==null))){var G=document.getSelection();if(G!=null)if(I!=null){this.hasFocus()||this.root.focus();var ne=(this.getNativeRange()||{}).native;if(ne==null||H||I!==ne.startContainer||R!==ne.startOffset||P!==ne.endContainer||q!==ne.endOffset){I.tagName=="BR"&&(R=[].indexOf.call(I.parentNode.childNodes,I),I=I.parentNode),P.tagName=="BR"&&(q=[].indexOf.call(P.parentNode.childNodes,P),P=P.parentNode);var X=document.createRange();X.setStart(I,R),X.setEnd(P,q),G.removeAllRanges(),G.addRange(X)}}else G.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(I){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof R=="string"&&(P=R,R=!1),j.info("setRange",I),I!=null){var q=this.rangeToNative(I);this.setNativeRange.apply(this,N(q).concat([R]))}else this.setNativeRange(null);this.update(P)}},{key:"update",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,R=this.lastRange,P=this.getRange(),q=a(P,2),H=q[0],G=q[1];if(this.lastRange=H,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,m.default)(R,this.lastRange)){var ne;!this.composing&&G!=null&&G.native.collapsed&&G.start.node!==this.cursor.textNode&&this.cursor.restore();var X=[y.default.events.SELECTION_CHANGE,(0,h.default)(this.lastRange),(0,h.default)(R),I];if((ne=this.emitter).emit.apply(ne,[y.default.events.EDITOR_CHANGE].concat(X)),I!==y.default.sources.SILENT){var ee;(ee=this.emitter).emit.apply(ee,X)}}}}]),M})();function O(M,B){try{B.parentNode}catch{return!1}return B instanceof Text&&(B=B.parentNode),M.contains(B)}s.Range=S,s.default=C}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function y(b,v){for(var w=0;w<v.length;w++){var N=v[w];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,v,w){return v&&y(b.prototype,v),w&&y(b,w),b}})(),o=function y(b,v,w){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,v);if(N===void 0){var k=Object.getPrototypeOf(b);return k===null?void 0:y(k,v,w)}else{if("value"in N)return N.value;var j=N.get;return j===void 0?void 0:j.call(w)}},c=i(0),u=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function h(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function p(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function m(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var g=(function(y){m(b,y);function b(){return h(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,[{key:"insertInto",value:function(w,N){w.children.length===0?o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertInto",this).call(this,w,N):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),b})(u.default.Embed);g.blotName="break",g.tagName="BR",s.default=g}),(function(n,s,i){var a=this&&this.__extends||(function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var y in g)g.hasOwnProperty(y)&&(m[y]=g[y])};return function(m,g){p(m,g);function y(){this.constructor=m}m.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=i(44),c=i(30),u=i(1),f=(function(p){a(m,p);function m(g){var y=p.call(this,g)||this;return y.build(),y}return m.prototype.appendChild=function(g){this.insertBefore(g)},m.prototype.attach=function(){p.prototype.attach.call(this),this.children.forEach(function(g){g.attach()})},m.prototype.build=function(){var g=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var b=h(y);g.insertBefore(b,g.children.head||void 0)}catch(v){if(v instanceof u.ParchmentError)return;throw v}})},m.prototype.deleteAt=function(g,y){if(g===0&&y===this.length())return this.remove();this.children.forEachAt(g,y,function(b,v,w){b.deleteAt(v,w)})},m.prototype.descendant=function(g,y){var b=this.children.find(y),v=b[0],w=b[1];return g.blotName==null&&g(v)||g.blotName!=null&&v instanceof g?[v,w]:v instanceof m?v.descendant(g,w):[null,-1]},m.prototype.descendants=function(g,y,b){y===void 0&&(y=0),b===void 0&&(b=Number.MAX_VALUE);var v=[],w=b;return this.children.forEachAt(y,b,function(N,k,j){(g.blotName==null&&g(N)||g.blotName!=null&&N instanceof g)&&v.push(N),N instanceof m&&(v=v.concat(N.descendants(g,k,w))),w-=j}),v},m.prototype.detach=function(){this.children.forEach(function(g){g.detach()}),p.prototype.detach.call(this)},m.prototype.formatAt=function(g,y,b,v){this.children.forEachAt(g,y,function(w,N,k){w.formatAt(N,k,b,v)})},m.prototype.insertAt=function(g,y,b){var v=this.children.find(g),w=v[0],N=v[1];if(w)w.insertAt(N,y,b);else{var k=b==null?u.create("text",y):u.create(y,b);this.appendChild(k)}},m.prototype.insertBefore=function(g,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(b){return g instanceof b}))throw new u.ParchmentError("Cannot insert "+g.statics.blotName+" into "+this.statics.blotName);g.insertInto(this,y)},m.prototype.length=function(){return this.children.reduce(function(g,y){return g+y.length()},0)},m.prototype.moveChildren=function(g,y){this.children.forEach(function(b){g.insertBefore(b,y)})},m.prototype.optimize=function(g){if(p.prototype.optimize.call(this,g),this.children.length===0)if(this.statics.defaultChild!=null){var y=u.create(this.statics.defaultChild);this.appendChild(y),y.optimize(g)}else this.remove()},m.prototype.path=function(g,y){y===void 0&&(y=!1);var b=this.children.find(g,y),v=b[0],w=b[1],N=[[this,g]];return v instanceof m?N.concat(v.path(w,y)):(v!=null&&N.push([v,w]),N)},m.prototype.removeChild=function(g){this.children.remove(g)},m.prototype.replace=function(g){g instanceof m&&g.moveChildren(this),p.prototype.replace.call(this,g)},m.prototype.split=function(g,y){if(y===void 0&&(y=!1),!y){if(g===0)return this;if(g===this.length())return this.next}var b=this.clone();return this.parent.insertBefore(b,this.next),this.children.forEachAt(g,this.length(),function(v,w,N){v=v.split(w,y),b.appendChild(v)}),b},m.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},m.prototype.update=function(g,y){var b=this,v=[],w=[];g.forEach(function(N){N.target===b.domNode&&N.type==="childList"&&(v.push.apply(v,N.addedNodes),w.push.apply(w,N.removedNodes))}),w.forEach(function(N){if(!(N.parentNode!=null&&N.tagName!=="IFRAME"&&document.body.compareDocumentPosition(N)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var k=u.find(N);k!=null&&(k.domNode.parentNode==null||k.domNode.parentNode===b.domNode)&&k.detach()}}),v.filter(function(N){return N.parentNode==b.domNode}).sort(function(N,k){return N===k?0:N.compareDocumentPosition(k)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(N){var k=null;N.nextSibling!=null&&(k=u.find(N.nextSibling));var j=h(N);(j.next!=k||j.next==null)&&(j.parent!=null&&j.parent.removeChild(b),b.insertBefore(j,k||void 0))})},m})(c.default);function h(p){var m=u.find(p);if(m==null)try{m=u.create(p)}catch{m=u.create(u.Scope.INLINE),[].slice.call(p.childNodes).forEach(function(y){m.domNode.appendChild(y)}),p.parentNode&&p.parentNode.replaceChild(m.domNode,p),m.attach()}return m}s.default=f}),(function(n,s,i){var a=this&&this.__extends||(function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var y in g)g.hasOwnProperty(y)&&(m[y]=g[y])};return function(m,g){p(m,g);function y(){this.constructor=m}m.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=i(12),c=i(31),u=i(17),f=i(1),h=(function(p){a(m,p);function m(g){var y=p.call(this,g)||this;return y.attributes=new c.default(y.domNode),y}return m.formats=function(g){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return g.tagName.toLowerCase()},m.prototype.format=function(g,y){var b=f.query(g);b instanceof o.default?this.attributes.attribute(b,y):y&&b!=null&&(g!==this.statics.blotName||this.formats()[g]!==y)&&this.replaceWith(g,y)},m.prototype.formats=function(){var g=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(g[this.statics.blotName]=y),g},m.prototype.replaceWith=function(g,y){var b=p.prototype.replaceWith.call(this,g,y);return this.attributes.copy(b),b},m.prototype.update=function(g,y){var b=this;p.prototype.update.call(this,g,y),g.some(function(v){return v.target===b.domNode&&v.type==="attributes"})&&this.attributes.build()},m.prototype.wrap=function(g,y){var b=p.prototype.wrap.call(this,g,y);return b instanceof m&&b.statics.scope===this.statics.scope&&this.attributes.move(b),b},m})(u.default);s.default=h}),(function(n,s,i){var a=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])};return function(h,p){f(h,p);function m(){this.constructor=h}h.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=i(30),c=i(1),u=(function(f){a(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return h.value=function(p){return!0},h.prototype.index=function(p,m){return this.domNode===p||this.domNode.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(m,1):-1},h.prototype.position=function(p,m){var g=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return p>0&&(g+=1),[this.parent.domNode,g]},h.prototype.value=function(){var p;return p={},p[this.statics.blotName]=this.statics.value(this.domNode)||!0,p},h.scope=c.Scope.INLINE_BLOT,h})(o.default);s.default=u}),(function(n,s,i){var a=i(11),o=i(3),c={attributes:{compose:function(f,h,p){typeof f!="object"&&(f={}),typeof h!="object"&&(h={});var m=o(!0,{},h);p||(m=Object.keys(m).reduce(function(y,b){return m[b]!=null&&(y[b]=m[b]),y},{}));for(var g in f)f[g]!==void 0&&h[g]===void 0&&(m[g]=f[g]);return Object.keys(m).length>0?m:void 0},diff:function(f,h){typeof f!="object"&&(f={}),typeof h!="object"&&(h={});var p=Object.keys(f).concat(Object.keys(h)).reduce(function(m,g){return a(f[g],h[g])||(m[g]=h[g]===void 0?null:h[g]),m},{});return Object.keys(p).length>0?p:void 0},transform:function(f,h,p){if(typeof f!="object")return h;if(typeof h=="object"){if(!p)return h;var m=Object.keys(h).reduce(function(g,y){return f[y]===void 0&&(g[y]=h[y]),g},{});return Object.keys(m).length>0?m:void 0}}},iterator:function(f){return new u(f)},length:function(f){return typeof f.delete=="number"?f.delete:typeof f.retain=="number"?f.retain:typeof f.insert=="string"?f.insert.length:1}};function u(f){this.ops=f,this.index=0,this.offset=0}u.prototype.hasNext=function(){return this.peekLength()<1/0},u.prototype.next=function(f){f||(f=1/0);var h=this.ops[this.index];if(h){var p=this.offset,m=c.length(h);if(f>=m-p?(f=m-p,this.index+=1,this.offset=0):this.offset+=f,typeof h.delete=="number")return{delete:f};var g={};return h.attributes&&(g.attributes=h.attributes),typeof h.retain=="number"?g.retain=f:typeof h.insert=="string"?g.insert=h.insert.substr(p,f):g.insert=h.insert,g}else return{retain:1/0}},u.prototype.peek=function(){return this.ops[this.index]},u.prototype.peekLength=function(){return this.ops[this.index]?c.length(this.ops[this.index])-this.offset:1/0},u.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},u.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var f=this.offset,h=this.index,p=this.next(),m=this.ops.slice(this.index);return this.offset=f,this.index=h,[p].concat(m)}else return[]},n.exports=c}),(function(n,s){var i=(function(){function a(b,v){return v!=null&&b instanceof v}var o;try{o=Map}catch{o=function(){}}var c;try{c=Set}catch{c=function(){}}var u;try{u=Promise}catch{u=function(){}}function f(b,v,w,N,k){typeof v=="object"&&(w=v.depth,N=v.prototype,k=v.includeNonEnumerable,v=v.circular);var j=[],S=[],C=typeof Buffer<"u";typeof v>"u"&&(v=!0),typeof w>"u"&&(w=1/0);function O(M,B){if(M===null)return null;if(B===0)return M;var I,R;if(typeof M!="object")return M;if(a(M,o))I=new o;else if(a(M,c))I=new c;else if(a(M,u))I=new u(function(U,T){M.then(function(W){U(O(W,B-1))},function(W){T(O(W,B-1))})});else if(f.__isArray(M))I=[];else if(f.__isRegExp(M))I=new RegExp(M.source,y(M)),M.lastIndex&&(I.lastIndex=M.lastIndex);else if(f.__isDate(M))I=new Date(M.getTime());else{if(C&&Buffer.isBuffer(M))return Buffer.allocUnsafe?I=Buffer.allocUnsafe(M.length):I=new Buffer(M.length),M.copy(I),I;a(M,Error)?I=Object.create(M):typeof N>"u"?(R=Object.getPrototypeOf(M),I=Object.create(R)):(I=Object.create(N),R=N)}if(v){var P=j.indexOf(M);if(P!=-1)return S[P];j.push(M),S.push(I)}a(M,o)&&M.forEach(function(U,T){var W=O(T,B-1),z=O(U,B-1);I.set(W,z)}),a(M,c)&&M.forEach(function(U){var T=O(U,B-1);I.add(T)});for(var q in M){var H;R&&(H=Object.getOwnPropertyDescriptor(R,q)),!(H&&H.set==null)&&(I[q]=O(M[q],B-1))}if(Object.getOwnPropertySymbols)for(var G=Object.getOwnPropertySymbols(M),q=0;q<G.length;q++){var ne=G[q],X=Object.getOwnPropertyDescriptor(M,ne);X&&!X.enumerable&&!k||(I[ne]=O(M[ne],B-1),X.enumerable||Object.defineProperty(I,ne,{enumerable:!1}))}if(k)for(var ee=Object.getOwnPropertyNames(M),q=0;q<ee.length;q++){var Y=ee[q],X=Object.getOwnPropertyDescriptor(M,Y);X&&X.enumerable||(I[Y]=O(M[Y],B-1),Object.defineProperty(I,Y,{enumerable:!1}))}return I}return O(b,w)}f.clonePrototype=function(v){if(v===null)return null;var w=function(){};return w.prototype=v,new w};function h(b){return Object.prototype.toString.call(b)}f.__objToStr=h;function p(b){return typeof b=="object"&&h(b)==="[object Date]"}f.__isDate=p;function m(b){return typeof b=="object"&&h(b)==="[object Array]"}f.__isArray=m;function g(b){return typeof b=="object"&&h(b)==="[object RegExp]"}f.__isRegExp=g;function y(b){var v="";return b.global&&(v+="g"),b.ignoreCase&&(v+="i"),b.multiline&&(v+="m"),v}return f.__getRegExpFlags=y,f})();typeof n=="object"&&n.exports&&(n.exports=i)}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function I(R,P){var q=[],H=!0,G=!1,ne=void 0;try{for(var X=R[Symbol.iterator](),ee;!(H=(ee=X.next()).done)&&(q.push(ee.value),!(P&&q.length===P));H=!0);}catch(Y){G=!0,ne=Y}finally{try{!H&&X.return&&X.return()}finally{if(G)throw ne}}return q}return function(R,P){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return I(R,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function I(R,P){for(var q=0;q<P.length;q++){var H=P[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(R,H.key,H)}}return function(R,P,q){return P&&I(R.prototype,P),q&&I(R,q),R}})(),c=function I(R,P,q){R===null&&(R=Function.prototype);var H=Object.getOwnPropertyDescriptor(R,P);if(H===void 0){var G=Object.getPrototypeOf(R);return G===null?void 0:I(G,P,q)}else{if("value"in H)return H.value;var ne=H.get;return ne===void 0?void 0:ne.call(q)}},u=i(0),f=j(u),h=i(8),p=j(h),m=i(4),g=j(m),y=i(16),b=j(y),v=i(13),w=j(v),N=i(25),k=j(N);function j(I){return I&&I.__esModule?I:{default:I}}function S(I,R){if(!(I instanceof R))throw new TypeError("Cannot call a class as a function")}function C(I,R){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:I}function O(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);I.prototype=Object.create(R&&R.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(I,R):I.__proto__=R)}function M(I){return I instanceof g.default||I instanceof m.BlockEmbed}var B=(function(I){O(R,I);function R(P,q){S(this,R);var H=C(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,P));return H.emitter=q.emitter,Array.isArray(q.whitelist)&&(H.whitelist=q.whitelist.reduce(function(G,ne){return G[ne]=!0,G},{})),H.domNode.addEventListener("DOMNodeInserted",function(){}),H.optimize(),H.enable(),H}return o(R,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(q,H){var G=this.line(q),ne=a(G,2),X=ne[0],ee=ne[1],Y=this.line(q+H),U=a(Y,1),T=U[0];if(c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,q,H),T!=null&&X!==T&&ee>0){if(X instanceof m.BlockEmbed||T instanceof m.BlockEmbed){this.optimize();return}if(X instanceof w.default){var W=X.newlineIndex(X.length(),!0);if(W>-1&&(X=X.split(W+1),X===T)){this.optimize();return}}else if(T instanceof w.default){var z=T.newlineIndex(0);z>-1&&T.split(z+1)}var Q=T.children.head instanceof b.default?null:T.children.head;X.moveChildren(T,Q),X.remove()}this.optimize()}},{key:"enable",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",q)}},{key:"formatAt",value:function(q,H,G,ne){this.whitelist!=null&&!this.whitelist[G]||(c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,q,H,G,ne),this.optimize())}},{key:"insertAt",value:function(q,H,G){if(!(G!=null&&this.whitelist!=null&&!this.whitelist[H])){if(q>=this.length())if(G==null||f.default.query(H,f.default.Scope.BLOCK)==null){var ne=f.default.create(this.statics.defaultChild);this.appendChild(ne),G==null&&H.endsWith(`
`)&&(H=H.slice(0,-1)),ne.insertAt(0,H,G)}else{var X=f.default.create(H,G);this.appendChild(X)}else c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,q,H,G);this.optimize()}}},{key:"insertBefore",value:function(q,H){if(q.statics.scope===f.default.Scope.INLINE_BLOT){var G=f.default.create(this.statics.defaultChild);G.appendChild(q),q=G}c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,q,H)}},{key:"leaf",value:function(q){return this.path(q).pop()||[null,-1]}},{key:"line",value:function(q){return q===this.length()?this.line(q-1):this.descendant(M,q)}},{key:"lines",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,G=function ne(X,ee,Y){var U=[],T=Y;return X.children.forEachAt(ee,Y,function(W,z,Q){M(W)?U.push(W):W instanceof f.default.Container&&(U=U.concat(ne(W,z,T))),T-=Q}),U};return G(this,q,H)}},{key:"optimize",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,q,H),q.length>0&&this.emitter.emit(p.default.events.SCROLL_OPTIMIZE,q,H))}},{key:"path",value:function(q){return c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,q).slice(1)}},{key:"update",value:function(q){if(this.batch!==!0){var H=p.default.sources.USER;typeof q=="string"&&(H=q),Array.isArray(q)||(q=this.observer.takeRecords()),q.length>0&&this.emitter.emit(p.default.events.SCROLL_BEFORE_UPDATE,H,q),c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"update",this).call(this,q.concat([])),q.length>0&&this.emitter.emit(p.default.events.SCROLL_UPDATE,H,q)}}}]),R})(f.default.Scroll);B.blotName="scroll",B.className="ql-editor",B.tagName="DIV",B.defaultChild="block",B.allowedChildren=[g.default,m.BlockEmbed,k.default],s.default=B}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.SHORTKEY=s.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},o=(function(){function V(ie,de){var fe=[],ve=!0,He=!1,$e=void 0;try{for(var st=ie[Symbol.iterator](),_e;!(ve=(_e=st.next()).done)&&(fe.push(_e.value),!(de&&fe.length===de));ve=!0);}catch(it){He=!0,$e=it}finally{try{!ve&&st.return&&st.return()}finally{if(He)throw $e}}return fe}return function(ie,de){if(Array.isArray(ie))return ie;if(Symbol.iterator in Object(ie))return V(ie,de);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),c=(function(){function V(ie,de){for(var fe=0;fe<de.length;fe++){var ve=de[fe];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(ie,ve.key,ve)}}return function(ie,de,fe){return de&&V(ie.prototype,de),fe&&V(ie,fe),ie}})(),u=i(21),f=I(u),h=i(11),p=I(h),m=i(3),g=I(m),y=i(2),b=I(y),v=i(20),w=I(v),N=i(0),k=I(N),j=i(5),S=I(j),C=i(10),O=I(C),M=i(9),B=I(M);function I(V){return V&&V.__esModule?V:{default:V}}function R(V,ie,de){return ie in V?Object.defineProperty(V,ie,{value:de,enumerable:!0,configurable:!0,writable:!0}):V[ie]=de,V}function P(V,ie){if(!(V instanceof ie))throw new TypeError("Cannot call a class as a function")}function q(V,ie){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie&&(typeof ie=="object"||typeof ie=="function")?ie:V}function H(V,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);V.prototype=Object.create(ie&&ie.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf(V,ie):V.__proto__=ie)}var G=(0,O.default)("quill:keyboard"),ne=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",X=(function(V){H(ie,V),c(ie,null,[{key:"match",value:function(fe,ve){return ve=Z(ve),["altKey","ctrlKey","metaKey","shiftKey"].some(function(He){return!!ve[He]!==fe[He]&&ve[He]!==null})?!1:ve.key===(fe.which||fe.keyCode)}}]);function ie(de,fe){P(this,ie);var ve=q(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this,de,fe));return ve.bindings={},Object.keys(ve.options.bindings).forEach(function(He){He==="list autofill"&&de.scroll.whitelist!=null&&!de.scroll.whitelist.list||ve.options.bindings[He]&&ve.addBinding(ve.options.bindings[He])}),ve.addBinding({key:ie.keys.ENTER,shiftKey:null},W),ve.addBinding({key:ie.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ve.addBinding({key:ie.keys.BACKSPACE},{collapsed:!0},Y),ve.addBinding({key:ie.keys.DELETE},{collapsed:!0},U)):(ve.addBinding({key:ie.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Y),ve.addBinding({key:ie.keys.DELETE},{collapsed:!0,suffix:/^.?$/},U)),ve.addBinding({key:ie.keys.BACKSPACE},{collapsed:!1},T),ve.addBinding({key:ie.keys.DELETE},{collapsed:!1},T),ve.addBinding({key:ie.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Y),ve.listen(),ve}return c(ie,[{key:"addBinding",value:function(fe){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},He=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},$e=Z(fe);if($e==null||$e.key==null)return G.warn("Attempted to add invalid keyboard binding",$e);typeof ve=="function"&&(ve={handler:ve}),typeof He=="function"&&(He={handler:He}),$e=(0,g.default)($e,ve,He),this.bindings[$e.key]=this.bindings[$e.key]||[],this.bindings[$e.key].push($e)}},{key:"listen",value:function(){var fe=this;this.quill.root.addEventListener("keydown",function(ve){if(!ve.defaultPrevented){var He=ve.which||ve.keyCode,$e=(fe.bindings[He]||[]).filter(function(Fe){return ie.match(ve,Fe)});if($e.length!==0){var st=fe.quill.getSelection();if(!(st==null||!fe.quill.hasFocus())){var _e=fe.quill.getLine(st.index),it=o(_e,2),rt=it[0],at=it[1],Oe=fe.quill.getLeaf(st.index),oe=o(Oe,2),ge=oe[0],Ne=oe[1],Ae=st.length===0?[ge,Ne]:fe.quill.getLeaf(st.index+st.length),ke=o(Ae,2),re=ke[0],te=ke[1],J=ge instanceof k.default.Text?ge.value().slice(0,Ne):"",ue=re instanceof k.default.Text?re.value().slice(te):"",Ce={collapsed:st.length===0,empty:st.length===0&&rt.length()<=1,format:fe.quill.getFormat(st),offset:at,prefix:J,suffix:ue},ze=$e.some(function(Fe){if(Fe.collapsed!=null&&Fe.collapsed!==Ce.collapsed||Fe.empty!=null&&Fe.empty!==Ce.empty||Fe.offset!=null&&Fe.offset!==Ce.offset)return!1;if(Array.isArray(Fe.format)){if(Fe.format.every(function(Ue){return Ce.format[Ue]==null}))return!1}else if(a(Fe.format)==="object"&&!Object.keys(Fe.format).every(function(Ue){return Fe.format[Ue]===!0?Ce.format[Ue]!=null:Fe.format[Ue]===!1?Ce.format[Ue]==null:(0,p.default)(Fe.format[Ue],Ce.format[Ue])}))return!1;return Fe.prefix!=null&&!Fe.prefix.test(Ce.prefix)||Fe.suffix!=null&&!Fe.suffix.test(Ce.suffix)?!1:Fe.handler.call(fe,st,Ce)!==!0});ze&&ve.preventDefault()}}}})}}]),ie})(B.default);X.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},X.DEFAULTS={bindings:{bold:Q("bold"),italic:Q("italic"),underline:Q("underline"),indent:{key:X.keys.TAB,format:["blockquote","indent","list"],handler:function(ie,de){if(de.collapsed&&de.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:X.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ie,de){if(de.collapsed&&de.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:X.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ie,de){de.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):de.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":z(!0),"outdent code-block":z(!1),"remove tab":{key:X.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ie){this.quill.deleteText(ie.index-1,1,S.default.sources.USER)}},tab:{key:X.keys.TAB,handler:function(ie){this.quill.history.cutoff();var de=new b.default().retain(ie.index).delete(ie.length).insert("	");this.quill.updateContents(de,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ie.index+1,S.default.sources.SILENT)}},"list empty enter":{key:X.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ie,de){this.quill.format("list",!1,S.default.sources.USER),de.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:X.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ie){var de=this.quill.getLine(ie.index),fe=o(de,2),ve=fe[0],He=fe[1],$e=(0,g.default)({},ve.formats(),{list:"checked"}),st=new b.default().retain(ie.index).insert(`
`,$e).retain(ve.length()-He-1).retain(1,{list:"unchecked"});this.quill.updateContents(st,S.default.sources.USER),this.quill.setSelection(ie.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:X.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ie,de){var fe=this.quill.getLine(ie.index),ve=o(fe,2),He=ve[0],$e=ve[1],st=new b.default().retain(ie.index).insert(`
`,de.format).retain(He.length()-$e-1).retain(1,{header:null});this.quill.updateContents(st,S.default.sources.USER),this.quill.setSelection(ie.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ie,de){var fe=de.prefix.length,ve=this.quill.getLine(ie.index),He=o(ve,2),$e=He[0],st=He[1];if(st>fe)return!0;var _e=void 0;switch(de.prefix.trim()){case"[]":case"[ ]":_e="unchecked";break;case"[x]":_e="checked";break;case"-":case"*":_e="bullet";break;default:_e="ordered"}this.quill.insertText(ie.index," ",S.default.sources.USER),this.quill.history.cutoff();var it=new b.default().retain(ie.index-st).delete(fe+1).retain($e.length()-2-st).retain(1,{list:_e});this.quill.updateContents(it,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ie.index-fe,S.default.sources.SILENT)}},"code exit":{key:X.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ie){var de=this.quill.getLine(ie.index),fe=o(de,2),ve=fe[0],He=fe[1],$e=new b.default().retain(ie.index+ve.length()-He-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents($e,S.default.sources.USER)}},"embed left":ee(X.keys.LEFT,!1),"embed left shift":ee(X.keys.LEFT,!0),"embed right":ee(X.keys.RIGHT,!1),"embed right shift":ee(X.keys.RIGHT,!0)}};function ee(V,ie){var de,fe=V===X.keys.LEFT?"prefix":"suffix";return de={key:V,shiftKey:ie,altKey:null},R(de,fe,/^$/),R(de,"handler",function(He){var $e=He.index;V===X.keys.RIGHT&&($e+=He.length+1);var st=this.quill.getLeaf($e),_e=o(st,1),it=_e[0];return it instanceof k.default.Embed?(V===X.keys.LEFT?ie?this.quill.setSelection(He.index-1,He.length+1,S.default.sources.USER):this.quill.setSelection(He.index-1,S.default.sources.USER):ie?this.quill.setSelection(He.index,He.length+1,S.default.sources.USER):this.quill.setSelection(He.index+He.length+1,S.default.sources.USER),!1):!0}),de}function Y(V,ie){if(!(V.index===0||this.quill.getLength()<=1)){var de=this.quill.getLine(V.index),fe=o(de,1),ve=fe[0],He={};if(ie.offset===0){var $e=this.quill.getLine(V.index-1),st=o($e,1),_e=st[0];if(_e!=null&&_e.length()>1){var it=ve.formats(),rt=this.quill.getFormat(V.index-1,1);He=w.default.attributes.diff(it,rt)||{}}}var at=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ie.prefix)?2:1;this.quill.deleteText(V.index-at,at,S.default.sources.USER),Object.keys(He).length>0&&this.quill.formatLine(V.index-at,at,He,S.default.sources.USER),this.quill.focus()}}function U(V,ie){var de=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ie.suffix)?2:1;if(!(V.index>=this.quill.getLength()-de)){var fe={},ve=0,He=this.quill.getLine(V.index),$e=o(He,1),st=$e[0];if(ie.offset>=st.length()-1){var _e=this.quill.getLine(V.index+1),it=o(_e,1),rt=it[0];if(rt){var at=st.formats(),Oe=this.quill.getFormat(V.index,1);fe=w.default.attributes.diff(at,Oe)||{},ve=rt.length()}}this.quill.deleteText(V.index,de,S.default.sources.USER),Object.keys(fe).length>0&&this.quill.formatLine(V.index+ve-1,de,fe,S.default.sources.USER)}}function T(V){var ie=this.quill.getLines(V),de={};if(ie.length>1){var fe=ie[0].formats(),ve=ie[ie.length-1].formats();de=w.default.attributes.diff(ve,fe)||{}}this.quill.deleteText(V,S.default.sources.USER),Object.keys(de).length>0&&this.quill.formatLine(V.index,1,de,S.default.sources.USER),this.quill.setSelection(V.index,S.default.sources.SILENT),this.quill.focus()}function W(V,ie){var de=this;V.length>0&&this.quill.scroll.deleteAt(V.index,V.length);var fe=Object.keys(ie.format).reduce(function(ve,He){return k.default.query(He,k.default.Scope.BLOCK)&&!Array.isArray(ie.format[He])&&(ve[He]=ie.format[He]),ve},{});this.quill.insertText(V.index,`
`,fe,S.default.sources.USER),this.quill.setSelection(V.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(ie.format).forEach(function(ve){fe[ve]==null&&(Array.isArray(ie.format[ve])||ve!=="link"&&de.quill.format(ve,ie.format[ve],S.default.sources.USER))})}function z(V){return{key:X.keys.TAB,shiftKey:!V,format:{"code-block":!0},handler:function(de){var fe=k.default.query("code-block"),ve=de.index,He=de.length,$e=this.quill.scroll.descendant(fe,ve),st=o($e,2),_e=st[0],it=st[1];if(_e!=null){var rt=this.quill.getIndex(_e),at=_e.newlineIndex(it,!0)+1,Oe=_e.newlineIndex(rt+it+He),oe=_e.domNode.textContent.slice(at,Oe).split(`
`);it=0,oe.forEach(function(ge,Ne){V?(_e.insertAt(at+it,fe.TAB),it+=fe.TAB.length,Ne===0?ve+=fe.TAB.length:He+=fe.TAB.length):ge.startsWith(fe.TAB)&&(_e.deleteAt(at+it,fe.TAB.length),it-=fe.TAB.length,Ne===0?ve-=fe.TAB.length:He-=fe.TAB.length),it+=ge.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(ve,He,S.default.sources.SILENT)}}}}function Q(V){return{key:V[0].toUpperCase(),shortKey:!0,handler:function(de,fe){this.quill.format(V,!fe.format[V],S.default.sources.USER)}}}function Z(V){if(typeof V=="string"||typeof V=="number")return Z({key:V});if((typeof V>"u"?"undefined":a(V))==="object"&&(V=(0,f.default)(V,!1)),typeof V.key=="string")if(X.keys[V.key.toUpperCase()]!=null)V.key=X.keys[V.key.toUpperCase()];else if(V.key.length===1)V.key=V.key.toUpperCase().charCodeAt(0);else return null;return V.shortKey&&(V[ne]=V.shortKey,delete V.shortKey),V}s.default=X,s.SHORTKEY=ne}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function w(N,k){var j=[],S=!0,C=!1,O=void 0;try{for(var M=N[Symbol.iterator](),B;!(S=(B=M.next()).done)&&(j.push(B.value),!(k&&j.length===k));S=!0);}catch(I){C=!0,O=I}finally{try{!S&&M.return&&M.return()}finally{if(C)throw O}}return j}return function(N,k){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return w(N,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function w(N,k,j){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,k);if(S===void 0){var C=Object.getPrototypeOf(N);return C===null?void 0:w(C,k,j)}else{if("value"in S)return S.value;var O=S.get;return O===void 0?void 0:O.call(j)}},c=(function(){function w(N,k){for(var j=0;j<k.length;j++){var S=k[j];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,k,j){return k&&w(N.prototype,k),j&&w(N,j),N}})(),u=i(0),f=m(u),h=i(7),p=m(h);function m(w){return w&&w.__esModule?w:{default:w}}function g(w,N){if(!(w instanceof N))throw new TypeError("Cannot call a class as a function")}function y(w,N){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:w}function b(w,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);w.prototype=Object.create(N&&N.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(w,N):w.__proto__=N)}var v=(function(w){b(N,w),c(N,null,[{key:"value",value:function(){}}]);function N(k,j){g(this,N);var S=y(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,k));return S.selection=j,S.textNode=document.createTextNode(N.CONTENTS),S.domNode.appendChild(S.textNode),S._length=0,S}return c(N,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(j,S){if(this._length!==0)return o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,j,S);for(var C=this,O=0;C!=null&&C.statics.scope!==f.default.Scope.BLOCK_BLOT;)O+=C.offset(C.parent),C=C.parent;C!=null&&(this._length=N.CONTENTS.length,C.optimize(),C.formatAt(O,N.CONTENTS.length,j,S),this._length=0)}},{key:"index",value:function(j,S){return j===this.textNode?0:o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"index",this).call(this,j,S)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var j=this.textNode,S=this.selection.getNativeRange(),C=void 0,O=void 0,M=void 0;if(S!=null&&S.start.node===j&&S.end.node===j){var B=[j,S.start.offset,S.end.offset];C=B[0],O=B[1],M=B[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==N.CONTENTS){var I=this.textNode.data.split(N.CONTENTS).join("");this.next instanceof p.default?(C=this.next.domNode,this.next.insertAt(0,I),this.textNode.data=N.CONTENTS):(this.textNode.data=I,this.parent.insertBefore(f.default.create(this.textNode),this),this.textNode=document.createTextNode(N.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),O!=null){var R=[O,M].map(function(q){return Math.max(0,Math.min(C.data.length,q-1))}),P=a(R,2);return O=P[0],M=P[1],{startNode:C,startOffset:O,endNode:C,endOffset:M}}}}},{key:"update",value:function(j,S){var C=this;if(j.some(function(M){return M.type==="characterData"&&M.target===C.textNode})){var O=this.restore();O&&(S.range=O)}}},{key:"value",value:function(){return""}}]),N})(f.default.Embed);v.blotName="cursor",v.className="ql-cursor",v.tagName="span",v.CONTENTS="\uFEFF",s.default=v}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=i(0),o=f(a),c=i(4),u=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function h(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function p(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function m(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var g=(function(y){m(b,y);function b(){return h(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return b})(o.default.Container);g.allowedChildren=[u.default,c.BlockEmbed,g],s.default=g}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.ColorStyle=s.ColorClass=s.ColorAttributor=void 0;var a=(function(){function v(w,N){for(var k=0;k<N.length;k++){var j=N[k];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,N,k){return N&&v(w.prototype,N),k&&v(w,k),w}})(),o=function v(w,N,k){w===null&&(w=Function.prototype);var j=Object.getOwnPropertyDescriptor(w,N);if(j===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:v(S,N,k)}else{if("value"in j)return j.value;var C=j.get;return C===void 0?void 0:C.call(k)}},c=i(0),u=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function h(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function p(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function m(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var g=(function(v){m(w,v);function w(){return h(this,w),p(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"value",value:function(k){var j=o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,k);return j.startsWith("rgb(")?(j=j.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+j.split(",").map(function(S){return("00"+parseInt(S).toString(16)).slice(-2)}).join("")):j}}]),w})(u.default.Attributor.Style),y=new u.default.Attributor.Class("color","ql-color",{scope:u.default.Scope.INLINE}),b=new g("color","color",{scope:u.default.Scope.INLINE});s.ColorAttributor=g,s.ColorClass=y,s.ColorStyle=b}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.sanitize=s.default=void 0;var a=(function(){function b(v,w){for(var N=0;N<w.length;N++){var k=w[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(v,k.key,k)}}return function(v,w,N){return w&&b(v.prototype,w),N&&b(v,N),v}})(),o=function b(v,w,N){v===null&&(v=Function.prototype);var k=Object.getOwnPropertyDescriptor(v,w);if(k===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,w,N)}else{if("value"in k)return k.value;var S=k.get;return S===void 0?void 0:S.call(N)}},c=i(6),u=f(c);function f(b){return b&&b.__esModule?b:{default:b}}function h(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function p(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function m(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var g=(function(b){m(v,b);function v(){return h(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"format",value:function(N,k){if(N!==this.statics.blotName||!k)return o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,N,k);k=this.constructor.sanitize(k),this.domNode.setAttribute("href",k)}}],[{key:"create",value:function(N){var k=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,N);return N=this.sanitize(N),k.setAttribute("href",N),k.setAttribute("rel","noopener noreferrer"),k.setAttribute("target","_blank"),k}},{key:"formats",value:function(N){return N.getAttribute("href")}},{key:"sanitize",value:function(N){return y(N,this.PROTOCOL_WHITELIST)?N:this.SANITIZED_URL}}]),v})(u.default);g.blotName="link",g.tagName="A",g.SANITIZED_URL="about:blank",g.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(b,v){var w=document.createElement("a");w.href=b;var N=w.href.slice(0,w.href.indexOf(":"));return v.indexOf(N)>-1}s.default=g,s.sanitize=y}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},o=(function(){function v(w,N){for(var k=0;k<N.length;k++){var j=N[k];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,N,k){return N&&v(w.prototype,N),k&&v(w,k),w}})(),c=i(23),u=p(c),f=i(107),h=p(f);function p(v){return v&&v.__esModule?v:{default:v}}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}var g=0;function y(v,w){v.setAttribute(w,v.getAttribute(w)!=="true")}var b=(function(){function v(w){var N=this;m(this,v),this.select=w,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){N.togglePicker()}),this.label.addEventListener("keydown",function(k){switch(k.keyCode){case u.default.keys.ENTER:N.togglePicker();break;case u.default.keys.ESCAPE:N.escape(),k.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(v,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(N){var k=this,j=document.createElement("span");return j.tabIndex="0",j.setAttribute("role","button"),j.classList.add("ql-picker-item"),N.hasAttribute("value")&&j.setAttribute("data-value",N.getAttribute("value")),N.textContent&&j.setAttribute("data-label",N.textContent),j.addEventListener("click",function(){k.selectItem(j,!0)}),j.addEventListener("keydown",function(S){switch(S.keyCode){case u.default.keys.ENTER:k.selectItem(j,!0),S.preventDefault();break;case u.default.keys.ESCAPE:k.escape(),S.preventDefault();break}}),j}},{key:"buildLabel",value:function(){var N=document.createElement("span");return N.classList.add("ql-picker-label"),N.innerHTML=h.default,N.tabIndex="0",N.setAttribute("role","button"),N.setAttribute("aria-expanded","false"),this.container.appendChild(N),N}},{key:"buildOptions",value:function(){var N=this,k=document.createElement("span");k.classList.add("ql-picker-options"),k.setAttribute("aria-hidden","true"),k.tabIndex="-1",k.id="ql-picker-options-"+g,g+=1,this.label.setAttribute("aria-controls",k.id),this.options=k,[].slice.call(this.select.options).forEach(function(j){var S=N.buildItem(j);k.appendChild(S),j.selected===!0&&N.selectItem(S)}),this.container.appendChild(k)}},{key:"buildPicker",value:function(){var N=this;[].slice.call(this.select.attributes).forEach(function(k){N.container.setAttribute(k.name,k.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var N=this;this.close(),setTimeout(function(){return N.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(N){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,j=this.container.querySelector(".ql-selected");if(N!==j&&(j!=null&&j.classList.remove("ql-selected"),N!=null&&(N.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(N.parentNode.children,N),N.hasAttribute("data-value")?this.label.setAttribute("data-value",N.getAttribute("data-value")):this.label.removeAttribute("data-value"),N.hasAttribute("data-label")?this.label.setAttribute("data-label",N.getAttribute("data-label")):this.label.removeAttribute("data-label"),k))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var S=document.createEvent("Event");S.initEvent("change",!0,!0),this.select.dispatchEvent(S)}this.close()}}},{key:"update",value:function(){var N=void 0;if(this.select.selectedIndex>-1){var k=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];N=this.select.options[this.select.selectedIndex],this.selectItem(k)}else this.selectItem(null);var j=N!=null&&N!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",j)}}]),v})();s.default=b}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=i(0),o=G(a),c=i(5),u=G(c),f=i(4),h=G(f),p=i(16),m=G(p),g=i(25),y=G(g),b=i(24),v=G(b),w=i(35),N=G(w),k=i(6),j=G(k),S=i(22),C=G(S),O=i(7),M=G(O),B=i(55),I=G(B),R=i(42),P=G(R),q=i(23),H=G(q);function G(ne){return ne&&ne.__esModule?ne:{default:ne}}u.default.register({"blots/block":h.default,"blots/block/embed":f.BlockEmbed,"blots/break":m.default,"blots/container":y.default,"blots/cursor":v.default,"blots/embed":N.default,"blots/inline":j.default,"blots/scroll":C.default,"blots/text":M.default,"modules/clipboard":I.default,"modules/history":P.default,"modules/keyboard":H.default}),o.default.register(h.default,m.default,v.default,j.default,C.default,M.default),s.default=u.default}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=i(1),o=(function(){function c(u){this.domNode=u,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(c.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),c.create=function(u){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var f;return Array.isArray(this.tagName)?(typeof u=="string"&&(u=u.toUpperCase(),parseInt(u).toString()===u&&(u=parseInt(u))),typeof u=="number"?f=document.createElement(this.tagName[u-1]):this.tagName.indexOf(u)>-1?f=document.createElement(u):f=document.createElement(this.tagName[0])):f=document.createElement(this.tagName),this.className&&f.classList.add(this.className),f},c.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},c.prototype.clone=function(){var u=this.domNode.cloneNode(!1);return a.create(u)},c.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},c.prototype.deleteAt=function(u,f){var h=this.isolate(u,f);h.remove()},c.prototype.formatAt=function(u,f,h,p){var m=this.isolate(u,f);if(a.query(h,a.Scope.BLOT)!=null&&p)m.wrap(h,p);else if(a.query(h,a.Scope.ATTRIBUTE)!=null){var g=a.create(this.statics.scope);m.wrap(g),g.format(h,p)}},c.prototype.insertAt=function(u,f,h){var p=h==null?a.create("text",f):a.create(f,h),m=this.split(u);this.parent.insertBefore(p,m)},c.prototype.insertInto=function(u,f){f===void 0&&(f=null),this.parent!=null&&this.parent.children.remove(this);var h=null;u.children.insertBefore(this,f),f!=null&&(h=f.domNode),(this.domNode.parentNode!=u.domNode||this.domNode.nextSibling!=h)&&u.domNode.insertBefore(this.domNode,h),this.parent=u,this.attach()},c.prototype.isolate=function(u,f){var h=this.split(u);return h.split(f),h},c.prototype.length=function(){return 1},c.prototype.offset=function(u){return u===void 0&&(u=this.parent),this.parent==null||this==u?0:this.parent.children.offset(this)+this.parent.offset(u)},c.prototype.optimize=function(u){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},c.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},c.prototype.replace=function(u){u.parent!=null&&(u.parent.insertBefore(this,u.next),u.remove())},c.prototype.replaceWith=function(u,f){var h=typeof u=="string"?a.create(u,f):u;return h.replace(this),h},c.prototype.split=function(u,f){return u===0?this:this.next},c.prototype.update=function(u,f){},c.prototype.wrap=function(u,f){var h=typeof u=="string"?a.create(u,f):u;return this.parent!=null&&this.parent.insertBefore(h,this.next),h.appendChild(this),h},c.blotName="abstract",c})();s.default=o}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=i(12),o=i(32),c=i(33),u=i(1),f=(function(){function h(p){this.attributes={},this.domNode=p,this.build()}return h.prototype.attribute=function(p,m){m?p.add(this.domNode,m)&&(p.value(this.domNode)!=null?this.attributes[p.attrName]=p:delete this.attributes[p.attrName]):(p.remove(this.domNode),delete this.attributes[p.attrName])},h.prototype.build=function(){var p=this;this.attributes={};var m=a.default.keys(this.domNode),g=o.default.keys(this.domNode),y=c.default.keys(this.domNode);m.concat(g).concat(y).forEach(function(b){var v=u.query(b,u.Scope.ATTRIBUTE);v instanceof a.default&&(p.attributes[v.attrName]=v)})},h.prototype.copy=function(p){var m=this;Object.keys(this.attributes).forEach(function(g){var y=m.attributes[g].value(m.domNode);p.format(g,y)})},h.prototype.move=function(p){var m=this;this.copy(p),Object.keys(this.attributes).forEach(function(g){m.attributes[g].remove(m.domNode)}),this.attributes={}},h.prototype.values=function(){var p=this;return Object.keys(this.attributes).reduce(function(m,g){return m[g]=p.attributes[g].value(p.domNode),m},{})},h})();s.default=f}),(function(n,s,i){var a=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])};return function(h,p){f(h,p);function m(){this.constructor=h}h.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=i(12);function c(f,h){var p=f.getAttribute("class")||"";return p.split(/\s+/).filter(function(m){return m.indexOf(h+"-")===0})}var u=(function(f){a(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return h.keys=function(p){return(p.getAttribute("class")||"").split(/\s+/).map(function(m){return m.split("-").slice(0,-1).join("-")})},h.prototype.add=function(p,m){return this.canAdd(p,m)?(this.remove(p),p.classList.add(this.keyName+"-"+m),!0):!1},h.prototype.remove=function(p){var m=c(p,this.keyName);m.forEach(function(g){p.classList.remove(g)}),p.classList.length===0&&p.removeAttribute("class")},h.prototype.value=function(p){var m=c(p,this.keyName)[0]||"",g=m.slice(this.keyName.length+1);return this.canAdd(p,g)?g:""},h})(o.default);s.default=u}),(function(n,s,i){var a=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])};return function(h,p){f(h,p);function m(){this.constructor=h}h.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=i(12);function c(f){var h=f.split("-"),p=h.slice(1).map(function(m){return m[0].toUpperCase()+m.slice(1)}).join("");return h[0]+p}var u=(function(f){a(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return h.keys=function(p){return(p.getAttribute("style")||"").split(";").map(function(m){var g=m.split(":");return g[0].trim()})},h.prototype.add=function(p,m){return this.canAdd(p,m)?(p.style[c(this.keyName)]=m,!0):!1},h.prototype.remove=function(p){p.style[c(this.keyName)]="",p.getAttribute("style")||p.removeAttribute("style")},h.prototype.value=function(p){var m=p.style[c(this.keyName)];return this.canAdd(p,m)?m:""},h})(o.default);s.default=u}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function u(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,h,p){return h&&u(f.prototype,h),p&&u(f,p),f}})();function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var c=(function(){function u(f,h){o(this,u),this.quill=f,this.options=h,this.modules={}}return a(u,[{key:"init",value:function(){var h=this;Object.keys(this.options.modules).forEach(function(p){h.modules[p]==null&&h.addModule(p)})}},{key:"addModule",value:function(h){var p=this.quill.constructor.import("modules/"+h);return this.modules[h]=new p(this.quill,this.options.modules[h]||{}),this.modules[h]}}]),u})();c.DEFAULTS={modules:{}},c.themes={default:c},s.default=c}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function w(N,k){for(var j=0;j<k.length;j++){var S=k[j];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,k,j){return k&&w(N.prototype,k),j&&w(N,j),N}})(),o=function w(N,k,j){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,k);if(S===void 0){var C=Object.getPrototypeOf(N);return C===null?void 0:w(C,k,j)}else{if("value"in S)return S.value;var O=S.get;return O===void 0?void 0:O.call(j)}},c=i(0),u=p(c),f=i(7),h=p(f);function p(w){return w&&w.__esModule?w:{default:w}}function m(w,N){if(!(w instanceof N))throw new TypeError("Cannot call a class as a function")}function g(w,N){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:w}function y(w,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);w.prototype=Object.create(N&&N.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(w,N):w.__proto__=N)}var b="\uFEFF",v=(function(w){y(N,w);function N(k){m(this,N);var j=g(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,k));return j.contentNode=document.createElement("span"),j.contentNode.setAttribute("contenteditable",!1),[].slice.call(j.domNode.childNodes).forEach(function(S){j.contentNode.appendChild(S)}),j.leftGuard=document.createTextNode(b),j.rightGuard=document.createTextNode(b),j.domNode.appendChild(j.leftGuard),j.domNode.appendChild(j.contentNode),j.domNode.appendChild(j.rightGuard),j}return a(N,[{key:"index",value:function(j,S){return j===this.leftGuard?0:j===this.rightGuard?1:o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"index",this).call(this,j,S)}},{key:"restore",value:function(j){var S=void 0,C=void 0,O=j.data.split(b).join("");if(j===this.leftGuard)if(this.prev instanceof h.default){var M=this.prev.length();this.prev.insertAt(M,O),S={startNode:this.prev.domNode,startOffset:M+O.length}}else C=document.createTextNode(O),this.parent.insertBefore(u.default.create(C),this),S={startNode:C,startOffset:O.length};else j===this.rightGuard&&(this.next instanceof h.default?(this.next.insertAt(0,O),S={startNode:this.next.domNode,startOffset:O.length}):(C=document.createTextNode(O),this.parent.insertBefore(u.default.create(C),this.next),S={startNode:C,startOffset:O.length}));return j.data=b,S}},{key:"update",value:function(j,S){var C=this;j.forEach(function(O){if(O.type==="characterData"&&(O.target===C.leftGuard||O.target===C.rightGuard)){var M=C.restore(O.target);M&&(S.range=M)}})}}]),N})(u.default.Embed);s.default=v}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.AlignStyle=s.AlignClass=s.AlignAttribute=void 0;var a=i(0),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}var u={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},f=new o.default.Attributor.Attribute("align","align",u),h=new o.default.Attributor.Class("align","ql-align",u),p=new o.default.Attributor.Style("align","text-align",u);s.AlignAttribute=f,s.AlignClass=h,s.AlignStyle=p}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.BackgroundStyle=s.BackgroundClass=void 0;var a=i(0),o=u(a),c=i(26);function u(p){return p&&p.__esModule?p:{default:p}}var f=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),h=new c.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});s.BackgroundClass=f,s.BackgroundStyle=h}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.DirectionStyle=s.DirectionClass=s.DirectionAttribute=void 0;var a=i(0),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}var u={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},f=new o.default.Attributor.Attribute("direction","dir",u),h=new o.default.Attributor.Class("direction","ql-direction",u),p=new o.default.Attributor.Style("direction","direction",u);s.DirectionAttribute=f,s.DirectionClass=h,s.DirectionStyle=p}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.FontClass=s.FontStyle=void 0;var a=(function(){function w(N,k){for(var j=0;j<k.length;j++){var S=k[j];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,k,j){return k&&w(N.prototype,k),j&&w(N,j),N}})(),o=function w(N,k,j){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,k);if(S===void 0){var C=Object.getPrototypeOf(N);return C===null?void 0:w(C,k,j)}else{if("value"in S)return S.value;var O=S.get;return O===void 0?void 0:O.call(j)}},c=i(0),u=f(c);function f(w){return w&&w.__esModule?w:{default:w}}function h(w,N){if(!(w instanceof N))throw new TypeError("Cannot call a class as a function")}function p(w,N){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:w}function m(w,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);w.prototype=Object.create(N&&N.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(w,N):w.__proto__=N)}var g={scope:u.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new u.default.Attributor.Class("font","ql-font",g),b=(function(w){m(N,w);function N(){return h(this,N),p(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return a(N,[{key:"value",value:function(j){return o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"value",this).call(this,j).replace(/["']/g,"")}}]),N})(u.default.Attributor.Style),v=new b("font","font-family",g);s.FontStyle=v,s.FontClass=y}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.SizeStyle=s.SizeClass=void 0;var a=i(0),o=c(a);function c(h){return h&&h.__esModule?h:{default:h}}var u=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),f=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});s.SizeClass=u,s.SizeStyle=f}),(function(n,s,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.getLastChangeIndex=s.default=void 0;var a=(function(){function k(j,S){for(var C=0;C<S.length;C++){var O=S[C];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(j,O.key,O)}}return function(j,S,C){return S&&k(j.prototype,S),C&&k(j,C),j}})(),o=i(0),c=m(o),u=i(5),f=m(u),h=i(9),p=m(h);function m(k){return k&&k.__esModule?k:{default:k}}function g(k,j){if(!(k instanceof j))throw new TypeError("Cannot call a class as a function")}function y(k,j){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:k}function b(k,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);k.prototype=Object.create(j&&j.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(k,j):k.__proto__=j)}var v=(function(k){b(j,k);function j(S,C){g(this,j);var O=y(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,S,C));return O.lastRecorded=0,O.ignoreChange=!1,O.clear(),O.quill.on(f.default.events.EDITOR_CHANGE,function(M,B,I,R){M!==f.default.events.TEXT_CHANGE||O.ignoreChange||(!O.options.userOnly||R===f.default.sources.USER?O.record(B,I):O.transform(B))}),O.quill.keyboard.addBinding({key:"Z",shortKey:!0},O.undo.bind(O)),O.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},O.redo.bind(O)),/Win/i.test(navigator.platform)&&O.quill.keyboard.addBinding({key:"Y",shortKey:!0},O.redo.bind(O)),O}return a(j,[{key:"change",value:function(C,O){if(this.stack[C].length!==0){var M=this.stack[C].pop();this.stack[O].push(M),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(M[C],f.default.sources.USER),this.ignoreChange=!1;var B=N(M[C]);this.quill.setSelection(B)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(C,O){if(C.ops.length!==0){this.stack.redo=[];var M=this.quill.getContents().diff(O),B=Date.now();if(this.lastRecorded+this.options.delay>B&&this.stack.undo.length>0){var I=this.stack.undo.pop();M=M.compose(I.undo),C=I.redo.compose(C)}else this.lastRecorded=B;this.stack.undo.push({redo:C,undo:M}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(C){this.stack.undo.forEach(function(O){O.undo=C.transform(O.undo,!0),O.redo=C.transform(O.redo,!0)}),this.stack.redo.forEach(function(O){O.undo=C.transform(O.undo,!0),O.redo=C.transform(O.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),j})(p.default);v.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function w(k){var j=k.ops[k.ops.length-1];return j==null?!1:j.insert!=null?typeof j.insert=="string"&&j.insert.endsWith(`
`):j.attributes!=null?Object.keys(j.attributes).some(function(S){return c.default.query(S,c.default.Scope.BLOCK)!=null}):!1}function N(k){var j=k.reduce(function(C,O){return C+=O.delete||0,C},0),S=k.length()-j;return w(k)&&(S-=1),S}s.default=v,s.getLastChangeIndex=N}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.BaseTooltip=void 0;var a=(function(){function W(z,Q){for(var Z=0;Z<Q.length;Z++){var V=Q[Z];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(z,V.key,V)}}return function(z,Q,Z){return Q&&W(z.prototype,Q),Z&&W(z,Z),z}})(),o=function W(z,Q,Z){z===null&&(z=Function.prototype);var V=Object.getOwnPropertyDescriptor(z,Q);if(V===void 0){var ie=Object.getPrototypeOf(z);return ie===null?void 0:W(ie,Q,Z)}else{if("value"in V)return V.value;var de=V.get;return de===void 0?void 0:de.call(Z)}},c=i(3),u=B(c),f=i(2),h=B(f),p=i(8),m=B(p),g=i(23),y=B(g),b=i(34),v=B(b),w=i(59),N=B(w),k=i(60),j=B(k),S=i(28),C=B(S),O=i(61),M=B(O);function B(W){return W&&W.__esModule?W:{default:W}}function I(W,z){if(!(W instanceof z))throw new TypeError("Cannot call a class as a function")}function R(W,z){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:W}function P(W,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);W.prototype=Object.create(z&&z.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(W,z):W.__proto__=z)}var q=[!1,"center","right","justify"],H=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],G=[!1,"serif","monospace"],ne=["1","2","3",!1],X=["small",!1,"large","huge"],ee=(function(W){P(z,W);function z(Q,Z){I(this,z);var V=R(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,Q,Z)),ie=function de(fe){if(!document.body.contains(Q.root))return document.body.removeEventListener("click",de);V.tooltip!=null&&!V.tooltip.root.contains(fe.target)&&document.activeElement!==V.tooltip.textbox&&!V.quill.hasFocus()&&V.tooltip.hide(),V.pickers!=null&&V.pickers.forEach(function(ve){ve.container.contains(fe.target)||ve.close()})};return Q.emitter.listenDOM("click",document.body,ie),V}return a(z,[{key:"addModule",value:function(Z){var V=o(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"addModule",this).call(this,Z);return Z==="toolbar"&&this.extendToolbar(V),V}},{key:"buildButtons",value:function(Z,V){Z.forEach(function(ie){var de=ie.getAttribute("class")||"";de.split(/\s+/).forEach(function(fe){if(fe.startsWith("ql-")&&(fe=fe.slice(3),V[fe]!=null))if(fe==="direction")ie.innerHTML=V[fe][""]+V[fe].rtl;else if(typeof V[fe]=="string")ie.innerHTML=V[fe];else{var ve=ie.value||"";ve!=null&&V[fe][ve]&&(ie.innerHTML=V[fe][ve])}})})}},{key:"buildPickers",value:function(Z,V){var ie=this;this.pickers=Z.map(function(fe){if(fe.classList.contains("ql-align"))return fe.querySelector("option")==null&&T(fe,q),new j.default(fe,V.align);if(fe.classList.contains("ql-background")||fe.classList.contains("ql-color")){var ve=fe.classList.contains("ql-background")?"background":"color";return fe.querySelector("option")==null&&T(fe,H,ve==="background"?"#ffffff":"#000000"),new N.default(fe,V[ve])}else return fe.querySelector("option")==null&&(fe.classList.contains("ql-font")?T(fe,G):fe.classList.contains("ql-header")?T(fe,ne):fe.classList.contains("ql-size")&&T(fe,X)),new C.default(fe)});var de=function(){ie.pickers.forEach(function(ve){ve.update()})};this.quill.on(m.default.events.EDITOR_CHANGE,de)}}]),z})(v.default);ee.DEFAULTS=(0,u.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var z=this,Q=this.container.querySelector("input.ql-image[type=file]");Q==null&&(Q=document.createElement("input"),Q.setAttribute("type","file"),Q.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Q.classList.add("ql-image"),Q.addEventListener("change",function(){if(Q.files!=null&&Q.files[0]!=null){var Z=new FileReader;Z.onload=function(V){var ie=z.quill.getSelection(!0);z.quill.updateContents(new h.default().retain(ie.index).delete(ie.length).insert({image:V.target.result}),m.default.sources.USER),z.quill.setSelection(ie.index+1,m.default.sources.SILENT),Q.value=""},Z.readAsDataURL(Q.files[0])}}),this.container.appendChild(Q)),Q.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Y=(function(W){P(z,W);function z(Q,Z){I(this,z);var V=R(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,Q,Z));return V.textbox=V.root.querySelector('input[type="text"]'),V.listen(),V}return a(z,[{key:"listen",value:function(){var Z=this;this.textbox.addEventListener("keydown",function(V){y.default.match(V,"enter")?(Z.save(),V.preventDefault()):y.default.match(V,"escape")&&(Z.cancel(),V.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),V!=null?this.textbox.value=V:Z!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Z)||""),this.root.setAttribute("data-mode",Z)}},{key:"restoreFocus",value:function(){var Z=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Z}},{key:"save",value:function(){var Z=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var V=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Z,m.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Z,m.default.sources.USER)),this.quill.root.scrollTop=V;break}case"video":Z=U(Z);case"formula":{if(!Z)break;var ie=this.quill.getSelection(!0);if(ie!=null){var de=ie.index+ie.length;this.quill.insertEmbed(de,this.root.getAttribute("data-mode"),Z,m.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(de+1," ",m.default.sources.USER),this.quill.setSelection(de+2,m.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),z})(M.default);function U(W){var z=W.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||W.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return z?(z[1]||"https")+"://www.youtube.com/embed/"+z[2]+"?showinfo=0":(z=W.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(z[1]||"https")+"://player.vimeo.com/video/"+z[2]+"/":W}function T(W,z){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z.forEach(function(Z){var V=document.createElement("option");Z===Q?V.setAttribute("selected","selected"):V.setAttribute("value",Z),W.appendChild(V)})}s.BaseTooltip=Y,s.default=ee}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];this.insertBefore(c[0],null),c.length>1&&this.append.apply(this,c.slice(1))},o.prototype.contains=function(c){for(var u,f=this.iterator();u=f();)if(u===c)return!0;return!1},o.prototype.insertBefore=function(c,u){c&&(c.next=u,u!=null?(c.prev=u.prev,u.prev!=null&&(u.prev.next=c),u.prev=c,u===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)},o.prototype.offset=function(c){for(var u=0,f=this.head;f!=null;){if(f===c)return u;u+=f.length(),f=f.next}return-1},o.prototype.remove=function(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)},o.prototype.iterator=function(c){return c===void 0&&(c=this.head),function(){var u=c;return c!=null&&(c=c.next),u}},o.prototype.find=function(c,u){u===void 0&&(u=!1);for(var f,h=this.iterator();f=h();){var p=f.length();if(c<p||u&&c===p&&(f.next==null||f.next.length()!==0))return[f,c];c-=p}return[null,0]},o.prototype.forEach=function(c){for(var u,f=this.iterator();u=f();)c(u)},o.prototype.forEachAt=function(c,u,f){if(!(u<=0))for(var h=this.find(c),p=h[0],m=h[1],g,y=c-m,b=this.iterator(p);(g=b())&&y<c+u;){var v=g.length();c>y?f(g,c-y,Math.min(u,y+v-c)):f(g,0,Math.min(v,c+u-y)),y+=v}},o.prototype.map=function(c){return this.reduce(function(u,f){return u.push(c(f)),u},[])},o.prototype.reduce=function(c,u){for(var f,h=this.iterator();f=h();)u=c(u,f);return u},o})();s.default=a}),(function(n,s,i){var a=this&&this.__extends||(function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var y in g)g.hasOwnProperty(y)&&(m[y]=g[y])};return function(m,g){p(m,g);function y(){this.constructor=m}m.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=i(17),c=i(1),u={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},f=100,h=(function(p){a(m,p);function m(g){var y=p.call(this,g)||this;return y.scroll=y,y.observer=new MutationObserver(function(b){y.update(b)}),y.observer.observe(y.domNode,u),y.attach(),y}return m.prototype.detach=function(){p.prototype.detach.call(this),this.observer.disconnect()},m.prototype.deleteAt=function(g,y){this.update(),g===0&&y===this.length()?this.children.forEach(function(b){b.remove()}):p.prototype.deleteAt.call(this,g,y)},m.prototype.formatAt=function(g,y,b,v){this.update(),p.prototype.formatAt.call(this,g,y,b,v)},m.prototype.insertAt=function(g,y,b){this.update(),p.prototype.insertAt.call(this,g,y,b)},m.prototype.optimize=function(g,y){var b=this;g===void 0&&(g=[]),y===void 0&&(y={}),p.prototype.optimize.call(this,y);for(var v=[].slice.call(this.observer.takeRecords());v.length>0;)g.push(v.pop());for(var w=function(S,C){C===void 0&&(C=!0),!(S==null||S===b)&&S.domNode.parentNode!=null&&(S.domNode[c.DATA_KEY].mutations==null&&(S.domNode[c.DATA_KEY].mutations=[]),C&&w(S.parent))},N=function(S){S.domNode[c.DATA_KEY]==null||S.domNode[c.DATA_KEY].mutations==null||(S instanceof o.default&&S.children.forEach(N),S.optimize(y))},k=g,j=0;k.length>0;j+=1){if(j>=f)throw new Error("[Parchment] Maximum optimize iterations reached");for(k.forEach(function(S){var C=c.find(S.target,!0);C!=null&&(C.domNode===S.target&&(S.type==="childList"?(w(c.find(S.previousSibling,!1)),[].forEach.call(S.addedNodes,function(O){var M=c.find(O,!1);w(M,!1),M instanceof o.default&&M.children.forEach(function(B){w(B,!1)})})):S.type==="attributes"&&w(C.prev)),w(C))}),this.children.forEach(N),k=[].slice.call(this.observer.takeRecords()),v=k.slice();v.length>0;)g.push(v.pop())}},m.prototype.update=function(g,y){var b=this;y===void 0&&(y={}),g=g||this.observer.takeRecords(),g.map(function(v){var w=c.find(v.target,!0);return w==null?null:w.domNode[c.DATA_KEY].mutations==null?(w.domNode[c.DATA_KEY].mutations=[v],w):(w.domNode[c.DATA_KEY].mutations.push(v),null)}).forEach(function(v){v==null||v===b||v.domNode[c.DATA_KEY]==null||v.update(v.domNode[c.DATA_KEY].mutations||[],y)}),this.domNode[c.DATA_KEY].mutations!=null&&p.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,y),this.optimize(g,y)},m.blotName="scroll",m.defaultChild="block",m.scope=c.Scope.BLOCK_BLOT,m.tagName="DIV",m})(o.default);s.default=h}),(function(n,s,i){var a=this&&this.__extends||(function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var g in m)m.hasOwnProperty(g)&&(p[g]=m[g])};return function(p,m){h(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=i(18),c=i(1);function u(h,p){if(Object.keys(h).length!==Object.keys(p).length)return!1;for(var m in h)if(h[m]!==p[m])return!1;return!0}var f=(function(h){a(p,h);function p(){return h!==null&&h.apply(this,arguments)||this}return p.formats=function(m){if(m.tagName!==p.tagName)return h.formats.call(this,m)},p.prototype.format=function(m,g){var y=this;m===this.statics.blotName&&!g?(this.children.forEach(function(b){b instanceof o.default||(b=b.wrap(p.blotName,!0)),y.attributes.copy(b)}),this.unwrap()):h.prototype.format.call(this,m,g)},p.prototype.formatAt=function(m,g,y,b){if(this.formats()[y]!=null||c.query(y,c.Scope.ATTRIBUTE)){var v=this.isolate(m,g);v.format(y,b)}else h.prototype.formatAt.call(this,m,g,y,b)},p.prototype.optimize=function(m){h.prototype.optimize.call(this,m);var g=this.formats();if(Object.keys(g).length===0)return this.unwrap();var y=this.next;y instanceof p&&y.prev===this&&u(g,y.formats())&&(y.moveChildren(this),y.remove())},p.blotName="inline",p.scope=c.Scope.INLINE_BLOT,p.tagName="SPAN",p})(o.default);s.default=f}),(function(n,s,i){var a=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])};return function(h,p){f(h,p);function m(){this.constructor=h}h.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=i(18),c=i(1),u=(function(f){a(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return h.formats=function(p){var m=c.query(h.blotName).tagName;if(p.tagName!==m)return f.formats.call(this,p)},h.prototype.format=function(p,m){c.query(p,c.Scope.BLOCK)!=null&&(p===this.statics.blotName&&!m?this.replaceWith(h.blotName):f.prototype.format.call(this,p,m))},h.prototype.formatAt=function(p,m,g,y){c.query(g,c.Scope.BLOCK)!=null?this.format(g,y):f.prototype.formatAt.call(this,p,m,g,y)},h.prototype.insertAt=function(p,m,g){if(g==null||c.query(m,c.Scope.INLINE)!=null)f.prototype.insertAt.call(this,p,m,g);else{var y=this.split(p),b=c.create(m,g);y.parent.insertBefore(b,y)}},h.prototype.update=function(p,m){navigator.userAgent.match(/Trident/)?this.build():f.prototype.update.call(this,p,m)},h.blotName="block",h.scope=c.Scope.BLOCK_BLOT,h.tagName="P",h})(o.default);s.default=u}),(function(n,s,i){var a=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var p in h)h.hasOwnProperty(p)&&(f[p]=h[p])};return function(f,h){u(f,h);function p(){this.constructor=f}f.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=i(19),c=(function(u){a(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.formats=function(h){},f.prototype.format=function(h,p){u.prototype.formatAt.call(this,0,this.length(),h,p)},f.prototype.formatAt=function(h,p,m,g){h===0&&p===this.length()?this.format(m,g):u.prototype.formatAt.call(this,h,p,m,g)},f.prototype.formats=function(){return this.statics.formats(this.domNode)},f})(o.default);s.default=c}),(function(n,s,i){var a=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])};return function(h,p){f(h,p);function m(){this.constructor=h}h.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=i(19),c=i(1),u=(function(f){a(h,f);function h(p){var m=f.call(this,p)||this;return m.text=m.statics.value(m.domNode),m}return h.create=function(p){return document.createTextNode(p)},h.value=function(p){var m=p.data;return m.normalize&&(m=m.normalize()),m},h.prototype.deleteAt=function(p,m){this.domNode.data=this.text=this.text.slice(0,p)+this.text.slice(p+m)},h.prototype.index=function(p,m){return this.domNode===p?m:-1},h.prototype.insertAt=function(p,m,g){g==null?(this.text=this.text.slice(0,p)+m+this.text.slice(p),this.domNode.data=this.text):f.prototype.insertAt.call(this,p,m,g)},h.prototype.length=function(){return this.text.length},h.prototype.optimize=function(p){f.prototype.optimize.call(this,p),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof h&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},h.prototype.position=function(p,m){return[this.domNode,p]},h.prototype.split=function(p,m){if(m===void 0&&(m=!1),!m){if(p===0)return this;if(p===this.length())return this.next}var g=c.create(this.domNode.splitText(p));return this.parent.insertBefore(g,this.next),this.text=this.statics.value(this.domNode),g},h.prototype.update=function(p,m){var g=this;p.some(function(y){return y.type==="characterData"&&y.target===g.domNode})&&(this.text=this.statics.value(this.domNode))},h.prototype.value=function(){return this.text},h.blotName="text",h.scope=c.Scope.INLINE_BLOT,h})(o.default);s.default=u}),(function(n,s,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,u){return arguments.length>1&&!this.contains(c)==!u?u:o.call(this,c)}}String.prototype.startsWith||(String.prototype.startsWith=function(c,u){return u=u||0,this.substr(u,c.length)===c}),String.prototype.endsWith||(String.prototype.endsWith=function(c,u){var f=this.toString();(typeof u!="number"||!isFinite(u)||Math.floor(u)!==u||u>f.length)&&(u=f.length),u-=c.length;var h=f.indexOf(c,u);return h!==-1&&h===u}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(u){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof u!="function")throw new TypeError("predicate must be a function");for(var f=Object(this),h=f.length>>>0,p=arguments[1],m,g=0;g<h;g++)if(m=f[g],u.call(p,m,g,f))return m}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(n,s){var i=-1,a=1,o=0;function c(j,S,C){if(j==S)return j?[[o,j]]:[];(C<0||j.length<C)&&(C=null);var O=p(j,S),M=j.substring(0,O);j=j.substring(O),S=S.substring(O),O=m(j,S);var B=j.substring(j.length-O);j=j.substring(0,j.length-O),S=S.substring(0,S.length-O);var I=u(j,S);return M&&I.unshift([o,M]),B&&I.push([o,B]),y(I),C!=null&&(I=w(I,C)),I=N(I),I}function u(j,S){var C;if(!j)return[[a,S]];if(!S)return[[i,j]];var O=j.length>S.length?j:S,M=j.length>S.length?S:j,B=O.indexOf(M);if(B!=-1)return C=[[a,O.substring(0,B)],[o,M],[a,O.substring(B+M.length)]],j.length>S.length&&(C[0][0]=C[2][0]=i),C;if(M.length==1)return[[i,j],[a,S]];var I=g(j,S);if(I){var R=I[0],P=I[1],q=I[2],H=I[3],G=I[4],ne=c(R,q),X=c(P,H);return ne.concat([[o,G]],X)}return f(j,S)}function f(j,S){for(var C=j.length,O=S.length,M=Math.ceil((C+O)/2),B=M,I=2*M,R=new Array(I),P=new Array(I),q=0;q<I;q++)R[q]=-1,P[q]=-1;R[B+1]=0,P[B+1]=0;for(var H=C-O,G=H%2!=0,ne=0,X=0,ee=0,Y=0,U=0;U<M;U++){for(var T=-U+ne;T<=U-X;T+=2){var W=B+T,z;T==-U||T!=U&&R[W-1]<R[W+1]?z=R[W+1]:z=R[W-1]+1;for(var Q=z-T;z<C&&Q<O&&j.charAt(z)==S.charAt(Q);)z++,Q++;if(R[W]=z,z>C)X+=2;else if(Q>O)ne+=2;else if(G){var Z=B+H-T;if(Z>=0&&Z<I&&P[Z]!=-1){var V=C-P[Z];if(z>=V)return h(j,S,z,Q)}}}for(var ie=-U+ee;ie<=U-Y;ie+=2){var Z=B+ie,V;ie==-U||ie!=U&&P[Z-1]<P[Z+1]?V=P[Z+1]:V=P[Z-1]+1;for(var de=V-ie;V<C&&de<O&&j.charAt(C-V-1)==S.charAt(O-de-1);)V++,de++;if(P[Z]=V,V>C)Y+=2;else if(de>O)ee+=2;else if(!G){var W=B+H-ie;if(W>=0&&W<I&&R[W]!=-1){var z=R[W],Q=B+z-W;if(V=C-V,z>=V)return h(j,S,z,Q)}}}}return[[i,j],[a,S]]}function h(j,S,C,O){var M=j.substring(0,C),B=S.substring(0,O),I=j.substring(C),R=S.substring(O),P=c(M,B),q=c(I,R);return P.concat(q)}function p(j,S){if(!j||!S||j.charAt(0)!=S.charAt(0))return 0;for(var C=0,O=Math.min(j.length,S.length),M=O,B=0;C<M;)j.substring(B,M)==S.substring(B,M)?(C=M,B=C):O=M,M=Math.floor((O-C)/2+C);return M}function m(j,S){if(!j||!S||j.charAt(j.length-1)!=S.charAt(S.length-1))return 0;for(var C=0,O=Math.min(j.length,S.length),M=O,B=0;C<M;)j.substring(j.length-M,j.length-B)==S.substring(S.length-M,S.length-B)?(C=M,B=C):O=M,M=Math.floor((O-C)/2+C);return M}function g(j,S){var C=j.length>S.length?j:S,O=j.length>S.length?S:j;if(C.length<4||O.length*2<C.length)return null;function M(X,ee,Y){for(var U=X.substring(Y,Y+Math.floor(X.length/4)),T=-1,W="",z,Q,Z,V;(T=ee.indexOf(U,T+1))!=-1;){var ie=p(X.substring(Y),ee.substring(T)),de=m(X.substring(0,Y),ee.substring(0,T));W.length<de+ie&&(W=ee.substring(T-de,T)+ee.substring(T,T+ie),z=X.substring(0,Y-de),Q=X.substring(Y+ie),Z=ee.substring(0,T-de),V=ee.substring(T+ie))}return W.length*2>=X.length?[z,Q,Z,V,W]:null}var B=M(C,O,Math.ceil(C.length/4)),I=M(C,O,Math.ceil(C.length/2)),R;if(!B&&!I)return null;I?B?R=B[4].length>I[4].length?B:I:R=I:R=B;var P,q,H,G;j.length>S.length?(P=R[0],q=R[1],H=R[2],G=R[3]):(H=R[0],G=R[1],P=R[2],q=R[3]);var ne=R[4];return[P,q,H,G,ne]}function y(j){j.push([o,""]);for(var S=0,C=0,O=0,M="",B="",I;S<j.length;)switch(j[S][0]){case a:O++,B+=j[S][1],S++;break;case i:C++,M+=j[S][1],S++;break;case o:C+O>1?(C!==0&&O!==0&&(I=p(B,M),I!==0&&(S-C-O>0&&j[S-C-O-1][0]==o?j[S-C-O-1][1]+=B.substring(0,I):(j.splice(0,0,[o,B.substring(0,I)]),S++),B=B.substring(I),M=M.substring(I)),I=m(B,M),I!==0&&(j[S][1]=B.substring(B.length-I)+j[S][1],B=B.substring(0,B.length-I),M=M.substring(0,M.length-I))),C===0?j.splice(S-O,C+O,[a,B]):O===0?j.splice(S-C,C+O,[i,M]):j.splice(S-C-O,C+O,[i,M],[a,B]),S=S-C-O+(C?1:0)+(O?1:0)+1):S!==0&&j[S-1][0]==o?(j[S-1][1]+=j[S][1],j.splice(S,1)):S++,O=0,C=0,M="",B="";break}j[j.length-1][1]===""&&j.pop();var R=!1;for(S=1;S<j.length-1;)j[S-1][0]==o&&j[S+1][0]==o&&(j[S][1].substring(j[S][1].length-j[S-1][1].length)==j[S-1][1]?(j[S][1]=j[S-1][1]+j[S][1].substring(0,j[S][1].length-j[S-1][1].length),j[S+1][1]=j[S-1][1]+j[S+1][1],j.splice(S-1,1),R=!0):j[S][1].substring(0,j[S+1][1].length)==j[S+1][1]&&(j[S-1][1]+=j[S+1][1],j[S][1]=j[S][1].substring(j[S+1][1].length)+j[S+1][1],j.splice(S+1,1),R=!0)),S++;R&&y(j)}var b=c;b.INSERT=a,b.DELETE=i,b.EQUAL=o,n.exports=b;function v(j,S){if(S===0)return[o,j];for(var C=0,O=0;O<j.length;O++){var M=j[O];if(M[0]===i||M[0]===o){var B=C+M[1].length;if(S===B)return[O+1,j];if(S<B){j=j.slice();var I=S-C,R=[M[0],M[1].slice(0,I)],P=[M[0],M[1].slice(I)];return j.splice(O,1,R,P),[O+1,j]}else C=B}}throw new Error("cursor_pos is out of bounds!")}function w(j,S){var C=v(j,S),O=C[1],M=C[0],B=O[M],I=O[M+1];if(B==null)return j;if(B[0]!==o)return j;if(I!=null&&B[1]+I[1]===I[1]+B[1])return O.splice(M,2,I,B),k(O,M,2);if(I!=null&&I[1].indexOf(B[1])===0){O.splice(M,2,[I[0],B[1]],[0,B[1]]);var R=I[1].slice(B[1].length);return R.length>0&&O.splice(M+2,0,[I[0],R]),k(O,M,3)}else return j}function N(j){for(var S=!1,C=function(I){return I.charCodeAt(0)>=56320&&I.charCodeAt(0)<=57343},O=function(I){return I.charCodeAt(I.length-1)>=55296&&I.charCodeAt(I.length-1)<=56319},M=2;M<j.length;M+=1)j[M-2][0]===o&&O(j[M-2][1])&&j[M-1][0]===i&&C(j[M-1][1])&&j[M][0]===a&&C(j[M][1])&&(S=!0,j[M-1][1]=j[M-2][1].slice(-1)+j[M-1][1],j[M][1]=j[M-2][1].slice(-1)+j[M][1],j[M-2][1]=j[M-2][1].slice(0,-1));if(!S)return j;for(var B=[],M=0;M<j.length;M+=1)j[M][1].length>0&&B.push(j[M]);return B}function k(j,S,C){for(var O=S+C-1;O>=0&&O>=S-1;O--)if(O+1<j.length){var M=j[O],B=j[O+1];M[0]===B[1]&&j.splice(O,2,[M[0],M[1]+B[1]])}return j}}),(function(n,s){s=n.exports=typeof Object.keys=="function"?Object.keys:i,s.shim=i;function i(a){var o=[];for(var c in a)o.push(c);return o}}),(function(n,s){var i=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";s=n.exports=i?a:o,s.supported=a;function a(c){return Object.prototype.toString.call(c)=="[object Arguments]"}s.unsupported=o;function o(c){return c&&typeof c=="object"&&typeof c.length=="number"&&Object.prototype.hasOwnProperty.call(c,"callee")&&!Object.prototype.propertyIsEnumerable.call(c,"callee")||!1}}),(function(n,s){var i=Object.prototype.hasOwnProperty,a="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(a=!1));function c(f,h,p){this.fn=f,this.context=h,this.once=p||!1}function u(){this._events=new o,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)i.call(p,m)&&h.push(a?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h,p){var m=a?a+h:h,g=this._events[m];if(p)return!!g;if(!g)return[];if(g.fn)return[g.fn];for(var y=0,b=g.length,v=new Array(b);y<b;y++)v[y]=g[y].fn;return v},u.prototype.emit=function(h,p,m,g,y,b){var v=a?a+h:h;if(!this._events[v])return!1;var w=this._events[v],N=arguments.length,k,j;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),N){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,m),!0;case 4:return w.fn.call(w.context,p,m,g),!0;case 5:return w.fn.call(w.context,p,m,g,y),!0;case 6:return w.fn.call(w.context,p,m,g,y,b),!0}for(j=1,k=new Array(N-1);j<N;j++)k[j-1]=arguments[j];w.fn.apply(w.context,k)}else{var S=w.length,C;for(j=0;j<S;j++)switch(w[j].once&&this.removeListener(h,w[j].fn,void 0,!0),N){case 1:w[j].fn.call(w[j].context);break;case 2:w[j].fn.call(w[j].context,p);break;case 3:w[j].fn.call(w[j].context,p,m);break;case 4:w[j].fn.call(w[j].context,p,m,g);break;default:if(!k)for(C=1,k=new Array(N-1);C<N;C++)k[C-1]=arguments[C];w[j].fn.apply(w[j].context,k)}}return!0},u.prototype.on=function(h,p,m){var g=new c(p,m||this),y=a?a+h:h;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],g]:this._events[y].push(g):(this._events[y]=g,this._eventsCount++),this},u.prototype.once=function(h,p,m){var g=new c(p,m||this,!0),y=a?a+h:h;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],g]:this._events[y].push(g):(this._events[y]=g,this._eventsCount++),this},u.prototype.removeListener=function(h,p,m,g){var y=a?a+h:h;if(!this._events[y])return this;if(!p)return--this._eventsCount===0?this._events=new o:delete this._events[y],this;var b=this._events[y];if(b.fn)b.fn===p&&(!g||b.once)&&(!m||b.context===m)&&(--this._eventsCount===0?this._events=new o:delete this._events[y]);else{for(var v=0,w=[],N=b.length;v<N;v++)(b[v].fn!==p||g&&!b[v].once||m&&b[v].context!==m)&&w.push(b[v]);w.length?this._events[y]=w.length===1?w[0]:w:--this._eventsCount===0?this._events=new o:delete this._events[y]}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=a?a+h:h,this._events[p]&&(--this._eventsCount===0?this._events=new o:delete this._events[p])):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prototype.setMaxListeners=function(){return this},u.prefixed=a,u.EventEmitter=u,typeof n<"u"&&(n.exports=u)}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.matchText=s.matchSpacing=s.matchNewline=s.matchBlot=s.matchAttributor=s.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Oe){return typeof Oe}:function(Oe){return Oe&&typeof Symbol=="function"&&Oe.constructor===Symbol&&Oe!==Symbol.prototype?"symbol":typeof Oe},o=(function(){function Oe(oe,ge){var Ne=[],Ae=!0,ke=!1,re=void 0;try{for(var te=oe[Symbol.iterator](),J;!(Ae=(J=te.next()).done)&&(Ne.push(J.value),!(ge&&Ne.length===ge));Ae=!0);}catch(ue){ke=!0,re=ue}finally{try{!Ae&&te.return&&te.return()}finally{if(ke)throw re}}return Ne}return function(oe,ge){if(Array.isArray(oe))return oe;if(Symbol.iterator in Object(oe))return Oe(oe,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),c=(function(){function Oe(oe,ge){for(var Ne=0;Ne<ge.length;Ne++){var Ae=ge[Ne];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(oe,Ae.key,Ae)}}return function(oe,ge,Ne){return ge&&Oe(oe.prototype,ge),Ne&&Oe(oe,Ne),oe}})(),u=i(3),f=P(u),h=i(2),p=P(h),m=i(0),g=P(m),y=i(5),b=P(y),v=i(10),w=P(v),N=i(9),k=P(N),j=i(36),S=i(37),C=i(13),O=P(C),M=i(26),B=i(38),I=i(39),R=i(40);function P(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}function q(Oe,oe,ge){return oe in Oe?Object.defineProperty(Oe,oe,{value:ge,enumerable:!0,configurable:!0,writable:!0}):Oe[oe]=ge,Oe}function H(Oe,oe){if(!(Oe instanceof oe))throw new TypeError("Cannot call a class as a function")}function G(Oe,oe){if(!Oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:Oe}function ne(Oe,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);Oe.prototype=Object.create(oe&&oe.prototype,{constructor:{value:Oe,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf(Oe,oe):Oe.__proto__=oe)}var X=(0,w.default)("quill:clipboard"),ee="__ql-matcher",Y=[[Node.TEXT_NODE,at],[Node.TEXT_NODE,_e],["br",He],[Node.ELEMENT_NODE,_e],[Node.ELEMENT_NODE,ve],[Node.ELEMENT_NODE,it],[Node.ELEMENT_NODE,fe],[Node.ELEMENT_NODE,rt],["li",st],["b",de.bind(de,"bold")],["i",de.bind(de,"italic")],["style",$e]],U=[j.AlignAttribute,B.DirectionAttribute].reduce(function(Oe,oe){return Oe[oe.keyName]=oe,Oe},{}),T=[j.AlignStyle,S.BackgroundStyle,M.ColorStyle,B.DirectionStyle,I.FontStyle,R.SizeStyle].reduce(function(Oe,oe){return Oe[oe.keyName]=oe,Oe},{}),W=(function(Oe){ne(oe,Oe);function oe(ge,Ne){H(this,oe);var Ae=G(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this,ge,Ne));return Ae.quill.root.addEventListener("paste",Ae.onPaste.bind(Ae)),Ae.container=Ae.quill.addContainer("ql-clipboard"),Ae.container.setAttribute("contenteditable",!0),Ae.container.setAttribute("tabindex",-1),Ae.matchers=[],Y.concat(Ae.options.matchers).forEach(function(ke){var re=o(ke,2),te=re[0],J=re[1];!Ne.matchVisual&&J===it||Ae.addMatcher(te,J)}),Ae}return c(oe,[{key:"addMatcher",value:function(Ne,Ae){this.matchers.push([Ne,Ae])}},{key:"convert",value:function(Ne){if(typeof Ne=="string")return this.container.innerHTML=Ne.replace(/\>\r?\n +\</g,"><"),this.convert();var Ae=this.quill.getFormat(this.quill.selection.savedRange.index);if(Ae[O.default.blotName]){var ke=this.container.innerText;return this.container.innerHTML="",new p.default().insert(ke,q({},O.default.blotName,Ae[O.default.blotName]))}var re=this.prepareMatching(),te=o(re,2),J=te[0],ue=te[1],Ce=ie(this.container,J,ue);return Z(Ce,`
`)&&Ce.ops[Ce.ops.length-1].attributes==null&&(Ce=Ce.compose(new p.default().retain(Ce.length()-1).delete(1))),X.log("convert",this.container.innerHTML,Ce),this.container.innerHTML="",Ce}},{key:"dangerouslyPasteHTML",value:function(Ne,Ae){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof Ne=="string")this.quill.setContents(this.convert(Ne),Ae),this.quill.setSelection(0,b.default.sources.SILENT);else{var re=this.convert(Ae);this.quill.updateContents(new p.default().retain(Ne).concat(re),ke),this.quill.setSelection(Ne+re.length(),b.default.sources.SILENT)}}},{key:"onPaste",value:function(Ne){var Ae=this;if(!(Ne.defaultPrevented||!this.quill.isEnabled())){var ke=this.quill.getSelection(),re=new p.default().retain(ke.index),te=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(b.default.sources.SILENT),setTimeout(function(){re=re.concat(Ae.convert()).delete(ke.length),Ae.quill.updateContents(re,b.default.sources.USER),Ae.quill.setSelection(re.length()-ke.length,b.default.sources.SILENT),Ae.quill.scrollingContainer.scrollTop=te,Ae.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Ne=this,Ae=[],ke=[];return this.matchers.forEach(function(re){var te=o(re,2),J=te[0],ue=te[1];switch(J){case Node.TEXT_NODE:ke.push(ue);break;case Node.ELEMENT_NODE:Ae.push(ue);break;default:[].forEach.call(Ne.container.querySelectorAll(J),function(Ce){Ce[ee]=Ce[ee]||[],Ce[ee].push(ue)});break}}),[Ae,ke]}}]),oe})(k.default);W.DEFAULTS={matchers:[],matchVisual:!0};function z(Oe,oe,ge){return(typeof oe>"u"?"undefined":a(oe))==="object"?Object.keys(oe).reduce(function(Ne,Ae){return z(Ne,Ae,oe[Ae])},Oe):Oe.reduce(function(Ne,Ae){return Ae.attributes&&Ae.attributes[oe]?Ne.push(Ae):Ne.insert(Ae.insert,(0,f.default)({},q({},oe,ge),Ae.attributes))},new p.default)}function Q(Oe){if(Oe.nodeType!==Node.ELEMENT_NODE)return{};var oe="__ql-computed-style";return Oe[oe]||(Oe[oe]=window.getComputedStyle(Oe))}function Z(Oe,oe){for(var ge="",Ne=Oe.ops.length-1;Ne>=0&&ge.length<oe.length;--Ne){var Ae=Oe.ops[Ne];if(typeof Ae.insert!="string")break;ge=Ae.insert+ge}return ge.slice(-1*oe.length)===oe}function V(Oe){if(Oe.childNodes.length===0)return!1;var oe=Q(Oe);return["block","list-item"].indexOf(oe.display)>-1}function ie(Oe,oe,ge){return Oe.nodeType===Oe.TEXT_NODE?ge.reduce(function(Ne,Ae){return Ae(Oe,Ne)},new p.default):Oe.nodeType===Oe.ELEMENT_NODE?[].reduce.call(Oe.childNodes||[],function(Ne,Ae){var ke=ie(Ae,oe,ge);return Ae.nodeType===Oe.ELEMENT_NODE&&(ke=oe.reduce(function(re,te){return te(Ae,re)},ke),ke=(Ae[ee]||[]).reduce(function(re,te){return te(Ae,re)},ke)),Ne.concat(ke)},new p.default):new p.default}function de(Oe,oe,ge){return z(ge,Oe,!0)}function fe(Oe,oe){var ge=g.default.Attributor.Attribute.keys(Oe),Ne=g.default.Attributor.Class.keys(Oe),Ae=g.default.Attributor.Style.keys(Oe),ke={};return ge.concat(Ne).concat(Ae).forEach(function(re){var te=g.default.query(re,g.default.Scope.ATTRIBUTE);te!=null&&(ke[te.attrName]=te.value(Oe),ke[te.attrName])||(te=U[re],te!=null&&(te.attrName===re||te.keyName===re)&&(ke[te.attrName]=te.value(Oe)||void 0),te=T[re],te!=null&&(te.attrName===re||te.keyName===re)&&(te=T[re],ke[te.attrName]=te.value(Oe)||void 0))}),Object.keys(ke).length>0&&(oe=z(oe,ke)),oe}function ve(Oe,oe){var ge=g.default.query(Oe);if(ge==null)return oe;if(ge.prototype instanceof g.default.Embed){var Ne={},Ae=ge.value(Oe);Ae!=null&&(Ne[ge.blotName]=Ae,oe=new p.default().insert(Ne,ge.formats(Oe)))}else typeof ge.formats=="function"&&(oe=z(oe,ge.blotName,ge.formats(Oe)));return oe}function He(Oe,oe){return Z(oe,`
`)||oe.insert(`
`),oe}function $e(){return new p.default}function st(Oe,oe){var ge=g.default.query(Oe);if(ge==null||ge.blotName!=="list-item"||!Z(oe,`
`))return oe;for(var Ne=-1,Ae=Oe.parentNode;!Ae.classList.contains("ql-clipboard");)(g.default.query(Ae)||{}).blotName==="list"&&(Ne+=1),Ae=Ae.parentNode;return Ne<=0?oe:oe.compose(new p.default().retain(oe.length()-1).retain(1,{indent:Ne}))}function _e(Oe,oe){return Z(oe,`
`)||(V(Oe)||oe.length()>0&&Oe.nextSibling&&V(Oe.nextSibling))&&oe.insert(`
`),oe}function it(Oe,oe){if(V(Oe)&&Oe.nextElementSibling!=null&&!Z(oe,`

`)){var ge=Oe.offsetHeight+parseFloat(Q(Oe).marginTop)+parseFloat(Q(Oe).marginBottom);Oe.nextElementSibling.offsetTop>Oe.offsetTop+ge*1.5&&oe.insert(`
`)}return oe}function rt(Oe,oe){var ge={},Ne=Oe.style||{};return Ne.fontStyle&&Q(Oe).fontStyle==="italic"&&(ge.italic=!0),Ne.fontWeight&&(Q(Oe).fontWeight.startsWith("bold")||parseInt(Q(Oe).fontWeight)>=700)&&(ge.bold=!0),Object.keys(ge).length>0&&(oe=z(oe,ge)),parseFloat(Ne.textIndent||0)>0&&(oe=new p.default().insert("	").concat(oe)),oe}function at(Oe,oe){var ge=Oe.data;if(Oe.parentNode.tagName==="O:P")return oe.insert(ge.trim());if(ge.trim().length===0&&Oe.parentNode.classList.contains("ql-clipboard"))return oe;if(!Q(Oe.parentNode).whiteSpace.startsWith("pre")){var Ne=function(ke,re){return re=re.replace(/[^\u00a0]/g,""),re.length<1&&ke?" ":re};ge=ge.replace(/\r\n/g," ").replace(/\n/g," "),ge=ge.replace(/\s\s+/g,Ne.bind(Ne,!0)),(Oe.previousSibling==null&&V(Oe.parentNode)||Oe.previousSibling!=null&&V(Oe.previousSibling))&&(ge=ge.replace(/^\s+/,Ne.bind(Ne,!1))),(Oe.nextSibling==null&&V(Oe.parentNode)||Oe.nextSibling!=null&&V(Oe.nextSibling))&&(ge=ge.replace(/\s+$/,Ne.bind(Ne,!1)))}return oe.insert(ge)}s.default=W,s.matchAttributor=fe,s.matchBlot=ve,s.matchNewline=_e,s.matchSpacing=it,s.matchText=at}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function y(b,v){for(var w=0;w<v.length;w++){var N=v[w];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,v,w){return v&&y(b.prototype,v),w&&y(b,w),b}})(),o=function y(b,v,w){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,v);if(N===void 0){var k=Object.getPrototypeOf(b);return k===null?void 0:y(k,v,w)}else{if("value"in N)return N.value;var j=N.get;return j===void 0?void 0:j.call(w)}},c=i(6),u=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function h(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function p(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function m(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var g=(function(y){m(b,y);function b(){return h(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,[{key:"optimize",value:function(w){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,w),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),b})(u.default);g.blotName="bold",g.tagName=["STRONG","B"],s.default=g}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.addControls=s.default=void 0;var a=(function(){function R(P,q){var H=[],G=!0,ne=!1,X=void 0;try{for(var ee=P[Symbol.iterator](),Y;!(G=(Y=ee.next()).done)&&(H.push(Y.value),!(q&&H.length===q));G=!0);}catch(U){ne=!0,X=U}finally{try{!G&&ee.return&&ee.return()}finally{if(ne)throw X}}return H}return function(P,q){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return R(P,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function R(P,q){for(var H=0;H<q.length;H++){var G=q[H];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(P,G.key,G)}}return function(P,q,H){return q&&R(P.prototype,q),H&&R(P,H),P}})(),c=i(2),u=w(c),f=i(0),h=w(f),p=i(5),m=w(p),g=i(10),y=w(g),b=i(9),v=w(b);function w(R){return R&&R.__esModule?R:{default:R}}function N(R,P,q){return P in R?Object.defineProperty(R,P,{value:q,enumerable:!0,configurable:!0,writable:!0}):R[P]=q,R}function k(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function j(R,P){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:R}function S(R,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);R.prototype=Object.create(P&&P.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(R,P):R.__proto__=P)}var C=(0,y.default)("quill:toolbar"),O=(function(R){S(P,R);function P(q,H){k(this,P);var G=j(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,q,H));if(Array.isArray(G.options.container)){var ne=document.createElement("div");B(ne,G.options.container),q.container.parentNode.insertBefore(ne,q.container),G.container=ne}else typeof G.options.container=="string"?G.container=document.querySelector(G.options.container):G.container=G.options.container;if(!(G.container instanceof HTMLElement)){var X;return X=C.error("Container required for toolbar",G.options),j(G,X)}return G.container.classList.add("ql-toolbar"),G.controls=[],G.handlers={},Object.keys(G.options.handlers).forEach(function(ee){G.addHandler(ee,G.options.handlers[ee])}),[].forEach.call(G.container.querySelectorAll("button, select"),function(ee){G.attach(ee)}),G.quill.on(m.default.events.EDITOR_CHANGE,function(ee,Y){ee===m.default.events.SELECTION_CHANGE&&G.update(Y)}),G.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){var ee=G.quill.selection.getRange(),Y=a(ee,1),U=Y[0];G.update(U)}),G}return o(P,[{key:"addHandler",value:function(H,G){this.handlers[H]=G}},{key:"attach",value:function(H){var G=this,ne=[].find.call(H.classList,function(ee){return ee.indexOf("ql-")===0});if(ne){if(ne=ne.slice(3),H.tagName==="BUTTON"&&H.setAttribute("type","button"),this.handlers[ne]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[ne]==null){C.warn("ignoring attaching to disabled format",ne,H);return}if(h.default.query(ne)==null){C.warn("ignoring attaching to nonexistent format",ne,H);return}}var X=H.tagName==="SELECT"?"change":"click";H.addEventListener(X,function(ee){var Y=void 0;if(H.tagName==="SELECT"){if(H.selectedIndex<0)return;var U=H.options[H.selectedIndex];U.hasAttribute("selected")?Y=!1:Y=U.value||!1}else H.classList.contains("ql-active")?Y=!1:Y=H.value||!H.hasAttribute("value"),ee.preventDefault();G.quill.focus();var T=G.quill.selection.getRange(),W=a(T,1),z=W[0];if(G.handlers[ne]!=null)G.handlers[ne].call(G,Y);else if(h.default.query(ne).prototype instanceof h.default.Embed){if(Y=prompt("Enter "+ne),!Y)return;G.quill.updateContents(new u.default().retain(z.index).delete(z.length).insert(N({},ne,Y)),m.default.sources.USER)}else G.quill.format(ne,Y,m.default.sources.USER);G.update(z)}),this.controls.push([ne,H])}}},{key:"update",value:function(H){var G=H==null?{}:this.quill.getFormat(H);this.controls.forEach(function(ne){var X=a(ne,2),ee=X[0],Y=X[1];if(Y.tagName==="SELECT"){var U=void 0;if(H==null)U=null;else if(G[ee]==null)U=Y.querySelector("option[selected]");else if(!Array.isArray(G[ee])){var T=G[ee];typeof T=="string"&&(T=T.replace(/\"/g,'\\"')),U=Y.querySelector('option[value="'+T+'"]')}U==null?(Y.value="",Y.selectedIndex=-1):U.selected=!0}else if(H==null)Y.classList.remove("ql-active");else if(Y.hasAttribute("value")){var W=G[ee]===Y.getAttribute("value")||G[ee]!=null&&G[ee].toString()===Y.getAttribute("value")||G[ee]==null&&!Y.getAttribute("value");Y.classList.toggle("ql-active",W)}else Y.classList.toggle("ql-active",G[ee]!=null)})}}]),P})(v.default);O.DEFAULTS={};function M(R,P,q){var H=document.createElement("button");H.setAttribute("type","button"),H.classList.add("ql-"+P),q!=null&&(H.value=q),R.appendChild(H)}function B(R,P){Array.isArray(P[0])||(P=[P]),P.forEach(function(q){var H=document.createElement("span");H.classList.add("ql-formats"),q.forEach(function(G){if(typeof G=="string")M(H,G);else{var ne=Object.keys(G)[0],X=G[ne];Array.isArray(X)?I(H,ne,X):M(H,ne,X)}}),R.appendChild(H)})}function I(R,P,q){var H=document.createElement("select");H.classList.add("ql-"+P),q.forEach(function(G){var ne=document.createElement("option");G!==!1?ne.setAttribute("value",G):ne.setAttribute("selected","selected"),H.appendChild(ne)}),R.appendChild(H)}O.DEFAULTS={container:null,handlers:{clean:function(){var P=this,q=this.quill.getSelection();if(q!=null)if(q.length==0){var H=this.quill.getFormat();Object.keys(H).forEach(function(G){h.default.query(G,h.default.Scope.INLINE)!=null&&P.quill.format(G,!1)})}else this.quill.removeFormat(q,m.default.sources.USER)},direction:function(P){var q=this.quill.getFormat().align;P==="rtl"&&q==null?this.quill.format("align","right",m.default.sources.USER):!P&&q==="right"&&this.quill.format("align",!1,m.default.sources.USER),this.quill.format("direction",P,m.default.sources.USER)},indent:function(P){var q=this.quill.getSelection(),H=this.quill.getFormat(q),G=parseInt(H.indent||0);if(P==="+1"||P==="-1"){var ne=P==="+1"?1:-1;H.direction==="rtl"&&(ne*=-1),this.quill.format("indent",G+ne,m.default.sources.USER)}},link:function(P){P===!0&&(P=prompt("Enter link URL:")),this.quill.format("link",P,m.default.sources.USER)},list:function(P){var q=this.quill.getSelection(),H=this.quill.getFormat(q);P==="check"?H.list==="checked"||H.list==="unchecked"?this.quill.format("list",!1,m.default.sources.USER):this.quill.format("list","unchecked",m.default.sources.USER):this.quill.format("list",P,m.default.sources.USER)}}},s.default=O,s.addControls=B}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function y(b,v){for(var w=0;w<v.length;w++){var N=v[w];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,v,w){return v&&y(b.prototype,v),w&&y(b,w),b}})(),o=function y(b,v,w){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,v);if(N===void 0){var k=Object.getPrototypeOf(b);return k===null?void 0:y(k,v,w)}else{if("value"in N)return N.value;var j=N.get;return j===void 0?void 0:j.call(w)}},c=i(28),u=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function h(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function p(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function m(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var g=(function(y){m(b,y);function b(v,w){h(this,b);var N=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,v));return N.label.innerHTML=w,N.container.classList.add("ql-color-picker"),[].slice.call(N.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(k){k.classList.add("ql-primary")}),N}return a(b,[{key:"buildItem",value:function(w){var N=o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"buildItem",this).call(this,w);return N.style.backgroundColor=w.getAttribute("value")||"",N}},{key:"selectItem",value:function(w,N){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,w,N);var k=this.label.querySelector(".ql-color-label"),j=w&&w.getAttribute("data-value")||"";k&&(k.tagName==="line"?k.style.stroke=j:k.style.fill=j)}}]),b})(u.default);s.default=g}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function y(b,v){for(var w=0;w<v.length;w++){var N=v[w];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,v,w){return v&&y(b.prototype,v),w&&y(b,w),b}})(),o=function y(b,v,w){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,v);if(N===void 0){var k=Object.getPrototypeOf(b);return k===null?void 0:y(k,v,w)}else{if("value"in N)return N.value;var j=N.get;return j===void 0?void 0:j.call(w)}},c=i(28),u=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function h(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function p(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function m(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var g=(function(y){m(b,y);function b(v,w){h(this,b);var N=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,v));return N.container.classList.add("ql-icon-picker"),[].forEach.call(N.container.querySelectorAll(".ql-picker-item"),function(k){k.innerHTML=w[k.getAttribute("data-value")||""]}),N.defaultItem=N.container.querySelector(".ql-selected"),N.selectItem(N.defaultItem),N}return a(b,[{key:"selectItem",value:function(w,N){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,w,N),w=w||this.defaultItem,this.label.innerHTML=w.innerHTML}}]),b})(u.default);s.default=g}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function u(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,h,p){return h&&u(f.prototype,h),p&&u(f,p),f}})();function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var c=(function(){function u(f,h){var p=this;o(this,u),this.quill=f,this.boundsContainer=h||document.body,this.root=f.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){p.root.style.marginTop=-1*p.quill.root.scrollTop+"px"}),this.hide()}return a(u,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(h){var p=h.left+h.width/2-this.root.offsetWidth/2,m=h.bottom+this.quill.root.scrollTop;this.root.style.left=p+"px",this.root.style.top=m+"px",this.root.classList.remove("ql-flip");var g=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),b=0;if(y.right>g.right&&(b=g.right-y.right,this.root.style.left=p+b+"px"),y.left<g.left&&(b=g.left-y.left,this.root.style.left=p+b+"px"),y.bottom>g.bottom){var v=y.bottom-y.top,w=h.bottom-h.top+v;this.root.style.top=m-w+"px",this.root.classList.add("ql-flip")}return b}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),u})();s.default=c}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function I(R,P){var q=[],H=!0,G=!1,ne=void 0;try{for(var X=R[Symbol.iterator](),ee;!(H=(ee=X.next()).done)&&(q.push(ee.value),!(P&&q.length===P));H=!0);}catch(Y){G=!0,ne=Y}finally{try{!H&&X.return&&X.return()}finally{if(G)throw ne}}return q}return function(R,P){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return I(R,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function I(R,P,q){R===null&&(R=Function.prototype);var H=Object.getOwnPropertyDescriptor(R,P);if(H===void 0){var G=Object.getPrototypeOf(R);return G===null?void 0:I(G,P,q)}else{if("value"in H)return H.value;var ne=H.get;return ne===void 0?void 0:ne.call(q)}},c=(function(){function I(R,P){for(var q=0;q<P.length;q++){var H=P[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(R,H.key,H)}}return function(R,P,q){return P&&I(R.prototype,P),q&&I(R,q),R}})(),u=i(3),f=k(u),h=i(8),p=k(h),m=i(43),g=k(m),y=i(27),b=k(y),v=i(15),w=i(41),N=k(w);function k(I){return I&&I.__esModule?I:{default:I}}function j(I,R){if(!(I instanceof R))throw new TypeError("Cannot call a class as a function")}function S(I,R){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:I}function C(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);I.prototype=Object.create(R&&R.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(I,R):I.__proto__=R)}var O=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],M=(function(I){C(R,I);function R(P,q){j(this,R),q.modules.toolbar!=null&&q.modules.toolbar.container==null&&(q.modules.toolbar.container=O);var H=S(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,P,q));return H.quill.container.classList.add("ql-snow"),H}return c(R,[{key:"extendToolbar",value:function(q){q.container.classList.add("ql-snow"),this.buildButtons([].slice.call(q.container.querySelectorAll("button")),N.default),this.buildPickers([].slice.call(q.container.querySelectorAll("select")),N.default),this.tooltip=new B(this.quill,this.options.bounds),q.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(H,G){q.handlers.link.call(q,!G.format.link)})}}]),R})(g.default);M.DEFAULTS=(0,f.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(R){if(R){var P=this.quill.getSelection();if(P==null||P.length==0)return;var q=this.quill.getText(P);/^\S+@\S+\.\S+$/.test(q)&&q.indexOf("mailto:")!==0&&(q="mailto:"+q);var H=this.quill.theme.tooltip;H.edit("link",q)}else this.quill.format("link",!1)}}}}});var B=(function(I){C(R,I);function R(P,q){j(this,R);var H=S(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,P,q));return H.preview=H.root.querySelector("a.ql-preview"),H}return c(R,[{key:"listen",value:function(){var q=this;o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(H){q.root.classList.contains("ql-editing")?q.save():q.edit("link",q.preview.textContent),H.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(H){if(q.linkRange!=null){var G=q.linkRange;q.restoreFocus(),q.quill.formatText(G,"link",!1,p.default.sources.USER),delete q.linkRange}H.preventDefault(),q.hide()}),this.quill.on(p.default.events.SELECTION_CHANGE,function(H,G,ne){if(H!=null){if(H.length===0&&ne===p.default.sources.USER){var X=q.quill.scroll.descendant(b.default,H.index),ee=a(X,2),Y=ee[0],U=ee[1];if(Y!=null){q.linkRange=new v.Range(H.index-U,Y.length());var T=b.default.formats(Y.domNode);q.preview.textContent=T,q.preview.setAttribute("href",T),q.show(),q.position(q.quill.getBounds(q.linkRange));return}}else delete q.linkRange;q.hide()}})}},{key:"show",value:function(){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),R})(m.BaseTooltip);B.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),s.default=M}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=i(29),o=Ae(a),c=i(36),u=i(38),f=i(64),h=i(65),p=Ae(h),m=i(66),g=Ae(m),y=i(67),b=Ae(y),v=i(37),w=i(26),N=i(39),k=i(40),j=i(56),S=Ae(j),C=i(68),O=Ae(C),M=i(27),B=Ae(M),I=i(69),R=Ae(I),P=i(70),q=Ae(P),H=i(71),G=Ae(H),ne=i(72),X=Ae(ne),ee=i(73),Y=Ae(ee),U=i(13),T=Ae(U),W=i(74),z=Ae(W),Q=i(75),Z=Ae(Q),V=i(57),ie=Ae(V),de=i(41),fe=Ae(de),ve=i(28),He=Ae(ve),$e=i(59),st=Ae($e),_e=i(60),it=Ae(_e),rt=i(61),at=Ae(rt),Oe=i(108),oe=Ae(Oe),ge=i(62),Ne=Ae(ge);function Ae(ke){return ke&&ke.__esModule?ke:{default:ke}}o.default.register({"attributors/attribute/direction":u.DirectionAttribute,"attributors/class/align":c.AlignClass,"attributors/class/background":v.BackgroundClass,"attributors/class/color":w.ColorClass,"attributors/class/direction":u.DirectionClass,"attributors/class/font":N.FontClass,"attributors/class/size":k.SizeClass,"attributors/style/align":c.AlignStyle,"attributors/style/background":v.BackgroundStyle,"attributors/style/color":w.ColorStyle,"attributors/style/direction":u.DirectionStyle,"attributors/style/font":N.FontStyle,"attributors/style/size":k.SizeStyle},!0),o.default.register({"formats/align":c.AlignClass,"formats/direction":u.DirectionClass,"formats/indent":f.IndentClass,"formats/background":v.BackgroundStyle,"formats/color":w.ColorStyle,"formats/font":N.FontClass,"formats/size":k.SizeClass,"formats/blockquote":p.default,"formats/code-block":T.default,"formats/header":g.default,"formats/list":b.default,"formats/bold":S.default,"formats/code":U.Code,"formats/italic":O.default,"formats/link":B.default,"formats/script":R.default,"formats/strike":q.default,"formats/underline":G.default,"formats/image":X.default,"formats/video":Y.default,"formats/list/item":y.ListItem,"modules/formula":z.default,"modules/syntax":Z.default,"modules/toolbar":ie.default,"themes/bubble":oe.default,"themes/snow":Ne.default,"ui/icons":fe.default,"ui/picker":He.default,"ui/icon-picker":it.default,"ui/color-picker":st.default,"ui/tooltip":at.default},!0),s.default=o.default}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.IndentClass=void 0;var a=(function(){function b(v,w){for(var N=0;N<w.length;N++){var k=w[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(v,k.key,k)}}return function(v,w,N){return w&&b(v.prototype,w),N&&b(v,N),v}})(),o=function b(v,w,N){v===null&&(v=Function.prototype);var k=Object.getOwnPropertyDescriptor(v,w);if(k===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,w,N)}else{if("value"in k)return k.value;var S=k.get;return S===void 0?void 0:S.call(N)}},c=i(0),u=f(c);function f(b){return b&&b.__esModule?b:{default:b}}function h(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function p(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function m(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var g=(function(b){m(v,b);function v(){return h(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"add",value:function(N,k){if(k==="+1"||k==="-1"){var j=this.value(N)||0;k=k==="+1"?j+1:j-1}return k===0?(this.remove(N),!0):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"add",this).call(this,N,k)}},{key:"canAdd",value:function(N,k){return o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,N,k)||o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,N,parseInt(k))}},{key:"value",value:function(N){return parseInt(o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,N))||void 0}}]),v})(u.default.Attributor.Class),y=new g("indent","ql-indent",{scope:u.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});s.IndentClass=y}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=i(4),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function f(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function h(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=(function(m){h(g,m);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g})(o.default);p.blotName="blockquote",p.tagName="blockquote",s.default=p}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function g(y,b){for(var v=0;v<b.length;v++){var w=b[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,b,v){return b&&g(y.prototype,b),v&&g(y,v),y}})(),o=i(4),c=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function h(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:g}function p(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}var m=(function(g){p(y,g);function y(){return f(this,y),h(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,null,[{key:"formats",value:function(v){return this.tagName.indexOf(v.tagName)+1}}]),y})(c.default);m.blotName="header",m.tagName=["H1","H2","H3","H4","H5","H6"],s.default=m}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.ListItem=void 0;var a=(function(){function j(S,C){for(var O=0;O<C.length;O++){var M=C[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}return function(S,C,O){return C&&j(S.prototype,C),O&&j(S,O),S}})(),o=function j(S,C,O){S===null&&(S=Function.prototype);var M=Object.getOwnPropertyDescriptor(S,C);if(M===void 0){var B=Object.getPrototypeOf(S);return B===null?void 0:j(B,C,O)}else{if("value"in M)return M.value;var I=M.get;return I===void 0?void 0:I.call(O)}},c=i(0),u=g(c),f=i(4),h=g(f),p=i(25),m=g(p);function g(j){return j&&j.__esModule?j:{default:j}}function y(j,S,C){return S in j?Object.defineProperty(j,S,{value:C,enumerable:!0,configurable:!0,writable:!0}):j[S]=C,j}function b(j,S){if(!(j instanceof S))throw new TypeError("Cannot call a class as a function")}function v(j,S){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:j}function w(j,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);j.prototype=Object.create(S&&S.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(j,S):j.__proto__=S)}var N=(function(j){w(S,j);function S(){return b(this,S),v(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,[{key:"format",value:function(O,M){O===k.blotName&&!M?this.replaceWith(u.default.create(this.statics.scope)):o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,O,M)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(O,M){return this.parent.isolate(this.offset(this.parent),this.length()),O===this.parent.statics.blotName?(this.parent.replaceWith(O,M),this):(this.parent.unwrap(),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,O,M))}}],[{key:"formats",value:function(O){return O.tagName===this.tagName?void 0:o(S.__proto__||Object.getPrototypeOf(S),"formats",this).call(this,O)}}]),S})(h.default);N.blotName="list-item",N.tagName="LI";var k=(function(j){w(S,j),a(S,null,[{key:"create",value:function(O){var M=O==="ordered"?"OL":"UL",B=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,M);return(O==="checked"||O==="unchecked")&&B.setAttribute("data-checked",O==="checked"),B}},{key:"formats",value:function(O){if(O.tagName==="OL")return"ordered";if(O.tagName==="UL")return O.hasAttribute("data-checked")?O.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function S(C){b(this,S);var O=v(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,C)),M=function(I){if(I.target.parentNode===C){var R=O.statics.formats(C),P=u.default.find(I.target);R==="checked"?P.format("list","unchecked"):R==="unchecked"&&P.format("list","checked")}};return C.addEventListener("touchstart",M),C.addEventListener("mousedown",M),O}return a(S,[{key:"format",value:function(O,M){this.children.length>0&&this.children.tail.format(O,M)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(O,M){if(O instanceof N)o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,O,M);else{var B=M==null?this.length():M.offset(this),I=this.split(B);I.parent.insertBefore(O,I)}}},{key:"optimize",value:function(O){o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,O);var M=this.next;M!=null&&M.prev===this&&M.statics.blotName===this.statics.blotName&&M.domNode.tagName===this.domNode.tagName&&M.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(M.moveChildren(this),M.remove())}},{key:"replace",value:function(O){if(O.statics.blotName!==this.statics.blotName){var M=u.default.create(this.statics.defaultChild);O.moveChildren(M),this.appendChild(M)}o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,O)}}]),S})(m.default);k.blotName="list",k.scope=u.default.Scope.BLOCK_BLOT,k.tagName=["OL","UL"],k.defaultChild="list-item",k.allowedChildren=[N],s.ListItem=N,s.default=k}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=i(56),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function f(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function h(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=(function(m){h(g,m);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g})(o.default);p.blotName="italic",p.tagName=["EM","I"],s.default=p}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function y(b,v){for(var w=0;w<v.length;w++){var N=v[w];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,v,w){return v&&y(b.prototype,v),w&&y(b,w),b}})(),o=function y(b,v,w){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,v);if(N===void 0){var k=Object.getPrototypeOf(b);return k===null?void 0:y(k,v,w)}else{if("value"in N)return N.value;var j=N.get;return j===void 0?void 0:j.call(w)}},c=i(6),u=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function h(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function p(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function m(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var g=(function(y){m(b,y);function b(){return h(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,null,[{key:"create",value:function(w){return w==="super"?document.createElement("sup"):w==="sub"?document.createElement("sub"):o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,w)}},{key:"formats",value:function(w){if(w.tagName==="SUB")return"sub";if(w.tagName==="SUP")return"super"}}]),b})(u.default);g.blotName="script",g.tagName=["SUB","SUP"],s.default=g}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=i(6),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function f(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function h(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=(function(m){h(g,m);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g})(o.default);p.blotName="strike",p.tagName="S",s.default=p}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=i(6),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function f(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function h(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=(function(m){h(g,m);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g})(o.default);p.blotName="underline",p.tagName="U",s.default=p}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function v(w,N){for(var k=0;k<N.length;k++){var j=N[k];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,N,k){return N&&v(w.prototype,N),k&&v(w,k),w}})(),o=function v(w,N,k){w===null&&(w=Function.prototype);var j=Object.getOwnPropertyDescriptor(w,N);if(j===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:v(S,N,k)}else{if("value"in j)return j.value;var C=j.get;return C===void 0?void 0:C.call(k)}},c=i(0),u=h(c),f=i(27);function h(v){return v&&v.__esModule?v:{default:v}}function p(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function m(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function g(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var y=["alt","height","width"],b=(function(v){g(w,v);function w(){return p(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"format",value:function(k,j){y.indexOf(k)>-1?j?this.domNode.setAttribute(k,j):this.domNode.removeAttribute(k):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,k,j)}}],[{key:"create",value:function(k){var j=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,k);return typeof k=="string"&&j.setAttribute("src",this.sanitize(k)),j}},{key:"formats",value:function(k){return y.reduce(function(j,S){return k.hasAttribute(S)&&(j[S]=k.getAttribute(S)),j},{})}},{key:"match",value:function(k){return/\.(jpe?g|gif|png)$/.test(k)||/^data:image\/.+;base64/.test(k)}},{key:"sanitize",value:function(k){return(0,f.sanitize)(k,["http","https","data"])?k:"//:0"}},{key:"value",value:function(k){return k.getAttribute("src")}}]),w})(u.default.Embed);b.blotName="image",b.tagName="IMG",s.default=b}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0});var a=(function(){function v(w,N){for(var k=0;k<N.length;k++){var j=N[k];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,N,k){return N&&v(w.prototype,N),k&&v(w,k),w}})(),o=function v(w,N,k){w===null&&(w=Function.prototype);var j=Object.getOwnPropertyDescriptor(w,N);if(j===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:v(S,N,k)}else{if("value"in j)return j.value;var C=j.get;return C===void 0?void 0:C.call(k)}},c=i(4),u=i(27),f=h(u);function h(v){return v&&v.__esModule?v:{default:v}}function p(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function m(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function g(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var y=["height","width"],b=(function(v){g(w,v);function w(){return p(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"format",value:function(k,j){y.indexOf(k)>-1?j?this.domNode.setAttribute(k,j):this.domNode.removeAttribute(k):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,k,j)}}],[{key:"create",value:function(k){var j=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,k);return j.setAttribute("frameborder","0"),j.setAttribute("allowfullscreen",!0),j.setAttribute("src",this.sanitize(k)),j}},{key:"formats",value:function(k){return y.reduce(function(j,S){return k.hasAttribute(S)&&(j[S]=k.getAttribute(S)),j},{})}},{key:"sanitize",value:function(k){return f.default.sanitize(k)}},{key:"value",value:function(k){return k.getAttribute("src")}}]),w})(c.BlockEmbed);b.blotName="video",b.className="ql-video",b.tagName="IFRAME",s.default=b}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.FormulaBlot=void 0;var a=(function(){function k(j,S){for(var C=0;C<S.length;C++){var O=S[C];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(j,O.key,O)}}return function(j,S,C){return S&&k(j.prototype,S),C&&k(j,C),j}})(),o=function k(j,S,C){j===null&&(j=Function.prototype);var O=Object.getOwnPropertyDescriptor(j,S);if(O===void 0){var M=Object.getPrototypeOf(j);return M===null?void 0:k(M,S,C)}else{if("value"in O)return O.value;var B=O.get;return B===void 0?void 0:B.call(C)}},c=i(35),u=g(c),f=i(5),h=g(f),p=i(9),m=g(p);function g(k){return k&&k.__esModule?k:{default:k}}function y(k,j){if(!(k instanceof j))throw new TypeError("Cannot call a class as a function")}function b(k,j){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:k}function v(k,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);k.prototype=Object.create(j&&j.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(k,j):k.__proto__=j)}var w=(function(k){v(j,k);function j(){return y(this,j),b(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return a(j,null,[{key:"create",value:function(C){var O=o(j.__proto__||Object.getPrototypeOf(j),"create",this).call(this,C);return typeof C=="string"&&(window.katex.render(C,O,{throwOnError:!1,errorColor:"#f00"}),O.setAttribute("data-value",C)),O}},{key:"value",value:function(C){return C.getAttribute("data-value")}}]),j})(u.default);w.blotName="formula",w.className="ql-formula",w.tagName="SPAN";var N=(function(k){v(j,k),a(j,null,[{key:"register",value:function(){h.default.register(w,!0)}}]);function j(){y(this,j);var S=b(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return S}return j})(m.default);s.FormulaBlot=w,s.default=N}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.CodeToken=s.CodeBlock=void 0;var a=(function(){function C(O,M){for(var B=0;B<M.length;B++){var I=M[B];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(O,I.key,I)}}return function(O,M,B){return M&&C(O.prototype,M),B&&C(O,B),O}})(),o=function C(O,M,B){O===null&&(O=Function.prototype);var I=Object.getOwnPropertyDescriptor(O,M);if(I===void 0){var R=Object.getPrototypeOf(O);return R===null?void 0:C(R,M,B)}else{if("value"in I)return I.value;var P=I.get;return P===void 0?void 0:P.call(B)}},c=i(0),u=b(c),f=i(5),h=b(f),p=i(9),m=b(p),g=i(13),y=b(g);function b(C){return C&&C.__esModule?C:{default:C}}function v(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")}function w(C,O){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:C}function N(C,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);C.prototype=Object.create(O&&O.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(C,O):C.__proto__=O)}var k=(function(C){N(O,C);function O(){return v(this,O),w(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return a(O,[{key:"replaceWith",value:function(B){this.domNode.textContent=this.domNode.textContent,this.attach(),o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replaceWith",this).call(this,B)}},{key:"highlight",value:function(B){var I=this.domNode.textContent;this.cachedText!==I&&((I.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=B(I),this.domNode.normalize(),this.attach()),this.cachedText=I)}}]),O})(y.default);k.className="ql-syntax";var j=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),S=(function(C){N(O,C),a(O,null,[{key:"register",value:function(){h.default.register(j,!0),h.default.register(k,!0)}}]);function O(M,B){v(this,O);var I=w(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,M,B));if(typeof I.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var R=null;return I.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(R),R=setTimeout(function(){I.highlight(),R=null},I.options.interval)}),I.highlight(),I}return a(O,[{key:"highlight",value:function(){var B=this;if(!this.quill.selection.composing){this.quill.update(h.default.sources.USER);var I=this.quill.getSelection();this.quill.scroll.descendants(k).forEach(function(R){R.highlight(B.options.highlight)}),this.quill.update(h.default.sources.SILENT),I!=null&&this.quill.setSelection(I,h.default.sources.SILENT)}}}]),O})(m.default);S.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(C){var O=window.hljs.highlightAuto(C);return O.value}})(),interval:1e3},s.CodeBlock=k,s.CodeToken=j,s.default=S}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(n,s){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(n,s){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(n,s){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(n,s){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(n,s){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(n,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.BubbleTooltip=void 0;var a=function O(M,B,I){M===null&&(M=Function.prototype);var R=Object.getOwnPropertyDescriptor(M,B);if(R===void 0){var P=Object.getPrototypeOf(M);return P===null?void 0:O(P,B,I)}else{if("value"in R)return R.value;var q=R.get;return q===void 0?void 0:q.call(I)}},o=(function(){function O(M,B){for(var I=0;I<B.length;I++){var R=B[I];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(M,R.key,R)}}return function(M,B,I){return B&&O(M.prototype,B),I&&O(M,I),M}})(),c=i(3),u=v(c),f=i(8),h=v(f),p=i(43),m=v(p),g=i(15),y=i(41),b=v(y);function v(O){return O&&O.__esModule?O:{default:O}}function w(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}function N(O,M){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:O}function k(O,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);O.prototype=Object.create(M&&M.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(O,M):O.__proto__=M)}var j=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],S=(function(O){k(M,O);function M(B,I){w(this,M),I.modules.toolbar!=null&&I.modules.toolbar.container==null&&(I.modules.toolbar.container=j);var R=N(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,B,I));return R.quill.container.classList.add("ql-bubble"),R}return o(M,[{key:"extendToolbar",value:function(I){this.tooltip=new C(this.quill,this.options.bounds),this.tooltip.root.appendChild(I.container),this.buildButtons([].slice.call(I.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(I.container.querySelectorAll("select")),b.default)}}]),M})(m.default);S.DEFAULTS=(0,u.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(M){M?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var C=(function(O){k(M,O);function M(B,I){w(this,M);var R=N(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,B,I));return R.quill.on(h.default.events.EDITOR_CHANGE,function(P,q,H,G){if(P===h.default.events.SELECTION_CHANGE)if(q!=null&&q.length>0&&G===h.default.sources.USER){R.show(),R.root.style.left="0px",R.root.style.width="",R.root.style.width=R.root.offsetWidth+"px";var ne=R.quill.getLines(q.index,q.length);if(ne.length===1)R.position(R.quill.getBounds(q));else{var X=ne[ne.length-1],ee=R.quill.getIndex(X),Y=Math.min(X.length()-1,q.index+q.length-ee),U=R.quill.getBounds(new g.Range(ee,Y));R.position(U)}}else document.activeElement!==R.textbox&&R.quill.hasFocus()&&R.hide()}),R}return o(M,[{key:"listen",value:function(){var I=this;a(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){I.root.classList.remove("ql-editing")}),this.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!I.root.classList.contains("ql-hidden")){var R=I.quill.getSelection();R!=null&&I.position(I.quill.getBounds(R))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(I){var R=a(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"position",this).call(this,I),P=this.root.querySelector(".ql-tooltip-arrow");if(P.style.marginLeft="",R===0)return R;P.style.marginLeft=-1*R-P.offsetWidth/2+"px"}}]),M})(p.BaseTooltip);C.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),s.BubbleTooltip=C,s.default=S}),(function(n,s,i){n.exports=i(63)})]).default})})(Yf)),Yf.exports}var Ks,$N;function iz(){if($N)return Ks;$N=1;var t=Ks&&Ks.__extends||(function(){var h=function(p,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var b in y)y.hasOwnProperty(b)&&(g[b]=y[b])},h(p,m)};return function(p,m){h(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}})(),e=Ks&&Ks.__assign||function(){return e=Object.assign||function(h){for(var p,m=1,g=arguments.length;m<g;m++){p=arguments[m];for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(h[y]=p[y])}return h},e.apply(this,arguments)},n=Ks&&Ks.__spreadArrays||function(){for(var h=0,p=0,m=arguments.length;p<m;p++)h+=arguments[p].length;for(var g=Array(h),y=0,p=0;p<m;p++)for(var b=arguments[p],v=0,w=b.length;v<w;v++,y++)g[y]=b[v];return g},s=Ks&&Ks.__importDefault||function(h){return h&&h.__esModule?h:{default:h}},i=s(bh()),a=s(Hg()),o=s(nz()),c=s(sz()),u=(function(h){t(p,h);function p(m){var g=h.call(this,m)||this;g.dirtyProps=["modules","formats","bounds","theme","children"],g.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],g.state={generation:0},g.selection=null,g.onEditorChange=function(b,v,w,N){var k,j,S,C;b==="text-change"?(j=(k=g).onEditorChangeText)===null||j===void 0||j.call(k,g.editor.root.innerHTML,v,N,g.unprivilegedEditor):b==="selection-change"&&((C=(S=g).onEditorChangeSelection)===null||C===void 0||C.call(S,v,N,g.unprivilegedEditor))};var y=g.isControlled()?m.value:m.defaultValue;return g.value=y??"",g}return p.prototype.validateProps=function(m){var g;if(i.default.Children.count(m.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(m.children)){var y=i.default.Children.only(m.children);if(((g=y)===null||g===void 0?void 0:g.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&m.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},p.prototype.shouldComponentUpdate=function(m,g){var y=this,b;if(this.validateProps(m),!this.editor||this.state.generation!==g.generation)return!0;if("value"in m){var v=this.getEditorContents(),w=(b=m.value,b??"");this.isEqualValue(w,v)||this.setEditorContents(this.editor,w)}return m.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,m.readOnly),n(this.cleanProps,this.dirtyProps).some(function(N){return!o.default(m[N],y.props[N])})},p.prototype.shouldComponentRegenerate=function(m){var g=this;return this.dirtyProps.some(function(y){return!o.default(m[y],g.props[y])})},p.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},p.prototype.componentWillUnmount=function(){this.destroyEditor()},p.prototype.componentDidUpdate=function(m,g){var y=this;if(this.editor&&this.shouldComponentRegenerate(m)){var b=this.editor.getContents(),v=this.editor.getSelection();this.regenerationSnapshot={delta:b,selection:v},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==g.generation){var w=this.regenerationSnapshot,b=w.delta,N=w.selection;delete this.regenerationSnapshot,this.instantiateEditor();var k=this.editor;k.setContents(b),f(function(){return y.setEditorSelection(k,N)})}},p.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},p.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},p.prototype.isControlled=function(){return"value"in this.props},p.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},p.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},p.prototype.createEditor=function(m,g){var y=new c.default(m,g);return g.tabIndex!=null&&this.setEditorTabIndex(y,g.tabIndex),this.hookEditor(y),y},p.prototype.hookEditor=function(m){this.unprivilegedEditor=this.makeUnprivilegedEditor(m),m.on("editor-change",this.onEditorChange)},p.prototype.unhookEditor=function(m){m.off("editor-change",this.onEditorChange)},p.prototype.getEditorContents=function(){return this.value},p.prototype.getEditorSelection=function(){return this.selection},p.prototype.isDelta=function(m){return m&&m.ops},p.prototype.isEqualValue=function(m,g){return this.isDelta(m)&&this.isDelta(g)?o.default(m.ops,g.ops):o.default(m,g)},p.prototype.setEditorContents=function(m,g){var y=this;this.value=g;var b=this.getEditorSelection();typeof g=="string"?m.setContents(m.clipboard.convert(g)):m.setContents(g),f(function(){return y.setEditorSelection(m,b)})},p.prototype.setEditorSelection=function(m,g){if(this.selection=g,g){var y=m.getLength();g.index=Math.max(0,Math.min(g.index,y-1)),g.length=Math.max(0,Math.min(g.length,y-1-g.index)),m.setSelection(g)}},p.prototype.setEditorTabIndex=function(m,g){var y,b;!((b=(y=m)===null||y===void 0?void 0:y.scroll)===null||b===void 0)&&b.domNode&&(m.scroll.domNode.tabIndex=g)},p.prototype.setEditorReadOnly=function(m,g){g?m.disable():m.enable()},p.prototype.makeUnprivilegedEditor=function(m){var g=m;return{getHTML:function(){return g.root.innerHTML},getLength:g.getLength.bind(g),getText:g.getText.bind(g),getContents:g.getContents.bind(g),getSelection:g.getSelection.bind(g),getBounds:g.getBounds.bind(g)}},p.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var m=a.default.findDOMNode(this.editingArea);if(!m)throw new Error("Cannot find element for editing area");if(m.nodeType===3)throw new Error("Editing area cannot be a text node");return m},p.prototype.renderEditingArea=function(){var m=this,g=this.props,y=g.children,b=g.preserveWhitespace,v=this.state.generation,w={key:v,ref:function(N){m.editingArea=N}};return i.default.Children.count(y)?i.default.cloneElement(i.default.Children.only(y),w):b?i.default.createElement("pre",e({},w)):i.default.createElement("div",e({},w))},p.prototype.render=function(){var m;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(m=this.props.className,m??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},p.prototype.onEditorChangeText=function(m,g,y,b){var v,w;if(this.editor){var N=this.isDelta(this.value)?b.getContents():b.getHTML();N!==this.getEditorContents()&&(this.lastDeltaChangeSet=g,this.value=N,(w=(v=this.props).onChange)===null||w===void 0||w.call(v,m,g,y,b))}},p.prototype.onEditorChangeSelection=function(m,g,y){var b,v,w,N,k,j;if(this.editor){var S=this.getEditorSelection(),C=!S&&m,O=S&&!m;o.default(m,S)||(this.selection=m,(v=(b=this.props).onChangeSelection)===null||v===void 0||v.call(b,m,g,y),C?(N=(w=this.props).onFocus)===null||N===void 0||N.call(w,m,g,y):O&&((j=(k=this.props).onBlur)===null||j===void 0||j.call(k,S,g,y)))}},p.prototype.focus=function(){this.editor&&this.editor.focus()},p.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},p.displayName="React Quill",p.Quill=c.default,p.defaultProps={theme:"snow",modules:{},readOnly:!1},p})(i.default.Component);function f(h){Promise.resolve().then(h)}return Ks=u,Ks}var az=iz();const oz=Ug(az),Hx=({value:t,onChange:e,placeholder:n,disabled:s=!1,rows:i=4,label:a,required:o,error:c,fullWidth:u=!1,className:f})=>{const h=L.useRef(null),p=L.useRef(!1),m=L.useMemo(()=>({toolbar:{container:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"]]}}),[]);L.useEffect(()=>{const y=()=>{document.querySelectorAll(".ql-tooltip").forEach(v=>{const w=v;w.style.display!=="none"&&(w.style.display="none",w.classList.remove("ql-editing"))})};return s&&y(),()=>{y()}},[s]),L.useEffect(()=>{if(!h.current)return;const b=h.current.getEditor().root;let v=null;const w=()=>(v||(v=document.createElement("div"),v.className="link-hover-tooltip",v.style.cssText=`
          position: absolute;
          background: rgba(0, 0, 0, 0.85);
          color: white;
          padding: 0.375rem 0.75rem;
          border-radius: 0.375rem;
          font-size: 0.75rem;
          pointer-events: none;
          z-index: 10001;
          white-space: nowrap;
          max-width: 300px;
          overflow: hidden;
          text-overflow: ellipsis;
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        `,document.body.appendChild(v)),v),N=C=>{const O=w(),M=C.getAttribute("href")||"";O.textContent=M;const B=C.getBoundingClientRect();O.style.left=`${B.left+window.scrollX}px`,O.style.top=`${B.bottom+window.scrollY+5}px`,O.style.display="block"},k=()=>{v&&(v.style.display="none")},j=()=>{b.querySelectorAll("a").forEach(O=>{var B;const M=O.getAttribute("href");if(M){O.setAttribute("title",M),O.setAttribute("target","_blank"),O.setAttribute("rel","noopener noreferrer"),O.style.pointerEvents="auto",O.style.cursor="pointer";const I=O.cloneNode(!0);(B=O.parentNode)==null||B.replaceChild(I,O),I.addEventListener("mouseenter",()=>N(I)),I.addEventListener("mouseleave",k)}})};j();const S=new MutationObserver(j);return S.observe(b,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["href"]}),()=>{S.disconnect(),v&&(document.body.removeChild(v),v=null)}},[t,s]),L.useEffect(()=>{var S;if(!h.current)return;const y=h.current.getEditor(),b=y.root,v=(S=y.getModule("toolbar"))==null?void 0:S.container,w=()=>{if(p.current)return;document.querySelectorAll(".ql-tooltip").forEach(O=>{const M=O;M.classList.contains("ql-editing")||(M.style.display="none")})},N=C=>{const O=C.target;O!=null&&O.closest(".ql-tooltip")||O!=null&&O.closest(".ql-link")||p.current||setTimeout(w,50)};let k;const j=new MutationObserver(()=>{clearTimeout(k),k=setTimeout(()=>{if(p.current)return;document.querySelectorAll(".ql-tooltip").forEach(O=>{const M=O;M.style.display!=="none"&&!M.classList.contains("ql-editing")&&(M.querySelector('input[type="text"]')||(M.style.display="none"))})},200)});if(b&&(j.observe(b.parentElement||document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),b.addEventListener("focus",N)),v){const C=v.querySelector(".ql-link");if(C){const O=M=>{M.stopPropagation(),p.current=!0,setTimeout(()=>{document.querySelectorAll(".ql-tooltip").forEach(I=>{const R=I;if(R.classList.contains("ql-editing")){R.style.display="flex";const P=R.getBoundingClientRect(),q=window.innerWidth,H=window.innerHeight;P.right>q&&(R.style.left=`${q-P.width-10}px`,R.style.right="auto"),P.left<0&&(R.style.left="10px",R.style.right="auto"),P.bottom>H&&(R.style.top=`${H-P.height-10}px`,R.style.bottom="auto")}})},100),setTimeout(()=>{p.current=!1},5e3)};return C.addEventListener("click",O),()=>{C.removeEventListener("click",O),clearTimeout(k)}}}return setTimeout(w,100),()=>{j.disconnect(),clearTimeout(k),b&&b.removeEventListener("focus",N)}},[t,s]),L.useEffect(()=>{const y=v=>{const w=v.target;w&&(w.classList.contains("ql-action")||w.closest(".ql-action"))&&setTimeout(()=>{document.querySelectorAll(".ql-tooltip").forEach(k=>{const j=k;j.style.display="none",j.classList.remove("ql-editing")}),p.current=!1},150)};document.addEventListener("click",y,!0);const b=setTimeout(()=>{p.current||document.querySelectorAll(".ql-tooltip").forEach(w=>{const N=w;if(N.classList.contains("ql-editing")){const k=N.querySelector('input[type="text"]');k&&document.activeElement!==k&&(N.style.display="none",N.classList.remove("ql-editing"))}})},500);return()=>{document.removeEventListener("click",y,!0),clearTimeout(b)}},[t]);const g=["bold","italic","underline","list","bullet","link"];return r.jsxs("div",{className:`${u?"w-full":""} ${f||""}`,children:[a&&r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a,o&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),r.jsx("div",{className:s?"opacity-50":"",children:r.jsx("div",{className:`rich-text-editor-wrapper ${s?"editor-disabled":""}`,children:r.jsx(oz,{ref:h,theme:"snow",value:t,onChange:e,placeholder:n,modules:m,formats:g,readOnly:s,style:{height:`${i*1.5}rem`},className:"bg-white"})})}),c&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:c}),r.jsx("style",{children:`
        .rich-text-editor-wrapper {
          margin-bottom: 0 !important;
          position: relative;
          display: block;
          height: auto !important;
        }
        .rich-text-editor-wrapper > div {
          margin-bottom: 0 !important;
          padding-bottom: 0 !important;
          height: auto !important;
        }
        .rich-text-editor-wrapper .ql-toolbar {
          border-top-left-radius: 0.375rem;
          border-top-right-radius: 0.375rem;
          border: 1px solid #d1d5db;
          border-bottom: none;
          margin-bottom: 0 !important;
          padding-bottom: 0 !important;
        }
        .rich-text-editor-wrapper .ql-container {
          border-bottom-left-radius: 0.375rem;
          border-bottom-right-radius: 0.375rem;
          border: 1px solid #d1d5db;
          border-top: none;
          position: relative;
          margin-bottom: 0 !important;
          padding-bottom: 0 !important;
          height: auto !important;
        }
        .rich-text-editor-wrapper .ql-editor {
          min-height: ${i*1.5}rem;
          margin-bottom: 0 !important;
          padding-bottom: 0 !important;
          ${f!=null&&f.includes("text-[10px]")?"font-size: 0.625rem !important;":""}
          ${f!=null&&f.includes("text-[11px]")?"font-size: 0.6875rem !important;":""}
        }
        .rich-text-editor-wrapper .ql-toolbar .ql-formats {
          ${f!=null&&f.includes("text-[10px]")?"font-size: 0.625rem !important;":""}
          ${f!=null&&f.includes("text-[11px]")?"font-size: 0.6875rem !important;":""}
        }
        .rich-text-editor-wrapper .ql-toolbar button {
          ${f!=null&&f.includes("text-[10px]")?"padding: 0.25rem !important; width: 1.25rem !important; height: 1.25rem !important;":""}
          ${f!=null&&f.includes("text-[11px]")?"padding: 0.25rem !important; width: 1.5rem !important; height: 1.5rem !important;":""}
        }
        .rich-text-editor-wrapper .ql-snow {
          margin-bottom: 0 !important;
          padding-bottom: 0 !important;
        }
        .rich-text-editor-wrapper .ql-snow.ql-toolbar,
        .rich-text-editor-wrapper .ql-snow .ql-toolbar {
          margin-bottom: 0 !important;
        }
        .rich-text-editor-wrapper .ql-snow.ql-container,
        .rich-text-editor-wrapper .ql-snow .ql-container {
          margin-bottom: 0 !important;
        }
        .rich-text-editor-wrapper .ql-tooltip {
          position: absolute !important;
          z-index: 10000 !important;
          box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2), 0 8px 10px -6px rgba(0, 0, 0, 0.1) !important;
          border-radius: 0.5rem !important;
          border: 1px solid #e5e7eb !important;
          background: white !important;
          padding: 0.5rem !important;
          min-width: 280px !important;
          max-width: 90vw !important;
          display: none !important;
          flex-direction: row !important;
          align-items: center !important;
          gap: 0.5rem !important;
          white-space: nowrap !important;
        }
        .rich-text-editor-wrapper .ql-tooltip.ql-editing {
          position: absolute !important;
          z-index: 10000 !important;
          display: flex !important;
          /* Ensure tooltip stays within viewport */
          left: auto !important;
          right: auto !important;
          transform: none !important;
        }
        /* Adjust tooltip position to stay within viewport */
        .rich-text-editor-wrapper .ql-tooltip.ql-editing[data-position] {
          /* ReactQuill will set data-position, we'll respect it but ensure it's visible */
        }
        .rich-text-editor-wrapper .ql-tooltip::before {
          display: block !important;
        }
        .rich-text-editor-wrapper .ql-tooltip input[type=text] {
          border: 1px solid #d1d5db !important;
          border-radius: 0.375rem !important;
          padding: 0.375rem 0.5rem !important;
          font-size: 0.875rem !important;
          width: 180px !important;
          max-width: calc(90vw - 200px) !important;
          transition: border-color 0.2s !important;
        }
        .rich-text-editor-wrapper .ql-tooltip input[type=text]:focus {
          outline: none !important;
          border-color: #8b5cf6 !important;
          box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1) !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-action,
        .rich-text-editor-wrapper .ql-tooltip a.ql-remove {
          cursor: pointer !important;
          border-radius: 0.375rem !important;
          padding: 0.25rem 0.5rem !important;
          font-weight: 500 !important;
          font-size: 0.75rem !important;
          transition: all 0.2s !important;
          text-decoration: none !important;
          display: inline-flex !important;
          align-items: center !important;
          justify-content: center !important;
          text-align: center !important;
          line-height: 1.5 !important;
          min-width: auto !important;
          width: auto !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-action {
          background: #8b5cf6 !important;
          color: white !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-action:hover {
          background: #7c3aed !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-remove {
          background: #f3f4f6 !important;
          color: #374151 !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-remove:hover {
          background: #e5e7eb !important;
        }
        /* Hide default Quill icons and show text */
        .rich-text-editor-wrapper .ql-tooltip a.ql-action::before {
          display: none !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-action::after {
          content: 'Save' !important;
          display: block !important;
          text-align: center !important;
          width: 100% !important;
          margin: 0 !important;
          padding: 0 !important;
          line-height: inherit !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-remove::before {
          display: none !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-remove::after {
          content: 'Cancel' !important;
          display: block !important;
          text-align: center !important;
          width: 100% !important;
          margin: 0 !important;
          padding: 0 !important;
          line-height: inherit !important;
        }
        /* Style hyperlinks in editor - make them clickable even in read-only mode */
        .rich-text-editor-wrapper .ql-editor a {
          color: #2563eb !important;
          text-decoration: underline !important;
          cursor: pointer !important;
          pointer-events: auto !important;
        }
        .rich-text-editor-wrapper .ql-editor a:hover {
          color: #1d4ed8 !important;
          text-decoration: underline !important;
        }
        .rich-text-editor-wrapper .ql-editor a:visited {
          color: #7c3aed !important;
        }
        /* Ensure links are clickable even when editor is disabled */
        .rich-text-editor-wrapper .ql-editor.ql-disabled a,
        .rich-text-editor-wrapper .ql-container.ql-disabled .ql-editor a {
          pointer-events: auto !important;
          cursor: pointer !important;
        }
        /* Disable toolbar when editor is disabled, but keep links clickable */
        .rich-text-editor-wrapper.editor-disabled .ql-toolbar {
          pointer-events: none !important;
          opacity: 0.5 !important;
        }
        .rich-text-editor-wrapper.editor-disabled .ql-toolbar * {
          pointer-events: none !important;
        }
      `})]})},lz=({containerId:t})=>(L.useEffect(()=>{let e=null;const n=()=>(e||(e=document.createElement("div"),e.className="list-link-hover-tooltip",e.style.cssText=`
          position: absolute;
          background: rgba(0, 0, 0, 0.85);
          color: white;
          padding: 0.375rem 0.75rem;
          border-radius: 0.375rem;
          font-size: 0.75rem;
          pointer-events: none;
          z-index: 10001;
          white-space: nowrap;
          max-width: 300px;
          overflow: hidden;
          text-overflow: ellipsis;
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
          display: none;
        `,document.body.appendChild(e)),e),s=u=>{const f=n(),h=u.getAttribute("data-href")||u.getAttribute("href")||"";f.textContent=h;const p=u.getBoundingClientRect();f.style.left=`${p.left+window.scrollX}px`,f.style.top=`${p.bottom+window.scrollY+5}px`,f.style.display="block"},i=()=>{e&&(e.style.display="none")},a=document.getElementById(t);if(!a)return;const o=()=>{a.querySelectorAll("a.list-hyperlink").forEach(f=>{var p;const h=f.cloneNode(!0);(p=f.parentNode)==null||p.replaceChild(h,f),h.addEventListener("mouseenter",()=>s(h)),h.addEventListener("mouseleave",i)})};o();const c=new MutationObserver(o);return c.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["href","data-href"]}),()=>{c.disconnect(),e&&(document.body.removeChild(e),e=null)}},[t]),null),cz=()=>{var ou,lu,cu,ol,du,uu,fu,yc,hu,pu,mu;const[t,e]=L.useState([]),[n,s]=L.useState(!0),[i,a]=L.useState(""),[o,c]=L.useState("all"),[u,f]=L.useState("all"),[h,p]=L.useState("all"),[m,g]=L.useState("all"),[y,b]=L.useState("all"),[v,w]=L.useState(window.innerWidth<768),[N,k]=L.useState(!1),[j,S]=L.useState(null),[C,O]=L.useState(null),[M,B]=L.useState(!1);L.useEffect(()=>{const E=()=>w(window.innerWidth<768);return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const[I,R]=L.useState(!1),[P,q]=L.useState(null),[H,G]=L.useState(!1),[ne,X]=L.useState(null),[ee,Y]=L.useState(null),[U,T]=L.useState({show:!1,message:"",incompleteActions:[],actionLabel:"Incomplete actions:"}),[W,z]=L.useState(!1),[Q,Z]=L.useState([]),[V,ie]=L.useState(!1),[de,fe]=L.useState(!1),[ve,He]=L.useState([]),[$e,st]=L.useState(!1),{addNotification:_e}=Ki(),[it,rt]=L.useState(null),[at,Oe]=L.useState([]),[oe,ge]=L.useState([]),[Ne,Ae]=L.useState([]),[ke,re]=L.useState([]),[te,J]=L.useState([]),[ue,Ce]=L.useState([]),[ze,Fe]=L.useState([]),[Ue,ht]=L.useState([]),[Te,St]=L.useState({finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",audit_year:"",audit_name:"",audit_key:"",risk_level:"",financial_impact:"",status:"open",selectedAuditKey:"",selectedAuditYear:""}),[Dt,yr]=L.useState(null),[It,Sn]=L.useState({}),[yn,Sr]=L.useState([]),[Ct,Xt]=L.useState({}),[Qt,vn]=L.useState(!1),[At,Jt]=L.useState(null),[ct,rn]=L.useState(null),[Tt,Ft]=L.useState(!1),[jt,sn]=L.useState(!1),[zt,hn]=L.useState(null),[Ht,Cn]=L.useState(null),[Nn,xn]=L.useState(null),ei=L.useRef({}),[Mt,Cr]=L.useState(null),[le,We]=L.useState(!1),[Ve,ot]=L.useState("findings"),Ut=L.useRef(null),[bn,tr]=L.useState(null),[Ts,In]=L.useState(!1),[on,bi]=L.useState(!1),[vs,Ga]=L.useState(!1),ti=L.useRef(null),Xa=L.useRef(null),ni=L.useRef(null),[bs,An]=L.useState(null),[Vn,En]=L.useState(""),[Fn,vr]=L.useState(""),[ri,Qn]=L.useState(""),[Ds,lr]=L.useState([]),[bt,br]=L.useState({finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",risk_level:"",financial_impact:"",status:""}),[Ir,se]=L.useState({}),[we,Se]=L.useState(null),[ae,je]=L.useState([]),[ye,De]=L.useState([]),[kt,Jn]=L.useState(!1),wr={findingId:180,findingName:200,auditName:250,findingDescription:300,riskLevel:120,status:120,financialImpact:150,actions:200},{columnWidths:Yn,resizing:Is,handleMouseDown:Fs}=Go(Ut,wr,"audit-findings-columns"),[Qa,Jo]=L.useState(new Set),[Ar,fs]=L.useState([]),[zs,Ji]=L.useState(!1),[gt,pn]=L.useState({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:"open"}),[Zo,ws]=L.useState({}),[wi,tp]=L.useState([]),[ji,el]=L.useState([]);L.useEffect(()=>{eo(),nu()},[]),L.useEffect(()=>{Ve==="actions"&&Ar.length===0&&Zi()},[Ve]),L.useEffect(()=>{const E=he=>{(he.key==="Escape"||he.keyCode===27)&&(U.show?T({show:!1,message:"",incompleteActions:[],actionLabel:"Incomplete actions:"}):I?(R(!1),q(null)):H?(G(!1),X(null),Y(null)):zt!==null?hn(null):Ht!==null?Cn(null):bn!==null?tr(null):on?bi(!1):Ts?(In(!1),An(null),lr([]),En(""),vr(""),Qn(""),Se(null),je([]),De([])):Qt?_i():N&&Ni())},K=he=>{const Me=he.target;zt!==null&&(Me.closest(".relative")||hn(null)),on&&ti.current&&!ti.current.contains(Me)&&bi(!1)};return window.addEventListener("keydown",E),document.addEventListener("mousedown",K),()=>{window.removeEventListener("keydown",E),document.removeEventListener("mousedown",K)}},[N,Qt,I,H,U.show,zt,Ht,bn,on,Ts]),L.useEffect(()=>{if(Ht!==null){const E=()=>{const K=ei.current[Ht];if(K){const he=K.getBoundingClientRect(),Me=window.innerHeight,me=window.innerWidth,Ke=200,Xe=140;if(he.bottom+Ke+4<=Me)xn({top:he.bottom+4,left:he.left,side:"bottom"});else{const Qe=he.right+Xe+4<=me;xn(Qe?{top:he.top,left:he.right+4,side:"right"}:{top:he.top,left:he.left-Xe-4,side:"right"})}}};return window.addEventListener("scroll",E,!0),window.addEventListener("resize",E),()=>{window.removeEventListener("scroll",E,!0),window.removeEventListener("resize",E)}}},[Ht]);const nu=async()=>{try{const[E,K,he,Me]=await Promise.all([Ot.getUsersByRole("team_manager").catch(me=>(console.error("Failed to load team_manager users:",me),[])),Ot.getUsersByRole("department_director").catch(me=>(console.error("Failed to load department_director users:",me),[])),Ot.getUsersByRole("management").catch(me=>(console.error("Failed to load management users:",me),[])),Ot.getUsersByRole("top_management").catch(me=>(console.error("Failed to load top_management users:",me),[]))]);tp(E),el(K)}catch(E){console.error("Failed to load users by role:",E)}},nr=async E=>{try{const K=await Ot.getFindingActions(E),he=new Date().toISOString().split("T")[0];if(!he){Xt(me=>({...me,[E]:K}));return}const Me=await Promise.all(K.map(async me=>{var Xe;const Ke=(Xe=me.status)==null?void 0:Xe.toLowerCase().trim();if(Ke==="open"&&me.due_date){const tt=new Date(me.due_date).toISOString().split("T")[0];if(!tt)return me;if(tt<he)try{return await Ot.updateFindingAction(me.id,{action_description:me.action_description,due_date:me.due_date,audit_lead:me.audit_lead,action_responsible:me.action_responsible,action_responsible_email:me.action_responsible_email,action_responsible_vp:me.action_responsible_vp,action_responsible_clevel:me.action_responsible_clevel,status:"overdue"}),{...me,status:"overdue"}}catch(Qe){return console.error("Failed to update overdue status for action:",me.id,Qe),me}}else if(Ke==="overdue"&&me.due_date){const tt=new Date(me.due_date).toISOString().split("T")[0];if(!tt)return me;if(tt>=he)try{return await Ot.updateFindingAction(me.id,{action_description:me.action_description,due_date:me.due_date,audit_lead:me.audit_lead,action_responsible:me.action_responsible,action_responsible_email:me.action_responsible_email,action_responsible_vp:me.action_responsible_vp,action_responsible_clevel:me.action_responsible_clevel,status:"open"}),{...me,status:"open"}}catch(Qe){return console.error("Failed to update open status for action:",me.id,Qe),me}}return me}));Xt(me=>({...me,[E]:Me})),await si(E,Me)}catch(K){console.error("Failed to load finding actions:",K)}},Ja=async E=>{try{const K=E.map(me=>Ot.getFindingActions(me).then(Ke=>({findingId:me,actions:Ke}))),he=await Promise.all(K),Me={};he.forEach(({findingId:me,actions:Ke})=>{Me[me]=Ke}),Xt(me=>({...me,...Me}))}catch(K){console.error("Failed to load finding actions:",K)}},Zi=async E=>{try{Ji(!0),console.log(" loadAllActions called");let K=E;if((!K||K.length===0)&&(K=(await Ot.getAuditFindings({})).map(Me=>Me.id)),K.length>0){const he=K.map(tt=>Ot.getFindingActions(tt)),Me=await Promise.all(he),me=[];Me.forEach(tt=>{me.push(...tt||[])}),console.log(` Total actions loaded: ${me.length}`);const Ke=new Map;me.forEach(tt=>{tt.id&&(Ke.has(tt.id)?console.warn(` Duplicate action found: ${tt.id} (${tt.action_id})`):Ke.set(tt.id,tt))});const Xe=Array.from(Ke.values());console.log(` Unique actions: ${Xe.length}`),fs(Xe)}}catch(K){console.error("Failed to load all actions:",K),_e({type:"error",message:"Failed to load actions"})}finally{Ji(!1)}},Bs=(E,K)=>{if(!E||E.length===0)return!1;const he=K.toLowerCase().trim();return E.every(Me=>{var Ke;return((Ke=Me.status)==null?void 0:Ke.toLowerCase().trim())===he})},Za=async(E,K)=>{if(!Ct[E]||Ct[E].length===0)try{await nr(E)}catch(me){console.error("Failed to load actions for status check:",me)}const he=Ct[E]||[];if(he.length===0)return{canSet:!0};const Me=K.toLowerCase().trim();if(Me==="completed"&&!Bs(he,"Completed")){const Ke=he.filter(Qe=>{var nt;return((nt=Qe.status)==null?void 0:nt.toLowerCase().trim())!=="completed"}).map(Qe=>Qe.action_id||`Action #${Qe.id}`);return{canSet:!1,reason:`Cannot set finding status to Completed. ${Ke.length} of ${he.length} action(s) are not completed.

Incomplete actions:`,incompleteActions:Ke,actionLabel:"Incomplete actions:"}}if(Me==="closed"&&!Bs(he,"Closed")){const Ke=he.filter(Qe=>{var nt;return((nt=Qe.status)==null?void 0:nt.toLowerCase().trim())!=="closed"}).map(Qe=>Qe.action_id||`Action #${Qe.id}`);return{canSet:!1,reason:`Cannot set finding status to Closed. ${Ke.length} of ${he.length} action(s) are not closed.

Not closed actions:`,incompleteActions:Ke,actionLabel:"Not closed actions:"}}if(Me==="risk accepted"&&!Bs(he,"Risk Accepted")){const Ke=he.filter(Qe=>{var nt;return((nt=Qe.status)==null?void 0:nt.toLowerCase().trim())!=="risk accepted"}).map(Qe=>Qe.action_id||`Action #${Qe.id}`);return{canSet:!1,reason:`Cannot set finding status to Risk Accepted. ${Ke.length} of ${he.length} action(s) are not risk accepted.

Not risk accepted actions:`,incompleteActions:Ke,actionLabel:"Not risk accepted actions:"}}return{canSet:!0}},si=async(E,K)=>{var he;try{const Me=K||Ct[E]||[];if(Me.length===0)return;const me=t.find(mt=>mt.id===E);if(!me)return;let Ke;const Xe=mt=>mt?mt.toLowerCase().trim():"",tt=Me.filter(mt=>{const Zt=Xe(mt.status);return Zt==="open"||Zt==="overdue"||Zt==="completed"});tt.length===0?Me.some(Zt=>Xe(Zt.status)==="risk accepted")?Ke="Risk Accepted":Bs(Me,"Closed")?Ke="Closed":Ke="Open":tt.every(Zt=>Xe(Zt.status)==="completed")?Ke="Completed":Ke="Open";const Qe=(he=me.status)==null?void 0:he.toLowerCase().trim(),nt=Ke==null?void 0:Ke.toLowerCase().trim();Qe!==nt&&(await Ot.updateAuditFinding(E,{finding_name:me.finding_name,finding_description:me.finding_description,audit_type:me.audit_type,audit_type_other:me.audit_type_other,risk_type:me.risk_type,internal_control_element:me.internal_control_element,country:me.country,audit_year:me.audit_year,audit_name:me.audit_name,audit_key:me.audit_key,risk_level:me.risk_level,financial_impact:me.financial_impact,status:Ke}),e(mt=>mt.map(Zt=>Zt.id===E?{...Zt,status:Ke}:Zt)),C&&C.id===E&&O(mt=>mt?{...mt,status:Ke}:null))}catch(Me){console.error("Failed to auto-update finding status:",Me)}},ru=async()=>{try{const E=new Date().toISOString().split("T")[0];if(!E)return;const K=[];Object.keys(Ct).forEach(he=>{const Me=Ct[Number(he)];Me&&Me.forEach(me=>{var Xe;const Ke=(Xe=me.status)==null?void 0:Xe.toLowerCase().trim();if(Ke==="open"&&me.due_date){const tt=new Date(me.due_date).toISOString().split("T")[0];if(!tt||!E)return;tt<E&&K.push(Ot.updateFindingAction(me.id,{action_description:me.action_description,due_date:me.due_date,audit_lead:me.audit_lead,action_responsible:me.action_responsible,action_responsible_email:me.action_responsible_email,action_responsible_vp:me.action_responsible_vp,action_responsible_clevel:me.action_responsible_clevel,status:"overdue"}).then(()=>{Xt(Qe=>{const nt=Qe[Number(he)];return nt?{...Qe,[Number(he)]:nt.map(mt=>mt.id===me.id?{...mt,status:"overdue"}:mt)}:Qe}),fs(Qe=>Qe.map(nt=>nt.id===me.id?{...nt,status:"overdue"}:nt)),si(Number(he))}))}else if(Ke==="overdue"&&me.due_date){const tt=new Date(me.due_date).toISOString().split("T")[0];if(!tt||!E)return;tt>=E&&K.push(Ot.updateFindingAction(me.id,{action_description:me.action_description,due_date:me.due_date,audit_lead:me.audit_lead,action_responsible:me.action_responsible,action_responsible_email:me.action_responsible_email,action_responsible_vp:me.action_responsible_vp,action_responsible_clevel:me.action_responsible_clevel,status:"open"}).then(()=>{Xt(Qe=>{const nt=Qe[Number(he)];return nt?{...Qe,[Number(he)]:nt.map(mt=>mt.id===me.id?{...mt,status:"open"}:mt)}:Qe}),fs(Qe=>Qe.map(nt=>nt.id===me.id?{...nt,status:"open"}:nt)),si(Number(he))}))}})}),await Promise.all(K)}catch(E){console.error("Failed to check and update overdue actions:",E)}};L.useEffect(()=>{ii()},[o,u,h]),L.useEffect(()=>{ru();const E=setInterval(()=>{ru()},6e4);return()=>clearInterval(E)},[Ct]);const eo=async()=>{try{s(!0),await Promise.all([xc(),ii()])}catch{_e({type:"error",message:"Failed to load data"})}finally{s(!1)}},{data:hs=[]}=My();L.useEffect(()=>{if(hs&&hs.length>0){const E=Array.from(new Set(hs.map(K=>String(K.audit_year)))).sort((K,he)=>he.localeCompare(K));J(E)}},[hs]),L.useEffect(()=>{if(hs&&hs.length>0){const E=hs.map(K=>({key:`AUDIT-${K.id}`,summary:K.audit_name||K.audit_type||"Unnamed Audit",auditYear:String(K.audit_year),auditLead:K.audit_lead_name||K.audit_lead_email||"",status:K.status||"Planned"}));ht(E),console.log(` Loaded ${E.length} audit plans from Annual Audit Plan`)}else ht([])},[hs]);const xc=async()=>{try{const[E,K,he,Me,me,Ke]=await Promise.all([Ot.getDropdownOptions("audit_type"),Ot.getDropdownOptions("risk_type"),Ot.getDropdownOptions("internal_control_element"),Ot.getDropdownOptions("country"),Ot.getDropdownOptions("risk_level"),Ot.getDropdownOptions("status")]);Oe(E),ge(K),Ae(he),re(Me),Ce(me);const Xe=Array.from(new Set(Ke.map(tt=>tt.toLowerCase().trim()))).map(tt=>Ke.find(nt=>nt.toLowerCase().trim()===tt)||tt);console.log(" Status options loaded:",Xe.length,Xe),Fe(Xe)}catch(E){console.error("Failed to load dropdown options:",E)}},ii=async()=>{try{const E=await Ot.getAuditFindings({});if(e(E),E.length>0){const K=E.map(he=>he.id);await Ja(K),await Zi(K)}}catch{_e({type:"error",message:"Failed to load audit findings"})}},Vr=async E=>{var he,Me;document.querySelectorAll(".ql-tooltip").forEach(me=>{const Ke=me;Ke.style.display="none",Ke.classList.remove("ql-editing")}),O(E),S(null),B(!1),St({finding_name:E.finding_name||"",finding_description:E.finding_description||"",audit_type:E.audit_type||"",audit_type_other:E.audit_type_other||"",risk_type:E.risk_type||"",internal_control_element:E.internal_control_element||"",country:E.country||"",audit_year:E.audit_year||"",audit_name:E.audit_name||"",audit_key:E.audit_key||"",risk_level:E.risk_level||"",financial_impact:((he=E.financial_impact)==null?void 0:he.toString())||"",status:E.status||"open",selectedAuditKey:E.audit_key||"",selectedAuditYear:E.audit_year||""}),Sr(((Me=E.attachments)==null?void 0:Me.map(me=>({file_name:me.file_name,file_size:me.file_size,file_type:me.file_type,file_path:me.file_path})))||[]),await nr(E.id),k(!0)},Ni=()=>{document.querySelectorAll(".ql-tooltip").forEach(K=>{const he=K;he.style.display="none",he.classList.remove("ql-editing")}),k(!1),O(null),S(null),B(!1),z(!1),St({finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",audit_year:"",audit_name:"",audit_key:"",risk_level:"",financial_impact:"",status:"open",selectedAuditKey:"",selectedAuditYear:""}),Sr([]),Sn({})},tl=E=>{St(K=>({...K,selectedAuditYear:E,selectedAuditKey:"",audit_name:"",audit_key:"",audit_year:""}))},su=E=>{const K=Ue.find(he=>he.key===E);K&&(St(he=>({...he,selectedAuditKey:E,audit_name:K.summary,audit_key:K.key,audit_year:K.auditYear})),rt({selectedAuditYear:K.auditYear,selectedAuditKey:K.key,selectedAuditName:K.summary}))},nl=Te.selectedAuditYear?Ue.filter(E=>E.auditYear===Te.selectedAuditYear):[],rl=E=>{const K=E.target.files;if(K){const he=Array.from(K).map(Me=>({file_name:Me.name,file_size:Me.size,file_type:Me.type,file_path:void 0}));Sr(Me=>[...Me,...he])}},iu=E=>{Sr(K=>K.filter((he,Me)=>Me!==E))},Fr=()=>{var he,Me,me,Ke;const E={};return(he=Te.finding_name)!=null&&he.trim()||(E.finding_name="Finding name is required"),(Me=Te.finding_description)!=null&&Me.trim()||(E.finding_description="Finding description is required"),Te.selectedAuditYear||(E.selectedAuditYear="Audit year selection is required"),(me=Te.audit_name)!=null&&me.trim()||(E.audit_name="Audit selection is required"),Te.audit_type||(E.audit_type="Audit type is required"),Te.audit_type==="Other"&&!((Ke=Te.audit_type_other)!=null&&Ke.trim())&&(E.audit_type_other="Please specify the audit type"),Te.risk_type||(E.risk_type="Risk type is required"),Te.internal_control_element||(E.internal_control_element="Internal control element is required"),Te.country||(E.country="Country is required"),Te.risk_level||(E.risk_level="Risk level is required"),Sn(E),{isValid:Object.keys(E).length===0,errors:E}},ea=L.useMemo(()=>!Dt||!M?!1:Te.finding_name!==Dt.finding_name||Te.finding_description!==Dt.finding_description||Te.audit_type!==Dt.audit_type||Te.audit_type_other!==Dt.audit_type_other||Te.risk_type!==Dt.risk_type||Te.internal_control_element!==Dt.internal_control_element||Te.country!==Dt.country||Te.audit_year!==Dt.audit_year||Te.audit_name!==Dt.audit_name||Te.audit_key!==Dt.audit_key||Te.risk_level!==Dt.risk_level||Te.financial_impact!==Dt.financial_impact||Te.status!==Dt.status,[Te,Dt,M]),sl=async(E,K=!1)=>{var Ke,Xe,tt;console.log("handleSubmit called",{keepModalOpen:K,formData:Te,editingFinding:j,viewingFinding:C}),E&&E.preventDefault();const he=Fr(),{isValid:Me,errors:me}=he;if(console.log("Validation result:",Me,"Validation errors:",me),!Me){console.log("Form validation failed, errors:",me);const Qe=Object.values(me).filter(Boolean);_e({type:"error",message:Qe.length>0?`Please fix the following errors: ${Qe.join(", ")}`:"Please fill in all required fields"});return}console.log("Validation passed, proceeding with submit...");try{const Qe={finding_name:Te.finding_name,finding_description:Te.finding_description||void 0,audit_type:Te.audit_type||void 0,audit_type_other:Te.audit_type==="Other"?Te.audit_type_other:void 0,risk_type:Te.risk_type||void 0,internal_control_element:Te.internal_control_element||void 0,country:Te.country||void 0,audit_year:Te.audit_year||void 0,audit_name:Te.audit_name,audit_key:Te.audit_key||void 0,risk_level:Te.risk_level||void 0,financial_impact:Te.financial_impact?parseFloat(Te.financial_impact):void 0,status:Te.status,attachments:yn.length>0?yn:void 0};if(j){await Ot.updateAuditFinding(j.id,Qe);const nt=await Ot.getAuditFinding(j.id);St({finding_name:nt.finding_name||"",finding_description:nt.finding_description||"",audit_type:nt.audit_type||"",audit_type_other:nt.audit_type_other||"",risk_type:nt.risk_type||"",internal_control_element:nt.internal_control_element||"",country:nt.country||"",audit_year:nt.audit_year||"",audit_name:nt.audit_name||"",audit_key:nt.audit_key||"",risk_level:nt.risk_level||"",financial_impact:nt.financial_impact?String(nt.financial_impact):"",status:nt.status||"open",selectedAuditKey:nt.audit_key||"",selectedAuditYear:nt.audit_year||""}),O(null),S(null),B(!1),yr(null),k(!1),_e({type:"success",message:"Audit finding updated successfully"})}else await Ot.createAuditFinding(Qe),_e({type:"success",message:"Audit finding created successfully"}),K?(St(nt=>({...nt,finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",risk_level:"",financial_impact:"",status:"open"})),Sr([]),Sn({})):Ni();ii()}catch(Qe){console.error(" Error saving audit finding:",Qe);const nt=((Xe=(Ke=Qe==null?void 0:Qe.response)==null?void 0:Ke.data)==null?void 0:Xe.error)||(Qe==null?void 0:Qe.message)||((Qe==null?void 0:Qe.code)==="ERR_NETWORK"||(tt=Qe==null?void 0:Qe.message)!=null&&tt.includes("Network Error")?"Network error: Server may be offline. Please check your connection and try again.":"Failed to save audit finding");_e({type:"error",message:nt})}},to=async()=>{var E,K;if(P)try{await Ot.deleteAuditFinding(P),_e({type:"success",message:"Audit finding deleted successfully"}),R(!1),q(null),ii()}catch(he){_e({type:"error",message:((K=(E=he==null?void 0:he.response)==null?void 0:E.data)==null?void 0:K.error)||"Failed to delete audit finding"})}},il=t.filter(E=>{var tt,Qe;if(Ve==="actions")return!1;const K=i.toLowerCase(),he=(E.finding_id?String(E.finding_id).toLowerCase().includes(K):!1)||E.finding_name.toLowerCase().includes(K)||(E.finding_description?E.finding_description.toLowerCase().includes(K):!1)||E.audit_name.toLowerCase().includes(K)||(E.financial_impact?String(E.financial_impact).toLowerCase().includes(K):!1),Me=o==="all"||((tt=E.status)==null?void 0:tt.toLowerCase())===o.toLowerCase(),me=u==="all"||((Qe=E.risk_level)==null?void 0:Qe.toLowerCase())===u.toLowerCase(),Ke=h==="all"||E.audit_year===h,Xe=m==="all"||E.audit_name===m;return he&&Me&&me&&Ke&&Xe}),ta=L.useMemo(()=>{const E=new Map;return Ar.forEach(K=>{K.id&&!E.has(K.id)&&E.set(K.id,K)}),Array.from(E.values())},[Ar]).filter(E=>{var Xe,tt;if(Ve==="findings")return!1;const K=E.action_description.toLowerCase().includes(i.toLowerCase())||E.action_id.toLowerCase().includes(i.toLowerCase()),he=o==="all"||((Xe=E.status)==null?void 0:Xe.toLowerCase())===o.toLowerCase(),Me=h==="all"||E.audit_year===h,me=m==="all"||E.audit_name===m,Ke=y==="all"||((tt=E.action_responsible)==null?void 0:tt.toLowerCase().trim())===y.toLowerCase().trim();return K&&he&&Me&&me&&Ke}),no=E=>{Jo(K=>{const he=new Set(K);return he.has(E)?he.delete(E):(he.add(E),Ct[E]||nr(E)),he})},ai=E=>{switch(E.toLowerCase()){case"completed":return"success";case"risk accepted":return"warning";case"overdue":return"danger";case"closed":return"dark";default:return"info"}},al=E=>{switch(E==null?void 0:E.toLowerCase()){case"critical":return"dark";case"high":return"danger";case"medium":return"orange";case"low":return"warning";default:return"default"}},qs=E=>{switch(E.toLowerCase()){case"completed":return"success";case"risk accepted":return"warning";case"overdue":return"danger";case"closed":return"dark";default:return"info"}},ro=async(E,K)=>{try{Cr(E),rn(K),Jt(null),Ft(!1),sn(!1);let he=K.due_date||"";if(he&&typeof he=="string"){const Me=new Date(he);if(!isNaN(Me.getTime())){const me=Me.toISOString().split("T")[0];me&&(he=me)}}console.log("handleViewAction - action.due_date:",K.due_date,"formatted:",he),pn({action_description:K.action_description||"",due_date:he,audit_lead:K.audit_lead||"",action_responsible:K.action_responsible||"",action_responsible_email:K.action_responsible_email||"",action_responsible_vp:K.action_responsible_vp||"",action_responsible_clevel:K.action_responsible_clevel||"",status:K.status||"open"}),vn(!0);try{const Me=await Ot.getFindingAction(K.id);let me=Me.due_date||"";if(me&&typeof me=="string"){const Ke=new Date(me);if(!isNaN(Ke.getTime())){const Xe=Ke.toISOString().split("T")[0];Xe&&(me=Xe)}}console.log("handleViewAction - updatedAction.due_date:",Me.due_date,"formatted:",me),pn({action_description:Me.action_description||"",due_date:me,audit_lead:Me.audit_lead||"",action_responsible:Me.action_responsible||"",action_responsible_email:Me.action_responsible_email||"",action_responsible_vp:Me.action_responsible_vp||"",action_responsible_clevel:Me.action_responsible_clevel||"",status:Me.status||"open"}),rn(Me)}catch(Me){console.error("Failed to reload action:",Me)}}catch(he){console.error("Error in handleViewAction:",he),_e({type:"error",message:"Failed to open action view"})}},na=(E,K)=>{Cr(E),rn(null),Jt(null),Ft(!1),sn(!0),pn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:"open"}),ws({}),vn(!0)},_i=()=>{vn(!1),Jt(null),rn(null),sn(!1),Cr(null),fe(!1),pn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:"open"}),ws({})},np=()=>{const E={};return gt.action_description.trim()||(E.action_description="Action description is required"),gt.due_date||(E.due_date="Due date is required"),gt.audit_lead||(E.audit_lead="Audit lead is required"),gt.action_responsible||(E.action_responsible="Action responsible is required"),ws(E),Object.keys(E).length===0},rp=async E=>{var K,he,Me;if(E.preventDefault(),!(!np()||!Mt))try{if(At){const me=new Date().toISOString().split("T")[0];let Ke=gt.status||(At==null?void 0:At.status)||"open";const Xe=(K=At.status)==null?void 0:K.toLowerCase().trim();(Xe==="open"||Xe==="overdue")&&(Ke==="open"&&gt.due_date&&gt.due_date<me?Ke="overdue":(Xe==="overdue"&&gt.due_date&&gt.due_date>=me||Ke==="overdue"&&gt.due_date&&gt.due_date>=me)&&(Ke="open")),await Ot.updateFindingAction(At.id,{action_description:gt.action_description,due_date:gt.due_date,audit_lead:gt.audit_lead,action_responsible:gt.action_responsible,action_responsible_email:gt.action_responsible_email,action_responsible_vp:gt.action_responsible_vp,action_responsible_clevel:gt.action_responsible_clevel,status:Ke});const tt={...At,action_description:gt.action_description,due_date:gt.due_date,audit_lead:gt.audit_lead,action_responsible:gt.action_responsible,action_responsible_email:gt.action_responsible_email,action_responsible_vp:gt.action_responsible_vp,action_responsible_clevel:gt.action_responsible_clevel,status:Ke};Mt&&(Xt(mt=>({...mt,[Mt]:(mt[Mt]||[]).map(Zt=>Zt.id===At.id?tt:Zt)})),fs(mt=>mt.map(Zt=>Zt.id===At.id?tt:Zt)),await si(Mt)),Mt&&await nr(Mt);const Qe=await Ot.getFindingAction(At.id);let nt=Qe.due_date||"";if(nt&&typeof nt=="string"){const mt=new Date(nt);if(!isNaN(mt.getTime())){const Zt=mt.toISOString().split("T")[0];Zt&&(nt=Zt)}}pn({action_description:Qe.action_description||"",due_date:nt,audit_lead:Qe.audit_lead||"",action_responsible:Qe.action_responsible||"",action_responsible_email:Qe.action_responsible_email||"",action_responsible_vp:Qe.action_responsible_vp||"",action_responsible_clevel:Qe.action_responsible_clevel||"",status:Qe.status||"open"}),vn(!0),rn(Qe),Jt(null),Ft(!1),_e({type:"success",message:"Finding action updated successfully"})}else{const me=await Ot.createFindingAction({finding_id:Mt,...gt});Mt&&me.data&&(Xt(Ke=>({...Ke,[Mt]:[...Ke[Mt]||[],me.data]})),await si(Mt)),_e({type:"success",message:"Finding action created successfully"})}At||(sn(!1),pn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:"open"}),ws({}))}catch(me){_e({type:"error",message:((Me=(he=me==null?void 0:me.response)==null?void 0:he.data)==null?void 0:Me.error)||"Failed to save finding action"})}},sp=async()=>{var E,K;if(!(!ne||!ee))try{await Ot.deleteFindingAction(ne),_e({type:"success",message:"Finding action deleted successfully"}),G(!1),X(null),Y(null),await nr(ee),Qt&&_i(),await si(ee)}catch(he){_e({type:"error",message:((K=(E=he==null?void 0:he.response)==null?void 0:E.data)==null?void 0:K.error)||"Failed to delete finding action"})}},ip=E=>{if(!E)return"";const K=document.createElement("div");return K.innerHTML=E,K.textContent||K.innerText||""},so=(E,K=2)=>{if(!E)return r.jsx("span",{children:"-"});const he=/<[ou]l>|<li>/i.test(E),Me=/<a[^>]*>/i.test(E);if(he||Me){let Ke=E.replace(/<p>/gi,"").replace(/<\/p>/gi,"");Ke=Ke.replace(/<a([^>]*)>/gi,(Qe,nt)=>{const mt=nt.match(/href=["']([^"']+)["']/i),Zt=mt?mt[1]:"";return`<a${nt} target="_blank" rel="noopener noreferrer" title="${Zt}" data-href="${Zt}" class="list-hyperlink" style="color: #2563eb; text-decoration: underline; cursor: pointer; position: relative;">`});const Xe=K===1?"line-clamp-1":"line-clamp-2",tt=`html-content-${Math.random().toString(36).substr(2,9)}`;return r.jsxs(r.Fragment,{children:[r.jsx("div",{id:tt,className:`${Xe} prose prose-sm max-w-none html-content-list`,style:{fontSize:"0.875rem",lineHeight:"1.25rem"},dangerouslySetInnerHTML:{__html:Ke},onClick:Qe=>{const nt=Qe.target;if(nt.tagName==="A"){const mt=nt.getAttribute("href");mt&&(Qe.preventDefault(),window.open(mt,"_blank","noopener,noreferrer"))}}}),r.jsx(lz,{containerId:tt}),r.jsx("style",{children:`
            .html-content-list ul,
            .html-content-list ol {
              margin: 0.25rem 0 !important;
              padding-left: 1.5rem !important;
              list-style-position: outside !important;
            }
            .html-content-list ul {
              list-style-type: disc !important;
            }
            .html-content-list ol {
              list-style-type: decimal !important;
            }
            .html-content-list li {
              margin: 0.125rem 0 !important;
              padding-left: 0.25rem !important;
            }
            .html-content-list ul li {
              list-style-type: disc !important;
            }
            .html-content-list ol li {
              list-style-type: decimal !important;
            }
            .html-content-list a {
              color: #2563eb !important;
              text-decoration: underline !important;
              cursor: pointer !important;
            }
            .html-content-list a:hover {
              color: #1d4ed8 !important;
            }
          `})]})}const me=K===1?"line-clamp-1":"line-clamp-2";return r.jsx("span",{className:me,children:ip(E)||"-"})},$t=E=>E?E.split(" ").map(K=>K.includes("&")?K.split("&").map(he=>he.charAt(0).toUpperCase()+he.slice(1).toLowerCase()).join("&"):K.charAt(0).toUpperCase()+K.slice(1).toLowerCase()).join(" "):"",gc=E=>{if(!E&&E!==0)return"";const K=typeof E=="string"?parseFloat(E):E;return isNaN(K)?"":K.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})};return n?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx(Nt,{size:"lg"})}):r.jsxs("div",{className:"space-y-2 md:space-y-6 p-0 md:p-6",children:[r.jsxs("div",{className:"flex items-start md:items-center justify-between gap-2 px-3 md:px-0",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"text-base md:text-[24px] font-bold text-gray-900",children:"Audit Finding"}),r.jsx("p",{className:"text-[11px] md:text-base text-gray-600 mt-0.5 md:mt-1",children:"Manage audit findings and their related actions"})]}),Ve==="findings"&&r.jsxs("div",{className:"relative flex-shrink-0",ref:ti,children:[r.jsxs(Be,{variant:"primary",onClick:()=>bi(!on),className:F("flex items-center justify-center gap-0.5 md:gap-1",v?"!text-[8px] px-1.5 py-1 h-6":"text-base px-4 h-auto"),children:[r.jsx("svg",{className:F(v?"w-2.5 h-2.5":"w-5 h-5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r.jsx("span",{className:F("hidden md:inline",v&&"!text-[8px]"),children:"Add Finding"}),r.jsx("span",{className:F("md:hidden",v&&"!text-[8px]"),children:"Add"}),r.jsx("svg",{className:F("transition-transform",v?"w-2 h-2":"w-4 h-4",on?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),on&&r.jsxs("div",{className:F("absolute right-0 bg-white rounded-md md:rounded-lg shadow-xl border border-gray-200 z-50",v?"mt-0.5 w-[200px] py-0.5":"mt-2 w-72 py-2"),children:[r.jsxs("button",{onClick:()=>{An("single"),In(!0),bi(!1)},className:F("w-full text-left hover:bg-gray-50 transition-colors flex items-center group",v?"px-2 py-1 gap-1.5":"px-4 py-3 gap-3"),children:[r.jsx("div",{className:F("flex-shrink-0 rounded-md md:rounded-lg bg-purple-100 group-hover:bg-purple-200 flex items-center justify-center transition-colors",v?"w-5 h-5":"w-10 h-10"),children:r.jsx("svg",{className:F("text-purple-600",v?"w-2.5 h-2.5":"w-5 h-5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:F("font-medium text-gray-900",v?"text-[9px]":"text-sm"),children:"Add from Dashboard"}),r.jsx("div",{className:F("text-gray-500",v?"text-[8px] mt-0":"text-xs mt-0.5"),children:"Add findings using the form"})]})]}),r.jsx("div",{className:F("border-t border-gray-100",v?"my-0.5":"my-1")}),r.jsxs("button",{onClick:()=>{An("bulk"),In(!0),bi(!1)},className:F("w-full text-left hover:bg-gray-50 transition-colors flex items-center group",v?"px-2 py-1 gap-1.5":"px-4 py-3 gap-3"),children:[r.jsx("div",{className:F("flex-shrink-0 rounded-md md:rounded-lg bg-blue-100 group-hover:bg-blue-200 flex items-center justify-center transition-colors",v?"w-5 h-5":"w-10 h-10"),children:r.jsx("svg",{className:F("text-blue-600",v?"w-2.5 h-2.5":"w-5 h-5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:F("font-medium text-gray-900",v?"text-[9px]":"text-sm"),children:"Bulk Add from Excel/CSV"}),r.jsx("div",{className:F("text-gray-500",v?"text-[8px] mt-0":"text-xs mt-0.5"),children:"Import findings from file"})]})]})]})]})]}),r.jsxs(Ie,{className:"overflow-hidden",children:[r.jsx("div",{className:"p-2 md:p-4 pb-2 md:pb-3 border-b border-gray-200 px-3 md:px-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-[6.4px] md:gap-[12.8px]",children:[r.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-md p-0.5 inline-flex w-fit",children:[r.jsx("button",{onClick:()=>ot("findings"),className:`px-2 md:px-3 py-0.5 md:py-1 rounded text-[10px] md:text-xs font-medium transition-colors ${Ve==="findings"?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Findings"}),r.jsx("button",{onClick:()=>ot("actions"),className:`px-2 md:px-3 py-0.5 md:py-1 rounded text-[10px] md:text-xs font-medium transition-colors ${Ve==="actions"?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Actions"})]}),r.jsxs("div",{className:"block md:hidden space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"flex-1",children:r.jsx(hh,{onSearch:E=>a(E),placeholder:"Search...",className:"h-[32px] text-[11px] [&>input]:h-[32px] [&>input]:text-[11px] [&>input]:py-1 [&_svg]:w-3 [&_svg]:h-3"})}),r.jsxs("button",{onClick:()=>Ga(!vs),className:`relative flex items-center gap-1 px-2 h-[32px] rounded-md font-medium text-[11px] transition-all ${vs?"bg-purple-600 text-white shadow-md":"bg-white text-gray-700 border border-gray-300 hover:border-purple-400"}`,children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),r.jsx("span",{className:"text-[10px] font-bold",children:"Filters"}),(()=>{const E=[o!=="all",u!=="all",m!=="all",h!=="all",Ve==="actions"&&y!=="all"].filter(Boolean).length;return E>0?r.jsx("span",{className:`absolute -top-0.5 -right-0.5 w-3.5 h-3.5 rounded-full text-[8px] font-bold flex items-center justify-center ${vs?"bg-white text-purple-600":"bg-purple-600 text-white"}`,children:E}):null})()]})]}),(()=>{const E=[{key:"status",value:o,label:"Status",display:$t(o),setter:c},{key:"risk",value:u,label:"Risk",display:$t(u),setter:f,show:Ve==="findings"},{key:"audit",value:m,label:"Audit",display:m,setter:g},{key:"year",value:h,label:"Year",display:h,setter:p},{key:"responsible",value:y,label:"Responsible",display:(()=>{const K=ji.find(he=>{var Me;return((Me=he.email)==null?void 0:Me.toLowerCase().trim())===y.toLowerCase().trim()});return K?K.name:y})(),setter:b,show:Ve==="actions"}].filter(K=>K.value!=="all"&&K.show!==!1);return E.length>0?r.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto pb-0.5 scrollbar-hide",children:[E.map(K=>r.jsxs("div",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-purple-100 text-purple-700 rounded-full text-[9px] font-medium whitespace-nowrap",children:[r.jsxs("span",{className:"font-semibold",children:[K.label,":"]}),r.jsx("span",{className:"max-w-[80px] truncate",children:K.display}),r.jsx("button",{onClick:()=>K.setter("all"),className:"hover:bg-purple-200 rounded-full p-0.5 transition-colors",children:r.jsx("svg",{className:"w-2 h-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]},K.key)),E.length>0&&r.jsxs("button",{onClick:()=>{c("all"),f("all"),g("all"),p("all"),b("all")},className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 text-gray-600 hover:bg-gray-200 rounded-full text-[9px] font-medium whitespace-nowrap transition-colors",children:[r.jsx("svg",{className:"w-2 h-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})]}):null})(),r.jsx("div",{className:"overflow-hidden transition-all duration-300 ease-in-out -mx-3 md:mx-0 w-[calc(100%+1.5rem)] md:w-auto",style:{maxHeight:vs?"400px":"0px",opacity:vs?1:0},children:r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-none md:rounded p-2 space-y-1.5 border-x-0 md:border-x border-t-0 md:border-t border-b border-purple-200",children:[r.jsxs("div",{className:"flex md:flex-col gap-1 md:gap-0 md:space-y-1.5",children:[r.jsxs("div",{className:"flex-1 md:flex-none",children:[r.jsxs("label",{className:F("flex items-center gap-0.5 text-gray-700 mb-0.5",v?"text-[7px] font-medium":"text-[9px] font-semibold"),children:[r.jsx("svg",{className:F("text-indigo-600 flex-shrink-0",v?"w-2 h-2":"w-2.5 h-2.5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{children:"Audit"})]}),r.jsx(Gt,{value:m,onChange:E=>g(E.target.value),options:[{value:"all",label:"All Audits"},...Array.from(new Set(Ve==="actions"?Ar.map(E=>E.audit_name).filter(E=>E):t.map(E=>E.audit_name).filter(E=>E))).sort().map(E=>({value:E,label:E}))],placeholder:"Audit",fullWidth:!0,className:F(v?"h-[28px] text-[10px] [&>select]:!text-[10px] [&>select]:!py-0 [&>select]:!px-1.5 [&>select]:!leading-[28px] [&>select]:!h-[28px]":"h-[32px] text-[11px] [&>select]:text-[11px] [&>select]:py-1")})]}),r.jsxs("div",{className:"flex-1 md:flex-none",children:[r.jsxs("label",{className:F("flex items-center gap-0.5 text-gray-700 mb-0.5",v?"text-[7px] font-medium":"text-[9px] font-semibold"),children:[r.jsx("svg",{className:F("text-green-600 flex-shrink-0",v?"w-2 h-2":"w-2.5 h-2.5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("span",{children:"Year"})]}),r.jsx(Gt,{value:h,onChange:E=>p(E.target.value),options:[{value:"all",label:"All Years"},...te.map(E=>({value:E,label:E}))],placeholder:"Year",fullWidth:!0,className:F(v?"h-[28px] text-[10px] [&>select]:!text-[10px] [&>select]:!py-0 [&>select]:!px-1.5 [&>select]:!leading-[28px] [&>select]:!h-[28px]":"h-[32px] text-[11px] [&>select]:text-[11px] [&>select]:py-1")})]}),r.jsxs("div",{className:"flex-1 md:flex-none",children:[r.jsxs("label",{className:F("flex items-center gap-0.5 text-gray-700 mb-0.5",v?"text-[7px] font-medium":"text-[9px] font-semibold"),children:[r.jsx("svg",{className:F("text-purple-600 flex-shrink-0",v?"w-2 h-2":"w-2.5 h-2.5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{children:"Status"})]}),r.jsx(Gt,{value:o,onChange:E=>c(E.target.value),options:[{value:"all",label:"All Statuses"},...ze.map(E=>({value:E,label:$t(E)}))],placeholder:"Status",fullWidth:!0,className:F(v?"h-[28px] text-[10px] [&>select]:!text-[10px] [&>select]:!py-0 [&>select]:!px-1.5 [&>select]:!leading-[28px] [&>select]:!h-[28px]":"h-[32px] text-[11px] [&>select]:text-[11px] [&>select]:py-1")})]}),Ve==="findings"&&r.jsxs("div",{className:"flex-1 md:flex-none",children:[r.jsxs("label",{className:F("flex items-center gap-0.5 text-gray-700 mb-0.5",v?"text-[7px] font-medium":"text-[9px] font-semibold"),children:[r.jsx("svg",{className:F("text-red-600 flex-shrink-0",v?"w-2 h-2":"w-2.5 h-2.5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsx("span",{children:"Risk"})]}),r.jsx(Gt,{value:u,onChange:E=>f(E.target.value),options:[{value:"all",label:"All Risk Levels"},...ue.map(E=>({value:E,label:$t(E)}))],placeholder:"Risk",fullWidth:!0,className:F(v?"h-[28px] text-[10px] [&>select]:!text-[10px] [&>select]:!py-0 [&>select]:!px-1.5 [&>select]:!leading-[28px] [&>select]:!h-[28px]":"h-[32px] text-[11px] [&>select]:text-[11px] [&>select]:py-1")})]})]}),Ve==="actions"&&r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-1 text-[9px] font-semibold text-gray-700 mb-0.5",children:[r.jsx("svg",{className:"w-2.5 h-2.5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Responsible"]}),r.jsx(Gt,{value:y,onChange:E=>b(E.target.value),options:[{value:"all",label:"All Responsible"},...Array.from(new Set(Ar.map(E=>E.action_responsible).filter(E=>!!E))).sort().map(E=>{const K=ji.find(he=>{var Me;return((Me=he.email)==null?void 0:Me.toLowerCase().trim())===E.toLowerCase().trim()});return{value:E,label:K?K.name:E}})],placeholder:"Select responsible",fullWidth:!0,className:"h-[32px] text-[11px] [&>select]:text-[11px] [&>select]:py-1"})]})]})})]}),r.jsxs("div",{className:"hidden md:flex md:flex-row md:items-center gap-2 md:justify-end",children:[r.jsx("div",{className:"w-64",children:r.jsx(hh,{onSearch:E=>a(E),placeholder:Ve==="actions"?"Search actions...":"Search findings..."})}),r.jsx("div",{className:"w-40",children:r.jsx(Gt,{value:o,onChange:E=>c(E.target.value),options:[{value:"all",label:"All Statuses"},...ze.map(E=>({value:E,label:$t(E)}))],placeholder:"Status",fullWidth:!0,className:"py-1.5 text-sm [&>select]:text-gray-900"})}),Ve==="findings"&&r.jsx("div",{className:"w-44",children:r.jsx(Gt,{value:u,onChange:E=>f(E.target.value),options:[{value:"all",label:"All Risk Levels"},...ue.map(E=>({value:E,label:$t(E)}))],placeholder:"Risk Level",fullWidth:!0,className:"py-1.5 text-sm [&>select]:text-gray-900"})}),r.jsx("div",{className:"w-48",children:r.jsx(Gt,{value:m,onChange:E=>g(E.target.value),options:[{value:"all",label:"All Audits"},...Array.from(new Set(Ve==="actions"?Ar.map(E=>E.audit_name).filter(E=>E):t.map(E=>E.audit_name).filter(E=>E))).sort().map(E=>({value:E,label:E}))],placeholder:"Audit Name",fullWidth:!0,className:"py-1.5 text-sm"})}),r.jsx("div",{className:"w-36",children:r.jsx(Gt,{value:h,onChange:E=>p(E.target.value),options:[{value:"all",label:"All Years"},...te.map(E=>({value:E,label:E}))],placeholder:"Audit Year",fullWidth:!0,className:"py-1.5 text-sm"})}),Ve==="actions"&&r.jsx("div",{className:"w-56",children:r.jsx(Gt,{value:y,onChange:E=>b(E.target.value),options:[{value:"all",label:"All Responsible"},...Array.from(new Set(Ar.map(E=>E.action_responsible).filter(E=>!!E))).sort().map(E=>{const K=ji.find(he=>{var Me;return((Me=he.email)==null?void 0:Me.toLowerCase().trim())===E.toLowerCase().trim()});return{value:E,label:K?K.name:E}})],placeholder:"Action Responsible",fullWidth:!0,className:"py-1.5 text-sm"})})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:Ve==="actions"?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"block md:hidden space-y-1 -mx-3 md:mx-0 w-[calc(100%+1.5rem)] md:w-auto",children:zs?r.jsx("div",{className:"flex justify-center py-12 px-3",children:r.jsx(Nt,{size:"md"})}):ta.length===0?r.jsxs("div",{className:"text-center py-16 text-gray-400 px-3",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),r.jsx("p",{className:"text-sm",children:"No actions found"})]}):ta.map(E=>{const K=t.find(he=>he.id===E.finding_id);return r.jsx("div",{onClick:()=>K&&ro(K.id,E),className:"group relative bg-white border-l-2 border-gray-200 hover:border-purple-500 rounded-r shadow-sm hover:shadow transition-all duration-150 active:scale-[0.98] cursor-pointer",style:{borderLeftColor:E.status==="completed"?"#22c55e":E.status==="in_progress"?"#3b82f6":E.status==="overdue"?"#ef4444":"#9ca3af"},children:r.jsx("div",{className:"px-2.5 py-1.5",children:r.jsx("div",{className:"flex items-center justify-between gap-2",children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-0.5 mb-0.5",children:[r.jsx("span",{className:"text-[9px] font-mono font-bold text-purple-600",children:E.action_id}),r.jsx(Ze,{variant:qs(E.status),className:"!text-[6px] !px-0.5 !py-0 !h-2.5 !leading-none !min-w-[18px] !rounded flex items-center justify-center font-bold",children:$t(E.status).substring(0,3)})]}),K&&r.jsx("button",{onClick:he=>{he.stopPropagation(),Vr(K)},className:"text-[9px] text-purple-600 hover:text-purple-700 hover:underline font-medium",children:K.finding_id.replace(/-\d{4}-/,"-")}),r.jsxs("div",{className:"flex items-center gap-2 mt-0.5 text-[9px] text-gray-500",children:[E.due_date&&r.jsx("span",{children:new Date(E.due_date).toLocaleDateString()}),E.action_responsible_email&&r.jsx("span",{className:"truncate max-w-[120px]",children:E.action_responsible_email})]})]})})})},E.id)})}),r.jsx("div",{className:"hidden md:block relative",children:r.jsxs("table",{className:"w-full shadow-sm rounded-lg overflow-hidden border border-gray-200",children:[r.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action ID"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finding ID"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action Description"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action Responsible"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:zs?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:r.jsx(Nt,{size:"md"})})}):ta.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"No actions found"})}):ta.map(E=>{const K=t.find(he=>he.id===E.finding_id);return r.jsxs("tr",{className:"hover:bg-purple-50/50 transition-colors duration-150 border-b border-gray-100",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900",children:E.action_id}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:K?r.jsx("button",{onClick:()=>Vr(K),className:"text-purple-600 hover:text-purple-800 hover:underline cursor-pointer",children:K.finding_id}):"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:so(E.action_description)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx(Ze,{variant:qs(E.status),children:$t(E.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.due_date?new Date(E.due_date).toLocaleDateString():"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.action_responsible_email||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:r.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>{K&&ro(K.id,E)},className:"text-xs px-2 py-1",children:"View"})})]},E.id)})})]})})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"block md:hidden space-y-1 -mx-3 md:mx-0 w-[calc(100%+1.5rem)] md:w-auto",children:il.length===0?r.jsxs("div",{className:"text-center py-16 text-gray-400 px-3",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-sm",children:"No findings found"})]}):il.map(E=>{var K,he,Me;return r.jsx("div",{onClick:()=>Vr(E),className:"group relative bg-white border-l-2 border-gray-200 hover:border-purple-500 rounded-r shadow-sm hover:shadow transition-all duration-150 active:scale-[0.98] cursor-pointer",style:{borderLeftColor:E.risk_level==="high"?"#ef4444":E.risk_level==="medium"?"#eab308":E.risk_level==="low"?"#22c55e":"#9ca3af"},children:r.jsx("div",{className:"px-2.5 py-1.5",children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-0.5 mb-0.5",children:[r.jsx("span",{className:"text-[9px] font-mono font-bold text-purple-600",children:E.finding_id.replace(/-\d{4}-/,"-")}),E.risk_level&&r.jsx(Ze,{variant:al(E.risk_level),className:"!text-[6px] !px-0.5 !py-0 !h-2.5 !leading-none !min-w-[12px] !rounded flex items-center justify-center font-bold",children:$t(E.risk_level).charAt(0)}),r.jsx(Ze,{variant:ai(E.status),className:"!text-[6px] !px-0.5 !py-0 !h-2.5 !leading-none !min-w-[18px] !rounded flex items-center justify-center font-bold",children:$t(E.status).substring(0,3)})]}),r.jsx("h3",{className:"text-[11px] font-semibold text-gray-900 line-clamp-1 group-hover:text-purple-600 transition-colors",children:E.finding_name}),r.jsxs("div",{className:"flex items-center gap-2 mt-0.5 text-[9px] text-gray-500",children:[r.jsx("span",{className:"truncate flex-1 min-w-0",children:E.audit_name}),r.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-auto",children:[r.jsxs("span",{className:"text-gray-400 whitespace-nowrap",children:["(",((K=Ct[E.id])==null?void 0:K.length)||0,")"]}),E.financial_impact&&r.jsxs("span",{className:"text-purple-600 font-semibold whitespace-nowrap",children:["",gc(E.financial_impact)]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[Ct[E.id]&&(((he=Ct[E.id])==null?void 0:he.length)||0)>0&&r.jsx("span",{className:"bg-purple-100 text-purple-700 px-1 py-0.5 rounded text-[8px] font-bold h-4 flex items-center justify-center min-w-[16px]",children:((Me=Ct[E.id])==null?void 0:Me.length)||0}),r.jsx("button",{onClick:me=>{me.stopPropagation(),tr(bn===E.id?null:E.id)},className:"p-1 text-gray-400 hover:text-gray-600 rounded transition-all",children:r.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),bn===E.id&&r.jsxs("div",{className:"absolute right-0 top-full mt-1 w-36 bg-white rounded-lg shadow-xl border border-gray-200 z-50 py-1",children:[r.jsxs("button",{onClick:me=>{me.stopPropagation(),na(E.id),nr(E.id),rn(null),Jt(null),sn(!1),tr(null)},className:"w-full text-left px-2.5 py-1.5 text-[10px] text-gray-700 hover:bg-gray-50 flex items-center gap-1.5",children:[r.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),r.jsx("span",{children:"View"})]}),r.jsxs("button",{onClick:me=>{me.stopPropagation(),na(E.id),nr(E.id),rn(null),Jt(null),sn(!0),pn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:""}),ws({}),tr(null)},className:"w-full text-left px-2.5 py-1.5 text-[10px] text-purple-600 hover:bg-purple-50 flex items-center gap-1.5",children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r.jsx("span",{children:"New"})]}),r.jsx("div",{className:"border-t border-gray-200 my-1"}),r.jsxs("button",{onClick:me=>{me.stopPropagation(),q(E.id),R(!0),tr(null)},className:"w-full text-left px-2.5 py-1.5 text-[10px] text-red-600 hover:bg-red-50 flex items-center gap-1.5",children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),r.jsx("span",{children:"Delete"})]})]})]})]})})},E.id)})}),r.jsx("div",{className:"hidden md:block relative",children:r.jsxs("table",{ref:Ut,className:"w-full shadow-lg rounded-xl overflow-hidden border-0 bg-white",children:[r.jsx("thead",{className:"sticky top-0 z-10 bg-gradient-to-r from-purple-600 via-indigo-600 to-purple-700 shadow-md border-b-4 border-purple-800/30",children:r.jsxs("tr",{className:"min-h-[3rem]",children:[r.jsx(ss,{columnKey:"findingId",width:Yn.findingId,onResizeStart:Fs,isResizing:Is==="findingId",className:"border-r border-purple-500/30 text-center",children:r.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"ID"})}),r.jsx(ss,{columnKey:"findingName",width:Yn.findingName,onResizeStart:Fs,isResizing:Is==="findingName",className:"border-r border-purple-500/30 text-center",children:r.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"Name"})}),r.jsx(ss,{columnKey:"auditName",width:Yn.auditName,onResizeStart:Fs,isResizing:Is==="auditName",className:"border-r border-purple-500/30 text-center",children:r.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"Audit"})}),r.jsx(ss,{columnKey:"findingDescription",width:Yn.findingDescription,onResizeStart:Fs,isResizing:Is==="findingDescription",className:"border-r border-purple-500/30 text-center",children:r.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"Finding Description"})}),r.jsx(ss,{columnKey:"riskLevel",width:Yn.riskLevel,onResizeStart:Fs,isResizing:Is==="riskLevel",className:"border-r border-purple-500/30 text-center",children:r.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"Risk Level"})}),r.jsx(ss,{columnKey:"status",width:Yn.status,onResizeStart:Fs,isResizing:Is==="status",className:"border-r border-purple-500/30 text-center",children:r.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"Status"})}),r.jsx(ss,{columnKey:"financialImpact",width:Yn.financialImpact,onResizeStart:Fs,isResizing:Is==="financialImpact",className:"border-r border-purple-500/30 text-center",children:r.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"Impact ()"})}),r.jsx(ss,{columnKey:"actions",width:Yn.actions,onResizeStart:Fs,isResizing:Is==="actions",className:"text-center",children:r.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",title:"Actions",children:""})})]})}),r.jsx("tbody",{className:"bg-white",children:il.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:"No audit findings found"})}):il.map((E,K)=>{var he,Me,me,Ke;return r.jsxs(wt.Fragment,{children:[r.jsxs("tr",{className:`group transition-all duration-200 ${K%2===0?"bg-white hover:bg-gradient-to-r hover:from-purple-50/30 hover:to-indigo-50/30":"bg-slate-50/50 hover:bg-gradient-to-r hover:from-purple-50/40 hover:to-indigo-50/40"} border-b border-slate-200/60`,children:[r.jsx("td",{style:{width:Yn.findingId},className:"px-6 py-4 whitespace-nowrap text-sm font-mono font-semibold text-purple-700 border-r border-slate-200/60 align-top",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>no(E.id),className:"text-slate-400 hover:text-purple-600 transition-all duration-200 hover:scale-110",title:Qa.has(E.id)?"Collapse":"Expand",children:r.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${Qa.has(E.id)?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),r.jsx("button",{onClick:()=>Vr(E),className:"text-purple-600 hover:text-purple-800 hover:underline cursor-pointer font-semibold transition-colors",title:E.finding_id,children:E.finding_id.replace(/-\d{4}-/,"-")})]})}),r.jsx("td",{style:{width:Yn.findingName},className:"px-6 py-4 text-sm font-medium text-slate-800 border-r border-slate-200/60 align-top leading-relaxed",children:r.jsx("div",{className:"break-words",children:E.finding_name})}),r.jsx("td",{style:{width:Yn.auditName},className:"px-6 py-4 text-sm text-slate-700 border-r border-slate-200/60 align-top leading-relaxed",children:r.jsx("div",{className:"break-words",children:E.audit_name})}),r.jsx("td",{style:{width:Yn.findingDescription},className:"px-6 py-4 text-sm text-slate-600 border-r border-slate-200/60 align-top leading-relaxed",children:r.jsx("div",{className:"break-words line-clamp-3",children:so(E.finding_description)})}),r.jsx("td",{style:{width:Yn.riskLevel},className:"px-6 py-4 whitespace-nowrap border-r border-slate-200/60 align-top",children:E.risk_level&&r.jsx(Ze,{variant:al(E.risk_level),children:$t(E.risk_level)})}),r.jsx("td",{style:{width:Yn.status},className:"px-6 py-4 whitespace-nowrap border-r border-slate-200/60 align-top",children:r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",onClick:()=>hn(zt===E.id?null:E.id),className:"focus:outline-none",children:r.jsx(Ze,{variant:ai(E.status),className:"cursor-pointer hover:opacity-80 text-sm px-3 py-1",children:$t(E.status)})}),zt===E.id&&r.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[140px] py-1",children:Array.from(new Set(ze.filter(Xe=>Xe!=="overdue"&&Xe.toLowerCase()!==E.status.toLowerCase()))).map(Xe=>r.jsx("button",{type:"button",onClick:async()=>{var tt,Qe,nt;try{(!Ct[E.id]||(((tt=Ct[E.id])==null?void 0:tt.length)||0)===0)&&await nr(E.id);const mt=await Za(E.id,Xe);if(!mt.canSet){T({show:!0,message:mt.reason||"Cannot set finding status",incompleteActions:mt.incompleteActions||[],actionLabel:mt.actionLabel||"Incomplete actions:"}),hn(null);return}await Ot.updateAuditFinding(E.id,{finding_name:E.finding_name,finding_description:E.finding_description,audit_type:E.audit_type,audit_type_other:E.audit_type_other,risk_type:E.risk_type,internal_control_element:E.internal_control_element,country:E.country,audit_year:E.audit_year,audit_name:E.audit_name,audit_key:E.audit_key,risk_level:E.risk_level,financial_impact:E.financial_impact,status:Xe}),await eo(),hn(null),_e({type:"success",message:"Finding status updated successfully"})}catch(mt){_e({type:"error",message:((nt=(Qe=mt==null?void 0:mt.response)==null?void 0:Qe.data)==null?void 0:nt.error)||"Failed to update finding status"})}},className:"w-full text-left px-3 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg flex items-center gap-2",children:r.jsx(Ze,{variant:ai(Xe),className:"text-xs",children:$t(Xe)})},Xe))})]})}),r.jsx("td",{style:{width:Yn.financialImpact},className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-slate-800 border-r border-slate-200/60 align-top",children:E.financial_impact?`${gc(E.financial_impact)}`:r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx("td",{style:{width:Yn.actions},className:"px-2 py-4 whitespace-nowrap text-right align-top",children:r.jsxs("div",{className:"relative inline-block",children:[r.jsx(Be,{variant:"ghost",size:"sm",onClick:Xe=>{Xe.stopPropagation(),tr(bn===E.id?null:E.id)},className:"text-xs px-1.5 py-1 min-w-0",title:"Actions",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),bn===E.id&&r.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white rounded-lg shadow-xl border border-gray-200 z-50 py-1",children:[r.jsxs("button",{onClick:Xe=>{Xe.stopPropagation(),na(E.id),nr(E.id),rn(null),Jt(null),sn(!1),tr(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),r.jsx("span",{children:"View Actions"}),r.jsx(Ze,{variant:"info",className:"ml-auto text-xs",children:((he=Ct[E.id])==null?void 0:he.length)||0})]}),r.jsxs("button",{onClick:Xe=>{Xe.stopPropagation(),na(E.id),nr(E.id),rn(null),Jt(null),sn(!0),pn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:""}),ws({}),tr(null)},className:"w-full text-left px-4 py-2 text-sm text-purple-600 hover:bg-purple-50 flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r.jsx("span",{children:"New Action"})]}),r.jsx("div",{className:"border-t border-gray-200 my-1"}),r.jsxs("button",{onClick:Xe=>{Xe.stopPropagation(),q(E.id),R(!0),tr(null)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),r.jsx("span",{children:"Delete Finding"})]})]})]})})]}),Qa.has(E.id)&&r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"px-6 py-4 bg-gray-50",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:["Actions (",((Me=Ct[E.id])==null?void 0:Me.length)||0,")"]}),Ct[E.id]&&(((me=Ct[E.id])==null?void 0:me.length)||0)>0?r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-visible",children:r.jsxs("table",{className:"w-full text-xs",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"ID"}),r.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Status"}),r.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Due Date"}),r.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Action Responsible"})]})}),r.jsx("tbody",{children:(Ke=Ct[E.id])==null?void 0:Ke.map(Xe=>r.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2",children:r.jsx("span",{className:"font-mono text-purple-700 cursor-pointer hover:text-purple-900 hover:underline",onClick:()=>ro(E.id,Xe),children:Xe.action_id})}),r.jsx("td",{className:"px-3 py-2",children:r.jsxs("div",{className:"relative",style:{zIndex:Ht===Xe.id?1e3:"auto"},children:[r.jsx("button",{type:"button","data-action-id":Xe.id,ref:tt=>{ei.current[Xe.id]=tt},onClick:()=>{if(Ht===Xe.id)Cn(null),xn(null);else{const tt=ei.current[Xe.id];if(tt){const Qe=tt.getBoundingClientRect(),nt=window.innerHeight,mt=window.innerWidth,Zt=200,jr=140;if(Qe.bottom+Zt+4<=nt)xn({top:Qe.bottom+4,left:Qe.left,side:"bottom"});else{const io=Qe.right+jr+4<=mt;xn(io?{top:Qe.top,left:Qe.right+4,side:"right"}:{top:Qe.top,left:Qe.left-jr-4,side:"right"})}}Cn(Xe.id)}},className:"focus:outline-none",children:r.jsx(Ze,{variant:qs(Xe.status),className:"text-xs cursor-pointer hover:opacity-80",children:$t(Xe.status)})}),Ht===Xe.id&&Nn&&r.jsx("div",{className:"fixed bg-white border border-gray-200 rounded-lg shadow-xl z-[1000] min-w-[140px] max-h-[200px] overflow-y-auto py-1",style:{top:`${Nn.top}px`,left:`${Nn.left}px`},children:Array.from(new Set(ze.filter(tt=>tt!=="overdue"&&tt.toLowerCase()!==Xe.status.toLowerCase()))).map(tt=>r.jsx("button",{type:"button",onClick:async()=>{var Qe,nt;try{await Ot.updateFindingAction(Xe.id,{action_description:Xe.action_description,due_date:Xe.due_date,audit_lead:Xe.audit_lead,action_responsible:Xe.action_responsible,action_responsible_email:Xe.action_responsible_email,action_responsible_vp:Xe.action_responsible_vp,action_responsible_clevel:Xe.action_responsible_clevel,status:tt}),Xt(mt=>{const Zt=(mt[E.id]||[]).map(jr=>jr.id===Xe.id?{...jr,status:tt}:jr);return si(E.id,Zt),{...mt,[E.id]:Zt}}),Cn(null),xn(null),_e({type:"success",message:"Action status updated successfully"})}catch(mt){_e({type:"error",message:((nt=(Qe=mt==null?void 0:mt.response)==null?void 0:Qe.data)==null?void 0:nt.error)||"Failed to update action status"})}},className:"w-full text-left px-3 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg flex items-center gap-2",children:r.jsx(Ze,{variant:qs(tt),className:"text-xs",children:$t(tt)})},tt))})]})}),r.jsx("td",{className:"px-3 py-2 text-gray-700",children:so(Xe.action_description,1)}),r.jsx("td",{className:"px-3 py-2 text-gray-600",children:Xe.due_date?new Date(Xe.due_date).toLocaleDateString():"N/A"}),r.jsx("td",{className:"px-3 py-2 text-gray-600",children:Xe.action_responsible_email||"-"})]},Xe.id))})]})}):r.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:'No actions yet. Click "+ New Action" to create one.'})]})})})]},E.id)})})]})})]})})]}),N&&(C||j)&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:E=>{E.target===E.currentTarget&&Ni()},style:{pointerEvents:"auto"},children:r.jsxs("div",{ref:ni,className:"bg-white rounded-2xl md:rounded-2xl rounded-t-2xl shadow-2xl max-w-[95vw] md:max-w-6xl w-full max-h-[90vh] md:max-h-[85vh] overflow-y-auto",onClick:E=>E.stopPropagation(),style:{pointerEvents:"auto"},children:[r.jsx("div",{className:F("bg-gradient-to-r from-purple-600 to-violet-600 rounded-t-2xl",v?"px-3 py-2":"px-4 py-3 md:px-6 md:py-4"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h2",{className:F("font-bold text-white truncate",v?"text-xs":"text-base md:text-[16px]"),children:C?"View Audit Finding":j?"Edit Audit Finding":""}),C&&r.jsx("p",{className:F("text-purple-100 truncate",v?"text-[10px] mt-0.5":"text-xs md:text-sm mt-0.5 md:mt-1"),children:C.finding_name||C.id})]}),r.jsx("button",{onClick:Ni,className:F("text-white hover:text-purple-200 transition-colors flex-shrink-0",v?"p-1 ml-2":"p-2"),children:r.jsx("svg",{className:F(v?"w-4 h-4":"w-5 h-5 md:w-6 md:h-6"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:F("overflow-y-auto",v?"p-2 space-y-2":"p-3 md:p-6 space-y-3 md:space-y-6"),children:[C&&!M&&r.jsx("div",{className:F(v?"mb-2":"mb-3 md:mb-6"),children:r.jsxs("div",{className:F("flex flex-col",v?"gap-1.5 mb-2":"gap-2 mb-3"),children:[r.jsxs("div",{className:F("flex items-center","justify-between"),children:[v&&r.jsx("h3",{className:"text-[11px] font-semibold text-gray-700",children:"Actions"}),!v&&r.jsxs("div",{className:F("flex items-center flex-wrap","gap-1.5 md:gap-2"),children:[r.jsxs(Be,{variant:"outline",size:"sm",onClick:()=>{le||nr(C.id),We(!le)},className:"justify-center items-center gap-0.5 border-purple-300 text-purple-700 hover:bg-purple-50 text-xs md:text-sm px-2 md:px-3 py-1 md:py-1.5",children:[r.jsx("svg",{className:"text-purple-600 flex-shrink-0 w-3 h-3 md:w-4 md:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsxs("span",{className:"truncate",children:[le?"Hide":"View"," ",r.jsxs("span",{className:"text-purple-600 font-semibold",children:["(",((ou=Ct[C.id])==null?void 0:ou.length)||0,")"]})]})]}),r.jsxs(Be,{variant:"outline",size:"sm",onClick:()=>{na(C.id),rn(null),Jt(null),sn(!0),pn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:""}),ws({})},className:"justify-center flex items-center gap-0.5 border-purple-300 text-purple-700 hover:bg-purple-50 text-xs md:text-sm px-2 md:px-3 py-1 md:py-1.5",children:[r.jsx("svg",{className:"flex-shrink-0 w-3 h-3 md:w-4 md:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r.jsx("span",{className:"truncate",children:"New"})]}),r.jsxs(Be,{variant:"outline",size:"sm",onClick:async()=>{var E,K;if(W)z(!1),setTimeout(()=>{var he;(he=ni.current)==null||he.scrollTo({top:0,behavior:"smooth"})},100);else{ie(!0);try{const he=await Ot.getFindingHistory(C.id);Z(he.data||[])}catch(he){_e({type:"error",message:((K=(E=he==null?void 0:he.response)==null?void 0:E.data)==null?void 0:K.error)||"Failed to load history"})}finally{ie(!1)}z(!0),setTimeout(()=>{var he;(he=Xa.current)==null||he.scrollIntoView({behavior:"smooth",block:"start"})},100)}},className:"justify-center flex items-center gap-0.5 border-purple-300 text-purple-700 hover:bg-purple-50 text-xs md:text-sm px-2 md:px-3 py-1 md:py-1.5",children:[r.jsx("svg",{className:"flex-shrink-0 w-3 h-3 md:w-4 md:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("span",{className:"truncate",children:[W?"Hide":"View"," History"]})]})]}),r.jsxs("div",{className:"relative flex-shrink-0 ml-auto",children:[r.jsx("button",{type:"button",onClick:()=>hn(zt===C.id?null:C.id),className:"focus:outline-none",children:r.jsx(Ze,{variant:ai(C.status),className:F("cursor-pointer hover:opacity-80",v?"!text-[9px] !px-1.5 !py-0.5 !h-5":"text-xs md:text-sm px-2 md:px-3 py-1 md:py-1"),children:$t(C.status)})}),zt===C.id&&r.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[140px] py-1",children:ze.filter(E=>!(E==="overdue"||E.toLowerCase()===C.status.toLowerCase())).map(E=>r.jsx("button",{type:"button",onClick:async()=>{var K,he,Me;try{(!Ct[C.id]||(((K=Ct[C.id])==null?void 0:K.length)||0)===0)&&await nr(C.id);const me=await Za(C.id,E);if(!me.canSet){T({show:!0,message:me.reason||"Cannot set finding status",incompleteActions:me.incompleteActions||[],actionLabel:me.actionLabel||"Incomplete actions:"}),hn(null);return}await Ot.updateAuditFinding(C.id,{finding_name:C.finding_name,finding_description:C.finding_description,audit_type:C.audit_type,audit_type_other:C.audit_type_other,risk_type:C.risk_type,internal_control_element:C.internal_control_element,country:C.country,audit_year:C.audit_year,audit_name:C.audit_name,audit_key:C.audit_key,risk_level:C.risk_level,financial_impact:C.financial_impact,status:E});const Ke=await Ot.getAuditFinding(C.id);O(Ke),await eo(),hn(null),_e({type:"success",message:"Finding status updated successfully"})}catch(me){_e({type:"error",message:((Me=(he=me==null?void 0:me.response)==null?void 0:he.data)==null?void 0:Me.error)||"Failed to update finding status"})}},className:"w-full text-left px-3 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg flex items-center gap-2",children:r.jsx(Ze,{variant:ai(E),className:"text-xs",children:$t(E)})},E))})]})]}),r.jsx("div",{className:F("flex items-center flex-wrap",v?"gap-0.5":"gap-1.5 md:gap-2"),children:v?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>{le||nr(C.id),We(!le)},className:"flex-1 min-w-0 flex items-center justify-center gap-0.5 px-1 py-0.5 h-5 text-[7px] border border-purple-300 text-purple-700 hover:bg-purple-50 rounded-md transition-colors",children:[r.jsx("svg",{className:"w-2 h-2 text-purple-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsxs("span",{className:"truncate",children:[le?"Hide":"View"," ",r.jsxs("span",{className:"text-purple-600 font-semibold",children:["(",((lu=Ct[C.id])==null?void 0:lu.length)||0,")"]})]})]}),r.jsxs("button",{onClick:()=>{na(C.id),rn(null),Jt(null),sn(!0),pn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:""}),ws({})},className:"flex-1 min-w-0 flex items-center justify-center gap-0.5 px-1 py-0.5 h-5 text-[7px] border border-purple-300 text-purple-700 hover:bg-purple-50 rounded-md transition-colors",children:[r.jsx("svg",{className:"w-2 h-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r.jsx("span",{className:"truncate",children:"New"})]}),r.jsxs("button",{onClick:async()=>{var E,K;if(W)z(!1),setTimeout(()=>{var he;(he=ni.current)==null||he.scrollTo({top:0,behavior:"smooth"})},100);else{ie(!0);try{const he=await Ot.getFindingHistory(C.id);Z(he.data||[])}catch(he){_e({type:"error",message:((K=(E=he==null?void 0:he.response)==null?void 0:E.data)==null?void 0:K.error)||"Failed to load history"})}finally{ie(!1)}z(!0),setTimeout(()=>{var he;(he=Xa.current)==null||he.scrollIntoView({behavior:"smooth",block:"start"})},100)}},className:"flex-1 min-w-0 flex items-center justify-center gap-0.5 px-1 py-0.5 h-5 text-[7px] border border-purple-300 text-purple-700 hover:bg-purple-50 rounded-md transition-colors",children:[r.jsx("svg",{className:"w-2 h-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("span",{className:"truncate",children:[W?"Hide":"View"," Hist"]})]})]}):null}),le&&r.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-4 shadow-sm",children:Ct[C.id]&&(((cu=Ct[C.id])==null?void 0:cu.length)||0)>0?r.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded bg-white",children:r.jsxs("table",{className:"w-full text-xs",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"ID"}),r.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Status"}),r.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Due Date"})]})}),r.jsx("tbody",{children:(ol=Ct[C.id])==null?void 0:ol.map(E=>r.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-3 py-2",children:r.jsx("span",{className:"font-mono text-purple-700 cursor-pointer hover:text-purple-900 hover:underline",onClick:()=>ro(C.id,E),children:E.action_id})}),r.jsx("td",{className:"px-3 py-2",children:r.jsx(Ze,{variant:qs(E.status),className:"text-xs",children:$t(E.status)})}),r.jsx("td",{className:"px-3 py-2 text-gray-700",children:so(E.action_description,1)}),r.jsx("td",{className:"px-3 py-2 text-gray-600",children:E.due_date?new Date(E.due_date).toLocaleDateString():"N/A"})]},E.id))})]})}):r.jsx("div",{className:"text-center py-6 text-gray-500 text-sm",children:r.jsx("p",{children:'No actions yet. Click "New Action" to create one.'})})})]})}),r.jsxs("form",{onSubmit:async E=>{console.log("Form submit event triggered"),await sl(E)},className:"space-y-6",children:[!C&&r.jsxs(r.Fragment,{children:[r.jsx(Gt,{label:"Select Audit Year",value:Te.selectedAuditYear,onChange:E=>{tl(E.target.value),E.target.value&&rt(K=>K?{...K,selectedAuditYear:E.target.value,selectedAuditKey:"",selectedAuditName:""}:{selectedAuditYear:E.target.value,selectedAuditKey:"",selectedAuditName:""})},options:[{value:"",label:"Select audit year..."},...te.map(E=>({value:E,label:E}))],required:!0,error:It.selectedAuditYear,disabled:!!(it!=null&&it.selectedAuditYear)&&!j,fullWidth:!0}),Te.selectedAuditYear&&r.jsx(Gt,{label:"Select Audit",value:Te.selectedAuditKey,onChange:E=>su(E.target.value),options:[{value:"",label:"Select an audit..."},...nl.map(E=>({value:E.key,label:E.summary}))],required:!0,error:It.audit_name,disabled:!!(it!=null&&it.selectedAuditKey)&&!j,fullWidth:!0})]}),(!C||Te.audit_name||Te.audit_year||Te.audit_type||Te.risk_type||Te.risk_level||Te.internal_control_element||Te.country)&&r.jsxs("div",{className:F("border rounded-lg",v?"bg-white border-gray-200 p-1.5 mb-2":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 p-3 md:p-4 mb-4 md:mb-6"),children:[Te.audit_name&&r.jsxs("div",{className:F("mb-1.5 pb-1.5 border-b",v?"border-gray-200":"border-blue-200"),children:[r.jsx("span",{className:F("font-medium text-gray-600 mr-1.5",v?"text-[9px]":"text-xs"),children:"Audit:"}),r.jsx("span",{className:F("font-semibold text-gray-900",v?"text-[10px]":"text-sm"),children:Te.audit_name}),Te.audit_year&&r.jsxs("span",{className:F("text-gray-500 ml-1.5",v?"text-[9px]":"text-xs"),children:["(",Te.audit_year,")"]})]}),r.jsxs("div",{className:F("flex items-center",v?"flex-wrap gap-1":"flex-wrap gap-2 md:gap-3"),children:[(!C||Te.audit_type)&&r.jsxs("div",{className:F("flex items-center",v?"gap-0.5":"gap-1.5"),children:[!v&&r.jsx("span",{className:"text-[10px] font-medium text-gray-600",children:"Type:"}),C&&!M?r.jsx(Ze,{variant:"info",className:F(v?"!text-[8px] !px-1 !py-0.5 !h-4":"text-xs"),children:$t(Te.audit_type)}):r.jsx(Gt,{value:Te.audit_type,onChange:E=>{St(K=>({...K,audit_type:E.target.value,audit_type_other:""})),Sn(K=>({...K,audit_type:""}))},options:at.map(E=>({value:E,label:$t(E)})),placeholder:"Select...",required:!0,error:It.audit_type,disabled:!!(C&&!M),className:v?"min-w-[90px]":"min-w-[140px]"})]}),(!C||Te.risk_type)&&r.jsxs("div",{className:F("flex items-center",v?"gap-0.5":"gap-1.5"),children:[!v&&r.jsx("span",{className:"text-[10px] font-medium text-gray-600",children:"Risk:"}),C&&!M?r.jsx(Ze,{variant:"warning",className:F(v?"!text-[8px] !px-1 !py-0.5 !h-4":"text-xs"),children:$t(Te.risk_type)}):r.jsx(Gt,{value:Te.risk_type,onChange:E=>{St(K=>({...K,risk_type:E.target.value})),Sn(K=>({...K,risk_type:""}))},options:oe.map(E=>({value:E,label:$t(E)})),placeholder:"Select...",required:!0,error:It.risk_type,disabled:!!(C&&!M),className:v?"min-w-[90px]":"min-w-[140px]"})]}),(!C||Te.risk_level)&&r.jsxs("div",{className:F("flex items-center",v?"gap-0.5":"gap-1.5"),children:[!v&&r.jsx("span",{className:"text-[10px] font-medium text-gray-600",children:"Level:"}),C&&!M?r.jsx(Ze,{variant:al(Te.risk_level),className:F(v?"!text-[8px] !px-1 !py-0.5 !h-4":"text-xs"),children:$t(Te.risk_level)}):r.jsx(Gt,{value:Te.risk_level,onChange:E=>{St(K=>({...K,risk_level:E.target.value})),Sn(K=>({...K,risk_level:""}))},options:ue.map(E=>({value:E,label:$t(E)})),placeholder:"Select...",required:!0,error:It.risk_level,disabled:!!(C&&!M),className:v?"min-w-[80px]":"min-w-[120px]"})]}),(!C||Te.internal_control_element)&&r.jsxs("div",{className:F("flex items-center",v?"gap-0.5":"gap-1.5"),children:[!v&&r.jsx("span",{className:"text-[10px] font-medium text-gray-600",children:"Control:"}),C&&!M?r.jsx(Ze,{variant:"default",className:F(v?"!text-[8px] !px-1 !py-0.5 !h-4":"text-xs"),children:$t(Te.internal_control_element)}):r.jsx(Gt,{value:Te.internal_control_element,onChange:E=>{St(K=>({...K,internal_control_element:E.target.value})),Sn(K=>({...K,internal_control_element:""}))},options:Ne.map(E=>({value:E,label:$t(E)})),placeholder:"Select...",required:!0,error:It.internal_control_element,disabled:!!(C&&!M),className:v?"min-w-[100px]":"min-w-[160px]"})]}),(!C||Te.country)&&r.jsxs("div",{className:F("flex items-center",v?"gap-0.5":"gap-1.5"),children:[!v&&r.jsx("span",{className:"text-[10px] font-medium text-gray-600",children:"Country:"}),C&&!M?r.jsx(Ze,{variant:"info",className:F(v?"!text-[8px] !px-1 !py-0.5 !h-4":"text-xs"),children:$t(Te.country)}):r.jsx(Gt,{value:Te.country,onChange:E=>{St(K=>({...K,country:E.target.value})),Sn(K=>({...K,country:""}))},options:ke.map(E=>({value:E,label:$t(E)})),placeholder:"Select...",required:!0,error:It.country,disabled:!!(C&&!M),className:v?"min-w-[80px]":"min-w-[120px]"})]})]})]}),r.jsx("div",{children:r.jsx(Tn,{label:r.jsxs("span",{className:F("font-medium text-gray-700",v?"text-[10px]":"text-sm"),children:["Finding Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),value:Te.finding_name,onChange:E=>St(K=>({...K,finding_name:E.target.value})),placeholder:"Enter finding name",required:!0,error:It.finding_name,disabled:!!(C&&!M),fullWidth:!0,className:F(v?"text-[10px]":"text-sm")})}),r.jsx("div",{className:F(v?"mb-2":"mb-6 md:mb-10"),children:r.jsx(Hx,{label:r.jsxs("span",{className:F("font-medium text-gray-700",v?"text-[10px]":"text-sm"),children:["Finding Description ",r.jsx("span",{className:"text-red-500",children:"*"})]}),value:Te.finding_description||"",onChange:E=>St(K=>({...K,finding_description:E})),rows:v?2:4,required:!0,error:It.finding_description,disabled:!!(C&&!M),fullWidth:!0,className:F(v?"text-[10px]":"text-sm")})}),Te.audit_type==="Other"&&r.jsx(Tn,{label:r.jsx("span",{className:F("font-medium text-gray-700",v?"text-[11px]":"text-sm"),children:"Audit Type (Other)"}),value:Te.audit_type_other,onChange:E=>St(K=>({...K,audit_type_other:E.target.value})),required:!0,error:It.audit_type_other,disabled:!!(C&&!M),fullWidth:!0,className:F(v?"text-[11px]":"text-sm")}),r.jsxs("div",{className:F(v?"mb-2":"mb-4 md:mb-6"),children:[r.jsx("label",{className:F("block font-medium text-gray-700",v?"text-[10px] mb-0.5":"text-sm mb-1"),children:"Financial Impact ()"}),C&&!M?r.jsx("div",{className:F("bg-gray-50 border border-gray-300 rounded text-gray-900",v?"px-2 py-1 text-[10px]":"px-3 py-2 text-sm"),children:Te.financial_impact?`${gc(Te.financial_impact)}`:"-"}):r.jsx(Tn,{type:"text",inputMode:"decimal",value:Te.financial_impact||"",onChange:E=>{const he=E.target.value.replace(/[^\d.]/g,""),Me=he.split(".");let me=he;Me.length>2&&(me=Me[0]+"."+Me.slice(1).join("")),St(Ke=>({...Ke,financial_impact:me}))},placeholder:"0.00",disabled:!!(C&&!M),fullWidth:!0,className:F(v?"text-[10px]":"text-sm")})]}),r.jsxs("div",{children:[r.jsx("label",{className:F("block font-medium text-gray-700",v?"text-[10px] mb-1":"text-sm mb-1.5"),children:"Attachments"}),r.jsx("input",{type:"file",multiple:!0,onChange:rl,disabled:!!(C&&!M),className:F("block w-full text-gray-500 file:rounded-lg file:border-0 file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 disabled:opacity-50 disabled:cursor-not-allowed",v?"text-[9px] file:mr-1.5 file:py-0.5 file:px-1.5 file:text-[9px]":"text-sm file:mr-4 file:py-2 file:px-4 file:text-sm")}),yn.length>0&&r.jsx("div",{className:F("mt-1 space-y-0.5",""),children:yn.map((E,K)=>r.jsxs("div",{className:F("flex items-center justify-between bg-gray-50 rounded",v?"p-1":"p-2"),children:[r.jsx("span",{className:F("text-gray-700 truncate",v?"text-[9px] max-w-[70%]":"text-sm"),children:E.file_name}),r.jsx("button",{type:"button",onClick:()=>iu(K),className:"text-red-500 hover:text-red-700 flex-shrink-0",children:r.jsx("svg",{className:F(v?"w-2.5 h-2.5":"w-4 h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},K))})]}),C&&!M&&W&&r.jsxs("div",{ref:Xa,className:F("border-t border-gray-200",v?"mt-3 pt-3":"mt-6 pt-6"),children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:F("font-semibold text-gray-900",v?"text-xs":"text-base"),children:"Change History"}),v?r.jsxs("button",{onClick:()=>{z(!1),setTimeout(()=>{var E;(E=ni.current)==null||E.scrollTo({top:0,behavior:"smooth"})},100)},className:"flex items-center gap-0.5 px-1 py-0.5 h-5 text-[7px] border border-purple-300 text-purple-700 hover:bg-purple-50 rounded-md transition-colors",children:[r.jsx("svg",{className:"w-2 h-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),r.jsx("span",{children:"Hide"})]}):r.jsx(Be,{variant:"outline",size:"sm",onClick:()=>{z(!1),setTimeout(()=>{var E;(E=ni.current)==null||E.scrollTo({top:0,behavior:"smooth"})},100)},className:"text-xs border-purple-300 text-purple-700 hover:bg-purple-50 px-2 py-1",children:"Hide History"})]}),V?r.jsx("div",{className:"text-center py-8",children:r.jsx(Nt,{size:"md"})}):Q.length>0?r.jsx("div",{className:F(v?"space-y-2":"space-y-3"),children:Q.map(E=>r.jsxs("div",{className:F("bg-gray-50 border border-gray-200 rounded-lg",v?"p-2":"p-4"),children:[r.jsxs("div",{className:F("flex items-start justify-between",v?"mb-1.5":"mb-2"),children:[r.jsxs("div",{className:F("flex items-center",v?"gap-1.5":"gap-2"),children:[r.jsx(Ze,{variant:E.event_type==="CREATE"?"success":E.event_type==="DELETE"?"danger":"info",size:v?"xs":"sm",className:F(v&&"!text-[9px] !px-1.5 !py-0.5 !h-5"),children:E.event_type}),E.field_name&&r.jsxs("span",{className:F("font-medium text-gray-700",v?"text-[10px]":"text-sm"),children:["Field: ",E.field_name]})]}),r.jsx("span",{className:F("text-gray-500",v?"text-[9px]":"text-xs"),children:new Date(E.changed_at).toLocaleString("en-US",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"})})]}),E.field_name&&r.jsxs("div",{className:F("grid grid-cols-2 mt-2",v?"gap-[6.4px] text-[8px]":"gap-[12.8px] text-xs"),children:[r.jsxs("div",{children:[r.jsx("span",{className:F("text-gray-600 font-medium",v?"text-[10px]":"text-sm"),children:"Old Value:"}),r.jsx("div",{className:F("bg-red-50 border border-red-200 rounded text-gray-900",v?"mt-0.5 px-1.5 py-0.5 text-[9px]":"mt-1 px-2 py-1"),children:E.old_value||"-"})]}),r.jsxs("div",{children:[r.jsx("span",{className:F("text-gray-600 font-medium",v?"text-[10px]":"text-sm"),children:"New Value:"}),r.jsx("div",{className:F("bg-green-50 border border-green-200 rounded text-gray-900",v?"mt-0.5 px-1.5 py-0.5 text-[9px]":"mt-1 px-2 py-1"),children:E.new_value||"-"})]})]}),r.jsxs("div",{className:F("text-gray-500",v?"mt-1.5 text-[9px]":"mt-2 text-xs"),children:["Changed by: ",E.changed_by]})]},E.id))}):r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No history available"})]}),r.jsxs("div",{className:F("flex items-stretch justify-end border-t border-gray-200",v?"flex-col gap-1.5 pt-2":"sm:flex-row sm:items-center gap-2 pt-3 md:pt-4 sm:gap-3"),children:[C&&!M&&r.jsxs(Be,{type:"button",variant:"outline",onClick:()=>{const E=(he,Me)=>{if(!he)return"";const me=he.trim(),Ke=Me.find(tt=>tt===me);if(Ke)return Ke;const Xe=Me.find(tt=>tt.toLowerCase().trim()===me.toLowerCase());return Xe||me},K={finding_name:C.finding_name||"",finding_description:C.finding_description||"",audit_type:E(C.audit_type,at),audit_type_other:C.audit_type_other||"",risk_type:E(C.risk_type,oe),internal_control_element:E(C.internal_control_element,Ne),country:E(C.country,ke),audit_year:C.audit_year||"",audit_name:C.audit_name||"",audit_key:C.audit_key||"",risk_level:E(C.risk_level,ue),financial_impact:C.financial_impact?String(C.financial_impact):"",status:E(C.status,ze),selectedAuditKey:C.audit_key||"",selectedAuditYear:C.audit_year||""};St(K),yr({...K}),B(!0),S(C)},className:F("bg-gradient-to-r from-purple-50 to-indigo-50 border-purple-300 text-purple-700 hover:from-purple-100 hover:to-indigo-100 hover:border-purple-400 hover:text-purple-800 font-medium shadow-sm",v?"w-full text-[9px] px-2 py-1 h-7":"text-xs md:text-sm px-3 md:px-4 py-2 md:py-2.5"),children:[r.jsx("svg",{className:F("mr-0.5",v?"w-2.5 h-2.5":"w-3 h-3 md:w-4 md:h-4 mr-1.5 md:mr-2"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),r.jsx(Be,{type:"button",variant:"ghost",onClick:()=>{if(M&&j){if(Dt)St({...Dt});else{const E=t.find(K=>K.id===j.id);E&&(St({finding_name:E.finding_name||"",finding_description:E.finding_description||"",audit_type:E.audit_type||"",audit_type_other:E.audit_type_other||"",risk_type:E.risk_type||"",internal_control_element:E.internal_control_element||"",country:E.country||"",audit_year:E.audit_year||"",audit_name:E.audit_name||"",audit_key:E.audit_key||"",risk_level:E.risk_level||"",financial_impact:E.financial_impact?String(E.financial_impact):"",status:E.status||"open",selectedAuditKey:E.audit_key||"",selectedAuditYear:E.audit_year||""}),O(E))}S(null),B(!1),yr(null)}else Ni()},className:F(v?"w-full text-[9px] px-2 py-1 h-7":"text-xs md:text-sm px-3 md:px-4 py-2 md:py-2.5"),children:C&&!M?"Close":j?"Cancel":"Close"}),!C&&!j&&(it==null?void 0:it.selectedAuditKey)&&r.jsx(Be,{type:"button",variant:"outline",onClick:async E=>{console.log(" Save and Add Another button clicked",{e:E,auditContext:it}),E.preventDefault(),E.stopPropagation();try{await sl(void 0,!0)}catch(K){console.error(" Error in Save and Add Another:",K)}},className:F("whitespace-nowrap",v?"w-full text-[9px] px-2 py-1 h-7":"text-xs md:text-sm px-3 md:px-4 py-2 md:py-2.5"),children:"Save & Add Another"}),(j||!C)&&r.jsx(Be,{type:"submit",variant:"primary",onClick:E=>{console.log(" Create Finding button clicked",{type:E.currentTarget.type,editingFinding:j,viewingFinding:C})},disabled:j?!ea:!1,className:F("whitespace-nowrap",v?"w-full text-[9px] px-2 py-1 h-7":"text-xs md:text-sm px-3 md:px-4 py-2 md:py-2.5",j&&"bg-gradient-to-r from-purple-600 to-indigo-600 border-purple-600 text-white hover:from-purple-700 hover:to-indigo-700 hover:border-purple-700 font-medium shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-purple-600 disabled:hover:to-indigo-600"),children:j?r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Update"]}):"Create Finding"})]})]})]})]})}),Qt&&Mt&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 md:p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-[95vw] md:max-w-6xl w-full max-h-[95vh] md:max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Finding Actions"}),r.jsx("button",{onClick:_i,className:"text-gray-400 hover:text-gray-500",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"p-6",children:[!ct&&!At&&!jt&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-base font-semibold text-gray-900",children:["Actions (",((du=Ct[Mt])==null?void 0:du.length)||0,")"]}),r.jsxs(Be,{variant:"primary",onClick:()=>{Jt(null),sn(!0),pn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:""}),ws({})},children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Action"]})]}),Ct[Mt]&&Ct[Mt].length>0?r.jsx("div",{className:"space-y-2",children:(uu=Ct[Mt])==null?void 0:uu.map(E=>r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-sm transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between gap-[12.8px]",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[r.jsx("span",{className:"text-xs font-mono text-gray-500",children:E.action_id}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",onClick:()=>hn(zt===E.id?null:E.id),className:"focus:outline-none",children:r.jsx(Ze,{variant:qs(E.status),className:"text-xs cursor-pointer hover:opacity-80",children:$t(E.status)})}),zt===E.id&&r.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[140px] py-1",children:Array.from(new Set(ze.filter(K=>K!=="overdue"&&K.toLowerCase()!==E.status.toLowerCase()))).map(K=>r.jsx("button",{type:"button",onClick:async()=>{var he,Me;try{await Ot.updateFindingAction(E.id,{action_description:E.action_description,due_date:E.due_date,audit_lead:E.audit_lead,action_responsible:E.action_responsible,action_responsible_email:E.action_responsible_email,action_responsible_vp:E.action_responsible_vp,action_responsible_clevel:E.action_responsible_clevel,status:K}),await nr(Mt),C&&C.id===Mt&&await nr(C.id),hn(null),_e({type:"success",message:"Action status updated successfully"})}catch(me){_e({type:"error",message:((Me=(he=me==null?void 0:me.response)==null?void 0:he.data)==null?void 0:Me.error)||"Failed to update action status"})}},className:"w-full text-left px-3 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg flex items-center gap-2",children:r.jsx(Ze,{variant:qs(K),className:"text-xs",children:$t(K)})},K))})]})]}),r.jsx("div",{className:"text-sm text-gray-900 mb-2",children:so(E.action_description,1)}),r.jsxs("div",{className:"flex items-center gap-[12.8px] text-[9.6px] text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("span",{children:new Date(E.due_date).toLocaleDateString()})]}),E.audit_lead&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.jsx("span",{className:"truncate max-w-[150px]",children:(()=>{if(!E.audit_lead)return"-";const K=wi.find(he=>{var Me,me;return((Me=he.email)==null?void 0:Me.toLowerCase().trim())===((me=E.audit_lead)==null?void 0:me.toLowerCase().trim())});return K?K.name:E.audit_lead})()})]}),E.action_responsible&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"truncate max-w-[150px]",children:(()=>{if(!E.action_responsible)return"-";const K=ji.find(he=>{var Me,me;return((Me=he.email)==null?void 0:Me.toLowerCase().trim())===((me=E.action_responsible)==null?void 0:me.toLowerCase().trim())});return K?K.name:E.action_responsible})()})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[r.jsx(Be,{variant:"ghost",size:"sm",className:"text-xs px-2 py-1",onClick:()=>ro(Mt,E),children:"View"}),r.jsx(Be,{variant:"ghost",size:"sm",className:"text-xs px-2 py-1 text-red-600 hover:text-red-700",onClick:()=>{X(E.id),Y(Mt),G(!0)},children:"Delete"})]})]})},E.id))}):r.jsx("div",{className:"text-center py-12 text-gray-500",children:r.jsx("p",{children:'No actions found. Click "New Action" to create one.'})})]}),(ct||At||jt)&&r.jsxs(Ie,{className:"p-6 border-2 border-dashed border-gray-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[(ct||At)&&r.jsxs("button",{type:"button",onClick:()=>{rn(null),Jt(null),Ft(!1),sn(!1)},className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),r.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-mono",children:ct?ct.action_id:At?At.action_id:"Create New Action"})]}),ct&&!Tt&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Be,{variant:"outline",size:"sm",onClick:async()=>{var E,K;if(!de){st(!0);try{const he=await Ot.getActionHistory(ct.id);He(he.data||[])}catch(he){_e({type:"error",message:((K=(E=he==null?void 0:he.response)==null?void 0:E.data)==null?void 0:K.error)||"Failed to load history"})}finally{st(!1)}}fe(!de)},className:"text-xs flex items-center gap-1",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),de?"Hide":"View"," History"]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",onClick:()=>hn(zt===ct.id?null:ct.id),className:"focus:outline-none",children:r.jsx(Ze,{variant:qs(gt.status),className:"cursor-pointer hover:opacity-80",children:$t(gt.status)})}),zt===ct.id&&r.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[140px] py-1",children:Array.from(new Set(ze.filter(E=>E!=="overdue"&&E.toLowerCase()!==gt.status.toLowerCase()))).map(E=>r.jsx("button",{type:"button",onClick:async()=>{var K,he;try{await Ot.updateFindingAction(ct.id,{action_description:gt.action_description,due_date:gt.due_date,audit_lead:gt.audit_lead,action_responsible:gt.action_responsible,action_responsible_email:gt.action_responsible_email,action_responsible_vp:gt.action_responsible_vp,action_responsible_clevel:gt.action_responsible_clevel,status:E});const Me=await Ot.getFindingAction(ct.id);pn(me=>({...me,status:Me.status})),rn(Me),await nr(Mt),await si(Mt),C&&C.id===Mt&&await nr(C.id),hn(null),_e({type:"success",message:"Action status updated successfully"})}catch(Me){_e({type:"error",message:((he=(K=Me==null?void 0:Me.response)==null?void 0:K.data)==null?void 0:he.error)||"Failed to update action status"})}},className:"w-full text-left px-3 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg flex items-center gap-2",children:r.jsx(Ze,{variant:qs(E),className:"text-xs",children:$t(E)})},E))})]})]})]}),ct&&!Tt&&Mt&&r.jsx("div",{className:"mb-4 p-2 bg-gray-50 border border-gray-200 rounded text-xs",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-600 font-medium",children:"Related Finding:"}),r.jsx("button",{onClick:()=>{const E=t.find(K=>K.id===Mt);E&&(_i(),Vr(E))},className:"text-purple-600 hover:text-purple-800 hover:underline font-mono",children:((fu=t.find(E=>E.id===Mt))==null?void 0:fu.finding_id)||`Finding #${Mt}`})]})})}),r.jsxs("form",{onSubmit:rp,className:"space-y-4",children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[((ct==null?void 0:ct.audit_name)||(At==null?void 0:At.audit_name)||((yc=t.find(E=>E.id===Mt))==null?void 0:yc.audit_name))&&r.jsxs("div",{className:"w-full mb-2 pb-2 border-b border-purple-200",children:[r.jsx("span",{className:"text-xs font-medium text-gray-600 mr-2",children:"Audit:"}),r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:(ct==null?void 0:ct.audit_name)||(At==null?void 0:At.audit_name)||((hu=t.find(E=>E.id===Mt))==null?void 0:hu.audit_name)||""}),((ct==null?void 0:ct.audit_year)||(At==null?void 0:At.audit_year)||((pu=t.find(E=>E.id===Mt))==null?void 0:pu.audit_year))&&r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",(ct==null?void 0:ct.audit_year)||(At==null?void 0:At.audit_year)||((mu=t.find(E=>E.id===Mt))==null?void 0:mu.audit_year)||"",")"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Lead:"}),ct&&!Tt?r.jsx(Ze,{variant:"info",className:"text-xs",children:(()=>{if(!gt.audit_lead)return"-";const E=wi.find(K=>{var he;return((he=K.email)==null?void 0:he.toLowerCase().trim())===gt.audit_lead.toLowerCase().trim()});return E?E.name:gt.audit_lead})()}):r.jsx(Gt,{value:gt.audit_lead||"",onChange:E=>pn(K=>({...K,audit_lead:E.target.value})),options:(()=>{const E=wi.map(K=>({value:K.email,label:`${K.name} (${K.email})`}));if(gt.audit_lead){const K=E.findIndex(he=>he.value.toLowerCase().trim()===gt.audit_lead.toLowerCase().trim());if(K>0&&E[K]){const he=E[K];E.splice(K,1),E.unshift(he)}}return E})(),placeholder:gt.audit_lead?void 0:"Select...",required:!0,error:Zo.audit_lead,disabled:!!(ct&&!Tt),className:"min-w-[200px]"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Responsible:"}),ct&&!Tt?r.jsx(Ze,{variant:"success",className:"text-xs",children:(()=>{if(!gt.action_responsible)return"-";const E=ji.find(K=>{var he;return((he=K.email)==null?void 0:he.toLowerCase().trim())===gt.action_responsible.toLowerCase().trim()});return E?E.name:gt.action_responsible})()}):r.jsx(Gt,{value:gt.action_responsible||"",onChange:async E=>{if(ct&&!Tt)return;const K=E.target.value;pn(he=>({...he,action_responsible:K,action_responsible_email:K}));try{const he=await Ot.getUserHierarchy(K);pn(Me=>({...Me,action_responsible:K,action_responsible_email:K,action_responsible_vp:he.vp_email||"",action_responsible_clevel:he.c_level_email||""}))}catch{pn(Me=>({...Me,action_responsible_vp:"",action_responsible_clevel:""}))}},options:(()=>{const E=ji.map(K=>({value:K.email,label:`${K.name} (${K.email})`}));if(gt.action_responsible){const K=E.findIndex(he=>he.value.toLowerCase().trim()===gt.action_responsible.toLowerCase().trim());if(K>0&&E[K]){const he=E[K];E.splice(K,1),E.unshift(he)}}return E})(),placeholder:gt.action_responsible?void 0:"Select...",required:!0,error:Zo.action_responsible,disabled:!!(ct&&!Tt),className:"min-w-[200px]"})]})]})}),r.jsx(Hx,{label:"Action Description",value:gt.action_description||"",onChange:E=>pn(K=>({...K,action_description:E})),rows:3,required:!0,error:Zo.action_description,disabled:!!(ct&&!Tt),fullWidth:!0}),r.jsx(Tn,{label:"Due Date",type:"date",value:gt.due_date,onChange:E=>pn(K=>({...K,due_date:E.target.value})),required:!0,error:Zo.due_date,disabled:!!(ct&&!Tt),fullWidth:!0}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-[12.8px]",children:[r.jsx(Tn,{label:"Action Responsible Email",value:gt.action_responsible_email||"",disabled:!0,fullWidth:!0}),r.jsx(Tn,{label:"Action Responsible VP",value:gt.action_responsible_vp||"",disabled:!0,fullWidth:!0}),r.jsx(Tn,{label:"Action Responsible C-Level",value:gt.action_responsible_clevel||"",disabled:!0,fullWidth:!0})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[ct&&!Tt&&r.jsxs(Be,{type:"button",variant:"outline",onClick:()=>{let E=ct.due_date||"";if(E&&typeof E=="string"){const K=new Date(E);if(!isNaN(K.getTime())){const he=K.toISOString().split("T")[0];he&&(E=he)}}pn({action_description:ct.action_description||"",due_date:E,audit_lead:ct.audit_lead||"",action_responsible:ct.action_responsible||"",action_responsible_email:ct.action_responsible_email||"",action_responsible_vp:ct.action_responsible_vp||"",action_responsible_clevel:ct.action_responsible_clevel||"",status:ct.status||"open"}),Ft(!0),Jt(ct),rn(null)},className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-purple-300 text-purple-700 hover:from-purple-100 hover:to-indigo-100 hover:border-purple-400 hover:text-purple-800 font-medium shadow-sm",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),ct&&!Tt&&r.jsxs(Be,{type:"button",variant:"danger",onClick:()=>{X(ct.id),Y(Mt),G(!0)},children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]}),r.jsx(Be,{type:"button",variant:"ghost",onClick:()=>{var E;if(Tt&&At){const K=(E=Ct[Mt])==null?void 0:E.find(he=>he.id===At.id);if(K){let he=K.due_date||"";if(he&&typeof he=="string"){const Me=new Date(he);if(!isNaN(Me.getTime())){const me=Me.toISOString().split("T")[0];me&&(he=me)}}pn({action_description:K.action_description||"",due_date:he,audit_lead:K.audit_lead||"",action_responsible:K.action_responsible||"",action_responsible_email:K.action_responsible_email||"",action_responsible_vp:K.action_responsible_vp||"",action_responsible_clevel:K.action_responsible_clevel||"",status:K.status||"open"})}rn(K||At),Jt(null),Ft(!1)}else _i()},children:ct&&!Tt?"Close":"Cancel"}),!ct&&r.jsxs(Be,{type:"submit",variant:"primary",children:[At?"Update":"Create"," Action"]})]})]}),ct&&!Tt&&de&&r.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Change History"}),$e?r.jsx("div",{className:"text-center py-8",children:r.jsx(Nt,{size:"md"})}):ve.length>0?r.jsx("div",{className:"space-y-3",children:ve.map(E=>r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ze,{variant:E.event_type==="CREATE"?"success":E.event_type==="DELETE"?"danger":"info",children:E.event_type}),E.field_name&&r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Field: ",E.field_name]})]}),r.jsx("span",{className:"text-xs text-gray-500",children:new Date(E.changed_at).toLocaleString("en-US",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"})})]}),E.field_name&&r.jsxs("div",{className:"grid grid-cols-2 gap-[12.8px] mt-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 font-medium",children:"Old Value:"}),r.jsx("div",{className:"mt-1 px-2 py-1 bg-red-50 border border-red-200 rounded text-gray-900",children:(()=>{if(E.field_name==="due_date"&&E.old_value)try{const K=new Date(E.old_value);if(!isNaN(K.getTime()))return K.toISOString().split("T")[0]}catch{}return E.old_value||"-"})()})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 font-medium",children:"New Value:"}),r.jsx("div",{className:"mt-1 px-2 py-1 bg-green-50 border border-green-200 rounded text-gray-900",children:(()=>{if(E.field_name==="due_date"&&E.new_value)try{const K=new Date(E.new_value);if(!isNaN(K.getTime()))return K.toISOString().split("T")[0]}catch{}return E.new_value||"-"})()})]})]}),r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Changed by: ",E.changed_by]})]},E.id))}):r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No history available"})]})]}),!1]})]})}),I&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 md:p-4",children:r.jsxs(Ie,{className:"p-4 md:p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-sm md:text-base font-semibold text-gray-900 mb-2",children:"Delete Audit Finding"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this audit finding? This action cannot be undone."}),r.jsxs("div",{className:"flex items-center justify-end gap-3",children:[r.jsx(Be,{variant:"ghost",onClick:()=>{R(!1),q(null)},children:"Cancel"}),r.jsx(Be,{variant:"danger",onClick:to,children:"Delete"})]})]})}),H&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 md:p-4",children:r.jsxs(Ie,{className:"p-4 md:p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 mb-2",children:"Delete Finding Action"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this action? This action cannot be undone."}),r.jsxs("div",{className:"flex items-center justify-end gap-3",children:[r.jsx(Be,{variant:"ghost",onClick:()=>{G(!1),X(null),Y(null)},children:"Cancel"}),r.jsx(Be,{variant:"danger",onClick:sp,children:"Delete"})]})]})}),Ts&&!bs&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{In(!1),lr([])},onKeyDown:E=>{E.key==="Escape"&&(In(!1),lr([]))},tabIndex:-1,children:r.jsxs(Ie,{className:"p-6 max-w-md w-full mx-4",onClick:E=>E.stopPropagation(),children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Finding"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Choose how you would like to add findings:"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Be,{variant:"primary",onClick:()=>{An("single")},className:"w-full justify-start",children:[r.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add from Here"]}),r.jsxs(Be,{variant:"outline",onClick:()=>{An("bulk")},className:"w-full justify-start",children:[r.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Bulk Add from Excel/CSV"]})]}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsx(Be,{variant:"ghost",onClick:()=>{In(!1),lr([])},children:"Cancel"})})]})}),Ts&&bs==="single"&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",tabIndex:-1,children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-[95vw] md:max-w-[90vw] w-full max-h-[95vh] md:max-h-[98vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 z-10",children:[r.jsxs("div",{className:"px-4 md:px-6 py-3 md:py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add Finding"}),r.jsx("button",{onClick:()=>{In(!1),An(null),lr([]),En(""),vr(""),Qn(""),br({finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",risk_level:"",financial_impact:"",status:""})},className:"text-gray-400 hover:text-gray-500",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Ds.length>0&&r.jsxs("div",{className:"px-6 pb-4 bg-green-50 border-t border-green-200",children:[r.jsxs("h3",{className:"text-sm font-semibold text-green-800 mb-2",children:["Successfully Created (",Ds.length,")"]}),r.jsx("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:Ds.map(E=>r.jsxs("div",{className:"text-xs text-green-700 flex items-center gap-2",children:[r.jsx("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsxs("span",{className:"truncate",children:[E.finding_id,": ",E.finding_name]})]},E.id))})]})]}),r.jsx("div",{className:"p-8",children:r.jsxs("form",{onSubmit:async E=>{var he,Me,me,Ke,Xe;E.preventDefault();const K={};if((he=bt.finding_name)!=null&&he.trim()||(K.finding_name="Required"),(Me=bt.finding_description)!=null&&Me.trim()||(K.finding_description="Required"),Vn||(K.auditYear="Required"),Fn||(K.auditKey="Required"),bt.audit_type||(K.audit_type="Required"),bt.audit_type==="Other"&&!((me=bt.audit_type_other)!=null&&me.trim())&&(K.audit_type_other="Required"),bt.risk_type||(K.risk_type="Required"),bt.internal_control_element||(K.internal_control_element="Required"),bt.country||(K.country="Required"),bt.risk_level||(K.risk_level="Required"),se(K),Object.keys(K).length>0){_e({type:"error",message:"Please fill in all required fields"});return}try{const tt={finding_name:bt.finding_name,finding_description:bt.finding_description,audit_type:bt.audit_type,audit_type_other:bt.audit_type==="Other"?bt.audit_type_other:void 0,risk_type:bt.risk_type,internal_control_element:bt.internal_control_element,country:bt.country,audit_year:Vn,audit_name:ri,audit_key:Fn,risk_level:bt.risk_level,financial_impact:bt.financial_impact?parseFloat(bt.financial_impact):void 0,status:"open"},Qe=await Ot.createAuditFinding(tt),nt=Qe.data||Qe;lr(mt=>[...mt,nt]),_e({type:"success",message:"Finding created successfully"}),In(!1),An(null),lr([]),En(""),vr(""),Qn(""),br({finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",risk_level:"",financial_impact:"",status:""}),se({}),await ii()}catch(tt){_e({type:"error",message:((Xe=(Ke=tt==null?void 0:tt.response)==null?void 0:Ke.data)==null?void 0:Xe.error)||"Failed to create finding"})}},children:[r.jsx("div",{className:"mb-6",children:r.jsx(Gt,{label:"Audit Year *",value:Vn,onChange:E=>{En(E.target.value),vr(""),Qn(""),se(K=>({...K,auditYear:"",auditKey:""}))},options:te.map(E=>({value:E,label:E})),placeholder:"Select audit year...",required:!0,error:Ir.auditYear,fullWidth:!0})}),r.jsx("div",{className:"mb-6",children:r.jsx(Gt,{label:"Audit *",value:Fn,onChange:E=>{const K=Ue.find(he=>he.key===E.target.value);vr(E.target.value),Qn((K==null?void 0:K.summary)||""),se(he=>({...he,auditKey:""}))},options:Vn?Ue.filter(E=>E.auditYear===Vn).map(E=>({value:E.key,label:E.summary})):[],placeholder:"Select audit...",required:!0,error:Ir.auditKey,disabled:!Vn,fullWidth:!0})}),r.jsx("div",{className:`bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-6 ${Fn?"":"opacity-50"}`,children:r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[ri&&r.jsxs("div",{className:"w-full mb-2 pb-2 border-b border-blue-200",children:[r.jsx("span",{className:"text-xs font-medium text-gray-600 mr-2",children:"Audit:"}),r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:ri}),Vn&&r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",Vn,")"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Type: ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(Gt,{value:bt.audit_type,onChange:E=>{br(K=>({...K,audit_type:E.target.value,audit_type_other:""})),se(K=>({...K,audit_type:"",audit_type_other:""}))},options:at.map(E=>({value:E,label:$t(E)})),placeholder:"Select...",required:!0,error:Ir.audit_type,className:"min-w-[140px]"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Risk: ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(Gt,{value:bt.risk_type,onChange:E=>{br(K=>({...K,risk_type:E.target.value})),se(K=>({...K,risk_type:""}))},options:oe.map(E=>({value:E,label:$t(E)})),placeholder:"Select...",required:!0,error:Ir.risk_type,disabled:!Fn,className:"min-w-[140px]"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Level: ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(Gt,{value:bt.risk_level,onChange:E=>{br(K=>({...K,risk_level:E.target.value})),se(K=>({...K,risk_level:""}))},options:ue.map(E=>({value:E,label:$t(E)})),placeholder:"Select...",required:!0,error:Ir.risk_level,disabled:!Fn,className:"min-w-[120px]"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Control: ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(Gt,{value:bt.internal_control_element,onChange:E=>{br(K=>({...K,internal_control_element:E.target.value})),se(K=>({...K,internal_control_element:""}))},options:Ne.map(E=>({value:E,label:$t(E)})),placeholder:"Select...",required:!0,error:Ir.internal_control_element,disabled:!Fn,className:"min-w-[160px]"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Country: ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(Gt,{value:bt.country,onChange:E=>{br(K=>({...K,country:E.target.value})),se(K=>({...K,country:""}))},options:ke.map(E=>({value:E,label:$t(E)})),placeholder:"Select...",required:!0,error:Ir.country,disabled:!Fn,className:"min-w-[120px]"})]})]})}),bt.audit_type==="Other"&&r.jsx(Tn,{label:"Audit Type (Other) *",value:bt.audit_type_other,onChange:E=>{br(K=>({...K,audit_type_other:E.target.value})),se(K=>({...K,audit_type_other:""}))},required:!0,error:Ir.audit_type_other,disabled:!Fn,fullWidth:!0}),r.jsx("div",{className:"mb-6",children:r.jsx(Tn,{label:"Finding Name",value:bt.finding_name,onChange:E=>{br(K=>({...K,finding_name:E.target.value})),se(K=>({...K,finding_name:""}))},required:!0,error:Ir.finding_name,disabled:!Fn,fullWidth:!0})}),r.jsx("div",{className:"mb-10",children:r.jsx(Hx,{label:"Finding Description",value:bt.finding_description||"",onChange:E=>{br(K=>({...K,finding_description:E})),se(K=>({...K,finding_description:""}))},rows:4,required:!0,error:Ir.finding_description,disabled:!Fn,fullWidth:!0})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Financial Impact ()"}),r.jsx(Tn,{type:"text",inputMode:"decimal",value:bt.financial_impact||"",onChange:E=>{const he=E.target.value.replace(/[^\d.]/g,""),Me=he.split(".");let me=he;Me.length>2&&(me=Me[0]+"."+Me.slice(1).join("")),br(Ke=>({...Ke,financial_impact:me}))},placeholder:"0.00",disabled:!Fn,fullWidth:!0})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 mt-6",children:[r.jsx(Be,{type:"button",variant:"ghost",onClick:()=>{In(!1),An(null),lr([]),En(""),vr(""),Qn("")},children:"Cancel"}),r.jsx(Be,{type:"button",variant:"outline",onClick:async E=>{var he,Me,me,Ke,Xe;E.preventDefault();const K={};if((he=bt.finding_name)!=null&&he.trim()||(K.finding_name="Required"),(Me=bt.finding_description)!=null&&Me.trim()||(K.finding_description="Required"),Vn||(K.auditYear="Required"),Fn||(K.auditKey="Required"),bt.audit_type||(K.audit_type="Required"),bt.audit_type==="Other"&&!((me=bt.audit_type_other)!=null&&me.trim())&&(K.audit_type_other="Required"),bt.risk_type||(K.risk_type="Required"),bt.internal_control_element||(K.internal_control_element="Required"),bt.country||(K.country="Required"),bt.risk_level||(K.risk_level="Required"),se(K),Object.keys(K).length>0){_e({type:"error",message:"Please fill in all required fields"});return}try{const tt={finding_name:bt.finding_name,finding_description:bt.finding_description,audit_type:bt.audit_type,audit_type_other:bt.audit_type==="Other"?bt.audit_type_other:void 0,risk_type:bt.risk_type,internal_control_element:bt.internal_control_element,country:bt.country,audit_year:Vn,audit_name:ri,audit_key:Fn,risk_level:bt.risk_level,financial_impact:bt.financial_impact?parseFloat(bt.financial_impact):void 0,status:bt.status},Qe=await Ot.createAuditFinding(tt),nt=Qe.data||Qe;lr(mt=>[...mt,nt]),_e({type:"success",message:"Finding created successfully"}),br({finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",risk_level:"",financial_impact:"",status:""}),se({}),await ii()}catch(tt){_e({type:"error",message:((Xe=(Ke=tt==null?void 0:tt.response)==null?void 0:Ke.data)==null?void 0:Xe.error)||"Failed to create finding"})}},children:"Save & Add Another"}),r.jsx(Be,{type:"submit",variant:"primary",children:"Save and Close"})]})]})})]})}),Ts&&bs==="bulk"&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onKeyDown:E=>{E.key==="Escape"&&(In(!1),An(null),Se(null),je([]),De([]),En(""),vr(""),Qn(""))},tabIndex:-1,children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-[95vw] md:max-w-4xl w-full max-h-[95vh] md:max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg md:text-2xl font-bold text-gray-900",children:"Bulk Add Findings from Excel/CSV"}),r.jsx("button",{onClick:()=>{In(!1),An(null),Se(null),je([]),De([]),En(""),vr(""),Qn("")},className:"text-gray-400 hover:text-gray-500",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6 space-y-4",children:[r.jsx(Gt,{label:"Audit Year",value:Vn,onChange:E=>{En(E.target.value),vr(""),Qn("")},options:te.map(E=>({value:E,label:E})),required:!0,fullWidth:!0}),Vn&&r.jsx(Gt,{label:"Audit",value:Fn,onChange:E=>{const K=Ue.find(he=>he.key===E.target.value);vr(E.target.value),Qn((K==null?void 0:K.summary)||"")},options:Ue.filter(E=>E.auditYear===Vn).map(E=>({value:E.key,label:E.summary})),required:!0,fullWidth:!0})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Upload File (Excel .xlsx or CSV)"}),r.jsxs(Be,{variant:"ghost",size:"sm",onClick:()=>{const he=[["Finding Name","Finding Description","Audit Type","Audit Type Other","Risk Type","Internal Control Element","Country","Risk Level","Financial Impact"],["Sample Finding","Sample Description","Internal","","Operational","Control Environment","Turkey","Medium","1000.00"]].map(Xe=>Xe.join(",")).join(`
`),Me=new Blob([he],{type:"text/csv"}),me=window.URL.createObjectURL(Me),Ke=document.createElement("a");Ke.href=me,Ke.download="finding_template.csv",Ke.click(),window.URL.revokeObjectURL(me)},className:"text-xs text-gray-600 hover:text-gray-900",children:[r.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Template"]})]}),r.jsx("input",{type:"file",accept:".xlsx,.csv",onChange:E=>{var he;const K=(he=E.target.files)==null?void 0:he[0];if(K&&(Se(K),je([]),De([]),K.name.endsWith(".csv"))){const Me=new FileReader;Me.onload=me=>{var tt,Qe;const Xe=((tt=me.target)==null?void 0:tt.result).split(`
`).filter(nt=>nt.trim());if(Xe.length>0){const nt=((Qe=Xe[0])==null?void 0:Qe.split(",").map(Zt=>Zt.trim()))||[],mt=Xe.slice(1,6).map(Zt=>{const jr=Zt.split(",").map(io=>io.trim()),vc={};return nt.forEach((io,ap)=>{vc[io]=jr[ap]||""}),vc});je(mt)}},Me.readAsText(K)}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"})]}),ae.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Preview (first 5 rows):"}),r.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsx("tr",{children:Object.keys(ae[0]||{}).map(E=>r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:E},E))})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ae.map((E,K)=>r.jsx("tr",{children:Object.values(E).map((he,Me)=>r.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:he||"-"},Me))},K))})]})})]}),ye.length>0&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded",children:[r.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-2",children:"Errors:"}),r.jsx("ul",{className:"list-disc list-inside text-sm text-red-700 space-y-1",children:ye.map((E,K)=>r.jsx("li",{children:E},K))})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[r.jsx(Be,{variant:"ghost",onClick:()=>{In(!1),An(null),Se(null),je([]),De([]),En(""),vr(""),Qn("")},children:"Cancel"}),r.jsx(Be,{variant:"primary",onClick:async()=>{var E,K;if(!we||!Vn||!Fn){_e({type:"error",message:"Please select audit year, audit, and upload a file"});return}Jn(!0),De([]);try{const he=new FormData;he.append("file",we),he.append("audit_year",Vn),he.append("audit_key",Fn),he.append("audit_name",ri);const Me=await Ot.bulkUploadFindings(he);if(Me&&typeof Me=="object"){const me=Me;me.createdCount>0?(_e({type:"success",message:`Successfully created ${me.createdCount} finding${me.createdCount>1?"s":""}`}),In(!1),An(null),Se(null),je([]),De([]),En(""),vr(""),Qn(""),await ii(),me.errors&&me.errors.length>0&&(_e({type:"warning",message:`${me.errors.length} row${me.errors.length>1?"s":""} had errors. Check console for details.`}),console.warn("Bulk upload errors:",me.errors))):(_e({type:"error",message:"No findings were created. Please check the file format and try again."}),me.errors&&me.errors.length>0&&De(me.errors))}else _e({type:"error",message:"Failed to upload findings"})}catch(he){_e({type:"error",message:((K=(E=he==null?void 0:he.response)==null?void 0:E.data)==null?void 0:K.error)||"Failed to upload findings"})}finally{Jn(!1)}},disabled:kt||!we||!Vn||!Fn,children:kt?"Uploading...":"Upload & Add Findings"})]})]})]})}),U.show&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>T({show:!1,message:"",incompleteActions:[],actionLabel:"Incomplete actions:"}),children:r.jsx(Ie,{className:"p-6 max-w-lg w-full mx-4",onClick:E=>E.stopPropagation(),children:r.jsxs("div",{className:"flex items-start gap-[12.8px]",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Cannot Change Status"}),r.jsx("p",{className:"text-gray-700 mb-3",children:U.message.split(`

`)[0]}),U.incompleteActions&&U.incompleteActions.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:U.actionLabel||"Incomplete actions:"}),r.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600 ml-2",children:U.incompleteActions.map((E,K)=>r.jsx("li",{children:E},K))})]}),r.jsx("div",{className:"flex items-center justify-end",children:r.jsx(Be,{variant:"primary",onClick:()=>T({show:!1,message:"",incompleteActions:[],actionLabel:"Incomplete actions:"}),className:"min-w-[100px]",children:"OK"})})]})]})})})]})},dz=()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 via-white to-indigo-50 p-4",children:r.jsxs("div",{className:"text-center space-y-6 max-w-2xl",children:[r.jsxs("div",{className:"relative inline-block",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400 to-indigo-400 rounded-full blur-2xl opacity-30 animate-pulse"}),r.jsx("div",{className:"relative bg-white rounded-full p-8 shadow-2xl border border-purple-100",children:r.jsx(mD,{className:"w-24 h-24 text-purple-600 animate-bounce",strokeWidth:1.5})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-purple-600 via-indigo-600 to-purple-700 bg-clip-text text-transparent",children:"Audit Universe"}),r.jsx("div",{className:"h-1 w-32 mx-auto bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full"})]}),r.jsx("p",{className:"text-[16px] font-medium text-gray-600",children:"Under Construction"}),r.jsx("p",{className:"text-base text-gray-500 leading-relaxed max-w-lg mx-auto",children:"We're building something amazing! This page is currently under development and will be available soon."}),r.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-purple-100 text-purple-700 rounded-full font-medium shadow-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-ping"}),r.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full absolute"}),r.jsx("span",{className:"ml-1",children:"Coming Soon"})]}),r.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200",children:r.jsx("p",{className:"text-sm text-gray-400",children:"Admin Access Only"})})]})}),uz=()=>{const t=rc();return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-700 to-purple-900 flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-9xl font-bold text-white mb-4",children:"404"}),r.jsx("h2",{className:"text-[24px] font-semibold text-white mb-4",children:"Page Not Found"}),r.jsx("p",{className:"text-purple-200 mb-8 max-w-md mx-auto",children:"The page you're looking for doesn't exist or has been moved."}),r.jsxs("div",{className:"flex gap-[12.8px] justify-center",children:[r.jsxs(Be,{onClick:()=>t(-1),variant:"outline",className:"text-white border-white hover:bg-white/10",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Go Back"]}),r.jsx(Be,{onClick:()=>t("/"),variant:"primary",className:"bg-white text-purple-600 hover:bg-gray-100",children:"Go to Dashboard"})]})]})})},fz=()=>{const t=rc();return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs(Ie,{className:"max-w-md w-full text-center",variant:"elevated",children:[r.jsx("svg",{className:"mx-auto h-16 w-16 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),r.jsx("h1",{className:"mt-4 text-[16px] font-bold text-gray-900",children:"Access Denied"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"You don't have permission to access this page. Please contact your administrator if you believe this is an error."}),r.jsxs("div",{className:"mt-8 flex gap-[12.8px] justify-center",children:[r.jsx(Be,{onClick:()=>t(-1),variant:"outline",children:"Go Back"}),r.jsx(Be,{onClick:()=>t("/"),variant:"primary",children:"Go to Dashboard"})]})]})})},hz=()=>{const{checkAuth:t,isLoading:e}=Dr();return L.useEffect(()=>{t()},[t]),e?r.jsx(Nt,{fullScreen:!0,size:"xl",text:"Loading application..."}):r.jsx(kE,{children:r.jsx(bE,{children:r.jsx(VC,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsxs(zC,{children:[r.jsx(fr,{path:"/login",element:r.jsx(JE,{})}),r.jsx(fr,{path:"/unauthorized",element:r.jsx(fz,{})}),r.jsxs(fr,{path:"/",element:r.jsx(QE,{}),children:[r.jsx(fr,{index:!0,element:r.jsx(gs,{requiredRoles:["admin","team","team_manager","ceo"],children:r.jsx(p8,{})})}),r.jsx(fr,{path:"tasks",element:r.jsx(gs,{requiredRoles:["admin","team","team_manager"],children:r.jsx(x8,{})})}),r.jsx(fr,{path:"my-actions",element:r.jsx(gs,{requiredRoles:["admin","team","team_manager"],children:r.jsx(v8,{})})}),r.jsx(fr,{path:"department-actions",element:r.jsx(gs,{requiredRoles:["admin","department_director","action_operator"],children:r.jsx(N8,{})})}),r.jsx(fr,{path:"clevel-actions",element:r.jsx(gs,{requiredRoles:["admin","top_management"],children:r.jsx(_8,{})})}),r.jsx(fr,{path:"management-level-actions",element:r.jsx(gs,{requiredRoles:["admin","management"],children:r.jsx(k8,{})})}),r.jsx(fr,{path:"all-findings-actions",element:r.jsx(gs,{requiredRoles:["admin","team","team_manager"],children:r.jsx(B8,{})})}),r.jsx(fr,{path:"audit-maturity",element:r.jsx(gs,{requiredRoles:["admin"],children:r.jsx(q8,{})})}),r.jsx(fr,{path:"annual-audit-plan",element:r.jsx(gs,{requiredRoles:["admin"],children:r.jsx(WI,{})})}),r.jsx(fr,{path:"access-management",element:r.jsx(gs,{requiredRoles:["admin"],children:r.jsx(g8,{})})}),r.jsx(fr,{path:"risk-management",element:r.jsx(gs,{requiredRoles:["admin"],children:r.jsx(y8,{})})}),r.jsx(fr,{path:"audit-findings",element:r.jsx(gs,{requiredRoles:["admin"],children:r.jsx(cz,{})})}),r.jsx(fr,{path:"audit-universe",element:r.jsx(gs,{requiredRoles:["admin"],children:r.jsx(dz,{})})})]}),r.jsx(fr,{path:"*",element:r.jsx(uz,{})})]})})})})};Ba.register(oh,lh,Pl,$i,Rl,Ao,dd,Uk,$k,qk,zk);$S.createRoot(document.getElementById("root")).render(r.jsx(wt.StrictMode,{children:r.jsx(hz,{})}));
