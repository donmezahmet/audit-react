var WS=Object.defineProperty;var r1=t=>{throw TypeError(t)};var HS=(t,e,n)=>e in t?WS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ct=(t,e,n)=>HS(t,typeof e!="symbol"?e+"":e,n),Lm=(t,e,n)=>e.has(t)||r1("Cannot "+n);var ue=(t,e,n)=>(Lm(t,e,"read from private field"),n?n.call(t):e.get(t)),St=(t,e,n)=>e.has(t)?r1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),at=(t,e,n,r)=>(Lm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ht=(t,e,n)=>(Lm(t,e,"access private method"),n);var pf=(t,e,n,r)=>({set _(i){at(t,e,i,n)},get _(){return ue(t,e,r)}});function VS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mm={exports:{}},Xc={},Tm={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s1;function $S(){if(s1)return $t;s1=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function m(R){return R===null||typeof R!="object"?null:(R=p&&R[p]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function y(R,U,B){this.props=R,this.context=U,this.refs=b,this.updater=B||x}y.prototype.isReactComponent={},y.prototype.setState=function(R,U){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,U,"setState")},y.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function w(){}w.prototype=y.prototype;function k(R,U,B){this.props=R,this.context=U,this.refs=b,this.updater=B||x}var N=k.prototype=new w;N.constructor=k,v(N,y.prototype),N.isPureReactComponent=!0;var j=Array.isArray,S=Object.prototype.hasOwnProperty,A={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function M(R,U,B){var Q,Z={},$=null,ne=null;if(U!=null)for(Q in U.ref!==void 0&&(ne=U.ref),U.key!==void 0&&($=""+U.key),U)S.call(U,Q)&&!O.hasOwnProperty(Q)&&(Z[Q]=U[Q]);var ae=arguments.length-2;if(ae===1)Z.children=B;else if(1<ae){for(var ce=Array(ae),ye=0;ye<ae;ye++)ce[ye]=arguments[ye+2];Z.children=ce}if(R&&R.defaultProps)for(Q in ae=R.defaultProps,ae)Z[Q]===void 0&&(Z[Q]=ae[Q]);return{$$typeof:t,type:R,key:$,ref:ne,props:Z,_owner:A.current}}function z(R,U){return{$$typeof:t,type:R.type,key:U,ref:R.ref,props:R.props,_owner:R._owner}}function I(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function D(R){var U={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(B){return U[B]})}var T=/\/+/g;function q(R,U){return typeof R=="object"&&R!==null&&R.key!=null?D(""+R.key):U.toString(36)}function H(R,U,B,Q,Z){var $=typeof R;($==="undefined"||$==="boolean")&&(R=null);var ne=!1;if(R===null)ne=!0;else switch($){case"string":case"number":ne=!0;break;case"object":switch(R.$$typeof){case t:case e:ne=!0}}if(ne)return ne=R,Z=Z(ne),R=Q===""?"."+q(ne,0):Q,j(Z)?(B="",R!=null&&(B=R.replace(T,"$&/")+"/"),H(Z,U,B,"",function(ye){return ye})):Z!=null&&(I(Z)&&(Z=z(Z,B+(!Z.key||ne&&ne.key===Z.key?"":(""+Z.key).replace(T,"$&/")+"/")+R)),U.push(Z)),1;if(ne=0,Q=Q===""?".":Q+":",j(R))for(var ae=0;ae<R.length;ae++){$=R[ae];var ce=Q+q($,ae);ne+=H($,U,B,ce,Z)}else if(ce=m(R),typeof ce=="function")for(R=ce.call(R),ae=0;!($=R.next()).done;)$=$.value,ce=Q+q($,ae++),ne+=H($,U,B,ce,Z);else if($==="object")throw U=String(R),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return ne}function G(R,U,B){if(R==null)return R;var Q=[],Z=0;return H(R,Q,"","",function($){return U.call(B,$,Z++)}),Q}function ee(R){if(R._status===-1){var U=R._result;U=U(),U.then(function(B){(R._status===0||R._status===-1)&&(R._status=1,R._result=B)},function(B){(R._status===0||R._status===-1)&&(R._status=2,R._result=B)}),R._status===-1&&(R._status=0,R._result=U)}if(R._status===1)return R._result.default;throw R._result}var X={current:null},J={transition:null},K={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:J,ReactCurrentOwner:A};function W(){throw Error("act(...) is not supported in production builds of React.")}return $t.Children={map:G,forEach:function(R,U,B){G(R,function(){U.apply(this,arguments)},B)},count:function(R){var U=0;return G(R,function(){U++}),U},toArray:function(R){return G(R,function(U){return U})||[]},only:function(R){if(!I(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},$t.Component=y,$t.Fragment=n,$t.Profiler=i,$t.PureComponent=k,$t.StrictMode=r,$t.Suspense=u,$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,$t.act=W,$t.cloneElement=function(R,U,B){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var Q=v({},R.props),Z=R.key,$=R.ref,ne=R._owner;if(U!=null){if(U.ref!==void 0&&($=U.ref,ne=A.current),U.key!==void 0&&(Z=""+U.key),R.type&&R.type.defaultProps)var ae=R.type.defaultProps;for(ce in U)S.call(U,ce)&&!O.hasOwnProperty(ce)&&(Q[ce]=U[ce]===void 0&&ae!==void 0?ae[ce]:U[ce])}var ce=arguments.length-2;if(ce===1)Q.children=B;else if(1<ce){ae=Array(ce);for(var ye=0;ye<ce;ye++)ae[ye]=arguments[ye+2];Q.children=ae}return{$$typeof:t,type:R.type,key:Z,ref:$,props:Q,_owner:ne}},$t.createContext=function(R){return R={$$typeof:o,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:a,_context:R},R.Consumer=R},$t.createElement=M,$t.createFactory=function(R){var U=M.bind(null,R);return U.type=R,U},$t.createRef=function(){return{current:null}},$t.forwardRef=function(R){return{$$typeof:c,render:R}},$t.isValidElement=I,$t.lazy=function(R){return{$$typeof:h,_payload:{_status:-1,_result:R},_init:ee}},$t.memo=function(R,U){return{$$typeof:f,type:R,compare:U===void 0?null:U}},$t.startTransition=function(R){var U=J.transition;J.transition={};try{R()}finally{J.transition=U}},$t.unstable_act=W,$t.useCallback=function(R,U){return X.current.useCallback(R,U)},$t.useContext=function(R){return X.current.useContext(R)},$t.useDebugValue=function(){},$t.useDeferredValue=function(R){return X.current.useDeferredValue(R)},$t.useEffect=function(R,U){return X.current.useEffect(R,U)},$t.useId=function(){return X.current.useId()},$t.useImperativeHandle=function(R,U,B){return X.current.useImperativeHandle(R,U,B)},$t.useInsertionEffect=function(R,U){return X.current.useInsertionEffect(R,U)},$t.useLayoutEffect=function(R,U){return X.current.useLayoutEffect(R,U)},$t.useMemo=function(R,U){return X.current.useMemo(R,U)},$t.useReducer=function(R,U,B){return X.current.useReducer(R,U,B)},$t.useRef=function(R){return X.current.useRef(R)},$t.useState=function(R){return X.current.useState(R)},$t.useSyncExternalStore=function(R,U,B){return X.current.useSyncExternalStore(R,U,B)},$t.useTransition=function(){return X.current.useTransition()},$t.version="18.3.1",$t}var i1;function Nh(){return i1||(i1=1,Tm.exports=$S()),Tm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a1;function YS(){if(a1)return Xc;a1=1;var t=Nh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(c,u,f){var h,p={},m=null,x=null;f!==void 0&&(m=""+f),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(x=u.ref);for(h in u)r.call(u,h)&&!a.hasOwnProperty(h)&&(p[h]=u[h]);if(c&&c.defaultProps)for(h in u=c.defaultProps,u)p[h]===void 0&&(p[h]=u[h]);return{$$typeof:e,type:c,key:m,ref:x,props:p,_owner:i.current}}return Xc.Fragment=n,Xc.jsx=o,Xc.jsxs=o,Xc}var o1;function KS(){return o1||(o1=1,Mm.exports=YS()),Mm.exports}var s=KS(),L=Nh();const jt=Kx(L),GS=VS({__proto__:null,default:jt},[L]);var gf={},Dm={exports:{}},Jr={},Pm={exports:{}},Rm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function XS(){return l1||(l1=1,(function(t){function e(J,K){var W=J.length;J.push(K);e:for(;0<W;){var R=W-1>>>1,U=J[R];if(0<i(U,K))J[R]=K,J[W]=U,W=R;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var K=J[0],W=J.pop();if(W!==K){J[0]=W;e:for(var R=0,U=J.length,B=U>>>1;R<B;){var Q=2*(R+1)-1,Z=J[Q],$=Q+1,ne=J[$];if(0>i(Z,W))$<U&&0>i(ne,Z)?(J[R]=ne,J[$]=W,R=$):(J[R]=Z,J[Q]=W,R=Q);else if($<U&&0>i(ne,W))J[R]=ne,J[$]=W,R=$;else break e}}return K}function i(J,K){var W=J.sortIndex-K.sortIndex;return W!==0?W:J.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],f=[],h=1,p=null,m=3,x=!1,v=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(J){for(var K=n(f);K!==null;){if(K.callback===null)r(f);else if(K.startTime<=J)r(f),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(f)}}function j(J){if(b=!1,N(J),!v)if(n(u)!==null)v=!0,ee(S);else{var K=n(f);K!==null&&X(j,K.startTime-J)}}function S(J,K){v=!1,b&&(b=!1,w(M),M=-1),x=!0;var W=m;try{for(N(K),p=n(u);p!==null&&(!(p.expirationTime>K)||J&&!D());){var R=p.callback;if(typeof R=="function"){p.callback=null,m=p.priorityLevel;var U=R(p.expirationTime<=K);K=t.unstable_now(),typeof U=="function"?p.callback=U:p===n(u)&&r(u),N(K)}else r(u);p=n(u)}if(p!==null)var B=!0;else{var Q=n(f);Q!==null&&X(j,Q.startTime-K),B=!1}return B}finally{p=null,m=W,x=!1}}var A=!1,O=null,M=-1,z=5,I=-1;function D(){return!(t.unstable_now()-I<z)}function T(){if(O!==null){var J=t.unstable_now();I=J;var K=!0;try{K=O(!0,J)}finally{K?q():(A=!1,O=null)}}else A=!1}var q;if(typeof k=="function")q=function(){k(T)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,G=H.port2;H.port1.onmessage=T,q=function(){G.postMessage(null)}}else q=function(){y(T,0)};function ee(J){O=J,A||(A=!0,q())}function X(J,K){M=y(function(){J(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){v||x||(v=!0,ee(S))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(J){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var W=m;m=K;try{return J()}finally{m=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,K){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var W=m;m=J;try{return K()}finally{m=W}},t.unstable_scheduleCallback=function(J,K,W){var R=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?R+W:R):W=R,J){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=W+U,J={id:h++,callback:K,priorityLevel:J,startTime:W,expirationTime:U,sortIndex:-1},W>R?(J.sortIndex=W,e(f,J),n(u)===null&&J===n(f)&&(b?(w(M),M=-1):b=!0,X(j,W-R))):(J.sortIndex=U,e(u,J),v||x||(v=!0,ee(S))),J},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(J){var K=m;return function(){var W=m;m=K;try{return J.apply(this,arguments)}finally{m=W}}}})(Rm)),Rm}var c1;function QS(){return c1||(c1=1,Pm.exports=XS()),Pm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1;function ZS(){if(d1)return Jr;d1=1;var t=Nh(),e=QS();function n(l){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+l,g=1;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(l,d){o(l,d),o(l+"Capture",d)}function o(l,d){for(i[l]=d,l=0;l<d.length;l++)r.add(d[l])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(l){return u.call(p,l)?!0:u.call(h,l)?!1:f.test(l)?p[l]=!0:(h[l]=!0,!1)}function x(l,d,g,_){if(g!==null&&g.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return _?!1:g!==null?!g.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function v(l,d,g,_){if(d===null||typeof d>"u"||x(l,d,g,_))return!0;if(_)return!1;if(g!==null)switch(g.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function b(l,d,g,_,C,P,V){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=_,this.attributeNamespace=C,this.mustUseProperty=g,this.propertyName=l,this.type=d,this.sanitizeURL=P,this.removeEmptyString=V}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){y[l]=new b(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var d=l[0];y[d]=new b(d,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){y[l]=new b(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){y[l]=new b(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){y[l]=new b(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){y[l]=new b(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){y[l]=new b(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){y[l]=new b(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){y[l]=new b(l,5,!1,l.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function k(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var d=l.replace(w,k);y[d]=new b(d,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var d=l.replace(w,k);y[d]=new b(d,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var d=l.replace(w,k);y[d]=new b(d,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){y[l]=new b(l,1,!1,l.toLowerCase(),null,!1,!1)}),y.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){y[l]=new b(l,1,!1,l.toLowerCase(),null,!0,!0)});function N(l,d,g,_){var C=y.hasOwnProperty(d)?y[d]:null;(C!==null?C.type!==0:_||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(v(d,g,C,_)&&(g=null),_||C===null?m(d)&&(g===null?l.removeAttribute(d):l.setAttribute(d,""+g)):C.mustUseProperty?l[C.propertyName]=g===null?C.type===3?!1:"":g:(d=C.attributeName,_=C.attributeNamespace,g===null?l.removeAttribute(d):(C=C.type,g=C===3||C===4&&g===!0?"":""+g,_?l.setAttributeNS(_,d,g):l.setAttribute(d,g))))}var j=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),A=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),D=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),J=Symbol.iterator;function K(l){return l===null||typeof l!="object"?null:(l=J&&l[J]||l["@@iterator"],typeof l=="function"?l:null)}var W=Object.assign,R;function U(l){if(R===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);R=d&&d[1]||""}return`
`+R+l}var B=!1;function Q(l,d){if(!l||B)return"";B=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Te){var _=Te}Reflect.construct(l,[],d)}else{try{d.call()}catch(Te){_=Te}l.call(d.prototype)}else{try{throw Error()}catch(Te){_=Te}l()}}catch(Te){if(Te&&_&&typeof Te.stack=="string"){for(var C=Te.stack.split(`
`),P=_.stack.split(`
`),V=C.length-1,ie=P.length-1;1<=V&&0<=ie&&C[V]!==P[ie];)ie--;for(;1<=V&&0<=ie;V--,ie--)if(C[V]!==P[ie]){if(V!==1||ie!==1)do if(V--,ie--,0>ie||C[V]!==P[ie]){var ge=`
`+C[V].replace(" at new "," at ");return l.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",l.displayName)),ge}while(1<=V&&0<=ie);break}}}finally{B=!1,Error.prepareStackTrace=g}return(l=l?l.displayName||l.name:"")?U(l):""}function Z(l){switch(l.tag){case 5:return U(l.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return l=Q(l.type,!1),l;case 11:return l=Q(l.type.render,!1),l;case 1:return l=Q(l.type,!0),l;default:return""}}function $(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case O:return"Fragment";case A:return"Portal";case z:return"Profiler";case M:return"StrictMode";case q:return"Suspense";case H:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case D:return(l.displayName||"Context")+".Consumer";case I:return(l._context.displayName||"Context")+".Provider";case T:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case G:return d=l.displayName||null,d!==null?d:$(l.type)||"Memo";case ee:d=l._payload,l=l._init;try{return $(l(d))}catch{}}return null}function ne(l){var d=l.type;switch(l.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=d.render,l=l.displayName||l.name||"",d.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(d);case 8:return d===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function ae(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function ce(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function ye(l){var d=ce(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),_=""+l[d];if(!l.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var C=g.get,P=g.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return C.call(this)},set:function(V){_=""+V,P.call(this,V)}}),Object.defineProperty(l,d,{enumerable:g.enumerable}),{getValue:function(){return _},setValue:function(V){_=""+V},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Be(l){l._valueTracker||(l._valueTracker=ye(l))}function Ue(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var g=d.getValue(),_="";return l&&(_=ce(l)?l.checked?"true":"false":l.value),l=_,l!==g?(d.setValue(l),!0):!1}function it(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function je(l,d){var g=d.checked;return W({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??l._wrapperState.initialChecked})}function dt(l,d){var g=d.defaultValue==null?"":d.defaultValue,_=d.checked!=null?d.checked:d.defaultChecked;g=ae(d.value!=null?d.value:g),l._wrapperState={initialChecked:_,initialValue:g,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function st(l,d){d=d.checked,d!=null&&N(l,"checked",d,!1)}function ft(l,d){st(l,d);var g=ae(d.value),_=d.type;if(g!=null)_==="number"?(g===0&&l.value===""||l.value!=g)&&(l.value=""+g):l.value!==""+g&&(l.value=""+g);else if(_==="submit"||_==="reset"){l.removeAttribute("value");return}d.hasOwnProperty("value")?re(l,d.type,g):d.hasOwnProperty("defaultValue")&&re(l,d.type,ae(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(l.defaultChecked=!!d.defaultChecked)}function Oe(l,d,g){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var _=d.type;if(!(_!=="submit"&&_!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+l._wrapperState.initialValue,g||d===l.value||(l.value=d),l.defaultValue=d}g=l.name,g!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,g!==""&&(l.name=g)}function re(l,d,g){(d!=="number"||it(l.ownerDocument)!==l)&&(g==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+g&&(l.defaultValue=""+g))}var xe=Array.isArray;function we(l,d,g,_){if(l=l.options,d){d={};for(var C=0;C<g.length;C++)d["$"+g[C]]=!0;for(g=0;g<l.length;g++)C=d.hasOwnProperty("$"+l[g].value),l[g].selected!==C&&(l[g].selected=C),C&&_&&(l[g].defaultSelected=!0)}else{for(g=""+ae(g),d=null,C=0;C<l.length;C++){if(l[C].value===g){l[C].selected=!0,_&&(l[C].defaultSelected=!0);return}d!==null||l[C].disabled||(d=l[C])}d!==null&&(d.selected=!0)}}function Se(l,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return W({},d,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function _e(l,d){var g=d.value;if(g==null){if(g=d.children,d=d.defaultValue,g!=null){if(d!=null)throw Error(n(92));if(xe(g)){if(1<g.length)throw Error(n(93));g=g[0]}d=g}d==null&&(d=""),g=d}l._wrapperState={initialValue:ae(g)}}function te(l,d){var g=ae(d.value),_=ae(d.defaultValue);g!=null&&(g=""+g,g!==l.value&&(l.value=g),d.defaultValue==null&&l.defaultValue!==g&&(l.defaultValue=g)),_!=null&&(l.defaultValue=""+_)}function Ne(l){var d=l.textContent;d===l._wrapperState.initialValue&&d!==""&&d!==null&&(l.value=d)}function fe(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(l,d){return l==null||l==="http://www.w3.org/1999/xhtml"?fe(d):l==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Le,Qe=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,_,C){MSApp.execUnsafeLocalFunction(function(){return l(d,g,_,C)})}:l})(function(l,d){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=d;else{for(Le=Le||document.createElement("div"),Le.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Le.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;d.firstChild;)l.appendChild(d.firstChild)}});function qe(l,d){if(d){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=d;return}}l.textContent=d}var et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_t=["Webkit","ms","Moz","O"];Object.keys(et).forEach(function(l){_t.forEach(function(d){d=d+l.charAt(0).toUpperCase()+l.substring(1),et[d]=et[l]})});function Pe(l,d,g){return d==null||typeof d=="boolean"||d===""?"":g||typeof d!="number"||d===0||et.hasOwnProperty(l)&&et[l]?(""+d).trim():d+"px"}function Lt(l,d){l=l.style;for(var g in d)if(d.hasOwnProperty(g)){var _=g.indexOf("--")===0,C=Pe(g,d[g],_);g==="float"&&(g="cssFloat"),_?l.setProperty(g,C):l[g]=C}}var Pt=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dr(l,d){if(d){if(Pt[l]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function On(l,d){if(l.indexOf("-")===-1)return typeof d.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nr=null;function Vt(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var $n=null,kt=null,Kt=null;function Jt(l){if(l=Pc(l)){if(typeof $n!="function")throw Error(n(280));var d=l.stateNode;d&&(d=Au(d),$n(l.stateNode,l.type,d))}}function bn(l){kt?Kt?Kt.push(l):Kt=[l]:kt=l}function yt(){if(kt){var l=kt,d=Kt;if(Kt=kt=null,Jt(l),d)for(l=0;l<d.length;l++)Jt(d[l])}}function en(l,d){return l(d)}function ot(){}var tn=!1;function ln(l,d,g){if(tn)return l(d,g);tn=!0;try{return en(l,d,g)}finally{tn=!1,(kt!==null||Kt!==null)&&(ot(),yt())}}function Rt(l,d){var g=l.stateNode;if(g===null)return null;var _=Au(g);if(_===null)return null;g=_[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(l=l.type,_=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!_;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(n(231,d,typeof g));return g}var qt=!1;if(c)try{var on={};Object.defineProperty(on,"passive",{get:function(){qt=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{qt=!1}function vt(l,d,g,_,C,P,V,ie,ge){var Te=Array.prototype.slice.call(arguments,3);try{d.apply(g,Te)}catch(Ve){this.onError(Ve)}}var gn=!1,Ut=null,Nn=!1,Qt=null,Rn={onError:function(l){gn=!0,Ut=l}};function vr(l,d,g,_,C,P,V,ie,ge){gn=!1,Ut=null,vt.apply(Rn,arguments)}function Mt(l,d,g,_,C,P,V,ie,ge){if(vr.apply(this,arguments),gn){if(gn){var Te=Ut;gn=!1,Ut=null}else throw Error(n(198));Nn||(Nn=!0,Qt=Te)}}function Cr(l){var d=l,g=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(g=d.return),l=d.return;while(l)}return d.tag===3?g:null}function se(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function Fe(l){if(Cr(l)!==l)throw Error(n(188))}function Ke(l){var d=l.alternate;if(!d){if(d=Cr(l),d===null)throw Error(n(188));return d!==l?null:l}for(var g=l,_=d;;){var C=g.return;if(C===null)break;var P=C.alternate;if(P===null){if(_=C.return,_!==null){g=_;continue}break}if(C.child===P.child){for(P=C.child;P;){if(P===g)return Fe(C),l;if(P===_)return Fe(C),d;P=P.sibling}throw Error(n(188))}if(g.return!==_.return)g=C,_=P;else{for(var V=!1,ie=C.child;ie;){if(ie===g){V=!0,g=C,_=P;break}if(ie===_){V=!0,_=C,g=P;break}ie=ie.sibling}if(!V){for(ie=P.child;ie;){if(ie===g){V=!0,g=P,_=C;break}if(ie===_){V=!0,_=P,g=C;break}ie=ie.sibling}if(!V)throw Error(n(189))}}if(g.alternate!==_)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?l:d}function nt(l){return l=Ke(l),l!==null?Ft(l):null}function Ft(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var d=Ft(l);if(d!==null)return d;l=l.sibling}return null}var wn=e.unstable_scheduleCallback,rr=e.unstable_cancelCallback,Is=e.unstable_shouldYield,br=e.unstable_requestPaint,Zt=e.unstable_now,Fs=e.unstable_getCurrentPriorityLevel,zs=e.unstable_ImmediatePriority,to=e.unstable_UserBlockingPriority,Bs=e.unstable_NormalPriority,no=e.unstable_LowPriority,ii=e.unstable_IdlePriority,ai=null,jn=null;function Zn(l){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(ai,l,void 0,(l.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:oi,In=Math.log,wr=Math.LN2;function oi(l){return l>>>=0,l===0?32:31-(In(l)/wr|0)|0}var Jn=64,qs=4194304;function ur(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function bt(l,d){var g=l.pendingLanes;if(g===0)return 0;var _=0,C=l.suspendedLanes,P=l.pingedLanes,V=g&268435455;if(V!==0){var ie=V&~C;ie!==0?_=ur(ie):(P&=V,P!==0&&(_=ur(P)))}else V=g&~C,V!==0?_=ur(V):P!==0&&(_=ur(P));if(_===0)return 0;if(d!==0&&d!==_&&(d&C)===0&&(C=_&-_,P=d&-d,C>=P||C===16&&(P&4194240)!==0))return d;if((_&4)!==0&&(_|=g&16),d=l.entangledLanes,d!==0)for(l=l.entanglements,d&=_;0<d;)g=31-Sn(d),C=1<<g,_|=l[g],d&=~C;return _}function jr(l,d){switch(l){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ir(l,d){for(var g=l.suspendedLanes,_=l.pingedLanes,C=l.expirationTimes,P=l.pendingLanes;0<P;){var V=31-Sn(P),ie=1<<V,ge=C[V];ge===-1?((ie&g)===0||(ie&_)!==0)&&(C[V]=jr(ie,d)):ge<=d&&(l.expiredLanes|=ie),P&=~ie}}function Yn(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function oe(){var l=Jn;return Jn<<=1,(Jn&4194240)===0&&(Jn=64),l}function be(l){for(var d=[],g=0;31>g;g++)d.push(l);return d}function Ce(l,d,g){l.pendingLanes|=d,d!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,d=31-Sn(d),l[d]=g}function le(l,d){var g=l.pendingLanes&~d;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=d,l.mutableReadLanes&=d,l.entangledLanes&=d,d=l.entanglements;var _=l.eventTimes;for(l=l.expirationTimes;0<g;){var C=31-Sn(g),P=1<<C;d[C]=0,_[C]=-1,l[C]=-1,g&=~P}}function ke(l,d){var g=l.entangledLanes|=d;for(l=l.entanglements;g;){var _=31-Sn(g),C=1<<_;C&d|l[_]&d&&(l[_]|=d),g&=~C}}var me=0;function Ge(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var wt,cn,Gt,Ar,Us,ro=!1,rl=[],Er=null,ps=null,Ws=null,sa=new Map,gt=new Map,xn=[],sl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ws(l,d){switch(l){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":sa.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":gt.delete(d.pointerId)}}function Si(l,d,g,_,C,P){return l===null||l.nativeEvent!==P?(l={blockedOn:d,domEventName:g,eventSystemFlags:_,nativeEvent:P,targetContainers:[C]},d!==null&&(d=Pc(d),d!==null&&cn(d)),l):(l.eventSystemFlags|=_,d=l.targetContainers,C!==null&&d.indexOf(C)===-1&&d.push(C),l)}function ap(l,d,g,_,C){switch(d){case"focusin":return Er=Si(Er,l,d,g,_,C),!0;case"dragenter":return ps=Si(ps,l,d,g,_,C),!0;case"mouseover":return Ws=Si(Ws,l,d,g,_,C),!0;case"pointerover":var P=C.pointerId;return sa.set(P,Si(sa.get(P)||null,l,d,g,_,C)),!0;case"gotpointercapture":return P=C.pointerId,gt.set(P,Si(gt.get(P)||null,l,d,g,_,C)),!0}return!1}function Ci(l){var d=ho(l.target);if(d!==null){var g=Cr(d);if(g!==null){if(d=g.tag,d===13){if(d=se(g),d!==null){l.blockedOn=d,Us(l.priority,function(){Gt(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function il(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var g=_c(l.domEventName,l.eventSystemFlags,d[0],l.nativeEvent);if(g===null){g=l.nativeEvent;var _=new g.constructor(g.type,g);nr=_,g.target.dispatchEvent(_),nr=null}else return d=Pc(g),d!==null&&cn(d),l.blockedOn=g,!1;d.shift()}return!0}function ou(l,d,g){il(l)&&g.delete(d)}function sr(){ro=!1,Er!==null&&il(Er)&&(Er=null),ps!==null&&il(ps)&&(ps=null),Ws!==null&&il(Ws)&&(Ws=null),sa.forEach(ou),gt.forEach(ou)}function so(l,d){l.blockedOn===d&&(l.blockedOn=null,ro||(ro=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sr)))}function ia(l){function d(C){return so(C,l)}if(0<rl.length){so(rl[0],l);for(var g=1;g<rl.length;g++){var _=rl[g];_.blockedOn===l&&(_.blockedOn=null)}}for(Er!==null&&so(Er,l),ps!==null&&so(ps,l),Ws!==null&&so(Ws,l),sa.forEach(d),gt.forEach(d),g=0;g<xn.length;g++)_=xn[g],_.blockedOn===l&&(_.blockedOn=null);for(;0<xn.length&&(g=xn[0],g.blockedOn===null);)Ci(g),g.blockedOn===null&&xn.shift()}var Hs=j.ReactCurrentBatchConfig,io=!0;function li(l,d,g,_){var C=me,P=Hs.transition;Hs.transition=null;try{me=1,ao(l,d,g,_)}finally{me=C,Hs.transition=P}}function lu(l,d,g,_){var C=me,P=Hs.transition;Hs.transition=null;try{me=4,ao(l,d,g,_)}finally{me=C,Hs.transition=P}}function ao(l,d,g,_){if(io){var C=_c(l,d,g,_);if(C===null)wp(l,d,_,ms,g),ws(l,_);else if(ap(C,l,d,g,_))_.stopPropagation();else if(ws(l,_),d&4&&-1<sl.indexOf(l)){for(;C!==null;){var P=Pc(C);if(P!==null&&wt(P),P=_c(l,d,g,_),P===null&&wp(l,d,_,ms,g),P===C)break;C=P}C!==null&&_.stopPropagation()}else wp(l,d,_,null,g)}}var ms=null;function _c(l,d,g,_){if(ms=null,l=Vt(_),l=ho(l),l!==null)if(d=Cr(l),d===null)l=null;else if(g=d.tag,g===13){if(l=se(d),l!==null)return l;l=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null);return ms=l,null}function ci(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fs()){case zs:return 1;case to:return 4;case Bs:case no:return 16;case ii:return 536870912;default:return 16}default:return 16}}var Yr=null,Ai=null,al=null;function cu(){if(al)return al;var l,d=Ai,g=d.length,_,C="value"in Yr?Yr.value:Yr.textContent,P=C.length;for(l=0;l<g&&d[l]===C[l];l++);var V=g-l;for(_=1;_<=V&&d[g-_]===C[P-_];_++);return al=C.slice(l,1<_?1-_:void 0)}function ol(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function ll(){return!0}function du(){return!1}function Fr(l){function d(g,_,C,P,V){this._reactName=g,this._targetInst=C,this.type=_,this.nativeEvent=P,this.target=V,this.currentTarget=null;for(var ie in l)l.hasOwnProperty(ie)&&(g=l[ie],this[ie]=g?g(P):P[ie]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?ll:du,this.isPropagationStopped=du,this}return W(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),d}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cl=Fr(aa),oo=W({},aa,{view:0,detail:0}),dl=Fr(oo),uu,oa,lo,di=W({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fl,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==lo&&(lo&&l.type==="mousemove"?(uu=l.screenX-lo.screenX,oa=l.screenY-lo.screenY):oa=uu=0,lo=l),uu)},movementY:function(l){return"movementY"in l?l.movementY:oa}}),ul=Fr(di),Vs=W({},di,{dataTransfer:0}),co=Fr(Vs),la=W({},oo,{relatedTarget:0}),Ei=Fr(la),op=W({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),lp=Fr(op),cp=W({},aa,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),dp=Fr(cp),uo=W({},aa,{data:0}),Wt=Fr(uo),kc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pu(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=hu[l])?!!d[l]:!1}function fl(){return pu}var mu=W({},oo,{key:function(l){if(l.key){var d=kc[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=ol(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?fu[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fl,charCode:function(l){return l.type==="keypress"?ol(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?ol(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),gu=Fr(mu),xu=W({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nc=Fr(xu),yu=W({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fl}),vu=Fr(yu),bu=W({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),E=Fr(bu),Y=W({},di,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),de=Fr(Y),Me=[9,13,27,32],he=c&&"CompositionEvent"in window,He=null;c&&"documentMode"in document&&(He=document.documentMode);var $e=c&&"TextEvent"in window&&!He,Je=c&&(!he||He&&8<He&&11>=He),Ye=" ",rt=!1;function pt(l,d){switch(l){case"keyup":return Me.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nn(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var _r=!1;function Sc(l,d){switch(l){case"compositionend":return nn(d);case"keypress":return d.which!==32?null:(rt=!0,Ye);case"textInput":return l=d.data,l===Ye&&rt?null:l;default:return null}}function fo(l,d){if(_r)return l==="compositionend"||!he&&pt(l,d)?(l=cu(),al=Ai=Yr=null,_r=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Je&&d.locale!=="ko"?null:d.data;default:return null}}var up={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ev(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!up[l.type]:d==="textarea"}function tv(l,d,g,_){bn(_),d=Nu(d,"onChange"),0<d.length&&(g=new cl("onChange","change",null,g,_),l.push({event:g,listeners:d}))}var Cc=null,Ac=null;function W4(l){vv(l,0)}function wu(l){var d=xl(l);if(Ue(d))return l}function H4(l,d){if(l==="change")return d}var nv=!1;if(c){var fp;if(c){var hp="oninput"in document;if(!hp){var rv=document.createElement("div");rv.setAttribute("oninput","return;"),hp=typeof rv.oninput=="function"}fp=hp}else fp=!1;nv=fp&&(!document.documentMode||9<document.documentMode)}function sv(){Cc&&(Cc.detachEvent("onpropertychange",iv),Ac=Cc=null)}function iv(l){if(l.propertyName==="value"&&wu(Ac)){var d=[];tv(d,Ac,l,Vt(l)),ln(W4,d)}}function V4(l,d,g){l==="focusin"?(sv(),Cc=d,Ac=g,Cc.attachEvent("onpropertychange",iv)):l==="focusout"&&sv()}function $4(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return wu(Ac)}function Y4(l,d){if(l==="click")return wu(d)}function K4(l,d){if(l==="input"||l==="change")return wu(d)}function G4(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var $s=typeof Object.is=="function"?Object.is:G4;function Ec(l,d){if($s(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var g=Object.keys(l),_=Object.keys(d);if(g.length!==_.length)return!1;for(_=0;_<g.length;_++){var C=g[_];if(!u.call(d,C)||!$s(l[C],d[C]))return!1}return!0}function av(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function ov(l,d){var g=av(l);l=0;for(var _;g;){if(g.nodeType===3){if(_=l+g.textContent.length,l<=d&&_>=d)return{node:g,offset:d-l};l=_}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=av(g)}}function lv(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?lv(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function cv(){for(var l=window,d=it();d instanceof l.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)l=d.contentWindow;else break;d=it(l.document)}return d}function pp(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}function X4(l){var d=cv(),g=l.focusedElem,_=l.selectionRange;if(d!==g&&g&&g.ownerDocument&&lv(g.ownerDocument.documentElement,g)){if(_!==null&&pp(g)){if(d=_.start,l=_.end,l===void 0&&(l=d),"selectionStart"in g)g.selectionStart=d,g.selectionEnd=Math.min(l,g.value.length);else if(l=(d=g.ownerDocument||document)&&d.defaultView||window,l.getSelection){l=l.getSelection();var C=g.textContent.length,P=Math.min(_.start,C);_=_.end===void 0?P:Math.min(_.end,C),!l.extend&&P>_&&(C=_,_=P,P=C),C=ov(g,P);var V=ov(g,_);C&&V&&(l.rangeCount!==1||l.anchorNode!==C.node||l.anchorOffset!==C.offset||l.focusNode!==V.node||l.focusOffset!==V.offset)&&(d=d.createRange(),d.setStart(C.node,C.offset),l.removeAllRanges(),P>_?(l.addRange(d),l.extend(V.node,V.offset)):(d.setEnd(V.node,V.offset),l.addRange(d)))}}for(d=[],l=g;l=l.parentNode;)l.nodeType===1&&d.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<d.length;g++)l=d[g],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var Q4=c&&"documentMode"in document&&11>=document.documentMode,hl=null,mp=null,Oc=null,gp=!1;function dv(l,d,g){var _=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;gp||hl==null||hl!==it(_)||(_=hl,"selectionStart"in _&&pp(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Oc&&Ec(Oc,_)||(Oc=_,_=Nu(mp,"onSelect"),0<_.length&&(d=new cl("onSelect","select",null,d,g),l.push({event:d,listeners:_}),d.target=hl)))}function ju(l,d){var g={};return g[l.toLowerCase()]=d.toLowerCase(),g["Webkit"+l]="webkit"+d,g["Moz"+l]="moz"+d,g}var pl={animationend:ju("Animation","AnimationEnd"),animationiteration:ju("Animation","AnimationIteration"),animationstart:ju("Animation","AnimationStart"),transitionend:ju("Transition","TransitionEnd")},xp={},uv={};c&&(uv=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function _u(l){if(xp[l])return xp[l];if(!pl[l])return l;var d=pl[l],g;for(g in d)if(d.hasOwnProperty(g)&&g in uv)return xp[l]=d[g];return l}var fv=_u("animationend"),hv=_u("animationiteration"),pv=_u("animationstart"),mv=_u("transitionend"),gv=new Map,xv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ca(l,d){gv.set(l,d),a(d,[l])}for(var yp=0;yp<xv.length;yp++){var vp=xv[yp],Z4=vp.toLowerCase(),J4=vp[0].toUpperCase()+vp.slice(1);ca(Z4,"on"+J4)}ca(fv,"onAnimationEnd"),ca(hv,"onAnimationIteration"),ca(pv,"onAnimationStart"),ca("dblclick","onDoubleClick"),ca("focusin","onFocus"),ca("focusout","onBlur"),ca(mv,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lc));function yv(l,d,g){var _=l.type||"unknown-event";l.currentTarget=g,Mt(_,d,void 0,l),l.currentTarget=null}function vv(l,d){d=(d&4)!==0;for(var g=0;g<l.length;g++){var _=l[g],C=_.event;_=_.listeners;e:{var P=void 0;if(d)for(var V=_.length-1;0<=V;V--){var ie=_[V],ge=ie.instance,Te=ie.currentTarget;if(ie=ie.listener,ge!==P&&C.isPropagationStopped())break e;yv(C,ie,Te),P=ge}else for(V=0;V<_.length;V++){if(ie=_[V],ge=ie.instance,Te=ie.currentTarget,ie=ie.listener,ge!==P&&C.isPropagationStopped())break e;yv(C,ie,Te),P=ge}}}if(Nn)throw l=Qt,Nn=!1,Qt=null,l}function Cn(l,d){var g=d[Cp];g===void 0&&(g=d[Cp]=new Set);var _=l+"__bubble";g.has(_)||(bv(d,l,2,!1),g.add(_))}function bp(l,d,g){var _=0;d&&(_|=4),bv(g,l,_,d)}var ku="_reactListening"+Math.random().toString(36).slice(2);function Mc(l){if(!l[ku]){l[ku]=!0,r.forEach(function(g){g!=="selectionchange"&&(eS.has(g)||bp(g,!1,l),bp(g,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[ku]||(d[ku]=!0,bp("selectionchange",!1,d))}}function bv(l,d,g,_){switch(ci(d)){case 1:var C=li;break;case 4:C=lu;break;default:C=ao}g=C.bind(null,d,g,l),C=void 0,!qt||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(C=!0),_?C!==void 0?l.addEventListener(d,g,{capture:!0,passive:C}):l.addEventListener(d,g,!0):C!==void 0?l.addEventListener(d,g,{passive:C}):l.addEventListener(d,g,!1)}function wp(l,d,g,_,C){var P=_;if((d&1)===0&&(d&2)===0&&_!==null)e:for(;;){if(_===null)return;var V=_.tag;if(V===3||V===4){var ie=_.stateNode.containerInfo;if(ie===C||ie.nodeType===8&&ie.parentNode===C)break;if(V===4)for(V=_.return;V!==null;){var ge=V.tag;if((ge===3||ge===4)&&(ge=V.stateNode.containerInfo,ge===C||ge.nodeType===8&&ge.parentNode===C))return;V=V.return}for(;ie!==null;){if(V=ho(ie),V===null)return;if(ge=V.tag,ge===5||ge===6){_=P=V;continue e}ie=ie.parentNode}}_=_.return}ln(function(){var Te=P,Ve=Vt(g),Xe=[];e:{var We=gv.get(l);if(We!==void 0){var lt=cl,ht=l;switch(l){case"keypress":if(ol(g)===0)break e;case"keydown":case"keyup":lt=gu;break;case"focusin":ht="focus",lt=Ei;break;case"focusout":ht="blur",lt=Ei;break;case"beforeblur":case"afterblur":lt=Ei;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=co;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=vu;break;case fv:case hv:case pv:lt=lp;break;case mv:lt=E;break;case"scroll":lt=dl;break;case"wheel":lt=de;break;case"copy":case"cut":case"paste":lt=dp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Nc}var mt=(d&4)!==0,Kn=!mt&&l==="scroll",Ae=mt?We!==null?We+"Capture":null:We;mt=[];for(var ve=Te,Ee;ve!==null;){Ee=ve;var Ze=Ee.stateNode;if(Ee.tag===5&&Ze!==null&&(Ee=Ze,Ae!==null&&(Ze=Rt(ve,Ae),Ze!=null&&mt.push(Tc(ve,Ze,Ee)))),Kn)break;ve=ve.return}0<mt.length&&(We=new lt(We,ht,null,g,Ve),Xe.push({event:We,listeners:mt}))}}if((d&7)===0){e:{if(We=l==="mouseover"||l==="pointerover",lt=l==="mouseout"||l==="pointerout",We&&g!==nr&&(ht=g.relatedTarget||g.fromElement)&&(ho(ht)||ht[Oi]))break e;if((lt||We)&&(We=Ve.window===Ve?Ve:(We=Ve.ownerDocument)?We.defaultView||We.parentWindow:window,lt?(ht=g.relatedTarget||g.toElement,lt=Te,ht=ht?ho(ht):null,ht!==null&&(Kn=Cr(ht),ht!==Kn||ht.tag!==5&&ht.tag!==6)&&(ht=null)):(lt=null,ht=Te),lt!==ht)){if(mt=ul,Ze="onMouseLeave",Ae="onMouseEnter",ve="mouse",(l==="pointerout"||l==="pointerover")&&(mt=Nc,Ze="onPointerLeave",Ae="onPointerEnter",ve="pointer"),Kn=lt==null?We:xl(lt),Ee=ht==null?We:xl(ht),We=new mt(Ze,ve+"leave",lt,g,Ve),We.target=Kn,We.relatedTarget=Ee,Ze=null,ho(Ve)===Te&&(mt=new mt(Ae,ve+"enter",ht,g,Ve),mt.target=Ee,mt.relatedTarget=Kn,Ze=mt),Kn=Ze,lt&&ht)t:{for(mt=lt,Ae=ht,ve=0,Ee=mt;Ee;Ee=ml(Ee))ve++;for(Ee=0,Ze=Ae;Ze;Ze=ml(Ze))Ee++;for(;0<ve-Ee;)mt=ml(mt),ve--;for(;0<Ee-ve;)Ae=ml(Ae),Ee--;for(;ve--;){if(mt===Ae||Ae!==null&&mt===Ae.alternate)break t;mt=ml(mt),Ae=ml(Ae)}mt=null}else mt=null;lt!==null&&wv(Xe,We,lt,mt,!1),ht!==null&&Kn!==null&&wv(Xe,Kn,ht,mt,!0)}}e:{if(We=Te?xl(Te):window,lt=We.nodeName&&We.nodeName.toLowerCase(),lt==="select"||lt==="input"&&We.type==="file")var xt=H4;else if(ev(We))if(nv)xt=K4;else{xt=$4;var At=V4}else(lt=We.nodeName)&&lt.toLowerCase()==="input"&&(We.type==="checkbox"||We.type==="radio")&&(xt=Y4);if(xt&&(xt=xt(l,Te))){tv(Xe,xt,g,Ve);break e}At&&At(l,We,Te),l==="focusout"&&(At=We._wrapperState)&&At.controlled&&We.type==="number"&&re(We,"number",We.value)}switch(At=Te?xl(Te):window,l){case"focusin":(ev(At)||At.contentEditable==="true")&&(hl=At,mp=Te,Oc=null);break;case"focusout":Oc=mp=hl=null;break;case"mousedown":gp=!0;break;case"contextmenu":case"mouseup":case"dragend":gp=!1,dv(Xe,g,Ve);break;case"selectionchange":if(Q4)break;case"keydown":case"keyup":dv(Xe,g,Ve)}var Et;if(he)e:{switch(l){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else _r?pt(l,g)&&(Tt="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(Tt="onCompositionStart");Tt&&(Je&&g.locale!=="ko"&&(_r||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&_r&&(Et=cu()):(Yr=Ve,Ai="value"in Yr?Yr.value:Yr.textContent,_r=!0)),At=Nu(Te,Tt),0<At.length&&(Tt=new Wt(Tt,l,null,g,Ve),Xe.push({event:Tt,listeners:At}),Et?Tt.data=Et:(Et=nn(g),Et!==null&&(Tt.data=Et)))),(Et=$e?Sc(l,g):fo(l,g))&&(Te=Nu(Te,"onBeforeInput"),0<Te.length&&(Ve=new Wt("onBeforeInput","beforeinput",null,g,Ve),Xe.push({event:Ve,listeners:Te}),Ve.data=Et))}vv(Xe,d)})}function Tc(l,d,g){return{instance:l,listener:d,currentTarget:g}}function Nu(l,d){for(var g=d+"Capture",_=[];l!==null;){var C=l,P=C.stateNode;C.tag===5&&P!==null&&(C=P,P=Rt(l,g),P!=null&&_.unshift(Tc(l,P,C)),P=Rt(l,d),P!=null&&_.push(Tc(l,P,C))),l=l.return}return _}function ml(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function wv(l,d,g,_,C){for(var P=d._reactName,V=[];g!==null&&g!==_;){var ie=g,ge=ie.alternate,Te=ie.stateNode;if(ge!==null&&ge===_)break;ie.tag===5&&Te!==null&&(ie=Te,C?(ge=Rt(g,P),ge!=null&&V.unshift(Tc(g,ge,ie))):C||(ge=Rt(g,P),ge!=null&&V.push(Tc(g,ge,ie)))),g=g.return}V.length!==0&&l.push({event:d,listeners:V})}var tS=/\r\n?/g,nS=/\u0000|\uFFFD/g;function jv(l){return(typeof l=="string"?l:""+l).replace(tS,`
`).replace(nS,"")}function Su(l,d,g){if(d=jv(d),jv(l)!==d&&g)throw Error(n(425))}function Cu(){}var jp=null,_p=null;function kp(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Np=typeof setTimeout=="function"?setTimeout:void 0,rS=typeof clearTimeout=="function"?clearTimeout:void 0,_v=typeof Promise=="function"?Promise:void 0,sS=typeof queueMicrotask=="function"?queueMicrotask:typeof _v<"u"?function(l){return _v.resolve(null).then(l).catch(iS)}:Np;function iS(l){setTimeout(function(){throw l})}function Sp(l,d){var g=d,_=0;do{var C=g.nextSibling;if(l.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"){if(_===0){l.removeChild(C),ia(d);return}_--}else g!=="$"&&g!=="$?"&&g!=="$!"||_++;g=C}while(g);ia(d)}function da(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return l}function kv(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return l;d--}else g==="/$"&&d++}l=l.previousSibling}return null}var gl=Math.random().toString(36).slice(2),ui="__reactFiber$"+gl,Dc="__reactProps$"+gl,Oi="__reactContainer$"+gl,Cp="__reactEvents$"+gl,aS="__reactListeners$"+gl,oS="__reactHandles$"+gl;function ho(l){var d=l[ui];if(d)return d;for(var g=l.parentNode;g;){if(d=g[Oi]||g[ui]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(l=kv(l);l!==null;){if(g=l[ui])return g;l=kv(l)}return d}l=g,g=l.parentNode}return null}function Pc(l){return l=l[ui]||l[Oi],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function xl(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function Au(l){return l[Dc]||null}var Ap=[],yl=-1;function ua(l){return{current:l}}function An(l){0>yl||(l.current=Ap[yl],Ap[yl]=null,yl--)}function kn(l,d){yl++,Ap[yl]=l.current,l.current=d}var fa={},Or=ua(fa),Kr=ua(!1),po=fa;function vl(l,d){var g=l.type.contextTypes;if(!g)return fa;var _=l.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===d)return _.__reactInternalMemoizedMaskedChildContext;var C={},P;for(P in g)C[P]=d[P];return _&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=d,l.__reactInternalMemoizedMaskedChildContext=C),C}function Gr(l){return l=l.childContextTypes,l!=null}function Eu(){An(Kr),An(Or)}function Nv(l,d,g){if(Or.current!==fa)throw Error(n(168));kn(Or,d),kn(Kr,g)}function Sv(l,d,g){var _=l.stateNode;if(d=d.childContextTypes,typeof _.getChildContext!="function")return g;_=_.getChildContext();for(var C in _)if(!(C in d))throw Error(n(108,ne(l)||"Unknown",C));return W({},g,_)}function Ou(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||fa,po=Or.current,kn(Or,l),kn(Kr,Kr.current),!0}function Cv(l,d,g){var _=l.stateNode;if(!_)throw Error(n(169));g?(l=Sv(l,d,po),_.__reactInternalMemoizedMergedChildContext=l,An(Kr),An(Or),kn(Or,l)):An(Kr),kn(Kr,g)}var Li=null,Lu=!1,Ep=!1;function Av(l){Li===null?Li=[l]:Li.push(l)}function lS(l){Lu=!0,Av(l)}function ha(){if(!Ep&&Li!==null){Ep=!0;var l=0,d=me;try{var g=Li;for(me=1;l<g.length;l++){var _=g[l];do _=_(!0);while(_!==null)}Li=null,Lu=!1}catch(C){throw Li!==null&&(Li=Li.slice(l+1)),wn(zs,ha),C}finally{me=d,Ep=!1}}return null}var bl=[],wl=0,Mu=null,Tu=0,js=[],_s=0,mo=null,Mi=1,Ti="";function go(l,d){bl[wl++]=Tu,bl[wl++]=Mu,Mu=l,Tu=d}function Ev(l,d,g){js[_s++]=Mi,js[_s++]=Ti,js[_s++]=mo,mo=l;var _=Mi;l=Ti;var C=32-Sn(_)-1;_&=~(1<<C),g+=1;var P=32-Sn(d)+C;if(30<P){var V=C-C%5;P=(_&(1<<V)-1).toString(32),_>>=V,C-=V,Mi=1<<32-Sn(d)+C|g<<C|_,Ti=P+l}else Mi=1<<P|g<<C|_,Ti=l}function Op(l){l.return!==null&&(go(l,1),Ev(l,1,0))}function Lp(l){for(;l===Mu;)Mu=bl[--wl],bl[wl]=null,Tu=bl[--wl],bl[wl]=null;for(;l===mo;)mo=js[--_s],js[_s]=null,Ti=js[--_s],js[_s]=null,Mi=js[--_s],js[_s]=null}var gs=null,xs=null,Ln=!1,Ys=null;function Ov(l,d){var g=Cs(5,null,null,0);g.elementType="DELETED",g.stateNode=d,g.return=l,d=l.deletions,d===null?(l.deletions=[g],l.flags|=16):d.push(g)}function Lv(l,d){switch(l.tag){case 5:var g=l.type;return d=d.nodeType!==1||g.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(l.stateNode=d,gs=l,xs=da(d.firstChild),!0):!1;case 6:return d=l.pendingProps===""||d.nodeType!==3?null:d,d!==null?(l.stateNode=d,gs=l,xs=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(g=mo!==null?{id:Mi,overflow:Ti}:null,l.memoizedState={dehydrated:d,treeContext:g,retryLane:1073741824},g=Cs(18,null,null,0),g.stateNode=d,g.return=l,l.child=g,gs=l,xs=null,!0):!1;default:return!1}}function Mp(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Tp(l){if(Ln){var d=xs;if(d){var g=d;if(!Lv(l,d)){if(Mp(l))throw Error(n(418));d=da(g.nextSibling);var _=gs;d&&Lv(l,d)?Ov(_,g):(l.flags=l.flags&-4097|2,Ln=!1,gs=l)}}else{if(Mp(l))throw Error(n(418));l.flags=l.flags&-4097|2,Ln=!1,gs=l}}}function Mv(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;gs=l}function Du(l){if(l!==gs)return!1;if(!Ln)return Mv(l),Ln=!0,!1;var d;if((d=l.tag!==3)&&!(d=l.tag!==5)&&(d=l.type,d=d!=="head"&&d!=="body"&&!kp(l.type,l.memoizedProps)),d&&(d=xs)){if(Mp(l))throw Tv(),Error(n(418));for(;d;)Ov(l,d),d=da(d.nextSibling)}if(Mv(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8){var g=l.data;if(g==="/$"){if(d===0){xs=da(l.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++}l=l.nextSibling}xs=null}}else xs=gs?da(l.stateNode.nextSibling):null;return!0}function Tv(){for(var l=xs;l;)l=da(l.nextSibling)}function jl(){xs=gs=null,Ln=!1}function Dp(l){Ys===null?Ys=[l]:Ys.push(l)}var cS=j.ReactCurrentBatchConfig;function Rc(l,d,g){if(l=g.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(n(309));var _=g.stateNode}if(!_)throw Error(n(147,l));var C=_,P=""+l;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===P?d.ref:(d=function(V){var ie=C.refs;V===null?delete ie[P]:ie[P]=V},d._stringRef=P,d)}if(typeof l!="string")throw Error(n(284));if(!g._owner)throw Error(n(290,l))}return l}function Pu(l,d){throw l=Object.prototype.toString.call(d),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l))}function Dv(l){var d=l._init;return d(l._payload)}function Pv(l){function d(Ae,ve){if(l){var Ee=Ae.deletions;Ee===null?(Ae.deletions=[ve],Ae.flags|=16):Ee.push(ve)}}function g(Ae,ve){if(!l)return null;for(;ve!==null;)d(Ae,ve),ve=ve.sibling;return null}function _(Ae,ve){for(Ae=new Map;ve!==null;)ve.key!==null?Ae.set(ve.key,ve):Ae.set(ve.index,ve),ve=ve.sibling;return Ae}function C(Ae,ve){return Ae=wa(Ae,ve),Ae.index=0,Ae.sibling=null,Ae}function P(Ae,ve,Ee){return Ae.index=Ee,l?(Ee=Ae.alternate,Ee!==null?(Ee=Ee.index,Ee<ve?(Ae.flags|=2,ve):Ee):(Ae.flags|=2,ve)):(Ae.flags|=1048576,ve)}function V(Ae){return l&&Ae.alternate===null&&(Ae.flags|=2),Ae}function ie(Ae,ve,Ee,Ze){return ve===null||ve.tag!==6?(ve=Nm(Ee,Ae.mode,Ze),ve.return=Ae,ve):(ve=C(ve,Ee),ve.return=Ae,ve)}function ge(Ae,ve,Ee,Ze){var xt=Ee.type;return xt===O?Ve(Ae,ve,Ee.props.children,Ze,Ee.key):ve!==null&&(ve.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===ee&&Dv(xt)===ve.type)?(Ze=C(ve,Ee.props),Ze.ref=Rc(Ae,ve,Ee),Ze.return=Ae,Ze):(Ze=af(Ee.type,Ee.key,Ee.props,null,Ae.mode,Ze),Ze.ref=Rc(Ae,ve,Ee),Ze.return=Ae,Ze)}function Te(Ae,ve,Ee,Ze){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Ee.containerInfo||ve.stateNode.implementation!==Ee.implementation?(ve=Sm(Ee,Ae.mode,Ze),ve.return=Ae,ve):(ve=C(ve,Ee.children||[]),ve.return=Ae,ve)}function Ve(Ae,ve,Ee,Ze,xt){return ve===null||ve.tag!==7?(ve=ko(Ee,Ae.mode,Ze,xt),ve.return=Ae,ve):(ve=C(ve,Ee),ve.return=Ae,ve)}function Xe(Ae,ve,Ee){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ve=Nm(""+ve,Ae.mode,Ee),ve.return=Ae,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case S:return Ee=af(ve.type,ve.key,ve.props,null,Ae.mode,Ee),Ee.ref=Rc(Ae,null,ve),Ee.return=Ae,Ee;case A:return ve=Sm(ve,Ae.mode,Ee),ve.return=Ae,ve;case ee:var Ze=ve._init;return Xe(Ae,Ze(ve._payload),Ee)}if(xe(ve)||K(ve))return ve=ko(ve,Ae.mode,Ee,null),ve.return=Ae,ve;Pu(Ae,ve)}return null}function We(Ae,ve,Ee,Ze){var xt=ve!==null?ve.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return xt!==null?null:ie(Ae,ve,""+Ee,Ze);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case S:return Ee.key===xt?ge(Ae,ve,Ee,Ze):null;case A:return Ee.key===xt?Te(Ae,ve,Ee,Ze):null;case ee:return xt=Ee._init,We(Ae,ve,xt(Ee._payload),Ze)}if(xe(Ee)||K(Ee))return xt!==null?null:Ve(Ae,ve,Ee,Ze,null);Pu(Ae,Ee)}return null}function lt(Ae,ve,Ee,Ze,xt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return Ae=Ae.get(Ee)||null,ie(ve,Ae,""+Ze,xt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case S:return Ae=Ae.get(Ze.key===null?Ee:Ze.key)||null,ge(ve,Ae,Ze,xt);case A:return Ae=Ae.get(Ze.key===null?Ee:Ze.key)||null,Te(ve,Ae,Ze,xt);case ee:var At=Ze._init;return lt(Ae,ve,Ee,At(Ze._payload),xt)}if(xe(Ze)||K(Ze))return Ae=Ae.get(Ee)||null,Ve(ve,Ae,Ze,xt,null);Pu(ve,Ze)}return null}function ht(Ae,ve,Ee,Ze){for(var xt=null,At=null,Et=ve,Tt=ve=0,pr=null;Et!==null&&Tt<Ee.length;Tt++){Et.index>Tt?(pr=Et,Et=null):pr=Et.sibling;var un=We(Ae,Et,Ee[Tt],Ze);if(un===null){Et===null&&(Et=pr);break}l&&Et&&un.alternate===null&&d(Ae,Et),ve=P(un,ve,Tt),At===null?xt=un:At.sibling=un,At=un,Et=pr}if(Tt===Ee.length)return g(Ae,Et),Ln&&go(Ae,Tt),xt;if(Et===null){for(;Tt<Ee.length;Tt++)Et=Xe(Ae,Ee[Tt],Ze),Et!==null&&(ve=P(Et,ve,Tt),At===null?xt=Et:At.sibling=Et,At=Et);return Ln&&go(Ae,Tt),xt}for(Et=_(Ae,Et);Tt<Ee.length;Tt++)pr=lt(Et,Ae,Tt,Ee[Tt],Ze),pr!==null&&(l&&pr.alternate!==null&&Et.delete(pr.key===null?Tt:pr.key),ve=P(pr,ve,Tt),At===null?xt=pr:At.sibling=pr,At=pr);return l&&Et.forEach(function(ja){return d(Ae,ja)}),Ln&&go(Ae,Tt),xt}function mt(Ae,ve,Ee,Ze){var xt=K(Ee);if(typeof xt!="function")throw Error(n(150));if(Ee=xt.call(Ee),Ee==null)throw Error(n(151));for(var At=xt=null,Et=ve,Tt=ve=0,pr=null,un=Ee.next();Et!==null&&!un.done;Tt++,un=Ee.next()){Et.index>Tt?(pr=Et,Et=null):pr=Et.sibling;var ja=We(Ae,Et,un.value,Ze);if(ja===null){Et===null&&(Et=pr);break}l&&Et&&ja.alternate===null&&d(Ae,Et),ve=P(ja,ve,Tt),At===null?xt=ja:At.sibling=ja,At=ja,Et=pr}if(un.done)return g(Ae,Et),Ln&&go(Ae,Tt),xt;if(Et===null){for(;!un.done;Tt++,un=Ee.next())un=Xe(Ae,un.value,Ze),un!==null&&(ve=P(un,ve,Tt),At===null?xt=un:At.sibling=un,At=un);return Ln&&go(Ae,Tt),xt}for(Et=_(Ae,Et);!un.done;Tt++,un=Ee.next())un=lt(Et,Ae,Tt,un.value,Ze),un!==null&&(l&&un.alternate!==null&&Et.delete(un.key===null?Tt:un.key),ve=P(un,ve,Tt),At===null?xt=un:At.sibling=un,At=un);return l&&Et.forEach(function(US){return d(Ae,US)}),Ln&&go(Ae,Tt),xt}function Kn(Ae,ve,Ee,Ze){if(typeof Ee=="object"&&Ee!==null&&Ee.type===O&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case S:e:{for(var xt=Ee.key,At=ve;At!==null;){if(At.key===xt){if(xt=Ee.type,xt===O){if(At.tag===7){g(Ae,At.sibling),ve=C(At,Ee.props.children),ve.return=Ae,Ae=ve;break e}}else if(At.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===ee&&Dv(xt)===At.type){g(Ae,At.sibling),ve=C(At,Ee.props),ve.ref=Rc(Ae,At,Ee),ve.return=Ae,Ae=ve;break e}g(Ae,At);break}else d(Ae,At);At=At.sibling}Ee.type===O?(ve=ko(Ee.props.children,Ae.mode,Ze,Ee.key),ve.return=Ae,Ae=ve):(Ze=af(Ee.type,Ee.key,Ee.props,null,Ae.mode,Ze),Ze.ref=Rc(Ae,ve,Ee),Ze.return=Ae,Ae=Ze)}return V(Ae);case A:e:{for(At=Ee.key;ve!==null;){if(ve.key===At)if(ve.tag===4&&ve.stateNode.containerInfo===Ee.containerInfo&&ve.stateNode.implementation===Ee.implementation){g(Ae,ve.sibling),ve=C(ve,Ee.children||[]),ve.return=Ae,Ae=ve;break e}else{g(Ae,ve);break}else d(Ae,ve);ve=ve.sibling}ve=Sm(Ee,Ae.mode,Ze),ve.return=Ae,Ae=ve}return V(Ae);case ee:return At=Ee._init,Kn(Ae,ve,At(Ee._payload),Ze)}if(xe(Ee))return ht(Ae,ve,Ee,Ze);if(K(Ee))return mt(Ae,ve,Ee,Ze);Pu(Ae,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,ve!==null&&ve.tag===6?(g(Ae,ve.sibling),ve=C(ve,Ee),ve.return=Ae,Ae=ve):(g(Ae,ve),ve=Nm(Ee,Ae.mode,Ze),ve.return=Ae,Ae=ve),V(Ae)):g(Ae,ve)}return Kn}var _l=Pv(!0),Rv=Pv(!1),Ru=ua(null),Iu=null,kl=null,Pp=null;function Rp(){Pp=kl=Iu=null}function Ip(l){var d=Ru.current;An(Ru),l._currentValue=d}function Fp(l,d,g){for(;l!==null;){var _=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,_!==null&&(_.childLanes|=d)):_!==null&&(_.childLanes&d)!==d&&(_.childLanes|=d),l===g)break;l=l.return}}function Nl(l,d){Iu=l,Pp=kl=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&d)!==0&&(Xr=!0),l.firstContext=null)}function ks(l){var d=l._currentValue;if(Pp!==l)if(l={context:l,memoizedValue:d,next:null},kl===null){if(Iu===null)throw Error(n(308));kl=l,Iu.dependencies={lanes:0,firstContext:l}}else kl=kl.next=l;return d}var xo=null;function zp(l){xo===null?xo=[l]:xo.push(l)}function Iv(l,d,g,_){var C=d.interleaved;return C===null?(g.next=g,zp(d)):(g.next=C.next,C.next=g),d.interleaved=g,Di(l,_)}function Di(l,d){l.lanes|=d;var g=l.alternate;for(g!==null&&(g.lanes|=d),g=l,l=l.return;l!==null;)l.childLanes|=d,g=l.alternate,g!==null&&(g.childLanes|=d),g=l,l=l.return;return g.tag===3?g.stateNode:null}var pa=!1;function Bp(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fv(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Pi(l,d){return{eventTime:l,lane:d,tag:0,payload:null,callback:null,next:null}}function ma(l,d,g){var _=l.updateQueue;if(_===null)return null;if(_=_.shared,(dn&2)!==0){var C=_.pending;return C===null?d.next=d:(d.next=C.next,C.next=d),_.pending=d,Di(l,g)}return C=_.interleaved,C===null?(d.next=d,zp(_)):(d.next=C.next,C.next=d),_.interleaved=d,Di(l,g)}function Fu(l,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194240)!==0)){var _=d.lanes;_&=l.pendingLanes,g|=_,d.lanes=g,ke(l,g)}}function zv(l,d){var g=l.updateQueue,_=l.alternate;if(_!==null&&(_=_.updateQueue,g===_)){var C=null,P=null;if(g=g.firstBaseUpdate,g!==null){do{var V={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};P===null?C=P=V:P=P.next=V,g=g.next}while(g!==null);P===null?C=P=d:P=P.next=d}else C=P=d;g={baseState:_.baseState,firstBaseUpdate:C,lastBaseUpdate:P,shared:_.shared,effects:_.effects},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=d:l.next=d,g.lastBaseUpdate=d}function zu(l,d,g,_){var C=l.updateQueue;pa=!1;var P=C.firstBaseUpdate,V=C.lastBaseUpdate,ie=C.shared.pending;if(ie!==null){C.shared.pending=null;var ge=ie,Te=ge.next;ge.next=null,V===null?P=Te:V.next=Te,V=ge;var Ve=l.alternate;Ve!==null&&(Ve=Ve.updateQueue,ie=Ve.lastBaseUpdate,ie!==V&&(ie===null?Ve.firstBaseUpdate=Te:ie.next=Te,Ve.lastBaseUpdate=ge))}if(P!==null){var Xe=C.baseState;V=0,Ve=Te=ge=null,ie=P;do{var We=ie.lane,lt=ie.eventTime;if((_&We)===We){Ve!==null&&(Ve=Ve.next={eventTime:lt,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var ht=l,mt=ie;switch(We=d,lt=g,mt.tag){case 1:if(ht=mt.payload,typeof ht=="function"){Xe=ht.call(lt,Xe,We);break e}Xe=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=mt.payload,We=typeof ht=="function"?ht.call(lt,Xe,We):ht,We==null)break e;Xe=W({},Xe,We);break e;case 2:pa=!0}}ie.callback!==null&&ie.lane!==0&&(l.flags|=64,We=C.effects,We===null?C.effects=[ie]:We.push(ie))}else lt={eventTime:lt,lane:We,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Ve===null?(Te=Ve=lt,ge=Xe):Ve=Ve.next=lt,V|=We;if(ie=ie.next,ie===null){if(ie=C.shared.pending,ie===null)break;We=ie,ie=We.next,We.next=null,C.lastBaseUpdate=We,C.shared.pending=null}}while(!0);if(Ve===null&&(ge=Xe),C.baseState=ge,C.firstBaseUpdate=Te,C.lastBaseUpdate=Ve,d=C.shared.interleaved,d!==null){C=d;do V|=C.lane,C=C.next;while(C!==d)}else P===null&&(C.shared.lanes=0);bo|=V,l.lanes=V,l.memoizedState=Xe}}function Bv(l,d,g){if(l=d.effects,d.effects=null,l!==null)for(d=0;d<l.length;d++){var _=l[d],C=_.callback;if(C!==null){if(_.callback=null,_=g,typeof C!="function")throw Error(n(191,C));C.call(_)}}}var Ic={},fi=ua(Ic),Fc=ua(Ic),zc=ua(Ic);function yo(l){if(l===Ic)throw Error(n(174));return l}function qp(l,d){switch(kn(zc,d),kn(Fc,l),kn(fi,Ic),l=d.nodeType,l){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:pe(null,"");break;default:l=l===8?d.parentNode:d,d=l.namespaceURI||null,l=l.tagName,d=pe(d,l)}An(fi),kn(fi,d)}function Sl(){An(fi),An(Fc),An(zc)}function qv(l){yo(zc.current);var d=yo(fi.current),g=pe(d,l.type);d!==g&&(kn(Fc,l),kn(fi,g))}function Up(l){Fc.current===l&&(An(fi),An(Fc))}var Fn=ua(0);function Bu(l){for(var d=l;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Wp=[];function Hp(){for(var l=0;l<Wp.length;l++)Wp[l]._workInProgressVersionPrimary=null;Wp.length=0}var qu=j.ReactCurrentDispatcher,Vp=j.ReactCurrentBatchConfig,vo=0,zn=null,ir=null,fr=null,Uu=!1,Bc=!1,qc=0,dS=0;function Lr(){throw Error(n(321))}function $p(l,d){if(d===null)return!1;for(var g=0;g<d.length&&g<l.length;g++)if(!$s(l[g],d[g]))return!1;return!0}function Yp(l,d,g,_,C,P){if(vo=P,zn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,qu.current=l===null||l.memoizedState===null?pS:mS,l=g(_,C),Bc){P=0;do{if(Bc=!1,qc=0,25<=P)throw Error(n(301));P+=1,fr=ir=null,d.updateQueue=null,qu.current=gS,l=g(_,C)}while(Bc)}if(qu.current=Vu,d=ir!==null&&ir.next!==null,vo=0,fr=ir=zn=null,Uu=!1,d)throw Error(n(300));return l}function Kp(){var l=qc!==0;return qc=0,l}function hi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?zn.memoizedState=fr=l:fr=fr.next=l,fr}function Ns(){if(ir===null){var l=zn.alternate;l=l!==null?l.memoizedState:null}else l=ir.next;var d=fr===null?zn.memoizedState:fr.next;if(d!==null)fr=d,ir=l;else{if(l===null)throw Error(n(310));ir=l,l={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},fr===null?zn.memoizedState=fr=l:fr=fr.next=l}return fr}function Uc(l,d){return typeof d=="function"?d(l):d}function Gp(l){var d=Ns(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=l;var _=ir,C=_.baseQueue,P=g.pending;if(P!==null){if(C!==null){var V=C.next;C.next=P.next,P.next=V}_.baseQueue=C=P,g.pending=null}if(C!==null){P=C.next,_=_.baseState;var ie=V=null,ge=null,Te=P;do{var Ve=Te.lane;if((vo&Ve)===Ve)ge!==null&&(ge=ge.next={lane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),_=Te.hasEagerState?Te.eagerState:l(_,Te.action);else{var Xe={lane:Ve,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null};ge===null?(ie=ge=Xe,V=_):ge=ge.next=Xe,zn.lanes|=Ve,bo|=Ve}Te=Te.next}while(Te!==null&&Te!==P);ge===null?V=_:ge.next=ie,$s(_,d.memoizedState)||(Xr=!0),d.memoizedState=_,d.baseState=V,d.baseQueue=ge,g.lastRenderedState=_}if(l=g.interleaved,l!==null){C=l;do P=C.lane,zn.lanes|=P,bo|=P,C=C.next;while(C!==l)}else C===null&&(g.lanes=0);return[d.memoizedState,g.dispatch]}function Xp(l){var d=Ns(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=l;var _=g.dispatch,C=g.pending,P=d.memoizedState;if(C!==null){g.pending=null;var V=C=C.next;do P=l(P,V.action),V=V.next;while(V!==C);$s(P,d.memoizedState)||(Xr=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),g.lastRenderedState=P}return[P,_]}function Uv(){}function Wv(l,d){var g=zn,_=Ns(),C=d(),P=!$s(_.memoizedState,C);if(P&&(_.memoizedState=C,Xr=!0),_=_.queue,Qp($v.bind(null,g,_,l),[l]),_.getSnapshot!==d||P||fr!==null&&fr.memoizedState.tag&1){if(g.flags|=2048,Wc(9,Vv.bind(null,g,_,C,d),void 0,null),hr===null)throw Error(n(349));(vo&30)!==0||Hv(g,d,C)}return C}function Hv(l,d,g){l.flags|=16384,l={getSnapshot:d,value:g},d=zn.updateQueue,d===null?(d={lastEffect:null,stores:null},zn.updateQueue=d,d.stores=[l]):(g=d.stores,g===null?d.stores=[l]:g.push(l))}function Vv(l,d,g,_){d.value=g,d.getSnapshot=_,Yv(d)&&Kv(l)}function $v(l,d,g){return g(function(){Yv(d)&&Kv(l)})}function Yv(l){var d=l.getSnapshot;l=l.value;try{var g=d();return!$s(l,g)}catch{return!0}}function Kv(l){var d=Di(l,1);d!==null&&Qs(d,l,1,-1)}function Gv(l){var d=hi();return typeof l=="function"&&(l=l()),d.memoizedState=d.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uc,lastRenderedState:l},d.queue=l,l=l.dispatch=hS.bind(null,zn,l),[d.memoizedState,l]}function Wc(l,d,g,_){return l={tag:l,create:d,destroy:g,deps:_,next:null},d=zn.updateQueue,d===null?(d={lastEffect:null,stores:null},zn.updateQueue=d,d.lastEffect=l.next=l):(g=d.lastEffect,g===null?d.lastEffect=l.next=l:(_=g.next,g.next=l,l.next=_,d.lastEffect=l)),l}function Xv(){return Ns().memoizedState}function Wu(l,d,g,_){var C=hi();zn.flags|=l,C.memoizedState=Wc(1|d,g,void 0,_===void 0?null:_)}function Hu(l,d,g,_){var C=Ns();_=_===void 0?null:_;var P=void 0;if(ir!==null){var V=ir.memoizedState;if(P=V.destroy,_!==null&&$p(_,V.deps)){C.memoizedState=Wc(d,g,P,_);return}}zn.flags|=l,C.memoizedState=Wc(1|d,g,P,_)}function Qv(l,d){return Wu(8390656,8,l,d)}function Qp(l,d){return Hu(2048,8,l,d)}function Zv(l,d){return Hu(4,2,l,d)}function Jv(l,d){return Hu(4,4,l,d)}function eb(l,d){if(typeof d=="function")return l=l(),d(l),function(){d(null)};if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function tb(l,d,g){return g=g!=null?g.concat([l]):null,Hu(4,4,eb.bind(null,d,l),g)}function Zp(){}function nb(l,d){var g=Ns();d=d===void 0?null:d;var _=g.memoizedState;return _!==null&&d!==null&&$p(d,_[1])?_[0]:(g.memoizedState=[l,d],l)}function rb(l,d){var g=Ns();d=d===void 0?null:d;var _=g.memoizedState;return _!==null&&d!==null&&$p(d,_[1])?_[0]:(l=l(),g.memoizedState=[l,d],l)}function sb(l,d,g){return(vo&21)===0?(l.baseState&&(l.baseState=!1,Xr=!0),l.memoizedState=g):($s(g,d)||(g=oe(),zn.lanes|=g,bo|=g,l.baseState=!0),d)}function uS(l,d){var g=me;me=g!==0&&4>g?g:4,l(!0);var _=Vp.transition;Vp.transition={};try{l(!1),d()}finally{me=g,Vp.transition=_}}function ib(){return Ns().memoizedState}function fS(l,d,g){var _=va(l);if(g={lane:_,action:g,hasEagerState:!1,eagerState:null,next:null},ab(l))ob(d,g);else if(g=Iv(l,d,g,_),g!==null){var C=Br();Qs(g,l,_,C),lb(g,d,_)}}function hS(l,d,g){var _=va(l),C={lane:_,action:g,hasEagerState:!1,eagerState:null,next:null};if(ab(l))ob(d,C);else{var P=l.alternate;if(l.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var V=d.lastRenderedState,ie=P(V,g);if(C.hasEagerState=!0,C.eagerState=ie,$s(ie,V)){var ge=d.interleaved;ge===null?(C.next=C,zp(d)):(C.next=ge.next,ge.next=C),d.interleaved=C;return}}catch{}finally{}g=Iv(l,d,C,_),g!==null&&(C=Br(),Qs(g,l,_,C),lb(g,d,_))}}function ab(l){var d=l.alternate;return l===zn||d!==null&&d===zn}function ob(l,d){Bc=Uu=!0;var g=l.pending;g===null?d.next=d:(d.next=g.next,g.next=d),l.pending=d}function lb(l,d,g){if((g&4194240)!==0){var _=d.lanes;_&=l.pendingLanes,g|=_,d.lanes=g,ke(l,g)}}var Vu={readContext:ks,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},pS={readContext:ks,useCallback:function(l,d){return hi().memoizedState=[l,d===void 0?null:d],l},useContext:ks,useEffect:Qv,useImperativeHandle:function(l,d,g){return g=g!=null?g.concat([l]):null,Wu(4194308,4,eb.bind(null,d,l),g)},useLayoutEffect:function(l,d){return Wu(4194308,4,l,d)},useInsertionEffect:function(l,d){return Wu(4,2,l,d)},useMemo:function(l,d){var g=hi();return d=d===void 0?null:d,l=l(),g.memoizedState=[l,d],l},useReducer:function(l,d,g){var _=hi();return d=g!==void 0?g(d):d,_.memoizedState=_.baseState=d,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:d},_.queue=l,l=l.dispatch=fS.bind(null,zn,l),[_.memoizedState,l]},useRef:function(l){var d=hi();return l={current:l},d.memoizedState=l},useState:Gv,useDebugValue:Zp,useDeferredValue:function(l){return hi().memoizedState=l},useTransition:function(){var l=Gv(!1),d=l[0];return l=uS.bind(null,l[1]),hi().memoizedState=l,[d,l]},useMutableSource:function(){},useSyncExternalStore:function(l,d,g){var _=zn,C=hi();if(Ln){if(g===void 0)throw Error(n(407));g=g()}else{if(g=d(),hr===null)throw Error(n(349));(vo&30)!==0||Hv(_,d,g)}C.memoizedState=g;var P={value:g,getSnapshot:d};return C.queue=P,Qv($v.bind(null,_,P,l),[l]),_.flags|=2048,Wc(9,Vv.bind(null,_,P,g,d),void 0,null),g},useId:function(){var l=hi(),d=hr.identifierPrefix;if(Ln){var g=Ti,_=Mi;g=(_&~(1<<32-Sn(_)-1)).toString(32)+g,d=":"+d+"R"+g,g=qc++,0<g&&(d+="H"+g.toString(32)),d+=":"}else g=dS++,d=":"+d+"r"+g.toString(32)+":";return l.memoizedState=d},unstable_isNewReconciler:!1},mS={readContext:ks,useCallback:nb,useContext:ks,useEffect:Qp,useImperativeHandle:tb,useInsertionEffect:Zv,useLayoutEffect:Jv,useMemo:rb,useReducer:Gp,useRef:Xv,useState:function(){return Gp(Uc)},useDebugValue:Zp,useDeferredValue:function(l){var d=Ns();return sb(d,ir.memoizedState,l)},useTransition:function(){var l=Gp(Uc)[0],d=Ns().memoizedState;return[l,d]},useMutableSource:Uv,useSyncExternalStore:Wv,useId:ib,unstable_isNewReconciler:!1},gS={readContext:ks,useCallback:nb,useContext:ks,useEffect:Qp,useImperativeHandle:tb,useInsertionEffect:Zv,useLayoutEffect:Jv,useMemo:rb,useReducer:Xp,useRef:Xv,useState:function(){return Xp(Uc)},useDebugValue:Zp,useDeferredValue:function(l){var d=Ns();return ir===null?d.memoizedState=l:sb(d,ir.memoizedState,l)},useTransition:function(){var l=Xp(Uc)[0],d=Ns().memoizedState;return[l,d]},useMutableSource:Uv,useSyncExternalStore:Wv,useId:ib,unstable_isNewReconciler:!1};function Ks(l,d){if(l&&l.defaultProps){d=W({},d),l=l.defaultProps;for(var g in l)d[g]===void 0&&(d[g]=l[g]);return d}return d}function Jp(l,d,g,_){d=l.memoizedState,g=g(_,d),g=g==null?d:W({},d,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var $u={isMounted:function(l){return(l=l._reactInternals)?Cr(l)===l:!1},enqueueSetState:function(l,d,g){l=l._reactInternals;var _=Br(),C=va(l),P=Pi(_,C);P.payload=d,g!=null&&(P.callback=g),d=ma(l,P,C),d!==null&&(Qs(d,l,C,_),Fu(d,l,C))},enqueueReplaceState:function(l,d,g){l=l._reactInternals;var _=Br(),C=va(l),P=Pi(_,C);P.tag=1,P.payload=d,g!=null&&(P.callback=g),d=ma(l,P,C),d!==null&&(Qs(d,l,C,_),Fu(d,l,C))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var g=Br(),_=va(l),C=Pi(g,_);C.tag=2,d!=null&&(C.callback=d),d=ma(l,C,_),d!==null&&(Qs(d,l,_,g),Fu(d,l,_))}};function cb(l,d,g,_,C,P,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(_,P,V):d.prototype&&d.prototype.isPureReactComponent?!Ec(g,_)||!Ec(C,P):!0}function db(l,d,g){var _=!1,C=fa,P=d.contextType;return typeof P=="object"&&P!==null?P=ks(P):(C=Gr(d)?po:Or.current,_=d.contextTypes,P=(_=_!=null)?vl(l,C):fa),d=new d(g,P),l.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=$u,l.stateNode=d,d._reactInternals=l,_&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=C,l.__reactInternalMemoizedMaskedChildContext=P),d}function ub(l,d,g,_){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,_),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,_),d.state!==l&&$u.enqueueReplaceState(d,d.state,null)}function em(l,d,g,_){var C=l.stateNode;C.props=g,C.state=l.memoizedState,C.refs={},Bp(l);var P=d.contextType;typeof P=="object"&&P!==null?C.context=ks(P):(P=Gr(d)?po:Or.current,C.context=vl(l,P)),C.state=l.memoizedState,P=d.getDerivedStateFromProps,typeof P=="function"&&(Jp(l,d,P,g),C.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(d=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),d!==C.state&&$u.enqueueReplaceState(C,C.state,null),zu(l,g,C,_),C.state=l.memoizedState),typeof C.componentDidMount=="function"&&(l.flags|=4194308)}function Cl(l,d){try{var g="",_=d;do g+=Z(_),_=_.return;while(_);var C=g}catch(P){C=`
Error generating stack: `+P.message+`
`+P.stack}return{value:l,source:d,stack:C,digest:null}}function tm(l,d,g){return{value:l,source:null,stack:g??null,digest:d??null}}function nm(l,d){try{console.error(d.value)}catch(g){setTimeout(function(){throw g})}}var xS=typeof WeakMap=="function"?WeakMap:Map;function fb(l,d,g){g=Pi(-1,g),g.tag=3,g.payload={element:null};var _=d.value;return g.callback=function(){Ju||(Ju=!0,xm=_),nm(l,d)},g}function hb(l,d,g){g=Pi(-1,g),g.tag=3;var _=l.type.getDerivedStateFromError;if(typeof _=="function"){var C=d.value;g.payload=function(){return _(C)},g.callback=function(){nm(l,d)}}var P=l.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(g.callback=function(){nm(l,d),typeof _!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var V=d.stack;this.componentDidCatch(d.value,{componentStack:V!==null?V:""})}),g}function pb(l,d,g){var _=l.pingCache;if(_===null){_=l.pingCache=new xS;var C=new Set;_.set(d,C)}else C=_.get(d),C===void 0&&(C=new Set,_.set(d,C));C.has(g)||(C.add(g),l=LS.bind(null,l,d,g),d.then(l,l))}function mb(l){do{var d;if((d=l.tag===13)&&(d=l.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return l;l=l.return}while(l!==null);return null}function gb(l,d,g,_,C){return(l.mode&1)===0?(l===d?l.flags|=65536:(l.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(d=Pi(-1,1),d.tag=2,ma(g,d,1))),g.lanes|=1),l):(l.flags|=65536,l.lanes=C,l)}var yS=j.ReactCurrentOwner,Xr=!1;function zr(l,d,g,_){d.child=l===null?Rv(d,null,g,_):_l(d,l.child,g,_)}function xb(l,d,g,_,C){g=g.render;var P=d.ref;return Nl(d,C),_=Yp(l,d,g,_,P,C),g=Kp(),l!==null&&!Xr?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~C,Ri(l,d,C)):(Ln&&g&&Op(d),d.flags|=1,zr(l,d,_,C),d.child)}function yb(l,d,g,_,C){if(l===null){var P=g.type;return typeof P=="function"&&!km(P)&&P.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(d.tag=15,d.type=P,vb(l,d,P,_,C)):(l=af(g.type,null,_,d,d.mode,C),l.ref=d.ref,l.return=d,d.child=l)}if(P=l.child,(l.lanes&C)===0){var V=P.memoizedProps;if(g=g.compare,g=g!==null?g:Ec,g(V,_)&&l.ref===d.ref)return Ri(l,d,C)}return d.flags|=1,l=wa(P,_),l.ref=d.ref,l.return=d,d.child=l}function vb(l,d,g,_,C){if(l!==null){var P=l.memoizedProps;if(Ec(P,_)&&l.ref===d.ref)if(Xr=!1,d.pendingProps=_=P,(l.lanes&C)!==0)(l.flags&131072)!==0&&(Xr=!0);else return d.lanes=l.lanes,Ri(l,d,C)}return rm(l,d,g,_,C)}function bb(l,d,g){var _=d.pendingProps,C=_.children,P=l!==null?l.memoizedState:null;if(_.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(El,ys),ys|=g;else{if((g&1073741824)===0)return l=P!==null?P.baseLanes|g:g,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:l,cachePool:null,transitions:null},d.updateQueue=null,kn(El,ys),ys|=l,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=P!==null?P.baseLanes:g,kn(El,ys),ys|=_}else P!==null?(_=P.baseLanes|g,d.memoizedState=null):_=g,kn(El,ys),ys|=_;return zr(l,d,C,g),d.child}function wb(l,d){var g=d.ref;(l===null&&g!==null||l!==null&&l.ref!==g)&&(d.flags|=512,d.flags|=2097152)}function rm(l,d,g,_,C){var P=Gr(g)?po:Or.current;return P=vl(d,P),Nl(d,C),g=Yp(l,d,g,_,P,C),_=Kp(),l!==null&&!Xr?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~C,Ri(l,d,C)):(Ln&&_&&Op(d),d.flags|=1,zr(l,d,g,C),d.child)}function jb(l,d,g,_,C){if(Gr(g)){var P=!0;Ou(d)}else P=!1;if(Nl(d,C),d.stateNode===null)Ku(l,d),db(d,g,_),em(d,g,_,C),_=!0;else if(l===null){var V=d.stateNode,ie=d.memoizedProps;V.props=ie;var ge=V.context,Te=g.contextType;typeof Te=="object"&&Te!==null?Te=ks(Te):(Te=Gr(g)?po:Or.current,Te=vl(d,Te));var Ve=g.getDerivedStateFromProps,Xe=typeof Ve=="function"||typeof V.getSnapshotBeforeUpdate=="function";Xe||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(ie!==_||ge!==Te)&&ub(d,V,_,Te),pa=!1;var We=d.memoizedState;V.state=We,zu(d,_,V,C),ge=d.memoizedState,ie!==_||We!==ge||Kr.current||pa?(typeof Ve=="function"&&(Jp(d,g,Ve,_),ge=d.memoizedState),(ie=pa||cb(d,g,ie,_,We,ge,Te))?(Xe||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(d.flags|=4194308)):(typeof V.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=_,d.memoizedState=ge),V.props=_,V.state=ge,V.context=Te,_=ie):(typeof V.componentDidMount=="function"&&(d.flags|=4194308),_=!1)}else{V=d.stateNode,Fv(l,d),ie=d.memoizedProps,Te=d.type===d.elementType?ie:Ks(d.type,ie),V.props=Te,Xe=d.pendingProps,We=V.context,ge=g.contextType,typeof ge=="object"&&ge!==null?ge=ks(ge):(ge=Gr(g)?po:Or.current,ge=vl(d,ge));var lt=g.getDerivedStateFromProps;(Ve=typeof lt=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(ie!==Xe||We!==ge)&&ub(d,V,_,ge),pa=!1,We=d.memoizedState,V.state=We,zu(d,_,V,C);var ht=d.memoizedState;ie!==Xe||We!==ht||Kr.current||pa?(typeof lt=="function"&&(Jp(d,g,lt,_),ht=d.memoizedState),(Te=pa||cb(d,g,Te,_,We,ht,ge)||!1)?(Ve||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(_,ht,ge),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(_,ht,ge)),typeof V.componentDidUpdate=="function"&&(d.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof V.componentDidUpdate!="function"||ie===l.memoizedProps&&We===l.memoizedState||(d.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ie===l.memoizedProps&&We===l.memoizedState||(d.flags|=1024),d.memoizedProps=_,d.memoizedState=ht),V.props=_,V.state=ht,V.context=ge,_=Te):(typeof V.componentDidUpdate!="function"||ie===l.memoizedProps&&We===l.memoizedState||(d.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ie===l.memoizedProps&&We===l.memoizedState||(d.flags|=1024),_=!1)}return sm(l,d,g,_,P,C)}function sm(l,d,g,_,C,P){wb(l,d);var V=(d.flags&128)!==0;if(!_&&!V)return C&&Cv(d,g,!1),Ri(l,d,P);_=d.stateNode,yS.current=d;var ie=V&&typeof g.getDerivedStateFromError!="function"?null:_.render();return d.flags|=1,l!==null&&V?(d.child=_l(d,l.child,null,P),d.child=_l(d,null,ie,P)):zr(l,d,ie,P),d.memoizedState=_.state,C&&Cv(d,g,!0),d.child}function _b(l){var d=l.stateNode;d.pendingContext?Nv(l,d.pendingContext,d.pendingContext!==d.context):d.context&&Nv(l,d.context,!1),qp(l,d.containerInfo)}function kb(l,d,g,_,C){return jl(),Dp(C),d.flags|=256,zr(l,d,g,_),d.child}var im={dehydrated:null,treeContext:null,retryLane:0};function am(l){return{baseLanes:l,cachePool:null,transitions:null}}function Nb(l,d,g){var _=d.pendingProps,C=Fn.current,P=!1,V=(d.flags&128)!==0,ie;if((ie=V)||(ie=l!==null&&l.memoizedState===null?!1:(C&2)!==0),ie?(P=!0,d.flags&=-129):(l===null||l.memoizedState!==null)&&(C|=1),kn(Fn,C&1),l===null)return Tp(d),l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((d.mode&1)===0?d.lanes=1:l.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(V=_.children,l=_.fallback,P?(_=d.mode,P=d.child,V={mode:"hidden",children:V},(_&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=V):P=of(V,_,0,null),l=ko(l,_,g,null),P.return=d,l.return=d,P.sibling=l,d.child=P,d.child.memoizedState=am(g),d.memoizedState=im,l):om(d,V));if(C=l.memoizedState,C!==null&&(ie=C.dehydrated,ie!==null))return vS(l,d,V,_,ie,C,g);if(P){P=_.fallback,V=d.mode,C=l.child,ie=C.sibling;var ge={mode:"hidden",children:_.children};return(V&1)===0&&d.child!==C?(_=d.child,_.childLanes=0,_.pendingProps=ge,d.deletions=null):(_=wa(C,ge),_.subtreeFlags=C.subtreeFlags&14680064),ie!==null?P=wa(ie,P):(P=ko(P,V,g,null),P.flags|=2),P.return=d,_.return=d,_.sibling=P,d.child=_,_=P,P=d.child,V=l.child.memoizedState,V=V===null?am(g):{baseLanes:V.baseLanes|g,cachePool:null,transitions:V.transitions},P.memoizedState=V,P.childLanes=l.childLanes&~g,d.memoizedState=im,_}return P=l.child,l=P.sibling,_=wa(P,{mode:"visible",children:_.children}),(d.mode&1)===0&&(_.lanes=g),_.return=d,_.sibling=null,l!==null&&(g=d.deletions,g===null?(d.deletions=[l],d.flags|=16):g.push(l)),d.child=_,d.memoizedState=null,_}function om(l,d){return d=of({mode:"visible",children:d},l.mode,0,null),d.return=l,l.child=d}function Yu(l,d,g,_){return _!==null&&Dp(_),_l(d,l.child,null,g),l=om(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function vS(l,d,g,_,C,P,V){if(g)return d.flags&256?(d.flags&=-257,_=tm(Error(n(422))),Yu(l,d,V,_)):d.memoizedState!==null?(d.child=l.child,d.flags|=128,null):(P=_.fallback,C=d.mode,_=of({mode:"visible",children:_.children},C,0,null),P=ko(P,C,V,null),P.flags|=2,_.return=d,P.return=d,_.sibling=P,d.child=_,(d.mode&1)!==0&&_l(d,l.child,null,V),d.child.memoizedState=am(V),d.memoizedState=im,P);if((d.mode&1)===0)return Yu(l,d,V,null);if(C.data==="$!"){if(_=C.nextSibling&&C.nextSibling.dataset,_)var ie=_.dgst;return _=ie,P=Error(n(419)),_=tm(P,_,void 0),Yu(l,d,V,_)}if(ie=(V&l.childLanes)!==0,Xr||ie){if(_=hr,_!==null){switch(V&-V){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(_.suspendedLanes|V))!==0?0:C,C!==0&&C!==P.retryLane&&(P.retryLane=C,Di(l,C),Qs(_,l,C,-1))}return _m(),_=tm(Error(n(421))),Yu(l,d,V,_)}return C.data==="$?"?(d.flags|=128,d.child=l.child,d=MS.bind(null,l),C._reactRetry=d,null):(l=P.treeContext,xs=da(C.nextSibling),gs=d,Ln=!0,Ys=null,l!==null&&(js[_s++]=Mi,js[_s++]=Ti,js[_s++]=mo,Mi=l.id,Ti=l.overflow,mo=d),d=om(d,_.children),d.flags|=4096,d)}function Sb(l,d,g){l.lanes|=d;var _=l.alternate;_!==null&&(_.lanes|=d),Fp(l.return,d,g)}function lm(l,d,g,_,C){var P=l.memoizedState;P===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:_,tail:g,tailMode:C}:(P.isBackwards=d,P.rendering=null,P.renderingStartTime=0,P.last=_,P.tail=g,P.tailMode=C)}function Cb(l,d,g){var _=d.pendingProps,C=_.revealOrder,P=_.tail;if(zr(l,d,_.children,g),_=Fn.current,(_&2)!==0)_=_&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Sb(l,g,d);else if(l.tag===19)Sb(l,g,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}_&=1}if(kn(Fn,_),(d.mode&1)===0)d.memoizedState=null;else switch(C){case"forwards":for(g=d.child,C=null;g!==null;)l=g.alternate,l!==null&&Bu(l)===null&&(C=g),g=g.sibling;g=C,g===null?(C=d.child,d.child=null):(C=g.sibling,g.sibling=null),lm(d,!1,C,g,P);break;case"backwards":for(g=null,C=d.child,d.child=null;C!==null;){if(l=C.alternate,l!==null&&Bu(l)===null){d.child=C;break}l=C.sibling,C.sibling=g,g=C,C=l}lm(d,!0,g,null,P);break;case"together":lm(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Ku(l,d){(d.mode&1)===0&&l!==null&&(l.alternate=null,d.alternate=null,d.flags|=2)}function Ri(l,d,g){if(l!==null&&(d.dependencies=l.dependencies),bo|=d.lanes,(g&d.childLanes)===0)return null;if(l!==null&&d.child!==l.child)throw Error(n(153));if(d.child!==null){for(l=d.child,g=wa(l,l.pendingProps),d.child=g,g.return=d;l.sibling!==null;)l=l.sibling,g=g.sibling=wa(l,l.pendingProps),g.return=d;g.sibling=null}return d.child}function bS(l,d,g){switch(d.tag){case 3:_b(d),jl();break;case 5:qv(d);break;case 1:Gr(d.type)&&Ou(d);break;case 4:qp(d,d.stateNode.containerInfo);break;case 10:var _=d.type._context,C=d.memoizedProps.value;kn(Ru,_._currentValue),_._currentValue=C;break;case 13:if(_=d.memoizedState,_!==null)return _.dehydrated!==null?(kn(Fn,Fn.current&1),d.flags|=128,null):(g&d.child.childLanes)!==0?Nb(l,d,g):(kn(Fn,Fn.current&1),l=Ri(l,d,g),l!==null?l.sibling:null);kn(Fn,Fn.current&1);break;case 19:if(_=(g&d.childLanes)!==0,(l.flags&128)!==0){if(_)return Cb(l,d,g);d.flags|=128}if(C=d.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),kn(Fn,Fn.current),_)break;return null;case 22:case 23:return d.lanes=0,bb(l,d,g)}return Ri(l,d,g)}var Ab,cm,Eb,Ob;Ab=function(l,d){for(var g=d.child;g!==null;){if(g.tag===5||g.tag===6)l.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},cm=function(){},Eb=function(l,d,g,_){var C=l.memoizedProps;if(C!==_){l=d.stateNode,yo(fi.current);var P=null;switch(g){case"input":C=je(l,C),_=je(l,_),P=[];break;case"select":C=W({},C,{value:void 0}),_=W({},_,{value:void 0}),P=[];break;case"textarea":C=Se(l,C),_=Se(l,_),P=[];break;default:typeof C.onClick!="function"&&typeof _.onClick=="function"&&(l.onclick=Cu)}dr(g,_);var V;g=null;for(Te in C)if(!_.hasOwnProperty(Te)&&C.hasOwnProperty(Te)&&C[Te]!=null)if(Te==="style"){var ie=C[Te];for(V in ie)ie.hasOwnProperty(V)&&(g||(g={}),g[V]="")}else Te!=="dangerouslySetInnerHTML"&&Te!=="children"&&Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&Te!=="autoFocus"&&(i.hasOwnProperty(Te)?P||(P=[]):(P=P||[]).push(Te,null));for(Te in _){var ge=_[Te];if(ie=C!=null?C[Te]:void 0,_.hasOwnProperty(Te)&&ge!==ie&&(ge!=null||ie!=null))if(Te==="style")if(ie){for(V in ie)!ie.hasOwnProperty(V)||ge&&ge.hasOwnProperty(V)||(g||(g={}),g[V]="");for(V in ge)ge.hasOwnProperty(V)&&ie[V]!==ge[V]&&(g||(g={}),g[V]=ge[V])}else g||(P||(P=[]),P.push(Te,g)),g=ge;else Te==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ie=ie?ie.__html:void 0,ge!=null&&ie!==ge&&(P=P||[]).push(Te,ge)):Te==="children"?typeof ge!="string"&&typeof ge!="number"||(P=P||[]).push(Te,""+ge):Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&(i.hasOwnProperty(Te)?(ge!=null&&Te==="onScroll"&&Cn("scroll",l),P||ie===ge||(P=[])):(P=P||[]).push(Te,ge))}g&&(P=P||[]).push("style",g);var Te=P;(d.updateQueue=Te)&&(d.flags|=4)}},Ob=function(l,d,g,_){g!==_&&(d.flags|=4)};function Hc(l,d){if(!Ln)switch(l.tailMode){case"hidden":d=l.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:_.sibling=null}}function Mr(l){var d=l.alternate!==null&&l.alternate.child===l.child,g=0,_=0;if(d)for(var C=l.child;C!==null;)g|=C.lanes|C.childLanes,_|=C.subtreeFlags&14680064,_|=C.flags&14680064,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)g|=C.lanes|C.childLanes,_|=C.subtreeFlags,_|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=_,l.childLanes=g,d}function wS(l,d,g){var _=d.pendingProps;switch(Lp(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mr(d),null;case 1:return Gr(d.type)&&Eu(),Mr(d),null;case 3:return _=d.stateNode,Sl(),An(Kr),An(Or),Hp(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(l===null||l.child===null)&&(Du(d)?d.flags|=4:l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ys!==null&&(bm(Ys),Ys=null))),cm(l,d),Mr(d),null;case 5:Up(d);var C=yo(zc.current);if(g=d.type,l!==null&&d.stateNode!=null)Eb(l,d,g,_,C),l.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!_){if(d.stateNode===null)throw Error(n(166));return Mr(d),null}if(l=yo(fi.current),Du(d)){_=d.stateNode,g=d.type;var P=d.memoizedProps;switch(_[ui]=d,_[Dc]=P,l=(d.mode&1)!==0,g){case"dialog":Cn("cancel",_),Cn("close",_);break;case"iframe":case"object":case"embed":Cn("load",_);break;case"video":case"audio":for(C=0;C<Lc.length;C++)Cn(Lc[C],_);break;case"source":Cn("error",_);break;case"img":case"image":case"link":Cn("error",_),Cn("load",_);break;case"details":Cn("toggle",_);break;case"input":dt(_,P),Cn("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!P.multiple},Cn("invalid",_);break;case"textarea":_e(_,P),Cn("invalid",_)}dr(g,P),C=null;for(var V in P)if(P.hasOwnProperty(V)){var ie=P[V];V==="children"?typeof ie=="string"?_.textContent!==ie&&(P.suppressHydrationWarning!==!0&&Su(_.textContent,ie,l),C=["children",ie]):typeof ie=="number"&&_.textContent!==""+ie&&(P.suppressHydrationWarning!==!0&&Su(_.textContent,ie,l),C=["children",""+ie]):i.hasOwnProperty(V)&&ie!=null&&V==="onScroll"&&Cn("scroll",_)}switch(g){case"input":Be(_),Oe(_,P,!0);break;case"textarea":Be(_),Ne(_);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(_.onclick=Cu)}_=C,d.updateQueue=_,_!==null&&(d.flags|=4)}else{V=C.nodeType===9?C:C.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=fe(g)),l==="http://www.w3.org/1999/xhtml"?g==="script"?(l=V.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof _.is=="string"?l=V.createElement(g,{is:_.is}):(l=V.createElement(g),g==="select"&&(V=l,_.multiple?V.multiple=!0:_.size&&(V.size=_.size))):l=V.createElementNS(l,g),l[ui]=d,l[Dc]=_,Ab(l,d,!1,!1),d.stateNode=l;e:{switch(V=On(g,_),g){case"dialog":Cn("cancel",l),Cn("close",l),C=_;break;case"iframe":case"object":case"embed":Cn("load",l),C=_;break;case"video":case"audio":for(C=0;C<Lc.length;C++)Cn(Lc[C],l);C=_;break;case"source":Cn("error",l),C=_;break;case"img":case"image":case"link":Cn("error",l),Cn("load",l),C=_;break;case"details":Cn("toggle",l),C=_;break;case"input":dt(l,_),C=je(l,_),Cn("invalid",l);break;case"option":C=_;break;case"select":l._wrapperState={wasMultiple:!!_.multiple},C=W({},_,{value:void 0}),Cn("invalid",l);break;case"textarea":_e(l,_),C=Se(l,_),Cn("invalid",l);break;default:C=_}dr(g,C),ie=C;for(P in ie)if(ie.hasOwnProperty(P)){var ge=ie[P];P==="style"?Lt(l,ge):P==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ge!=null&&Qe(l,ge)):P==="children"?typeof ge=="string"?(g!=="textarea"||ge!=="")&&qe(l,ge):typeof ge=="number"&&qe(l,""+ge):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(i.hasOwnProperty(P)?ge!=null&&P==="onScroll"&&Cn("scroll",l):ge!=null&&N(l,P,ge,V))}switch(g){case"input":Be(l),Oe(l,_,!1);break;case"textarea":Be(l),Ne(l);break;case"option":_.value!=null&&l.setAttribute("value",""+ae(_.value));break;case"select":l.multiple=!!_.multiple,P=_.value,P!=null?we(l,!!_.multiple,P,!1):_.defaultValue!=null&&we(l,!!_.multiple,_.defaultValue,!0);break;default:typeof C.onClick=="function"&&(l.onclick=Cu)}switch(g){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Mr(d),null;case 6:if(l&&d.stateNode!=null)Ob(l,d,l.memoizedProps,_);else{if(typeof _!="string"&&d.stateNode===null)throw Error(n(166));if(g=yo(zc.current),yo(fi.current),Du(d)){if(_=d.stateNode,g=d.memoizedProps,_[ui]=d,(P=_.nodeValue!==g)&&(l=gs,l!==null))switch(l.tag){case 3:Su(_.nodeValue,g,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Su(_.nodeValue,g,(l.mode&1)!==0)}P&&(d.flags|=4)}else _=(g.nodeType===9?g:g.ownerDocument).createTextNode(_),_[ui]=d,d.stateNode=_}return Mr(d),null;case 13:if(An(Fn),_=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Ln&&xs!==null&&(d.mode&1)!==0&&(d.flags&128)===0)Tv(),jl(),d.flags|=98560,P=!1;else if(P=Du(d),_!==null&&_.dehydrated!==null){if(l===null){if(!P)throw Error(n(318));if(P=d.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(n(317));P[ui]=d}else jl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Mr(d),P=!1}else Ys!==null&&(bm(Ys),Ys=null),P=!0;if(!P)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=g,d):(_=_!==null,_!==(l!==null&&l.memoizedState!==null)&&_&&(d.child.flags|=8192,(d.mode&1)!==0&&(l===null||(Fn.current&1)!==0?ar===0&&(ar=3):_m())),d.updateQueue!==null&&(d.flags|=4),Mr(d),null);case 4:return Sl(),cm(l,d),l===null&&Mc(d.stateNode.containerInfo),Mr(d),null;case 10:return Ip(d.type._context),Mr(d),null;case 17:return Gr(d.type)&&Eu(),Mr(d),null;case 19:if(An(Fn),P=d.memoizedState,P===null)return Mr(d),null;if(_=(d.flags&128)!==0,V=P.rendering,V===null)if(_)Hc(P,!1);else{if(ar!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(V=Bu(l),V!==null){for(d.flags|=128,Hc(P,!1),_=V.updateQueue,_!==null&&(d.updateQueue=_,d.flags|=4),d.subtreeFlags=0,_=g,g=d.child;g!==null;)P=g,l=_,P.flags&=14680066,V=P.alternate,V===null?(P.childLanes=0,P.lanes=l,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=V.childLanes,P.lanes=V.lanes,P.child=V.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=V.memoizedProps,P.memoizedState=V.memoizedState,P.updateQueue=V.updateQueue,P.type=V.type,l=V.dependencies,P.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),g=g.sibling;return kn(Fn,Fn.current&1|2),d.child}l=l.sibling}P.tail!==null&&Zt()>Ol&&(d.flags|=128,_=!0,Hc(P,!1),d.lanes=4194304)}else{if(!_)if(l=Bu(V),l!==null){if(d.flags|=128,_=!0,g=l.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),Hc(P,!0),P.tail===null&&P.tailMode==="hidden"&&!V.alternate&&!Ln)return Mr(d),null}else 2*Zt()-P.renderingStartTime>Ol&&g!==1073741824&&(d.flags|=128,_=!0,Hc(P,!1),d.lanes=4194304);P.isBackwards?(V.sibling=d.child,d.child=V):(g=P.last,g!==null?g.sibling=V:d.child=V,P.last=V)}return P.tail!==null?(d=P.tail,P.rendering=d,P.tail=d.sibling,P.renderingStartTime=Zt(),d.sibling=null,g=Fn.current,kn(Fn,_?g&1|2:g&1),d):(Mr(d),null);case 22:case 23:return jm(),_=d.memoizedState!==null,l!==null&&l.memoizedState!==null!==_&&(d.flags|=8192),_&&(d.mode&1)!==0?(ys&1073741824)!==0&&(Mr(d),d.subtreeFlags&6&&(d.flags|=8192)):Mr(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function jS(l,d){switch(Lp(d),d.tag){case 1:return Gr(d.type)&&Eu(),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Sl(),An(Kr),An(Or),Hp(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 5:return Up(d),null;case 13:if(An(Fn),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(n(340));jl()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return An(Fn),null;case 4:return Sl(),null;case 10:return Ip(d.type._context),null;case 22:case 23:return jm(),null;case 24:return null;default:return null}}var Gu=!1,Tr=!1,_S=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Al(l,d){var g=l.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(_){qn(l,d,_)}else g.current=null}function dm(l,d,g){try{g()}catch(_){qn(l,d,_)}}var Lb=!1;function kS(l,d){if(jp=io,l=cv(),pp(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var _=g.getSelection&&g.getSelection();if(_&&_.rangeCount!==0){g=_.anchorNode;var C=_.anchorOffset,P=_.focusNode;_=_.focusOffset;try{g.nodeType,P.nodeType}catch{g=null;break e}var V=0,ie=-1,ge=-1,Te=0,Ve=0,Xe=l,We=null;t:for(;;){for(var lt;Xe!==g||C!==0&&Xe.nodeType!==3||(ie=V+C),Xe!==P||_!==0&&Xe.nodeType!==3||(ge=V+_),Xe.nodeType===3&&(V+=Xe.nodeValue.length),(lt=Xe.firstChild)!==null;)We=Xe,Xe=lt;for(;;){if(Xe===l)break t;if(We===g&&++Te===C&&(ie=V),We===P&&++Ve===_&&(ge=V),(lt=Xe.nextSibling)!==null)break;Xe=We,We=Xe.parentNode}Xe=lt}g=ie===-1||ge===-1?null:{start:ie,end:ge}}else g=null}g=g||{start:0,end:0}}else g=null;for(_p={focusedElem:l,selectionRange:g},io=!1,ut=d;ut!==null;)if(d=ut,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,ut=l;else for(;ut!==null;){d=ut;try{var ht=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(ht!==null){var mt=ht.memoizedProps,Kn=ht.memoizedState,Ae=d.stateNode,ve=Ae.getSnapshotBeforeUpdate(d.elementType===d.type?mt:Ks(d.type,mt),Kn);Ae.__reactInternalSnapshotBeforeUpdate=ve}break;case 3:var Ee=d.stateNode.containerInfo;Ee.nodeType===1?Ee.textContent="":Ee.nodeType===9&&Ee.documentElement&&Ee.removeChild(Ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ze){qn(d,d.return,Ze)}if(l=d.sibling,l!==null){l.return=d.return,ut=l;break}ut=d.return}return ht=Lb,Lb=!1,ht}function Vc(l,d,g){var _=d.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var C=_=_.next;do{if((C.tag&l)===l){var P=C.destroy;C.destroy=void 0,P!==void 0&&dm(d,g,P)}C=C.next}while(C!==_)}}function Xu(l,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&l)===l){var _=g.create;g.destroy=_()}g=g.next}while(g!==d)}}function um(l){var d=l.ref;if(d!==null){var g=l.stateNode;switch(l.tag){case 5:l=g;break;default:l=g}typeof d=="function"?d(l):d.current=l}}function Mb(l){var d=l.alternate;d!==null&&(l.alternate=null,Mb(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&(delete d[ui],delete d[Dc],delete d[Cp],delete d[aS],delete d[oS])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Tb(l){return l.tag===5||l.tag===3||l.tag===4}function Db(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Tb(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function fm(l,d,g){var _=l.tag;if(_===5||_===6)l=l.stateNode,d?g.nodeType===8?g.parentNode.insertBefore(l,d):g.insertBefore(l,d):(g.nodeType===8?(d=g.parentNode,d.insertBefore(l,g)):(d=g,d.appendChild(l)),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=Cu));else if(_!==4&&(l=l.child,l!==null))for(fm(l,d,g),l=l.sibling;l!==null;)fm(l,d,g),l=l.sibling}function hm(l,d,g){var _=l.tag;if(_===5||_===6)l=l.stateNode,d?g.insertBefore(l,d):g.appendChild(l);else if(_!==4&&(l=l.child,l!==null))for(hm(l,d,g),l=l.sibling;l!==null;)hm(l,d,g),l=l.sibling}var kr=null,Gs=!1;function ga(l,d,g){for(g=g.child;g!==null;)Pb(l,d,g),g=g.sibling}function Pb(l,d,g){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(ai,g)}catch{}switch(g.tag){case 5:Tr||Al(g,d);case 6:var _=kr,C=Gs;kr=null,ga(l,d,g),kr=_,Gs=C,kr!==null&&(Gs?(l=kr,g=g.stateNode,l.nodeType===8?l.parentNode.removeChild(g):l.removeChild(g)):kr.removeChild(g.stateNode));break;case 18:kr!==null&&(Gs?(l=kr,g=g.stateNode,l.nodeType===8?Sp(l.parentNode,g):l.nodeType===1&&Sp(l,g),ia(l)):Sp(kr,g.stateNode));break;case 4:_=kr,C=Gs,kr=g.stateNode.containerInfo,Gs=!0,ga(l,d,g),kr=_,Gs=C;break;case 0:case 11:case 14:case 15:if(!Tr&&(_=g.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){C=_=_.next;do{var P=C,V=P.destroy;P=P.tag,V!==void 0&&((P&2)!==0||(P&4)!==0)&&dm(g,d,V),C=C.next}while(C!==_)}ga(l,d,g);break;case 1:if(!Tr&&(Al(g,d),_=g.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=g.memoizedProps,_.state=g.memoizedState,_.componentWillUnmount()}catch(ie){qn(g,d,ie)}ga(l,d,g);break;case 21:ga(l,d,g);break;case 22:g.mode&1?(Tr=(_=Tr)||g.memoizedState!==null,ga(l,d,g),Tr=_):ga(l,d,g);break;default:ga(l,d,g)}}function Rb(l){var d=l.updateQueue;if(d!==null){l.updateQueue=null;var g=l.stateNode;g===null&&(g=l.stateNode=new _S),d.forEach(function(_){var C=TS.bind(null,l,_);g.has(_)||(g.add(_),_.then(C,C))})}}function Xs(l,d){var g=d.deletions;if(g!==null)for(var _=0;_<g.length;_++){var C=g[_];try{var P=l,V=d,ie=V;e:for(;ie!==null;){switch(ie.tag){case 5:kr=ie.stateNode,Gs=!1;break e;case 3:kr=ie.stateNode.containerInfo,Gs=!0;break e;case 4:kr=ie.stateNode.containerInfo,Gs=!0;break e}ie=ie.return}if(kr===null)throw Error(n(160));Pb(P,V,C),kr=null,Gs=!1;var ge=C.alternate;ge!==null&&(ge.return=null),C.return=null}catch(Te){qn(C,d,Te)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)Ib(d,l),d=d.sibling}function Ib(l,d){var g=l.alternate,_=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Xs(d,l),pi(l),_&4){try{Vc(3,l,l.return),Xu(3,l)}catch(mt){qn(l,l.return,mt)}try{Vc(5,l,l.return)}catch(mt){qn(l,l.return,mt)}}break;case 1:Xs(d,l),pi(l),_&512&&g!==null&&Al(g,g.return);break;case 5:if(Xs(d,l),pi(l),_&512&&g!==null&&Al(g,g.return),l.flags&32){var C=l.stateNode;try{qe(C,"")}catch(mt){qn(l,l.return,mt)}}if(_&4&&(C=l.stateNode,C!=null)){var P=l.memoizedProps,V=g!==null?g.memoizedProps:P,ie=l.type,ge=l.updateQueue;if(l.updateQueue=null,ge!==null)try{ie==="input"&&P.type==="radio"&&P.name!=null&&st(C,P),On(ie,V);var Te=On(ie,P);for(V=0;V<ge.length;V+=2){var Ve=ge[V],Xe=ge[V+1];Ve==="style"?Lt(C,Xe):Ve==="dangerouslySetInnerHTML"?Qe(C,Xe):Ve==="children"?qe(C,Xe):N(C,Ve,Xe,Te)}switch(ie){case"input":ft(C,P);break;case"textarea":te(C,P);break;case"select":var We=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!P.multiple;var lt=P.value;lt!=null?we(C,!!P.multiple,lt,!1):We!==!!P.multiple&&(P.defaultValue!=null?we(C,!!P.multiple,P.defaultValue,!0):we(C,!!P.multiple,P.multiple?[]:"",!1))}C[Dc]=P}catch(mt){qn(l,l.return,mt)}}break;case 6:if(Xs(d,l),pi(l),_&4){if(l.stateNode===null)throw Error(n(162));C=l.stateNode,P=l.memoizedProps;try{C.nodeValue=P}catch(mt){qn(l,l.return,mt)}}break;case 3:if(Xs(d,l),pi(l),_&4&&g!==null&&g.memoizedState.isDehydrated)try{ia(d.containerInfo)}catch(mt){qn(l,l.return,mt)}break;case 4:Xs(d,l),pi(l);break;case 13:Xs(d,l),pi(l),C=l.child,C.flags&8192&&(P=C.memoizedState!==null,C.stateNode.isHidden=P,!P||C.alternate!==null&&C.alternate.memoizedState!==null||(gm=Zt())),_&4&&Rb(l);break;case 22:if(Ve=g!==null&&g.memoizedState!==null,l.mode&1?(Tr=(Te=Tr)||Ve,Xs(d,l),Tr=Te):Xs(d,l),pi(l),_&8192){if(Te=l.memoizedState!==null,(l.stateNode.isHidden=Te)&&!Ve&&(l.mode&1)!==0)for(ut=l,Ve=l.child;Ve!==null;){for(Xe=ut=Ve;ut!==null;){switch(We=ut,lt=We.child,We.tag){case 0:case 11:case 14:case 15:Vc(4,We,We.return);break;case 1:Al(We,We.return);var ht=We.stateNode;if(typeof ht.componentWillUnmount=="function"){_=We,g=We.return;try{d=_,ht.props=d.memoizedProps,ht.state=d.memoizedState,ht.componentWillUnmount()}catch(mt){qn(_,g,mt)}}break;case 5:Al(We,We.return);break;case 22:if(We.memoizedState!==null){Bb(Xe);continue}}lt!==null?(lt.return=We,ut=lt):Bb(Xe)}Ve=Ve.sibling}e:for(Ve=null,Xe=l;;){if(Xe.tag===5){if(Ve===null){Ve=Xe;try{C=Xe.stateNode,Te?(P=C.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(ie=Xe.stateNode,ge=Xe.memoizedProps.style,V=ge!=null&&ge.hasOwnProperty("display")?ge.display:null,ie.style.display=Pe("display",V))}catch(mt){qn(l,l.return,mt)}}}else if(Xe.tag===6){if(Ve===null)try{Xe.stateNode.nodeValue=Te?"":Xe.memoizedProps}catch(mt){qn(l,l.return,mt)}}else if((Xe.tag!==22&&Xe.tag!==23||Xe.memoizedState===null||Xe===l)&&Xe.child!==null){Xe.child.return=Xe,Xe=Xe.child;continue}if(Xe===l)break e;for(;Xe.sibling===null;){if(Xe.return===null||Xe.return===l)break e;Ve===Xe&&(Ve=null),Xe=Xe.return}Ve===Xe&&(Ve=null),Xe.sibling.return=Xe.return,Xe=Xe.sibling}}break;case 19:Xs(d,l),pi(l),_&4&&Rb(l);break;case 21:break;default:Xs(d,l),pi(l)}}function pi(l){var d=l.flags;if(d&2){try{e:{for(var g=l.return;g!==null;){if(Tb(g)){var _=g;break e}g=g.return}throw Error(n(160))}switch(_.tag){case 5:var C=_.stateNode;_.flags&32&&(qe(C,""),_.flags&=-33);var P=Db(l);hm(l,P,C);break;case 3:case 4:var V=_.stateNode.containerInfo,ie=Db(l);fm(l,ie,V);break;default:throw Error(n(161))}}catch(ge){qn(l,l.return,ge)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function NS(l,d,g){ut=l,Fb(l)}function Fb(l,d,g){for(var _=(l.mode&1)!==0;ut!==null;){var C=ut,P=C.child;if(C.tag===22&&_){var V=C.memoizedState!==null||Gu;if(!V){var ie=C.alternate,ge=ie!==null&&ie.memoizedState!==null||Tr;ie=Gu;var Te=Tr;if(Gu=V,(Tr=ge)&&!Te)for(ut=C;ut!==null;)V=ut,ge=V.child,V.tag===22&&V.memoizedState!==null?qb(C):ge!==null?(ge.return=V,ut=ge):qb(C);for(;P!==null;)ut=P,Fb(P),P=P.sibling;ut=C,Gu=ie,Tr=Te}zb(l)}else(C.subtreeFlags&8772)!==0&&P!==null?(P.return=C,ut=P):zb(l)}}function zb(l){for(;ut!==null;){var d=ut;if((d.flags&8772)!==0){var g=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Tr||Xu(5,d);break;case 1:var _=d.stateNode;if(d.flags&4&&!Tr)if(g===null)_.componentDidMount();else{var C=d.elementType===d.type?g.memoizedProps:Ks(d.type,g.memoizedProps);_.componentDidUpdate(C,g.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var P=d.updateQueue;P!==null&&Bv(d,P,_);break;case 3:var V=d.updateQueue;if(V!==null){if(g=null,d.child!==null)switch(d.child.tag){case 5:g=d.child.stateNode;break;case 1:g=d.child.stateNode}Bv(d,V,g)}break;case 5:var ie=d.stateNode;if(g===null&&d.flags&4){g=ie;var ge=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ge.autoFocus&&g.focus();break;case"img":ge.src&&(g.src=ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Te=d.alternate;if(Te!==null){var Ve=Te.memoizedState;if(Ve!==null){var Xe=Ve.dehydrated;Xe!==null&&ia(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Tr||d.flags&512&&um(d)}catch(We){qn(d,d.return,We)}}if(d===l){ut=null;break}if(g=d.sibling,g!==null){g.return=d.return,ut=g;break}ut=d.return}}function Bb(l){for(;ut!==null;){var d=ut;if(d===l){ut=null;break}var g=d.sibling;if(g!==null){g.return=d.return,ut=g;break}ut=d.return}}function qb(l){for(;ut!==null;){var d=ut;try{switch(d.tag){case 0:case 11:case 15:var g=d.return;try{Xu(4,d)}catch(ge){qn(d,g,ge)}break;case 1:var _=d.stateNode;if(typeof _.componentDidMount=="function"){var C=d.return;try{_.componentDidMount()}catch(ge){qn(d,C,ge)}}var P=d.return;try{um(d)}catch(ge){qn(d,P,ge)}break;case 5:var V=d.return;try{um(d)}catch(ge){qn(d,V,ge)}}}catch(ge){qn(d,d.return,ge)}if(d===l){ut=null;break}var ie=d.sibling;if(ie!==null){ie.return=d.return,ut=ie;break}ut=d.return}}var SS=Math.ceil,Qu=j.ReactCurrentDispatcher,pm=j.ReactCurrentOwner,Ss=j.ReactCurrentBatchConfig,dn=0,hr=null,er=null,Nr=0,ys=0,El=ua(0),ar=0,$c=null,bo=0,Zu=0,mm=0,Yc=null,Qr=null,gm=0,Ol=1/0,Ii=null,Ju=!1,xm=null,xa=null,ef=!1,ya=null,tf=0,Kc=0,ym=null,nf=-1,rf=0;function Br(){return(dn&6)!==0?Zt():nf!==-1?nf:nf=Zt()}function va(l){return(l.mode&1)===0?1:(dn&2)!==0&&Nr!==0?Nr&-Nr:cS.transition!==null?(rf===0&&(rf=oe()),rf):(l=me,l!==0||(l=window.event,l=l===void 0?16:ci(l.type)),l)}function Qs(l,d,g,_){if(50<Kc)throw Kc=0,ym=null,Error(n(185));Ce(l,g,_),((dn&2)===0||l!==hr)&&(l===hr&&((dn&2)===0&&(Zu|=g),ar===4&&ba(l,Nr)),Zr(l,_),g===1&&dn===0&&(d.mode&1)===0&&(Ol=Zt()+500,Lu&&ha()))}function Zr(l,d){var g=l.callbackNode;Ir(l,d);var _=bt(l,l===hr?Nr:0);if(_===0)g!==null&&rr(g),l.callbackNode=null,l.callbackPriority=0;else if(d=_&-_,l.callbackPriority!==d){if(g!=null&&rr(g),d===1)l.tag===0?lS(Wb.bind(null,l)):Av(Wb.bind(null,l)),sS(function(){(dn&6)===0&&ha()}),g=null;else{switch(Ge(_)){case 1:g=zs;break;case 4:g=to;break;case 16:g=Bs;break;case 536870912:g=ii;break;default:g=Bs}g=Qb(g,Ub.bind(null,l))}l.callbackPriority=d,l.callbackNode=g}}function Ub(l,d){if(nf=-1,rf=0,(dn&6)!==0)throw Error(n(327));var g=l.callbackNode;if(Ll()&&l.callbackNode!==g)return null;var _=bt(l,l===hr?Nr:0);if(_===0)return null;if((_&30)!==0||(_&l.expiredLanes)!==0||d)d=sf(l,_);else{d=_;var C=dn;dn|=2;var P=Vb();(hr!==l||Nr!==d)&&(Ii=null,Ol=Zt()+500,jo(l,d));do try{ES();break}catch(ie){Hb(l,ie)}while(!0);Rp(),Qu.current=P,dn=C,er!==null?d=0:(hr=null,Nr=0,d=ar)}if(d!==0){if(d===2&&(C=Yn(l),C!==0&&(_=C,d=vm(l,C))),d===1)throw g=$c,jo(l,0),ba(l,_),Zr(l,Zt()),g;if(d===6)ba(l,_);else{if(C=l.current.alternate,(_&30)===0&&!CS(C)&&(d=sf(l,_),d===2&&(P=Yn(l),P!==0&&(_=P,d=vm(l,P))),d===1))throw g=$c,jo(l,0),ba(l,_),Zr(l,Zt()),g;switch(l.finishedWork=C,l.finishedLanes=_,d){case 0:case 1:throw Error(n(345));case 2:_o(l,Qr,Ii);break;case 3:if(ba(l,_),(_&130023424)===_&&(d=gm+500-Zt(),10<d)){if(bt(l,0)!==0)break;if(C=l.suspendedLanes,(C&_)!==_){Br(),l.pingedLanes|=l.suspendedLanes&C;break}l.timeoutHandle=Np(_o.bind(null,l,Qr,Ii),d);break}_o(l,Qr,Ii);break;case 4:if(ba(l,_),(_&4194240)===_)break;for(d=l.eventTimes,C=-1;0<_;){var V=31-Sn(_);P=1<<V,V=d[V],V>C&&(C=V),_&=~P}if(_=C,_=Zt()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*SS(_/1960))-_,10<_){l.timeoutHandle=Np(_o.bind(null,l,Qr,Ii),_);break}_o(l,Qr,Ii);break;case 5:_o(l,Qr,Ii);break;default:throw Error(n(329))}}}return Zr(l,Zt()),l.callbackNode===g?Ub.bind(null,l):null}function vm(l,d){var g=Yc;return l.current.memoizedState.isDehydrated&&(jo(l,d).flags|=256),l=sf(l,d),l!==2&&(d=Qr,Qr=g,d!==null&&bm(d)),l}function bm(l){Qr===null?Qr=l:Qr.push.apply(Qr,l)}function CS(l){for(var d=l;;){if(d.flags&16384){var g=d.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var _=0;_<g.length;_++){var C=g[_],P=C.getSnapshot;C=C.value;try{if(!$s(P(),C))return!1}catch{return!1}}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ba(l,d){for(d&=~mm,d&=~Zu,l.suspendedLanes|=d,l.pingedLanes&=~d,l=l.expirationTimes;0<d;){var g=31-Sn(d),_=1<<g;l[g]=-1,d&=~_}}function Wb(l){if((dn&6)!==0)throw Error(n(327));Ll();var d=bt(l,0);if((d&1)===0)return Zr(l,Zt()),null;var g=sf(l,d);if(l.tag!==0&&g===2){var _=Yn(l);_!==0&&(d=_,g=vm(l,_))}if(g===1)throw g=$c,jo(l,0),ba(l,d),Zr(l,Zt()),g;if(g===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=d,_o(l,Qr,Ii),Zr(l,Zt()),null}function wm(l,d){var g=dn;dn|=1;try{return l(d)}finally{dn=g,dn===0&&(Ol=Zt()+500,Lu&&ha())}}function wo(l){ya!==null&&ya.tag===0&&(dn&6)===0&&Ll();var d=dn;dn|=1;var g=Ss.transition,_=me;try{if(Ss.transition=null,me=1,l)return l()}finally{me=_,Ss.transition=g,dn=d,(dn&6)===0&&ha()}}function jm(){ys=El.current,An(El)}function jo(l,d){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;if(g!==-1&&(l.timeoutHandle=-1,rS(g)),er!==null)for(g=er.return;g!==null;){var _=g;switch(Lp(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&Eu();break;case 3:Sl(),An(Kr),An(Or),Hp();break;case 5:Up(_);break;case 4:Sl();break;case 13:An(Fn);break;case 19:An(Fn);break;case 10:Ip(_.type._context);break;case 22:case 23:jm()}g=g.return}if(hr=l,er=l=wa(l.current,null),Nr=ys=d,ar=0,$c=null,mm=Zu=bo=0,Qr=Yc=null,xo!==null){for(d=0;d<xo.length;d++)if(g=xo[d],_=g.interleaved,_!==null){g.interleaved=null;var C=_.next,P=g.pending;if(P!==null){var V=P.next;P.next=C,_.next=V}g.pending=_}xo=null}return l}function Hb(l,d){do{var g=er;try{if(Rp(),qu.current=Vu,Uu){for(var _=zn.memoizedState;_!==null;){var C=_.queue;C!==null&&(C.pending=null),_=_.next}Uu=!1}if(vo=0,fr=ir=zn=null,Bc=!1,qc=0,pm.current=null,g===null||g.return===null){ar=1,$c=d,er=null;break}e:{var P=l,V=g.return,ie=g,ge=d;if(d=Nr,ie.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Te=ge,Ve=ie,Xe=Ve.tag;if((Ve.mode&1)===0&&(Xe===0||Xe===11||Xe===15)){var We=Ve.alternate;We?(Ve.updateQueue=We.updateQueue,Ve.memoizedState=We.memoizedState,Ve.lanes=We.lanes):(Ve.updateQueue=null,Ve.memoizedState=null)}var lt=mb(V);if(lt!==null){lt.flags&=-257,gb(lt,V,ie,P,d),lt.mode&1&&pb(P,Te,d),d=lt,ge=Te;var ht=d.updateQueue;if(ht===null){var mt=new Set;mt.add(ge),d.updateQueue=mt}else ht.add(ge);break e}else{if((d&1)===0){pb(P,Te,d),_m();break e}ge=Error(n(426))}}else if(Ln&&ie.mode&1){var Kn=mb(V);if(Kn!==null){(Kn.flags&65536)===0&&(Kn.flags|=256),gb(Kn,V,ie,P,d),Dp(Cl(ge,ie));break e}}P=ge=Cl(ge,ie),ar!==4&&(ar=2),Yc===null?Yc=[P]:Yc.push(P),P=V;do{switch(P.tag){case 3:P.flags|=65536,d&=-d,P.lanes|=d;var Ae=fb(P,ge,d);zv(P,Ae);break e;case 1:ie=ge;var ve=P.type,Ee=P.stateNode;if((P.flags&128)===0&&(typeof ve.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(xa===null||!xa.has(Ee)))){P.flags|=65536,d&=-d,P.lanes|=d;var Ze=hb(P,ie,d);zv(P,Ze);break e}}P=P.return}while(P!==null)}Yb(g)}catch(xt){d=xt,er===g&&g!==null&&(er=g=g.return);continue}break}while(!0)}function Vb(){var l=Qu.current;return Qu.current=Vu,l===null?Vu:l}function _m(){(ar===0||ar===3||ar===2)&&(ar=4),hr===null||(bo&268435455)===0&&(Zu&268435455)===0||ba(hr,Nr)}function sf(l,d){var g=dn;dn|=2;var _=Vb();(hr!==l||Nr!==d)&&(Ii=null,jo(l,d));do try{AS();break}catch(C){Hb(l,C)}while(!0);if(Rp(),dn=g,Qu.current=_,er!==null)throw Error(n(261));return hr=null,Nr=0,ar}function AS(){for(;er!==null;)$b(er)}function ES(){for(;er!==null&&!Is();)$b(er)}function $b(l){var d=Xb(l.alternate,l,ys);l.memoizedProps=l.pendingProps,d===null?Yb(l):er=d,pm.current=null}function Yb(l){var d=l;do{var g=d.alternate;if(l=d.return,(d.flags&32768)===0){if(g=wS(g,d,ys),g!==null){er=g;return}}else{if(g=jS(g,d),g!==null){g.flags&=32767,er=g;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{ar=6,er=null;return}}if(d=d.sibling,d!==null){er=d;return}er=d=l}while(d!==null);ar===0&&(ar=5)}function _o(l,d,g){var _=me,C=Ss.transition;try{Ss.transition=null,me=1,OS(l,d,g,_)}finally{Ss.transition=C,me=_}return null}function OS(l,d,g,_){do Ll();while(ya!==null);if((dn&6)!==0)throw Error(n(327));g=l.finishedWork;var C=l.finishedLanes;if(g===null)return null;if(l.finishedWork=null,l.finishedLanes=0,g===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var P=g.lanes|g.childLanes;if(le(l,P),l===hr&&(er=hr=null,Nr=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||ef||(ef=!0,Qb(Bs,function(){return Ll(),null})),P=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||P){P=Ss.transition,Ss.transition=null;var V=me;me=1;var ie=dn;dn|=4,pm.current=null,kS(l,g),Ib(g,l),X4(_p),io=!!jp,_p=jp=null,l.current=g,NS(g),br(),dn=ie,me=V,Ss.transition=P}else l.current=g;if(ef&&(ef=!1,ya=l,tf=C),P=l.pendingLanes,P===0&&(xa=null),Zn(g.stateNode),Zr(l,Zt()),d!==null)for(_=l.onRecoverableError,g=0;g<d.length;g++)C=d[g],_(C.value,{componentStack:C.stack,digest:C.digest});if(Ju)throw Ju=!1,l=xm,xm=null,l;return(tf&1)!==0&&l.tag!==0&&Ll(),P=l.pendingLanes,(P&1)!==0?l===ym?Kc++:(Kc=0,ym=l):Kc=0,ha(),null}function Ll(){if(ya!==null){var l=Ge(tf),d=Ss.transition,g=me;try{if(Ss.transition=null,me=16>l?16:l,ya===null)var _=!1;else{if(l=ya,ya=null,tf=0,(dn&6)!==0)throw Error(n(331));var C=dn;for(dn|=4,ut=l.current;ut!==null;){var P=ut,V=P.child;if((ut.flags&16)!==0){var ie=P.deletions;if(ie!==null){for(var ge=0;ge<ie.length;ge++){var Te=ie[ge];for(ut=Te;ut!==null;){var Ve=ut;switch(Ve.tag){case 0:case 11:case 15:Vc(8,Ve,P)}var Xe=Ve.child;if(Xe!==null)Xe.return=Ve,ut=Xe;else for(;ut!==null;){Ve=ut;var We=Ve.sibling,lt=Ve.return;if(Mb(Ve),Ve===Te){ut=null;break}if(We!==null){We.return=lt,ut=We;break}ut=lt}}}var ht=P.alternate;if(ht!==null){var mt=ht.child;if(mt!==null){ht.child=null;do{var Kn=mt.sibling;mt.sibling=null,mt=Kn}while(mt!==null)}}ut=P}}if((P.subtreeFlags&2064)!==0&&V!==null)V.return=P,ut=V;else e:for(;ut!==null;){if(P=ut,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Vc(9,P,P.return)}var Ae=P.sibling;if(Ae!==null){Ae.return=P.return,ut=Ae;break e}ut=P.return}}var ve=l.current;for(ut=ve;ut!==null;){V=ut;var Ee=V.child;if((V.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=V,ut=Ee;else e:for(V=ve;ut!==null;){if(ie=ut,(ie.flags&2048)!==0)try{switch(ie.tag){case 0:case 11:case 15:Xu(9,ie)}}catch(xt){qn(ie,ie.return,xt)}if(ie===V){ut=null;break e}var Ze=ie.sibling;if(Ze!==null){Ze.return=ie.return,ut=Ze;break e}ut=ie.return}}if(dn=C,ha(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(ai,l)}catch{}_=!0}return _}finally{me=g,Ss.transition=d}}return!1}function Kb(l,d,g){d=Cl(g,d),d=fb(l,d,1),l=ma(l,d,1),d=Br(),l!==null&&(Ce(l,1,d),Zr(l,d))}function qn(l,d,g){if(l.tag===3)Kb(l,l,g);else for(;d!==null;){if(d.tag===3){Kb(d,l,g);break}else if(d.tag===1){var _=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(xa===null||!xa.has(_))){l=Cl(g,l),l=hb(d,l,1),d=ma(d,l,1),l=Br(),d!==null&&(Ce(d,1,l),Zr(d,l));break}}d=d.return}}function LS(l,d,g){var _=l.pingCache;_!==null&&_.delete(d),d=Br(),l.pingedLanes|=l.suspendedLanes&g,hr===l&&(Nr&g)===g&&(ar===4||ar===3&&(Nr&130023424)===Nr&&500>Zt()-gm?jo(l,0):mm|=g),Zr(l,d)}function Gb(l,d){d===0&&((l.mode&1)===0?d=1:(d=qs,qs<<=1,(qs&130023424)===0&&(qs=4194304)));var g=Br();l=Di(l,d),l!==null&&(Ce(l,d,g),Zr(l,g))}function MS(l){var d=l.memoizedState,g=0;d!==null&&(g=d.retryLane),Gb(l,g)}function TS(l,d){var g=0;switch(l.tag){case 13:var _=l.stateNode,C=l.memoizedState;C!==null&&(g=C.retryLane);break;case 19:_=l.stateNode;break;default:throw Error(n(314))}_!==null&&_.delete(d),Gb(l,g)}var Xb;Xb=function(l,d,g){if(l!==null)if(l.memoizedProps!==d.pendingProps||Kr.current)Xr=!0;else{if((l.lanes&g)===0&&(d.flags&128)===0)return Xr=!1,bS(l,d,g);Xr=(l.flags&131072)!==0}else Xr=!1,Ln&&(d.flags&1048576)!==0&&Ev(d,Tu,d.index);switch(d.lanes=0,d.tag){case 2:var _=d.type;Ku(l,d),l=d.pendingProps;var C=vl(d,Or.current);Nl(d,g),C=Yp(null,d,_,l,C,g);var P=Kp();return d.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Gr(_)?(P=!0,Ou(d)):P=!1,d.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,Bp(d),C.updater=$u,d.stateNode=C,C._reactInternals=d,em(d,_,l,g),d=sm(null,d,_,!0,P,g)):(d.tag=0,Ln&&P&&Op(d),zr(null,d,C,g),d=d.child),d;case 16:_=d.elementType;e:{switch(Ku(l,d),l=d.pendingProps,C=_._init,_=C(_._payload),d.type=_,C=d.tag=PS(_),l=Ks(_,l),C){case 0:d=rm(null,d,_,l,g);break e;case 1:d=jb(null,d,_,l,g);break e;case 11:d=xb(null,d,_,l,g);break e;case 14:d=yb(null,d,_,Ks(_.type,l),g);break e}throw Error(n(306,_,""))}return d;case 0:return _=d.type,C=d.pendingProps,C=d.elementType===_?C:Ks(_,C),rm(l,d,_,C,g);case 1:return _=d.type,C=d.pendingProps,C=d.elementType===_?C:Ks(_,C),jb(l,d,_,C,g);case 3:e:{if(_b(d),l===null)throw Error(n(387));_=d.pendingProps,P=d.memoizedState,C=P.element,Fv(l,d),zu(d,_,null,g);var V=d.memoizedState;if(_=V.element,P.isDehydrated)if(P={element:_,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){C=Cl(Error(n(423)),d),d=kb(l,d,_,g,C);break e}else if(_!==C){C=Cl(Error(n(424)),d),d=kb(l,d,_,g,C);break e}else for(xs=da(d.stateNode.containerInfo.firstChild),gs=d,Ln=!0,Ys=null,g=Rv(d,null,_,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(jl(),_===C){d=Ri(l,d,g);break e}zr(l,d,_,g)}d=d.child}return d;case 5:return qv(d),l===null&&Tp(d),_=d.type,C=d.pendingProps,P=l!==null?l.memoizedProps:null,V=C.children,kp(_,C)?V=null:P!==null&&kp(_,P)&&(d.flags|=32),wb(l,d),zr(l,d,V,g),d.child;case 6:return l===null&&Tp(d),null;case 13:return Nb(l,d,g);case 4:return qp(d,d.stateNode.containerInfo),_=d.pendingProps,l===null?d.child=_l(d,null,_,g):zr(l,d,_,g),d.child;case 11:return _=d.type,C=d.pendingProps,C=d.elementType===_?C:Ks(_,C),xb(l,d,_,C,g);case 7:return zr(l,d,d.pendingProps,g),d.child;case 8:return zr(l,d,d.pendingProps.children,g),d.child;case 12:return zr(l,d,d.pendingProps.children,g),d.child;case 10:e:{if(_=d.type._context,C=d.pendingProps,P=d.memoizedProps,V=C.value,kn(Ru,_._currentValue),_._currentValue=V,P!==null)if($s(P.value,V)){if(P.children===C.children&&!Kr.current){d=Ri(l,d,g);break e}}else for(P=d.child,P!==null&&(P.return=d);P!==null;){var ie=P.dependencies;if(ie!==null){V=P.child;for(var ge=ie.firstContext;ge!==null;){if(ge.context===_){if(P.tag===1){ge=Pi(-1,g&-g),ge.tag=2;var Te=P.updateQueue;if(Te!==null){Te=Te.shared;var Ve=Te.pending;Ve===null?ge.next=ge:(ge.next=Ve.next,Ve.next=ge),Te.pending=ge}}P.lanes|=g,ge=P.alternate,ge!==null&&(ge.lanes|=g),Fp(P.return,g,d),ie.lanes|=g;break}ge=ge.next}}else if(P.tag===10)V=P.type===d.type?null:P.child;else if(P.tag===18){if(V=P.return,V===null)throw Error(n(341));V.lanes|=g,ie=V.alternate,ie!==null&&(ie.lanes|=g),Fp(V,g,d),V=P.sibling}else V=P.child;if(V!==null)V.return=P;else for(V=P;V!==null;){if(V===d){V=null;break}if(P=V.sibling,P!==null){P.return=V.return,V=P;break}V=V.return}P=V}zr(l,d,C.children,g),d=d.child}return d;case 9:return C=d.type,_=d.pendingProps.children,Nl(d,g),C=ks(C),_=_(C),d.flags|=1,zr(l,d,_,g),d.child;case 14:return _=d.type,C=Ks(_,d.pendingProps),C=Ks(_.type,C),yb(l,d,_,C,g);case 15:return vb(l,d,d.type,d.pendingProps,g);case 17:return _=d.type,C=d.pendingProps,C=d.elementType===_?C:Ks(_,C),Ku(l,d),d.tag=1,Gr(_)?(l=!0,Ou(d)):l=!1,Nl(d,g),db(d,_,C),em(d,_,C,g),sm(null,d,_,!0,l,g);case 19:return Cb(l,d,g);case 22:return bb(l,d,g)}throw Error(n(156,d.tag))};function Qb(l,d){return wn(l,d)}function DS(l,d,g,_){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(l,d,g,_){return new DS(l,d,g,_)}function km(l){return l=l.prototype,!(!l||!l.isReactComponent)}function PS(l){if(typeof l=="function")return km(l)?1:0;if(l!=null){if(l=l.$$typeof,l===T)return 11;if(l===G)return 14}return 2}function wa(l,d){var g=l.alternate;return g===null?(g=Cs(l.tag,d,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=d,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&14680064,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,d=l.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g}function af(l,d,g,_,C,P){var V=2;if(_=l,typeof l=="function")km(l)&&(V=1);else if(typeof l=="string")V=5;else e:switch(l){case O:return ko(g.children,C,P,d);case M:V=8,C|=8;break;case z:return l=Cs(12,g,d,C|2),l.elementType=z,l.lanes=P,l;case q:return l=Cs(13,g,d,C),l.elementType=q,l.lanes=P,l;case H:return l=Cs(19,g,d,C),l.elementType=H,l.lanes=P,l;case X:return of(g,C,P,d);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:V=10;break e;case D:V=9;break e;case T:V=11;break e;case G:V=14;break e;case ee:V=16,_=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return d=Cs(V,g,d,C),d.elementType=l,d.type=_,d.lanes=P,d}function ko(l,d,g,_){return l=Cs(7,l,_,d),l.lanes=g,l}function of(l,d,g,_){return l=Cs(22,l,_,d),l.elementType=X,l.lanes=g,l.stateNode={isHidden:!1},l}function Nm(l,d,g){return l=Cs(6,l,null,d),l.lanes=g,l}function Sm(l,d,g){return d=Cs(4,l.children!==null?l.children:[],l.key,d),d.lanes=g,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}function RS(l,d,g,_,C){this.tag=d,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=be(0),this.expirationTimes=be(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=be(0),this.identifierPrefix=_,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function Cm(l,d,g,_,C,P,V,ie,ge){return l=new RS(l,d,g,ie,ge),d===1?(d=1,P===!0&&(d|=8)):d=0,P=Cs(3,null,null,d),l.current=P,P.stateNode=l,P.memoizedState={element:_,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bp(P),l}function IS(l,d,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:_==null?null:""+_,children:l,containerInfo:d,implementation:g}}function Zb(l){if(!l)return fa;l=l._reactInternals;e:{if(Cr(l)!==l||l.tag!==1)throw Error(n(170));var d=l;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Gr(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(l.tag===1){var g=l.type;if(Gr(g))return Sv(l,g,d)}return d}function Jb(l,d,g,_,C,P,V,ie,ge){return l=Cm(g,_,!0,l,C,P,V,ie,ge),l.context=Zb(null),g=l.current,_=Br(),C=va(g),P=Pi(_,C),P.callback=d??null,ma(g,P,C),l.current.lanes=C,Ce(l,C,_),Zr(l,_),l}function lf(l,d,g,_){var C=d.current,P=Br(),V=va(C);return g=Zb(g),d.context===null?d.context=g:d.pendingContext=g,d=Pi(P,V),d.payload={element:l},_=_===void 0?null:_,_!==null&&(d.callback=_),l=ma(C,d,V),l!==null&&(Qs(l,C,V,P),Fu(l,C,V)),V}function cf(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function e1(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<d?g:d}}function Am(l,d){e1(l,d),(l=l.alternate)&&e1(l,d)}function FS(){return null}var t1=typeof reportError=="function"?reportError:function(l){console.error(l)};function Em(l){this._internalRoot=l}df.prototype.render=Em.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(n(409));lf(l,d,null,null)},df.prototype.unmount=Em.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;wo(function(){lf(null,l,null,null)}),d[Oi]=null}};function df(l){this._internalRoot=l}df.prototype.unstable_scheduleHydration=function(l){if(l){var d=Ar();l={blockedOn:null,target:l,priority:d};for(var g=0;g<xn.length&&d!==0&&d<xn[g].priority;g++);xn.splice(g,0,l),g===0&&Ci(l)}};function Om(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function uf(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function n1(){}function zS(l,d,g,_,C){if(C){if(typeof _=="function"){var P=_;_=function(){var Te=cf(V);P.call(Te)}}var V=Jb(d,_,l,0,null,!1,!1,"",n1);return l._reactRootContainer=V,l[Oi]=V.current,Mc(l.nodeType===8?l.parentNode:l),wo(),V}for(;C=l.lastChild;)l.removeChild(C);if(typeof _=="function"){var ie=_;_=function(){var Te=cf(ge);ie.call(Te)}}var ge=Cm(l,0,!1,null,null,!1,!1,"",n1);return l._reactRootContainer=ge,l[Oi]=ge.current,Mc(l.nodeType===8?l.parentNode:l),wo(function(){lf(d,ge,g,_)}),ge}function ff(l,d,g,_,C){var P=g._reactRootContainer;if(P){var V=P;if(typeof C=="function"){var ie=C;C=function(){var ge=cf(V);ie.call(ge)}}lf(d,V,l,C)}else V=zS(g,d,l,C,_);return cf(V)}wt=function(l){switch(l.tag){case 3:var d=l.stateNode;if(d.current.memoizedState.isDehydrated){var g=ur(d.pendingLanes);g!==0&&(ke(d,g|1),Zr(d,Zt()),(dn&6)===0&&(Ol=Zt()+500,ha()))}break;case 13:wo(function(){var _=Di(l,1);if(_!==null){var C=Br();Qs(_,l,1,C)}}),Am(l,1)}},cn=function(l){if(l.tag===13){var d=Di(l,134217728);if(d!==null){var g=Br();Qs(d,l,134217728,g)}Am(l,134217728)}},Gt=function(l){if(l.tag===13){var d=va(l),g=Di(l,d);if(g!==null){var _=Br();Qs(g,l,d,_)}Am(l,d)}},Ar=function(){return me},Us=function(l,d){var g=me;try{return me=l,d()}finally{me=g}},$n=function(l,d,g){switch(d){case"input":if(ft(l,g),d=g.name,g.type==="radio"&&d!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<g.length;d++){var _=g[d];if(_!==l&&_.form===l.form){var C=Au(_);if(!C)throw Error(n(90));Ue(_),ft(_,C)}}}break;case"textarea":te(l,g);break;case"select":d=g.value,d!=null&&we(l,!!g.multiple,d,!1)}},en=wm,ot=wo;var BS={usingClientEntryPoint:!1,Events:[Pc,xl,Au,bn,yt,wm]},Gc={findFiberByHostInstance:ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qS={bundleType:Gc.bundleType,version:Gc.version,rendererPackageName:Gc.rendererPackageName,rendererConfig:Gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=nt(l),l===null?null:l.stateNode},findFiberByHostInstance:Gc.findFiberByHostInstance||FS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{ai=hf.inject(qS),jn=hf}catch{}}return Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BS,Jr.createPortal=function(l,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Om(d))throw Error(n(200));return IS(l,d,null,g)},Jr.createRoot=function(l,d){if(!Om(l))throw Error(n(299));var g=!1,_="",C=t1;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onRecoverableError!==void 0&&(C=d.onRecoverableError)),d=Cm(l,1,!1,null,null,g,!1,_,C),l[Oi]=d.current,Mc(l.nodeType===8?l.parentNode:l),new Em(d)},Jr.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=nt(d),l=l===null?null:l.stateNode,l},Jr.flushSync=function(l){return wo(l)},Jr.hydrate=function(l,d,g){if(!uf(d))throw Error(n(200));return ff(null,l,d,!0,g)},Jr.hydrateRoot=function(l,d,g){if(!Om(l))throw Error(n(405));var _=g!=null&&g.hydratedSources||null,C=!1,P="",V=t1;if(g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(P=g.identifierPrefix),g.onRecoverableError!==void 0&&(V=g.onRecoverableError)),d=Jb(d,null,l,1,g??null,C,!1,P,V),l[Oi]=d.current,Mc(l),_)for(l=0;l<_.length;l++)g=_[l],C=g._getVersion,C=C(g._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[g,C]:d.mutableSourceEagerHydrationData.push(g,C);return new df(d)},Jr.render=function(l,d,g){if(!uf(d))throw Error(n(200));return ff(null,l,d,!1,g)},Jr.unmountComponentAtNode=function(l){if(!uf(l))throw Error(n(40));return l._reactRootContainer?(wo(function(){ff(null,null,l,!1,function(){l._reactRootContainer=null,l[Oi]=null})}),!0):!1},Jr.unstable_batchedUpdates=wm,Jr.unstable_renderSubtreeIntoContainer=function(l,d,g,_){if(!uf(g))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return ff(l,d,g,!1,_)},Jr.version="18.3.1-next-f1338f8080-20240426",Jr}var u1;function Gx(){if(u1)return Dm.exports;u1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Dm.exports=ZS(),Dm.exports}var f1;function JS(){if(f1)return gf;f1=1;var t=Gx();return gf.createRoot=t.createRoot,gf.hydrateRoot=t.hydrateRoot,gf}var eC=JS();const tC=Kx(eC);var fd=Gx();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Od.apply(this,arguments)}var Fa;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fa||(Fa={}));const h1="popstate";function nC(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:o,hash:c}=r.location;return Xg("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Jf(i)}return sC(e,n,null,t)}function Gn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rC(){return Math.random().toString(36).substr(2,8)}function p1(t,e){return{usr:t.state,key:t.key,idx:e}}function Xg(t,e,n,r){return n===void 0&&(n=null),Od({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oc(e):e,{state:n,key:e&&e.key||r||rC()})}function Jf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function oc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function sC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c=Fa.Pop,u=null,f=h();f==null&&(f=0,o.replaceState(Od({},o.state,{idx:f}),""));function h(){return(o.state||{idx:null}).idx}function p(){c=Fa.Pop;let y=h(),w=y==null?null:y-f;f=y,u&&u({action:c,location:b.location,delta:w})}function m(y,w){c=Fa.Push;let k=Xg(b.location,y,w);f=h()+1;let N=p1(k,f),j=b.createHref(k);try{o.pushState(N,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(j)}a&&u&&u({action:c,location:b.location,delta:1})}function x(y,w){c=Fa.Replace;let k=Xg(b.location,y,w);f=h();let N=p1(k,f),j=b.createHref(k);o.replaceState(N,"",j),a&&u&&u({action:c,location:b.location,delta:0})}function v(y){let w=i.location.origin!=="null"?i.location.origin:i.location.href,k=typeof y=="string"?y:Jf(y);return k=k.replace(/ $/,"%20"),Gn(w,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,w)}let b={get action(){return c},get location(){return t(i,o)},listen(y){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(h1,p),u=y,()=>{i.removeEventListener(h1,p),u=null}},createHref(y){return e(i,y)},createURL:v,encodeLocation(y){let w=v(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:x,go(y){return o.go(y)}};return b}var m1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(m1||(m1={}));function iC(t,e,n){return n===void 0&&(n="/"),aC(t,e,n)}function aC(t,e,n,r){let i=typeof e=="string"?oc(e):e,a=Qx(i.pathname||"/",n);if(a==null)return null;let o=pk(t);oC(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let f=vC(a);c=gC(o[u],f)}return c}function pk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Gn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let f=Ua([r,u.relativePath]),h=n.concat(u);a.children&&a.children.length>0&&(Gn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),pk(a.children,e,h,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:pC(f,a.index),routesMeta:h})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let u of mk(a.path))i(a,o,u)}),e}function mk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=mk(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function oC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lC=/^:[\w-]+$/,cC=3,dC=2,uC=1,fC=10,hC=-2,g1=t=>t==="*";function pC(t,e){let n=t.split("/"),r=n.length;return n.some(g1)&&(r+=hC),e&&(r+=dC),n.filter(i=>!g1(i)).reduce((i,a)=>i+(lC.test(a)?cC:a===""?uC:fC),r)}function mC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function gC(t,e,n){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],f=c===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",p=xC({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},h),m=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Ua([a,p.pathname]),pathnameBase:kC(Ua([a,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(a=Ua([a,p.pathnameBase]))}return o}function xC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=yC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,h,p)=>{let{paramName:m,isOptional:x}=h;if(m==="*"){let b=c[p]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=c[p];return x&&!v?f[m]=void 0:f[m]=(v||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:t}}function yC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Xx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function vC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Qx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const bC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wC=t=>bC.test(t);function jC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?oc(t):t,a;if(n)if(wC(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Xx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?a=x1(n.substring(1),"/"):a=x1(n,e)}else a=e;return{pathname:a,search:NC(r),hash:SC(i)}}function x1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Im(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _C(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Zx(t,e){let n=_C(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jx(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=oc(t):(i=Od({},t),Gn(!i.pathname||!i.pathname.includes("?"),Im("?","pathname","search",i)),Gn(!i.pathname||!i.pathname.includes("#"),Im("#","pathname","hash",i)),Gn(!i.search||!i.search.includes("#"),Im("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}c=p>=0?e[p]:"/"}let u=jC(i,c),f=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||h)&&(u.pathname+="/"),u}const Ua=t=>t.join("/").replace(/\/\/+/g,"/"),kC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),NC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,SC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function CC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gk=["post","put","patch","delete"];new Set(gk);const AC=["get",...gk];new Set(AC);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ld(){return Ld=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ld.apply(this,arguments)}const ey=L.createContext(null),EC=L.createContext(null),Za=L.createContext(null),Sh=L.createContext(null),na=L.createContext({outlet:null,matches:[],isDataRoute:!1}),xk=L.createContext(null);function OC(t,e){let{relative:n}=e===void 0?{}:e;lc()||Gn(!1);let{basename:r,navigator:i}=L.useContext(Za),{hash:a,pathname:o,search:c}=vk(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Ua([r,o])),i.createHref({pathname:u,search:c,hash:a})}function lc(){return L.useContext(Sh)!=null}function el(){return lc()||Gn(!1),L.useContext(Sh).location}function yk(t){L.useContext(Za).static||L.useLayoutEffect(t)}function cc(){let{isDataRoute:t}=L.useContext(na);return t?VC():LC()}function LC(){lc()||Gn(!1);let t=L.useContext(ey),{basename:e,future:n,navigator:r}=L.useContext(Za),{matches:i}=L.useContext(na),{pathname:a}=el(),o=JSON.stringify(Zx(i,n.v7_relativeSplatPath)),c=L.useRef(!1);return yk(()=>{c.current=!0}),L.useCallback(function(f,h){if(h===void 0&&(h={}),!c.current)return;if(typeof f=="number"){r.go(f);return}let p=Jx(f,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ua([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,a,t])}const MC=L.createContext(null);function TC(t){let e=L.useContext(na).outlet;return e&&L.createElement(MC.Provider,{value:t},e)}function vk(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(Za),{matches:i}=L.useContext(na),{pathname:a}=el(),o=JSON.stringify(Zx(i,r.v7_relativeSplatPath));return L.useMemo(()=>Jx(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function DC(t,e){return PC(t,e)}function PC(t,e,n,r){lc()||Gn(!1);let{navigator:i}=L.useContext(Za),{matches:a}=L.useContext(na),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let f=el(),h;if(e){var p;let y=typeof e=="string"?oc(e):e;u==="/"||(p=y.pathname)!=null&&p.startsWith(u)||Gn(!1),h=y}else h=f;let m=h.pathname||"/",x=m;if(u!=="/"){let y=u.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=iC(t,{pathname:x}),b=BC(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},c,y.params),pathname:Ua([u,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Ua([u,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,n,r);return e&&b?L.createElement(Sh.Provider,{value:{location:Ld({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Fa.Pop}},b):b}function RC(){let t=HC(),e=CC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:i},n):null,null)}const IC=L.createElement(RC,null);class FC extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(na.Provider,{value:this.props.routeContext},L.createElement(xk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zC(t){let{routeContext:e,match:n,children:r}=t,i=L.useContext(ey);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(na.Provider,{value:e},r)}function BC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let h=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);h>=0||Gn(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:m,errors:x}=n,v=p.route.loader&&m[p.route.id]===void 0&&(!x||x[p.route.id]===void 0);if(p.route.lazy||v){u=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let x,v=!1,b=null,y=null;n&&(x=c&&p.route.id?c[p.route.id]:void 0,b=p.route.errorElement||IC,u&&(f<0&&m===0?($C("route-fallback"),v=!0,y=null):f===m&&(v=!0,y=p.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),k=()=>{let N;return x?N=b:v?N=y:p.route.Component?N=L.createElement(p.route.Component,null):p.route.element?N=p.route.element:N=h,L.createElement(zC,{match:p,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:N})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?L.createElement(FC,{location:n.location,revalidation:n.revalidation,component:b,error:x,children:k(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):k()},null)}var bk=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(bk||{}),wk=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(wk||{});function qC(t){let e=L.useContext(ey);return e||Gn(!1),e}function UC(t){let e=L.useContext(EC);return e||Gn(!1),e}function WC(t){let e=L.useContext(na);return e||Gn(!1),e}function jk(t){let e=WC(),n=e.matches[e.matches.length-1];return n.route.id||Gn(!1),n.route.id}function HC(){var t;let e=L.useContext(xk),n=UC(),r=jk();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function VC(){let{router:t}=qC(bk.UseNavigateStable),e=jk(wk.UseNavigateStable),n=L.useRef(!1);return yk(()=>{n.current=!0}),L.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ld({fromRouteId:e},a)))},[t,e])}const y1={};function $C(t,e,n){y1[t]||(y1[t]=!0)}function YC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function v1(t){let{to:e,replace:n,state:r,relative:i}=t;lc()||Gn(!1);let{future:a,static:o}=L.useContext(Za),{matches:c}=L.useContext(na),{pathname:u}=el(),f=cc(),h=Jx(e,Zx(c,a.v7_relativeSplatPath),u,i==="path"),p=JSON.stringify(h);return L.useEffect(()=>f(JSON.parse(p),{replace:n,state:r,relative:i}),[f,p,i,n,r]),null}function KC(t){return TC(t.context)}function Sr(t){Gn(!1)}function GC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Fa.Pop,navigator:a,static:o=!1,future:c}=t;lc()&&Gn(!1);let u=e.replace(/^\/*/,"/"),f=L.useMemo(()=>({basename:u,navigator:a,static:o,future:Ld({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof r=="string"&&(r=oc(r));let{pathname:h="/",search:p="",hash:m="",state:x=null,key:v="default"}=r,b=L.useMemo(()=>{let y=Qx(h,u);return y==null?null:{location:{pathname:y,search:p,hash:m,state:x,key:v},navigationType:i}},[u,h,p,m,x,v,i]);return b==null?null:L.createElement(Za.Provider,{value:f},L.createElement(Sh.Provider,{children:n,value:b}))}function XC(t){let{children:e,location:n}=t;return DC(Qg(e),n)}new Promise(()=>{});function Qg(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,i)=>{if(!L.isValidElement(r))return;let a=[...e,i];if(r.type===L.Fragment){n.push.apply(n,Qg(r.props.children,a));return}r.type!==Sr&&Gn(!1),!r.props.index||!r.props.children||Gn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Qg(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zg(){return Zg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zg.apply(this,arguments)}function QC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ZC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function JC(t,e){return t.button===0&&(!e||e==="_self")&&!ZC(t)}const e3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],t3="6";try{window.__reactRouterVersion=t3}catch{}const n3="startTransition",b1=GS[n3];function r3(t){let{basename:e,children:n,future:r,window:i}=t,a=L.useRef();a.current==null&&(a.current=nC({window:i,v5Compat:!0}));let o=a.current,[c,u]=L.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},h=L.useCallback(p=>{f&&b1?b1(()=>u(p)):u(p)},[u,f]);return L.useLayoutEffect(()=>o.listen(h),[o,h]),L.useEffect(()=>YC(r),[r]),L.createElement(GC,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const s3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",i3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a3=L.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:c,target:u,to:f,preventScrollReset:h,viewTransition:p}=e,m=QC(e,e3),{basename:x}=L.useContext(Za),v,b=!1;if(typeof f=="string"&&i3.test(f)&&(v=f,s3))try{let N=new URL(window.location.href),j=f.startsWith("//")?new URL(N.protocol+f):new URL(f),S=Qx(j.pathname,x);j.origin===N.origin&&S!=null?f=S+j.search+j.hash:b=!0}catch{}let y=OC(f,{relative:i}),w=o3(f,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:p});function k(N){r&&r(N),N.defaultPrevented||w(N)}return L.createElement("a",Zg({},m,{href:v||y,onClick:b||a?r:k,ref:n,target:u}))});var w1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(w1||(w1={}));var j1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(j1||(j1={}));function o3(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=cc(),f=el(),h=vk(t,{relative:o});return L.useCallback(p=>{if(JC(p,n)){p.preventDefault();let m=r!==void 0?r:Jf(f)===Jf(h);u(t,{replace:m,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[f,u,h,r,i,n,t,a,o,c])}const _1=t=>{let e;const n=new Set,r=(f,h)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const m=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(x=>x(e,m))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f))},u=e=t(r,i,c);return c},l3=(t=>t?_1(t):_1),c3=t=>t;function d3(t,e=c3){const n=jt.useSyncExternalStore(t.subscribe,jt.useCallback(()=>e(t.getState()),[t,e]),jt.useCallback(()=>e(t.getInitialState()),[t,e]));return jt.useDebugValue(n),n}const k1=t=>{const e=l3(t),n=r=>d3(e,r);return Object.assign(n,e),n},_k=(t=>t?k1(t):k1);function u3(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const Jg=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Jg(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Jg(r)(n)}}}},f3=(t,e)=>(n,r,i)=>{let a={storage:u3(()=>localStorage),partialize:b=>b,version:0,merge:(b,y)=>({...y,...b}),...e},o=!1;const c=new Set,u=new Set;let f=a.storage;if(!f)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...b)},r,i);const h=()=>{const b=a.partialize({...r()});return f.setItem(a.name,{state:b,version:a.version})},p=i.setState;i.setState=(b,y)=>(p(b,y),h());const m=t((...b)=>(n(...b),h()),r,i);i.getInitialState=()=>m;let x;const v=()=>{var b,y;if(!f)return;o=!1,c.forEach(k=>{var N;return k((N=r())!=null?N:m)});const w=((y=a.onRehydrateStorage)==null?void 0:y.call(a,(b=r())!=null?b:m))||void 0;return Jg(f.getItem.bind(f))(a.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==a.version){if(a.migrate){const N=a.migrate(k.state,k.version);return N instanceof Promise?N.then(j=>[!0,j]):[!0,N]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var N;const[j,S]=k;if(x=a.merge(S,(N=r())!=null?N:m),n(x,!0),j)return h()}).then(()=>{w==null||w(x,void 0),x=r(),o=!0,u.forEach(k=>k(x))}).catch(k=>{w==null||w(void 0,k)})};return i.persist={setOptions:b=>{a={...a,...b},b.storage&&(f=b.storage)},clearStorage:()=>{f==null||f.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:b=>(c.add(b),()=>{c.delete(b)}),onFinishHydration:b=>(u.add(b),()=>{u.delete(b)})},a.skipHydration||v(),x||m},h3=f3,p3=(t=100)=>new Promise(e=>setTimeout(e,t)),N1={charts:[{chart_name:"audit-projects-by-year",can_view:!0,can_export:!0},{chart_name:"investigations-by-year",can_view:!0,can_export:!0},{chart_name:"finding-status-by-year",can_view:!0,can_export:!0}],tasks:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},pages:["dashboard","tasks","my-actions","audit-findings","annual-audit-plan"],components:["dashboard_page","my_actions_page","department_actions_page","clevel_actions_page","management_actions_page","all_findings_actions_page","annual_audit_plan_page","audit_universe_page","risk_management_page","audit_maturity_page","task_manager","access_management","audit_finding_page"],interactiveComponents:["*"]},As={"finding-status-by-year":{2024:{Open:15,"In Progress":8,Closed:22,"Risk Accepted":3},2025:{Open:12,"In Progress":10,Closed:18,"Risk Accepted":2}},"actions-by-audit-and-risk":[{auditYear:"2024",auditName:"Financial Audit",riskLevel:"High",count:12},{auditYear:"2024",auditName:"Financial Audit",riskLevel:"Medium",count:8},{auditYear:"2024",auditName:"Operational Audit",riskLevel:"High",count:15},{auditYear:"2025",auditName:"IT Audit",riskLevel:"High",count:10}],"findings-by-audit-and-risk":[{auditYear:"2024",auditName:"Financial Audit",riskLevel:"High",count:8},{auditYear:"2024",auditName:"Operational Audit",riskLevel:"Medium",count:12}],"finding-actions-aging":{labels:["0-30 days","31-60 days","61-90 days","91-180 days","180+ days"],datasets:[{label:"Actions",data:[15,12,8,5,3],backgroundColor:"rgba(239, 68, 68, 0.5)"}]},"finding-risk-distribution-by-project":[{project:"Financial Audit 2024",high:5,medium:8,low:3},{project:"IT Audit 2024",high:3,medium:6,low:2},{project:"Operational Audit 2024",high:7,medium:10,low:4}],"project-risk-distribution":{labels:["High","Medium","Low"],datasets:[{label:"Projects",data:[15,28,12],backgroundColor:["rgba(239, 68, 68, 0.5)","rgba(251, 191, 36, 0.5)","rgba(34, 197, 94, 0.5)"]}]},"department-stats":{totalActions:93,openActions:25,closedActions:58,overdueActions:12,upcomingActions:8},"control-element-distribution":[{controlElement:"Control Environment",high:5,medium:8,low:2},{controlElement:"Risk Assessment",high:3,medium:6,low:1},{controlElement:"Control Activities",high:7,medium:10,low:3}],"risk-type-distribution":[{riskType:"Financial",high:8,medium:12,low:3},{riskType:"Operational",high:6,medium:10,low:4},{riskType:"Compliance",high:4,medium:7,low:2}],"fraud-internal-control":{result:[["Category","Count","Impact"],["Fraud Detection","12","125,000"],["Internal Control","8","85,000"],["Risk Management","15","95,000"]]},"loss-prevention-summary":{result:[["Period","Incidents","Loss Amount"],["Q1 2024","5","45,000"],["Q2 2024","8","62,000"],["Q3 2024","6","48,000"],["Q4 2024","4","35,000"]]}},Js=[{key:"AUDIT-1001",summary:"Implement enhanced financial controls",description:"Review and strengthen financial control procedures",status:"Open",displayStatus:"Open",dueDate:"2025-03-15",responsible:"john.doe@example.com",responsibleEmail:"john.doe@example.com",cLevel:"CFO",auditYear:"2024",auditName:"Financial Audit",riskLevel:"High"},{key:"AUDIT-1002",summary:"Update IT security policies",description:"Review and update IT security documentation",status:"In Progress",displayStatus:"In Progress",dueDate:"2025-02-28",responsible:"jane.smith@example.com",responsibleEmail:"jane.smith@example.com",cLevel:"CTO",auditYear:"2024",auditName:"IT Audit",riskLevel:"Medium"},{key:"AUDIT-1003",summary:"Improve operational procedures",description:"Enhance operational workflow documentation",status:"Closed",displayStatus:"Closed",dueDate:"2024-12-31",responsible:"bob.wilson@example.com",responsibleEmail:"bob.wilson@example.com",auditYear:"2024",auditName:"Operational Audit",riskLevel:"Medium"},{key:"AUDIT-1004",summary:"Enhance compliance monitoring",description:"Implement automated compliance monitoring system",status:"Open",displayStatus:"Open",dueDate:"2025-04-10",responsible:"alice.brown@example.com",responsibleEmail:"alice.brown@example.com",auditYear:"2024",auditName:"Compliance Audit",riskLevel:"High"},{key:"AUDIT-1005",summary:"Update risk assessment framework",description:"Review and update enterprise risk assessment methodology",status:"In Progress",displayStatus:"In Progress",dueDate:"2025-03-20",responsible:"charlie.davis@example.com",responsibleEmail:"charlie.davis@example.com",auditYear:"2024",auditName:"Risk Management Audit",riskLevel:"High"},{key:"AUDIT-1006",summary:"Strengthen data privacy controls",description:"Implement GDPR compliance measures",status:"Open",displayStatus:"Open",dueDate:"2025-05-01",responsible:"diana.evans@example.com",responsibleEmail:"diana.evans@example.com",auditYear:"2024",auditName:"Data Privacy Audit",riskLevel:"Medium"},{key:"AUDIT-1007",summary:"Improve vendor management process",description:"Enhance vendor onboarding and monitoring procedures",status:"Closed",displayStatus:"Closed",dueDate:"2024-11-15",responsible:"frank.garcia@example.com",responsibleEmail:"frank.garcia@example.com",auditYear:"2024",auditName:"Vendor Management Audit",riskLevel:"Low"},{key:"AUDIT-1008",summary:"Update business continuity plan",description:"Review and test business continuity procedures",status:"Open",displayStatus:"Open",dueDate:"2025-06-30",responsible:"grace.harris@example.com",responsibleEmail:"grace.harris@example.com",auditYear:"2024",auditName:"Business Continuity Audit",riskLevel:"High"},{key:"AUDIT-1009",summary:"Enhance vendor risk assessment",description:"Implement comprehensive vendor risk evaluation process",status:"In Progress",displayStatus:"In Progress",dueDate:"2025-04-20",responsible:"henry.irwin@example.com",responsibleEmail:"henry.irwin@example.com",auditYear:"2024",auditName:"Vendor Management Audit",riskLevel:"Medium"},{key:"AUDIT-1010",summary:"Improve internal audit documentation",description:"Standardize audit documentation templates",status:"Closed",displayStatus:"Closed",dueDate:"2024-10-15",responsible:"ivy.jackson@example.com",responsibleEmail:"ivy.jackson@example.com",auditYear:"2024",auditName:"Internal Audit",riskLevel:"Low"},{key:"AUDIT-1011",summary:"Strengthen cybersecurity framework",description:"Enhance cybersecurity controls and monitoring",status:"Open",displayStatus:"Open",dueDate:"2025-05-10",responsible:"jack.kelly@example.com",responsibleEmail:"jack.kelly@example.com",cLevel:"CTO",auditYear:"2024",auditName:"Cybersecurity Audit",riskLevel:"High"},{key:"AUDIT-1012",summary:"Update procurement policies",description:"Review and enhance procurement procedures",status:"In Progress",displayStatus:"In Progress",dueDate:"2025-03-30",responsible:"karen.lee@example.com",responsibleEmail:"karen.lee@example.com",auditYear:"2024",auditName:"Procurement Audit",riskLevel:"Medium"},{key:"AUDIT-1013",summary:"Implement automated compliance monitoring",description:"Deploy automated compliance monitoring system",status:"Open",displayStatus:"Open",dueDate:"2025-05-15",responsible:"lisa.martinez@example.com",responsibleEmail:"lisa.martinez@example.com",auditYear:"2024",auditName:"Compliance Audit",riskLevel:"High"},{key:"AUDIT-1014",summary:"Enhance data backup procedures",description:"Improve data backup and recovery processes",status:"Closed",displayStatus:"Closed",dueDate:"2024-11-30",responsible:"mike.nelson@example.com",responsibleEmail:"mike.nelson@example.com",auditYear:"2024",auditName:"IT Infrastructure Audit",riskLevel:"Medium"},{key:"AUDIT-1015",summary:"Strengthen access control mechanisms",description:"Implement multi-factor authentication across systems",status:"In Progress",displayStatus:"In Progress",dueDate:"2025-04-20",responsible:"nancy.owen@example.com",responsibleEmail:"nancy.owen@example.com",auditYear:"2024",auditName:"IT Security Audit 2024",riskLevel:"High"},{key:"AUDIT-1016",summary:"Improve incident response procedures",description:"Enhance security incident response and reporting",status:"Open",displayStatus:"Open",dueDate:"2025-06-01",responsible:"oscar.peterson@example.com",responsibleEmail:"oscar.peterson@example.com",auditYear:"2024",auditName:"IT Security Audit 2024",riskLevel:"High"},{key:"AUDIT-1017",summary:"Update vendor contract templates",description:"Standardize vendor contract terms and conditions",status:"Closed",displayStatus:"Closed",dueDate:"2024-10-15",responsible:"patricia.quinn@example.com",responsibleEmail:"patricia.quinn@example.com",auditYear:"2024",auditName:"Vendor Management Audit",riskLevel:"Low"},{key:"AUDIT-1018",summary:"Enhance fraud detection algorithms",description:"Implement machine learning for fraud detection",status:"In Progress",displayStatus:"In Progress",dueDate:"2025-05-30",responsible:"quinn.richards@example.com",responsibleEmail:"quinn.richards@example.com",auditYear:"2024",auditName:"Fraud Investigation 2024",riskLevel:"High"},{key:"AUDIT-1019",summary:"Improve employee training programs",description:"Develop comprehensive security awareness training",status:"Open",displayStatus:"Open",dueDate:"2025-07-15",responsible:"rachel.stewart@example.com",responsibleEmail:"rachel.stewart@example.com",auditYear:"2024",auditName:"HR Compliance Audit",riskLevel:"Medium"},{key:"AUDIT-1020",summary:"Strengthen network security controls",description:"Implement advanced network monitoring and protection",status:"Open",displayStatus:"Open",dueDate:"2025-08-01",responsible:"steve.thomas@example.com",responsibleEmail:"steve.thomas@example.com",cLevel:"CTO",auditYear:"2024",auditName:"IT Security Audit 2024",riskLevel:"High"},{key:"AUDIT-2001",summary:"Cloud infrastructure security hardening",description:"Enhance cloud security configurations and monitoring",status:"Open",displayStatus:"Open",dueDate:"2025-09-15",responsible:"tina.underwood@example.com",responsibleEmail:"tina.underwood@example.com",auditYear:"2025",auditName:"Cloud Security Audit 2025",riskLevel:"High"},{key:"AUDIT-2002",summary:"Supply chain risk assessment framework",description:"Develop comprehensive supply chain risk management",status:"In Progress",displayStatus:"In Progress",dueDate:"2025-08-30",responsible:"victor.vega@example.com",responsibleEmail:"victor.vega@example.com",auditYear:"2025",auditName:"Supply Chain Risk Audit",riskLevel:"Medium"},{key:"AUDIT-2003",summary:"API security enhancement",description:"Implement API authentication and rate limiting",status:"Open",displayStatus:"Open",dueDate:"2025-10-01",responsible:"wendy.walker@example.com",responsibleEmail:"wendy.walker@example.com",auditYear:"2025",auditName:"API Security Audit",riskLevel:"High"},{key:"AUDIT-2004",summary:"Third-party risk standardization",description:"Standardize third-party vendor risk assessment process",status:"Open",displayStatus:"Open",dueDate:"2025-09-20",responsible:"xavier.yang@example.com",responsibleEmail:"xavier.yang@example.com",auditYear:"2025",auditName:"Third-Party Risk Audit",riskLevel:"Medium"},{key:"AUDIT-3001",summary:"Department process optimization",description:"Review and optimize department workflows and procedures",status:"Open",displayStatus:"Open",dueDate:"2025-04-15",responsible:"dept1.director@example.com",responsibleEmail:"dept1.director@example.com",auditYear:"2024",auditName:"Department Audit",riskLevel:"Medium"},{key:"AUDIT-3002",summary:"Department resource allocation review",description:"Assess and optimize resource distribution within department",status:"In Progress",displayStatus:"In Progress",dueDate:"2025-03-25",responsible:"dept2.director@example.com",responsibleEmail:"dept2.director@example.com",auditYear:"2024",auditName:"Department Audit",riskLevel:"Low"},{key:"AUDIT-3003",summary:"Department compliance training",description:"Implement department-wide compliance training program",status:"Open",displayStatus:"Open",dueDate:"2025-05-10",responsible:"dept3.director@example.com",responsibleEmail:"dept3.director@example.com",auditYear:"2024",auditName:"Department Audit",riskLevel:"Medium"},{key:"AUDIT-3004",summary:"Department performance metrics",description:"Establish and monitor department performance KPIs",status:"Closed",displayStatus:"Closed",dueDate:"2024-12-20",responsible:"dept4.director@example.com",responsibleEmail:"dept4.director@example.com",auditYear:"2024",auditName:"Department Audit",riskLevel:"Low"},{key:"AUDIT-3005",summary:"Department budget optimization",description:"Review and optimize department budget allocation",status:"In Progress",displayStatus:"In Progress",dueDate:"2025-04-30",responsible:"dept5.director@example.com",responsibleEmail:"dept5.director@example.com",auditYear:"2024",auditName:"Department Audit",riskLevel:"Medium"},...Array.from({length:45},(t,e)=>{const n=e%5+1,r=["Open","In Progress","Closed","Overdue"],i=["High","Medium","Low"],a=["2024","2025"],o=r[e%r.length],c=i[e%i.length],u=a[e%a.length],f=new Date(2025,3+e%6,1+e%28).toISOString().split("T")[0];return{key:`AUDIT-3${String(1006+e).padStart(3,"0")}`,summary:`Department ${n} action ${e+1}`,description:`Department ${n} specific action item ${e+1} for process improvement`,status:o,displayStatus:o,dueDate:f,responsible:`dept${n}.director@example.com`,responsibleEmail:`dept${n}.director@example.com`,auditYear:u,auditName:`Department ${n} Audit`,riskLevel:c}}),...Array.from({length:100},(t,e)=>{const n=e%4+1,i=[{email:"manager1@example.com",name:"Manager One"},{email:"manager2@example.com",name:"Manager Two"},{email:"manager3@example.com",name:"Manager Three"},{email:"manager4@example.com",name:"Manager Four"}][n-1];if(!i)throw new Error("Manager not found");const a=["Open","In Progress","Closed","Overdue","Risk Accepted"],o=["High","Medium","Low"],c=["2024","2025"],u=a[e%a.length],f=o[e%o.length],h=c[e%c.length],p=new Date(2025,2+e%8,1+e%28).toISOString().split("T")[0],m=["Implement process improvements","Update documentation standards","Enhance quality controls","Strengthen compliance measures","Optimize workflow efficiency","Improve team collaboration","Enhance reporting mechanisms","Strengthen risk management"];return{key:`AUDIT-4${String(e+1).padStart(3,"0")}`,summary:`${m[e%m.length]} - Task ${e+1}`,description:`Action item ${e+1} assigned to ${i.name} for team management`,status:u,displayStatus:u,dueDate:p,responsible:i.email,responsibleEmail:i.email,auditYear:h,auditName:`Team Audit ${n}`,riskLevel:f}}),...Array.from({length:40},(t,e)=>{const n=["CFO","CTO","COO","CHRO"],r=n[e%n.length],i=["dept1.director@example.com","dept2.director@example.com","dept3.director@example.com","dept4.director@example.com","dept5.director@example.com"],a=i[e%i.length],o=["Open","In Progress","Closed","Overdue"],c=["High","Medium","Low"],u=["2024","2025"],f=o[e%o.length],h=c[e%c.length],p=u[e%u.length],m=new Date(2025,4+e%6,1+e%28).toISOString().split("T")[0],x=["Strategic initiative implementation","Executive oversight review","C-level compliance assessment","Organizational transformation","Executive risk management","Strategic planning execution"];return{key:`AUDIT-C${String(e+1).padStart(3,"0")}`,summary:`${x[e%x.length]} - ${r}`,description:`C-level action ${e+1} for ${r} overseeing department operations`,status:f,displayStatus:f,dueDate:m,responsible:a,responsibleEmail:a,cLevel:r,auditYear:p,auditName:`${r} Strategic Audit`,riskLevel:h}})],mi=[{id:1,finding_id:"FND-001",finding_name:"Inadequate Financial Controls",finding_description:"Financial control procedures need enhancement to meet regulatory requirements",audit_type:"Financial",risk_type:"Financial",internal_control_element:"Control Activities",country:"Turkey",audit_year:"2024",audit_name:"Financial Audit Q1 2024",risk_level:"High",financial_impact:125e3,status:"Open",created_by:"audit@example.com",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-15T00:00:00Z"},{id:2,finding_id:"FND-002",finding_name:"IT Security Gaps",finding_description:"IT security policies require updates and implementation of advanced threat detection",audit_type:"IT",risk_type:"Operational",internal_control_element:"Control Environment",country:"Turkey",audit_year:"2024",audit_name:"IT Security Audit 2024",risk_level:"Medium",financial_impact:85e3,status:"In Progress",created_by:"audit@example.com",created_at:"2024-02-10T00:00:00Z",updated_at:"2024-02-10T00:00:00Z"},{id:3,finding_id:"FND-003",finding_name:"Vendor Management Weaknesses",finding_description:"Lack of comprehensive vendor risk assessment and monitoring procedures",audit_type:"Operational",risk_type:"Operational",internal_control_element:"Risk Assessment",country:"Germany",audit_year:"2024",audit_name:"Vendor Management Audit",risk_level:"Medium",financial_impact:45e3,status:"Open",created_by:"audit@example.com",created_at:"2024-03-05T00:00:00Z",updated_at:"2024-03-05T00:00:00Z"},{id:4,finding_id:"FND-004",finding_name:"Data Privacy Compliance Issues",finding_description:"GDPR compliance gaps identified in data processing procedures",audit_type:"Compliance",risk_type:"Compliance",internal_control_element:"Control Activities",country:"UK",audit_year:"2024",audit_name:"Data Privacy Audit",risk_level:"High",financial_impact:18e4,status:"Open",created_by:"audit@example.com",created_at:"2024-03-20T00:00:00Z",updated_at:"2024-03-20T00:00:00Z"},{id:5,finding_id:"FND-005",finding_name:"Procurement Process Inefficiencies",finding_description:"Procurement approval workflows need optimization and automation",audit_type:"Operational",risk_type:"Operational",internal_control_element:"Control Activities",country:"Netherlands",audit_year:"2024",audit_name:"Procurement Audit",risk_level:"Low",financial_impact:25e3,status:"Closed",created_by:"audit@example.com",created_at:"2024-04-10T00:00:00Z",updated_at:"2024-06-15T00:00:00Z"},{id:6,finding_id:"FND-006",finding_name:"Business Continuity Plan Gaps",finding_description:"Business continuity and disaster recovery plans need updating and testing",audit_type:"Operational",risk_type:"Strategic",internal_control_element:"Monitoring",country:"Turkey",audit_year:"2024",audit_name:"Business Continuity Audit",risk_level:"High",financial_impact:95e3,status:"In Progress",created_by:"audit@example.com",created_at:"2024-05-01T00:00:00Z",updated_at:"2024-05-01T00:00:00Z"},{id:7,finding_id:"FND-007",finding_name:"Fraud Detection System Limitations",finding_description:"Current fraud detection mechanisms need enhancement with AI capabilities",audit_type:"Fraud Investigation",risk_type:"Financial",internal_control_element:"Control Activities",country:"Turkey",audit_year:"2024",audit_name:"Fraud Investigation 2024",risk_level:"High",financial_impact:22e4,status:"Open",created_by:"audit@example.com",created_at:"2024-05-15T00:00:00Z",updated_at:"2024-05-15T00:00:00Z"},{id:8,finding_id:"FND-008",finding_name:"HR Policy Compliance Gaps",finding_description:"Human resources policies need alignment with labor regulations",audit_type:"Compliance",risk_type:"Compliance",internal_control_element:"Control Environment",country:"France",audit_year:"2024",audit_name:"HR Compliance Audit",risk_level:"Medium",financial_impact:55e3,status:"In Progress",created_by:"audit@example.com",created_at:"2024-06-01T00:00:00Z",updated_at:"2024-06-01T00:00:00Z"},{id:9,finding_id:"FND-009",finding_name:"Cloud Security Configuration Issues",finding_description:"Cloud infrastructure security configurations require hardening",audit_type:"IT",risk_type:"Operational",internal_control_element:"Control Activities",country:"Turkey",audit_year:"2025",audit_name:"Cloud Security Audit 2025",risk_level:"High",financial_impact:15e4,status:"Open",created_by:"audit@example.com",created_at:"2025-01-10T00:00:00Z",updated_at:"2025-01-10T00:00:00Z"},{id:10,finding_id:"FND-010",finding_name:"Supply Chain Risk Management",finding_description:"Supply chain risk assessment and mitigation strategies need development",audit_type:"Operational",risk_type:"Strategic",internal_control_element:"Risk Assessment",country:"Germany",audit_year:"2025",audit_name:"Supply Chain Audit",risk_level:"Medium",financial_impact:75e3,status:"Open",created_by:"audit@example.com",created_at:"2025-01-20T00:00:00Z",updated_at:"2025-01-20T00:00:00Z"},{id:11,finding_id:"FND-011",finding_name:"API Security Vulnerabilities",finding_description:"API endpoints lack proper authentication and rate limiting",audit_type:"IT",risk_type:"Operational",internal_control_element:"Control Activities",country:"UK",audit_year:"2025",audit_name:"API Security Audit",risk_level:"High",financial_impact:11e4,status:"In Progress",created_by:"audit@example.com",created_at:"2025-02-05T00:00:00Z",updated_at:"2025-02-05T00:00:00Z"},{id:12,finding_id:"FND-012",finding_name:"Third-Party Risk Assessment Gaps",finding_description:"Third-party vendor risk assessment process needs standardization",audit_type:"Operational",risk_type:"Operational",internal_control_element:"Risk Assessment",country:"Netherlands",audit_year:"2025",audit_name:"Third-Party Risk Audit",risk_level:"Medium",financial_impact:6e4,status:"Open",created_by:"audit@example.com",created_at:"2025-02-15T00:00:00Z",updated_at:"2025-02-15T00:00:00Z"},{id:13,finding_id:"FND-013",finding_name:"Legacy System Security Issues",finding_description:"Legacy systems require security updates and migration planning",audit_type:"IT",risk_type:"Operational",internal_control_element:"Control Environment",country:"Turkey",audit_year:"2023",audit_name:"Legacy Systems Audit",risk_level:"High",financial_impact:2e5,status:"Closed",created_by:"audit@example.com",created_at:"2023-11-10T00:00:00Z",updated_at:"2024-03-30T00:00:00Z"},{id:14,finding_id:"FND-014",finding_name:"Inventory Management Inefficiencies",finding_description:"Inventory tracking and management processes need automation",audit_type:"Operational",risk_type:"Operational",internal_control_element:"Control Activities",country:"Germany",audit_year:"2023",audit_name:"Inventory Management Audit",risk_level:"Medium",financial_impact:4e4,status:"Closed",created_by:"audit@example.com",created_at:"2023-10-05T00:00:00Z",updated_at:"2024-01-20T00:00:00Z"},{id:15,finding_id:"FND-015",finding_name:"Payment Processing Controls",finding_description:"Payment processing controls need enhancement for fraud prevention",audit_type:"Financial",risk_type:"Financial",internal_control_element:"Control Activities",country:"UK",audit_year:"2022",audit_name:"Payment Processing Audit",risk_level:"High",financial_impact:3e5,status:"Closed",created_by:"audit@example.com",created_at:"2022-09-15T00:00:00Z",updated_at:"2023-06-30T00:00:00Z"}],Zi=[{id:1,audit_year:2025,audit_type:"Financial",audit_name:"Financial Audit Q1 2025",audit_lead_name:"John Doe",audit_lead_email:"john.doe@example.com",business_unit:"Finance",department:"Accounting",status:"Planned",start_date:"2025-01-15",end_date:"2025-03-31",audit_duration_weeks:10,created_at:"2024-12-01T00:00:00Z",updated_at:"2024-12-01T00:00:00Z"},{id:2,audit_year:2025,audit_type:"IT",audit_name:"Cloud Security Audit 2025",audit_lead_name:"Jane Smith",audit_lead_email:"jane.smith@example.com",business_unit:"IT",department:"Security",status:"Planned",start_date:"2025-02-01",end_date:"2025-04-30",audit_duration_weeks:12,created_at:"2024-12-15T00:00:00Z",updated_at:"2024-12-15T00:00:00Z"},{id:3,audit_year:2025,audit_type:"Operational",audit_name:"Supply Chain Risk Audit",audit_lead_name:"Bob Wilson",audit_lead_email:"bob.wilson@example.com",business_unit:"Operations",department:"Supply Chain",status:"Planned",start_date:"2025-03-01",end_date:"2025-05-15",audit_duration_weeks:10,created_at:"2024-12-20T00:00:00Z",updated_at:"2024-12-20T00:00:00Z"},{id:4,audit_year:2025,audit_type:"Compliance",audit_name:"GDPR Compliance Audit 2025",audit_lead_name:"Alice Brown",audit_lead_email:"alice.brown@example.com",business_unit:"Legal",department:"Compliance",status:"Planned",start_date:"2025-04-01",end_date:"2025-06-30",audit_duration_weeks:12,created_at:"2025-01-05T00:00:00Z",updated_at:"2025-01-05T00:00:00Z"},{id:5,audit_year:2025,audit_type:"IT",audit_name:"API Security Audit 2025",audit_lead_name:"Charlie Davis",audit_lead_email:"charlie.davis@example.com",business_unit:"IT",department:"Development",status:"Planned",start_date:"2025-05-01",end_date:"2025-07-15",audit_duration_weeks:10,created_at:"2025-01-10T00:00:00Z",updated_at:"2025-01-10T00:00:00Z"},{id:6,audit_year:2025,audit_type:"Operational",audit_name:"Vendor Management Audit 2025",audit_lead_name:"Diana Evans",audit_lead_email:"diana.evans@example.com",business_unit:"Procurement",department:"Vendor Relations",status:"Planned",start_date:"2025-06-01",end_date:"2025-08-15",audit_duration_weeks:10,created_at:"2025-01-15T00:00:00Z",updated_at:"2025-01-15T00:00:00Z"},{id:7,audit_year:2025,audit_type:"Financial",audit_name:"Financial Audit Q2 2025",audit_lead_name:"Frank Garcia",audit_lead_email:"frank.garcia@example.com",business_unit:"Finance",department:"Accounting",status:"Planned",start_date:"2025-07-01",end_date:"2025-09-30",audit_duration_weeks:12,created_at:"2025-02-01T00:00:00Z",updated_at:"2025-02-01T00:00:00Z"},{id:8,audit_year:2025,audit_type:"Fraud Investigation",audit_name:"Fraud Investigation Q1 2025",audit_lead_name:"Grace Harris",audit_lead_email:"grace.harris@example.com",business_unit:"Internal Audit",department:"Investigations",status:"Planned",start_date:"2025-01-20",end_date:"2025-03-20",audit_duration_weeks:8,created_at:"2024-12-10T00:00:00Z",updated_at:"2024-12-10T00:00:00Z"},{id:9,audit_year:2024,audit_type:"Financial",audit_name:"Financial Audit Q1 2024",audit_lead_name:"John Doe",audit_lead_email:"john.doe@example.com",business_unit:"Finance",department:"Accounting",status:"Completed",start_date:"2024-01-01",end_date:"2024-03-31",audit_duration_weeks:12,report_release_date:"2024-04-15",audit_report_rating:"Satisfactory",created_at:"2023-12-01T00:00:00Z",updated_at:"2024-04-15T00:00:00Z"},{id:10,audit_year:2024,audit_type:"IT",audit_name:"IT Security Audit 2024",audit_lead_name:"Jane Smith",audit_lead_email:"jane.smith@example.com",business_unit:"IT",department:"Security",status:"Fieldwork",start_date:"2024-04-01",end_date:"2024-06-30",audit_duration_weeks:12,created_at:"2024-03-01T00:00:00Z",updated_at:"2024-04-20T00:00:00Z"},{id:11,audit_year:2024,audit_type:"Operational",audit_name:"Operational Efficiency Audit",audit_lead_name:"Bob Wilson",audit_lead_email:"bob.wilson@example.com",business_unit:"Operations",department:"Process Improvement",status:"Pre Closing Meeting",start_date:"2024-05-01",end_date:"2024-07-15",audit_duration_weeks:10,created_at:"2024-04-01T00:00:00Z",updated_at:"2024-07-10T00:00:00Z"},{id:12,audit_year:2024,audit_type:"Compliance",audit_name:"Data Privacy Compliance Audit",audit_lead_name:"Alice Brown",audit_lead_email:"alice.brown@example.com",business_unit:"Legal",department:"Compliance",status:"Completed",start_date:"2024-02-01",end_date:"2024-04-30",audit_duration_weeks:12,report_release_date:"2024-05-15",audit_report_rating:"Needs Improvement",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-05-15T00:00:00Z"},{id:13,audit_year:2024,audit_type:"Financial",audit_name:"Financial Audit Q2 2024",audit_lead_name:"Charlie Davis",audit_lead_email:"charlie.davis@example.com",business_unit:"Finance",department:"Accounting",status:"Closing Meeting",start_date:"2024-04-01",end_date:"2024-06-30",audit_duration_weeks:12,created_at:"2024-03-01T00:00:00Z",updated_at:"2024-06-25T00:00:00Z"},{id:14,audit_year:2024,audit_type:"IT",audit_name:"IT Infrastructure Audit",audit_lead_name:"Diana Evans",audit_lead_email:"diana.evans@example.com",business_unit:"IT",department:"Infrastructure",status:"Completed",start_date:"2024-03-01",end_date:"2024-05-31",audit_duration_weeks:12,report_release_date:"2024-06-15",audit_report_rating:"Satisfactory",created_at:"2024-02-01T00:00:00Z",updated_at:"2024-06-15T00:00:00Z"},{id:15,audit_year:2024,audit_type:"Operational",audit_name:"Vendor Management Audit",audit_lead_name:"Frank Garcia",audit_lead_email:"frank.garcia@example.com",business_unit:"Procurement",department:"Vendor Relations",status:"Fieldwork",start_date:"2024-06-01",end_date:"2024-08-31",audit_duration_weeks:12,created_at:"2024-05-01T00:00:00Z",updated_at:"2024-07-15T00:00:00Z"},{id:16,audit_year:2024,audit_type:"Fraud Investigation",audit_name:"Fraud Investigation Q2 2024",audit_lead_name:"Grace Harris",audit_lead_email:"grace.harris@example.com",business_unit:"Internal Audit",department:"Investigations",status:"Completed",start_date:"2024-04-01",end_date:"2024-06-15",audit_duration_weeks:10,report_release_date:"2024-06-30",audit_report_rating:"Satisfactory",created_at:"2024-03-01T00:00:00Z",updated_at:"2024-06-30T00:00:00Z"},{id:17,audit_year:2023,audit_type:"Financial",audit_name:"Financial Audit Q1 2023",audit_lead_name:"John Doe",audit_lead_email:"john.doe@example.com",business_unit:"Finance",department:"Accounting",status:"Completed",start_date:"2023-01-01",end_date:"2023-03-31",audit_duration_weeks:12,report_release_date:"2023-04-15",audit_report_rating:"Satisfactory",created_at:"2022-12-01T00:00:00Z",updated_at:"2023-04-15T00:00:00Z"},{id:18,audit_year:2023,audit_type:"IT",audit_name:"Legacy Systems Security Audit",audit_lead_name:"Jane Smith",audit_lead_email:"jane.smith@example.com",business_unit:"IT",department:"Infrastructure",status:"Completed",start_date:"2023-05-01",end_date:"2023-07-31",audit_duration_weeks:12,report_release_date:"2023-08-15",audit_report_rating:"Needs Improvement",created_at:"2023-04-01T00:00:00Z",updated_at:"2023-08-15T00:00:00Z"},{id:19,audit_year:2023,audit_type:"Operational",audit_name:"Inventory Management Audit",audit_lead_name:"Bob Wilson",audit_lead_email:"bob.wilson@example.com",business_unit:"Operations",department:"Logistics",status:"Completed",start_date:"2023-08-01",end_date:"2023-10-31",audit_duration_weeks:12,report_release_date:"2023-11-15",audit_report_rating:"Satisfactory",created_at:"2023-07-01T00:00:00Z",updated_at:"2023-11-15T00:00:00Z"},{id:20,audit_year:2022,audit_type:"Financial",audit_name:"Financial Audit 2022",audit_lead_name:"John Doe",audit_lead_email:"john.doe@example.com",business_unit:"Finance",department:"Accounting",status:"Completed",start_date:"2022-01-01",end_date:"2022-12-31",audit_duration_weeks:52,report_release_date:"2023-02-15",audit_report_rating:"Satisfactory",created_at:"2021-12-01T00:00:00Z",updated_at:"2023-02-15T00:00:00Z"},{id:21,audit_year:2022,audit_type:"Financial",audit_name:"Payment Processing Audit",audit_lead_name:"Alice Brown",audit_lead_email:"alice.brown@example.com",business_unit:"Finance",department:"Payments",status:"Completed",start_date:"2022-06-01",end_date:"2022-09-30",audit_duration_weeks:16,report_release_date:"2022-10-15",audit_report_rating:"Satisfactory",created_at:"2022-05-01T00:00:00Z",updated_at:"2022-10-15T00:00:00Z"},{id:22,audit_year:2021,audit_type:"Financial",audit_name:"Financial Audit 2021",audit_lead_name:"John Doe",audit_lead_email:"john.doe@example.com",business_unit:"Finance",department:"Accounting",status:"Completed",start_date:"2021-01-01",end_date:"2021-12-31",audit_duration_weeks:52,report_release_date:"2022-02-15",audit_report_rating:"Satisfactory",created_at:"2020-12-01T00:00:00Z",updated_at:"2022-02-15T00:00:00Z"}],Il={audit_type:["Financial","IT","Operational","Compliance","Fraud Investigation"],audit_year:["2020","2021","2022","2023","2024","2025"],risk_type:["Financial","Operational","Compliance","Strategic","Reputational"],internal_control_element:["Control Environment","Risk Assessment","Control Activities","Information & Communication","Monitoring"],country:["Turkey","Germany","UK","Netherlands","France"],risk_level:["High","Medium","Low"],status:["Open","In Progress","Closed","Risk Accepted"],clevel:["CEO","CFO","CTO","COO"]};Js.filter(t=>t.status==="Open"&&t.dueDate&&new Date(t.dueDate)<new Date);Js.filter(t=>{if(!t.dueDate)return!1;const e=new Date(t.dueDate),n=new Date,r=Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24));return r>0&&r<=30});const Re=async(t,e,n=150)=>(await p3(n),e),S1="mahmut@turan.com",m3="mahmutturan12345",Co={getCurrentUser:async()=>{const t=localStorage.getItem("mock_user");if(t){const e=JSON.parse(t);return{success:!0,authenticated:!0,user:e,role:e.role,permissions:N1}}return{success:!1,authenticated:!1,user:null,role:void 0,permissions:void 0}},login:async t=>{if(await Re("login",null,200),t.email===S1&&t.password===m3){const e={id:1,email:S1,name:"Mahmut Turan",role:"admin",is_active:!0,must_reset_password:!1,created_at:"2024-01-01T00:00:00Z"};return localStorage.setItem("mock_user",JSON.stringify(e)),{success:!0,data:{user:e,role:"admin"}}}return{success:!1,error:"Invalid email or password"}},logout:async()=>(await Re("logout",null,100),localStorage.removeItem("mock_user"),{success:!0}),googleLogin:()=>{console.log("Google SSO is disabled")},requestPasswordReset:async t=>(await Re("requestPasswordReset",null,150),{success:!0}),resetPassword:async t=>(await Re("resetPassword",null,150),{success:!0}),changePassword:async(t,e)=>(await Re("changePassword",null,150),{success:!0}),checkAuth:async()=>{try{const t=await Co.getCurrentUser();return t.success&&!!t.user}catch{return!1}},getPermissions:async()=>Re("permissions",{success:!0,data:N1}),viewAsUser:async t=>(await Re("viewAsUser",null,150),{success:!0,data:{email:t}}),stopImpersonation:async()=>(await Re("stopImpersonation",null,100),{success:!0})},Qc={user:null,isAuthenticated:!1,isLoading:!0,role:void 0,permissions:void 0},xf={isImpersonating:!1,originalUser:null},Vr=_k()(h3((t,e)=>({...Qc,...xf,setUser:n=>t({user:n}),setRole:n=>t({role:n}),setPermissions:n=>t({permissions:n}),setAuthenticated:n=>t({isAuthenticated:n}),setLoading:n=>t({isLoading:n}),login:async(n,r)=>{try{t({isLoading:!0});const i=await Co.login({email:n,password:r});if(i.success&&i.data){t({user:i.data.user,role:i.data.role,isAuthenticated:!0,isLoading:!1});const a=await Co.getPermissions();return a.success&&a.data&&t({permissions:a.data}),!0}return t({isLoading:!1}),!1}catch{return t({isLoading:!1}),!1}},logout:async()=>{try{await Co.logout()}catch{}finally{t(Qc),window.location.href="/login"}},checkAuth:async()=>{try{t({isLoading:!0});const n=await Co.getCurrentUser();n.authenticated&&n.user?t({user:n.user,role:n.role,isAuthenticated:!0,permissions:n.permissions,isImpersonating:n.isImpersonating||!1,originalUser:n.originalUser||null,isLoading:!1}):t({...Qc,...xf,isLoading:!1})}catch{t({...Qc,...xf,isLoading:!1})}},startImpersonation:async n=>{try{(await Co.viewAsUser(n)).success&&await e().checkAuth()}catch(r){throw r}},stopImpersonation:async()=>{try{await Co.stopImpersonation(),t({isImpersonating:!1,originalUser:null}),await e().checkAuth(),window.location.reload()}catch(n){throw n}},reset:()=>t({...Qc,...xf})}),{name:"auth-storage",partialize:t=>({user:t.user,role:t.role,isAuthenticated:t.isAuthenticated})}));var dc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},g3={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ea,Yx,rk,x3=(rk=class{constructor(){St(this,Ea,g3);St(this,Yx,!1)}setTimeoutProvider(t){at(this,Ea,t)}setTimeout(t,e){return ue(this,Ea).setTimeout(t,e)}clearTimeout(t){ue(this,Ea).clearTimeout(t)}setInterval(t,e){return ue(this,Ea).setInterval(t,e)}clearInterval(t){ue(this,Ea).clearInterval(t)}},Ea=new WeakMap,Yx=new WeakMap,rk),Lo=new x3;function y3(t){setTimeout(t,0)}var Ko=typeof window>"u"||"Deno"in globalThis;function Wr(){}function v3(t,e){return typeof t=="function"?t(e):t}function ex(t){return typeof t=="number"&&t>=0&&t!==1/0}function kk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Wa(t,e){return typeof t=="function"?t(e):t}function Ts(t,e){return typeof t=="function"?t(e):t}function C1(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:c}=t;if(o){if(r){if(e.queryHash!==ty(o,e.options))return!1}else if(!Md(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||a&&!a(e))}function A1(t,e){const{exact:n,status:r,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Go(e.options.mutationKey)!==Go(a))return!1}else if(!Md(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function ty(t,e){return((e==null?void 0:e.queryKeyHashFn)||Go)(t)}function Go(t){return JSON.stringify(t,(e,n)=>tx(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Md(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Md(t[n],e[n])):!1}var b3=Object.prototype.hasOwnProperty;function Nk(t,e){if(t===e)return t;const n=E1(t)&&E1(e);if(!n&&!(tx(t)&&tx(e)))return e;const i=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),o=a.length,c=n?new Array(o):{};let u=0;for(let f=0;f<o;f++){const h=n?f:a[f],p=t[h],m=e[h];if(p===m){c[h]=p,(n?f<i:b3.call(t,h))&&u++;continue}if(p===null||m===null||typeof p!="object"||typeof m!="object"){c[h]=m;continue}const x=Nk(p,m);c[h]=x,x===p&&u++}return i===o&&u===i?t:c}function eh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function E1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function tx(t){if(!O1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!O1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function O1(t){return Object.prototype.toString.call(t)==="[object Object]"}function w3(t){return new Promise(e=>{Lo.setTimeout(e,t)})}function nx(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Nk(t,e):e}function j3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function _3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ny=Symbol();function Sk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ny?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Ck(t,e){return typeof t=="function"?t(...e):!!t}var Ro,Oa,Ul,sk,k3=(sk=class extends dc{constructor(){super();St(this,Ro);St(this,Oa);St(this,Ul);at(this,Ul,e=>{if(!Ko&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ue(this,Oa)||this.setEventListener(ue(this,Ul))}onUnsubscribe(){var e;this.hasListeners()||((e=ue(this,Oa))==null||e.call(this),at(this,Oa,void 0))}setEventListener(e){var n;at(this,Ul,e),(n=ue(this,Oa))==null||n.call(this),at(this,Oa,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ue(this,Ro)!==e&&(at(this,Ro,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof ue(this,Ro)=="boolean"?ue(this,Ro):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ro=new WeakMap,Oa=new WeakMap,Ul=new WeakMap,sk),ry=new k3;function rx(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var N3=y3;function S3(){let t=[],e=0,n=c=>{c()},r=c=>{c()},i=N3;const a=c=>{e?t.push(c):i(()=>{n(c)})},o=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(u=>{n(u)})})})};return{batch:c=>{let u;e++;try{u=c()}finally{e--,e||o()}return u},batchCalls:c=>(...u)=>{a(()=>{c(...u)})},schedule:a,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var lr=S3(),Wl,La,Hl,ik,C3=(ik=class extends dc{constructor(){super();St(this,Wl,!0);St(this,La);St(this,Hl);at(this,Hl,e=>{if(!Ko&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ue(this,La)||this.setEventListener(ue(this,Hl))}onUnsubscribe(){var e;this.hasListeners()||((e=ue(this,La))==null||e.call(this),at(this,La,void 0))}setEventListener(e){var n;at(this,Hl,e),(n=ue(this,La))==null||n.call(this),at(this,La,e(this.setOnline.bind(this)))}setOnline(e){ue(this,Wl)!==e&&(at(this,Wl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ue(this,Wl)}},Wl=new WeakMap,La=new WeakMap,Hl=new WeakMap,ik),th=new C3;function A3(t){return Math.min(1e3*2**t,3e4)}function Ak(t){return(t??"online")==="online"?th.isOnline():!0}var sx=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ek(t){let e=!1,n=0,r;const i=rx(),a=()=>i.status!=="pending",o=b=>{var y;if(!a()){const w=new sx(b);m(w),(y=t.onCancel)==null||y.call(t,w)}},c=()=>{e=!0},u=()=>{e=!1},f=()=>ry.isFocused()&&(t.networkMode==="always"||th.isOnline())&&t.canRun(),h=()=>Ak(t.networkMode)&&t.canRun(),p=b=>{a()||(r==null||r(),i.resolve(b))},m=b=>{a()||(r==null||r(),i.reject(b))},x=()=>new Promise(b=>{var y;r=w=>{(a()||f())&&b(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var b;r=void 0,a()||(b=t.onContinue)==null||b.call(t)}),v=()=>{if(a())return;let b;const y=n===0?t.initialPromise:void 0;try{b=y??t.fn()}catch(w){b=Promise.reject(w)}Promise.resolve(b).then(p).catch(w=>{var A;if(a())return;const k=t.retry??(Ko?0:3),N=t.retryDelay??A3,j=typeof N=="function"?N(n,w):N,S=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,w);if(e||!S){m(w);return}n++,(A=t.onFail)==null||A.call(t,n,w),w3(j).then(()=>f()?void 0:x()).then(()=>{e?m(w):v()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:c,continueRetry:u,canStart:h,start:()=>(h()?v():x().then(v),i)}}var Io,ak,Ok=(ak=class{constructor(){St(this,Io)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ex(this.gcTime)&&at(this,Io,Lo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ko?1/0:300*1e3))}clearGcTimeout(){ue(this,Io)&&(Lo.clearTimeout(ue(this,Io)),at(this,Io,void 0))}},Io=new WeakMap,ak),Fo,Vl,Ms,zo,mr,qd,Bo,ei,zi,ok,E3=(ok=class extends Ok{constructor(e){super();St(this,ei);St(this,Fo);St(this,Vl);St(this,Ms);St(this,zo);St(this,mr);St(this,qd);St(this,Bo);at(this,Bo,!1),at(this,qd,e.defaultOptions),this.setOptions(e.options),this.observers=[],at(this,zo,e.client),at(this,Ms,ue(this,zo).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,at(this,Fo,M1(this.options)),this.state=e.state??ue(this,Fo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ue(this,mr))==null?void 0:e.promise}setOptions(e){if(this.options={...ue(this,qd),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=M1(this.options);n.data!==void 0&&(this.setState(L1(n.data,n.dataUpdatedAt)),at(this,Fo,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ue(this,Ms).remove(this)}setData(e,n){const r=nx(this.state.data,e,this.options);return Ht(this,ei,zi).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ht(this,ei,zi).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=ue(this,mr))==null?void 0:r.promise;return(i=ue(this,mr))==null||i.cancel(e),n?n.then(Wr).catch(Wr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ue(this,Fo))}isActive(){return this.observers.some(e=>Ts(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ny||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Wa(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!kk(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=ue(this,mr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=ue(this,mr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ue(this,Ms).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(ue(this,mr)&&(ue(this,Bo)?ue(this,mr).cancel({revert:!0}):ue(this,mr).cancelRetry()),this.scheduleGc()),ue(this,Ms).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ht(this,ei,zi).call(this,{type:"invalidate"})}async fetch(e,n){var u,f,h,p,m,x,v,b,y,w,k,N;if(this.state.fetchStatus!=="idle"&&((u=ue(this,mr))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ue(this,mr))return ue(this,mr).continueRetry(),ue(this,mr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const j=this.observers.find(S=>S.options.queryFn);j&&this.setOptions(j.options)}const r=new AbortController,i=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(at(this,Bo,!0),r.signal)})},a=()=>{const j=Sk(this.options,n),A=(()=>{const O={client:ue(this,zo),queryKey:this.queryKey,meta:this.meta};return i(O),O})();return at(this,Bo,!1),this.options.persister?this.options.persister(j,A,this):j(A)},c=(()=>{const j={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ue(this,zo),state:this.state,fetchFn:a};return i(j),j})();(f=this.options.behavior)==null||f.onFetch(c,this),at(this,Vl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=c.fetchOptions)==null?void 0:h.meta))&&Ht(this,ei,zi).call(this,{type:"fetch",meta:(p=c.fetchOptions)==null?void 0:p.meta}),at(this,mr,Ek({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,onCancel:j=>{j instanceof sx&&j.revert&&this.setState({...ue(this,Vl),fetchStatus:"idle"}),r.abort()},onFail:(j,S)=>{Ht(this,ei,zi).call(this,{type:"failed",failureCount:j,error:S})},onPause:()=>{Ht(this,ei,zi).call(this,{type:"pause"})},onContinue:()=>{Ht(this,ei,zi).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const j=await ue(this,mr).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(x=(m=ue(this,Ms).config).onSuccess)==null||x.call(m,j,this),(b=(v=ue(this,Ms).config).onSettled)==null||b.call(v,j,this.state.error,this),j}catch(j){if(j instanceof sx){if(j.silent)return ue(this,mr).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw Ht(this,ei,zi).call(this,{type:"error",error:j}),(w=(y=ue(this,Ms).config).onError)==null||w.call(y,j,this),(N=(k=ue(this,Ms).config).onSettled)==null||N.call(k,this.state.data,j,this),j}finally{this.scheduleGc()}}},Fo=new WeakMap,Vl=new WeakMap,Ms=new WeakMap,zo=new WeakMap,mr=new WeakMap,qd=new WeakMap,Bo=new WeakMap,ei=new WeakSet,zi=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Lk(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,...L1(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return at(this,Vl,e.manual?i:void 0),i;case"error":const a=e.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),lr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ue(this,Ms).notify({query:this,type:"updated",action:e})})},ok);function Lk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ak(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function L1(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function M1(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var rs,rn,Ud,qr,qo,$l,Wi,Ma,Wd,Yl,Kl,Uo,Wo,Ta,Gl,mn,hd,ix,ax,ox,lx,cx,dx,ux,Mk,lk,O3=(lk=class extends dc{constructor(e,n){super();St(this,mn);St(this,rs);St(this,rn);St(this,Ud);St(this,qr);St(this,qo);St(this,$l);St(this,Wi);St(this,Ma);St(this,Wd);St(this,Yl);St(this,Kl);St(this,Uo);St(this,Wo);St(this,Ta);St(this,Gl,new Set);this.options=n,at(this,rs,e),at(this,Ma,null),at(this,Wi,rx()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ue(this,rn).addObserver(this),T1(ue(this,rn),this.options)?Ht(this,mn,hd).call(this):this.updateResult(),Ht(this,mn,lx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return fx(ue(this,rn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return fx(ue(this,rn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ht(this,mn,cx).call(this),Ht(this,mn,dx).call(this),ue(this,rn).removeObserver(this)}setOptions(e){const n=this.options,r=ue(this,rn);if(this.options=ue(this,rs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ts(this.options.enabled,ue(this,rn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ht(this,mn,ux).call(this),ue(this,rn).setOptions(this.options),n._defaulted&&!eh(this.options,n)&&ue(this,rs).getQueryCache().notify({type:"observerOptionsUpdated",query:ue(this,rn),observer:this});const i=this.hasListeners();i&&D1(ue(this,rn),r,this.options,n)&&Ht(this,mn,hd).call(this),this.updateResult(),i&&(ue(this,rn)!==r||Ts(this.options.enabled,ue(this,rn))!==Ts(n.enabled,ue(this,rn))||Wa(this.options.staleTime,ue(this,rn))!==Wa(n.staleTime,ue(this,rn)))&&Ht(this,mn,ix).call(this);const a=Ht(this,mn,ax).call(this);i&&(ue(this,rn)!==r||Ts(this.options.enabled,ue(this,rn))!==Ts(n.enabled,ue(this,rn))||a!==ue(this,Ta))&&Ht(this,mn,ox).call(this,a)}getOptimisticResult(e){const n=ue(this,rs).getQueryCache().build(ue(this,rs),e),r=this.createResult(n,e);return M3(this,r)&&(at(this,qr,r),at(this,$l,this.options),at(this,qo,ue(this,rn).state)),r}getCurrentResult(){return ue(this,qr)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&ue(this,Wi).status==="pending"&&ue(this,Wi).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){ue(this,Gl).add(e)}getCurrentQuery(){return ue(this,rn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=ue(this,rs).defaultQueryOptions(e),r=ue(this,rs).getQueryCache().build(ue(this,rs),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ht(this,mn,hd).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ue(this,qr)))}createResult(e,n){var z;const r=ue(this,rn),i=this.options,a=ue(this,qr),o=ue(this,qo),c=ue(this,$l),f=e!==r?e.state:ue(this,Ud),{state:h}=e;let p={...h},m=!1,x;if(n._optimisticResults){const I=this.hasListeners(),D=!I&&T1(e,n),T=I&&D1(e,r,n,i);(D||T)&&(p={...p,...Lk(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:v,errorUpdatedAt:b,status:y}=p;x=p.data;let w=!1;if(n.placeholderData!==void 0&&x===void 0&&y==="pending"){let I;a!=null&&a.isPlaceholderData&&n.placeholderData===(c==null?void 0:c.placeholderData)?(I=a.data,w=!0):I=typeof n.placeholderData=="function"?n.placeholderData((z=ue(this,Kl))==null?void 0:z.state.data,ue(this,Kl)):n.placeholderData,I!==void 0&&(y="success",x=nx(a==null?void 0:a.data,I,n),m=!0)}if(n.select&&x!==void 0&&!w)if(a&&x===(o==null?void 0:o.data)&&n.select===ue(this,Wd))x=ue(this,Yl);else try{at(this,Wd,n.select),x=n.select(x),x=nx(a==null?void 0:a.data,x,n),at(this,Yl,x),at(this,Ma,null)}catch(I){at(this,Ma,I)}ue(this,Ma)&&(v=ue(this,Ma),x=ue(this,Yl),b=Date.now(),y="error");const k=p.fetchStatus==="fetching",N=y==="pending",j=y==="error",S=N&&k,A=x!==void 0,M={status:y,fetchStatus:p.fetchStatus,isPending:N,isSuccess:y==="success",isError:j,isInitialLoading:S,isLoading:S,data:x,dataUpdatedAt:p.dataUpdatedAt,error:v,errorUpdatedAt:b,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>f.dataUpdateCount||p.errorUpdateCount>f.errorUpdateCount,isFetching:k,isRefetching:k&&!N,isLoadingError:j&&!A,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:j&&A,isStale:sy(e,n),refetch:this.refetch,promise:ue(this,Wi),isEnabled:Ts(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const I=q=>{M.status==="error"?q.reject(M.error):M.data!==void 0&&q.resolve(M.data)},D=()=>{const q=at(this,Wi,M.promise=rx());I(q)},T=ue(this,Wi);switch(T.status){case"pending":e.queryHash===r.queryHash&&I(T);break;case"fulfilled":(M.status==="error"||M.data!==T.value)&&D();break;case"rejected":(M.status!=="error"||M.error!==T.reason)&&D();break}}return M}updateResult(){const e=ue(this,qr),n=this.createResult(ue(this,rn),this.options);if(at(this,qo,ue(this,rn).state),at(this,$l,this.options),ue(this,qo).data!==void 0&&at(this,Kl,ue(this,rn)),eh(n,e))return;at(this,qr,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!ue(this,Gl).size)return!0;const o=new Set(a??ue(this,Gl));return this.options.throwOnError&&o.add("error"),Object.keys(ue(this,qr)).some(c=>{const u=c;return ue(this,qr)[u]!==e[u]&&o.has(u)})};Ht(this,mn,Mk).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ht(this,mn,lx).call(this)}},rs=new WeakMap,rn=new WeakMap,Ud=new WeakMap,qr=new WeakMap,qo=new WeakMap,$l=new WeakMap,Wi=new WeakMap,Ma=new WeakMap,Wd=new WeakMap,Yl=new WeakMap,Kl=new WeakMap,Uo=new WeakMap,Wo=new WeakMap,Ta=new WeakMap,Gl=new WeakMap,mn=new WeakSet,hd=function(e){Ht(this,mn,ux).call(this);let n=ue(this,rn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Wr)),n},ix=function(){Ht(this,mn,cx).call(this);const e=Wa(this.options.staleTime,ue(this,rn));if(Ko||ue(this,qr).isStale||!ex(e))return;const r=kk(ue(this,qr).dataUpdatedAt,e)+1;at(this,Uo,Lo.setTimeout(()=>{ue(this,qr).isStale||this.updateResult()},r))},ax=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ue(this,rn)):this.options.refetchInterval)??!1},ox=function(e){Ht(this,mn,dx).call(this),at(this,Ta,e),!(Ko||Ts(this.options.enabled,ue(this,rn))===!1||!ex(ue(this,Ta))||ue(this,Ta)===0)&&at(this,Wo,Lo.setInterval(()=>{(this.options.refetchIntervalInBackground||ry.isFocused())&&Ht(this,mn,hd).call(this)},ue(this,Ta)))},lx=function(){Ht(this,mn,ix).call(this),Ht(this,mn,ox).call(this,Ht(this,mn,ax).call(this))},cx=function(){ue(this,Uo)&&(Lo.clearTimeout(ue(this,Uo)),at(this,Uo,void 0))},dx=function(){ue(this,Wo)&&(Lo.clearInterval(ue(this,Wo)),at(this,Wo,void 0))},ux=function(){const e=ue(this,rs).getQueryCache().build(ue(this,rs),this.options);if(e===ue(this,rn))return;const n=ue(this,rn);at(this,rn,e),at(this,Ud,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},Mk=function(e){lr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(ue(this,qr))}),ue(this,rs).getQueryCache().notify({query:ue(this,rn),type:"observerResultsUpdated"})})},lk);function L3(t,e){return Ts(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function T1(t,e){return L3(t,e)||t.state.data!==void 0&&fx(t,e,e.refetchOnMount)}function fx(t,e,n){if(Ts(e.enabled,t)!==!1&&Wa(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&sy(t,e)}return!1}function D1(t,e,n,r){return(t!==e||Ts(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&sy(t,n)}function sy(t,e){return Ts(e.enabled,t)!==!1&&t.isStaleByTime(Wa(e.staleTime,t))}function M3(t,e){return!eh(t.getCurrentResult(),e)}function P1(t){return{onFetch:(e,n)=>{var h,p,m,x,v;const r=e.options,i=(m=(p=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:p.fetchMore)==null?void 0:m.direction,a=((x=e.state.data)==null?void 0:x.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let c={pages:[],pageParams:[]},u=0;const f=async()=>{let b=!1;const y=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},w=Sk(e.options,e.fetchOptions),k=async(N,j,S)=>{if(b)return Promise.reject();if(j==null&&N.pages.length)return Promise.resolve(N);const O=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:j,direction:S?"backward":"forward",meta:e.options.meta};return y(D),D})(),M=await w(O),{maxPages:z}=e.options,I=S?_3:j3;return{pages:I(N.pages,M,z),pageParams:I(N.pageParams,j,z)}};if(i&&a.length){const N=i==="backward",j=N?T3:R1,S={pages:a,pageParams:o},A=j(r,S);c=await k(S,A,N)}else{const N=t??a.length;do{const j=u===0?o[0]??r.initialPageParam:R1(r,c);if(u>0&&j==null)break;c=await k(c,j),u++}while(u<N)}return c};e.options.persister?e.fetchFn=()=>{var b,y;return(y=(b=e.options).persister)==null?void 0:y.call(b,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=f}}}function R1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function T3(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Hd,wi,Ur,Ho,ji,Sa,ck,D3=(ck=class extends Ok{constructor(e){super();St(this,ji);St(this,Hd);St(this,wi);St(this,Ur);St(this,Ho);at(this,Hd,e.client),this.mutationId=e.mutationId,at(this,Ur,e.mutationCache),at(this,wi,[]),this.state=e.state||Tk(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ue(this,wi).includes(e)||(ue(this,wi).push(e),this.clearGcTimeout(),ue(this,Ur).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){at(this,wi,ue(this,wi).filter(n=>n!==e)),this.scheduleGc(),ue(this,Ur).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ue(this,wi).length||(this.state.status==="pending"?this.scheduleGc():ue(this,Ur).remove(this))}continue(){var e;return((e=ue(this,Ho))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,c,u,f,h,p,m,x,v,b,y,w,k,N,j,S,A,O,M,z;const n=()=>{Ht(this,ji,Sa).call(this,{type:"continue"})},r={client:ue(this,Hd),meta:this.options.meta,mutationKey:this.options.mutationKey};at(this,Ho,Ek({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(I,D)=>{Ht(this,ji,Sa).call(this,{type:"failed",failureCount:I,error:D})},onPause:()=>{Ht(this,ji,Sa).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ue(this,Ur).canRun(this)}));const i=this.state.status==="pending",a=!ue(this,Ho).canStart();try{if(i)n();else{Ht(this,ji,Sa).call(this,{type:"pending",variables:e,isPaused:a}),await((c=(o=ue(this,Ur).config).onMutate)==null?void 0:c.call(o,e,this,r));const D=await((f=(u=this.options).onMutate)==null?void 0:f.call(u,e,r));D!==this.state.context&&Ht(this,ji,Sa).call(this,{type:"pending",context:D,variables:e,isPaused:a})}const I=await ue(this,Ho).start();return await((p=(h=ue(this,Ur).config).onSuccess)==null?void 0:p.call(h,I,e,this.state.context,this,r)),await((x=(m=this.options).onSuccess)==null?void 0:x.call(m,I,e,this.state.context,r)),await((b=(v=ue(this,Ur).config).onSettled)==null?void 0:b.call(v,I,null,this.state.variables,this.state.context,this,r)),await((w=(y=this.options).onSettled)==null?void 0:w.call(y,I,null,e,this.state.context,r)),Ht(this,ji,Sa).call(this,{type:"success",data:I}),I}catch(I){try{throw await((N=(k=ue(this,Ur).config).onError)==null?void 0:N.call(k,I,e,this.state.context,this,r)),await((S=(j=this.options).onError)==null?void 0:S.call(j,I,e,this.state.context,r)),await((O=(A=ue(this,Ur).config).onSettled)==null?void 0:O.call(A,void 0,I,this.state.variables,this.state.context,this,r)),await((z=(M=this.options).onSettled)==null?void 0:z.call(M,void 0,I,e,this.state.context,r)),I}finally{Ht(this,ji,Sa).call(this,{type:"error",error:I})}}finally{ue(this,Ur).runNext(this)}}},Hd=new WeakMap,wi=new WeakMap,Ur=new WeakMap,Ho=new WeakMap,ji=new WeakSet,Sa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),lr.batch(()=>{ue(this,wi).forEach(r=>{r.onMutationUpdate(e)}),ue(this,Ur).notify({mutation:this,type:"updated",action:e})})},ck);function Tk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hi,ti,Vd,dk,P3=(dk=class extends dc{constructor(e={}){super();St(this,Hi);St(this,ti);St(this,Vd);this.config=e,at(this,Hi,new Set),at(this,ti,new Map),at(this,Vd,0)}build(e,n,r){const i=new D3({client:e,mutationCache:this,mutationId:++pf(this,Vd)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){ue(this,Hi).add(e);const n=yf(e);if(typeof n=="string"){const r=ue(this,ti).get(n);r?r.push(e):ue(this,ti).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ue(this,Hi).delete(e)){const n=yf(e);if(typeof n=="string"){const r=ue(this,ti).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ue(this,ti).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=yf(e);if(typeof n=="string"){const r=ue(this,ti).get(n),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=yf(e);if(typeof n=="string"){const i=(r=ue(this,ti).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){lr.batch(()=>{ue(this,Hi).forEach(e=>{this.notify({type:"removed",mutation:e})}),ue(this,Hi).clear(),ue(this,ti).clear()})}getAll(){return Array.from(ue(this,Hi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>A1(n,r))}findAll(e={}){return this.getAll().filter(n=>A1(e,n))}notify(e){lr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return lr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Wr))))}},Hi=new WeakMap,ti=new WeakMap,Vd=new WeakMap,dk);function yf(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Vi,Da,ss,$i,Ji,qf,hx,uk,R3=(uk=class extends dc{constructor(n,r){super();St(this,Ji);St(this,Vi);St(this,Da);St(this,ss);St(this,$i);at(this,Vi,n),this.setOptions(r),this.bindMethods(),Ht(this,Ji,qf).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=ue(this,Vi).defaultMutationOptions(n),eh(this.options,r)||ue(this,Vi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ue(this,ss),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Go(r.mutationKey)!==Go(this.options.mutationKey)?this.reset():((i=ue(this,ss))==null?void 0:i.state.status)==="pending"&&ue(this,ss).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=ue(this,ss))==null||n.removeObserver(this)}onMutationUpdate(n){Ht(this,Ji,qf).call(this),Ht(this,Ji,hx).call(this,n)}getCurrentResult(){return ue(this,Da)}reset(){var n;(n=ue(this,ss))==null||n.removeObserver(this),at(this,ss,void 0),Ht(this,Ji,qf).call(this),Ht(this,Ji,hx).call(this)}mutate(n,r){var i;return at(this,$i,r),(i=ue(this,ss))==null||i.removeObserver(this),at(this,ss,ue(this,Vi).getMutationCache().build(ue(this,Vi),this.options)),ue(this,ss).addObserver(this),ue(this,ss).execute(n)}},Vi=new WeakMap,Da=new WeakMap,ss=new WeakMap,$i=new WeakMap,Ji=new WeakSet,qf=function(){var r;const n=((r=ue(this,ss))==null?void 0:r.state)??Tk();at(this,Da,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},hx=function(n){lr.batch(()=>{var r,i,a,o,c,u,f,h;if(ue(this,$i)&&this.hasListeners()){const p=ue(this,Da).variables,m=ue(this,Da).context,x={client:ue(this,Vi),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((i=(r=ue(this,$i)).onSuccess)==null||i.call(r,n.data,p,m,x),(o=(a=ue(this,$i)).onSettled)==null||o.call(a,n.data,null,p,m,x)):(n==null?void 0:n.type)==="error"&&((u=(c=ue(this,$i)).onError)==null||u.call(c,n.error,p,m,x),(h=(f=ue(this,$i)).onSettled)==null||h.call(f,void 0,n.error,p,m,x))}this.listeners.forEach(p=>{p(ue(this,Da))})})},uk),_i,fk,I3=(fk=class extends dc{constructor(e={}){super();St(this,_i);this.config=e,at(this,_i,new Map)}build(e,n,r){const i=n.queryKey,a=n.queryHash??ty(i,n);let o=this.get(a);return o||(o=new E3({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ue(this,_i).has(e.queryHash)||(ue(this,_i).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=ue(this,_i).get(e.queryHash);n&&(e.destroy(),n===e&&ue(this,_i).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){lr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ue(this,_i).get(e)}getAll(){return[...ue(this,_i).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>C1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>C1(e,r)):n}notify(e){lr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){lr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){lr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},_i=new WeakMap,fk),Un,Pa,Ra,Xl,Ql,Ia,Zl,Jl,hk,F3=(hk=class{constructor(t={}){St(this,Un);St(this,Pa);St(this,Ra);St(this,Xl);St(this,Ql);St(this,Ia);St(this,Zl);St(this,Jl);at(this,Un,t.queryCache||new I3),at(this,Pa,t.mutationCache||new P3),at(this,Ra,t.defaultOptions||{}),at(this,Xl,new Map),at(this,Ql,new Map),at(this,Ia,0)}mount(){pf(this,Ia)._++,ue(this,Ia)===1&&(at(this,Zl,ry.subscribe(async t=>{t&&(await this.resumePausedMutations(),ue(this,Un).onFocus())})),at(this,Jl,th.subscribe(async t=>{t&&(await this.resumePausedMutations(),ue(this,Un).onOnline())})))}unmount(){var t,e;pf(this,Ia)._--,ue(this,Ia)===0&&((t=ue(this,Zl))==null||t.call(this),at(this,Zl,void 0),(e=ue(this,Jl))==null||e.call(this),at(this,Jl,void 0))}isFetching(t){return ue(this,Un).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ue(this,Pa).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ue(this,Un).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=ue(this,Un).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Wa(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return ue(this,Un).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=ue(this,Un).get(r.queryHash),a=i==null?void 0:i.state.data,o=v3(e,a);if(o!==void 0)return ue(this,Un).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return lr.batch(()=>ue(this,Un).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ue(this,Un).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=ue(this,Un);lr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=ue(this,Un);return lr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=lr.batch(()=>ue(this,Un).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Wr).catch(Wr)}invalidateQueries(t,e={}){return lr.batch(()=>(ue(this,Un).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=lr.batch(()=>ue(this,Un).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(Wr)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Wr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=ue(this,Un).build(this,e);return n.isStaleByTime(Wa(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Wr).catch(Wr)}fetchInfiniteQuery(t){return t.behavior=P1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Wr).catch(Wr)}ensureInfiniteQueryData(t){return t.behavior=P1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return th.isOnline()?ue(this,Pa).resumePausedMutations():Promise.resolve()}getQueryCache(){return ue(this,Un)}getMutationCache(){return ue(this,Pa)}getDefaultOptions(){return ue(this,Ra)}setDefaultOptions(t){at(this,Ra,t)}setQueryDefaults(t,e){ue(this,Xl).set(Go(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ue(this,Xl).values()],n={};return e.forEach(r=>{Md(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){ue(this,Ql).set(Go(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ue(this,Ql).values()],n={};return e.forEach(r=>{Md(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ue(this,Ra).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ty(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ny&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ue(this,Ra).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ue(this,Un).clear(),ue(this,Pa).clear()}},Un=new WeakMap,Pa=new WeakMap,Ra=new WeakMap,Xl=new WeakMap,Ql=new WeakMap,Ia=new WeakMap,Zl=new WeakMap,Jl=new WeakMap,hk),Dk=L.createContext(void 0),$d=t=>{const e=L.useContext(Dk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},z3=({client:t,children:e})=>(L.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),s.jsx(Dk.Provider,{value:t,children:e})),Pk=L.createContext(!1),B3=()=>L.useContext(Pk);Pk.Provider;function q3(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var U3=L.createContext(q3()),W3=()=>L.useContext(U3),H3=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},V3=t=>{L.useEffect(()=>{t.clearReset()},[t])},$3=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||Ck(n,[t.error,r])),Y3=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},K3=(t,e)=>t.isLoading&&t.isFetching&&!e,G3=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,I1=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function X3(t,e,n){var p,m,x,v,b;const r=B3(),i=W3(),a=$d(),o=a.defaultQueryOptions(t);(m=(p=a.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||m.call(p,o),o._optimisticResults=r?"isRestoring":"optimistic",Y3(o),H3(o,i),V3(i);const c=!a.getQueryCache().get(o.queryHash),[u]=L.useState(()=>new e(a,o)),f=u.getOptimisticResult(o),h=!r&&t.subscribed!==!1;if(L.useSyncExternalStore(L.useCallback(y=>{const w=h?u.subscribe(lr.batchCalls(y)):Wr;return u.updateResult(),w},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),L.useEffect(()=>{u.setOptions(o)},[o,u]),G3(o,f))throw I1(o,u,i);if($3({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw f.error;if((v=(x=a.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||v.call(x,o,f),o.experimental_prefetchInRender&&!Ko&&K3(f,r)){const y=c?I1(o,u,i):(b=a.getQueryCache().get(o.queryHash))==null?void 0:b.promise;y==null||y.catch(Wr).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?f:u.trackResult(f)}function Pn(t,e){return X3(t,O3)}function iy(t,e){const n=$d(),[r]=L.useState(()=>new R3(n,t));L.useEffect(()=>{r.setOptions(t)},[r,t]);const i=L.useSyncExternalStore(L.useCallback(o=>r.subscribe(lr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=L.useCallback((o,c)=>{r.mutate(o,c).catch(Wr)},[r]);if(i.error&&Ck(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}const Q3=new F3({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}}),Z3=({children:t})=>s.jsx(z3,{client:Q3,children:t});function Rk(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Rk(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function J3(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Rk(t))&&(r&&(r+=" "),r+=e);return r}function F(...t){return J3(t)}const ze=jt.forwardRef(({className:t,variant:e="primary",size:n="md",isLoading:r=!1,leftIcon:i,rightIcon:a,fullWidth:o=!1,disabled:c,children:u,...f},h)=>{const p="inline-flex items-center justify-center font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg",m={primary:"bg-gradient-to-r from-[#5D3EBC] to-[#6B46C1] text-white hover:from-[#4E2FA3] hover:to-[#5C37B2] focus:ring-purple-500 shadow-md hover:shadow-lg",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",outline:"border-2 border-purple-600 text-purple-600 hover:bg-purple-50 focus:ring-purple-500",ghost:"text-purple-600 hover:bg-purple-50 focus:ring-purple-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-md hover:shadow-lg"},x={sm:"px-2.5 py-1.5 text-xs",md:"px-[12.8px] py-[6.4px] text-sm",lg:"px-[19.2px] py-[9.6px] text-base"};return s.jsx("button",{ref:h,className:F(p,m[e],x[n],o&&"w-full",t),disabled:c||r,...f,children:r?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-[12.8px] w-[12.8px]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):s.jsxs(s.Fragment,{children:[i&&s.jsx("span",{className:"mr-[6.4px]",children:i}),u,a&&s.jsx("span",{className:"ml-[6.4px]",children:a})]})})});ze.displayName="Button";const Tn=jt.forwardRef(({className:t,label:e,error:n,helperText:r,leftIcon:i,rightIcon:a,fullWidth:o=!1,id:c,...u},f)=>{const h=c||`input-${Math.random().toString(36).substr(2,9)}`;return s.jsxs("div",{className:F("flex flex-col",o&&"w-full"),children:[e&&s.jsxs("label",{htmlFor:h,className:"mb-1.5 text-xs font-medium text-gray-700",children:[e,u.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[i&&s.jsx("div",{className:"absolute left-[9.6px] top-1/2 -translate-y-1/2 text-gray-400",children:i}),s.jsx("input",{ref:f,id:h,className:F("w-full border rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent","disabled:bg-gray-100 disabled:cursor-not-allowed",n?"border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400",i&&"pl-[25.6px]",a&&"pr-[25.6px]",t!=null&&t.includes("text-[11px]")?"px-[6.4px] py-[3.2px]":"px-[12.8px] py-[6.4px]",t),...u}),a&&s.jsx("div",{className:"absolute right-[9.6px] top-1/2 -translate-y-1/2 text-gray-400",children:a})]}),(n||r)&&s.jsx("p",{className:F("mt-1.5 text-xs",n?"text-red-500":"text-gray-500"),children:n||r})]})});Tn.displayName="Input";const Yt=jt.forwardRef(({className:t,label:e,error:n,helperText:r,options:i,placeholder:a,fullWidth:o=!1,id:c,value:u,...f},h)=>{const p=c||`select-${Math.random().toString(36).substr(2,9)}`,m=u??"";return s.jsxs("div",{className:F("flex flex-col",o&&"w-full"),children:[e&&s.jsxs("label",{htmlFor:p,className:"mb-1.5 text-sm font-medium text-gray-700",children:[e,f.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("select",{ref:h,id:p,className:F("w-full px-4 py-2 border rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent","disabled:bg-gray-100 disabled:cursor-not-allowed","appearance-none bg-white",`bg-[url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")]`,"bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",n?"border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400",t),style:{...(t==null?void 0:t.includes("[&>select]:!leading-[28px]"))&&{lineHeight:"28px",paddingTop:"0px",paddingBottom:"0px"},...f.style},...f,value:m,children:[a&&s.jsx("option",{value:"",disabled:!0,children:a}),i.map(x=>s.jsx("option",{value:x.value,disabled:x.disabled,children:x.label},x.value))]}),(n||r)&&s.jsx("p",{className:F("mt-1.5 text-sm",n?"text-red-500":"text-gray-500"),children:n||r})]})});Yt.displayName="Select";const eA=jt.forwardRef(({className:t,label:e,error:n,helperText:r,fullWidth:i=!1,resize:a="vertical",id:o,...c},u)=>{const f=o||`textarea-${Math.random().toString(36).substr(2,9)}`,h={none:"resize-none",vertical:"resize-y",horizontal:"resize-x",both:"resize"};return s.jsxs("div",{className:F("flex flex-col",i&&"w-full"),children:[e&&s.jsxs("label",{htmlFor:f,className:"mb-1.5 text-xs font-medium text-gray-700",children:[e,c.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsx("textarea",{ref:u,id:f,className:F("w-full px-[12.8px] py-[6.4px] border rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent","disabled:bg-gray-100 disabled:cursor-not-allowed",n?"border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400",h[a],t),...c}),(n||r)&&s.jsx("p",{className:F("mt-1.5 text-xs",n?"text-red-500":"text-gray-500"),children:n||r})]})});eA.displayName="Textarea";const Ie=jt.forwardRef(({className:t,variant:e="default",padding:n="md",children:r,...i},a)=>{const o={default:"bg-white border border-gray-200",elevated:"bg-white shadow-lg border border-gray-100",outlined:"bg-transparent border-2 border-gray-300"},c={none:"",sm:"p-[12.8px]",md:"p-[19.2px]",lg:"p-[25.6px]"};return s.jsx("div",{ref:a,className:F("rounded-xl transition-all duration-200",o[e],c[n],t),...i,children:r})});Ie.displayName="Card";const Nt=jt.forwardRef(({className:t,title:e,subtitle:n,action:r,children:i,...a},o)=>s.jsxs("div",{ref:o,className:F("flex items-start justify-between mb-[12.8px]",t),...a,children:[s.jsxs("div",{children:[e&&s.jsx("h3",{className:"text-sm md:text-base font-semibold text-gray-900",children:e}),n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n}),i]}),r&&s.jsx("div",{className:"ml-4",children:r})]}));Nt.displayName="CardHeader";const Ik=jt.forwardRef(({className:t,children:e,...n},r)=>s.jsx("div",{ref:r,className:F("",t),...n,children:e}));Ik.displayName="CardBody";const tA=jt.forwardRef(({className:t,children:e,...n},r)=>s.jsx("div",{ref:r,className:F("mt-4 pt-4 border-t border-gray-200",t),...n,children:e}));tA.displayName="CardFooter";const tt=jt.forwardRef(({className:t,variant:e="default",size:n="md",children:r,...i},a)=>{const o={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800",dark:"bg-gray-900 text-white",orange:"bg-orange-100 text-orange-800",purple:"bg-purple-100 text-purple-800"},c={xs:"px-1.5 py-0.5 text-[8px]",sm:"px-2 py-0.5 text-[9.6px]",md:"px-2.5 py-1 text-[11.2px]",lg:"px-3 py-1.5 text-[12.8px]"};return s.jsx("span",{ref:a,className:F("inline-flex items-center font-medium rounded-full",o[e],c[n],t),...i,children:r})});tt.displayName="Badge";const Ct=({size:t="md",className:e,text:n,fullScreen:r=!1})=>{const i={sm:"h-4 w-4 border-2",md:"h-8 w-8 border-3",lg:"h-12 w-12 border-4",xl:"h-16 w-16 border-4"},a=s.jsxs("div",{className:F("flex flex-col items-center justify-center gap-3",e),children:[s.jsx("div",{className:F("animate-spin rounded-full border-gray-200 border-t-purple-600",i[t])}),n&&s.jsx("p",{className:"text-sm text-gray-600",children:n})]});return r?s.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 z-50 flex items-center justify-center",children:a}):a},ea=_k(t=>({isSidebarOpen:!1,toggleSidebar:()=>t(e=>({isSidebarOpen:!e.isSidebarOpen})),setSidebarOpen:e=>t({isSidebarOpen:e}),theme:"light",toggleTheme:()=>t(e=>({theme:e.theme==="light"?"dark":"light"})),setTheme:e=>t({theme:e}),isLoading:!1,setLoading:e=>t({isLoading:e}),notifications:[],addNotification:e=>{const n=`${Date.now()}-${Math.random()}`;t(r=>({notifications:[...r.notifications,{...e,id:n,timestamp:Date.now()}]})),e.duration!==0&&setTimeout(()=>{t(r=>({notifications:r.notifications.filter(i=>i.id!==n)}))},e.duration||5e3)},removeNotification:e=>t(n=>({notifications:n.notifications.filter(r=>r.id!==e)})),clearNotifications:()=>t({notifications:[]}),isModalOpen:!1,modalContent:null,openModal:e=>t({isModalOpen:!0,modalContent:e}),closeModal:()=>t({isModalOpen:!1,modalContent:null})})),nA=()=>{const{notifications:t,removeNotification:e}=ea();return t.length===0?null:s.jsx("div",{className:"fixed top-20 right-4 z-[100] flex flex-col gap-2 max-w-md",children:t.map(n=>{const r=()=>{switch(n.type){case"success":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return null}};return s.jsxs("div",{className:F("bg-white rounded-lg shadow-lg border-l-4 p-4 flex items-start gap-3 min-w-[300px] max-w-md",n.type==="error"&&"border-red-500",n.type==="success"&&"border-green-500",n.type==="warning"&&"border-yellow-500",n.type==="info"&&"border-blue-500"),children:[s.jsx("div",{className:F("flex-shrink-0",n.type==="error"&&"text-red-500",n.type==="success"&&"text-green-500",n.type==="warning"&&"text-yellow-500",n.type==="info"&&"text-blue-500"),children:r()}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:n.message})}),s.jsx("button",{onClick:()=>e(n.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 ml-2",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},n.id)})})},ay=({currentPage:t,totalItems:e,itemsPerPage:n,onPageChange:r,onItemsPerPageChange:i,itemsPerPageOptions:a=[10,25,50,100],className:o="",isMobile:c=!1})=>{const u=Math.ceil(e/n),f=e===0?0:(t-1)*n+1,h=Math.min(t*n,e),p=t>1,m=t<u,x=()=>{p&&r(t-1)},v=()=>{m&&r(t+1)},b=y=>{const w=parseInt(y.target.value,10);i&&i(w),r(1)};return e===0?null:s.jsxs("div",{className:F("flex items-center gap-4",c?"flex-col gap-2":"justify-between",o),children:[i&&s.jsxs("div",{className:F("flex items-center gap-2",c&&"w-full justify-center"),children:[s.jsx("span",{className:F("text-gray-600",c?"text-[8px]":"text-xs"),children:"Show:"}),s.jsx("select",{value:n,onChange:b,className:F("border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",c?"px-[6.4px] py-[1.6px] text-[8px]":"px-[9.6px] py-[4.8px] text-xs"),children:a.map(y=>s.jsx("option",{value:y,children:y},y))}),s.jsx("span",{className:F("text-gray-600",c?"text-[8px]":"text-xs"),children:"per page"})]}),s.jsx("div",{className:F(c?"w-full text-center":"flex-1 text-center"),children:s.jsx("span",{className:F("font-medium text-gray-700",c?"text-[8px]":"text-xs"),children:c?`${f}-${h} of ${e}`:`Showing ${f} to ${h} of ${e} items`})}),s.jsxs("div",{className:F("flex items-center gap-2",c&&"w-full justify-center"),children:[s.jsxs(ze,{variant:"outline",size:"sm",onClick:x,disabled:!p,className:F(c?"!px-1.5 !py-0.5 !text-[9px] min-w-[50px]":"min-w-[80px]"),children:[s.jsx("svg",{className:F(c?"w-2 h-2 mr-0.5":"w-[12.8px] h-[12.8px] mr-[3.2px]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),c?"Prev":"Previous"]}),s.jsx("span",{className:F("text-gray-600 px-1",c?"text-[7.2px]":"text-xs"),children:c?`${t}/${u}`:`Page ${t} of ${u}`}),s.jsxs(ze,{variant:"outline",size:"sm",onClick:v,disabled:!m,className:F(c?"!px-1.5 !py-0.5 !text-[9px] min-w-[50px]":"min-w-[80px]"),children:["Next",s.jsx("svg",{className:F(c?"w-2 h-2 ml-0.5":"w-[12.8px] h-[12.8px] ml-[3.2px]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})},Fm=({checked:t,onChange:e,disabled:n=!1,label:r,size:i="md",className:a=""})=>{const o={sm:"w-8 h-4",md:"w-11 h-6",lg:"w-14 h-7"},c={sm:"h-3 w-3",md:"h-5 w-5",lg:"h-6 w-6"},u={sm:"translate-x-4",md:"translate-x-5",lg:"translate-x-7"};return s.jsxs("label",{className:F("inline-flex items-center cursor-pointer",n&&"opacity-50 cursor-not-allowed",a),children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"checkbox",className:"sr-only",checked:t,onChange:f=>!n&&e(f.target.checked),disabled:n}),s.jsx("div",{className:F("rounded-full transition-colors duration-200 ease-in-out",o[i],t?"bg-purple-600":"bg-gray-300",n&&"cursor-not-allowed"),children:s.jsx("div",{className:F("absolute left-0.5 top-0.5 bg-white rounded-full transition-transform duration-200 ease-in-out",c[i],t&&u[i])})})]}),r&&s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:r})]})};class rA extends L.Component{constructor(){super(...arguments);ct(this,"state",{hasError:!1,error:null,errorInfo:null});ct(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsx(Ie,{className:"max-w-2xl w-full",variant:"elevated",children:s.jsxs("div",{className:"text-center",children:[s.jsx("svg",{className:"mx-auto h-16 w-16 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("h1",{className:"mt-4 text-2xl font-bold text-gray-900",children:"Oops! Something went wrong"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"We're sorry for the inconvenience. Please try refreshing the page."}),!1,s.jsxs("div",{className:"mt-8 flex gap-4 justify-center",children:[s.jsx(ze,{onClick:this.handleReset,variant:"primary",children:"Try Again"}),s.jsx(ze,{onClick:()=>window.location.href="/",variant:"outline",children:"Go to Dashboard"})]})]})})}):this.props.children}}function oy(t,e=500){const[n,r]=L.useState(t);return L.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}function uc(t,e,n="table-column-widths"){const r=e||t,[i,a]=L.useState(()=>{if(typeof window<"u"){const y=localStorage.getItem(n);if(y&&y!=="undefined")try{return JSON.parse(y)}catch{}}return r}),[o,c]=L.useState(null),[u,f]=L.useState(0),[h,p]=L.useState(0);L.useEffect(()=>{typeof window<"u"&&localStorage.setItem(n,JSON.stringify(i))},[i,n]);const m=L.useCallback((y,w)=>{w.preventDefault(),c(y),f(w.clientX),p(i[y]||150)},[i]),x=L.useCallback(y=>{if(!o)return;const w=y.clientX-u,k=Math.max(50,h+w);a(N=>({...N,[o]:k}))},[o,u,h]),v=L.useCallback(()=>{c(null)},[]);L.useEffect(()=>{if(o)return document.addEventListener("mousemove",x),document.addEventListener("mouseup",v),document.body.style.cursor="col-resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",v),document.body.style.cursor="",document.body.style.userSelect=""}},[o,x,v]);const b=L.useCallback(()=>{a(r),typeof window<"u"&&localStorage.removeItem(n)},[r,n]);return{columnWidths:i,resizing:o,handleMouseDown:m,resetWidths:b}}function Fk(){const{permissions:t,role:e}=Vr(),n=u=>e==="admin"?!0:t!=null&&t.components?t.components.includes("*")||t.components.includes(u):!1;return{hasComponent:n,canInteract:u=>e==="admin"?!0:t!=null&&t.interactiveComponents?t.interactiveComponents.includes("*")||t.interactiveComponents.includes(u):!1,hasAnyComponent:u=>u.some(f=>n(f)),hasAllComponents:u=>u.every(f=>n(f)),getAccessibleComponents:()=>(t==null?void 0:t.components)||[],getInteractiveComponents:()=>(t==null?void 0:t.interactiveComponents)||[]}}const Xt={getAuditProjectsByYear:async t=>{const e=[{auditYear:"2025",count:20},{auditYear:"2024",count:25},{auditYear:"2023",count:22},{auditYear:"2022",count:18},{auditYear:"2021",count:15}];return Re("audit-projects-by-year",e)},getInvestigationCounts:async t=>{const e=[{year:"2025",count:8,yearPerAuditor:"0.87"},{year:"2024",count:12,yearPerAuditor:"1.31"},{year:"2023",count:10,yearPerAuditor:"1.15"},{year:"2022",count:8,yearPerAuditor:"0.92"},{year:"2021",count:7,yearPerAuditor:"0.81"}];return Re("investigation-counts",e)},getFindingStatusByYear:async(t,e)=>Re("finding-status-by-year",As["finding-status-by-year"]),getFindingActionStatusDistribution:async t=>t==="all"?Re("finding-action-status-distribution",{statusDistribution:{Open:85,"In Progress":62,Closed:145,"Risk Accepted":18,Overdue:35},totalFinancialImpact:125e4,parentKeys:["FND-001","FND-002","FND-003","FND-004","FND-005","FND-006","FND-007","FND-008","FND-009","FND-010"]}):Re("finding-action-status-distribution",{statusDistribution:{Open:45,"In Progress":32,Closed:78,"Risk Accepted":10,Overdue:18},totalFinancialImpact:75e4,parentKeys:["FND-001","FND-002","FND-003","FND-004","FND-005","FND-006","FND-007","FND-008"]}),getActionsByAuditAndRisk:async t=>Re("actions-by-audit-and-risk",As["actions-by-audit-and-risk"]),getActionsByAuditRiskDetail:async(t,e,n)=>Re("actions-by-audit-risk-detail",Js.filter(r=>r.auditYear===t&&r.auditName===e&&(!n||r.riskLevel===n))),getFindingsByAuditAndRisk:async t=>Re("findings-by-audit-and-risk",As["findings-by-audit-and-risk"]),getFindingsByAuditRiskDetail:async(t,e,n)=>Re("findings-by-audit-risk-detail",[]),getFindingActionsByLead:async()=>Re("finding-actions-by-lead",{}),getUserFindingActions:async t=>{let e=[...Js];return t!=null&&t.auditYear&&t.auditYear!=="all"&&t.auditYear!=="2024+"&&(e=e.filter(n=>n.auditYear===t.auditYear)),t!=null&&t.cLevel&&(e=e.filter(n=>n.cLevel===t.cLevel)),Re("user-finding-actions",e)},getDepartmentFindingActions:async t=>{let e=Js.filter(n=>n.key.startsWith("AUDIT-3"));return t!=null&&t.userEmail&&(e=e.filter(n=>n.responsibleEmail===t.userEmail)),t!=null&&t.auditYear&&t.auditYear!=="all"&&t.auditYear!=="2024+"&&(e=e.filter(n=>n.auditYear===t.auditYear)),Re("department-finding-actions",e)},getCLevelFindingActions:async t=>{let e=Js.filter(n=>n.key.startsWith("AUDIT-C")).map(n=>({...n,status:n.status||"Open",displayStatus:n.displayStatus||n.status||"Open",dueDate:n.dueDate||new Date().toISOString().split("T")[0],responsible:n.responsible||n.responsibleEmail||"",responsibleEmail:n.responsibleEmail||n.responsible||"",auditYear:n.auditYear||"2024",auditName:n.auditName||"Audit",riskLevel:n.riskLevel||"Medium"}));return t!=null&&t.auditYear&&t.auditYear!=="all"&&t.auditYear!=="2024+"&&(e=e.filter(n=>n.auditYear===t.auditYear)),t!=null&&t.cLevel&&(e=e.filter(n=>n.cLevel===t.cLevel)),Re("clevel-finding-actions",e)},getAllFindingActions:async t=>{let e=[...Js];return t!=null&&t.auditYear&&t.auditYear!=="all"&&t.auditYear!=="2024+"&&(e=e.filter(n=>n.auditYear===t.auditYear)),Re("all-finding-actions",e)},getVPFindingActions:async t=>{let e=[...Js];return t!=null&&t.auditYear&&t.auditYear!=="all"&&t.auditYear!=="2024+"&&(e=e.filter(n=>n.auditYear===t.auditYear)),t!=null&&t.cLevel&&(e=e.filter(n=>n.cLevel===t.cLevel)),Re("vp-finding-actions",e)},getFindingActionsAging:async()=>Re("finding-actions-aging",As["finding-actions-aging"]),getFindingActionAgeSummary:async()=>Re("finding-action-age-summary",{total:58,averageAge:45}),getFindingRiskDistributionByProject:async()=>Re("finding-risk-distribution-by-project",As["finding-risk-distribution-by-project"]),getFindingDetailsByControlAndRisk:async()=>Re("finding-details-by-control-and-risk",[]),getFindingDetailsByTypeAndRisk:async()=>Re("finding-details-by-type-and-risk",[]),getFraudImpactScoreCards:async()=>Re("fraud-impact-score-cards",{scoreCards:[{year:"2025",impact:"1,340,000"},{year:"2024",impact:"2,710,000"},{year:"2023",impact:"1,560,000"},{year:"2022",impact:"3,500,000"},{year:"2021",impact:"960,000"}]}),getLpImpactScoreCards:async()=>Re("lp-impact-score-cards",{scoreCards:[{year:"2025",impact:"930,000"},{year:"2024",impact:"760,000"},{year:"2023",impact:"230,000"},{year:"2022",impact:"70,000"},{year:"2021",impact:"50,000"}]}),getFinancialImpactSum:async()=>Re("financial-impact-sum",{total:335e3}),getMatScores:async()=>Re("mat-scores",{average2024:3.8,average2025:4.1,2024:{overall:3.8,categories:{Governance:4.2,"Risk Management":3.9,"Control Environment":3.7,Monitoring:3.6,Communication:4}},2025:{overall:4.1,categories:{Governance:4.4,"Risk Management":4.2,"Control Environment":4,Monitoring:3.9,Communication:4.2}}}),getRadarChartData:async()=>Re("radar-chart-data",{labels:["Governance","Risk Management","Control Environment","Monitoring","Communication"],datasets:[{label:"2024",data:[4.2,3.9,3.7,3.6,4],borderColor:"rgba(99, 102, 241, 1)",backgroundColor:"rgba(99, 102, 241, 0.2)"},{label:"2025",data:[4.4,4.2,4,3.9,4.2],borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.2)"}]}),getGoogleSheetData:async()=>Re("google-sheet-data",As["fraud-internal-control"]),getAuditTypes:async()=>Re("audit-types",Il.audit_type),getAuditCountries:async()=>Re("audit-countries",Il.country),getCLevelOptions:async()=>Re("clevel-options",Il.clevel),getActionResponsibleOptions:async()=>Re("action-responsible-options",["john.doe@example.com","jane.smith@example.com","bob.wilson@example.com"]),getActionAgeDistribution:async t=>Re("action-age-distribution",{"-720360":2,"-360180":3,"-18090":5,"-9030":8,"-300":12,"030":20,"3090":15,"90180":10,"180360":8,"360720":5,"720+":3}),getLeadStatusDistribution:async(t="2024+")=>Re("lead-status-distribution",{"John Doe":{Open:8,"In Progress":5,Closed:12,"Risk Accepted":2},"Jane Smith":{Open:6,"In Progress":4,Closed:10,"Risk Accepted":1},"Bob Wilson":{Open:11,"In Progress":9,Closed:23,"Risk Accepted":2}}),getProjectRiskDistribution:async()=>Re("project-risk-distribution",As["project-risk-distribution"]),getDepartmentStats:async()=>Re("department-stats",As["department-stats"]),exportFindingActions:async t=>(await Re("export",null,200),new Blob(["Mock export data"],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),exportFindingActionsAging:async()=>(await Re("export-aging",null,200),new Blob(["Mock export data"],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),getActionResponsibleList:async()=>Re("action-responsible-list",{success:!0,data:[{email:"john.doe@example.com",name:"John Doe"}]}),getAllActionResponsibleList:async()=>Re("all-action-responsible-list",{success:!0,data:[{email:"john.doe@example.com",name:"John Doe"},{email:"jane.smith@example.com",name:"Jane Smith"}]}),getCLevelList:async()=>Re("clevel-list",{success:!0,data:[{email:"cfo@example.com",name:"CFO"}]}),getVPList:async()=>Re("vp-list",{success:!0,data:[{email:"vp@example.com",name:"VP Operations"}]}),getActionDataForEmail:async(t,e,n)=>Re("action-data-for-email",{success:!0,data:{chartHTML:"<div>Mock Chart</div>",overdueTableHTML:"<table>Mock Overdue</table>",upcomingTableHTML:"<table>Mock Upcoming</table>",riskAcceptedTableHTML:"<table>Mock Risk Accepted</table>",openFinancialImpact:"25.5 Bin ",overdueFinancialImpact:"15.2 Bin ",overdueCount:12,upcomingCount:8,riskAcceptedCount:3}}),previewEmail:async t=>Re("preview-email",{success:!0,data:{html:"<div>Mock Preview</div>"}}),sendEmail:async t=>Re("send-email",{success:!0}),sendActionResponsibleEmail:async t=>Re("send-action-responsible-email",{success:!0}),sendCLevelEmail:async t=>Re("send-clevel-email",{success:!0}),getControlElementDistribution:async t=>Re("control-element-distribution",As["control-element-distribution"]),getRiskTypeDistribution:async t=>Re("risk-type-distribution",As["risk-type-distribution"]),getActionsByStatus:async(t,e)=>{let n=Js.filter(r=>r.status===t);return e&&(n=n.filter(r=>r.auditYear===e)),Re("actions-by-status",n)},getFraudInternalControl:async()=>Re("fraud-internal-control",As["fraud-internal-control"]),getLossPreventionSummary:async()=>Re("loss-prevention-summary",As["loss-prevention-summary"]),getOverdueActions:async()=>Re("overdue-actions",[{key:"AUDIT-1001",summary:"Implement enhanced financial controls",status:"Overdue",dueDate:"2024-12-15",responsible:"john.doe@example.com",auditYear:"2024",auditName:"Financial Audit",riskLevel:"High"},{key:"AUDIT-1004",summary:"Update compliance documentation",status:"Overdue",dueDate:"2024-11-30",responsible:"jane.smith@example.com",auditYear:"2024",auditName:"Compliance Audit",riskLevel:"Medium"}]),getUpcomingActions:async()=>{const t=new Date,e=new Date(t.getTime()+720*60*60*1e3);return Re("upcoming-actions",[{key:"AUDIT-1002",summary:"Update IT security policies",status:"Open",dueDate:e.toISOString().split("T")[0],responsible:"jane.smith@example.com",auditYear:"2024",auditName:"IT Audit",riskLevel:"Medium"},{key:"AUDIT-1005",summary:"Review operational procedures",status:"In Progress",dueDate:new Date(t.getTime()+360*60*60*1e3).toISOString().split("T")[0],responsible:"bob.wilson@example.com",auditYear:"2024",auditName:"Operational Audit",riskLevel:"Low"}])},getTeamFindingActions:async t=>{let e=Js.filter(n=>n.key.startsWith("AUDIT-4"));return t!=null&&t.auditYear&&t.auditYear!=="all"&&t.auditYear!=="2024+"&&(e=e.filter(n=>n.auditYear===t.auditYear)),t!=null&&t.managerEmail&&(e=e.filter(n=>n.responsibleEmail===t.managerEmail)),t!=null&&t.managerEmail?Re("team-finding-actions",e):Re("team-finding-actions",{data:e,managerInfo:{manager1:{email:"manager1@example.com",name:"Manager One"},manager2:{email:"manager2@example.com",name:"Manager Two"},manager3:{email:"manager3@example.com",name:"Manager Three"},manager4:{email:"manager4@example.com",name:"Manager Four"}}})},getManagementFindingActions:async t=>{let e=[...Js];return t!=null&&t.auditYear&&t.auditYear!=="all"&&t.auditYear!=="2024+"&&(e=e.filter(n=>n.auditYear===t.auditYear)),Re("management-finding-actions",e)}};function Ch(){const[t,e]=L.useState(!1),{addNotification:n}=ea();return{isExporting:t,exportFindingActions:async a=>{try{e(!0);const o=await Xt.exportFindingActions(a);if(!o||o.size===0)throw new Error("Invalid or empty Excel file received");const c=window.URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download=`finding-actions-${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(u),u.click(),setTimeout(()=>{document.body.removeChild(u),window.URL.revokeObjectURL(c)},100),n({type:"success",message:"Finding actions exported successfully"})}catch{n({type:"error",message:"Failed to export finding actions"})}finally{e(!1)}},exportAgingData:async()=>{try{e(!0);const a=await Xt.exportFindingActionsAging(),o=window.URL.createObjectURL(a),c=document.createElement("a");c.href=o,c.download=`finding-actions-aging-${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o),n({type:"success",message:"Aging data exported successfully"})}catch{n({type:"error",message:"Failed to export aging data"})}finally{e(!1)}}}}const Qn={retry:2,retryDelay:t=>Math.min(1e3*2**t,3e4),staleTime:300*1e3,onError:()=>{}};function sA(t){return Pn({queryKey:["audit-projects-by-year",t],queryFn:()=>Xt.getAuditProjectsByYear(t),...Qn})}function iA(t){return Pn({queryKey:["investigation-counts",t],queryFn:()=>Xt.getInvestigationCounts(t),...Qn})}function aA(t,e){return Pn({queryKey:["finding-status-by-year",t,e],queryFn:()=>Xt.getFindingStatusByYear(t,e),...Qn})}function F1(t){return Pn({queryKey:["finding-action-status-distribution",t],queryFn:()=>Xt.getFindingActionStatusDistribution(t),...Qn})}function oA(t){return Pn({queryKey:["actions-by-audit-and-risk",t],queryFn:()=>Xt.getActionsByAuditAndRisk(t),...Qn})}function lA(t){return Pn({queryKey:["findings-by-audit-and-risk",t],queryFn:()=>Xt.getFindingsByAuditAndRisk(t),...Qn})}function cA(t){return Pn({queryKey:["department-finding-actions",t],queryFn:()=>Xt.getDepartmentFindingActions(t),...Qn,staleTime:120*1e3})}function dA(t){return Pn({queryKey:["clevel-finding-actions",t],queryFn:()=>Xt.getCLevelFindingActions(t),...Qn,staleTime:120*1e3})}function uA(t){return Pn({queryKey:["all-finding-actions",t],queryFn:()=>Xt.getAllFindingActions(t),...Qn,staleTime:120*1e3})}function fA(){return Pn({queryKey:["fraud-impact-score-cards"],queryFn:()=>Xt.getFraudImpactScoreCards(),...Qn,staleTime:600*1e3})}function hA(){return Pn({queryKey:["lp-impact-score-cards"],queryFn:()=>Xt.getLpImpactScoreCards(),...Qn,staleTime:600*1e3})}function zk(){return Pn({queryKey:["mat-scores"],queryFn:()=>Xt.getMatScores(),...Qn,staleTime:600*1e3})}function pA(){return Pn({queryKey:["radar-chart-data"],queryFn:()=>Xt.getRadarChartData(),...Qn,staleTime:600*1e3})}function mA(t){return Pn({queryKey:["action-age-distribution",t],queryFn:()=>Xt.getActionAgeDistribution(t),...Qn})}function gA(t="2024+"){return Pn({queryKey:["lead-status-distribution",t],queryFn:()=>Xt.getLeadStatusDistribution(t),...Qn})}function xA(t){return Pn({queryKey:["risk-type-distribution",t],queryFn:()=>Xt.getRiskTypeDistribution(t),...Qn,staleTime:300*1e3})}function yA(){return Pn({queryKey:["fraud-internal-control"],queryFn:()=>Xt.getFraudInternalControl(),...Qn,staleTime:600*1e3})}function vA(){return Pn({queryKey:["loss-prevention-summary"],queryFn:()=>Xt.getLossPreventionSummary(),...Qn,staleTime:600*1e3})}function bA(){return Pn({queryKey:["overdue-actions"],queryFn:()=>Xt.getOverdueActions(),...Qn,staleTime:300*1e3})}function wA(){return Pn({queryKey:["upcoming-actions"],queryFn:()=>Xt.getUpcomingActions(),...Qn,staleTime:300*1e3})}function jA(t){return Pn({queryKey:["team-finding-actions",t],queryFn:()=>Xt.getTeamFindingActions(t),...Qn,staleTime:120*1e3})}const _A=({onOpenEmailModal:t,onLogout:e})=>{var h,p;const[n,r]=L.useState(!1),i=L.useRef(null),{user:a,role:o}=Vr(),{hasComponent:c}=Fk();L.useEffect(()=>{const m=x=>{i.current&&!i.current.contains(x.target)&&r(!1)};return n&&document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[n]);const u=c("send_email_button");L.useEffect(()=>{},[n,u,o]);const f=m=>{m(),r(!1)};return s.jsxs("div",{className:"relative",ref:i,children:[s.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-[4.8px] md:gap-[9.6px] hover:bg-white/10 rounded-lg p-[3.2px] md:p-[6.4px] transition-colors",children:[s.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[s.jsx("span",{className:"text-white text-[11.2px] font-medium",children:a==null?void 0:a.name}),s.jsx("span",{className:"text-purple-200 text-[9.6px]",children:a==null?void 0:a.email})]}),s.jsx("div",{className:"h-[25.6px] w-[25.6px] md:h-[32px] md:w-[32px] rounded-full bg-white/20 flex items-center justify-center",children:s.jsx("span",{className:"text-white font-semibold text-[9.6px] md:text-[11.2px]",children:((h=a==null?void 0:a.name)==null?void 0:h.charAt(0).toUpperCase())||"U"})}),s.jsx("svg",{className:F("w-[9.6px] h-[9.6px] md:w-[12.8px] md:h-[12.8px] text-white transition-transform duration-200 hidden md:block",n&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&s.jsxs("div",{className:"absolute right-0 mt-1 md:mt-2 w-[calc(100vw-1rem)] max-w-[280px] md:w-72 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden z-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white p-[9.6px] md:p-[12.8px]",children:s.jsxs("div",{className:"flex items-center gap-[6.4px] md:gap-[9.6px]",children:[s.jsx("div",{className:"h-[32px] w-[32px] md:h-[38.4px] md:w-[38.4px] rounded-full bg-white/20 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-white font-semibold text-[12.8px] md:text-[14.4px]",children:((p=a==null?void 0:a.name)==null?void 0:p.charAt(0).toUpperCase())||"U"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"font-semibold text-[11.2px] md:text-[12.8px] truncate",children:a==null?void 0:a.name}),s.jsx("p",{className:"text-[9.6px] text-purple-200 truncate",children:a==null?void 0:a.email}),s.jsx("p",{className:"text-[9.6px] text-purple-300 mt-[2px] md:mt-[3.2px] truncate",children:o==null?void 0:o.replace("_"," ").split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" ")})]})]})}),s.jsxs("div",{className:"py-[3.2px] md:py-[6.4px]",children:[u&&s.jsxs("button",{onClick:()=>f(t),className:"w-full flex items-center gap-[6.4px] md:gap-[9.6px] px-[9.6px] md:px-[12.8px] py-[6.4px] md:py-[9.6px] text-gray-700 hover:bg-purple-50 transition-colors text-[11.2px] md:text-[12.8px]",children:[s.jsx("svg",{className:"w-[12.8px] h-[12.8px] md:w-[16px] md:h-[16px] text-purple-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"font-medium",children:"Send Email"})]}),s.jsxs("button",{onClick:()=>f(e),className:"w-full flex items-center gap-[6.4px] md:gap-[9.6px] px-[9.6px] md:px-[12.8px] py-[6.4px] md:py-[9.6px] text-gray-700 hover:bg-red-50 transition-colors border-t border-gray-100 text-[11.2px] md:text-[12.8px]",children:[s.jsx("svg",{className:"w-[12.8px] h-[12.8px] md:w-[16px] md:h-[16px] text-red-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),s.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})]})},kA=({onOpenEmailModal:t})=>{const e=cc(),{user:n,role:r,isImpersonating:i,originalUser:a,logout:o,stopImpersonation:c}=Vr(),[u,f]=L.useState(!1),h=async()=>{try{f(!0),await c()}catch{}finally{f(!1)}},p=()=>{r&&["admin","team","team_manager","ceo"].includes(r)&&e("/")},{isSidebarOpen:m,toggleSidebar:x}=ea(),v=async()=>{await o(),window.location.href="/login"};return s.jsxs(s.Fragment,{children:[i&&s.jsxs("div",{className:"fixed top-0 left-0 right-0 z-[60] bg-yellow-500 text-black px-2 md:px-6 py-1.5 md:py-2 flex items-center justify-between text-xs md:text-sm font-medium shadow-lg",children:[s.jsxs("span",{className:"truncate flex-1 min-w-0 mr-2",children:[s.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 inline mr-1 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsxs("span",{className:"hidden sm:inline",children:["Viewing as: ",s.jsx("strong",{children:n==null?void 0:n.email})," (Original: ",a==null?void 0:a.email,")"]}),s.jsxs("span",{className:"sm:hidden",children:["Viewing as: ",s.jsx("strong",{children:n==null?void 0:n.email})]})]}),s.jsxs(ze,{variant:"outline",size:"sm",onClick:h,isLoading:u,className:"bg-black text-yellow-500 hover:bg-gray-800 border-black text-xs md:text-sm px-2 md:px-4 py-1 md:py-2 flex-shrink-0",children:[s.jsx("span",{className:"hidden sm:inline",children:"Stop Viewing"}),s.jsx("span",{className:"sm:hidden",children:"Stop"})]})]}),s.jsx("header",{className:F("fixed left-0 right-0 z-50","h-[38.4px] md:h-[51.2px]",i?"top-10":"top-0","bg-gradient-to-r from-blue-600 to-blue-700","shadow-lg border-b border-blue-700/20","backdrop-blur-lg","transition-all duration-200"),children:s.jsxs("div",{className:"h-full px-[6.4px] md:px-[19.2px] flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-[6.4px] md:gap-[12.8px]",children:[s.jsx("button",{onClick:x,className:"text-white hover:bg-white/10 p-[4.8px] md:p-[6.4px] rounded-lg transition-colors","aria-label":"Toggle sidebar",children:s.jsx("svg",{className:"w-4 h-4 md:w-[19.2px] md:h-[19.2px]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:m?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),s.jsxs("div",{className:"flex items-center gap-[6.4px] md:gap-[9.6px] cursor-pointer hover:opacity-90 transition-opacity",onClick:p,children:[s.jsx("svg",{className:"h-[19.2px] w-[19.2px] md:h-[25.6px] md:w-[25.6px] text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("h1",{className:"text-white text-[11.2px] md:text-[14.4px] font-semibold hidden md:block",children:"Audit Department Dashboard"})]})]}),s.jsx("div",{className:"flex items-center gap-1 md:gap-4",children:n&&s.jsx(s.Fragment,{children:s.jsx(_A,{onOpenEmailModal:()=>t==null?void 0:t(),onLogout:v})})})]})})]})},NA=()=>{const t=el(),{isSidebarOpen:e,setSidebarOpen:n}=ea(),{isImpersonating:r,permissions:i,role:a}=Vr(),o=()=>{n(!1)};L.useEffect(()=>{const h=p=>{p.key==="Escape"&&e&&n(!1)};if(e)return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[e,n]);const c=[{name:"Dashboard",path:"/",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),componentKey:"dashboard_page"},{name:"My Team Actions",path:"/my-actions",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),componentKey:"my_actions_page"},{name:"Department Actions",path:"/department-actions",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),componentKey:"department_actions_page"},{name:"C-Level Actions",path:"/clevel-actions",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),componentKey:"clevel_actions_page"},{name:"All Findings & Actions",path:"/all-findings-actions",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})}),componentKey:"all_findings_actions_page"},{name:"Annual Audit Plan",path:"/annual-audit-plan",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),componentKey:"annual_audit_plan_page"},{name:"Audit Universe",path:"/audit-universe",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),componentKey:"audit_universe_page"},{name:"Risk Management",path:"/risk-management",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),componentKey:"risk_management_page"},{name:"Audit Maturity",path:"/audit-maturity",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),componentKey:"audit_maturity_page"},{name:"Task Manager",path:"/tasks",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),componentKey:"task_manager"},{name:"Access Management",path:"/access-management",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),componentKey:"access_management"},{name:"Audit Finding",path:"/audit-findings",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),componentKey:"audit_finding_page"}],u=h=>a==="admin"?!0:i!=null&&i.components?(i.components.includes("*")||i.components.includes(h.componentKey))===!0:!1,f=c.filter(u);return s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>ea.getState().setSidebarOpen(!1)}),s.jsx("aside",{className:F("fixed left-0 bottom-0 z-40","w-64 bg-white border-r border-gray-200","transition-all duration-300 ease-in-out","shadow-xl",r?"top-[104px]":"top-16",e?"translate-x-0":"-translate-x-full"),children:s.jsx("nav",{className:"p-4 space-y-2 h-full overflow-y-auto",children:f.map(h=>{const p=t.pathname===h.path;return s.jsxs(a3,{to:h.path,onClick:o,className:F("flex items-center gap-3 px-4 py-3 rounded-lg","transition-all duration-200","font-medium text-sm",p?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md":"text-gray-700 hover:bg-gray-100 hover:text-blue-600"),children:[h.icon,s.jsx("span",{children:h.name})]},h.path)})})})]})},SA=({isOpen:t,onClose:e})=>{const[n,r]=L.useState(""),[i,a]=L.useState(""),[o,c]=L.useState([]),[u,f]=L.useState([]),[h,p]=L.useState("all"),[m,x]=L.useState(!1),[v,b]=L.useState(!1),[y,w]=L.useState(!1),[k,N]=L.useState({current:0,total:0}),[j,S]=L.useState(!1),[A,O]=L.useState(!1),[M,z]=L.useState(null),[I,D]=L.useState(!1),{addNotification:T}=ea();L.useEffect(()=>{t||(r(""),a(""),c([]),f([]),p("all"),x(!1),N({current:0,total:0}),S(!1),O(!1),z(null),D(!1))},[t]),L.useEffect(()=>{const K=W=>{W.key==="Escape"&&t&&ee()};if(t)return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[t,v,m]),L.useEffect(()=>{(async()=>{if(!n){c([]),f([]);return}try{if(w(!0),n==="action_responsible"){const W=await Xt.getActionResponsibleList(),R=await Xt.getAllActionResponsibleList();W.success&&W.data&&(c(W.data),W.data.length===1&&a(W.data[0].email)),R.success&&R.data&&(console.log(" Filter list data from backend:",R.data),f(R.data))}else if(n==="vp"){const W=await Xt.getActionResponsibleList(),R=await Xt.getVPList();W.success&&W.data&&(c(W.data),W.data.length===1&&a(W.data[0].email)),R.success&&R.data&&(console.log(" VP Filter list data from backend:",R.data),f(R.data))}else{const W=await Xt.getCLevelList();W.success&&W.data&&(c(W.data),f(W.data),W.data.length===1&&a(W.data[0].email))}}catch{T({type:"error",message:"Failed to load recipient list"})}finally{w(!1)}})()},[n,T]);const q=async(K,W,R)=>{try{const U=R||K;if(!n||n!=="action_responsible"&&n!=="clevel"&&n!=="vp")throw new Error("Invalid reporting target");const B=await Xt.getActionDataForEmail(U,n,"2024+");if(!B.success||!B.data)throw new Error("Failed to fetch action data");const Q=B.data;let Z="both-actions";return n==="clevel"?Z="clevel-actions":n==="vp"&&(Z="vp-actions"),{to:K,subject:`Audit Finding Actions - ${W}`,emailType:"template",actionResponsible:U,auditYear:"2024+",chartType:Z,content:`Dear ${W}, Please review your pending audit finding actions.`,overdueTableHTML:Q.overdueTableHTML,overdueTableHTML2:Q.upcomingTableHTML,riskAcceptedTableHTML:Q.riskAcceptedTableHTML,openFinancialImpact:Q.openFinancialImpact,overdueFinancialImpact:Q.overdueFinancialImpact,overdueCount:Q.overdueCount,upcomingCount:Q.upcomingCount,riskAcceptedCount:Q.riskAcceptedCount,chartHTML:Q.chartHTML,ownershipBreakdownHTML:Q.ownershipBreakdownHTML||"",teamOverdueTableHTML:Q.teamOverdueTableHTML||"",teamUpcomingTableHTML:Q.teamUpcomingTableHTML||""}}catch(U){throw U}},H=async()=>{if(!n||!i){T({type:"warning",message:"Please select a reporting target and recipient"});return}try{if(b(!0),S(!1),m){const K=h==="all"?u:u.filter(B=>B.email===h);if(K.length===0){T({type:"warning",message:"No recipients selected"});return}if(!confirm(`Send ${K.length} separate personalized emails to ${i}?

Each email will contain a different Action Responsible's data for testing.`)){b(!1);return}N({current:0,total:K.length});let W=0,R=0;const U=[];for(let B=0;B<K.length;B++){if(j){T({type:"info",message:`Cancelled. Sent ${W} of ${K.length} emails`});break}N({current:B+1,total:K.length});const Q=K[B];if(!Q){R++;continue}try{console.log(` Sending email ${B+1}/${K.length} for ${Q.name}'s data to ${i}...`);const Z=await q(i,Q.name,Q.email);await Xt.sendEmail(Z),W++,console.log(` Email sent successfully with ${Q.name}'s data`)}catch(Z){console.error(` Failed to send email for ${Q.name}:`,Z),R++,U.push(Q.name)}await new Promise(Z=>setTimeout(Z,1e3))}if(!j){const B=W>0?`Successfully sent ${W} of ${K.length} emails to ${i}${R>0?`

Failed for: ${U.join(", ")}`:""}`:"Failed to send any emails";T({type:W>0?"success":"error",message:B}),e()}}else{const K=o.find(B=>B.email===i),W=(K==null?void 0:K.name)||i,U=await q(i,W,h&&h!=="all"?h:i);await Xt.sendEmail(U),T({type:"success",message:`Email sent successfully to ${i}`}),e()}}catch{T({type:"error",message:"Failed to send email"})}finally{b(!1),N({current:0,total:0})}},G=async()=>{if(!n||!i){T({type:"warning",message:"Please select a reporting target and recipient"});return}if(h==="all"){T({type:"info",message:'Preview is not available for "all" filter. Please select a specific recipient.'});return}try{D(!0);const K=o.find(Z=>Z.email===i),W=(K==null?void 0:K.name)||i,U=await q(i,W,h&&h!=="all"?h:i),B=await Xt.previewEmail(U);console.log(" Preview response:",B);const Q=B.data||B;Q&&Q.success&&Q.preview?(z(Q.preview),O(!0),console.log(" Preview data set:",Q.preview)):(console.error(" Preview response invalid:",B),T({type:"error",message:"Failed to preview email"}))}catch(K){console.error("Preview error:",K),T({type:"error",message:"Failed to preview email"})}finally{D(!1)}},ee=()=>{v&&m?S(!0):e()};if(!t)return null;const X=!n||!i||v,J=n==="action_responsible"?"Action Responsible":n==="vp"?"VP":"C-Level";return s.jsxs("div",{className:"fixed inset-0 bg-black/50 z-[70] flex items-center justify-center p-4",children:[s.jsxs(Ie,{className:"max-w-xl w-full max-h-[90vh] overflow-y-auto",variant:"elevated",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Send Email"})]}),s.jsx("button",{onClick:ee,disabled:v&&m,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email Type:"}),s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2.5 bg-gray-50 border border-gray-300 rounded-lg",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Use SendGrid Template"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[s.jsx("svg",{className:"w-4 h-4 inline mr-1 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Select Reporting Target:"]}),s.jsxs("select",{value:n,onChange:K=>{r(K.target.value),a(""),p("all"),x(!1)},disabled:v,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50",children:[s.jsx("option",{value:"",children:"Please select..."}),s.jsx("option",{value:"action_responsible",children:"Action Responsible"})]})]}),n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"To:"}),y?s.jsx("div",{className:"flex items-center justify-center py-6",children:s.jsx(Ct,{size:"md"})}):o.length===0?s.jsx("div",{className:"text-center py-6 text-sm text-gray-500",children:"No recipients found with open actions"}):s.jsxs("select",{value:i,onChange:K=>a(K.target.value),disabled:v,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50",children:[s.jsx("option",{value:"",children:"Select recipient..."}),o.map(K=>s.jsx("option",{value:K.email,children:K.email},K.email))]})]}),u.length>0&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[s.jsx("svg",{className:"w-4 h-4 inline mr-1 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Filter by ",J,":"]}),s.jsxs("select",{value:h,onChange:K=>{const W=K.target.value;if(p(W),n==="action_responsible"&&W!=="all"){if(!o.some(U=>U.email===W)){const U=u.find(Q=>Q.email===W),B={email:W,name:(U==null?void 0:U.name)||W,actionCount:(U==null?void 0:U.actionCount)||0};c(Q=>[B,...Q])}a(W)}},disabled:v,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50",children:[s.jsxs("option",{value:"all",children:["All ",J,"s (",u.length," users)"]}),u.map(K=>s.jsxs("option",{value:K.email,children:[K.name," (",K.email,")"]},K.email))]})]}),u.length>0&&s.jsx("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2.5",children:[s.jsx("input",{type:"checkbox",id:"bulkEmail",checked:m,onChange:K=>x(K.target.checked),disabled:v,className:"mt-0.5 w-4 h-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{htmlFor:"bulkEmail",className:"text-sm font-medium text-gray-900 cursor-pointer",children:[s.jsx("svg",{className:"w-3.5 h-3.5 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Send separate emails for each ",J,"'s data"]}),s.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"All emails will be sent to the address above, but each contains different user's data"})]})]})})]}),n&&i&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:m?`Each email to ${i} will include:`:"Email will include:"}),s.jsxs("ul",{className:"text-xs text-blue-700 mt-1.5 space-y-0.5 list-disc list-inside",children:[s.jsx("li",{children:"Dashboard report with audit findings"}),s.jsx("li",{children:"Open and overdue actions tables"}),s.jsx("li",{children:"Upcoming actions summary"}),s.jsx("li",{children:"Financial impact data"}),m&&s.jsx("li",{className:"font-semibold",children:" Different data for each selected user"})]})]}),v&&m&&k.total>0&&s.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[s.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Sending emails..."}),s.jsxs("span",{className:"text-sm text-purple-700",children:[k.current," / ",k.total]})]}),s.jsx("div",{className:"w-full bg-purple-200 rounded-full h-2",children:s.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${k.current/k.total*100}%`}})})]}),s.jsxs("div",{className:"flex gap-2.5 justify-end pt-3 border-t border-gray-200",children:[s.jsx(ze,{variant:"outline",onClick:ee,disabled:v&&m&&!j,children:v&&m?"Cancel":"Close"}),!m&&h!=="all"&&s.jsxs(ze,{variant:"outline",onClick:G,isLoading:I,disabled:X||I,children:[s.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview"]}),s.jsxs(ze,{variant:"primary",onClick:H,isLoading:v,disabled:X,children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),v?m?`Sending ${k.current}/${k.total}...`:"Sending...":"Send Email"]})]})]})]}),A&&M&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:s.jsx(Ie,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto m-4",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Email Preview"}),s.jsx(ze,{variant:"outline",onClick:()=>{O(!1),z(null)},children:"Close"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border-b pb-3",children:[s.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-1 block",children:"To:"}),s.jsx("p",{className:"text-gray-800",children:M.to})]}),M.cc&&M.cc.length>0?s.jsxs("div",{className:"border-b pb-3",children:[s.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-1 block",children:"CC:"}),s.jsx("div",{className:"space-y-1",children:M.cc.map((K,W)=>s.jsx("p",{className:"text-gray-800",children:K},W))})]}):s.jsxs("div",{className:"border-b pb-3",children:[s.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-1 block",children:"CC:"}),s.jsx("p",{className:"text-gray-400 italic",children:"No CC recipients"})]}),s.jsxs("div",{className:"border-b pb-3",children:[s.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-1 block",children:"Subject:"}),s.jsx("p",{className:"text-gray-800",children:M.subject})]}),s.jsxs("div",{className:"border-b pb-3",children:[s.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-1 block",children:"Action Responsible:"}),s.jsx("p",{className:"text-gray-800",children:M.actionResponsibleName||"N/A"}),M.actionResponsibleDepartment&&s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Department: ",M.actionResponsibleDepartment]})]}),M.hasTemplateData&&s.jsxs("div",{className:"border-b pb-3",children:[s.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"Email Content Summary:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[s.jsx("p",{className:"text-xs font-semibold text-blue-600 mb-1",children:"Overdue Actions"}),s.jsx("p",{className:"text-lg font-bold text-blue-800",children:M.overdueCount||0}),s.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Impact: ",M.overdueFinancialImpact||"0"]})]}),s.jsxs("div",{className:"bg-yellow-50 p-3 rounded",children:[s.jsx("p",{className:"text-xs font-semibold text-yellow-600 mb-1",children:"Upcoming Actions"}),s.jsx("p",{className:"text-lg font-bold text-yellow-800",children:M.upcomingCount||0})]}),s.jsxs("div",{className:"bg-red-50 p-3 rounded",children:[s.jsx("p",{className:"text-xs font-semibold text-red-600 mb-1",children:"Risk Accepted"}),s.jsx("p",{className:"text-lg font-bold text-red-800",children:M.riskAcceptedCount||0})]}),s.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[s.jsx("p",{className:"text-xs font-semibold text-green-600 mb-1",children:"Open Financial Impact"}),s.jsx("p",{className:"text-lg font-bold text-green-800",children:M.openFinancialImpact||"0"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(ze,{variant:"outline",onClick:()=>{O(!1),z(null)},children:"Cancel"}),s.jsxs(ze,{variant:"primary",onClick:async()=>{O(!1);try{b(!0);const K=o.find(B=>B.email===i),W=(K==null?void 0:K.name)||i,U=await q(i,W,h&&h!=="all"?h:i);await Xt.sendEmail(U),T({type:"success",message:`Email sent successfully to ${i}`}),e()}catch{T({type:"error",message:"Failed to send email"})}finally{b(!1)}},children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Send Email"]})]})]})]})})})]})},CA=()=>{const{isSidebarOpen:t}=ea(),{isImpersonating:e}=Vr(),[n,r]=L.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(kA,{onOpenEmailModal:()=>r(!0)}),s.jsx(NA,{}),s.jsx(SA,{isOpen:n,onClose:()=>r(!1)}),s.jsx(nA,{}),s.jsx("main",{className:F("transition-all duration-300","min-h-screen",e?"pt-[70.4px] md:pt-[83.2px]":"pt-[38.4px] md:pt-[51.2px]",t?"lg:pl-64":"lg:pl-0"),children:s.jsx("div",{className:"p-6 max-w-[1920px] mx-auto",children:s.jsx(KC,{})})})]})},Es=({children:t,requiredRoles:e})=>{const{isAuthenticated:n,isLoading:r,role:i}=Vr(),a=el();return r?s.jsx(Ct,{fullScreen:!0,size:"xl",text:"Loading..."}):n?e&&i&&!e.includes(i)?s.jsx(v1,{to:"/unauthorized",replace:!0}):s.jsx(s.Fragment,{children:t}):s.jsx(v1,{to:"/login",state:{from:a},replace:!0})},AA=()=>{const t=cc(),{login:e}=Vr(),[n,r]=L.useState(!1),[i,a]=L.useState(""),[o,c]=L.useState(""),[u,f]=L.useState(""),[h,p]=L.useState(!1),m=async v=>{v.preventDefault(),f(""),p(!0);try{if(await e(i,o)){const y=Vr.getState().role;t(y==="team"?"/my-actions":"/")}else f("Invalid email or password")}catch{f("An error occurred during login")}finally{p(!1)}},x=()=>{};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-blue-700 to-blue-900 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),s.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"})]}),s.jsxs("div",{className:"relative z-10 w-full max-w-sm md:max-w-sm space-y-4 md:space-y-6",children:[s.jsx("div",{className:"flex justify-center animate-logo-entrance",children:s.jsxs("div",{className:"relative group cursor-pointer",children:[s.jsx("div",{className:"absolute inset-0 bg-white/30 rounded-full blur-2xl md:blur-2xl group-hover:blur-3xl transition-all duration-500 animate-pulse-glow"}),s.jsx("div",{className:"absolute -inset-2 border-2 border-white/20 rounded-full animate-spin-slow"}),s.jsx("div",{className:"relative inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 bg-white rounded-full shadow-2xl transform group-hover:scale-110 group-hover:rotate-12 transition-all duration-500 animate-bounce-gentle",children:s.jsx("svg",{className:"w-12 h-12 md:w-16 md:h-16 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("div",{className:"absolute -top-2 -right-2 w-2 h-2 md:w-3 md:h-3 bg-yellow-400 rounded-full animate-sparkle-1"}),s.jsx("div",{className:"absolute -bottom-2 -left-2 w-1.5 h-1.5 md:w-2 md:h-2 bg-pink-400 rounded-full animate-sparkle-2"})]})}),s.jsxs("div",{className:"text-center space-y-1 md:space-y-2 animate-title-entrance",children:[s.jsx("h1",{className:"text-[16px] md:text-[24px] font-bold text-white drop-shadow-lg transform hover:scale-105 transition-transform duration-300",children:"Audit & Corporate Security"}),s.jsx("p",{className:"text-blue-200 text-xs md:text-sm font-medium animate-fade-in-delay",children:"Dashboard Login"})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4 flex flex-col items-center",children:[s.jsxs("button",{onClick:x,disabled:!0,className:"w-full max-w-[280px] md:max-w-full group relative overflow-hidden bg-gray-300 text-gray-500 font-semibold py-3 md:py-4 px-4 md:px-6 rounded-xl md:rounded-2xl shadow-2xl cursor-not-allowed opacity-50 flex items-center justify-center gap-2.5 md:gap-3 animate-button-entrance",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),s.jsxs("svg",{className:"w-5 h-5 md:w-6 md:h-6 relative z-10 group-hover:scale-125 group-hover:rotate-12 transition-all duration-300 animate-icon-bounce",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s.jsx("span",{className:"relative z-10 text-sm md:text-base group-hover:tracking-wide transition-all duration-300",children:"Continue with Google"})]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 my-1.5 md:my-2 animate-divider-entrance",children:[s.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-white/30 to-white/20"}),s.jsx("span",{className:"text-white/70 text-[10px] md:text-xs font-semibold px-2 md:px-3 py-0.5 md:py-1 bg-white/10 rounded-full backdrop-blur-sm transform hover:scale-110 transition-transform duration-300 cursor-default",children:"or"}),s.jsx("div",{className:"flex-1 h-px bg-gradient-to-l from-transparent via-white/30 to-white/20"})]}),s.jsxs("button",{onClick:()=>r(!0),className:"w-full max-w-[280px] md:max-w-full group relative overflow-hidden bg-white/10 hover:bg-white/15 backdrop-blur-xl text-white font-semibold py-3 md:py-4 px-4 md:px-6 rounded-xl md:rounded-2xl border border-white/20 hover:border-white/30 shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center justify-center gap-2.5 md:gap-3 transform hover:scale-[1.03] hover:-translate-y-2 active:scale-[0.97] animate-button-entrance-delay",children:[s.jsx("div",{className:"absolute inset-0 bg-white/10 rounded-xl md:rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-xl"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),s.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 relative z-10 group-hover:scale-125 group-hover:rotate-[-15deg] transition-all duration-300 animate-key-bounce",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),s.jsx("span",{className:"relative z-10 text-sm md:text-base group-hover:tracking-wide transition-all duration-300",children:"External User Login"})]})]}),s.jsx("div",{className:"text-center pt-1 md:pt-2 animate-fade-in-delay-2",children:s.jsx("p",{className:"text-blue-200/80 text-[10px] md:text-xs transform hover:scale-105 transition-transform duration-300 inline-block",children:"Use external login to access the dashboard"})})]}),s.jsx("div",{className:"absolute bottom-6 md:bottom-8 left-0 right-0 text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-1.5 md:gap-2 px-4 md:px-6 py-2 md:py-3 bg-white/10 backdrop-blur-md rounded-full border border-white/20",children:[s.jsx("svg",{className:"w-3.5 h-3.5 md:w-4 md:h-4 text-blue-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),s.jsx("span",{className:"text-blue-100 text-xs md:text-sm font-medium",children:"Developed by Audit Technology Team"})]})}),n&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",onClick:()=>{r(!1),f(""),a(""),c("")},children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-modal-enter",onClick:v=>v.stopPropagation(),children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-center",children:[s.jsx("button",{onClick:()=>{r(!1),f(""),a(""),c("")},className:"absolute top-4 right-4 p-2 text-white/80 hover:text-white hover:bg-white/20 rounded-lg transition-all duration-200",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl mb-3",children:s.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsx("h2",{className:"text-sm font-bold text-white mb-1",children:"External User Login"}),s.jsx("p",{className:"text-blue-100 text-sm",children:"Enter your credentials to continue"})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[u&&s.jsxs("div",{className:"p-3 bg-red-50 border-l-4 border-red-500 rounded-lg flex items-start gap-3",children:[s.jsx("svg",{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:"text-sm text-red-600 font-medium",children:u})]}),s.jsxs("form",{onSubmit:m,className:"space-y-4",autoComplete:"off",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx(Tn,{type:"email",value:i,onChange:v=>a(v.target.value),placeholder:"your.email@example.com",required:!0,fullWidth:!0,autoComplete:"new-email",leftIcon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),s.jsx("a",{href:"/reset-password",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot password?"})]}),s.jsx(Tn,{type:"password",value:o,onChange:v=>c(v.target.value),placeholder:"",required:!0,fullWidth:!0,autoComplete:"new-password",leftIcon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),s.jsx(ze,{type:"submit",variant:"primary",fullWidth:!0,isLoading:h,size:"lg",className:"mt-4",children:"Sign In"})]})]})]})}),s.jsx("style",{children:`
        @keyframes blob {
          0% { transform: translate(0px, 0px) scale(1); }
          33% { transform: translate(30px, -50px) scale(1.1); }
          66% { transform: translate(-20px, 20px) scale(0.9); }
          100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
          animation: blob 7s infinite;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
        @keyframes logo-entrance {
          0% { 
            opacity: 0;
            transform: scale(0) rotate(-180deg);
          }
          60% {
            transform: scale(1.1) rotate(10deg);
          }
          100% { 
            opacity: 1;
            transform: scale(1) rotate(0deg);
          }
        }
        .animate-logo-entrance {
          animation: logo-entrance 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        @keyframes bounce-gentle {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-8px); }
        }
        .animate-bounce-gentle {
          animation: bounce-gentle 3s ease-in-out infinite;
        }
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
          animation: spin-slow 8s linear infinite;
        }
        @keyframes sparkle-1 {
          0%, 100% { 
            opacity: 0;
            transform: scale(0) rotate(0deg);
          }
          50% { 
            opacity: 1;
            transform: scale(1) rotate(180deg);
          }
        }
        .animate-sparkle-1 {
          animation: sparkle-1 2s ease-in-out infinite;
        }
        @keyframes sparkle-2 {
          0%, 100% { 
            opacity: 0;
            transform: scale(0) rotate(0deg);
          }
          50% { 
            opacity: 1;
            transform: scale(1) rotate(-180deg);
          }
        }
        .animate-sparkle-2 {
          animation: sparkle-2 2.5s ease-in-out infinite 0.5s;
        }
        @keyframes pulse-glow {
          0%, 100% { opacity: 0.3; }
          50% { opacity: 0.6; }
        }
        .animate-pulse-glow {
          animation: pulse-glow 2s ease-in-out infinite;
        }
        @keyframes title-entrance {
          from { 
            opacity: 0;
            transform: translateY(-20px);
          }
          to { 
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-title-entrance {
          animation: title-entrance 0.6s ease-out 0.3s both;
        }
        @keyframes button-entrance {
          from { 
            opacity: 0;
            transform: translateX(-30px) scale(0.9);
          }
          to { 
            opacity: 1;
            transform: translateX(0) scale(1);
          }
        }
        .animate-button-entrance {
          animation: button-entrance 0.5s ease-out 0.5s both;
        }
        @keyframes button-entrance-delay {
          from { 
            opacity: 0;
            transform: translateX(30px) scale(0.9);
          }
          to { 
            opacity: 1;
            transform: translateX(0) scale(1);
          }
        }
        .animate-button-entrance-delay {
          animation: button-entrance-delay 0.5s ease-out 0.7s both;
        }
        @keyframes divider-entrance {
          from { 
            opacity: 0;
            transform: scaleX(0);
          }
          to { 
            opacity: 1;
            transform: scaleX(1);
          }
        }
        .animate-divider-entrance {
          animation: divider-entrance 0.4s ease-out 0.6s both;
        }
        @keyframes icon-bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-3px); }
        }
        .animate-icon-bounce {
          animation: icon-bounce 2s ease-in-out infinite;
        }
        @keyframes key-bounce {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          25% { transform: translateY(-4px) rotate(-5deg); }
          75% { transform: translateY(-4px) rotate(5deg); }
        }
        .animate-key-bounce {
          animation: key-bounce 2.5s ease-in-out infinite;
        }
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .animate-fade-in {
          animation: fade-in 0.2s ease-out;
        }
        @keyframes fade-in-delay {
          0% { opacity: 0; transform: translateY(5px); }
          100% { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-delay {
          animation: fade-in-delay 0.5s ease-out 0.8s both;
        }
        @keyframes fade-in-delay-2 {
          0% { opacity: 0; }
          100% { opacity: 1; }
        }
        .animate-fade-in-delay-2 {
          animation: fade-in-delay-2 0.5s ease-out 1s both;
        }
        @keyframes modal-enter {
          from { 
            opacity: 0;
            transform: scale(0.95) translateY(20px);
          }
          to { 
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }
        .animate-modal-enter {
          animation: modal-enter 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .animate-pulse-slow {
          animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
      `})]})},EA={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-3xl",layout:"vertical"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-lg",layout:"vertical"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl",layout:"vertical"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl",layout:"vertical"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl",layout:"vertical"}},OA={bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl",layout:"vertical"},LA=({investigations:t,loading:e})=>{const n=L.useMemo(()=>{if(!t||!Array.isArray(t))return[];const r={};return t.forEach(i=>{if(i.year&&i.year!=="Unknown"&&i.year!=="2020"){r[i.year]||(r[i.year]={total:0,perAuditor:i.yearPerAuditor||"0.00"});const a=r[i.year];a&&(a.total+=i.count||1,i.yearPerAuditor&&(a.perAuditor=i.yearPerAuditor))}}),Object.entries(r).sort(([i],[a])=>a.localeCompare(i)).slice(0,5)},[t]);return s.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-sm",children:[s.jsx(Nt,{title:"Investigations by Year",className:"border-b border-gray-200 pb-3"}),s.jsx("div",{className:"mt-4 grid grid-cols-6 gap-2",children:e?s.jsx("div",{className:"col-span-6 flex justify-center py-8",children:s.jsx(Ct,{size:"lg"})}):n.length>0?n.map(([r,i],a)=>{const o=EA[r]||OA;return s.jsxs("div",{className:F("relative p-2.5 overflow-hidden","hover:shadow-lg hover:scale-[1.02]","transition-all duration-300 ease-out","group cursor-pointer","border-2",o.bgColor,o.borderColor,o.shape,a<2?"col-span-3":"col-span-2"),children:[s.jsx("div",{className:F("absolute inset-0 opacity-[0.03]",a%2===0?"bg-[radial-gradient(circle_at_30%_30%,rgba(0,0,0,0.5)_1px,transparent_1px)] bg-[length:16px_16px]":"bg-[linear-gradient(45deg,transparent_25%,rgba(0,0,0,0.05)_25%,rgba(0,0,0,0.05)_50%,transparent_50%,transparent_75%,rgba(0,0,0,0.05)_75%)] bg-[length:12px_12px]")}),s.jsxs("div",{className:F("relative z-10 flex flex-col h-full",o.layout==="vertical"?"items-center justify-center":"items-start justify-between"),children:[s.jsxs("div",{className:F("flex items-center gap-1 mb-1.5",o.textColor),children:[s.jsx("div",{className:F("w-4 h-4 rounded flex items-center justify-center","bg-white/60 backdrop-blur-sm","border border-current/20"),children:s.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsx("p",{className:"text-[10px] font-semibold tracking-wide uppercase",children:r})]}),s.jsx("div",{className:"mb-1.5",children:s.jsx("p",{className:F("text-2xl font-bold",o.textColor,"group-hover:scale-110 transition-transform duration-300"),children:i.total})}),s.jsxs("div",{className:F("flex items-center gap-0.5",o.textColor),children:[s.jsx("svg",{className:F("w-2.5 h-2.5 opacity-70"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),s.jsxs("p",{className:F("text-[9px] font-medium opacity-80 whitespace-nowrap"),children:[i.perAuditor," per auditor"]})]})]}),o.shape==="rounded-lg"&&s.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 bg-white/20 transform rotate-45 translate-x-3 -translate-y-3"}),o.shape==="rounded-3xl"&&s.jsx("div",{className:"absolute bottom-0 left-0 w-10 h-10 bg-white/20 rounded-full blur-xl"}),o.shape==="rounded-xl"&&s.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 bg-white/20 rounded-full blur-lg"})]},r)}):s.jsx("div",{className:"col-span-6 text-center text-gray-500 py-8",children:"No data available"})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Yd(t){return t+.5|0}const za=(t,e,n)=>Math.max(Math.min(t,n),e);function pd(t){return za(Yd(t*2.55),0,255)}function Ha(t){return za(Yd(t*255),0,255)}function Ui(t){return za(Yd(t/2.55)/100,0,1)}function z1(t){return za(Yd(t*100),0,100)}const Os={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},px=[..."0123456789ABCDEF"],MA=t=>px[t&15],TA=t=>px[(t&240)>>4]+px[t&15],vf=t=>(t&240)>>4===(t&15),DA=t=>vf(t.r)&&vf(t.g)&&vf(t.b)&&vf(t.a);function PA(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Os[t[1]]*17,g:255&Os[t[2]]*17,b:255&Os[t[3]]*17,a:e===5?Os[t[4]]*17:255}:(e===7||e===9)&&(n={r:Os[t[1]]<<4|Os[t[2]],g:Os[t[3]]<<4|Os[t[4]],b:Os[t[5]]<<4|Os[t[6]],a:e===9?Os[t[7]]<<4|Os[t[8]]:255})),n}const RA=(t,e)=>t<255?e(t):"";function IA(t){var e=DA(t)?MA:TA;return t?"#"+e(t.r)+e(t.g)+e(t.b)+RA(t.a,e):void 0}const FA=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Bk(t,e,n){const r=e*Math.min(n,1-n),i=(a,o=(a+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function zA(t,e,n){const r=(i,a=(i+t/60)%6)=>n-n*e*Math.max(Math.min(a,4-a,1),0);return[r(5),r(3),r(1)]}function BA(t,e,n){const r=Bk(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function qA(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function ly(t){const n=t.r/255,r=t.g/255,i=t.b/255,a=Math.max(n,r,i),o=Math.min(n,r,i),c=(a+o)/2;let u,f,h;return a!==o&&(h=a-o,f=c>.5?h/(2-a-o):h/(a+o),u=qA(n,r,i,h,a),u=u*60+.5),[u|0,f||0,c]}function cy(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Ha)}function dy(t,e,n){return cy(Bk,t,e,n)}function UA(t,e,n){return cy(BA,t,e,n)}function WA(t,e,n){return cy(zA,t,e,n)}function qk(t){return(t%360+360)%360}function HA(t){const e=FA.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?pd(+e[5]):Ha(+e[5]));const i=qk(+e[2]),a=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=UA(i,a,o):e[1]==="hsv"?r=WA(i,a,o):r=dy(i,a,o),{r:r[0],g:r[1],b:r[2],a:n}}function VA(t,e){var n=ly(t);n[0]=qk(n[0]+e),n=dy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function $A(t){if(!t)return;const e=ly(t),n=e[0],r=z1(e[1]),i=z1(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Ui(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const B1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},q1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function YA(){const t={},e=Object.keys(q1),n=Object.keys(B1);let r,i,a,o,c;for(r=0;r<e.length;r++){for(o=c=e[r],i=0;i<n.length;i++)a=n[i],c=c.replace(a,B1[a]);a=parseInt(q1[o],16),t[c]=[a>>16&255,a>>8&255,a&255]}return t}let bf;function KA(t){bf||(bf=YA(),bf.transparent=[0,0,0,0]);const e=bf[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const GA=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function XA(t){const e=GA.exec(t);let n=255,r,i,a;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?pd(o):za(o*255,0,255)}return r=+e[1],i=+e[3],a=+e[5],r=255&(e[2]?pd(r):za(r,0,255)),i=255&(e[4]?pd(i):za(i,0,255)),a=255&(e[6]?pd(a):za(a,0,255)),{r,g:i,b:a,a:n}}}function QA(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ui(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const zm=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ml=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function ZA(t,e,n){const r=Ml(Ui(t.r)),i=Ml(Ui(t.g)),a=Ml(Ui(t.b));return{r:Ha(zm(r+n*(Ml(Ui(e.r))-r))),g:Ha(zm(i+n*(Ml(Ui(e.g))-i))),b:Ha(zm(a+n*(Ml(Ui(e.b))-a))),a:t.a+n*(e.a-t.a)}}function wf(t,e,n){if(t){let r=ly(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=dy(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Uk(t,e){return t&&Object.assign(e||{},t)}function U1(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ha(t[3]))):(e=Uk(t,{r:0,g:0,b:0,a:1}),e.a=Ha(e.a)),e}function JA(t){return t.charAt(0)==="r"?XA(t):HA(t)}class Td{constructor(e){if(e instanceof Td)return e;const n=typeof e;let r;n==="object"?r=U1(e):n==="string"&&(r=PA(e)||KA(e)||JA(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Uk(this._rgb);return e&&(e.a=Ui(e.a)),e}set rgb(e){this._rgb=U1(e)}rgbString(){return this._valid?QA(this._rgb):void 0}hexString(){return this._valid?IA(this._rgb):void 0}hslString(){return this._valid?$A(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let a;const o=n===a?.5:n,c=2*o-1,u=r.a-i.a,f=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;a=1-f,r.r=255&f*r.r+a*i.r+.5,r.g=255&f*r.g+a*i.g+.5,r.b=255&f*r.b+a*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=ZA(this._rgb,e._rgb,n)),this}clone(){return new Td(this.rgb)}alpha(e){return this._rgb.a=Ha(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Yd(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return wf(this._rgb,2,e),this}darken(e){return wf(this._rgb,2,-e),this}saturate(e){return wf(this._rgb,1,e),this}desaturate(e){return wf(this._rgb,1,-e),this}rotate(e){return VA(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Fi(){}const eE=(()=>{let t=0;return()=>t++})();function an(t){return t==null}function hn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function It(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function tr(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function gi(t,e){return tr(t)?t:e}function Dt(t,e){return typeof t>"u"?e:t}const tE=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Wk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function fn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function pn(t,e,n,r){let i,a,o;if(hn(t))for(a=t.length,i=0;i<a;i++)e.call(n,t[i],i);else if(It(t))for(o=Object.keys(t),a=o.length,i=0;i<a;i++)e.call(n,t[o[i]],o[i])}function nh(t,e){let n,r,i,a;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],a=e[n],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function rh(t){if(hn(t))return t.map(rh);if(It(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=rh(t[n[i]]);return e}return t}function Hk(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function nE(t,e,n,r){if(!Hk(t))return;const i=e[t],a=n[t];It(i)&&It(a)?Ni(i,a,r):e[t]=rh(a)}function Ni(t,e,n){const r=hn(e)?e:[e],i=r.length;if(!It(t))return t;n=n||{};const a=n.merger||nE;let o;for(let c=0;c<i;++c){if(o=r[c],!It(o))continue;const u=Object.keys(o);for(let f=0,h=u.length;f<h;++f)a(u[f],t,o,n)}return t}function wd(t,e){return Ni(t,e,{merger:rE})}function rE(t,e,n){if(!Hk(t))return;const r=e[t],i=n[t];It(r)&&It(i)?wd(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=rh(i))}const W1={"":t=>t,x:t=>t.x,y:t=>t.y};function sE(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function iE(t){const e=sE(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Ga(t,e){return(W1[e]||(W1[e]=iE(e)))(t)}function uy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const fs=t=>typeof t<"u",ls=t=>typeof t=="function",H1=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function aE(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Bt=Math.PI,_n=2*Bt,oE=_n+Bt,sh=Number.POSITIVE_INFINITY,fy=Bt/180,En=Bt/2,Ds=Bt/4,ih=Bt*2/3,Vk=Math.log10,ki=Math.sign;function jd(t,e,n){return Math.abs(t-e)<n}function V1(t){const e=Math.round(t);t=jd(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Vk(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function lE(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,a)=>i-a).pop(),e}function cE(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function ec(t){return!cE(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function dE(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function uE(t,e,n){let r,i,a;for(r=0,i=t.length;r<i;r++)a=t[r][n],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function cr(t){return t*(Bt/180)}function Ah(t){return t*(180/Bt)}function $1(t){if(!tr(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function ah(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*Bt&&(a+=_n),{angle:a,distance:i}}function tc(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function fE(t,e){return(t-e+oE)%_n-Bt}function Pr(t){return(t%_n+_n)%_n}function Dd(t,e,n,r){const i=Pr(t),a=Pr(e),o=Pr(n),c=Pr(a-i),u=Pr(o-i),f=Pr(i-a),h=Pr(i-o);return i===a||i===o||r&&a===o||c>u&&f<h}function os(t,e,n){return Math.max(e,Math.min(n,t))}function hE(t){return os(t,-32768,32767)}function Ki(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function hy(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,a;for(;r-i>1;)a=i+r>>1,n(a)?i=a:r=a;return{lo:i,hi:r}}const mx=(t,e,n,r)=>hy(t,n,r?i=>{const a=t[i][e];return a<n||a===n&&t[i+1][e]===n}:i=>t[i][e]<n),pE=(t,e,n)=>hy(t,n,r=>t[r][e]>=n);function mE(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const $k=["push","pop","shift","splice","unshift"];function gE(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),$k.forEach(n=>{const r="_onData"+uy(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...a){const o=i.apply(this,a);return t._chartjs.listeners.forEach(c=>{typeof c[r]=="function"&&c[r](...a)}),o}})})}function Y1(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&($k.forEach(a=>{delete t[a]}),delete t._chartjs)}function Yk(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Kk=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function Gk(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,Kk.call(window,()=>{r=!1,t.apply(e,n)}))}}function xE(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const py=t=>t==="start"?"left":t==="end"?"right":"center",Dr=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,yE=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,jf=t=>t===0||t===1,K1=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*_n/n)),G1=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*_n/n)+1,_d={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*En)+1,easeOutSine:t=>Math.sin(t*En),easeInOutSine:t=>-.5*(Math.cos(Bt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>jf(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>jf(t)?t:K1(t,.075,.3),easeOutElastic:t=>jf(t)?t:G1(t,.075,.3),easeInOutElastic(t){return jf(t)?t:t<.5?.5*K1(t*2,.1125,.45):.5+.5*G1(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-_d.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?_d.easeInBounce(t*2)*.5:_d.easeOutBounce(t*2-1)*.5+.5};function my(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function X1(t){return my(t)?t:new Td(t)}function Bm(t){return my(t)?t:new Td(t).saturate(.5).darken(.1).hexString()}const vE=["x","y","borderWidth","radius","tension"],bE=["color","borderColor","backgroundColor"];function wE(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:bE},numbers:{type:"number",properties:vE}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function jE(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Q1=new Map;function _E(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Q1.get(n);return r||(r=new Intl.NumberFormat(t,e),Q1.set(n,r)),r}function gy(t,e,n){return _E(e,n).format(t)}const kE={values(t){return hn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,a=t;if(n.length>1){const f=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(f<1e-4||f>1e15)&&(i="scientific"),a=NE(t,n)}const o=Vk(Math.abs(a)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),gy(t,r,u)}};function NE(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var xy={formatters:kE};function SE(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:xy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Xo=Object.create(null),gx=Object.create(null);function kd(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const a=n[r];t=t[a]||(t[a]=Object.create(null))}return t}function qm(t,e,n){return typeof e=="string"?Ni(kd(t,e),n):Ni(kd(t,""),e)}class CE{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Bm(i.backgroundColor),this.hoverBorderColor=(r,i)=>Bm(i.borderColor),this.hoverColor=(r,i)=>Bm(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return qm(this,e,n)}get(e){return kd(this,e)}describe(e,n){return qm(gx,e,n)}override(e,n){return qm(Xo,e,n)}route(e,n,r,i){const a=kd(this,e),o=kd(this,r),c="_"+n;Object.defineProperties(a,{[c]:{value:a[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[c],f=o[i];return It(u)?Object.assign({},f,u):Dt(u,f)},set(u){this[c]=u}}})}apply(e){e.forEach(n=>n(this))}}var Dn=new CE({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[wE,jE,SE]);function AE(t){return!t||an(t.size)||an(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function oh(t,e,n,r,i){let a=e[i];return a||(a=e[i]=t.measureText(i).width,n.push(i)),a>r&&(r=a),r}function EE(t,e,n,r){r=r||{};let i=r.data=r.data||{},a=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},a=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const c=n.length;let u,f,h,p,m;for(u=0;u<c;u++)if(p=n[u],p!=null&&!hn(p))o=oh(t,i,a,o,p);else if(hn(p))for(f=0,h=p.length;f<h;f++)m=p[f],m!=null&&!hn(m)&&(o=oh(t,i,a,o,m));t.restore();const x=a.length/2;if(x>n.length){for(u=0;u<x;u++)delete i[a[u]];a.splice(0,x)}return o}function No(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Z1(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function xx(t,e,n,r){Xk(t,e,n,r,null)}function Xk(t,e,n,r,i){let a,o,c,u,f,h,p,m;const x=e.pointStyle,v=e.rotation,b=e.radius;let y=(v||0)*fy;if(x&&typeof x=="object"&&(a=x.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(y),t.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),x){default:i?t.ellipse(n,r,i/2,b,0,0,_n):t.arc(n,r,b,0,_n),t.closePath();break;case"triangle":h=i?i/2:b,t.moveTo(n+Math.sin(y)*h,r-Math.cos(y)*b),y+=ih,t.lineTo(n+Math.sin(y)*h,r-Math.cos(y)*b),y+=ih,t.lineTo(n+Math.sin(y)*h,r-Math.cos(y)*b),t.closePath();break;case"rectRounded":f=b*.516,u=b-f,o=Math.cos(y+Ds)*u,p=Math.cos(y+Ds)*(i?i/2-f:u),c=Math.sin(y+Ds)*u,m=Math.sin(y+Ds)*(i?i/2-f:u),t.arc(n-p,r-c,f,y-Bt,y-En),t.arc(n+m,r-o,f,y-En,y),t.arc(n+p,r+c,f,y,y+En),t.arc(n-m,r+o,f,y+En,y+Bt),t.closePath();break;case"rect":if(!v){u=Math.SQRT1_2*b,h=i?i/2:u,t.rect(n-h,r-u,2*h,2*u);break}y+=Ds;case"rectRot":p=Math.cos(y)*(i?i/2:b),o=Math.cos(y)*b,c=Math.sin(y)*b,m=Math.sin(y)*(i?i/2:b),t.moveTo(n-p,r-c),t.lineTo(n+m,r-o),t.lineTo(n+p,r+c),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":y+=Ds;case"cross":p=Math.cos(y)*(i?i/2:b),o=Math.cos(y)*b,c=Math.sin(y)*b,m=Math.sin(y)*(i?i/2:b),t.moveTo(n-p,r-c),t.lineTo(n+p,r+c),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":p=Math.cos(y)*(i?i/2:b),o=Math.cos(y)*b,c=Math.sin(y)*b,m=Math.sin(y)*(i?i/2:b),t.moveTo(n-p,r-c),t.lineTo(n+p,r+c),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),y+=Ds,p=Math.cos(y)*(i?i/2:b),o=Math.cos(y)*b,c=Math.sin(y)*b,m=Math.sin(y)*(i?i/2:b),t.moveTo(n-p,r-c),t.lineTo(n+p,r+c),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=i?i/2:Math.cos(y)*b,c=Math.sin(y)*b,t.moveTo(n-o,r-c),t.lineTo(n+o,r+c);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(y)*(i?i/2:b),r+Math.sin(y)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Gi(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Kd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Gd(t){t.restore()}function OE(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const a=(e.x+n.x)/2;t.lineTo(a,e.y),t.lineTo(a,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function LE(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function ME(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),an(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function TE(t,e,n,r,i){if(i.strikethrough||i.underline){const a=t.measureText(r),o=e-a.actualBoundingBoxLeft,c=e+a.actualBoundingBoxRight,u=n-a.actualBoundingBoxAscent,f=n+a.actualBoundingBoxDescent,h=i.strikethrough?(u+f)/2:f;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(c,h),t.stroke()}}function DE(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Qo(t,e,n,r,i,a={}){const o=hn(e)?e:[e],c=a.strokeWidth>0&&a.strokeColor!=="";let u,f;for(t.save(),t.font=i.string,ME(t,a),u=0;u<o.length;++u)f=o[u],a.backdrop&&DE(t,a.backdrop),c&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),an(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(f,n,r,a.maxWidth)),t.fillText(f,n,r,a.maxWidth),TE(t,n,r,f,a),r+=Number(i.lineHeight);t.restore()}function nc(t,e){const{x:n,y:r,w:i,h:a,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Bt,Bt,!0),t.lineTo(n,r+a-o.bottomLeft),t.arc(n+o.bottomLeft,r+a-o.bottomLeft,o.bottomLeft,Bt,En,!0),t.lineTo(n+i-o.bottomRight,r+a),t.arc(n+i-o.bottomRight,r+a-o.bottomRight,o.bottomRight,En,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-En,!0),t.lineTo(n+o.topLeft,r)}const PE=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,RE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function IE(t,e){const n=(""+t).match(PE);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const FE=t=>+t||0;function yy(t,e){const n={},r=It(e),i=r?Object.keys(e):e,a=It(t)?r?o=>Dt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=FE(a(o));return n}function Qk(t){return yy(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Va(t){return yy(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Xn(t){const e=Qk(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Bn(t,e){t=t||{},e=e||Dn.font;let n=Dt(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Dt(t.style,e.style);r&&!(""+r).match(RE)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Dt(t.family,e.family),lineHeight:IE(Dt(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Dt(t.weight,e.weight),string:""};return i.string=AE(i),i}function Mn(t,e,n,r){let i,a,o;for(i=0,a=t.length;i<a;++i)if(o=t[i],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e)),n!==void 0&&hn(o)&&(o=o[n%o.length]),o!==void 0))return o}function zE(t,e,n){const{min:r,max:i}=t,a=Wk(e,(i-r)/2),o=(c,u)=>n&&c===0?0:c+u;return{min:o(r,-Math.abs(a)),max:o(i,a)}}function Ja(t,e){return Object.assign(Object.create(t),e)}function vy(t,e=[""],n,r,i=()=>t[0]){const a=n||t;typeof r>"u"&&(r=tN("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:r,_getTarget:i,override:c=>vy([c,...t],e,a,r)};return new Proxy(o,{deleteProperty(c,u){return delete c[u],delete c._keys,delete t[0][u],!0},get(c,u){return Jk(c,u,()=>YE(u,e,t,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(c,u){return e2(c).includes(u)},ownKeys(c){return e2(c)},set(c,u,f){const h=c._storage||(c._storage=i());return c[u]=h[u]=f,delete c._keys,!0}})}function rc(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Zk(t,r),setContext:a=>rc(t,a,n,r),override:a=>rc(t.override(a),e,n,r)};return new Proxy(i,{deleteProperty(a,o){return delete a[o],delete t[o],!0},get(a,o,c){return Jk(a,o,()=>qE(a,o,c))},getOwnPropertyDescriptor(a,o){return a._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(a,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(a,o,c){return t[o]=c,delete a[o],!0}})}function Zk(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:ls(n)?n:()=>n,isIndexable:ls(r)?r:()=>r}}const BE=(t,e)=>t?t+uy(e):e,by=(t,e)=>It(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Jk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function qE(t,e,n){const{_proxy:r,_context:i,_subProxy:a,_descriptors:o}=t;let c=r[e];return ls(c)&&o.isScriptable(e)&&(c=UE(e,c,t,n)),hn(c)&&c.length&&(c=WE(e,c,t,o.isIndexable)),by(e,c)&&(c=rc(c,i,a&&a[e],o)),c}function UE(t,e,n,r){const{_proxy:i,_context:a,_subProxy:o,_stack:c}=n;if(c.has(t))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+t);c.add(t);let u=e(a,o||r);return c.delete(t),by(t,u)&&(u=wy(i._scopes,i,t,u)),u}function WE(t,e,n,r){const{_proxy:i,_context:a,_subProxy:o,_descriptors:c}=n;if(typeof a.index<"u"&&r(t))return e[a.index%e.length];if(It(e[0])){const u=e,f=i._scopes.filter(h=>h!==u);e=[];for(const h of u){const p=wy(f,i,t,h);e.push(rc(p,a,o&&o[t],c))}}return e}function eN(t,e,n){return ls(t)?t(e,n):t}const HE=(t,e)=>t===!0?e:typeof t=="string"?Ga(e,t):void 0;function VE(t,e,n,r,i){for(const a of e){const o=HE(n,a);if(o){t.add(o);const c=eN(o._fallback,n,i);if(typeof c<"u"&&c!==n&&c!==r)return c}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function wy(t,e,n,r){const i=e._rootScopes,a=eN(e._fallback,n,r),o=[...t,...i],c=new Set;c.add(r);let u=J1(c,o,n,a||n,r);return u===null||typeof a<"u"&&a!==n&&(u=J1(c,o,a,u,r),u===null)?!1:vy(Array.from(c),[""],i,a,()=>$E(e,n,r))}function J1(t,e,n,r,i){for(;n;)n=VE(t,e,n,r,i);return n}function $E(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return hn(i)&&It(n)?n:i||{}}function YE(t,e,n,r){let i;for(const a of e)if(i=tN(BE(a,t),n),typeof i<"u")return by(t,i)?wy(n,r,t,i):i}function tN(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function e2(t){let e=t._keys;return e||(e=t._keys=KE(t._scopes)),e}function KE(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function GE(t,e,n,r){const{iScale:i}=t,{key:a="r"}=this._parsing,o=new Array(r);let c,u,f,h;for(c=0,u=r;c<u;++c)f=c+n,h=e[f],o[c]={r:i.parse(Ga(h,a),f)};return o}const XE=Number.EPSILON||1e-14,sc=(t,e)=>e<t.length&&!t[e].skip&&t[e],nN=t=>t==="x"?"y":"x";function QE(t,e,n,r){const i=t.skip?e:t,a=e,o=n.skip?e:n,c=tc(a,i),u=tc(o,a);let f=c/(c+u),h=u/(c+u);f=isNaN(f)?0:f,h=isNaN(h)?0:h;const p=r*f,m=r*h;return{previous:{x:a.x-p*(o.x-i.x),y:a.y-p*(o.y-i.y)},next:{x:a.x+m*(o.x-i.x),y:a.y+m*(o.y-i.y)}}}function ZE(t,e,n){const r=t.length;let i,a,o,c,u,f=sc(t,0);for(let h=0;h<r-1;++h)if(u=f,f=sc(t,h+1),!(!u||!f)){if(jd(e[h],0,XE)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],a=n[h+1]/e[h],c=Math.pow(i,2)+Math.pow(a,2),!(c<=9)&&(o=3/Math.sqrt(c),n[h]=i*o*e[h],n[h+1]=a*o*e[h])}}function JE(t,e,n="x"){const r=nN(n),i=t.length;let a,o,c,u=sc(t,0);for(let f=0;f<i;++f){if(o=c,c=u,u=sc(t,f+1),!c)continue;const h=c[n],p=c[r];o&&(a=(h-o[n])/3,c[`cp1${n}`]=h-a,c[`cp1${r}`]=p-a*e[f]),u&&(a=(u[n]-h)/3,c[`cp2${n}`]=h+a,c[`cp2${r}`]=p+a*e[f])}}function eO(t,e="x"){const n=nN(e),r=t.length,i=Array(r).fill(0),a=Array(r);let o,c,u,f=sc(t,0);for(o=0;o<r;++o)if(c=u,u=f,f=sc(t,o+1),!!u){if(f){const h=f[e]-u[e];i[o]=h!==0?(f[n]-u[n])/h:0}a[o]=c?f?ki(i[o-1])!==ki(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}ZE(t,i,a),JE(t,a,e)}function _f(t,e,n){return Math.max(Math.min(t,n),e)}function tO(t,e){let n,r,i,a,o,c=Gi(t[0],e);for(n=0,r=t.length;n<r;++n)o=a,a=c,c=n<r-1&&Gi(t[n+1],e),a&&(i=t[n],o&&(i.cp1x=_f(i.cp1x,e.left,e.right),i.cp1y=_f(i.cp1y,e.top,e.bottom)),c&&(i.cp2x=_f(i.cp2x,e.left,e.right),i.cp2y=_f(i.cp2y,e.top,e.bottom)))}function nO(t,e,n,r,i){let a,o,c,u;if(e.spanGaps&&(t=t.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")eO(t,i);else{let f=r?t[t.length-1]:t[0];for(a=0,o=t.length;a<o;++a)c=t[a],u=QE(f,c,t[Math.min(a+1,o-(r?0:1))%o],e.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,f=c}e.capBezierPoints&&tO(t,n)}function jy(){return typeof window<"u"&&typeof document<"u"}function _y(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function lh(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Eh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function rO(t,e){return Eh(t).getPropertyValue(e)}const sO=["top","right","bottom","left"];function Vo(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const a=sO[i];r[a]=parseFloat(t[e+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const iO=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function aO(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:a}=r;let o=!1,c,u;if(iO(i,a,t.target))c=i,u=a;else{const f=e.getBoundingClientRect();c=r.clientX-f.left,u=r.clientY-f.top,o=!0}return{x:c,y:u,box:o}}function Ao(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Eh(n),a=i.boxSizing==="border-box",o=Vo(i,"padding"),c=Vo(i,"border","width"),{x:u,y:f,box:h}=aO(t,n),p=o.left+(h&&c.left),m=o.top+(h&&c.top);let{width:x,height:v}=e;return a&&(x-=o.width+c.width,v-=o.height+c.height),{x:Math.round((u-p)/x*n.width/r),y:Math.round((f-m)/v*n.height/r)}}function oO(t,e,n){let r,i;if(e===void 0||n===void 0){const a=t&&_y(t);if(!a)e=t.clientWidth,n=t.clientHeight;else{const o=a.getBoundingClientRect(),c=Eh(a),u=Vo(c,"border","width"),f=Vo(c,"padding");e=o.width-f.width-u.width,n=o.height-f.height-u.height,r=lh(c.maxWidth,a,"clientWidth"),i=lh(c.maxHeight,a,"clientHeight")}}return{width:e,height:n,maxWidth:r||sh,maxHeight:i||sh}}const Ba=t=>Math.round(t*10)/10;function lO(t,e,n,r){const i=Eh(t),a=Vo(i,"margin"),o=lh(i.maxWidth,t,"clientWidth")||sh,c=lh(i.maxHeight,t,"clientHeight")||sh,u=oO(t,e,n);let{width:f,height:h}=u;if(i.boxSizing==="content-box"){const m=Vo(i,"border","width"),x=Vo(i,"padding");f-=x.width+m.width,h-=x.height+m.height}return f=Math.max(0,f-a.width),h=Math.max(0,r?f/r:h-a.height),f=Ba(Math.min(f,o,u.maxWidth)),h=Ba(Math.min(h,c,u.maxHeight)),f&&!h&&(h=Ba(f/2)),(e!==void 0||n!==void 0)&&r&&u.height&&h>u.height&&(h=u.height,f=Ba(Math.floor(h*r))),{width:f,height:h}}function t2(t,e,n){const r=e||1,i=Ba(t.height*r),a=Ba(t.width*r);t.height=Ba(t.height),t.width=Ba(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==a?(t.currentDevicePixelRatio=r,o.height=i,o.width=a,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const cO=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};jy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function n2(t,e){const n=rO(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Eo(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function dO(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function uO(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},o=Eo(t,i,n),c=Eo(i,a,n),u=Eo(a,e,n),f=Eo(o,c,n),h=Eo(c,u,n);return Eo(f,h,n)}const fO=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},hO=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Fl(t,e,n){return t?fO(e,n):hO()}function rN(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function sN(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function iN(t){return t==="angle"?{between:Dd,compare:fE,normalize:Pr}:{between:Ki,compare:(e,n)=>e-n,normalize:e=>e}}function r2({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function pO(t,e,n){const{property:r,start:i,end:a}=n,{between:o,normalize:c}=iN(r),u=e.length;let{start:f,end:h,loop:p}=t,m,x;if(p){for(f+=u,h+=u,m=0,x=u;m<x&&o(c(e[f%u][r]),i,a);++m)f--,h--;f%=u,h%=u}return h<f&&(h+=u),{start:f,end:h,loop:p,style:t.style}}function aN(t,e,n){if(!n)return[t];const{property:r,start:i,end:a}=n,o=e.length,{compare:c,between:u,normalize:f}=iN(r),{start:h,end:p,loop:m,style:x}=pO(t,e,n),v=[];let b=!1,y=null,w,k,N;const j=()=>u(i,N,w)&&c(i,N)!==0,S=()=>c(a,w)===0||u(a,N,w),A=()=>b||j(),O=()=>!b||S();for(let M=h,z=h;M<=p;++M)k=e[M%o],!k.skip&&(w=f(k[r]),w!==N&&(b=u(w,i,a),y===null&&A()&&(y=c(w,i)===0?M:z),y!==null&&O()&&(v.push(r2({start:y,end:M,loop:m,count:o,style:x})),y=null),z=M,N=w));return y!==null&&v.push(r2({start:y,end:p,loop:m,count:o,style:x})),v}function oN(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const a=aN(r[i],t.points,e);a.length&&n.push(...a)}return n}function mO(t,e,n,r){let i=0,a=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(a+=i);a>i&&t[a%e].skip;)a--;return a%=e,{start:i,end:a}}function gO(t,e,n,r){const i=t.length,a=[];let o=e,c=t[e],u;for(u=e+1;u<=n;++u){const f=t[u%i];f.skip||f.stop?c.skip||(r=!1,a.push({start:e%i,end:(u-1)%i,loop:r}),e=o=f.stop?u:null):(o=u,c.skip&&(e=u)),c=f}return o!==null&&a.push({start:e%i,end:o%i,loop:r}),a}function xO(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const a=!!t._loop,{start:o,end:c}=mO(n,i,a,r);if(r===!0)return s2(t,[{start:o,end:c,loop:a}],n,e);const u=c<o?c+i:c,f=!!t._fullLoop&&o===0&&c===i-1;return s2(t,gO(n,o,u,f),n,e)}function s2(t,e,n,r){return!r||!r.setContext||!n?e:yO(t,e,n,r)}function yO(t,e,n,r){const i=t._chart.getContext(),a=i2(t.options),{_datasetIndex:o,options:{spanGaps:c}}=t,u=n.length,f=[];let h=a,p=e[0].start,m=p;function x(v,b,y,w){const k=c?-1:1;if(v!==b){for(v+=u;n[v%u].skip;)v-=k;for(;n[b%u].skip;)b+=k;v%u!==b%u&&(f.push({start:v%u,end:b%u,loop:y,style:w}),h=w,p=b%u)}}for(const v of e){p=c?p:v.start;let b=n[p%u],y;for(m=p+1;m<=v.end;m++){const w=n[m%u];y=i2(r.setContext(Ja(i,{type:"segment",p0:b,p1:w,p0DataIndex:(m-1)%u,p1DataIndex:m%u,datasetIndex:o}))),vO(y,h)&&x(p,m-1,v.loop,h),b=w,h=y}p<m-1&&x(p,m-1,v.loop,h)}return f}function i2(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function vO(t,e){if(!e)return!1;const n=[],r=function(i,a){return my(a)?(n.includes(a)||n.push(a),n.indexOf(a)):a};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function kf(t,e,n){return t.options.clip?t[n]:e[n]}function bO(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:kf(n,e,"left"),right:kf(n,e,"right"),top:kf(r,e,"top"),bottom:kf(r,e,"bottom")}:e}function lN(t,e){const n=e._clip;if(n.disabled)return!1;const r=bO(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class wO{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const a=n.listeners[i],o=n.duration;a.forEach(c=>c({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Kk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const a=r.items;let o=a.length-1,c=!1,u;for(;o>=0;--o)u=a[o],u._active?(u._total>r.duration&&(r.duration=u._total),u.tick(e),c=!0):(a[o]=a[a.length-1],a.pop());c&&(i.draw(),this._notify(i,r,e,"progress")),a.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=a.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Bi=new wO;const a2="transparent",jO={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=X1(t||a2),i=r.valid&&X1(e||a2);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class _O{constructor(e,n,r,i){const a=n[r];i=Mn([e.to,i,a,e.from]);const o=Mn([e.from,a,i]);this._active=!0,this._fn=e.fn||jO[e.type||typeof o],this._easing=_d[e.easing]||_d.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],a=r-this._start,o=this._duration-a;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Mn([e.to,n,i,e.from]),this._from=Mn([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,a=this._from,o=this._loop,c=this._to;let u;if(this._active=a!==c&&(o||n<r),!this._active){this._target[i]=c,this._notify(!0);return}if(n<0){this._target[i]=a;return}u=n/r%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[i]=this._fn(a,c,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class ky{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!It(e))return;const n=Object.keys(Dn.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const a=e[i];if(!It(a))return;const o={};for(const c of n)o[c]=a[c];(hn(a.properties)&&a.properties||[i]).forEach(c=>{(c===i||!r.has(c))&&r.set(c,o)})})}_animateOptions(e,n){const r=n.options,i=NO(e,r);if(!i)return[];const a=this._createAnimations(i,r);return r.$shared&&kO(e.options.$animations,r).then(()=>{e.options=r},()=>{}),a}_createAnimations(e,n){const r=this._properties,i=[],a=e.$animations||(e.$animations={}),o=Object.keys(n),c=Date.now();let u;for(u=o.length-1;u>=0;--u){const f=o[u];if(f.charAt(0)==="$")continue;if(f==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[f];let p=a[f];const m=r.get(f);if(p)if(m&&p.active()){p.update(m,h,c);continue}else p.cancel();if(!m||!m.duration){e[f]=h;continue}a[f]=p=new _O(m,e,f,h),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Bi.add(this._chart,r),!0}}function kO(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const a=t[r[i]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}function NO(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function o2(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,a=n.max===void 0?e:0;return{start:r?a:i,end:r?i:a}}function SO(t,e,n){if(n===!1)return!1;const r=o2(t,n),i=o2(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function CO(t){let e,n,r,i;return It(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function cN(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,a;for(i=0,a=r.length;i<a;++i)n.push(r[i].index);return n}function l2(t,e,n,r={}){const i=t.keys,a=r.mode==="single";let o,c,u,f;if(e===null)return;let h=!1;for(o=0,c=i.length;o<c;++o){if(u=+i[o],u===n){if(h=!0,r.all)continue;break}f=t.values[u],tr(f)&&(a||e===0||ki(e)===ki(f))&&(e+=f)}return!h&&!r.all?0:e}function AO(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",a=r.axis==="x"?"x":"y",o=Object.keys(t),c=new Array(o.length);let u,f,h;for(u=0,f=o.length;u<f;++u)h=o[u],c[u]={[i]:h,[a]:t[h]};return c}function Um(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function EO(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function OO(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function LO(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function c2(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const a=t[i.index];if(n&&a>0||!n&&a<0)return i.index}return null}function d2(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:a,vScale:o,index:c}=r,u=a.axis,f=o.axis,h=EO(a,o,r),p=e.length;let m;for(let x=0;x<p;++x){const v=e[x],{[u]:b,[f]:y}=v,w=v._stacks||(v._stacks={});m=w[f]=LO(i,h,b),m[c]=y,m._top=c2(m,o,!0,r.type),m._bottom=c2(m,o,!1,r.type);const k=m._visualValues||(m._visualValues={});k[c]=y}}function Wm(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function MO(t,e){return Ja(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function TO(t,e,n){return Ja(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Zc(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const a=i._stacks;if(!a||a[r]===void 0||a[r][n]===void 0)return;delete a[r][n],a[r]._visualValues!==void 0&&a[r]._visualValues[n]!==void 0&&delete a[r]._visualValues[n]}}}const Hm=t=>t==="reset"||t==="none",u2=(t,e)=>e?t:Object.assign({},t),DO=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:cN(n,!0),values:null};class $o{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Um(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Zc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,m,x,v)=>p==="x"?m:p==="r"?v:x,a=n.xAxisID=Dt(r.xAxisID,Wm(e,"x")),o=n.yAxisID=Dt(r.yAxisID,Wm(e,"y")),c=n.rAxisID=Dt(r.rAxisID,Wm(e,"r")),u=n.indexAxis,f=n.iAxisID=i(u,a,o,c),h=n.vAxisID=i(u,o,a,c);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(c),n.iScale=this.getScaleForId(f),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Y1(this._data,this),e._stacked&&Zc(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(It(n)){const i=this._cachedMeta;this._data=AO(n,i)}else if(r!==n){if(r){Y1(r,this);const i=this._cachedMeta;Zc(i),i._parsed=[]}n&&Object.isExtensible(n)&&gE(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const a=n._stacked;n._stacked=Um(n.vScale,n),n.stack!==r.stack&&(i=!0,Zc(n),n.stack=r.stack),this._resyncElements(e),(i||a!==n._stacked)&&(d2(this,n._parsed),n._stacked=Um(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:a,_stacked:o}=r,c=a.axis;let u=e===0&&n===i.length?!0:r._sorted,f=e>0&&r._parsed[e-1],h,p,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{hn(i[e])?m=this.parseArrayData(r,i,e,n):It(i[e])?m=this.parseObjectData(r,i,e,n):m=this.parsePrimitiveData(r,i,e,n);const x=()=>p[c]===null||f&&p[c]<f[c];for(h=0;h<n;++h)r._parsed[h+e]=p=m[h],u&&(x()&&(u=!1),f=p);r._sorted=u}o&&d2(this,m)}parsePrimitiveData(e,n,r,i){const{iScale:a,vScale:o}=e,c=a.axis,u=o.axis,f=a.getLabels(),h=a===o,p=new Array(i);let m,x,v;for(m=0,x=i;m<x;++m)v=m+r,p[m]={[c]:h||a.parse(f[v],v),[u]:o.parse(n[v],v)};return p}parseArrayData(e,n,r,i){const{xScale:a,yScale:o}=e,c=new Array(i);let u,f,h,p;for(u=0,f=i;u<f;++u)h=u+r,p=n[h],c[u]={x:a.parse(p[0],h),y:o.parse(p[1],h)};return c}parseObjectData(e,n,r,i){const{xScale:a,yScale:o}=e,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,f=new Array(i);let h,p,m,x;for(h=0,p=i;h<p;++h)m=h+r,x=n[m],f[h]={x:a.parse(Ga(x,c),m),y:o.parse(Ga(x,u),m)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,a=this._cachedMeta,o=n[e.axis],c={keys:cN(i,!0),values:n._stacks[e.axis]._visualValues};return l2(c,o,a.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const a=r[n.axis];let o=a===null?NaN:a;const c=i&&r._stacks[n.axis];i&&c&&(i.values=c,o=l2(i,a,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,a=r._sorted&&e===r.iScale,o=i.length,c=this._getOtherScale(e),u=DO(n,r,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=OO(c);let m,x;function v(){x=i[m];const b=x[c.axis];return!tr(x[e.axis])||h>b||p<b}for(m=0;m<o&&!(!v()&&(this.updateRangeFromParsed(f,e,x,u),a));++m);if(a){for(m=o-1;m>=0;--m)if(!v()){this.updateRangeFromParsed(f,e,x,u);break}}return f}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,a,o;for(i=0,a=n.length;i<a;++i)o=n[i][e.axis],tr(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,a=this.getParsed(e);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:i?""+i.getLabelForValue(a[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=CO(Dt(this.options.clip,SO(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],a=n.chartArea,o=[],c=this._drawStart||0,u=this._drawCount||i.length-c,f=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,a,c,u),h=c;h<c+u;++h){const p=i[h];p.hidden||(p.active&&f?o.push(p):p.draw(e,a))}for(h=0;h<o.length;++h)o[h].draw(e,a)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];a=o.$context||(o.$context=TO(this.getContext(),e,o)),a.parsed=this.getParsed(e),a.raw=i.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=MO(this.chart.getContext(),this.index)),a.dataset=i,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=r,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",a=this._cachedDataOpts,o=e+"-"+n,c=a[o],u=this.enableOptionSharing&&fs(r);if(c)return u2(c,u);const f=this.chart.config,h=f.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],m=f.getOptionScopes(this.getDataset(),h),x=Object.keys(Dn.elements[e]),v=()=>this.getContext(r,i,n),b=f.resolveNamedOptions(m,x,v,p);return b.$shared&&(b.$shared=u,a[o]=Object.freeze(u2(b,u))),b}_resolveAnimations(e,n,r){const i=this.chart,a=this._cachedDataOpts,o=`animation-${n}`,c=a[o];if(c)return c;let u;if(i.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,n),m=h.getOptionScopes(this.getDataset(),p);u=h.createResolver(m,this.getContext(e,r,n))}const f=new ky(i,u&&u.animations);return u&&u._cacheable&&(a[o]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Hm(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,a=this.getSharedOptions(r),o=this.includeOptions(n,a)||a!==i;return this.updateSharedOptions(a,n,r),{sharedOptions:a,includeOptions:o}}updateElement(e,n,r,i){Hm(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!Hm(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const a=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(a)||a})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[c,u,f]of this._syncList)this[c](u,f);this._syncList=[];const i=r.length,a=n.length,o=Math.min(a,i);o&&this.parse(0,o),a>i?this._insertElements(i,a-i,e):a<i&&this._removeElements(a,i-a)}_insertElements(e,n,r=!0){const i=this._cachedMeta,a=i.data,o=e+n;let c;const u=f=>{for(f.length+=n,c=f.length-1;c>=o;c--)f[c]=f[c-n]};for(u(a),c=e;c<o;++c)a[c]=new this.dataElementType;this._parsing&&u(i._parsed),this.parse(e,n),r&&this.updateElements(a,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Zc(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ct($o,"defaults",{}),ct($o,"datasetElementType",null),ct($o,"dataElementType",null);function PO(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,a=n.length;i<a;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=Yk(r.sort((i,a)=>i-a))}return t._cache.$bar}function RO(t){const e=t.iScale,n=PO(e,t.type);let r=e._length,i,a,o,c;const u=()=>{o===32767||o===-32768||(fs(c)&&(r=Math.min(r,Math.abs(o-c)||r)),c=o)};for(i=0,a=n.length;i<a;++i)o=e.getPixelForValue(n[i]),u();for(c=void 0,i=0,a=e.ticks.length;i<a;++i)o=e.getPixelForTick(i),u();return r}function IO(t,e,n,r){const i=n.barThickness;let a,o;return an(i)?(a=e.min*n.categoryPercentage,o=n.barPercentage):(a=i*r,o=1),{chunk:a/r,ratio:o,start:e.pixels[t]-a/2}}function FO(t,e,n,r){const i=e.pixels,a=i[t];let o=t>0?i[t-1]:null,c=t<i.length-1?i[t+1]:null;const u=n.categoryPercentage;o===null&&(o=a-(c===null?e.end-e.start:c-a)),c===null&&(c=a+a-o);const f=a-(a-Math.min(o,c))/2*u;return{chunk:Math.abs(c-o)/2*u/r,ratio:n.barPercentage,start:f}}function zO(t,e,n,r){const i=n.parse(t[0],r),a=n.parse(t[1],r),o=Math.min(i,a),c=Math.max(i,a);let u=o,f=c;Math.abs(o)>Math.abs(c)&&(u=c,f=o),e[n.axis]=f,e._custom={barStart:u,barEnd:f,start:i,end:a,min:o,max:c}}function dN(t,e,n,r){return hn(t)?zO(t,e,n,r):e[n.axis]=n.parse(t,r),e}function f2(t,e,n,r){const i=t.iScale,a=t.vScale,o=i.getLabels(),c=i===a,u=[];let f,h,p,m;for(f=n,h=n+r;f<h;++f)m=e[f],p={},p[i.axis]=c||i.parse(o[f],f),u.push(dN(m,p,a,f));return u}function Vm(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function BO(t,e,n){return t!==0?ki(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function qO(t){let e,n,r,i,a;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",a="start"):(i="start",a="end"),{start:n,end:r,reverse:e,top:i,bottom:a}}function UO(t,e,n,r){let i=e.borderSkipped;const a={};if(!i){t.borderSkipped=a;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:u,top:f,bottom:h}=qO(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=f:(n._bottom||0)===r?i=h:(a[h2(h,o,c,u)]=!0,i=f)),a[h2(i,o,c,u)]=!0,t.borderSkipped=a}function h2(t,e,n,r){return r?(t=WO(t,e,n),t=p2(t,n,e)):t=p2(t,e,n),t}function WO(t,e,n){return t===e?n:t===n?e:t}function p2(t,e,n){return t==="start"?e:t==="end"?n:t}function HO(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Uf extends $o{parsePrimitiveData(e,n,r,i){return f2(e,n,r,i)}parseArrayData(e,n,r,i){return f2(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:a,vScale:o}=e,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,f=a.axis==="x"?c:u,h=o.axis==="x"?c:u,p=[];let m,x,v,b;for(m=r,x=r+i;m<x;++m)b=n[m],v={},v[a.axis]=a.parse(Ga(b,f),m),p.push(dN(Ga(b,h),v,o,m));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const a=r._custom;a&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,a=this.getParsed(e),o=a._custom,c=Vm(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(a[i.axis]);return{label:""+r.getLabelForValue(a[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const a=i==="reset",{index:o,_cachedMeta:{vScale:c}}=this,u=c.getBasePixel(),f=c.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:m}=this._getSharedOptions(n,i);for(let x=n;x<n+r;x++){const v=this.getParsed(x),b=a||an(v[c.axis])?{base:u,head:u}:this._calculateBarValuePixels(x),y=this._calculateBarIndexPixels(x,h),w=(v._stacks||{})[c.axis],k={horizontal:f,base:b.base,enableBorderRadius:!w||Vm(v._custom)||o===w._top||o===w._bottom,x:f?b.head:y.center,y:f?y.center:b.head,height:f?y.size:Math.abs(b.size),width:f?Math.abs(b.size):y.size};m&&(k.options=p||this.resolveDataElementOptions(x,e[x].active?"active":i));const N=k.options||e[x].options;UO(k,N,w,o),HO(k,N,h.ratio),this.updateElement(e[x],x,k,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),a=r.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(n),u=c&&c[r.axis],f=h=>{const p=h._parsed.find(x=>x[r.axis]===u),m=p&&p[h.vScale.axis];if(an(m)||isNaN(m))return!0};for(const h of i)if(!(n!==void 0&&f(h))&&((a===!1||o.indexOf(h.stack)===-1||a===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[Dt(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const i=this._getStacks(e,r),a=n!==void 0?i.indexOf(n):-1;return a===-1?i.length-1:a}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let a,o;for(a=0,o=n.data.length;a<o;++a)i.push(r.getPixelForValue(this.getParsed(a)[r.axis],a));const c=e.barThickness;return{min:c||RO(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:a,minBarLength:o}}=this,c=a||0,u=this.getParsed(e),f=u._custom,h=Vm(f);let p=u[n.axis],m=0,x=r?this.applyStack(n,u,r):p,v,b;x!==p&&(m=x-p,x=p),h&&(p=f.barStart,x=f.barEnd-f.barStart,p!==0&&ki(p)!==ki(f.barEnd)&&(m=0),m+=p);const y=!an(a)&&!h?a:m;let w=n.getPixelForValue(y);if(this.chart.getDataVisibility(e)?v=n.getPixelForValue(m+x):v=w,b=v-w,Math.abs(b)<o){b=BO(b,n,c)*o,p===c&&(w-=b/2);const k=n.getPixelForDecimal(0),N=n.getPixelForDecimal(1),j=Math.min(k,N),S=Math.max(k,N);w=Math.max(Math.min(w,S),j),v=w+b,r&&!h&&(u._stacks[n.axis]._visualValues[i]=n.getValueForPixel(v)-n.getValueForPixel(w))}if(w===n.getPixelForValue(c)){const k=ki(b)*n.getLineWidthForValue(c)/2;w+=k,b-=k}return{size:b,base:w,head:v,center:v+b/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,a=i.skipNull,o=Dt(i.maxBarThickness,1/0);let c,u;const f=this._getAxisCount();if(n.grouped){const h=a?this._getStackCount(e):n.stackCount,p=i.barThickness==="flex"?FO(e,n,i,h*f):IO(e,n,i,h*f),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(Dt(m,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+x;c=p.start+p.chunk*v+p.chunk/2,u=Math.min(o,p.chunk*p.ratio)}else c=r.getPixelForValue(this.getParsed(e)[r.axis],e),u=Math.min(o,n.min*n.ratio);return{base:c-u/2,head:c+u/2,center:c,size:u}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let a=0;for(;a<i;++a)this.getParsed(a)[n.axis]!==null&&!r[a].hidden&&r[a].draw(this._ctx)}}ct(Uf,"id","bar"),ct(Uf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ct(Uf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function VO(t,e,n){let r=1,i=1,a=0,o=0;if(e<_n){const c=t,u=c+e,f=Math.cos(c),h=Math.sin(c),p=Math.cos(u),m=Math.sin(u),x=(N,j,S)=>Dd(N,c,u,!0)?1:Math.max(j,j*n,S,S*n),v=(N,j,S)=>Dd(N,c,u,!0)?-1:Math.min(j,j*n,S,S*n),b=x(0,f,p),y=x(En,h,m),w=v(Bt,f,p),k=v(Bt+En,h,m);r=(b-w)/2,i=(y-k)/2,a=-(b+w)/2,o=-(y+k)/2}return{ratioX:r,ratioY:i,offsetX:a,offsetY:o}}class Mo extends $o{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let a=u=>+r[u];if(It(r[e])){const{key:u="value"}=this._parsing;a=f=>+Ga(r[f],u)}let o,c;for(o=e,c=e+n;o<c;++o)i._parsed[o]=a(o)}}_getRotation(){return cr(this.options.rotation-90)}_getCircumference(){return cr(this.options.circumference)}_getRotationExtents(){let e=_n,n=-_n;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,a=i._getRotation(),o=i._getCircumference();e=Math.min(e,a),n=Math.max(n,a+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,a=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-o)/2,0),u=Math.min(tE(this.options.cutout,c),1),f=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:m,ratioY:x,offsetX:v,offsetY:b}=VO(p,h,u),y=(r.width-o)/m,w=(r.height-o)/x,k=Math.max(Math.min(y,w)/2,0),N=Wk(this.options.radius,k),j=Math.max(N*u,0),S=(N-j)/this._getVisibleDatasetWeightTotal();this.offsetX=v*N,this.offsetY=b*N,i.total=this.calculateTotal(),this.outerRadius=N-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*f,0),this.updateElements(a,0,a.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,a=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*a/_n)}updateElements(e,n,r,i){const a=i==="reset",o=this.chart,c=o.chartArea,f=o.options.animation,h=(c.left+c.right)/2,p=(c.top+c.bottom)/2,m=a&&f.animateScale,x=m?0:this.innerRadius,v=m?0:this.outerRadius,{sharedOptions:b,includeOptions:y}=this._getSharedOptions(n,i);let w=this._getRotation(),k;for(k=0;k<n;++k)w+=this._circumference(k,a);for(k=n;k<n+r;++k){const N=this._circumference(k,a),j=e[k],S={x:h+this.offsetX,y:p+this.offsetY,startAngle:w,endAngle:w+N,circumference:N,outerRadius:v,innerRadius:x};y&&(S.options=b||this.resolveDataElementOptions(k,j.active?"active":i)),w+=N,this.updateElement(j,k,S,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const a=e._parsed[i];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(a))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?_n*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],a=gy(n._parsed[e],r.options.locale);return{label:i[e]||"",value:a}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,a,o,c,u;if(!e){for(i=0,a=r.data.datasets.length;i<a;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,c=o.controller;break}}if(!e)return 0;for(i=0,a=e.length;i<a;++i)u=c.resolveDataElementOptions(i),u.borderAlign!=="inner"&&(n=Math.max(n,u.borderWidth||0,u.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const a=this.resolveDataElementOptions(r);n=Math.max(n,a.offset||0,a.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Dt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ct(Mo,"id","doughnut"),ct(Mo,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ct(Mo,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ct(Mo,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:i,color:a,useBorderRadius:o,borderRadius:c}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((u,f)=>{const p=e.getDatasetMeta(0).controller.getStyle(f);return{text:u,fillStyle:p.backgroundColor,fontColor:a,hidden:!e.getDataVisibility(f),lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:p.borderWidth,strokeStyle:p.borderColor,textAlign:i,pointStyle:r,borderRadius:o&&(c||p.borderRadius),index:f}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class yx extends Mo{}ct(yx,"id","pie"),ct(yx,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Wf extends $o{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return GE.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],a=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const c={_loop:!0,_fullLoop:a.length===i.length,options:o};this.updateElement(r,void 0,c,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const a=this._cachedMeta.rScale,o=i==="reset";for(let c=n;c<n+r;c++){const u=e[c],f=this.resolveDataElementOptions(c,u.active?"active":i),h=a.getPointPositionForValue(c,this.getParsed(c).r),p=o?a.xCenter:h.x,m=o?a.yCenter:h.y,x={x:p,y:m,angle:h.angle,skip:isNaN(p)||isNaN(m),options:f};this.updateElement(u,c,x,i)}}}ct(Wf,"id","radar"),ct(Wf,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ct(Wf,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});function So(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ny{constructor(e){ct(this,"options");this.options=e||{}}static override(e){Object.assign(Ny.prototype,e)}init(){}formats(){return So()}parse(){return So()}format(){return So()}add(){return So()}diff(){return So()}startOf(){return So()}endOf(){return So()}}var $O={_date:Ny};function YO(t,e,n,r){const{controller:i,data:a,_sorted:o}=t,c=i._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&o&&a.length){const f=c._reversePixels?pE:mx;if(r){if(i._sharedOptions){const h=a[0],p=typeof h.getRange=="function"&&h.getRange(e);if(p){const m=f(a,e,n-p),x=f(a,e,n+p);return{lo:m.lo,hi:x.hi}}}}else{const h=f(a,e,n);if(u){const{vScale:p}=i._cachedMeta,{_parsed:m}=t,x=m.slice(0,h.lo+1).reverse().findIndex(b=>!an(b[p.axis]));h.lo-=Math.max(0,x);const v=m.slice(h.hi).findIndex(b=>!an(b[p.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:a.length-1}}function Oh(t,e,n,r,i){const a=t.getSortedVisibleDatasetMetas(),o=n[e];for(let c=0,u=a.length;c<u;++c){const{index:f,data:h}=a[c],{lo:p,hi:m}=YO(a[c],e,o,i);for(let x=p;x<=m;++x){const v=h[x];v.skip||r(v,f,x)}}}function KO(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const a=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function $m(t,e,n,r,i){const a=[];return!i&&!t.isPointInArea(e)||Oh(t,n,e,function(c,u,f){!i&&!Gi(c,t.chartArea,0)||c.inRange(e.x,e.y,r)&&a.push({element:c,datasetIndex:u,index:f})},!0),a}function GO(t,e,n,r){let i=[];function a(o,c,u){const{startAngle:f,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:p}=ah(o,{x:e.x,y:e.y});Dd(p,f,h)&&i.push({element:o,datasetIndex:c,index:u})}return Oh(t,n,e,a),i}function XO(t,e,n,r,i,a){let o=[];const c=KO(n);let u=Number.POSITIVE_INFINITY;function f(h,p,m){const x=h.inRange(e.x,e.y,i);if(r&&!x)return;const v=h.getCenterPoint(i);if(!(!!a||t.isPointInArea(v))&&!x)return;const y=c(e,v);y<u?(o=[{element:h,datasetIndex:p,index:m}],u=y):y===u&&o.push({element:h,datasetIndex:p,index:m})}return Oh(t,n,e,f),o}function Ym(t,e,n,r,i,a){return!a&&!t.isPointInArea(e)?[]:n==="r"&&!r?GO(t,e,n,i):XO(t,e,n,r,i,a)}function m2(t,e,n,r,i){const a=[],o=n==="x"?"inXRange":"inYRange";let c=!1;return Oh(t,n,e,(u,f,h)=>{u[o]&&u[o](e[n],i)&&(a.push({element:u,datasetIndex:f,index:h}),c=c||u.inRange(e.x,e.y,i))}),r&&!c?[]:a}var QO={modes:{index(t,e,n,r){const i=Ao(e,t),a=n.axis||"x",o=n.includeInvisible||!1,c=n.intersect?$m(t,i,a,r,o):Ym(t,i,a,!1,r,o),u=[];return c.length?(t.getSortedVisibleDatasetMetas().forEach(f=>{const h=c[0].index,p=f.data[h];p&&!p.skip&&u.push({element:p,datasetIndex:f.index,index:h})}),u):[]},dataset(t,e,n,r){const i=Ao(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;let c=n.intersect?$m(t,i,a,r,o):Ym(t,i,a,!1,r,o);if(c.length>0){const u=c[0].datasetIndex,f=t.getDatasetMeta(u).data;c=[];for(let h=0;h<f.length;++h)c.push({element:f[h],datasetIndex:u,index:h})}return c},point(t,e,n,r){const i=Ao(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;return $m(t,i,a,r,o)},nearest(t,e,n,r){const i=Ao(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;return Ym(t,i,a,n.intersect,r,o)},x(t,e,n,r){const i=Ao(e,t);return m2(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Ao(e,t);return m2(t,i,"y",n.intersect,r)}}};const uN=["left","top","right","bottom"];function Jc(t,e){return t.filter(n=>n.pos===e)}function g2(t,e){return t.filter(n=>uN.indexOf(n.pos)===-1&&n.box.axis===e)}function ed(t,e){return t.sort((n,r)=>{const i=e?r:n,a=e?n:r;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function ZO(t){const e=[];let n,r,i,a,o,c;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:a,options:{stack:o,stackWeight:c=1}}=i,e.push({index:n,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&a+o,stackWeight:c});return e}function JO(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:a}=n;if(!r||!uN.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return e}function e6(t,e){const n=JO(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let a,o,c;for(a=0,o=t.length;a<o;++a){c=t[a];const{fullSize:u}=c.box,f=n[c.stack],h=f&&c.stackWeight/f.weight;c.horizontal?(c.width=h?h*r:u&&e.availableWidth,c.height=i):(c.width=r,c.height=h?h*i:u&&e.availableHeight)}return n}function t6(t){const e=ZO(t),n=ed(e.filter(f=>f.box.fullSize),!0),r=ed(Jc(e,"left"),!0),i=ed(Jc(e,"right")),a=ed(Jc(e,"top"),!0),o=ed(Jc(e,"bottom")),c=g2(e,"x"),u=g2(e,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:i.concat(u).concat(o).concat(c),chartArea:Jc(e,"chartArea"),vertical:r.concat(i).concat(u),horizontal:a.concat(o).concat(c)}}function x2(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function fN(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function n6(t,e,n,r){const{pos:i,box:a}=n,o=t.maxPadding;if(!It(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?a.height:a.width),n.size=p.size/p.count,t[i]+=n.size}a.getPadding&&fN(o,a.getPadding());const c=Math.max(0,e.outerWidth-x2(o,t,"left","right")),u=Math.max(0,e.outerHeight-x2(o,t,"top","bottom")),f=c!==t.w,h=u!==t.h;return t.w=c,t.h=u,n.horizontal?{same:f,other:h}:{same:h,other:f}}function r6(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function s6(t,e){const n=e.maxPadding;function r(i){const a={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{a[o]=Math.max(e[o],n[o])}),a}return r(t?["left","right"]:["top","bottom"])}function md(t,e,n,r){const i=[];let a,o,c,u,f,h;for(a=0,o=t.length,f=0;a<o;++a){c=t[a],u=c.box,u.update(c.width||e.w,c.height||e.h,s6(c.horizontal,e));const{same:p,other:m}=n6(e,n,c,r);f|=p&&i.length,h=h||m,u.fullSize||i.push(c)}return f&&md(i,e,n,r)||h}function Nf(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function y2(t,e,n,r){const i=n.padding;let{x:a,y:o}=e;for(const c of t){const u=c.box,f=r[c.stack]||{placed:0,weight:1},h=c.stackWeight/f.weight||1;if(c.horizontal){const p=e.w*h,m=f.size||u.height;fs(f.start)&&(o=f.start),u.fullSize?Nf(u,i.left,o,n.outerWidth-i.right-i.left,m):Nf(u,e.left+f.placed,o,p,m),f.start=o,f.placed+=p,o=u.bottom}else{const p=e.h*h,m=f.size||u.width;fs(f.start)&&(a=f.start),u.fullSize?Nf(u,a,i.top,m,n.outerHeight-i.bottom-i.top):Nf(u,a,e.top+f.placed,m,p),f.start=a,f.placed+=p,a=u.right}}e.x=a,e.y=o}var Rs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Xn(t.options.layout.padding),a=Math.max(e-i.width,0),o=Math.max(n-i.height,0),c=t6(t.boxes),u=c.vertical,f=c.horizontal;pn(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=u.reduce((b,y)=>y.box.options&&y.box.options.display===!1?b:b+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/h,hBoxMaxHeight:o/2}),m=Object.assign({},i);fN(m,Xn(r));const x=Object.assign({maxPadding:m,w:a,h:o,x:i.left,y:i.top},i),v=e6(u.concat(f),p);md(c.fullSize,x,p,v),md(u,x,p,v),md(f,x,p,v)&&md(u,x,p,v),r6(x),y2(c.leftAndTop,x,p,v),x.x+=x.w,x.y+=x.h,y2(c.rightAndBottom,x,p,v),t.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},pn(c.chartArea,b=>{const y=b.box;Object.assign(y,t.chartArea),y.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class hN{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class i6 extends hN{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Hf="$chartjs",a6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},v2=t=>t===null||t==="";function o6(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Hf]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",v2(i)){const a=n2(t,"width");a!==void 0&&(t.width=a)}if(v2(r))if(t.style.height==="")t.height=t.width/(e||2);else{const a=n2(t,"height");a!==void 0&&(t.height=a)}return t}const pN=cO?{passive:!0}:!1;function l6(t,e,n){t&&t.addEventListener(e,n,pN)}function c6(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,pN)}function d6(t,e){const n=a6[t.type]||t.type,{x:r,y:i}=Ao(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function ch(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function u6(t,e,n){const r=t.canvas,i=new MutationObserver(a=>{let o=!1;for(const c of a)o=o||ch(c.addedNodes,r),o=o&&!ch(c.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function f6(t,e,n){const r=t.canvas,i=new MutationObserver(a=>{let o=!1;for(const c of a)o=o||ch(c.removedNodes,r),o=o&&!ch(c.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Pd=new Map;let b2=0;function mN(){const t=window.devicePixelRatio;t!==b2&&(b2=t,Pd.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function h6(t,e){Pd.size||window.addEventListener("resize",mN),Pd.set(t,e)}function p6(t){Pd.delete(t),Pd.size||window.removeEventListener("resize",mN)}function m6(t,e,n){const r=t.canvas,i=r&&_y(r);if(!i)return;const a=Gk((c,u)=>{const f=i.clientWidth;n(c,u),f<i.clientWidth&&n()},window),o=new ResizeObserver(c=>{const u=c[0],f=u.contentRect.width,h=u.contentRect.height;f===0&&h===0||a(f,h)});return o.observe(i),h6(t,a),o}function Km(t,e,n){n&&n.disconnect(),e==="resize"&&p6(t)}function g6(t,e,n){const r=t.canvas,i=Gk(a=>{t.ctx!==null&&n(d6(a,t))},t);return l6(r,e,i),i}class x6 extends hN{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(o6(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Hf])return!1;const r=n[Hf].initial;["height","width"].forEach(a=>{const o=r[a];an(o)?n.removeAttribute(a):n.setAttribute(a,o)});const i=r.style||{};return Object.keys(i).forEach(a=>{n.style[a]=i[a]}),n.width=n.width,delete n[Hf],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:u6,detach:f6,resize:m6}[n]||g6;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Km,detach:Km,resize:Km}[n]||c6)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return lO(e,n,r,i)}isAttached(e){const n=e&&_y(e);return!!(n&&n.isConnected)}}function y6(t){return!jy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?i6:x6}class xr{constructor(){ct(this,"x");ct(this,"y");ct(this,"active",!1);ct(this,"options");ct(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return ec(this.x)&&ec(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(a=>{i[a]=r[a]&&r[a].active()?r[a]._to:this[a]}),i}}ct(xr,"defaults",{}),ct(xr,"defaultRoutes");function v6(t,e){const n=t.options.ticks,r=b6(t),i=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?j6(e):[],o=a.length,c=a[0],u=a[o-1],f=[];if(o>i)return _6(e,f,a,o/i),f;const h=w6(a,e,i);if(o>0){let p,m;const x=o>1?Math.round((u-c)/(o-1)):null;for(Sf(e,f,h,an(x)?0:c-x,c),p=0,m=o-1;p<m;p++)Sf(e,f,h,a[p],a[p+1]);return Sf(e,f,h,u,an(x)?e.length:u+x),f}return Sf(e,f,h),f}function b6(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function w6(t,e,n){const r=k6(t),i=e.length/n;if(!r)return Math.max(i,1);const a=lE(r);for(let o=0,c=a.length-1;o<c;o++){const u=a[o];if(u>i)return u}return Math.max(i,1)}function j6(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function _6(t,e,n,r){let i=0,a=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===a&&(e.push(t[o]),i++,a=n[i*r])}function Sf(t,e,n,r,i){const a=Dt(r,0),o=Math.min(Dt(i,t.length),t.length);let c=0,u,f,h;for(n=Math.ceil(n),i&&(u=i-r,n=u/Math.floor(u/n)),h=a;h<0;)c++,h=Math.round(a+c*n);for(f=Math.max(a,0);f<o;f++)f===h&&(e.push(t[f]),c++,h=Math.round(a+c*n))}function k6(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const N6=t=>t==="left"?"right":t==="right"?"left":t,w2=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,j2=(t,e)=>Math.min(e||t,t);function _2(t,e){const n=[],r=t.length/e,i=t.length;let a=0;for(;a<i;a+=r)n.push(t[Math.floor(a)]);return n}function S6(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),a=t._startPixel,o=t._endPixel,c=1e-6;let u=t.getPixelForTick(i),f;if(!(n&&(r===1?f=Math.max(u-a,o-u):e===0?f=(t.getPixelForTick(1)-u)/2:f=(u-t.getPixelForTick(i-1))/2,u+=i<e?f:-f,u<a-c||u>o+c)))return u}function C6(t,e){pn(t,n=>{const r=n.gc,i=r.length/2;let a;if(i>e){for(a=0;a<i;++a)delete n.data[r[a]];r.splice(0,i)}})}function td(t){return t.drawTicks?t.tickLength:0}function k2(t,e){if(!t.display)return 0;const n=Bn(t.font,e),r=Xn(t.padding);return(hn(t.text)?t.text.length:1)*n.lineHeight+r.height}function A6(t,e){return Ja(t,{scale:e,type:"scale"})}function E6(t,e,n){return Ja(t,{tick:n,index:e,type:"tick"})}function O6(t,e,n){let r=py(t);return(n&&e!=="right"||!n&&e==="right")&&(r=N6(r)),r}function L6(t,e,n,r){const{top:i,left:a,bottom:o,right:c,chart:u}=t,{chartArea:f,scales:h}=u;let p=0,m,x,v;const b=o-i,y=c-a;if(t.isHorizontal()){if(x=Dr(r,a,c),It(n)){const w=Object.keys(n)[0],k=n[w];v=h[w].getPixelForValue(k)+b-e}else n==="center"?v=(f.bottom+f.top)/2+b-e:v=w2(t,n,e);m=c-a}else{if(It(n)){const w=Object.keys(n)[0],k=n[w];x=h[w].getPixelForValue(k)-y+e}else n==="center"?x=(f.left+f.right)/2-y+e:x=w2(t,n,e);v=Dr(r,o,i),p=n==="left"?-En:En}return{titleX:x,titleY:v,maxWidth:m,rotation:p}}class fc extends xr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=gi(e,Number.POSITIVE_INFINITY),n=gi(n,Number.NEGATIVE_INFINITY),r=gi(r,Number.POSITIVE_INFINITY),i=gi(i,Number.NEGATIVE_INFINITY),{min:gi(e,r),max:gi(n,i),minDefined:tr(e),maxDefined:tr(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:a}=this.getUserBounds(),o;if(i&&a)return{min:n,max:r};const c=this.getMatchingVisibleMetas();for(let u=0,f=c.length;u<f;++u)o=c[u].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),a||(r=Math.max(r,o.max));return n=a&&n>r?r:n,r=i&&n>r?n:r,{min:gi(n,gi(r,n)),max:gi(r,gi(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){fn(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:a,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=zE(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?_2(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=v6(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){fn(this.options.afterUpdate,[this])}beforeSetDimensions(){fn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){fn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),fn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){fn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,a;for(r=0,i=e.length;r<i;r++)a=e[r],a.label=fn(n.callback,[a.value,r,e],this)}afterTickToLabelConversion(){fn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){fn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=j2(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,a=n.maxRotation;let o=i,c,u,f;if(!this._isVisible()||!n.display||i>=a||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),p=h.widest.width,m=h.highest.height,x=os(this.chart.width-p,0,this.maxWidth);c=e.offset?this.maxWidth/r:x/(r-1),p+6>c&&(c=x/(r-(e.offset?.5:1)),u=this.maxHeight-td(e.grid)-n.padding-k2(e.title,this.chart.options.font),f=Math.sqrt(p*p+m*m),o=Ah(Math.min(Math.asin(os((h.highest.height+6)/c,-1,1)),Math.asin(os(u/f,-1,1))-Math.asin(os(m/f,-1,1)))),o=Math.max(i,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){fn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){fn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:a}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const u=k2(i,n.options.font);if(c?(e.width=this.maxWidth,e.height=td(a)+u):(e.height=this.maxHeight,e.width=td(a)+u),r.display&&this.ticks.length){const{first:f,last:h,widest:p,highest:m}=this._getLabelSizes(),x=r.padding*2,v=cr(this.labelRotation),b=Math.cos(v),y=Math.sin(v);if(c){const w=r.mirror?0:y*p.width+b*m.height;e.height=Math.min(this.maxHeight,e.height+w+x)}else{const w=r.mirror?0:b*p.width+y*m.height;e.width=Math.min(this.maxWidth,e.width+w+x)}this._calculatePadding(f,h,y,b)}}this._handleMargins(),c?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:a,padding:o},position:c}=this.options,u=this.labelRotation!==0,f=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,x=0;u?f?(m=i*e.width,x=r*n.height):(m=r*e.height,x=i*n.width):a==="start"?x=n.width:a==="end"?m=e.width:a!=="inner"&&(m=e.width/2,x=n.width/2),this.paddingLeft=Math.max((m-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((x-p+o)*this.width/(this.width-p),0)}else{let h=n.height/2,p=e.height/2;a==="start"?(h=0,p=e.height):a==="end"&&(h=n.height,p=0),this.paddingTop=h+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){fn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)an(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=_2(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:a}=this,o=[],c=[],u=Math.floor(n/j2(n,r));let f=0,h=0,p,m,x,v,b,y,w,k,N,j,S;for(p=0;p<n;p+=u){if(v=e[p].label,b=this._resolveTickFontOptions(p),i.font=y=b.string,w=a[y]=a[y]||{data:{},gc:[]},k=b.lineHeight,N=j=0,!an(v)&&!hn(v))N=oh(i,w.data,w.gc,N,v),j=k;else if(hn(v))for(m=0,x=v.length;m<x;++m)S=v[m],!an(S)&&!hn(S)&&(N=oh(i,w.data,w.gc,N,S),j+=k);o.push(N),c.push(j),f=Math.max(N,f),h=Math.max(j,h)}C6(a,n);const A=o.indexOf(f),O=c.indexOf(h),M=z=>({width:o[z]||0,height:c[z]||0});return{first:M(0),last:M(n-1),widest:M(A),highest:M(O),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return hE(this._alignToPixels?No(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=E6(this.getContext(),e,r))}return this.$context||(this.$context=A6(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=cr(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),a=this._getLabelSizes(),o=e.autoSkipPadding||0,c=a?a.widest.width+o:0,u=a?a.highest.height+o:0;return this.isHorizontal()?u*r>c*i?c/r:u/i:u*i<c*r?u/r:c/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:a,position:o,border:c}=i,u=a.offset,f=this.isHorizontal(),p=this.ticks.length+(u?1:0),m=td(a),x=[],v=c.setContext(this.getContext()),b=v.display?v.width:0,y=b/2,w=function(ee){return No(r,ee,b)};let k,N,j,S,A,O,M,z,I,D,T,q;if(o==="top")k=w(this.bottom),O=this.bottom-m,z=k-y,D=w(e.top)+y,q=e.bottom;else if(o==="bottom")k=w(this.top),D=e.top,q=w(e.bottom)-y,O=k+y,z=this.top+m;else if(o==="left")k=w(this.right),A=this.right-m,M=k-y,I=w(e.left)+y,T=e.right;else if(o==="right")k=w(this.left),I=e.left,T=w(e.right)-y,A=k+y,M=this.left+m;else if(n==="x"){if(o==="center")k=w((e.top+e.bottom)/2+.5);else if(It(o)){const ee=Object.keys(o)[0],X=o[ee];k=w(this.chart.scales[ee].getPixelForValue(X))}D=e.top,q=e.bottom,O=k+y,z=O+m}else if(n==="y"){if(o==="center")k=w((e.left+e.right)/2);else if(It(o)){const ee=Object.keys(o)[0],X=o[ee];k=w(this.chart.scales[ee].getPixelForValue(X))}A=k-y,M=A-m,I=e.left,T=e.right}const H=Dt(i.ticks.maxTicksLimit,p),G=Math.max(1,Math.ceil(p/H));for(N=0;N<p;N+=G){const ee=this.getContext(N),X=a.setContext(ee),J=c.setContext(ee),K=X.lineWidth,W=X.color,R=J.dash||[],U=J.dashOffset,B=X.tickWidth,Q=X.tickColor,Z=X.tickBorderDash||[],$=X.tickBorderDashOffset;j=S6(this,N,u),j!==void 0&&(S=No(r,j,K),f?A=M=I=T=S:O=z=D=q=S,x.push({tx1:A,ty1:O,tx2:M,ty2:z,x1:I,y1:D,x2:T,y2:q,width:K,color:W,borderDash:R,borderDashOffset:U,tickWidth:B,tickColor:Q,tickBorderDash:Z,tickBorderDashOffset:$}))}return this._ticksLength=p,this._borderValue=k,x}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:a}=r,o=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:f,padding:h,mirror:p}=a,m=td(r.grid),x=m+h,v=p?-h:x,b=-cr(this.labelRotation),y=[];let w,k,N,j,S,A,O,M,z,I,D,T,q="middle";if(i==="top")A=this.bottom-v,O=this._getXAxisLabelAlignment();else if(i==="bottom")A=this.top+v,O=this._getXAxisLabelAlignment();else if(i==="left"){const G=this._getYAxisLabelAlignment(m);O=G.textAlign,S=G.x}else if(i==="right"){const G=this._getYAxisLabelAlignment(m);O=G.textAlign,S=G.x}else if(n==="x"){if(i==="center")A=(e.top+e.bottom)/2+x;else if(It(i)){const G=Object.keys(i)[0],ee=i[G];A=this.chart.scales[G].getPixelForValue(ee)+x}O=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")S=(e.left+e.right)/2-x;else if(It(i)){const G=Object.keys(i)[0],ee=i[G];S=this.chart.scales[G].getPixelForValue(ee)}O=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(u==="start"?q="top":u==="end"&&(q="bottom"));const H=this._getLabelSizes();for(w=0,k=c.length;w<k;++w){N=c[w],j=N.label;const G=a.setContext(this.getContext(w));M=this.getPixelForTick(w)+a.labelOffset,z=this._resolveTickFontOptions(w),I=z.lineHeight,D=hn(j)?j.length:1;const ee=D/2,X=G.color,J=G.textStrokeColor,K=G.textStrokeWidth;let W=O;o?(S=M,O==="inner"&&(w===k-1?W=this.options.reverse?"left":"right":w===0?W=this.options.reverse?"right":"left":W="center"),i==="top"?f==="near"||b!==0?T=-D*I+I/2:f==="center"?T=-H.highest.height/2-ee*I+I:T=-H.highest.height+I/2:f==="near"||b!==0?T=I/2:f==="center"?T=H.highest.height/2-ee*I:T=H.highest.height-D*I,p&&(T*=-1),b!==0&&!G.showLabelBackdrop&&(S+=I/2*Math.sin(b))):(A=M,T=(1-D)*I/2);let R;if(G.showLabelBackdrop){const U=Xn(G.backdropPadding),B=H.heights[w],Q=H.widths[w];let Z=T-U.top,$=0-U.left;switch(q){case"middle":Z-=B/2;break;case"bottom":Z-=B;break}switch(O){case"center":$-=Q/2;break;case"right":$-=Q;break;case"inner":w===k-1?$-=Q:w>0&&($-=Q/2);break}R={left:$,top:Z,width:Q+U.width,height:B+U.height,color:G.backdropColor}}y.push({label:j,font:z,textOffset:T,options:{rotation:b,color:X,strokeColor:J,strokeWidth:K,textAlign:W,textBaseline:q,translation:[S,A],backdrop:R}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-cr(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:a}}=this.options,o=this._getLabelSizes(),c=e+a,u=o.widest.width;let f,h;return n==="left"?i?(h=this.right+a,r==="near"?f="left":r==="center"?(f="center",h+=u/2):(f="right",h+=u)):(h=this.right-c,r==="near"?f="right":r==="center"?(f="center",h-=u/2):(f="left",h=this.left)):n==="right"?i?(h=this.left+a,r==="near"?f="right":r==="center"?(f="center",h-=u/2):(f="left",h-=u)):(h=this.left+c,r==="near"?f="left":r==="center"?(f="center",h+=u/2):(f="right",h=this.right)):f="right",{textAlign:f,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:a,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,a,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(a=>a.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,o;const c=(u,f,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(u.x,u.y),r.lineTo(f.x,f.y),r.stroke(),r.restore())};if(n.display)for(a=0,o=i.length;a<o;++a){const u=i[a];n.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,a=r.setContext(this.getContext()),o=r.display?a.width:0;if(!o)return;const c=i.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let f,h,p,m;this.isHorizontal()?(f=No(e,this.left,o)-o/2,h=No(e,this.right,c)+c/2,p=m=u):(p=No(e,this.top,o)-o/2,m=No(e,this.bottom,c)+c/2,f=h=u),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(f,p),n.lineTo(h,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Kd(r,i);const a=this.getLabelItems(e);for(const o of a){const c=o.options,u=o.font,f=o.label,h=o.textOffset;Qo(r,f,0,h,u,c)}i&&Gd(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const a=Bn(r.font),o=Xn(r.padding),c=r.align;let u=a.lineHeight/2;n==="bottom"||n==="center"||It(n)?(u+=o.bottom,hn(r.text)&&(u+=a.lineHeight*(r.text.length-1))):u+=o.top;const{titleX:f,titleY:h,maxWidth:p,rotation:m}=L6(this,u,n,c);Qo(e,r.text,0,0,a,{color:r.color,maxWidth:p,rotation:m,textAlign:O6(c,n,i),textBaseline:"middle",translation:[f,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Dt(e.grid&&e.grid.z,-1),i=Dt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==fc.prototype.draw?[{z:n,draw:a=>{this.draw(a)}}]:[{z:r,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let a,o;for(a=0,o=n.length;a<o;++a){const c=n[a];c[r]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Bn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Cf{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;D6(n)&&(r=this.register(n));const i=this.items,a=e.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in i||(i[a]=e,M6(e,o,r),this.override&&Dn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Dn[i]&&(delete Dn[i][r],this.override&&delete Xo[r])}}function M6(t,e,n){const r=Ni(Object.create(null),[n?Dn.get(n):{},Dn.get(e),t.defaults]);Dn.set(e,r),t.defaultRoutes&&T6(e,t.defaultRoutes),t.descriptors&&Dn.describe(e,t.descriptors)}function T6(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),a=[t].concat(r).join("."),o=e[n].split("."),c=o.pop(),u=o.join(".");Dn.route(a,i,u,c)})}function D6(t){return"id"in t&&"defaults"in t}class P6{constructor(){this.controllers=new Cf($o,"datasets",!0),this.elements=new Cf(xr,"elements"),this.plugins=new Cf(Object,"plugins"),this.scales=new Cf(fc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const a=r||this._getRegistryForType(i);r||a.isForType(i)||a===this.plugins&&i.id?this._exec(e,a,i):pn(i,o=>{const c=r||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,n,r){const i=uy(e);fn(r["before"+i],[],r),n[e](r),fn(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var bi=new P6;class R6{constructor(){this._init=void 0}notify(e,n,r,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const a=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(a,e,n,r);return n==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,i){i=i||{};for(const a of e){const o=a.plugin,c=o[r],u=[n,i,a.options];if(fn(c,u,o)===!1&&i.cancelable)return!1}return!0}invalidate(){an(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=Dt(r.options&&r.options.plugins,{}),a=I6(r);return i===!1&&!n?[]:z6(e,a,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(a,o)=>a.filter(c=>!o.some(u=>c.plugin.id===u.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function I6(t){const e={},n=[],r=Object.keys(bi.plugins.items);for(let a=0;a<r.length;a++)n.push(bi.getPlugin(r[a]));const i=t.plugins||[];for(let a=0;a<i.length;a++){const o=i[a];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function F6(t,e){return!e&&t===!1?null:t===!0?{}:t}function z6(t,{plugins:e,localIds:n},r,i){const a=[],o=t.getContext();for(const c of e){const u=c.id,f=F6(r[u],i);f!==null&&a.push({plugin:c,options:B6(t.config,{plugin:c,local:n[u]},f,o)})}return a}function B6(t,{plugin:e,local:n},r,i){const a=t.pluginScopeKeys(e),o=t.getOptionScopes(r,a);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function vx(t,e){const n=Dn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function q6(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function U6(t,e){return t===e?"_index_":"_value_"}function N2(t){if(t==="x"||t==="y"||t==="r")return t}function W6(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function bx(t,...e){if(N2(t))return t;for(const n of e){const r=n.axis||W6(n.position)||t.length>1&&N2(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function S2(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function H6(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return S2(t,"x",n[0])||S2(t,"y",n[0])}return{}}function V6(t,e){const n=Xo[t.type]||{scales:{}},r=e.scales||{},i=vx(t.type,e),a=Object.create(null);return Object.keys(r).forEach(o=>{const c=r[o];if(!It(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=bx(o,c,H6(o,t),Dn.scales[c.type]),f=U6(u,i),h=n.scales||{};a[o]=wd(Object.create(null),[{axis:u},c,h[u],h[f]])}),t.data.datasets.forEach(o=>{const c=o.type||t.type,u=o.indexAxis||vx(c,e),h=(Xo[c]||{}).scales||{};Object.keys(h).forEach(p=>{const m=q6(p,u),x=o[m+"AxisID"]||m;a[x]=a[x]||Object.create(null),wd(a[x],[{axis:m},r[x],h[p]])})}),Object.keys(a).forEach(o=>{const c=a[o];wd(c,[Dn.scales[c.type],Dn.scale])}),a}function gN(t){const e=t.options||(t.options={});e.plugins=Dt(e.plugins,{}),e.scales=V6(t,e)}function xN(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function $6(t){return t=t||{},t.data=xN(t.data),gN(t),t}const C2=new Map,yN=new Set;function Af(t,e){let n=C2.get(t);return n||(n=e(),C2.set(t,n),yN.add(n)),n}const nd=(t,e,n)=>{const r=Ga(e,n);r!==void 0&&t.add(r)};class Y6{constructor(e){this._config=$6(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=xN(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),gN(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Af(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Af(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Af(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Af(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:a}=this,o=this._cachedScopes(e,r),c=o.get(n);if(c)return c;const u=new Set;n.forEach(h=>{e&&(u.add(e),h.forEach(p=>nd(u,e,p))),h.forEach(p=>nd(u,i,p)),h.forEach(p=>nd(u,Xo[a]||{},p)),h.forEach(p=>nd(u,Dn,p)),h.forEach(p=>nd(u,gx,p))});const f=Array.from(u);return f.length===0&&f.push(Object.create(null)),yN.has(n)&&o.set(n,f),f}chartOptionScopes(){const{options:e,type:n}=this;return[e,Xo[n]||{},Dn.datasets[n]||{},{type:n},Dn,gx]}resolveNamedOptions(e,n,r,i=[""]){const a={$shared:!0},{resolver:o,subPrefixes:c}=A2(this._resolverCache,e,i);let u=o;if(G6(o,n)){a.$shared=!1,r=ls(r)?r():r;const f=this.createResolver(e,r,c);u=rc(o,r,f)}for(const f of n)a[f]=u[f];return a}createResolver(e,n,r=[""],i){const{resolver:a}=A2(this._resolverCache,e,r);return It(n)?rc(a,n,void 0,i):a}}function A2(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let a=r.get(i);return a||(a={resolver:vy(e,n),subPrefixes:n.filter(c=>!c.toLowerCase().includes("hover"))},r.set(i,a)),a}const K6=t=>It(t)&&Object.getOwnPropertyNames(t).some(e=>ls(t[e]));function G6(t,e){const{isScriptable:n,isIndexable:r}=Zk(t);for(const i of e){const a=n(i),o=r(i),c=(o||a)&&t[i];if(a&&(ls(c)||K6(c))||o&&hn(c))return!0}return!1}var X6="4.5.1";const Q6=["top","bottom","left","right","chartArea"];function E2(t,e){return t==="top"||t==="bottom"||Q6.indexOf(t)===-1&&e==="x"}function O2(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function L2(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),fn(n&&n.onComplete,[t],e)}function Z6(t){const e=t.chart,n=e.options.animation;fn(n&&n.onProgress,[t],e)}function vN(t){return jy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Vf={},M2=t=>{const e=vN(t);return Object.values(Vf).filter(n=>n.canvas===e).pop()};function J6(t,e,n){const r=Object.keys(t);for(const i of r){const a=+i;if(a>=e){const o=t[i];delete t[i],(n>0||a>e)&&(t[a+n]=o)}}}function eL(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Na;let $a=(Na=class{static register(...e){bi.add(...e),T2()}static unregister(...e){bi.remove(...e),T2()}constructor(e,n){const r=this.config=new Y6(n),i=vN(e),a=M2(i);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||y6(i)),this.platform.updateConfig(r);const c=this.platform.acquireContext(i,o.aspectRatio),u=c&&c.canvas,f=u&&u.height,h=u&&u.width;if(this.id=eE(),this.ctx=c,this.canvas=u,this.width=h,this.height=f,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new R6,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=xE(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],Vf[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}Bi.listen(this,"complete",L2),Bi.listen(this,"progress",Z6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:a}=this;return an(e)?n&&a?a:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return bi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():t2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Z1(this.canvas,this.ctx),this}stop(){return Bi.stop(this),this}resize(e,n){Bi.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,a=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,a),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,t2(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),fn(r.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};pn(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,c)=>(o[c]=!1,o),{});let a=[];n&&(a=a.concat(Object.keys(n).map(o=>{const c=n[o],u=bx(o,c),f=u==="r",h=u==="x";return{options:c,dposition:f?"chartArea":h?"bottom":"left",dtype:f?"radialLinear":h?"category":"linear"}}))),pn(a,o=>{const c=o.options,u=c.id,f=bx(u,c),h=Dt(c.type,o.dtype);(c.position===void 0||E2(c.position,f)!==E2(o.dposition))&&(c.position=o.dposition),i[u]=!0;let p=null;if(u in r&&r[u].type===h)p=r[u];else{const m=bi.getScale(h);p=new m({id:u,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(c,e)}),pn(i,(o,c)=>{o||delete r[c]}),pn(r,o=>{Rs.configure(this,o,o.options),Rs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,a)=>i.index-a.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(O2("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(a=>a===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const a=n[r];let o=this.getDatasetMeta(r);const c=a.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=c,o.indexAxis=a.indexAxis||vx(c,this.options),o.order=a.order||0,o.index=r,o.label=""+a.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const u=bi.getController(c),{datasetElementType:f,dataElementType:h}=Dn.datasets[c];Object.assign(u,{dataElementType:bi.getElement(h),datasetElementType:f&&bi.getElement(f)}),o.controller=new u(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){pn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let f=0,h=this.data.datasets.length;f<h;f++){const{controller:p}=this.getDatasetMeta(f),m=!i&&a.indexOf(p)===-1;p.buildOrUpdateElements(m),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||pn(a,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(O2("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){pn(this.scales,e=>{Rs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!H1(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:a}of n){const o=r==="_removeElements"?-a:a;J6(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=a=>new Set(e.filter(o=>o[0]===a).map((o,c)=>c+","+o.splice(1).join(","))),i=r(0);for(let a=1;a<n;a++)if(!H1(i,r(a)))return;return Array.from(i).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Rs.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],pn(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,a)=>{i._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,ls(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Bi.has(this)?this.attached&&!Bi.running(this)&&Bi.start(this):(this.draw(),L2({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,a;for(i=0,a=n.length;i<a;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=lN(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Kd(n,i),e.controller.draw(),i&&Gd(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Gi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const a=QO.modes[n];return typeof a=="function"?a(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(a=>a&&a._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ja(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",a=this.getDatasetMeta(e),o=a.controller._resolveAnimations(void 0,i);fs(n)?(a.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(a,{visible:r}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Bi.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Z1(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Vf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(a,o)=>{n.addEventListener(this,a,o),e[a]=o},i=(a,o,c)=>{a.offsetX=o,a.offsetY=c,this._eventHandler(a)};pn(this.options.events,a=>r(a,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(u,f)=>{n.addEventListener(this,u,f),e[u]=f},i=(u,f)=>{e[u]&&(n.removeEventListener(this,u,f),delete e[u])},a=(u,f)=>{this.canvas&&this.resize(u,f)};let o;const c=()=>{i("attach",c),this.attached=!0,this.resize(),r("resize",a),r("detach",o)};o=()=>{this.attached=!1,i("resize",a),this._stop(),this._resize(0,0),r("attach",c)},n.isAttached(this.canvas)?c():o()}unbindEvents(){pn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},pn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let a,o,c,u;for(n==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+i+"DatasetHoverStyle"]()),c=0,u=e.length;c<u;++c){o=e[c];const f=o&&this.getDatasetMeta(o.datasetIndex).controller;f&&f[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:a,index:o})=>{const c=this.getDatasetMeta(a);if(!c)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:c.data[o],index:o}});!nh(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,a=(u,f)=>u.filter(h=>!f.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),o=a(n,e),c=r?e:a(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const a=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(a||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:a}=this,o=n,c=this._getActiveElements(e,i,r,o),u=aE(e),f=eL(e,this._lastEvent,r,u);r&&(this._lastEvent=null,fn(a.onHover,[e,c,this],this),u&&fn(a.onClick,[e,c,this],this));const h=!nh(c,i);return(h||n)&&(this._active=c,this._updateHoverStyles(c,i,n)),this._lastEvent=f,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,i)}},ct(Na,"defaults",Dn),ct(Na,"instances",Vf),ct(Na,"overrides",Xo),ct(Na,"registry",bi),ct(Na,"version",X6),ct(Na,"getChart",M2),Na);function T2(){return pn($a.instances,t=>t._plugins.invalidate())}function tL(t,e,n){const{startAngle:r,x:i,y:a,outerRadius:o,innerRadius:c,options:u}=e,{borderWidth:f,borderJoinStyle:h}=u,p=Math.min(f/o,Pr(r-n));if(t.beginPath(),t.arc(i,a,o-f/2,r+p/2,n-p/2),c>0){const m=Math.min(f/c,Pr(r-n));t.arc(i,a,c+f/2,n-m/2,r+m/2,!0)}else{const m=Math.min(f/2,o*Pr(r-n));if(h==="round")t.arc(i,a,m,n-Bt/2,r+Bt/2,!0);else if(h==="bevel"){const x=2*m*m,v=-x*Math.cos(n+Bt/2)+i,b=-x*Math.sin(n+Bt/2)+a,y=x*Math.cos(r+Bt/2)+i,w=x*Math.sin(r+Bt/2)+a;t.lineTo(v,b),t.lineTo(y,w)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function nL(t,e,n){const{startAngle:r,pixelMargin:i,x:a,y:o,outerRadius:c,innerRadius:u}=e;let f=i/c;t.beginPath(),t.arc(a,o,c,r-f,n+f),u>i?(f=i/u,t.arc(a,o,u,n+f,r-f,!0)):t.arc(a,o,i,n+En,r-En),t.closePath(),t.clip()}function rL(t){return yy(t,["outerStart","outerEnd","innerStart","innerEnd"])}function sL(t,e,n,r){const i=rL(t.options.borderRadius),a=(n-e)/2,o=Math.min(a,r*e/2),c=u=>{const f=(n-Math.min(a,u))*r/2;return os(u,0,Math.min(a,f))};return{outerStart:c(i.outerStart),outerEnd:c(i.outerEnd),innerStart:os(i.innerStart,0,o),innerEnd:os(i.innerEnd,0,o)}}function Tl(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function dh(t,e,n,r,i,a){const{x:o,y:c,startAngle:u,pixelMargin:f,innerRadius:h}=e,p=Math.max(e.outerRadius+r+n-f,0),m=h>0?h+r+n+f:0;let x=0;const v=i-u;if(r){const G=h>0?h-r:0,ee=p>0?p-r:0,X=(G+ee)/2,J=X!==0?v*X/(X+r):v;x=(v-J)/2}const b=Math.max(.001,v*p-n/Bt)/p,y=(v-b)/2,w=u+y+x,k=i-y-x,{outerStart:N,outerEnd:j,innerStart:S,innerEnd:A}=sL(e,m,p,k-w),O=p-N,M=p-j,z=w+N/O,I=k-j/M,D=m+S,T=m+A,q=w+S/D,H=k-A/T;if(t.beginPath(),a){const G=(z+I)/2;if(t.arc(o,c,p,z,G),t.arc(o,c,p,G,I),j>0){const K=Tl(M,I,o,c);t.arc(K.x,K.y,j,I,k+En)}const ee=Tl(T,k,o,c);if(t.lineTo(ee.x,ee.y),A>0){const K=Tl(T,H,o,c);t.arc(K.x,K.y,A,k+En,H+Math.PI)}const X=(k-A/m+(w+S/m))/2;if(t.arc(o,c,m,k-A/m,X,!0),t.arc(o,c,m,X,w+S/m,!0),S>0){const K=Tl(D,q,o,c);t.arc(K.x,K.y,S,q+Math.PI,w-En)}const J=Tl(O,w,o,c);if(t.lineTo(J.x,J.y),N>0){const K=Tl(O,z,o,c);t.arc(K.x,K.y,N,w-En,z)}}else{t.moveTo(o,c);const G=Math.cos(z)*p+o,ee=Math.sin(z)*p+c;t.lineTo(G,ee);const X=Math.cos(I)*p+o,J=Math.sin(I)*p+c;t.lineTo(X,J)}t.closePath()}function iL(t,e,n,r,i){const{fullCircles:a,startAngle:o,circumference:c}=e;let u=e.endAngle;if(a){dh(t,e,n,r,u,i);for(let f=0;f<a;++f)t.fill();isNaN(c)||(u=o+(c%_n||_n))}return dh(t,e,n,r,u,i),t.fill(),u}function aL(t,e,n,r,i){const{fullCircles:a,startAngle:o,circumference:c,options:u}=e,{borderWidth:f,borderJoinStyle:h,borderDash:p,borderDashOffset:m,borderRadius:x}=u,v=u.borderAlign==="inner";if(!f)return;t.setLineDash(p||[]),t.lineDashOffset=m,v?(t.lineWidth=f*2,t.lineJoin=h||"round"):(t.lineWidth=f,t.lineJoin=h||"bevel");let b=e.endAngle;if(a){dh(t,e,n,r,b,i);for(let y=0;y<a;++y)t.stroke();isNaN(c)||(b=o+(c%_n||_n))}v&&nL(t,e,b),u.selfJoin&&b-o>=Bt&&x===0&&h!=="miter"&&tL(t,e,b),a||(dh(t,e,n,r,b,i),t.stroke())}class To extends xr{constructor(n){super();ct(this,"circumference");ct(this,"endAngle");ct(this,"fullCircles");ct(this,"innerRadius");ct(this,"outerRadius");ct(this,"pixelMargin");ct(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const a=this.getProps(["x","y"],i),{angle:o,distance:c}=ah(a,{x:n,y:r}),{startAngle:u,endAngle:f,innerRadius:h,outerRadius:p,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),x=(this.options.spacing+this.options.borderWidth)/2,v=Dt(m,f-u),b=Dd(o,u,f)&&u!==f,y=v>=_n||b,w=Ki(c,h+x,p+x);return y&&w}getCenterPoint(n){const{x:r,y:i,startAngle:a,endAngle:o,innerRadius:c,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:f,spacing:h}=this.options,p=(a+o)/2,m=(c+u+h+f)/2;return{x:r+Math.cos(p)*m,y:i+Math.sin(p)*m}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,a=(r.offset||0)/4,o=(r.spacing||0)/2,c=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>_n?Math.floor(i/_n):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const u=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(u)*a,Math.sin(u)*a);const f=1-Math.sin(Math.min(Bt,i||0)),h=a*f;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,iL(n,this,h,o,c),aL(n,this,h,o,c),n.restore()}}ct(To,"id","arc"),ct(To,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ct(To,"defaultRoutes",{backgroundColor:"backgroundColor"}),ct(To,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function bN(t,e,n=e){t.lineCap=Dt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Dt(n.borderDash,e.borderDash)),t.lineDashOffset=Dt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Dt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Dt(n.borderWidth,e.borderWidth),t.strokeStyle=Dt(n.borderColor,e.borderColor)}function oL(t,e,n){t.lineTo(n.x,n.y)}function lL(t){return t.stepped?OE:t.tension||t.cubicInterpolationMode==="monotone"?LE:oL}function wN(t,e,n={}){const r=t.length,{start:i=0,end:a=r-1}=n,{start:o,end:c}=e,u=Math.max(i,o),f=Math.min(a,c),h=i<o&&a<o||i>c&&a>c;return{count:r,start:u,loop:e.loop,ilen:f<u&&!h?r+f-u:f-u}}function cL(t,e,n,r){const{points:i,options:a}=e,{count:o,start:c,loop:u,ilen:f}=wN(i,n,r),h=lL(a);let{move:p=!0,reverse:m}=r||{},x,v,b;for(x=0;x<=f;++x)v=i[(c+(m?f-x:x))%o],!v.skip&&(p?(t.moveTo(v.x,v.y),p=!1):h(t,b,v,m,a.stepped),b=v);return u&&(v=i[(c+(m?f:0))%o],h(t,b,v,m,a.stepped)),!!u}function dL(t,e,n,r){const i=e.points,{count:a,start:o,ilen:c}=wN(i,n,r),{move:u=!0,reverse:f}=r||{};let h=0,p=0,m,x,v,b,y,w;const k=j=>(o+(f?c-j:j))%a,N=()=>{b!==y&&(t.lineTo(h,y),t.lineTo(h,b),t.lineTo(h,w))};for(u&&(x=i[k(0)],t.moveTo(x.x,x.y)),m=0;m<=c;++m){if(x=i[k(m)],x.skip)continue;const j=x.x,S=x.y,A=j|0;A===v?(S<b?b=S:S>y&&(y=S),h=(p*h+j)/++p):(N(),t.lineTo(j,S),v=A,p=0,b=y=S),w=S}N()}function wx(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?dL:cL}function uL(t){return t.stepped?dO:t.tension||t.cubicInterpolationMode==="monotone"?uO:Eo}function fL(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),bN(t,e.options),t.stroke(i)}function hL(t,e,n,r){const{segments:i,options:a}=e,o=wx(e);for(const c of i)bN(t,a,c.style),t.beginPath(),o(t,e,c,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const pL=typeof Path2D=="function";function mL(t,e,n,r){pL&&!e.options.segment?fL(t,e,n,r):hL(t,e,n,r)}class Xi extends xr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;nO(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=xO(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],a=this.points,o=oN(this,{property:n,start:i,end:i});if(!o.length)return;const c=[],u=uL(r);let f,h;for(f=0,h=o.length;f<h;++f){const{start:p,end:m}=o[f],x=a[p],v=a[m];if(x===v){c.push(x);continue}const b=Math.abs((i-x[n])/(v[n]-x[n])),y=u(x,v,b,r.stepped);y[n]=e[n],c.push(y)}return c.length===1?c[0]:c}pathSegment(e,n,r){return wx(this)(e,this,n,r)}path(e,n,r){const i=this.segments,a=wx(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const c of i)o&=a(e,this,c,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),mL(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ct(Xi,"id","line"),ct(Xi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ct(Xi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ct(Xi,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function D2(t,e,n,r){const i=t.options,{[n]:a}=t.getProps([n],r);return Math.abs(e-a)<i.radius+i.hitRadius}class zl extends xr{constructor(n){super();ct(this,"parsed");ct(this,"skip");ct(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const a=this.options,{x:o,y:c}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-c,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(n,r){return D2(this,n,"x",r)}inYRange(n,r){return D2(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Gi(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,xx(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ct(zl,"id","point"),ct(zl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ct(zl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function jN(t,e){const{x:n,y:r,base:i,width:a,height:o}=t.getProps(["x","y","base","width","height"],e);let c,u,f,h,p;return t.horizontal?(p=o/2,c=Math.min(n,i),u=Math.max(n,i),f=r-p,h=r+p):(p=a/2,c=n-p,u=n+p,f=Math.min(r,i),h=Math.max(r,i)),{left:c,top:f,right:u,bottom:h}}function qa(t,e,n,r){return t?0:os(e,n,r)}function gL(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,a=Qk(r);return{t:qa(i.top,a.top,0,n),r:qa(i.right,a.right,0,e),b:qa(i.bottom,a.bottom,0,n),l:qa(i.left,a.left,0,e)}}function xL(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,a=Va(i),o=Math.min(e,n),c=t.borderSkipped,u=r||It(i);return{topLeft:qa(!u||c.top||c.left,a.topLeft,0,o),topRight:qa(!u||c.top||c.right,a.topRight,0,o),bottomLeft:qa(!u||c.bottom||c.left,a.bottomLeft,0,o),bottomRight:qa(!u||c.bottom||c.right,a.bottomRight,0,o)}}function yL(t){const e=jN(t),n=e.right-e.left,r=e.bottom-e.top,i=gL(t,n/2,r/2),a=xL(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:a},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function Gm(t,e,n,r){const i=e===null,a=n===null,c=t&&!(i&&a)&&jN(t,r);return c&&(i||Ki(e,c.left,c.right))&&(a||Ki(n,c.top,c.bottom))}function vL(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function bL(t,e){t.rect(e.x,e.y,e.w,e.h)}function Xm(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,a=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+a,h:t.h+o,radius:t.radius}}class Bl extends xr{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:a,outer:o}=yL(this),c=vL(o.radius)?nc:bL;e.save(),(o.w!==a.w||o.h!==a.h)&&(e.beginPath(),c(e,Xm(o,n,a)),e.clip(),c(e,Xm(a,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),c(e,Xm(a,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return Gm(this,e,n,r)}inXRange(e,n){return Gm(this,e,null,n)}inYRange(e,n){return Gm(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(n+i)/2:n,y:a?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ct(Bl,"id","bar"),ct(Bl,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ct(Bl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function wL(t,e,n){const r=t.segments,i=t.points,a=e.points,o=[];for(const c of r){let{start:u,end:f}=c;f=Lh(u,f,i);const h=jx(n,i[u],i[f],c.loop);if(!e.segments){o.push({source:c,target:h,start:i[u],end:i[f]});continue}const p=oN(e,h);for(const m of p){const x=jx(n,a[m.start],a[m.end],m.loop),v=aN(c,i,x);for(const b of v)o.push({source:b,target:m,start:{[n]:P2(h,x,"start",Math.max)},end:{[n]:P2(h,x,"end",Math.min)}})}}return o}function jx(t,e,n,r){if(r)return;let i=e[t],a=n[t];return t==="angle"&&(i=Pr(i),a=Pr(a)),{property:t,start:i,end:a}}function jL(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,a=[];return e.segments.forEach(({start:o,end:c})=>{c=Lh(o,c,i);const u=i[o],f=i[c];r!==null?(a.push({x:u.x,y:r}),a.push({x:f.x,y:r})):n!==null&&(a.push({x:n,y:u.y}),a.push({x:n,y:f.y}))}),a}function Lh(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function P2(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function _N(t,e){let n=[],r=!1;return hn(t)?(r=!0,n=t):n=jL(t,e),n.length?new Xi({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function R2(t){return t&&t.fill!==!1}function _L(t,e,n){let i=t[e].fill;const a=[e];let o;if(!n)return i;for(;i!==!1&&a.indexOf(i)===-1;){if(!tr(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;a.push(i),i=o.fill}return!1}function kL(t,e,n){const r=AL(t);if(It(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return tr(i)&&Math.floor(i)===i?NL(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function NL(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function SL(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:It(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function CL(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:It(t)?r=t.value:r=e.getBaseValue(),r}function AL(t){const e=t.options,n=e.fill;let r=Dt(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function EL(t){const{scale:e,index:n,line:r}=t,i=[],a=r.segments,o=r.points,c=OL(e,n);c.push(_N({x:null,y:e.bottom},r));for(let u=0;u<a.length;u++){const f=a[u];for(let h=f.start;h<=f.end;h++)LL(i,o[h],c)}return new Xi({points:i,options:{}})}function OL(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const a=r[i];if(a.index===e)break;a.hidden||n.unshift(a.dataset)}return n}function LL(t,e,n){const r=[];for(let i=0;i<n.length;i++){const a=n[i],{first:o,last:c,point:u}=ML(a,e,"x");if(!(!u||o&&c)){if(o)r.unshift(u);else if(t.push(u),!c)break}}t.push(...r)}function ML(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],a=t.segments,o=t.points;let c=!1,u=!1;for(let f=0;f<a.length;f++){const h=a[f],p=o[h.start][n],m=o[h.end][n];if(Ki(i,p,m)){c=i===p,u=i===m;break}}return{first:c,last:u,point:r}}class kN{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:a,radius:o}=this;return n=n||{start:0,end:_n},e.arc(i,a,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,a=e.angle;return{x:n+Math.cos(a)*i,y:r+Math.sin(a)*i,angle:a}}}function TL(t){const{chart:e,fill:n,line:r}=t;if(tr(n))return DL(e,n);if(n==="stack")return EL(t);if(n==="shape")return!0;const i=PL(t);return i instanceof kN?i:_N(i,r)}function DL(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function PL(t){return(t.scale||{}).getPointPositionForValue?IL(t):RL(t)}function RL(t){const{scale:e={},fill:n}=t,r=SL(n,e);if(tr(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function IL(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,a=r.reverse?e.max:e.min,o=CL(n,e,a),c=[];if(r.grid.circular){const u=e.getPointPositionForValue(0,a);return new kN({x:u.x,y:u.y,radius:e.getDistanceFromCenterForValue(o)})}for(let u=0;u<i;++u)c.push(e.getPointPositionForValue(u,o));return c}function Qm(t,e,n){const r=TL(e),{chart:i,index:a,line:o,scale:c,axis:u}=e,f=o.options,h=f.fill,p=f.backgroundColor,{above:m=p,below:x=p}=h||{},v=i.getDatasetMeta(a),b=lN(i,v);r&&o.points.length&&(Kd(t,n),FL(t,{line:o,target:r,above:m,below:x,area:n,scale:c,axis:u,clip:b}),Gd(t))}function FL(t,e){const{line:n,target:r,above:i,below:a,area:o,scale:c,clip:u}=e,f=n._loop?"angle":e.axis;t.save();let h=a;a!==i&&(f==="x"?(I2(t,r,o.top),Zm(t,{line:n,target:r,color:i,scale:c,property:f,clip:u}),t.restore(),t.save(),I2(t,r,o.bottom)):f==="y"&&(F2(t,r,o.left),Zm(t,{line:n,target:r,color:a,scale:c,property:f,clip:u}),t.restore(),t.save(),F2(t,r,o.right),h=i)),Zm(t,{line:n,target:r,color:h,scale:c,property:f,clip:u}),t.restore()}function I2(t,e,n){const{segments:r,points:i}=e;let a=!0,o=!1;t.beginPath();for(const c of r){const{start:u,end:f}=c,h=i[u],p=i[Lh(u,f,i)];a?(t.moveTo(h.x,h.y),a=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,c,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function F2(t,e,n){const{segments:r,points:i}=e;let a=!0,o=!1;t.beginPath();for(const c of r){const{start:u,end:f}=c,h=i[u],p=i[Lh(u,f,i)];a?(t.moveTo(h.x,h.y),a=!1):(t.lineTo(n,h.y),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,c,{move:o}),o?t.closePath():t.lineTo(n,p.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Zm(t,e){const{line:n,target:r,property:i,color:a,scale:o,clip:c}=e,u=wL(n,r,i);for(const{source:f,target:h,start:p,end:m}of u){const{style:{backgroundColor:x=a}={}}=f,v=r!==!0;t.save(),t.fillStyle=x,zL(t,o,c,v&&jx(i,p,m)),t.beginPath();const b=!!n.pathSegment(t,f);let y;if(v){b?t.closePath():z2(t,r,m,i);const w=!!r.pathSegment(t,h,{move:b,reverse:!0});y=b&&w,y||z2(t,r,p,i)}t.closePath(),t.fill(y?"evenodd":"nonzero"),t.restore()}}function zL(t,e,n,r){const i=e.chart.chartArea,{property:a,start:o,end:c}=r||{};if(a==="x"||a==="y"){let u,f,h,p;a==="x"?(u=o,f=i.top,h=c,p=i.bottom):(u=i.left,f=o,h=i.right,p=c),t.beginPath(),n&&(u=Math.max(u,n.left),h=Math.min(h,n.right),f=Math.max(f,n.top),p=Math.min(p,n.bottom)),t.rect(u,f,h-u,p-f),t.clip()}}function z2(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var NN={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let a,o,c,u;for(o=0;o<r;++o)a=t.getDatasetMeta(o),c=a.dataset,u=null,c&&c.options&&c instanceof Xi&&(u={visible:t.isDatasetVisible(o),index:o,fill:kL(c,o,r),chart:t,axis:a.controller.options.indexAxis,scale:a.vScale,line:c}),a.$filler=u,i.push(u);for(o=0;o<r;++o)u=i[o],!(!u||u.fill===!1)&&(u.fill=_L(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),a=t.chartArea;for(let o=i.length-1;o>=0;--o){const c=i[o].$filler;c&&(c.line.updateControlPoints(a,c.axis),r&&c.fill&&Qm(t.ctx,c,a))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const a=r[i].$filler;R2(a)&&Qm(t.ctx,a,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!R2(r)||n.drawTime!=="beforeDatasetDraw"||Qm(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const B2=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},BL=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class q2 extends xr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=fn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Bn(r.font),a=i.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=B2(r,a);let f,h;n.font=i.string,this.isHorizontal()?(f=this.maxWidth,h=this._fitRows(o,a,c,u)+10):(h=this.maxHeight,f=this._fitCols(o,i,c,u)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:a,maxWidth:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],f=this.lineWidths=[0],h=i+c;let p=e;a.textAlign="left",a.textBaseline="middle";let m=-1,x=-h;return this.legendItems.forEach((v,b)=>{const y=r+n/2+a.measureText(v.text).width;(b===0||f[f.length-1]+y+2*c>o)&&(p+=h,f[f.length-(b>0?0:1)]=0,x+=h,m++),u[b]={left:0,top:x,row:m,width:y,height:i},f[f.length-1]+=y+c}),p}_fitCols(e,n,r,i){const{ctx:a,maxHeight:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],f=this.columnSizes=[],h=o-e;let p=c,m=0,x=0,v=0,b=0;return this.legendItems.forEach((y,w)=>{const{itemWidth:k,itemHeight:N}=qL(r,n,a,y,i);w>0&&x+N+2*c>h&&(p+=m+c,f.push({width:m,height:x}),v+=m+c,b++,m=x=0),u[w]={left:v,top:x,col:b,width:k,height:N},m=Math.max(m,k),x+=N+c}),p+=m,f.push({width:m,height:x}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:a}}=this,o=Fl(a,this.left,this.width);if(this.isHorizontal()){let c=0,u=Dr(r,this.left+i,this.right-this.lineWidths[c]);for(const f of n)c!==f.row&&(c=f.row,u=Dr(r,this.left+i,this.right-this.lineWidths[c])),f.top+=this.top+e+i,f.left=o.leftForLtr(o.x(u),f.width),u+=f.width+i}else{let c=0,u=Dr(r,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const f of n)f.col!==c&&(c=f.col,u=Dr(r,this.top+e+i,this.bottom-this.columnSizes[c].height)),f.top=u,f.left+=this.left+i,f.left=o.leftForLtr(o.x(f.left),f.width),u+=f.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Kd(e,this),this._draw(),Gd(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:a,labels:o}=e,c=Dn.color,u=Fl(e.rtl,this.left,this.width),f=Bn(o.font),{padding:h}=o,p=f.size,m=p/2;let x;this.drawTitle(),i.textAlign=u.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=f.string;const{boxWidth:v,boxHeight:b,itemHeight:y}=B2(o,p),w=function(A,O,M){if(isNaN(v)||v<=0||isNaN(b)||b<0)return;i.save();const z=Dt(M.lineWidth,1);if(i.fillStyle=Dt(M.fillStyle,c),i.lineCap=Dt(M.lineCap,"butt"),i.lineDashOffset=Dt(M.lineDashOffset,0),i.lineJoin=Dt(M.lineJoin,"miter"),i.lineWidth=z,i.strokeStyle=Dt(M.strokeStyle,c),i.setLineDash(Dt(M.lineDash,[])),o.usePointStyle){const I={radius:b*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:z},D=u.xPlus(A,v/2),T=O+m;Xk(i,I,D,T,o.pointStyleWidth&&v)}else{const I=O+Math.max((p-b)/2,0),D=u.leftForLtr(A,v),T=Va(M.borderRadius);i.beginPath(),Object.values(T).some(q=>q!==0)?nc(i,{x:D,y:I,w:v,h:b,radius:T}):i.rect(D,I,v,b),i.fill(),z!==0&&i.stroke()}i.restore()},k=function(A,O,M){Qo(i,M.text,A,O+y/2,f,{strikethrough:M.hidden,textAlign:u.textAlign(M.textAlign)})},N=this.isHorizontal(),j=this._computeTitleHeight();N?x={x:Dr(a,this.left+h,this.right-r[0]),y:this.top+h+j,line:0}:x={x:this.left+h,y:Dr(a,this.top+j+h,this.bottom-n[0].height),line:0},rN(this.ctx,e.textDirection);const S=y+h;this.legendItems.forEach((A,O)=>{i.strokeStyle=A.fontColor,i.fillStyle=A.fontColor;const M=i.measureText(A.text).width,z=u.textAlign(A.textAlign||(A.textAlign=o.textAlign)),I=v+m+M;let D=x.x,T=x.y;u.setWidth(this.width),N?O>0&&D+I+h>this.right&&(T=x.y+=S,x.line++,D=x.x=Dr(a,this.left+h,this.right-r[x.line])):O>0&&T+S>this.bottom&&(D=x.x=D+n[x.line].width+h,x.line++,T=x.y=Dr(a,this.top+j+h,this.bottom-n[x.line].height));const q=u.x(D);if(w(q,T,A),D=yE(z,D+v+m,N?D+I:this.right,e.rtl),k(u.x(D),T,A),N)x.x+=I+h;else if(typeof A.text!="string"){const H=f.lineHeight;x.y+=SN(A,H)+h}else x.y+=S}),sN(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Bn(n.font),i=Xn(n.padding);if(!n.display)return;const a=Fl(e.rtl,this.left,this.width),o=this.ctx,c=n.position,u=r.size/2,f=i.top+u;let h,p=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+f,p=Dr(e.align,p,this.right-m);else{const v=this.columnSizes.reduce((b,y)=>Math.max(b,y.height),0);h=f+Dr(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const x=Dr(c,p,p+m);o.textAlign=a.textAlign(py(c)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Qo(o,n.text,x,h,r)}_computeTitleHeight(){const e=this.options.title,n=Bn(e.font),r=Xn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,a;if(Ki(e,this.left,this.right)&&Ki(n,this.top,this.bottom)){for(a=this.legendHitBoxes,r=0;r<a.length;++r)if(i=a[r],Ki(e,i.left,i.left+i.width)&&Ki(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!HL(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,a=BL(i,r);i&&!a&&fn(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!a&&fn(n.onHover,[e,r,this],this)}else r&&fn(n.onClick,[e,r,this],this)}}function qL(t,e,n,r,i){const a=UL(r,t,e,n),o=WL(i,r,e.lineHeight);return{itemWidth:a,itemHeight:o}}function UL(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((a,o)=>a.length>o.length?a:o)),e+n.size/2+r.measureText(i).width}function WL(t,e,n){let r=t;return typeof e.text!="string"&&(r=SN(e,n)),r}function SN(t,e){const n=t.text?t.text.length:0;return e*n}function HL(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var CN={id:"legend",_element:q2,start(t,e,n){const r=t.legend=new q2({ctx:t.ctx,options:n,chart:t});Rs.configure(t,r,n),Rs.addBox(t,r)},stop(t){Rs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Rs.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:a,useBorderRadius:o,borderRadius:c}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const f=u.controller.getStyle(n?0:void 0),h=Xn(f.borderWidth);return{text:e[u.index].label,fillStyle:f.backgroundColor,fontColor:a,hidden:!u.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:f.borderColor,pointStyle:r||f.pointStyle,rotation:f.rotation,textAlign:i||f.textAlign,borderRadius:o&&(c||f.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class AN extends xr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=hn(r.text)?r.text.length:1;this._padding=Xn(r.padding);const a=i*Bn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:a,options:o}=this,c=o.align;let u=0,f,h,p;return this.isHorizontal()?(h=Dr(c,r,a),p=n+e,f=a-r):(o.position==="left"?(h=r+e,p=Dr(c,i,n),u=Bt*-.5):(h=a-e,p=Dr(c,n,i),u=Bt*.5),f=i-n),{titleX:h,titleY:p,maxWidth:f,rotation:u}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Bn(n.font),a=r.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:u,rotation:f}=this._drawArgs(a);Qo(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:f,textAlign:py(n.align),textBaseline:"middle",translation:[o,c]})}}function VL(t,e){const n=new AN({ctx:t.ctx,options:e,chart:t});Rs.configure(t,n,e),Rs.addBox(t,n),t.titleBlock=n}var EN={id:"title",_element:AN,start(t,e,n){VL(t,n)},stop(t){const e=t.titleBlock;Rs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Rs.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const gd={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,a=0;for(e=0,n=t.length;e<n;++e){const c=t[e].element;if(c&&c.hasValue()){const u=c.tooltipPosition();r.add(u.x),i+=u.y,++a}}return a===0||r.size===0?!1:{x:[...r].reduce((c,u)=>c+u)/r.size,y:i/a}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,a,o,c;for(a=0,o=t.length;a<o;++a){const u=t[a].element;if(u&&u.hasValue()){const f=u.getCenterPoint(),h=tc(e,f);h<i&&(i=h,c=u)}}if(c){const u=c.tooltipPosition();n=u.x,r=u.y}return{x:n,y:r}}};function vi(t,e){return e&&(hn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function qi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function $L(t,e){const{element:n,datasetIndex:r,index:i}=e,a=t.getDatasetMeta(r).controller,{label:o,value:c}=a.getLabelAndValue(i);return{chart:t,label:o,parsed:a.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:c,dataset:a.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function U2(t,e){const n=t.chart.ctx,{body:r,footer:i,title:a}=t,{boxWidth:o,boxHeight:c}=e,u=Bn(e.bodyFont),f=Bn(e.titleFont),h=Bn(e.footerFont),p=a.length,m=i.length,x=r.length,v=Xn(e.padding);let b=v.height,y=0,w=r.reduce((j,S)=>j+S.before.length+S.lines.length+S.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,p&&(b+=p*f.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),w){const j=e.displayColors?Math.max(c,u.lineHeight):u.lineHeight;b+=x*j+(w-x)*u.lineHeight+(w-1)*e.bodySpacing}m&&(b+=e.footerMarginTop+m*h.lineHeight+(m-1)*e.footerSpacing);let k=0;const N=function(j){y=Math.max(y,n.measureText(j).width+k)};return n.save(),n.font=f.string,pn(t.title,N),n.font=u.string,pn(t.beforeBody.concat(t.afterBody),N),k=e.displayColors?o+2+e.boxPadding:0,pn(r,j=>{pn(j.before,N),pn(j.lines,N),pn(j.after,N)}),k=0,n.font=h.string,pn(t.footer,N),n.restore(),y+=v.width,{width:y,height:b}}function YL(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function KL(t,e,n,r){const{x:i,width:a}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+a+o>e.width||t==="right"&&i-a-o<0)return!0}function GL(t,e,n,r){const{x:i,width:a}=n,{width:o,chartArea:{left:c,right:u}}=t;let f="center";return r==="center"?f=i<=(c+u)/2?"left":"right":i<=a/2?f="left":i>=o-a/2&&(f="right"),KL(f,t,e,n)&&(f="center"),f}function W2(t,e,n){const r=n.yAlign||e.yAlign||YL(t,n);return{xAlign:n.xAlign||e.xAlign||GL(t,e,n,r),yAlign:r}}function XL(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function QL(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function H2(t,e,n,r){const{caretSize:i,caretPadding:a,cornerRadius:o}=t,{xAlign:c,yAlign:u}=n,f=i+a,{topLeft:h,topRight:p,bottomLeft:m,bottomRight:x}=Va(o);let v=XL(e,c);const b=QL(e,u,f);return u==="center"?c==="left"?v+=f:c==="right"&&(v-=f):c==="left"?v-=Math.max(h,m)+i:c==="right"&&(v+=Math.max(p,x)+i),{x:os(v,0,r.width-e.width),y:os(b,0,r.height-e.height)}}function Ef(t,e,n){const r=Xn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function V2(t){return vi([],qi(t))}function ZL(t,e,n){return Ja(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function $2(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ON={beforeTitle:Fi,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Fi,beforeBody:Fi,beforeLabel:Fi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return an(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Fi,afterBody:Fi,beforeFooter:Fi,footer:Fi,afterFooter:Fi};function es(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?ON[e].call(n,r):i}class _x extends xr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,a=new ky(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=ZL(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=es(r,"beforeTitle",this,e),a=es(r,"title",this,e),o=es(r,"afterTitle",this,e);let c=[];return c=vi(c,qi(i)),c=vi(c,qi(a)),c=vi(c,qi(o)),c}getBeforeBody(e,n){return V2(es(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return pn(e,a=>{const o={before:[],lines:[],after:[]},c=$2(r,a);vi(o.before,qi(es(c,"beforeLabel",this,a))),vi(o.lines,es(c,"label",this,a)),vi(o.after,qi(es(c,"afterLabel",this,a))),i.push(o)}),i}getAfterBody(e,n){return V2(es(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=es(r,"beforeFooter",this,e),a=es(r,"footer",this,e),o=es(r,"afterFooter",this,e);let c=[];return c=vi(c,qi(i)),c=vi(c,qi(a)),c=vi(c,qi(o)),c}_createItems(e){const n=this._active,r=this.chart.data,i=[],a=[],o=[];let c=[],u,f;for(u=0,f=n.length;u<f;++u)c.push($L(this.chart,n[u]));return e.filter&&(c=c.filter((h,p,m)=>e.filter(h,p,m,r))),e.itemSort&&(c=c.sort((h,p)=>e.itemSort(h,p,r))),pn(c,h=>{const p=$2(e.callbacks,h);i.push(es(p,"labelColor",this,h)),a.push(es(p,"labelPointStyle",this,h)),o.push(es(p,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=c,c}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let a,o=[];if(!i.length)this.opacity!==0&&(a={opacity:0});else{const c=gd[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const u=this._size=U2(this,r),f=Object.assign({},c,u),h=W2(this.chart,r,f),p=H2(r,f,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,a={opacity:1,x:p.x,y:p.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const a=this.getCaretPosition(e,r,i);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:a}=this,{caretSize:o,cornerRadius:c}=r,{topLeft:u,topRight:f,bottomLeft:h,bottomRight:p}=Va(c),{x:m,y:x}=e,{width:v,height:b}=n;let y,w,k,N,j,S;return a==="center"?(j=x+b/2,i==="left"?(y=m,w=y-o,N=j+o,S=j-o):(y=m+v,w=y+o,N=j-o,S=j+o),k=y):(i==="left"?w=m+Math.max(u,h)+o:i==="right"?w=m+v-Math.max(f,p)-o:w=this.caretX,a==="top"?(N=x,j=N-o,y=w-o,k=w+o):(N=x+b,j=N+o,y=w+o,k=w-o),S=N),{x1:y,x2:w,x3:k,y1:N,y2:j,y3:S}}drawTitle(e,n,r){const i=this.title,a=i.length;let o,c,u;if(a){const f=Fl(r.rtl,this.x,this.width);for(e.x=Ef(this,r.titleAlign,r),n.textAlign=f.textAlign(r.titleAlign),n.textBaseline="middle",o=Bn(r.titleFont),c=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,u=0;u<a;++u)n.fillText(i[u],f.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+c,u+1===a&&(e.y+=r.titleMarginBottom-c)}}_drawColorBox(e,n,r,i,a){const o=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:u,boxWidth:f}=a,h=Bn(a.bodyFont),p=Ef(this,"left",a),m=i.x(p),x=u<h.lineHeight?(h.lineHeight-u)/2:0,v=n.y+x;if(a.usePointStyle){const b={radius:Math.min(f,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},y=i.leftForLtr(m,f)+f/2,w=v+u/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,xx(e,b,y,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,xx(e,b,y,w)}else{e.lineWidth=It(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=i.leftForLtr(m,f),y=i.leftForLtr(i.xPlus(m,1),f-2),w=Va(o.borderRadius);Object.values(w).some(k=>k!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,nc(e,{x:b,y:v,w:f,h:u,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),nc(e,{x:y,y:v+1,w:f-2,h:u-2,radius:w}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(b,v,f,u),e.strokeRect(b,v,f,u),e.fillStyle=o.backgroundColor,e.fillRect(y,v+1,f-2,u-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:a,bodyAlign:o,displayColors:c,boxHeight:u,boxWidth:f,boxPadding:h}=r,p=Bn(r.bodyFont);let m=p.lineHeight,x=0;const v=Fl(r.rtl,this.x,this.width),b=function(M){n.fillText(M,v.x(e.x+x),e.y+m/2),e.y+=m+a},y=v.textAlign(o);let w,k,N,j,S,A,O;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=Ef(this,y,r),n.fillStyle=r.bodyColor,pn(this.beforeBody,b),x=c&&y!=="right"?o==="center"?f/2+h:f+2+h:0,j=0,A=i.length;j<A;++j){for(w=i[j],k=this.labelTextColors[j],n.fillStyle=k,pn(w.before,b),N=w.lines,c&&N.length&&(this._drawColorBox(n,e,j,v,r),m=Math.max(p.lineHeight,u)),S=0,O=N.length;S<O;++S)b(N[S]),m=p.lineHeight;pn(w.after,b)}x=0,m=p.lineHeight,pn(this.afterBody,b),e.y-=a}drawFooter(e,n,r){const i=this.footer,a=i.length;let o,c;if(a){const u=Fl(r.rtl,this.x,this.width);for(e.x=Ef(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=u.textAlign(r.footerAlign),n.textBaseline="middle",o=Bn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,c=0;c<a;++c)n.fillText(i[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:a,yAlign:o}=this,{x:c,y:u}=e,{width:f,height:h}=r,{topLeft:p,topRight:m,bottomLeft:x,bottomRight:v}=Va(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(c+p,u),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(c+f-m,u),n.quadraticCurveTo(c+f,u,c+f,u+m),o==="center"&&a==="right"&&this.drawCaret(e,n,r,i),n.lineTo(c+f,u+h-v),n.quadraticCurveTo(c+f,u+h,c+f-v,u+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(c+x,u+h),n.quadraticCurveTo(c,u+h,c,u+h-x),o==="center"&&a==="left"&&this.drawCaret(e,n,r,i),n.lineTo(c,u+p),n.quadraticCurveTo(c,u,c+p,u),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,a=r&&r.y;if(i||a){const o=gd[e.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=U2(this,e),u=Object.assign({},o,this._size),f=W2(n,e,u),h=H2(e,u,f,n);(i._to!==h.x||a._to!==h.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Xn(n.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&c&&(e.save(),e.globalAlpha=r,this.drawBackground(a,e,i,n),rN(e,n.textDirection),a.y+=o.top,this.drawTitle(a,e,n),this.drawBody(a,e,n),this.drawFooter(a,e,n),sN(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:c,index:u})=>{const f=this.chart.getDatasetMeta(c);if(!f)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:f.data[u],index:u}}),a=!nh(r,i),o=this._positionChanged(i,n);(a||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,a=this._active||[],o=this._getActiveElements(e,a,n,r),c=this._positionChanged(o,e),u=n||!nh(o,a)||c;return u&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),u}_getActiveElements(e,n,r,i){const a=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,a.mode,a,r);return a.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:a}=this,o=gd[a.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}ct(_x,"positioners",gd);var LN={id:"tooltip",_element:_x,positioners:gd,afterInit(t,e,n){n&&(t.tooltip=new _x({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ON},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const JL=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function eM(t,e,n,r){const i=t.indexOf(e);if(i===-1)return JL(t,e,n,r);const a=t.lastIndexOf(e);return i!==a?n:i}const tM=(t,e)=>t===null?null:os(Math.round(t),0,e);function Y2(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class uh extends fc{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:a}of n)r[i]===a&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(an(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:eM(r,e,Dt(n,e),this._addedLabels),tM(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let a=this.getLabels();a=e===0&&n===a.length-1?a:a.slice(e,n+1),this._valueRange=Math.max(a.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return Y2.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ct(uh,"id","category"),ct(uh,"defaults",{ticks:{callback:Y2}});function nM(t,e){const n=[],{bounds:i,step:a,min:o,max:c,precision:u,count:f,maxTicks:h,maxDigits:p,includeBounds:m}=t,x=a||1,v=h-1,{min:b,max:y}=e,w=!an(o),k=!an(c),N=!an(f),j=(y-b)/(p+1);let S=V1((y-b)/v/x)*x,A,O,M,z;if(S<1e-14&&!w&&!k)return[{value:b},{value:y}];z=Math.ceil(y/S)-Math.floor(b/S),z>v&&(S=V1(z*S/v/x)*x),an(u)||(A=Math.pow(10,u),S=Math.ceil(S*A)/A),i==="ticks"?(O=Math.floor(b/S)*S,M=Math.ceil(y/S)*S):(O=b,M=y),w&&k&&a&&dE((c-o)/a,S/1e3)?(z=Math.round(Math.min((c-o)/S,h)),S=(c-o)/z,O=o,M=c):N?(O=w?o:O,M=k?c:M,z=f-1,S=(M-O)/z):(z=(M-O)/S,jd(z,Math.round(z),S/1e3)?z=Math.round(z):z=Math.ceil(z));const I=Math.max($1(S),$1(O));A=Math.pow(10,an(u)?I:u),O=Math.round(O*A)/A,M=Math.round(M*A)/A;let D=0;for(w&&(m&&O!==o?(n.push({value:o}),O<o&&D++,jd(Math.round((O+D*S)*A)/A,o,K2(o,j,t))&&D++):O<o&&D++);D<z;++D){const T=Math.round((O+D*S)*A)/A;if(k&&T>c)break;n.push({value:T})}return k&&m&&M!==c?n.length&&jd(n[n.length-1].value,c,K2(c,j,t))?n[n.length-1].value=c:n.push({value:c}):(!k||M===c)&&n.push({value:M}),n}function K2(t,e,{horizontal:n,minRotation:r}){const i=cr(r),a=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/a,o)}class kx extends fc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return an(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:a}=this;const o=u=>i=n?i:u,c=u=>a=r?a:u;if(e){const u=ki(i),f=ki(a);u<0&&f<0?c(0):u>0&&f>0&&o(0)}if(i===a){let u=a===0?1:Math.abs(a*.05);c(a+u),e||o(i-u)}this.min=i,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},a=this._range||this,o=nM(i,a);return e.bounds==="ticks"&&uE(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return gy(e,this.chart.options.locale,this.options.ticks.format)}}class fh extends kx{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=tr(e)?e:0,this.max=tr(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=cr(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,a.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ct(fh,"id","linear"),ct(fh,"defaults",{ticks:{callback:xy.formatters.numeric}});function Nx(t){const e=t.ticks;if(e.display&&t.display){const n=Xn(e.backdropPadding);return Dt(e.font&&e.font.size,Dn.font.size)+n.height}return 0}function rM(t,e,n){return n=hn(n)?n:[n],{w:EE(t,e.string,n),h:n.length*e.lineHeight}}function G2(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function sM(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],a=t._pointLabels.length,o=t.options.pointLabels,c=o.centerPointLabels?Bt/a:0;for(let u=0;u<a;u++){const f=o.setContext(t.getPointLabelContext(u));i[u]=f.padding;const h=t.getPointPosition(u,t.drawingArea+i[u],c),p=Bn(f.font),m=rM(t.ctx,p,t._pointLabels[u]);r[u]=m;const x=Pr(t.getIndexAngle(u)+c),v=Math.round(Ah(x)),b=G2(v,h.x,m.w,0,180),y=G2(v,h.y,m.h,90,270);iM(n,e,x,b,y)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=lM(t,r,i)}function iM(t,e,n,r,i){const a=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let c=0,u=0;r.start<e.l?(c=(e.l-r.start)/a,t.l=Math.min(t.l,e.l-c)):r.end>e.r&&(c=(r.end-e.r)/a,t.r=Math.max(t.r,e.r+c)),i.start<e.t?(u=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-u)):i.end>e.b&&(u=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+u))}function aM(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:a,padding:o,size:c}=n,u=t.getPointPosition(e,r+i+o,a),f=Math.round(Ah(Pr(u.angle+En))),h=uM(u.y,c.h,f),p=cM(f),m=dM(u.x,c.w,p);return{visible:!0,x:u.x,y:h,textAlign:p,left:m,top:h,right:m+c.w,bottom:h+c.h}}function oM(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:a}=t;return!(Gi({x:n,y:r},e)||Gi({x:n,y:a},e)||Gi({x:i,y:r},e)||Gi({x:i,y:a},e))}function lM(t,e,n){const r=[],i=t._pointLabels.length,a=t.options,{centerPointLabels:o,display:c}=a.pointLabels,u={extra:Nx(a)/2,additionalAngle:o?Bt/i:0};let f;for(let h=0;h<i;h++){u.padding=n[h],u.size=e[h];const p=aM(t,h,u);r.push(p),c==="auto"&&(p.visible=oM(p,f),p.visible&&(f=p))}return r}function cM(t){return t===0||t===180?"center":t<180?"left":"right"}function dM(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function uM(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function fM(t,e,n){const{left:r,top:i,right:a,bottom:o}=n,{backdropColor:c}=e;if(!an(c)){const u=Va(e.borderRadius),f=Xn(e.backdropPadding);t.fillStyle=c;const h=r-f.left,p=i-f.top,m=a-r+f.width,x=o-i+f.height;Object.values(u).some(v=>v!==0)?(t.beginPath(),nc(t,{x:h,y:p,w:m,h:x,radius:u}),t.fill()):t.fillRect(h,p,m,x)}}function hM(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const a=t._pointLabelItems[i];if(!a.visible)continue;const o=r.setContext(t.getPointLabelContext(i));fM(n,o,a);const c=Bn(o.font),{x:u,y:f,textAlign:h}=a;Qo(n,t._pointLabels[i],u,f+c.lineHeight/2,c,{color:o.color,textAlign:h,textBaseline:"middle"})}}function MN(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,_n);else{let a=t.getPointPosition(0,e);i.moveTo(a.x,a.y);for(let o=1;o<r;o++)a=t.getPointPosition(o,e),i.lineTo(a.x,a.y)}}function pM(t,e,n,r,i){const a=t.ctx,o=e.circular,{color:c,lineWidth:u}=e;!o&&!r||!c||!u||n<0||(a.save(),a.strokeStyle=c,a.lineWidth=u,a.setLineDash(i.dash||[]),a.lineDashOffset=i.dashOffset,a.beginPath(),MN(t,n,o,r),a.closePath(),a.stroke(),a.restore())}function mM(t,e,n){return Ja(t,{label:n,index:e,type:"pointLabel"})}class xd extends kx{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Xn(Nx(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=tr(e)&&!isNaN(e)?e:0,this.max=tr(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Nx(this.options))}generateTickLabels(e){kx.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=fn(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?sM(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=_n/(this._pointLabels.length||1),r=this.options.startAngle||0;return Pr(e*n+cr(r))}getDistanceFromCenterForValue(e){if(an(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(an(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return mM(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-En+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:a}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),MN(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:a}=n,o=this._pointLabels.length;let c,u,f;if(n.pointLabels.display&&hM(this,o),i.display&&this.ticks.forEach((h,p)=>{if(p!==0||p===0&&this.min<0){u=this.getDistanceFromCenterForValue(h.value);const m=this.getContext(p),x=i.setContext(m),v=a.setContext(m);pM(this,x,u,o,v)}}),r.display){for(e.save(),c=o-1;c>=0;c--){const h=r.setContext(this.getPointLabelContext(c)),{color:p,lineWidth:m}=h;!m||!p||(e.lineWidth=m,e.strokeStyle=p,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,u=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),f=this.getPointPosition(c,u),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(f.x,f.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let a,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((c,u)=>{if(u===0&&this.min>=0&&!n.reverse)return;const f=r.setContext(this.getContext(u)),h=Bn(f.font);if(a=this.getDistanceFromCenterForValue(this.ticks[u].value),f.showLabelBackdrop){e.font=h.string,o=e.measureText(c.label).width,e.fillStyle=f.backdropColor;const p=Xn(f.backdropPadding);e.fillRect(-o/2-p.left,-a-h.size/2-p.top,o+p.width,h.size+p.height)}Qo(e,c.label,0,-a,h,{color:f.color,strokeColor:f.textStrokeColor,strokeWidth:f.textStrokeWidth})}),e.restore()}drawTitle(){}}ct(xd,"id","radialLinear"),ct(xd,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:xy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ct(xd,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ct(xd,"descriptors",{angleLines:{_fallback:"grid"}});const Mh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},as=Object.keys(Mh);function X2(t,e){return t-e}function Q2(t,e){if(an(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:a}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),tr(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(ec(a)||a===!0)?n.startOf(o,"isoWeek",a):n.startOf(o,i)),+o)}function Z2(t,e,n,r){const i=as.length;for(let a=as.indexOf(t);a<i-1;++a){const o=Mh[as[a]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(c*o.size))<=r)return as[a]}return as[i-1]}function gM(t,e,n,r,i){for(let a=as.length-1;a>=as.indexOf(n);a--){const o=as[a];if(Mh[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return as[n?as.indexOf(n):0]}function xM(t){for(let e=as.indexOf(t)+1,n=as.length;e<n;++e)if(Mh[as[e]].common)return as[e]}function J2(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=hy(n,e),a=n[r]>=e?n[r]:n[i];t[a]=!0}}function yM(t,e,n,r){const i=t._adapter,a=+i.startOf(e[0].value,r),o=e[e.length-1].value;let c,u;for(c=a;c<=o;c=+i.add(c,1,r))u=n[c],u>=0&&(e[u].major=!0);return e}function ew(t,e,n){const r=[],i={},a=e.length;let o,c;for(o=0;o<a;++o)c=e[o],i[c]=o,r.push({value:c,major:!1});return a===0||!n?r:yM(t,r,i,n)}class hh extends fc{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new $O._date(e.adapters.date);i.init(n),wd(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Q2(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:a,minDefined:o,maxDefined:c}=this.getUserBounds();function u(f){!o&&!isNaN(f.min)&&(i=Math.min(i,f.min)),!c&&!isNaN(f.max)&&(a=Math.max(a,f.max))}(!o||!c)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),i=tr(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),a=tr(a)&&!isNaN(a)?a:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const a=this.min,o=this.max,c=mE(i,a,o);return this._unit=n.unit||(r.autoSkip?Z2(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):gM(this,c.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:xM(this._unit),this.initOffsets(i),e.reverse&&c.reverse(),ew(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,a;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?r=a:r=(a-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=os(n,0,o),r=os(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,a=i.time,o=a.unit||Z2(a.minUnit,n,r,this._getLabelCapacity(n)),c=Dt(i.ticks.stepSize,1),u=o==="week"?a.isoWeekday:!1,f=ec(u)||u===!0,h={};let p=n,m,x;if(f&&(p=+e.startOf(p,"isoWeek",u)),p=+e.startOf(p,f?"day":o),e.diff(r,n,o)>1e5*c)throw new Error(n+" and "+r+" are too far apart with stepSize of "+c+" "+o);const v=i.ticks.source==="data"&&this.getDataTimestamps();for(m=p,x=0;m<r;m=+e.add(m,c,o),x++)J2(h,m,v);return(m===r||i.bounds==="ticks"||x===1)&&J2(h,m,v),Object.keys(h).sort(X2).map(b=>+b)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,a=this._unit,o=n||i[a];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const a=this.options,o=a.ticks.callback;if(o)return fn(o,[e,n,r],this);const c=a.time.displayFormats,u=this._unit,f=this._majorUnit,h=u&&c[u],p=f&&c[f],m=r[n],x=f&&p&&m&&m.major;return this._adapter.format(e,i||(x?p:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=cr(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(i),o=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:r*a+c*o,h:r*o+c*a}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,a=this._tickFormatFunction(e,0,ew(this,[e],this._majorUnit),i),o=this._getLabelSize(a),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(Q2(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Yk(e.sort(X2))}}ct(hh,"id","time"),ct(hh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Of(t,e,n){let r=0,i=t.length-1,a,o,c,u;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=mx(t,"pos",e)),{pos:a,time:c}=t[r],{pos:o,time:u}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=mx(t,"time",e)),{time:a,pos:c}=t[r],{time:o,pos:u}=t[i]);const f=o-a;return f?c+(u-c)*(e-a)/f:c}class tw extends hh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Of(n,this.min),this._tableRange=Of(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],a=[];let o,c,u,f,h;for(o=0,c=e.length;o<c;++o)f=e[o],f>=n&&f<=r&&i.push(f);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,c=i.length;o<c;++o)h=i[o+1],u=i[o-1],f=i[o],Math.round((h+u)/2)!==f&&a.push({time:f,pos:o/(c-1)});return a}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,a)=>i-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Of(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Of(this._table,r*this._tableRange+this._minPos,!0)}}ct(tw,"id","timeseries"),ct(tw,"defaults",hh.defaults);/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var nw=(function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1})(),Nd={toTextLines:function(t){var e=[],n;for(t=[].concat(t);t.length;)n=t.pop(),typeof n=="string"?e.unshift.apply(e,n.split(`
`)):Array.isArray(n)?t.push.apply(t,n):an(t)||e.unshift(""+n);return e},textSize:function(t,e,n){var r=[].concat(e),i=r.length,a=t.font,o=0,c;for(t.font=n.string,c=0;c<i;++c)o=Math.max(t.measureText(r[c]).width,o);return t.font=a,{height:i*n.lineHeight,width:o}},bound:function(t,e,n){return Math.max(t,Math.min(e,n))},arrayDiff:function(t,e){var n=t.slice(),r=[],i,a,o,c;for(i=0,o=e.length;i<o;++i)c=e[i],a=n.indexOf(c),a===-1?r.push([c,1]):n.splice(a,1);for(i=0,o=n.length;i<o;++i)r.push([n[i],-1]);return r},rasterize:function(t){return Math.round(t*nw)/nw}};function Jm(t,e){var n=e.x,r=e.y;if(n===null)return{x:0,y:-1};if(r===null)return{x:1,y:0};var i=t.x-n,a=t.y-r,o=Math.sqrt(i*i+a*a);return{x:o?i/o:0,y:o?a/o:-1}}function vM(t,e,n,r,i){switch(i){case"center":n=r=0;break;case"bottom":n=0,r=1;break;case"right":n=1,r=0;break;case"left":n=-1,r=0;break;case"top":n=0,r=-1;break;case"start":n=-n,r=-r;break;case"end":break;default:i*=Math.PI/180,n=Math.cos(i),r=Math.sin(i);break}return{x:t,y:e,vx:n,vy:r}}var bM=0,TN=1,DN=2,PN=4,RN=8;function Lf(t,e,n){var r=bM;return t<n.left?r|=TN:t>n.right&&(r|=DN),e<n.top?r|=RN:e>n.bottom&&(r|=PN),r}function wM(t,e){for(var n=t.x0,r=t.y0,i=t.x1,a=t.y1,o=Lf(n,r,e),c=Lf(i,a,e),u,f,h;!(!(o|c)||o&c);)u=o||c,u&RN?(f=n+(i-n)*(e.top-r)/(a-r),h=e.top):u&PN?(f=n+(i-n)*(e.bottom-r)/(a-r),h=e.bottom):u&DN?(h=r+(a-r)*(e.right-n)/(i-n),f=e.right):u&TN&&(h=r+(a-r)*(e.left-n)/(i-n),f=e.left),u===o?(n=f,r=h,o=Lf(n,r,e)):(i=f,a=h,c=Lf(i,a,e));return{x0:n,x1:i,y0:r,y1:a}}function Mf(t,e){var n=e.anchor,r=t,i,a;return e.clamp&&(r=wM(r,e.area)),n==="start"?(i=r.x0,a=r.y0):n==="end"?(i=r.x1,a=r.y1):(i=(r.x0+r.x1)/2,a=(r.y0+r.y1)/2),vM(i,a,t.vx,t.vy,e.align)}var Tf={arc:function(t,e){var n=(t.startAngle+t.endAngle)/2,r=Math.cos(n),i=Math.sin(n),a=t.innerRadius,o=t.outerRadius;return Mf({x0:t.x+r*a,y0:t.y+i*a,x1:t.x+r*o,y1:t.y+i*o,vx:r,vy:i},e)},point:function(t,e){var n=Jm(t,e.origin),r=n.x*t.options.radius,i=n.y*t.options.radius;return Mf({x0:t.x-r,y0:t.y-i,x1:t.x+r,y1:t.y+i,vx:n.x,vy:n.y},e)},bar:function(t,e){var n=Jm(t,e.origin),r=t.x,i=t.y,a=0,o=0;return t.horizontal?(r=Math.min(t.x,t.base),a=Math.abs(t.base-t.x)):(i=Math.min(t.y,t.base),o=Math.abs(t.base-t.y)),Mf({x0:r,y0:i+o,x1:r+a,y1:i,vx:n.x,vy:n.y},e)},fallback:function(t,e){var n=Jm(t,e.origin);return Mf({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:n.x,vy:n.y},e)}},Qi=Nd.rasterize;function jM(t){var e=t.borderWidth||0,n=t.padding,r=t.size.height,i=t.size.width,a=-i/2,o=-r/2;return{frame:{x:a-n.left-e,y:o-n.top-e,w:i+n.width+e*2,h:r+n.height+e*2},text:{x:a,y:o,w:i,h:r}}}function _M(t,e){var n=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var r=n.getBasePixel();return t.horizontal?{x:r,y:null}:{x:null,y:r}}function kM(t){return t instanceof To?Tf.arc:t instanceof zl?Tf.point:t instanceof Bl?Tf.bar:Tf.fallback}function NM(t,e,n,r,i,a){var o=Math.PI/2;if(a){var c=Math.min(a,i/2,r/2),u=e+c,f=n+c,h=e+r-c,p=n+i-c;t.moveTo(e,f),u<h&&f<p?(t.arc(u,f,c,-Math.PI,-o),t.arc(h,f,c,-o,0),t.arc(h,p,c,0,o),t.arc(u,p,c,o,Math.PI)):u<h?(t.moveTo(u,n),t.arc(h,f,c,-o,o),t.arc(u,f,c,o,Math.PI+o)):f<p?(t.arc(u,f,c,-Math.PI,0),t.arc(u,p,c,0,Math.PI)):t.arc(u,f,c,-Math.PI,Math.PI),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,r,i)}function SM(t,e,n){var r=n.backgroundColor,i=n.borderColor,a=n.borderWidth;!r&&(!i||!a)||(t.beginPath(),NM(t,Qi(e.x)+a/2,Qi(e.y)+a/2,Qi(e.w)-a,Qi(e.h)-a,n.borderRadius),t.closePath(),r&&(t.fillStyle=r,t.fill()),i&&a&&(t.strokeStyle=i,t.lineWidth=a,t.lineJoin="miter",t.stroke()))}function CM(t,e,n){var r=n.lineHeight,i=t.w,a=t.x,o=t.y+r/2;return e==="center"?a+=i/2:(e==="end"||e==="right")&&(a+=i),{h:r,w:i,x:a,y:o}}function AM(t,e,n){var r=t.shadowBlur,i=n.stroked,a=Qi(n.x),o=Qi(n.y),c=Qi(n.w);i&&t.strokeText(e,a,o,c),n.filled&&(r&&i&&(t.shadowBlur=0),t.fillText(e,a,o,c),r&&i&&(t.shadowBlur=r))}function EM(t,e,n,r){var i=r.textAlign,a=r.color,o=!!a,c=r.font,u=e.length,f=r.textStrokeColor,h=r.textStrokeWidth,p=f&&h,m;if(!(!u||!o&&!p))for(n=CM(n,i,c),t.font=c.string,t.textAlign=i,t.textBaseline="middle",t.shadowBlur=r.textShadowBlur,t.shadowColor=r.textShadowColor,o&&(t.fillStyle=a),p&&(t.lineJoin="round",t.lineWidth=h,t.strokeStyle=f),m=0,u=e.length;m<u;++m)AM(t,e[m],{stroked:p,filled:o,w:n.w,x:n.x,y:n.y+n.h*m})}var IN=function(t,e,n,r){var i=this;i._config=t,i._index=r,i._model=null,i._rects=null,i._ctx=e,i._el=n};Ni(IN.prototype,{_modelize:function(t,e,n,r){var i=this,a=i._index,o=Bn(Mn([n.font,{}],r,a)),c=Mn([n.color,Dn.color],r,a);return{align:Mn([n.align,"center"],r,a),anchor:Mn([n.anchor,"center"],r,a),area:r.chart.chartArea,backgroundColor:Mn([n.backgroundColor,null],r,a),borderColor:Mn([n.borderColor,null],r,a),borderRadius:Mn([n.borderRadius,0],r,a),borderWidth:Mn([n.borderWidth,0],r,a),clamp:Mn([n.clamp,!1],r,a),clip:Mn([n.clip,!1],r,a),color:c,display:t,font:o,lines:e,offset:Mn([n.offset,4],r,a),opacity:Mn([n.opacity,1],r,a),origin:_M(i._el,r),padding:Xn(Mn([n.padding,4],r,a)),positioner:kM(i._el),rotation:Mn([n.rotation,0],r,a)*(Math.PI/180),size:Nd.textSize(i._ctx,e,o),textAlign:Mn([n.textAlign,"start"],r,a),textShadowBlur:Mn([n.textShadowBlur,0],r,a),textShadowColor:Mn([n.textShadowColor,c],r,a),textStrokeColor:Mn([n.textStrokeColor,c],r,a),textStrokeWidth:Mn([n.textStrokeWidth,0],r,a)}},update:function(t){var e=this,n=null,r=null,i=e._index,a=e._config,o,c,u,f=Mn([a.display,!0],t,i);f&&(o=t.dataset.data[i],c=Dt(fn(a.formatter,[o,t]),o),u=an(c)?[]:Nd.toTextLines(c),u.length&&(n=e._modelize(f,u,a,t),r=jM(n))),e._model=n,e._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var n=this,r=t.ctx,i=n._model,a=n._rects,o;this.visible()&&(r.save(),i.clip&&(o=i.area,r.beginPath(),r.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),r.clip()),r.globalAlpha=Nd.bound(0,i.opacity,1),r.translate(Qi(e.x),Qi(e.y)),r.rotate(i.rotation),SM(r,a.frame,i),EM(r,i.lines,a.text,i),r.restore())}});var OM=Number.MIN_SAFE_INTEGER||-9007199254740991,LM=Number.MAX_SAFE_INTEGER||9007199254740991;function rd(t,e,n){var r=Math.cos(n),i=Math.sin(n),a=e.x,o=e.y;return{x:a+r*(t.x-a)-i*(t.y-o),y:o+i*(t.x-a)+r*(t.y-o)}}function rw(t,e){var n=LM,r=OM,i=e.origin,a,o,c,u,f;for(a=0;a<t.length;++a)o=t[a],c=o.x-i.x,u=o.y-i.y,f=e.vx*c+e.vy*u,n=Math.min(n,f),r=Math.max(r,f);return{min:n,max:r}}function Df(t,e){var n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);return{vx:(e.x-t.x)/i,vy:(e.y-t.y)/i,origin:t,ln:i}}var FN=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};Ni(FN.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,n){this._rotation=n,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this,n=1,r=e._rect;return t=rd(t,e.center(),-e._rotation),!(t.x<r.x-n||t.y<r.y-n||t.x>r.x+r.w+n*2||t.y>r.y+r.h+n*2)},intersects:function(t){var e=this._points(),n=t._points(),r=[Df(e[0],e[1]),Df(e[0],e[3])],i,a,o;for(this._rotation!==t._rotation&&r.push(Df(n[0],n[1]),Df(n[0],n[3])),i=0;i<r.length;++i)if(a=rw(e,r[i]),o=rw(n,r[i]),a.max<o.min||o.max<a.min)return!1;return!0},_points:function(){var t=this,e=t._rect,n=t._rotation,r=t.center();return[rd({x:e.x,y:e.y},r,n),rd({x:e.x+e.w,y:e.y},r,n),rd({x:e.x+e.w,y:e.y+e.h},r,n),rd({x:e.x,y:e.y+e.h},r,n)]}});function zN(t,e,n){var r=e.positioner(t,e),i=r.vx,a=r.vy;if(!i&&!a)return{x:r.x,y:r.y};var o=n.w,c=n.h,u=e.rotation,f=Math.abs(o/2*Math.cos(u))+Math.abs(c/2*Math.sin(u)),h=Math.abs(o/2*Math.sin(u))+Math.abs(c/2*Math.cos(u)),p=1/Math.max(Math.abs(i),Math.abs(a));return f*=i*p,h*=a*p,f+=e.offset*i,h+=e.offset*a,{x:r.x+f,y:r.y+h}}function MM(t,e){var n,r,i,a;for(n=t.length-1;n>=0;--n)for(i=t[n].$layout,r=n-1;r>=0&&i._visible;--r)a=t[r].$layout,a._visible&&i._box.intersects(a._box)&&e(i,a);return t}function TM(t){var e,n,r,i,a,o,c;for(e=0,n=t.length;e<n;++e)r=t[e],i=r.$layout,i._visible&&(c=new Proxy(r._el,{get:(u,f)=>u.getProps([f],!0)[f]}),a=r.geometry(),o=zN(c,r.model(),a),i._box.update(o,a,r.rotation()));return MM(t,function(u,f){var h=u._hidable,p=f._hidable;h&&p||p?f._visible=!1:h&&(u._visible=!1)})}var Sd={prepare:function(t){var e=[],n,r,i,a,o;for(n=0,i=t.length;n<i;++n)for(r=0,a=t[n].length;r<a;++r)o=t[n][r],e.push(o),o.$layout={_box:new FN,_hidable:!1,_visible:!0,_set:n,_idx:o._index};return e.sort(function(c,u){var f=c.$layout,h=u.$layout;return f._idx===h._idx?h._set-f._set:h._idx-f._idx}),this.update(e),e},update:function(t){var e=!1,n,r,i,a,o;for(n=0,r=t.length;n<r;++n)i=t[n],a=i.model(),o=i.$layout,o._hidable=a&&a.display==="auto",o._visible=i.visible(),e|=o._hidable;e&&TM(t)},lookup:function(t,e){var n,r;for(n=t.length-1;n>=0;--n)if(r=t[n].$layout,r&&r._visible&&r._box.contains(e))return t[n];return null},draw:function(t,e){var n,r,i,a,o,c;for(n=0,r=e.length;n<r;++n)i=e[n],a=i.$layout,a._visible&&(o=i.geometry(),c=zN(i._el,i.model(),o),a._box.update(c,o,i.rotation()),i.draw(t,c))}},DM=function(t){if(an(t))return null;var e=t,n,r,i;if(It(t))if(!an(t.label))e=t.label;else if(!an(t.r))e=t.r;else for(e="",n=Object.keys(t),i=0,r=n.length;i<r;++i)e+=(i!==0?", ":"")+n[i]+": "+t[n[i]];return""+e},PM={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:DM,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},ns="$datalabels",BN="$default";function RM(t,e){var n=t.datalabels,r={},i=[],a,o;return n===!1?null:(n===!0&&(n={}),e=Ni({},[e,n]),a=e.labels||{},o=Object.keys(a),delete e.labels,o.length?o.forEach(function(c){a[c]&&i.push(Ni({},[e,a[c],{_key:c}]))}):i.push(e),r=i.reduce(function(c,u){return pn(u.listeners||{},function(f,h){c[h]=c[h]||{},c[h][u._key||BN]=f}),delete u.listeners,c},{}),{labels:i,listeners:r})}function Sx(t,e,n,r){if(e){var i=n.$context,a=n.$groups,o;e[a._set]&&(o=e[a._set][a._key],o&&fn(o,[i,r])===!0&&(t[ns]._dirty=!0,n.update(i)))}}function IM(t,e,n,r,i){var a,o;!n&&!r||(n?r?n!==r&&(o=a=!0):o=!0:a=!0,o&&Sx(t,e.leave,n,i),a&&Sx(t,e.enter,r,i))}function FM(t,e){var n=t[ns],r=n._listeners,i,a;if(!(!r.enter&&!r.leave)){if(e.type==="mousemove")a=Sd.lookup(n._labels,e);else if(e.type!=="mouseout")return;i=n._hovered,n._hovered=a,IM(t,r,i,a,e)}}function zM(t,e){var n=t[ns],r=n._listeners.click,i=r&&Sd.lookup(n._labels,e);i&&Sx(t,r,i,e)}var BM={id:"datalabels",defaults:PM,beforeInit:function(t){t[ns]={_actives:[]}},beforeUpdate:function(t){var e=t[ns];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,n){var r=e.index,i=t[ns],a=i._datasets[r]=[],o=t.isDatasetVisible(r),c=t.data.datasets[r],u=RM(c,n),f=e.meta.data||[],h=t.ctx,p,m,x,v,b,y,w,k;for(h.save(),p=0,x=f.length;p<x;++p)if(w=f[p],w[ns]=[],o&&w&&t.getDataVisibility(p)&&!w.skip)for(m=0,v=u.labels.length;m<v;++m)b=u.labels[m],y=b._key,k=new IN(b,h,w,p),k.$groups={_set:r,_key:y||BN},k.$context={active:!1,chart:t,dataIndex:p,dataset:c,datasetIndex:r},k.update(k.$context),w[ns].push(k),a.push(k);h.restore(),Ni(i._listeners,u.listeners,{merger:function(N,j,S){j[N]=j[N]||{},j[N][e.index]=S[N],i._listened=!0}})},afterUpdate:function(t){t[ns]._labels=Sd.prepare(t[ns]._datasets)},afterDatasetsDraw:function(t){Sd.draw(t,t[ns]._labels)},beforeEvent:function(t,e){if(t[ns]._listened){var n=e.event;switch(n.type){case"mousemove":case"mouseout":FM(t,n);break;case"click":zM(t,n);break}}},afterEvent:function(t){var e=t[ns],n=e._actives,r=e._actives=t.getActiveElements(),i=Nd.arrayDiff(n,r),a,o,c,u,f,h,p;for(a=0,o=i.length;a<o;++a)if(f=i[a],f[1])for(p=f[0].element[ns]||[],c=0,u=p.length;c<u;++c)h=p[c],h.$context.active=f[1]===1,h.update(h.$context);(e._dirty||i.length)&&(Sd.update(e._labels),t.render()),delete e._dirty}};/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const sw={modes:{point(t,e){return $f(t,e,{intersect:!0})},nearest(t,e,n){return WM(t,e,n)},x(t,e,n){return $f(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return $f(t,e,{intersect:n.intersect,axis:"y"})}}};function Sy(t,e,n){return(sw.modes[n.mode]||sw.modes.nearest)(t,e,n)}function qM(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function UM(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function $f(t,e,n){return t.filter(r=>n.intersect?r.inRange(e.x,e.y):qM(r,e,n.axis))}function WM(t,e,n){let r=Number.POSITIVE_INFINITY;return $f(t,e,n).reduce((i,a)=>{const o=a.getCenterPoint(),c=UM(e,o,n.axis),u=tc(e,c);return u<r?(i=[a],r=u):u===r&&i.push(a),i},[]).sort((i,a)=>i._index-a._index).slice(0,1)}function tl(t,e,n){const r=Math.cos(n),i=Math.sin(n),a=e.x,o=e.y;return{x:a+r*(t.x-a)-i*(t.y-o),y:o+i*(t.x-a)+r*(t.y-o)}}const HM=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Do=.001,Th=(t,e,n)=>Math.min(n,Math.max(e,t)),qN=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function VM(t,e,n){for(const r of Object.keys(t))t[r]=Th(t[r],e,n);return t}function $M(t,e,n,r){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+r,2)}function UN(t,{x:e,y:n,x2:r,y2:i},a,{borderWidth:o,hitTolerance:c}){const u=(o+c)/2,f=t.x>=e-u-Do&&t.x<=r+u+Do,h=t.y>=n-u-Do&&t.y<=i+u+Do;return a==="x"?f:(a==="y"||f)&&h}function WN(t,{rect:e,center:n},r,{rotation:i,borderWidth:a,hitTolerance:o}){const c=tl(t,n,cr(-i));return UN(c,e,r,{borderWidth:a,hitTolerance:o})}function nl(t,e){const{centerX:n,centerY:r}=t.getProps(["centerX","centerY"],e);return{x:n,y:r}}function YM(t,e,n,r=!0){const i=n.split(".");let a=0;for(const o of e.split(".")){const c=i[a++];if(parseInt(o,10)<parseInt(c,10))break;if(HM(c,o)){if(r)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const HN=t=>typeof t=="string"&&t.endsWith("%"),VN=t=>parseFloat(t)/100,$N=t=>Th(VN(t),0,1),sd=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),KM={box:t=>sd(t.centerX,t.centerY),doughnutLabel:t=>sd(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>sd(t.centerX,t.centerY),line:t=>sd(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>sd(t.centerX,t.centerY)};function Cy(t,e){return e==="start"?0:e==="end"?t:HN(e)?$N(e)*t:t/2}function Xa(t,e,n=!0){return typeof e=="number"?e:HN(e)?(n?$N(e):VN(e))*t:t}function GM(t,e){const{x:n,width:r}=t,i=e.textAlign;return i==="center"?n+r/2:i==="end"||i==="right"?n+r:n}function YN(t,e,{borderWidth:n,position:r,xAdjust:i,yAdjust:a},o){const c=It(o),u=e.width+(c?o.width:0)+n,f=e.height+(c?o.height:0)+n,h=Ay(r),p=iw(t.x,u,i,h.x),m=iw(t.y,f,a,h.y);return{x:p,y:m,x2:p+u,y2:m+f,width:u,height:f,centerX:p+u/2,centerY:m+f/2}}function Ay(t,e="center"){return It(t)?{x:Dt(t.x,e),y:Dt(t.y,e)}:(t=Dt(t,e),{x:t,y:t})}const KN=(t,e)=>t&&t.autoFit&&e<1;function GN(t,e){const n=t.font,r=hn(n)?n:[n];return KN(t,e)?r.map(function(i){const a=Bn(i);return a.size=Math.floor(i.size*e),a.lineHeight=i.lineHeight,Bn(a)}):r.map(i=>Bn(i))}function XN(t){return t&&(fs(t.xValue)||fs(t.yValue))}function iw(t,e,n=0,r){return t-Cy(e,r)+n}function hc(t,e,n){const r=n.init;if(r){if(r===!0)return ZN(e,n)}else return;return XM(t,e,n)}function QN(t,e,n){let r=!1;return e.forEach(i=>{ls(t[i])?(r=!0,n[i]=t[i]):fs(n[i])&&delete n[i]}),r}function ZN(t,e){const n=e.type||"line";return KM[n](t)}function XM(t,e,n){const r=fn(n.init,[{chart:t,properties:e,options:n}]);if(r===!0)return ZN(e,n);if(It(r))return r}const e0=new Map,QM=t=>isNaN(t)||t<=0,ZM=t=>t.reduce(function(e,n){return e+=n.string,e},"");function Dh(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function Ph(t,{x:e,y:n},r){r&&(t.translate(e,n),t.rotate(cr(r)),t.translate(-e,-n))}function ta(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function pc(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function Rh(t,e){const n=e.content;if(Dh(n))return{width:Xa(n.width,e.width),height:Xa(n.height,e.height)};const r=GN(e),i=e.textStrokeWidth,a=hn(n)?n:[n],o=a.join()+ZM(r)+i+(t._measureText?"-spriting":"");return e0.has(o)||e0.set(o,nT(t,a,r,i)),e0.get(o)}function JN(t,e,n){const{x:r,y:i,width:a,height:o}=e;t.save(),pc(t,n);const c=ta(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),nc(t,{x:r,y:i,w:a,h:o,radius:VM(Va(n.borderRadius),0,Math.min(a,o)/2)}),t.closePath(),t.fill(),c&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function e5(t,e,n,r){const i=n.content;if(Dh(i)){t.save(),t.globalAlpha=iT(n.opacity,i.style.opacity),t.drawImage(i,e.x,e.y,e.width,e.height),t.restore();return}const a=hn(i)?i:[i],o=GN(n,r),c=n.color,u=hn(c)?c:[c],f=GM(e,n),h=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,JM(t,n)&&rT(t,{x:f,y:h},a,o),sT(t,{x:f,y:h},a,{fonts:o,colors:u}),t.restore()}function JM(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function eT(t,e,n,r){const{radius:i,options:a}=e,o=a.pointStyle,c=a.rotation;let u=(c||0)*fy;if(Dh(o)){t.save(),t.translate(n,r),t.rotate(u),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}QM(i)||tT(t,{x:n,y:r,radius:i,rotation:c,style:o,rad:u})}function tT(t,{x:e,y:n,radius:r,rotation:i,style:a,rad:o}){let c,u,f,h;switch(t.beginPath(),a){default:t.arc(e,n,r,0,_n),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*r,n-Math.cos(o)*r),o+=ih,t.lineTo(e+Math.sin(o)*r,n-Math.cos(o)*r),o+=ih,t.lineTo(e+Math.sin(o)*r,n-Math.cos(o)*r),t.closePath();break;case"rectRounded":h=r*.516,f=r-h,c=Math.cos(o+Ds)*f,u=Math.sin(o+Ds)*f,t.arc(e-c,n-u,h,o-Bt,o-En),t.arc(e+u,n-c,h,o-En,o),t.arc(e+c,n+u,h,o,o+En),t.arc(e-u,n+c,h,o+En,o+Bt),t.closePath();break;case"rect":if(!i){f=Math.SQRT1_2*r,t.rect(e-f,n-f,2*f,2*f);break}o+=Ds;case"rectRot":c=Math.cos(o)*r,u=Math.sin(o)*r,t.moveTo(e-c,n-u),t.lineTo(e+u,n-c),t.lineTo(e+c,n+u),t.lineTo(e-u,n+c),t.closePath();break;case"crossRot":o+=Ds;case"cross":c=Math.cos(o)*r,u=Math.sin(o)*r,t.moveTo(e-c,n-u),t.lineTo(e+c,n+u),t.moveTo(e+u,n-c),t.lineTo(e-u,n+c);break;case"star":c=Math.cos(o)*r,u=Math.sin(o)*r,t.moveTo(e-c,n-u),t.lineTo(e+c,n+u),t.moveTo(e+u,n-c),t.lineTo(e-u,n+c),o+=Ds,c=Math.cos(o)*r,u=Math.sin(o)*r,t.moveTo(e-c,n-u),t.lineTo(e+c,n+u),t.moveTo(e+u,n-c),t.lineTo(e-u,n+c);break;case"line":c=Math.cos(o)*r,u=Math.sin(o)*r,t.moveTo(e-c,n-u),t.lineTo(e+c,n+u);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*r,n+Math.sin(o)*r);break}t.fill()}function nT(t,e,n,r){t.save();const i=e.length;let a=0,o=r;for(let c=0;c<i;c++){const u=n[Math.min(c,n.length-1)];t.font=u.string;const f=e[c];a=Math.max(a,t.measureText(f).width+r),o+=u.lineHeight}return t.restore(),{width:a,height:o}}function rT(t,{x:e,y:n},r,i){t.beginPath();let a=0;r.forEach(function(o,c){const u=i[Math.min(c,i.length-1)],f=u.lineHeight;t.font=u.string,t.strokeText(o,e,n+f/2+a),a+=f}),t.stroke()}function sT(t,{x:e,y:n},r,{fonts:i,colors:a}){let o=0;r.forEach(function(c,u){const f=a[Math.min(u,a.length-1)],h=i[Math.min(u,i.length-1)],p=h.lineHeight;t.beginPath(),t.font=h.string,t.fillStyle=f,t.fillText(c,e,n+p/2+o),o+=p,t.fill()})}function iT(t,e){const n=ec(t)?t:e;return ec(n)?Th(n,0,1):1}const t5=["left","bottom","top","right"];function aT(t,e){const{pointX:n,pointY:r,options:i}=e,a=i.callout,o=a&&a.display&&uT(e,a);if(!o||hT(e,a,o))return;if(t.save(),t.beginPath(),!ta(t,a))return t.restore();const{separatorStart:u,separatorEnd:f}=oT(e,o),{sideStart:h,sideEnd:p}=cT(e,o,u);(a.margin>0||i.borderWidth===0)&&(t.moveTo(u.x,u.y),t.lineTo(f.x,f.y)),t.moveTo(h.x,h.y),t.lineTo(p.x,p.y);const m=tl({x:n,y:r},e.getCenterPoint(),cr(-e.rotation));t.lineTo(m.x,m.y),t.stroke(),t.restore()}function oT(t,e){const{x:n,y:r,x2:i,y2:a}=t,o=lT(t,e);let c,u;return e==="left"||e==="right"?(c={x:n+o,y:r},u={x:c.x,y:a}):(c={x:n,y:r+o},u={x:i,y:c.y}),{separatorStart:c,separatorEnd:u}}function lT(t,e){const{width:n,height:r,options:i}=t,a=i.callout.margin+i.borderWidth/2;return e==="right"?n+a:e==="bottom"?r+a:-a}function cT(t,e,n){const{y:r,width:i,height:a,options:o}=t,c=o.callout.start,u=dT(e,o.callout);let f,h;return e==="left"||e==="right"?(f={x:n.x,y:r+Xa(a,c)},h={x:f.x+u,y:f.y}):(f={x:n.x+Xa(i,c),y:n.y},h={x:f.x,y:f.y+u}),{sideStart:f,sideEnd:h}}function dT(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function uT(t,e){const n=e.position;return t5.includes(n)?n:fT(t,e)}function fT(t,e){const{x:n,y:r,x2:i,y2:a,width:o,height:c,pointX:u,pointY:f,centerX:h,centerY:p,rotation:m}=t,x={x:h,y:p},v=e.start,b=Xa(o,v),y=Xa(c,v),w=[n,n+b,n+b,i],k=[r+y,a,r,a],N=[];for(let j=0;j<4;j++){const S=tl({x:w[j],y:k[j]},x,cr(m));N.push({position:t5[j],distance:tc(S,{x:u,y:f})})}return N.sort((j,S)=>j.distance-S.distance)[0].position}function hT(t,e,n){const{pointX:r,pointY:i}=t,a=e.margin;let o=r,c=i;return n==="left"?o+=a:n==="right"?o-=a:n==="top"?c+=a:n==="bottom"&&(c-=a),t.inRange(o,c)}const aw={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function ic(t,e,n){return e=typeof e=="number"?e:t.parse(e),tr(e)?t.getPixelForValue(e):n}function Zo(t,e,n){const r=e[n];if(r||n==="scaleID")return r;const i=n.charAt(0),a=Object.values(t).filter(o=>o.axis&&o.axis===i);return a.length?a[0].id:i}function n5(t,e){if(t){const n=t.options.reverse,r=ic(t,e.min,n?e.end:e.start),i=ic(t,e.max,n?e.start:e.end);return{start:r,end:i}}}function r5(t,e){const{chartArea:n,scales:r}=t,i=r[Zo(r,e,"xScaleID")],a=r[Zo(r,e,"yScaleID")];let o=n.width/2,c=n.height/2;return i&&(o=ic(i,e.xValue,i.left+i.width/2)),a&&(c=ic(a,e.yValue,a.top+a.height/2)),{x:o,y:c}}function Ey(t,e){const n=t.scales,r=n[Zo(n,e,"xScaleID")],i=n[Zo(n,e,"yScaleID")];if(!r&&!i)return{};let{left:a,right:o}=r||t.chartArea,{top:c,bottom:u}=i||t.chartArea;const f=ow(r,{min:e.xMin,max:e.xMax,start:a,end:o});a=f.start,o=f.end;const h=ow(i,{min:e.yMin,max:e.yMax,start:u,end:c});return c=h.start,u=h.end,{x:a,y:c,x2:o,y2:u,width:o-a,height:u-c,centerX:a+(o-a)/2,centerY:c+(u-c)/2}}function s5(t,e){if(!XN(e)){const n=Ey(t,e);let r=e.radius;(!r||isNaN(r))&&(r=Math.min(n.width,n.height)/2,e.radius=r);const i=r*2,a=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:a-r,y:o-r,x2:a+r,y2:o+r,centerX:a,centerY:o,width:i,height:i,radius:r}}return mT(t,e)}function pT(t,e){const{scales:n,chartArea:r}=t,i=n[e.scaleID],a={x:r.left,y:r.top,x2:r.right,y2:r.bottom};return i?gT(i,a,e):xT(n,a,e),a}function i5(t,e){const n=Ey(t,e);return n.initProperties=hc(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:bT(t,n,e),initProperties:n.initProperties}],n}function mT(t,e){const n=r5(t,e),r=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:r,height:r}}function ow(t,e){const n=n5(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function gT(t,e,n){const r=ic(t,n.value,NaN),i=ic(t,n.endValue,r);t.isHorizontal()?(e.x=r,e.x2=i):(e.y=r,e.y2=i)}function xT(t,e,n){for(const r of Object.keys(aw)){const i=t[Zo(t,n,r)];if(i){const{min:a,max:o,start:c,end:u,startProp:f,endProp:h}=aw[r],p=n5(i,{min:n[a],max:n[o],start:i[c],end:i[u]});e[f]=p.start,e[h]=p.end}}}function yT({properties:t,options:e},n,r,i){const{x:a,x2:o,width:c}=t;return a5({start:a,end:o,borderWidth:e.borderWidth},{position:r.x,padding:{start:i.left,end:i.right},adjust:e.label.xAdjust,size:n.width})}function vT({properties:t,options:e},n,r,i){const{y:a,y2:o,height:c}=t;return a5({start:a,end:o,borderWidth:e.borderWidth},{position:r.y,padding:{start:i.top,end:i.bottom},adjust:e.label.yAdjust,size:n.height})}function a5(t,e){const{start:n,end:r,borderWidth:i}=t,{position:a,padding:{start:o,end:c},adjust:u}=e,f=r-i-n-o-c-e.size;return n+i/2+u+Cy(f,a)}function bT(t,e,n){const r=n.label;r.backgroundColor="transparent",r.callout.display=!1;const i=Ay(r.position),a=Xn(r.padding),o=Rh(t.ctx,r),c=yT({properties:e,options:n},o,i,a),u=vT({properties:e,options:n},o,i,a),f=o.width+a.width,h=o.height+a.height;return{x:c,y:u,x2:c+f,y2:u+h,width:f,height:h,centerX:c+f/2,centerY:u+h/2,rotation:r.rotation}}const Cx=["enter","leave"],Oy=Cx.concat("click");function wT(t,e,n){e.listened=QN(n,Oy,e.listeners),e.moveListened=!1,Cx.forEach(r=>{ls(n[r])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(r=>{!e.listened&&ls(r.click)&&(e.listened=!0),e.moveListened||Cx.forEach(i=>{ls(r[i])&&(e.listened=!0,e.moveListened=!0)})})}function jT(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return _T(t,e,n);case"click":return kT(t,e,n)}}function _T(t,e,n){if(!t.moveListened)return;let r;e.type==="mousemove"?r=Sy(t.visibleElements,e,n.interaction):r=[];const i=t.hovered;t.hovered=r;const a={state:t,event:e};let o=lw(a,"leave",i,r);return lw(a,"enter",r,i)||o}function lw({state:t,event:e},n,r,i){let a;for(const o of r)i.indexOf(o)<0&&(a=o5(o.options[n]||t.listeners[n],o,e)||a);return a}function kT(t,e,n){const r=t.listeners,i=Sy(t.visibleElements,e,n.interaction);let a;for(const o of i)a=o5(o.options.click||r.click,o,e)||a;return a}function o5(t,e,n){return fn(t,[e.$context,n])===!0}const ph=["afterDraw","beforeDraw"];function NT(t,e,n){const r=e.visibleElements;e.hooked=QN(n,ph,e.hooks),e.hooked||r.forEach(i=>{e.hooked||ph.forEach(a=>{ls(i.options[a])&&(e.hooked=!0)})})}function cw(t,e,n){if(t.hooked){const r=e.options[n]||t.hooks[n];return fn(r,[e.$context])}}function ST(t,e,n){const r=LT(t.scales,e,n);let i=dw(e,r,"min","suggestedMin");i=dw(e,r,"max","suggestedMax")||i,i&&ls(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function CT(t,e){for(const n of t)ET(n,e)}function dw(t,e,n,r){if(tr(e[n])&&!AT(t.options,n,r)){const i=t[n]!==e[n];return t[n]=e[n],i}}function AT(t,e,n){return fs(t[e])||fs(t[n])}function ET(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const r=Zo(e,t,n);r&&!e[r]&&OT(t,n)&&console.warn(`No scale found with id '${r}' for annotation '${t.id}'`)}}function OT(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const r of["Min","Max","Value"])if(fs(t[n+r]))return!0;return!1}function LT(t,e,n){const r=e.axis,i=e.id,a=r+"ScaleID",o={min:Dt(e.min,Number.NEGATIVE_INFINITY),max:Dt(e.max,Number.POSITIVE_INFINITY)};for(const c of n)c.scaleID===i?uw(c,e,["value","endValue"],o):Zo(t,c,a)===i&&uw(c,e,[r+"Min",r+"Max",r+"Value"],o);return o}function uw(t,e,n,r){for(const i of n){const a=t[i];if(fs(a)){const o=e.parse(a);r.min=Math.min(r.min,o),r.max=Math.max(r.max,o)}}}class mc extends xr{inRange(e,n,r,i){const{x:a,y:o}=tl({x:e,y:n},this.getCenterPoint(i),cr(-this.options.rotation));return UN({x:a,y:o},this.getProps(["x","y","x2","y2"],i),r,this.options)}getCenterPoint(e){return nl(this,e)}draw(e){e.save(),Ph(e,this.getCenterPoint(),this.options.rotation),JN(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return i5(e,n)}}mc.id="boxAnnotation";mc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};mc.defaultRoutes={borderColor:"color",backgroundColor:"color"};mc.descriptors={label:{_fallback:!0}};class Ih extends xr{inRange(e,n,r,i){return WN({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},r,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return nl(this,e)}draw(e){const n=this.options;!n.display||!n.content||(IT(e,this),e.save(),Ph(e,this.getCenterPoint(),this.rotation),e5(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const r=MT(e,n);if(!r)return{};const{controllerMeta:i,point:a,radius:o}=DT(e,n,r);let c=Rh(e.ctx,n);const u=PT(c,o);KN(n,u)&&(c={width:c.width*u,height:c.height*u});const{position:f,xAdjust:h,yAdjust:p}=n,m=YN(a,c,{borderWidth:0,position:f,xAdjust:h,yAdjust:p});return{initProperties:hc(e,m,n),...m,...i,rotation:n.rotation,_fitRatio:u}}}Ih.id="doughnutLabelAnnotation";Ih.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};Ih.defaultRoutes={};function MT(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,r){const i=r.controller;return i instanceof Mo&&TT(t,e,r.data)&&(!n||i.innerRadius<n.controller.innerRadius)&&i.options.circumference>=90?r:n},void 0)}function TT(t,e,n){if(!e.autoHide)return!0;for(let r=0;r<n.length;r++)if(!n[r].hidden&&t.getDataVisibility(r))return!0}function DT({chartArea:t},e,n){const{left:r,top:i,right:a,bottom:o}=t,{innerRadius:c,offsetX:u,offsetY:f}=n.controller,h=(r+a)/2+u,p=(i+o)/2+f,m={left:Math.max(h-c,r),right:Math.min(h+c,a),top:Math.max(p-c,i),bottom:Math.min(p+c,o)},x={x:(m.left+m.right)/2,y:(m.top+m.bottom)/2},v=e.spacing+e.borderWidth/2,b=c-v,y=x.y>p,w=y?i+v:o-v,k=RT(w,h,p,b);return{controllerMeta:{_centerX:h,_centerY:p,_radius:b,_counterclockwise:y,...k},point:x,radius:Math.min(c,Math.min(m.right-m.left,m.bottom-m.top)/2)}}function PT({width:t,height:e},n){const r=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/r}function RT(t,e,n,r){const i=Math.pow(n-t,2),a=Math.pow(r,2),o=e*-2,c=Math.pow(e,2)+i-a,u=Math.pow(o,2)-4*c;if(u<=0)return{_startAngle:0,_endAngle:_n};const f=(-o-Math.sqrt(u))/2,h=(-o+Math.sqrt(u))/2;return{_startAngle:ah({x:e,y:n},{x:f,y:t}).angle,_endAngle:ah({x:e,y:n},{x:h,y:t}).angle}}function IT(t,e){const{_centerX:n,_centerY:r,_radius:i,_startAngle:a,_endAngle:o,_counterclockwise:c,options:u}=e;t.save();const f=ta(t,u);t.fillStyle=u.backgroundColor,t.beginPath(),t.arc(n,r,i,a,o,c),t.closePath(),t.fill(),f&&t.stroke(),t.restore()}class Xd extends xr{inRange(e,n,r,i){return WN({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},r,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return nl(this,e)}draw(e){const n=this.options,r=!fs(this._visible)||this._visible;!n.display||!n.content||!r||(e.save(),Ph(e,this.getCenterPoint(),this.rotation),aT(e,this),JN(e,this,n),e5(e,FT(this),n),e.restore())}resolveElementProperties(e,n){let r;if(XN(n))r=r5(e,n);else{const{centerX:c,centerY:u}=Ey(e,n);r={x:c,y:u}}const i=Xn(n.padding),a=Rh(e.ctx,n),o=YN(r,a,n,i);return{initProperties:hc(e,o,n),pointX:r.x,pointY:r.y,...o,rotation:n.rotation}}}Xd.id="labelAnnotation";Xd.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Xd.defaultRoutes={borderColor:"color"};function FT({x:t,y:e,width:n,height:r,options:i}){const a=i.borderWidth/2,o=Xn(i.padding);return{x:t+o.left+a,y:e+o.top+a,width:n-o.left-o.right-i.borderWidth,height:r-o.top-o.bottom-i.borderWidth}}const Ly=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),Ax=(t,e,n)=>Ly(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,fw=(t,e,n)=>Ly(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,yd=t=>t*t,zT=(t,e,{x:n,y:r,x2:i,y2:a},o)=>o==="y"?{start:Math.min(r,a),end:Math.max(r,a),value:e}:{start:Math.min(n,i),end:Math.max(n,i),value:t},hw=(t,e,n,r)=>(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n,Ex=(t,e,n,r)=>({x:hw(t.x,e.x,n.x,r),y:hw(t.y,e.y,n.y,r)}),pw=(t,e,n,r)=>2*(1-r)*(e-t)+2*r*(n-e),mw=(t,e,n,r)=>-Math.atan2(pw(t.x,e.x,n.x,r),pw(t.y,e.y,n.y,r))+.5*Bt;class Qd extends xr{inRange(e,n,r,i){const a=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y"){const o={mouseX:e,mouseY:n},{path:c,ctx:u}=this;if(c){ta(u,this.options),u.lineWidth+=this.options.hitTolerance;const{chart:h}=this.$context,p=e*h.currentDevicePixelRatio,m=n*h.currentDevicePixelRatio,x=u.isPointInStroke(c,p,m)||Ox(this,o,i);return u.restore(),x}const f=yd(a);return WT(this,o,f,i)||Ox(this,o,i)}return BT(this,{mouseX:e,mouseY:n},r,{hitSize:a,useFinalPosition:i})}getCenterPoint(e){return nl(this,e)}draw(e){const{x:n,y:r,x2:i,y2:a,cp:o,options:c}=this;if(e.save(),!ta(e,c))return e.restore();pc(e,c);const u=Math.sqrt(Math.pow(i-n,2)+Math.pow(a-r,2));if(c.curve&&o)return QT(e,this,o,u),e.restore();const{startOpts:f,endOpts:h,startAdjust:p,endAdjust:m}=l5(this),x=Math.atan2(a-r,i-n);e.translate(n,r),e.rotate(x),e.beginPath(),e.moveTo(0+p,0),e.lineTo(u-m,0),e.shadowColor=c.borderShadowColor,e.stroke(),Lx(e,0,p,f),Lx(e,u,-m,h),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const r=pT(e,n),{x:i,y:a,x2:o,y2:c}=r,u=qT(r,e.chartArea),f=u?UT({x:i,y:a},{x:o,y:c},e.chartArea):{x:i,y:a,x2:o,y2:c,width:Math.abs(o-i),height:Math.abs(c-a)};if(f.centerX=(o+i)/2,f.centerY=(c+a)/2,f.initProperties=hc(e,f,n),n.curve){const p={x:f.x,y:f.y},m={x:f.x2,y:f.y2};f.cp=XT(f,n,tc(p,m))}const h=HT(e,f,n.label);return h._visible=u,f.elements=[{type:"label",optionScope:"label",properties:h,initProperties:f.initProperties}],f}}Qd.id="lineAnnotation";const gw={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Qd.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},gw),fill:!1,length:12,start:Object.assign({},gw),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Xd.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Qd.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Qd.defaultRoutes={borderColor:"color"};function BT(t,{mouseX:e,mouseY:n},r,{hitSize:i,useFinalPosition:a}){const o=zT(e,n,t.getProps(["x","y","x2","y2"],a),r);return qN(o,i)||Ox(t,{mouseX:e,mouseY:n},a,r)}function qT({x:t,y:e,x2:n,y2:r},{top:i,right:a,bottom:o,left:c}){return!(t<c&&n<c||t>a&&n>a||e<i&&r<i||e>o&&r>o)}function xw({x:t,y:e},n,{top:r,right:i,bottom:a,left:o}){return t<o&&(e=fw(o,{x:t,y:e},n),t=o),t>i&&(e=fw(i,{x:t,y:e},n),t=i),e<r&&(t=Ax(r,{x:t,y:e},n),e=r),e>a&&(t=Ax(a,{x:t,y:e},n),e=a),{x:t,y:e}}function UT(t,e,n){const{x:r,y:i}=xw(t,e,n),{x:a,y:o}=xw(e,t,n);return{x:r,y:i,x2:a,y2:o,width:Math.abs(a-r),height:Math.abs(o-i)}}function WT(t,{mouseX:e,mouseY:n},r=Do,i){const{x:a,y:o,x2:c,y2:u}=t.getProps(["x","y","x2","y2"],i),f=c-a,h=u-o,p=yd(f)+yd(h),m=p===0?-1:((e-a)*f+(n-o)*h)/p;let x,v;return m<0?(x=a,v=o):m>1?(x=c,v=u):(x=a+m*f,v=o+m*h),yd(e-x)+yd(n-v)<=r}function Ox(t,{mouseX:e,mouseY:n},r,i){const a=t.label;return a.options.display&&a.inRange(e,n,i,r)}function HT(t,e,n){const r=n.borderWidth,i=Xn(n.padding),a=Rh(t.ctx,n),o=a.width+i.width+r,c=a.height+i.height+r;return $T(e,n,{width:o,height:c,padding:i},t.chartArea)}function VT(t){const{x:e,y:n,x2:r,y2:i}=t,a=Math.atan2(i-n,r-e);return a>Bt/2?a-Bt:a<Bt/-2?a+Bt:a}function $T(t,e,n,r){const{width:i,height:a,padding:o}=n,{xAdjust:c,yAdjust:u}=e,f={x:t.x,y:t.y},h={x:t.x2,y:t.y2},p=e.rotation==="auto"?VT(t):cr(e.rotation),m=YT(i,a,p),x=KT(t,e,{labelSize:m,padding:o},r),v=t.cp?Ex(f,t.cp,h,x):Ly(f,h,x),b={size:m.w,min:r.left,max:r.right,padding:o.left},y={size:m.h,min:r.top,max:r.bottom,padding:o.top},w=vw(v.x,b)+c,k=vw(v.y,y)+u;return{x:w-i/2,y:k-a/2,x2:w+i/2,y2:k+a/2,centerX:w,centerY:k,pointX:v.x,pointY:v.y,width:i,height:a,rotation:Ah(p)}}function YT(t,e,n){const r=Math.cos(n),i=Math.sin(n);return{w:Math.abs(t*r)+Math.abs(e*i),h:Math.abs(t*i)+Math.abs(e*r)}}function KT(t,e,n,r){let i;const a=GT(t,r);return e.position==="start"?i=yw({w:t.x2-t.x,h:t.y2-t.y},n,e,a):e.position==="end"?i=1-yw({w:t.x-t.x2,h:t.y-t.y2},n,e,a):i=Cy(1,e.position),i}function yw(t,e,n,r){const{labelSize:i,padding:a}=e,o=t.w*r.dx,c=t.h*r.dy,u=o>0&&(i.w/2+a.left-r.x)/o,f=c>0&&(i.h/2+a.top-r.y)/c;return Th(Math.max(u,f),0,.25)}function GT(t,e){const{x:n,x2:r,y:i,y2:a}=t,o=Math.min(i,a)-e.top,c=Math.min(n,r)-e.left,u=e.bottom-Math.max(i,a),f=e.right-Math.max(n,r);return{x:Math.min(c,f),y:Math.min(o,u),dx:c<=f?1:-1,dy:o<=u?1:-1}}function vw(t,e){const{size:n,min:r,max:i,padding:a}=e,o=n/2;return n>i-r?(i+r)/2:(r>=t-a-o&&(t=r+a+o),i<=t+a+o&&(t=i-a-o),t)}function l5(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,r=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:r,startAdjust:bw(t,n),endAdjust:bw(t,r)}}function bw(t,e){if(!e||!e.display)return 0;const{length:n,width:r}=e,i=t.options.borderWidth/2,a={x:n,y:r+i};return Math.abs(Ax(0,a,{x:0,y:i}))}function Lx(t,e,n,r){if(!r||!r.display)return;const{length:i,width:a,fill:o,backgroundColor:c,borderColor:u}=r,f=Math.abs(e-i)+n;t.beginPath(),pc(t,r),ta(t,r),t.moveTo(f,-a),t.lineTo(e+n,0),t.lineTo(f,a),o===!0?(t.fillStyle=c||u,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=r.borderShadowColor,t.stroke()}function XT(t,e,n){const{x:r,y:i,x2:a,y2:o,centerX:c,centerY:u}=t,f=Math.atan2(o-i,a-r),h=Ay(e.controlPoint,0),p={x:c+Xa(n,h.x,!1),y:u+Xa(n,h.y,!1)};return tl(p,{x:c,y:u},f)}function ww(t,{x:e,y:n},{angle:r,adjust:i},a){!a||!a.display||(t.save(),t.translate(e,n),t.rotate(r),Lx(t,0,-i,a),t.restore())}function QT(t,e,n,r){const{x:i,y:a,x2:o,y2:c,options:u}=e,{startOpts:f,endOpts:h,startAdjust:p,endAdjust:m}=l5(e),x={x:i,y:a},v={x:o,y:c},b=mw(x,n,v,0),y=mw(x,n,v,1)-Bt,w=Ex(x,n,v,p/r),k=Ex(x,n,v,1-m/r),N=new Path2D;t.beginPath(),N.moveTo(w.x,w.y),N.quadraticCurveTo(n.x,n.y,k.x,k.y),t.shadowColor=u.borderShadowColor,t.stroke(N),e.path=N,e.ctx=t,ww(t,w,{angle:b,adjust:p},f),ww(t,k,{angle:y,adjust:m},h)}class Zd extends xr{inRange(e,n,r,i){const a=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y")return ZT({x:e,y:n},this.getProps(["width","height","centerX","centerY"],i),a,o);const{x:c,y:u,x2:f,y2:h}=this.getProps(["x","y","x2","y2"],i),p=r==="y"?{start:u,end:h}:{start:c,end:f},m=tl({x:e,y:n},this.getCenterPoint(i),cr(-a));return m[r]>=p.start-o-Do&&m[r]<=p.end+o+Do}getCenterPoint(e){return nl(this,e)}draw(e){const{width:n,height:r,centerX:i,centerY:a,options:o}=this;e.save(),Ph(e,this.getCenterPoint(),o.rotation),pc(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const c=ta(e,o);e.ellipse(i,a,r/2,n/2,Bt/2,0,2*Bt),e.fill(),c&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return i5(e,n)}}Zd.id="ellipseAnnotation";Zd.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},mc.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Zd.defaultRoutes={borderColor:"color",backgroundColor:"color"};Zd.descriptors={label:{_fallback:!0}};function ZT(t,e,n,r){const{width:i,height:a,centerX:o,centerY:c}=e,u=i/2,f=a/2;if(u<=0||f<=0)return!1;const h=cr(n||0),p=Math.cos(h),m=Math.sin(h),x=Math.pow(p*(t.x-o)+m*(t.y-c),2),v=Math.pow(m*(t.x-o)-p*(t.y-c),2);return x/Math.pow(u+r,2)+v/Math.pow(f+r,2)<=1.0001}class Fh extends xr{inRange(e,n,r,i){const{x:a,y:o,x2:c,y2:u,width:f}=this.getProps(["x","y","x2","y2","width"],i),h=(this.options.borderWidth+this.options.hitTolerance)/2;return r!=="x"&&r!=="y"?$M({x:e,y:n},this.getCenterPoint(i),f/2,h):qN(r==="y"?{start:o,end:u,value:n}:{start:a,end:c,value:e},h)}getCenterPoint(e){return nl(this,e)}draw(e){const n=this.options,r=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,pc(e,n);const i=ta(e,n);eT(e,this,this.centerX,this.centerY),i&&!Dh(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=r}resolveElementProperties(e,n){const r=s5(e,n);return r.initProperties=hc(e,r,n),r}}Fh.id="pointAnnotation";Fh.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Fh.defaultRoutes={borderColor:"color",backgroundColor:"color"};class zh extends xr{inRange(e,n,r,i){if(r!=="x"&&r!=="y")return this.options.radius>=.1&&this.elements.length>1&&eD(this.elements,e,n,i);const a=tl({x:e,y:n},this.getCenterPoint(i),cr(-this.options.rotation)),o=this.elements.map(f=>r==="y"?f.bY:f.bX),c=Math.min(...o),u=Math.max(...o);return a[r]>=c&&a[r]<=u}getCenterPoint(e){return nl(this,e)}draw(e){const{elements:n,options:r}=this;e.save(),e.beginPath(),e.fillStyle=r.backgroundColor,pc(e,r);const i=ta(e,r);let a=!0;for(const o of n)a?(e.moveTo(o.x,o.y),a=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),i&&(e.shadowColor=r.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const r=s5(e,n),{sides:i,rotation:a}=n,o=[],c=2*Bt/i;let u=a*fy;for(let f=0;f<i;f++,u+=c){const h=JT(r,n,u);h.initProperties=hc(e,r,n),o.push(h)}return r.elements=o,r}}zh.id="polygonAnnotation";zh.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};zh.defaultRoutes={borderColor:"color",backgroundColor:"color"};function JT({centerX:t,centerY:e},{radius:n,borderWidth:r,hitTolerance:i},a){const o=(r+i)/2,c=Math.sin(a),u=Math.cos(a),f={x:t+c*n,y:e-u*n};return{type:"point",optionScope:"point",properties:{x:f.x,y:f.y,centerX:f.x,centerY:f.y,bX:t+c*(n+o),bY:e-u*(n+o)}}}function eD(t,e,n,r){let i=!1,a=t[t.length-1].getProps(["bX","bY"],r);for(const o of t){const c=o.getProps(["bX","bY"],r);c.bY>n!=a.bY>n&&e<(a.bX-c.bX)*(n-c.bY)/(a.bY-c.bY)+c.bX&&(i=!i),a=c}return i}const Ya={box:mc,doughnutLabel:Ih,ellipse:Zd,label:Xd,line:Qd,point:Fh,polygon:zh};Object.keys(Ya).forEach(t=>{Dn.describe(`elements.${Ya[t].id}`,{_fallback:"plugins.annotation.common"})});const tD={update:Object.assign},nD=Oy.concat(ph),jw=(t,e)=>It(e)?Tx(t,e):t,Mx=t=>t==="color"||t==="font";function My(t="line"){return Ya[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function rD(t,e,n,r){const i=iD(t,n.animations,r),a=e.annotations,o=lD(e.elements,a);for(let c=0;c<a.length;c++){const u=a[c],f=c5(o,c,u.type),h=u.setContext(oD(t,f,o,u)),p=f.resolveElementProperties(t,h);p.skip=sD(p),"elements"in p&&(aD(f,p.elements,h,i),delete p.elements),fs(f.x)||Object.assign(f,p),Object.assign(f,p.initProperties),p.options=d5(h),i.update(f,p)}}function sD(t){return isNaN(t.x)||isNaN(t.y)}function iD(t,e,n){return n==="reset"||n==="none"||n==="resize"?tD:new ky(t,e)}function aD(t,e,n,r){const i=t.elements||(t.elements=[]);i.length=e.length;for(let a=0;a<e.length;a++){const o=e[a],c=o.properties,u=c5(i,a,o.type,o.initProperties),f=n[o.optionScope].override(o);c.options=d5(f),r.update(u,c)}}function c5(t,e,n,r){const i=Ya[My(n)];let a=t[e];return(!a||!(a instanceof i))&&(a=t[e]=new i,Object.assign(a,r)),a}function d5(t){const e=Ya[My(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,Tx(t,e.defaults),Tx(t,e.defaultRoutes));for(const r of nD)n[r]=t[r];return n}function Tx(t,e){const n={};for(const r of Object.keys(e)){const i=e[r],a=t[r];Mx(r)&&hn(a)?n[r]=a.map(o=>jw(o,i)):n[r]=jw(a,i)}return n}function oD(t,e,n,r){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(i=>i&&i.options)},id:r.id,type:"annotation"}))}function lD(t,e){const n=e.length,r=t.length;if(r<n){const i=n-r;t.splice(r,0,...new Array(i))}else r>n&&t.splice(n,r-n);return t}var cD="3.1.0";const Ca=new Map,_w=t=>t.type!=="doughnutLabel",dD=Oy.concat(ph);var uD={id:"annotation",version:cD,beforeRegister(){YM("chart.js","4.0",$a.version)},afterRegister(){$a.register(Ya)},afterUnregister(){$a.unregister(Ya)},beforeInit(t){Ca.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const r=Ca.get(t),i=r.annotations=[];let a=n.annotations;It(a)?Object.keys(a).forEach(o=>{const c=a[o];It(c)&&(c.id=o,i.push(c))}):hn(a)&&i.push(...a),CT(i.filter(_w),t.scales)},afterDataLimits(t,e){const n=Ca.get(t);ST(t,e.scale,n.annotations.filter(_w).filter(r=>r.display&&r.adjustScaleRange))},afterUpdate(t,e,n){const r=Ca.get(t);wT(t,r,n),rD(t,r,n,e.mode),r.visibleElements=r.elements.filter(i=>!i.skip&&i.options.display),NT(t,r,n)},beforeDatasetsDraw(t,e,n){id(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){id(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){id(t,e.index,n.clip)},beforeDraw(t,e,n){id(t,"beforeDraw",n.clip)},afterDraw(t,e,n){id(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const r=Ca.get(t);jT(r,e.event,n)&&(e.changed=!0)},afterDestroy(t){Ca.delete(t)},getAnnotations(t){const e=Ca.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return Sy(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!dD.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${Ya[My(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:Mx,_fallback:!0},_indexable:Mx}},additionalOptionScopes:[""]};function id(t,e,n){const{ctx:r,chartArea:i}=t,a=Ca.get(t);n&&Kd(r,i);const o=fD(a.visibleElements,e).sort((c,u)=>c.element.options.z-u.element.options.z);for(const c of o)hD(r,i,a,c);n&&Gd(r)}function fD(t,e){const n=[];for(const r of t)if(r.options.drawTime===e&&n.push({element:r,main:!0}),r.elements&&r.elements.length)for(const i of r.elements)i.options.display&&i.options.drawTime===e&&n.push({element:i});return n}function hD(t,e,n,r){const i=r.element;r.main?(cw(n,i,"beforeDraw"),i.draw(t,e),cw(n,i,"afterDraw")):i.draw(t,e)}$a.register(uh,fh,Bl,Xi,zl,To,EN,LN,CN,NN,BM,uD);const Bh=({title:t,subtitle:e,children:n,actions:r,className:i,loading:a=!1,error:o,padding:c})=>s.jsxs(Ie,{variant:"elevated",padding:c,className:F("",i),children:[(t||e||r)&&s.jsx(Nt,{title:t,subtitle:e,action:r}),a?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-purple-600"})}):o?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:o})]})}):s.jsx("div",{className:"relative w-full",children:n})]}),Ty=t=>({responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:!0,position:"top"},tooltip:{enabled:!0,mode:"index",intersect:!1},datalabels:{display:!1}},...t}),u5="label";function kw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function pD(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function f5(t,e){t.labels=e}function h5(t,e,n=u5){const r=[];t.datasets=e.map(i=>{const a=t.datasets.find(o=>o[n]===i[n]);return!a||!i.data||r.includes(a)?{...i}:(r.push(a),Object.assign(a,i),a)})}function mD(t,e=u5){const n={labels:[],datasets:[]};return f5(n,t.labels),h5(n,t.datasets,e),n}function gD(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:a,type:o,data:c,options:u,plugins:f=[],fallbackContent:h,updateMode:p,...m}=t,x=L.useRef(null),v=L.useRef(null),b=()=>{x.current&&(v.current=new $a(x.current,{type:o,data:mD(c,a),options:u&&{...u},plugins:f}),kw(e,v.current))},y=()=>{kw(e,null),v.current&&(v.current.destroy(),v.current=null)};return L.useEffect(()=>{!i&&v.current&&u&&pD(v.current,u)},[i,u]),L.useEffect(()=>{!i&&v.current&&f5(v.current.config.data,c.labels)},[i,c.labels]),L.useEffect(()=>{!i&&v.current&&c.datasets&&h5(v.current.config.data,c.datasets,a)},[i,c.datasets]),L.useEffect(()=>{v.current&&(i?(y(),setTimeout(b)):v.current.update(p))},[i,u,c.labels,c.datasets,p]),L.useEffect(()=>{v.current&&(y(),setTimeout(b))},[o]),L.useEffect(()=>(b(),()=>y()),[]),s.jsx("canvas",{ref:x,role:"img",height:n,width:r,...m,children:h})}const xD=L.forwardRef(gD);function qh(t,e){return $a.register(e),L.forwardRef((n,r)=>s.jsx(xD,{...n,ref:r,type:t}))}const p5=qh("bar",Uf),yD=qh("radar",Wf),vD=qh("doughnut",Mo),bD=qh("pie",yx),Dx=({data:t,options:e,height:n=300,...r})=>{const a={...Ty({indexAxis:"x",scales:{y:{beginAtZero:!0}}}),...e};return s.jsx(Bh,{...r,children:s.jsx("div",{style:{height:`${n}px`},children:s.jsx(p5,{data:t,options:a})})})},Dy=({data:t,options:e,height:n=300,...r})=>{const a={...Ty({maintainAspectRatio:!1,aspectRatio:1,layout:{padding:{top:8,right:8,bottom:8,left:8}},plugins:{legend:{display:!0,position:"right"},datalabels:{color:"#fff",formatter:(o,c)=>{const f=c.dataset.data.filter(p=>p!==null).reduce((p,m)=>p+m,0);return`${(o/f*100).toFixed(1)}%`},font:{weight:"bold",size:12}}}}),...e};return s.jsx(Bh,{...r,children:s.jsx("div",{style:{height:`${n}px`},children:s.jsx(bD,{data:t,options:a})})})},wD=({data:t,options:e,height:n=300,...r})=>{const a={...Ty({plugins:{legend:{display:!0,position:"right"},datalabels:{color:"#fff",formatter:(o,c)=>{const f=c.dataset.data.filter(p=>p!==null).reduce((p,m)=>p+m,0);return`${(o/f*100).toFixed(1)}%`},font:{weight:"bold",size:12}}}}),...e};return s.jsx(Bh,{...r,children:s.jsx("div",{style:{height:`${n}px`},children:s.jsx(vD,{data:t,options:a})})})},Nw=({data:t,loading:e=!1,title:n="Finding Actions Age Distribution",subtitle:r,height:i=350,actions:a,isMobile:o=!1})=>{var u;const c={responsive:!0,maintainAspectRatio:!1,indexAxis:o?"y":"x",plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,displayColors:!0,callbacks:{label:function(f){const h=o?f.parsed.x:f.parsed.y;return`${f.dataset.label}: ${h} actions`},title:function(f){var p;const h=((p=f[0])==null?void 0:p.label)||"";return h.startsWith("-")?`${h} days (Overdue)`:h==="720+"?`${h} days`:`${h} days (Upcoming)`}}},datalabels:{display:!1}},scales:o?{x:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:9},color:"#6B7280",padding:4},title:{display:!0,text:"Number of Actions",font:{size:10,weight:"bold"},color:"#374151"},border:{display:!1}},y:{grid:{display:!1},ticks:{font:{size:9},color:"#374151"},title:{display:!1},border:{display:!1}}}:{x:{grid:{display:!1},ticks:{font:{size:10},color:"#374151",maxRotation:45,minRotation:45},title:{display:!0,text:"Days Until/Past Due Date",font:{size:12,weight:"bold"},color:"#374151"},border:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{stepSize:1,font:{size:11},color:"#6B7280",padding:8},title:{display:!0,text:"Number of Actions",font:{size:12,weight:"bold"},color:"#374151"},border:{display:!1}}},interaction:{mode:"index",intersect:!1},animation:{duration:750,easing:"easeInOutQuart"}};return s.jsx(Ie,{variant:"elevated",children:s.jsxs("div",{className:o?"p-3":"p-6",children:[s.jsxs("div",{className:F("flex items-center justify-between mb-4",o&&"mb-2"),children:[s.jsxs("div",{children:[s.jsx("h3",{className:F("font-semibold text-gray-900",o?"text-sm":"text-lg"),children:n}),r&&s.jsx("p",{className:F("text-gray-600 mt-1",o?"text-xs":"text-sm"),children:r})]}),a&&s.jsx("div",{children:a})]}),s.jsx("div",{style:{height:`${o?Math.max(300,(((u=t.labels)==null?void 0:u.length)||0)*35):i}px`},children:e?s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsx(Ct,{size:"lg"})}):s.jsx(p5,{data:t,options:c})})]})})},Py=t=>Pn({queryKey:["auditPlans",t],queryFn:async()=>{let e=[...Zi];return t&&t!=="All Years"&&(e=e.filter(n=>n.audit_year.toString()===t)),Re("audit-plans",e)}}),jD=t=>Pn({queryKey:["auditPlanHistory",t],queryFn:async()=>Re("audit-plan-history",[]),enabled:!!t}),_D=()=>{const t=$d();return iy({mutationFn:async e=>{const n={id:Zi.length+1,audit_year:e.audit_year||new Date().getFullYear(),audit_type:e.audit_type||"Financial",audit_name:e.audit_name||"New Audit",audit_lead_name:e.audit_lead_name||"John Doe",audit_lead_email:e.audit_lead_email||"john.doe@example.com",business_unit:e.business_unit||void 0,department:e.department||void 0,process:e.process||void 0,start_date:e.start_date||void 0,end_date:e.end_date||void 0,audit_duration_weeks:e.audit_duration_weeks||void 0,report_release_date:e.report_release_date||void 0,audit_report_rating:e.audit_report_rating||void 0,status:e.status||"Planned",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by:e.created_by||void 0};return Zi.push(n),Re("create-audit-plan",n)},onSuccess:()=>{t.invalidateQueries({queryKey:["auditPlans"]})}})},kD=()=>{const t=$d();return iy({mutationFn:async({id:e,updates:n})=>{const r=Zi.findIndex(o=>o.id===e);if(r===-1)throw new Error("Plan not found");const a={...Zi[r],...n,updated_at:new Date().toISOString()};return Zi[r]=a,Re("update-audit-plan",a)},onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["auditPlans"]}),t.invalidateQueries({queryKey:["auditPlan",n.id]}),t.invalidateQueries({queryKey:["auditPlanHistory",n.id]})}})},ND=()=>{const t=$d();return iy({mutationFn:async({id:e,status:n})=>{const r=Zi.findIndex(o=>o.id===e);if(r===-1)throw new Error("Plan not found");const a={...Zi[r],status:n,updated_at:new Date().toISOString()};return Zi[r]=a,Re("update-audit-plan-status",a)},onSuccess:()=>{setTimeout(()=>{t.invalidateQueries({queryKey:["auditPlans"]})},500)}})},Hn=["Planned","Fieldwork","Pre Closing Meeting","Closing Meeting","Completed"],Px=t=>{const e=Hn.indexOf(t);return e===-1?0:(e+1)/Hn.length*100},Rl=t=>{switch(t){case"Planned":return"bg-blue-500";case"Fieldwork":return"bg-yellow-500";case"Pre Closing Meeting":return"bg-orange-500";case"Closing Meeting":return"bg-purple-500";case"Completed":return"bg-green-500";default:return"bg-gray-500"}},t0=(t,e,n,r,i,a,o,c,u)=>{const f=u&&u.id===t.id?u.status:t.status,h=Px(f),p=Rl(f),m=Hn.indexOf(f),x=c===t.id;return s.jsxs("tr",{className:`
                cursor-pointer border-b
                ${x?"bg-indigo-50/50 border-indigo-300 shadow-md z-10":e%2===0?"bg-white border-gray-100":"bg-gray-50/30 border-gray-100"}
                hover:bg-indigo-50/50
                ${n?"text-[11px]":""}
            `,onClick:()=>r(t),style:{transition:"transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease-in-out, background-color 0.3s ease-in-out, border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out",transform:x?"scale(1.01)":"scale(1)"},children:[s.jsx("td",{className:n?"px-2 py-2":"px-3 py-2",style:{width:n?"35%":"40%"},children:s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:`font-medium ${n?"text-sm":"text-base"} text-gray-900 leading-tight hover:text-indigo-600 transition-colors line-clamp-2`,children:t.audit_name||t.audit_type}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`${n?"h-5 w-5 text-[10px]":"h-6 w-6 text-xs"} rounded-full bg-indigo-100 flex items-center justify-center font-medium text-indigo-700 flex-shrink-0`,children:(t.audit_lead_name||t.audit_lead_email).charAt(0).toUpperCase()}),s.jsx("span",{className:`${n?"text-xs":"text-sm"} text-gray-600 truncate`,title:t.audit_lead_email,children:t.audit_lead_name||t.audit_lead_email.split("@")[0]})]})]})}),s.jsx("td",{className:n?"px-2 py-2":"px-3 py-2",style:{width:n?"65%":"60%"},children:s.jsxs("div",{className:"w-full relative overflow-visible",onClick:v=>v.stopPropagation(),children:[s.jsxs("div",{className:`flex justify-between items-center ${n?"text-xs mb-1.5":"text-sm mb-2"}`,children:[s.jsxs("span",{className:"font-medium text-gray-700",children:[Math.round(h),"%"]}),s.jsxs("span",{className:"text-gray-500",children:[m+1,"/",Hn.length]})]}),s.jsx("div",{className:`relative w-full bg-gray-100 rounded-full ${n?"h-2.5":"h-3"} overflow-hidden ${n?"":"cursor-pointer hover:bg-gray-200"} transition-colors`,onClick:v=>{if(v.stopPropagation(),!n){const b=v.currentTarget.getBoundingClientRect(),w=(v.clientX-b.left)/b.width*100,k=Math.min(Math.floor(w/(100/Hn.length)),Hn.length-1),N=Hn[k];N&&N!==t.status&&i(t.id,N)}},children:s.jsx("div",{className:`h-full rounded-full ${p} transition-all duration-700 ease-in-out`,style:{width:`${h}%`}})}),s.jsx("div",{className:`flex justify-between items-center ${n?"mt-2 gap-0.5":"mt-2 gap-1"} relative overflow-visible`,children:Hn.map((v,b)=>{const y=b<=m,w=b===m,k=Rl(v),N=v!==t.status,j=(a==null?void 0:a.planId)===t.id&&(a==null?void 0:a.stepIndex)===b;return s.jsxs("div",{className:"relative flex-1 flex justify-center overflow-visible",children:[s.jsx("button",{type:"button",onClick:S=>{S.stopPropagation(),N&&!n&&i(t.id,v)},onMouseEnter:()=>o({planId:t.id,stepIndex:b}),onMouseLeave:()=>o(null),className:`
                                            ${n?"text-[9px]":"text-xs"} text-center truncate px-0.5 w-full
                                            transition-all duration-200
                                            ${N&&!n?"cursor-pointer hover:opacity-80":"cursor-default"}
                                            ${!N||n?"opacity-50":""}
                                            ${w?"font-semibold text-gray-900":y?"text-gray-700":"text-gray-400"}
                                        `,children:s.jsx("div",{className:"flex flex-col items-center gap-0.5",children:s.jsx("div",{className:`
                                                    ${n?"w-2 h-2":"w-2.5 h-2.5"} rounded-full transition-all duration-200
                                                    ${y?k:"bg-gray-300"}
                                                    ${N&&!n?"hover:scale-125":""}
                                                `})})}),j&&s.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-gray-900 text-white text-[10px] px-2 py-1 rounded shadow-lg z-[100] whitespace-nowrap pointer-events-none",children:[v,s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]},v)})})]})})]},t.id)},m5=({plans:t,onView:e,onStatusChange:n,year:r,compact:i=!1,twoColumn:a=!1})=>{var N;const[o,c]=L.useState(null),u=L.useRef({}),[f,h]=L.useState(null),[p,m]=L.useState(null),x=L.useMemo(()=>[...t].sort((S,A)=>{const O=Hn.indexOf(S.status),M=Hn.indexOf(A.status);return O-M}),[t]),[v,b]=L.useState(null);L.useEffect(()=>{if(p!==null&&v){const j=setTimeout(()=>{n(v.id,v.status),b(null);const S=setTimeout(()=>{m(null)},1e3);return()=>clearTimeout(S)},700);return()=>clearTimeout(j)}},[p,v,n]);const y=(j,S)=>{m(j),b({id:j,status:S})};L.useEffect(()=>{const j=S=>{if(o!==null){const A=u.current[o];A&&!A.contains(S.target)&&c(null)}};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[o]);const w=r||(t&&t.length>0?(N=t[0])==null?void 0:N.audit_year:new Date().getFullYear()),k=i?2:3;return s.jsxs(Ie,{className:`w-full bg-white shadow-sm h-auto md:h-full flex flex-col ${i?"border-0 shadow-none":""}`,children:[!i&&s.jsx(Nt,{className:"pb-1.5 pt-3 px-4 border-b border-gray-100 flex-shrink-0",children:s.jsxs("h3",{className:"font-semibold text-base text-gray-900",children:[w," Audit Plan"]})}),s.jsx(Ik,{className:`p-0 relative md:flex-1 md:min-h-0 ${i?"pt-0":""} md:overflow-hidden`,children:s.jsx("div",{className:"md:overflow-x-auto md:overflow-y-auto md:h-full",children:a?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 md:divide-x md:divide-gray-200",children:[s.jsx("div",{className:"hidden md:block min-w-0",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"sticky top-0 bg-white z-10",children:s.jsxs("tr",{className:"bg-gray-50/50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:[s.jsx("th",{className:i?"px-2 py-2":"px-3 py-2",children:"Audit & Lead"}),s.jsx("th",{className:i?"px-2 py-2":"px-3 py-2",children:"Progress"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:x.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:2,className:`${i?"px-2 py-4":"px-3 py-8"} text-center text-gray-500`,children:"No audit plans found."})}):x.filter((j,S)=>S%2===0).map((j,S)=>t0(j,S*2,i,e,y,f,h,p,v))})]})}),s.jsx("div",{className:"hidden md:block min-w-0",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"sticky top-0 bg-white z-10",children:s.jsxs("tr",{className:"bg-gray-50/50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:[s.jsx("th",{className:i?"px-2 py-2":"px-3 py-2",children:"Audit & Lead"}),s.jsx("th",{className:i?"px-2 py-2":"px-3 py-2",children:"Progress"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:x.length===0?null:x.filter((j,S)=>S%2===1).map((j,S)=>t0(j,S*2+1,i,e,y,f,h,p,v))})]})}),s.jsx("div",{className:"md:hidden min-w-0 px-2 py-2 space-y-2",style:{transition:"all 0.8s cubic-bezier(0.4, 0, 0.2, 1)"},children:x.length===0?s.jsx("div",{className:"text-center py-6 text-gray-500 text-xs",children:"No audit plans found."}):x.map(j=>{const S=v&&v.id===j.id?v.status:j.status,A=Px(S),O=Rl(S),M=Hn.indexOf(S),z=p===j.id;return s.jsxs("div",{onClick:()=>e(j),className:`
                                                    bg-white rounded-lg border p-2.5 active:bg-gray-50 cursor-pointer
                                                    ${z?"border-indigo-400 shadow-lg ring-2 ring-indigo-200 bg-indigo-50/30 z-10":"border-gray-200"}
                                                `,style:{transition:"transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease-in-out, box-shadow 0.3s ease-in-out",transform:z?"scale(1.02)":"scale(1)"},children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-900 leading-tight mb-1 line-clamp-2",children:j.audit_name||j.audit_type}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"h-5 w-5 rounded-full bg-indigo-100 flex items-center justify-center font-semibold text-indigo-700 flex-shrink-0 text-[10px]",children:(j.audit_lead_name||j.audit_lead_email).charAt(0).toUpperCase()}),s.jsx("span",{className:"text-[10px] text-gray-600 truncate font-medium",children:j.audit_lead_name||j.audit_lead_email.split("@")[0]})]})]}),s.jsxs("div",{className:"flex-shrink-0 text-right",children:[s.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[Math.round(A),"%"]}),s.jsxs("div",{className:"text-[9px] text-gray-500 mt-0.5",children:[M+1,"/",Hn.length]})]})]}),s.jsx("div",{className:"relative w-full bg-gray-100 rounded-full h-2 overflow-hidden mb-2",onClick:I=>{I.stopPropagation();const D=I.currentTarget.getBoundingClientRect(),q=(I.clientX-D.left)/D.width*100,H=Math.min(Math.floor(q/(100/Hn.length)),Hn.length-1),G=Hn[H];G&&G!==j.status&&y(j.id,G)},children:s.jsx("div",{className:`h-full rounded-full ${O} transition-all duration-700 ease-in-out`,style:{width:`${A}%`}})}),s.jsx("div",{className:"flex justify-between items-center gap-0.5 relative",children:Hn.map((I,D)=>{const T=D<=M,q=D===M,H=Rl(I),G=I!==j.status,ee=(f==null?void 0:f.planId)===j.id&&(f==null?void 0:f.stepIndex)===D;return s.jsxs("div",{className:"relative flex-1 flex flex-col items-center",children:[s.jsxs("button",{type:"button",onClick:X=>{X.stopPropagation(),G&&y(j.id,I)},onTouchStart:()=>h({planId:j.id,stepIndex:D}),onTouchEnd:()=>h(null),className:`
                                                                        w-full flex flex-col items-center gap-0.5
                                                                        transition-all duration-200
                                                                        ${G?"active:opacity-80":""}
                                                                    `,children:[s.jsx("div",{className:`
                                                                            w-3 h-3 rounded-full transition-all duration-200
                                                                            ${T?H:"bg-gray-300"}
                                                                            ${q?"ring-1 ring-offset-0.5 ring-gray-400":""}
                                                                        `}),s.jsx("span",{className:`
                                                                        text-[8px] text-center leading-tight
                                                                        ${q?"font-bold text-gray-900":T?"text-gray-700 font-medium":"text-gray-400"}
                                                                    `,children:I.split(" ")[0]})]}),ee&&s.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-1.5 bg-gray-900 text-white text-[8px] px-1.5 py-0.5 rounded shadow-lg z-[100] whitespace-nowrap pointer-events-none",children:[I,s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-3 border-r-3 border-t-3 border-transparent border-t-gray-900"})]})]},I)})})]},j.id)})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"md:hidden px-2 py-2 space-y-2",style:{transition:"all 0.8s cubic-bezier(0.4, 0, 0.2, 1)"},children:x.length===0?s.jsx("div",{className:"text-center py-6 text-gray-500 text-xs",children:"No audit plans found for the selected year."}):x.map(j=>{const S=v&&v.id===j.id?v.status:j.status,A=Px(S),O=Rl(S),M=Hn.indexOf(S),z=p===j.id;return s.jsxs("div",{onClick:()=>e(j),className:`
                                                    bg-white rounded-lg border p-2.5 active:bg-gray-50 cursor-pointer
                                                    ${z?"border-indigo-400 shadow-lg ring-2 ring-indigo-200 bg-indigo-50/30 z-10":"border-gray-200"}
                                                `,style:{transition:"transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease-in-out, box-shadow 0.3s ease-in-out",transform:z?"scale(1.02)":"scale(1)"},children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-900 leading-tight mb-1 line-clamp-2",children:j.audit_name||j.audit_type}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"h-5 w-5 rounded-full bg-indigo-100 flex items-center justify-center font-semibold text-indigo-700 flex-shrink-0 text-[10px]",children:(j.audit_lead_name||j.audit_lead_email).charAt(0).toUpperCase()}),s.jsx("span",{className:"text-[10px] text-gray-600 truncate font-medium",children:j.audit_lead_name||j.audit_lead_email.split("@")[0]})]})]}),s.jsxs("div",{className:"flex-shrink-0 text-right",children:[s.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[Math.round(A),"%"]}),s.jsxs("div",{className:"text-[9px] text-gray-500 mt-0.5",children:[M+1,"/",Hn.length]})]})]}),s.jsx("div",{className:"relative w-full bg-gray-100 rounded-full h-2 overflow-hidden mb-2",onClick:I=>{I.stopPropagation();const D=I.currentTarget.getBoundingClientRect(),q=(I.clientX-D.left)/D.width*100,H=Math.min(Math.floor(q/(100/Hn.length)),Hn.length-1),G=Hn[H];G&&G!==j.status&&y(j.id,G)},children:s.jsx("div",{className:`h-full rounded-full ${O} transition-all duration-700 ease-in-out`,style:{width:`${A}%`}})}),s.jsx("div",{className:"flex justify-between items-center gap-0.5 relative",children:Hn.map((I,D)=>{const T=D<=M,q=D===M,H=Rl(I),G=I!==j.status,ee=(f==null?void 0:f.planId)===j.id&&(f==null?void 0:f.stepIndex)===D;return s.jsxs("div",{className:"relative flex-1 flex flex-col items-center",children:[s.jsxs("button",{type:"button",onClick:X=>{X.stopPropagation(),G&&y(j.id,I)},onTouchStart:()=>h({planId:j.id,stepIndex:D}),onTouchEnd:()=>h(null),className:`
                                                                        w-full flex flex-col items-center gap-0.5
                                                                        transition-all duration-200
                                                                        ${G?"active:opacity-80":""}
                                                                    `,children:[s.jsx("div",{className:`
                                                                            w-3 h-3 rounded-full transition-all duration-200
                                                                            ${T?H:"bg-gray-300"}
                                                                            ${q?"ring-1 ring-offset-0.5 ring-gray-400":""}
                                                                        `}),s.jsx("span",{className:`
                                                                        text-[8px] text-center leading-tight
                                                                        ${q?"font-bold text-gray-900":T?"text-gray-700 font-medium":"text-gray-400"}
                                                                    `,children:I.split(" ")[0]})]}),ee&&s.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-1.5 bg-gray-900 text-white text-[8px] px-1.5 py-0.5 rounded shadow-lg z-[100] whitespace-nowrap pointer-events-none",children:[I,s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-3 border-r-3 border-t-3 border-transparent border-t-gray-900"})]})]},I)})})]},j.id)})}),s.jsxs("table",{className:"hidden md:table w-full",children:[s.jsx("thead",{className:"sticky top-0 bg-white z-10",children:s.jsxs("tr",{className:"bg-gray-50/50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:[s.jsx("th",{className:i?"px-2 py-2":"px-3 py-2",children:"Audit & Lead"}),s.jsx("th",{className:i?"px-2 py-2":"px-3 py-2",children:"Progress"}),!i&&s.jsx("th",{className:"px-3 py-2 text-center",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:x.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:k,className:`${i?"px-2 py-4":"px-3 py-8"} text-center text-gray-500`,children:"No audit plans found for the selected year."})}):x.map((j,S)=>t0(j,S,i,e,y,f,h,p,v))})]})]})})})]})};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Sw=t=>{const e=CD(t);return e.charAt(0).toUpperCase()+e.slice(1)},g5=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),AD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ED={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>L.createElement("svg",{ref:u,...ED,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:g5("lucide",i),...!a&&!AD(c)&&{"aria-hidden":"true"},...c},[...o.map(([f,h])=>L.createElement(f,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=(t,e)=>{const n=L.forwardRef(({className:r,...i},a)=>L.createElement(OD,{ref:a,iconNode:e,className:g5(`lucide-${SD(Sw(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Sw(t),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],MD=yr("activity",LD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],x5=yr("calendar",TD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ry=yr("chevron-down",DD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],RD=yr("chevron-left",PD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Cw=yr("chevron-right",ID);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],y5=yr("circle-check",FD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],BD=yr("circle-play",zD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Aw=yr("circle",qD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],WD=yr("clock",UD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]],VD=yr("construction",HD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],YD=yr("file-text",$D);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M5 3v14",key:"9nsxs2"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"M19 3v18",key:"1sk56x"}]],GD=yr("kanban",KD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],QD=yr("layout-list",XD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],JD=yr("plus",ZD);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],tP=yr("square-pen",eP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Rd=yr("user",nP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],sP=yr("users",rP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],v5=yr("x",iP),b5=6048e5,aP=864e5,w5=6e4,j5=36e5,Pf=43200,Ew=1440,Ow=Symbol.for("constructDateFrom");function hs(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Ow in t?t[Ow](e):t instanceof Date?new t.constructor(e):new Date(e)}function vn(t,e){return hs(e||t,t)}function oP(t,e,n){const r=vn(t,n==null?void 0:n.in);return isNaN(e)?hs(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Iy(t,e,n){const r=vn(t,n==null?void 0:n.in);if(isNaN(e))return hs(t,NaN);if(!e)return r;const i=r.getDate(),a=hs(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const o=a.getDate();return i>=o?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}let lP={};function gc(){return lP}function Ka(t,e){var c,u,f,h;const n=gc(),r=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,i=vn(t,e==null?void 0:e.in),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function mh(t,e){return Ka(t,{...e,weekStartsOn:1})}function _5(t,e){const n=vn(t,e==null?void 0:e.in),r=n.getFullYear(),i=hs(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=mh(i),o=hs(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const c=mh(o);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function gh(t){const e=vn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function eo(t,...e){const n=hs.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function Yi(t,e){const n=vn(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function k5(t,e,n){const[r,i]=eo(n==null?void 0:n.in,t,e),a=Yi(r),o=Yi(i),c=+a-gh(a),u=+o-gh(o);return Math.round((c-u)/aP)}function cP(t,e){const n=_5(t,e),r=hs(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),mh(r)}function N5(t,e,n){return oP(t,e*7,n)}function S5(t,e,n){return Iy(t,e*12,n)}function Yf(t,e){const n=+vn(t)-+vn(e);return n<0?-1:n>0?1:n}function _a(t,e,n){const[r,i]=eo(n==null?void 0:n.in,t,e);return+Yi(r)==+Yi(i)}function dP(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function uP(t){return!(!dP(t)&&typeof t!="number"||isNaN(+vn(t)))}function fP(t,e,n){const[r,i]=eo(n==null?void 0:n.in,t,e),a=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return a*12+o}function Lw(t,e,n){const[r,i]=eo(n==null?void 0:n.in,t,e),a=Mw(r,i),o=Math.abs(k5(r,i));r.setDate(r.getDate()-a*o);const c=+(Mw(r,i)===-a),u=a*(o-c);return u===0?0:u}function Mw(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function hP(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function pP(t,e){return+vn(t)-+vn(e)}function mP(t,e){const n=vn(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function Rx(t,e){const n=vn(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function gP(t,e){const n=vn(t,e==null?void 0:e.in);return+mP(n,e)==+Rx(n,e)}function xP(t,e,n){const[r,i,a]=eo(n==null?void 0:n.in,t,t,e),o=Yf(i,a),c=Math.abs(fP(i,a));if(c<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*c);let u=Yf(i,a)===-o;gP(r)&&c===1&&Yf(r,a)===1&&(u=!1);const f=o*(c-+u);return f===0?0:f}function yP(t,e,n){const r=pP(t,e)/1e3;return hP(n==null?void 0:n.roundingMethod)(r)}function C5(t,e){const[n,r]=eo(t,e.start,e.end);return{start:n,end:r}}function Tw(t,e){const{start:n,end:r}=C5(e==null?void 0:e.in,t);let i=+n>+r;const a=i?+n:+r,o=i?r:n;o.setHours(0,0,0,0);let c=1;const u=[];for(;+o<=a;)u.push(hs(n,o)),o.setDate(o.getDate()+c),o.setHours(0,0,0,0);return i?u.reverse():u}function vP(t,e){const{start:n,end:r}=C5(e==null?void 0:e.in,t);let i=+n>+r;const a=i?+n:+r,o=i?r:n;o.setHours(0,0,0,0),o.setDate(1);let c=1;const u=[];for(;+o<=a;)u.push(hs(n,o)),o.setMonth(o.getMonth()+c);return i?u.reverse():u}function Dw(t,e){const n=vn(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function bP(t,e){const n=vn(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function A5(t,e){const n=vn(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function n0(t,e){var c,u,f,h;const n=gc(),r=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,i=vn(t,e==null?void 0:e.in),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}const wP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jP=(t,e,n)=>{let r;const i=wP[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function r0(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const _P={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},NP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},SP={date:r0({formats:_P,defaultWidth:"full"}),time:r0({formats:kP,defaultWidth:"full"}),dateTime:r0({formats:NP,defaultWidth:"full"})},CP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},AP=(t,e,n,r)=>CP[t];function ad(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):o;i=t.formattingValues[c]||t.formattingValues[o]}else{const o=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[c]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const EP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},OP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},LP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},MP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},TP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},DP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},PP=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},RP={ordinalNumber:PP,era:ad({values:EP,defaultWidth:"wide"}),quarter:ad({values:OP,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ad({values:LP,defaultWidth:"wide"}),day:ad({values:MP,defaultWidth:"wide"}),dayPeriod:ad({values:TP,defaultWidth:"wide",formattingValues:DP,defaultFormattingWidth:"wide"})};function od(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?FP(c,p=>p.test(o)):IP(c,p=>p.test(o));let f;f=t.valueCallback?t.valueCallback(u):u,f=n.valueCallback?n.valueCallback(f):f;const h=e.slice(o.length);return{value:f,rest:h}}}function IP(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function FP(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function zP(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const c=e.slice(i.length);return{value:o,rest:c}}}const BP=/^(\d+)(th|st|nd|rd)?/i,qP=/\d+/i,UP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},WP={any:[/^b/i,/^(a|c)/i]},HP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},VP={any:[/1/i,/2/i,/3/i,/4/i]},$P={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},YP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},KP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},GP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},XP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},QP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ZP={ordinalNumber:zP({matchPattern:BP,parsePattern:qP,valueCallback:t=>parseInt(t,10)}),era:od({matchPatterns:UP,defaultMatchWidth:"wide",parsePatterns:WP,defaultParseWidth:"any"}),quarter:od({matchPatterns:HP,defaultMatchWidth:"wide",parsePatterns:VP,defaultParseWidth:"any",valueCallback:t=>t+1}),month:od({matchPatterns:$P,defaultMatchWidth:"wide",parsePatterns:YP,defaultParseWidth:"any"}),day:od({matchPatterns:KP,defaultMatchWidth:"wide",parsePatterns:GP,defaultParseWidth:"any"}),dayPeriod:od({matchPatterns:XP,defaultMatchWidth:"any",parsePatterns:QP,defaultParseWidth:"any"})},E5={code:"en-US",formatDistance:jP,formatLong:SP,formatRelative:AP,localize:RP,match:ZP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function JP(t,e){const n=vn(t,e==null?void 0:e.in);return k5(n,A5(n))+1}function eR(t,e){const n=vn(t,e==null?void 0:e.in),r=+mh(n)-+cP(n);return Math.round(r/b5)+1}function O5(t,e){var h,p,m,x;const n=vn(t,e==null?void 0:e.in),r=n.getFullYear(),i=gc(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(m=i.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??1,o=hs((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const c=Ka(o,e),u=hs((e==null?void 0:e.in)||t,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const f=Ka(u,e);return+n>=+c?r+1:+n>=+f?r:r-1}function tR(t,e){var c,u,f,h;const n=gc(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,i=O5(t,e),a=hs((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Ka(a,e)}function nR(t,e){const n=vn(t,e==null?void 0:e.in),r=+Ka(n,e)-+tR(n,e);return Math.round(r/b5)+1}function yn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ka={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return yn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):yn(n+1,2)},d(t,e){return yn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return yn(t.getHours()%12||12,e.length)},H(t,e){return yn(t.getHours(),e.length)},m(t,e){return yn(t.getMinutes(),e.length)},s(t,e){return yn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return yn(i,e.length)}},Dl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Pw={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ka.y(t,e)},Y:function(t,e,n,r){const i=O5(t,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return yn(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):yn(a,e.length)},R:function(t,e){const n=_5(t);return yn(n,e.length)},u:function(t,e){const n=t.getFullYear();return yn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return yn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return yn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ka.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return yn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=nR(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):yn(i,e.length)},I:function(t,e,n){const r=eR(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):yn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ka.d(t,e)},D:function(t,e,n){const r=JP(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):yn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return yn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return yn(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return yn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Dl.noon:r===0?i=Dl.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Dl.evening:r>=12?i=Dl.afternoon:r>=4?i=Dl.morning:i=Dl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ka.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ka.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):yn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):yn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ka.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ka.s(t,e)},S:function(t,e){return ka.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Iw(r);case"XXXX":case"XX":return Oo(r);case"XXXXX":case"XXX":default:return Oo(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Iw(r);case"xxxx":case"xx":return Oo(r);case"xxxxx":case"xxx":default:return Oo(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Rw(r,":");case"OOOO":default:return"GMT"+Oo(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Rw(r,":");case"zzzz":default:return"GMT"+Oo(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return yn(r,e.length)},T:function(t,e,n){return yn(+t,e.length)}};function Rw(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+yn(a,2)}function Iw(t,e){return t%60===0?(t>0?"-":"+")+yn(Math.abs(t)/60,2):Oo(t,e)}function Oo(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=yn(Math.trunc(r/60),2),a=yn(r%60,2);return n+i+e+a}const Fw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},L5=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},rR=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Fw(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Fw(r,e)).replace("{{time}}",L5(i,e))},sR={p:L5,P:rR},iR=/^D+$/,aR=/^Y+$/,oR=["D","DD","YY","YYYY"];function lR(t){return iR.test(t)}function cR(t){return aR.test(t)}function dR(t,e,n){const r=uR(t,e,n);if(console.warn(r),oR.includes(t))throw new RangeError(r)}function uR(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const fR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pR=/^'([^]*?)'?$/,mR=/''/g,gR=/[a-zA-Z]/;function vs(t,e,n){var h,p,m,x;const r=gc(),i=r.locale??E5,a=r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=r.weekStartsOn??((x=(m=r.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??0,c=vn(t,n==null?void 0:n.in);if(!uP(c))throw new RangeError("Invalid time value");let u=e.match(hR).map(v=>{const b=v[0];if(b==="p"||b==="P"){const y=sR[b];return y(v,i.formatLong)}return v}).join("").match(fR).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:xR(v)};if(Pw[b])return{isToken:!0,value:v};if(b.match(gR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(u=i.localize.preprocessor(c,u));const f={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return u.map(v=>{if(!v.isToken)return v.value;const b=v.value;(cR(b)||lR(b))&&dR(b,e,String(t));const y=Pw[b[0]];return y(c,b,i.localize,f)}).join("")}function xR(t){const e=t.match(pR);return e?e[1].replace(mR,"'"):t}function yR(t,e,n){const r=gc(),i=(n==null?void 0:n.locale)??r.locale??E5,a=2520,o=Yf(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[u,f]=eo(n==null?void 0:n.in,...o>0?[e,t]:[t,e]),h=yP(f,u),p=(gh(f)-gh(u))/1e3,m=Math.round((h-p)/60);let x;if(m<2)return n!=null&&n.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,c):h<10?i.formatDistance("lessThanXSeconds",10,c):h<20?i.formatDistance("lessThanXSeconds",20,c):h<40?i.formatDistance("halfAMinute",0,c):h<60?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",1,c):m===0?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",m,c);if(m<45)return i.formatDistance("xMinutes",m,c);if(m<90)return i.formatDistance("aboutXHours",1,c);if(m<Ew){const v=Math.round(m/60);return i.formatDistance("aboutXHours",v,c)}else{if(m<a)return i.formatDistance("xDays",1,c);if(m<Pf){const v=Math.round(m/Ew);return i.formatDistance("xDays",v,c)}else if(m<Pf*2)return x=Math.round(m/Pf),i.formatDistance("aboutXMonths",x,c)}if(x=xP(f,u),x<12){const v=Math.round(m/Pf);return i.formatDistance("xMonths",v,c)}else{const v=x%12,b=Math.trunc(x/12);return v<3?i.formatDistance("aboutXYears",b,c):v<9?i.formatDistance("overXYears",b,c):i.formatDistance("almostXYears",b+1,c)}}function s0(t,e,n){const[r,i]=eo(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function vR(t,e,n){const r=+vn(t,n==null?void 0:n.in),[i,a]=[+vn(e.start,n==null?void 0:n.in),+vn(e.end,n==null?void 0:n.in)].sort((o,c)=>o-c);return r>=i&&r<=a}function M5(t,e){const n=()=>hs(e==null?void 0:e.in,NaN),i=_R(t);let a;if(i.date){const f=kR(i.date,2);a=NR(f.restDateString,f.year)}if(!a||isNaN(+a))return n();const o=+a;let c=0,u;if(i.time&&(c=SR(i.time),isNaN(c)))return n();if(i.timezone){if(u=CR(i.timezone),isNaN(u))return n()}else{const f=new Date(o+c),h=vn(0,e==null?void 0:e.in);return h.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),h.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),h}return vn(o+c+u,e==null?void 0:e.in)}const Rf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},bR=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,wR=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,jR=/^([+-])(\d{2})(?::?(\d{2}))?$/;function _R(t){const e={},n=t.split(Rf.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Rf.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Rf.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=Rf.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function kR(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?i:a*100,restDateString:t.slice((r[1]||r[2]).length)}}function NR(t,e){if(e===null)return new Date(NaN);const n=t.match(bR);if(!n)return new Date(NaN);const r=!!n[4],i=ld(n[1]),a=ld(n[2])-1,o=ld(n[3]),c=ld(n[4]),u=ld(n[5])-1;if(r)return MR(e,c,u)?AR(e,c,u):new Date(NaN);{const f=new Date(0);return!OR(e,a,o)||!LR(e,i)?new Date(NaN):(f.setUTCFullYear(e,a,Math.max(i,o)),f)}}function ld(t){return t?parseInt(t):1}function SR(t){const e=t.match(wR);if(!e)return NaN;const n=i0(e[1]),r=i0(e[2]),i=i0(e[3]);return TR(n,r,i)?n*j5+r*w5+i*1e3:NaN}function i0(t){return t&&parseFloat(t.replace(",","."))||0}function CR(t){if(t==="Z")return 0;const e=t.match(jR);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return DR(r,i)?n*(r*j5+i*w5):NaN}function AR(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,a=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+a),r}const ER=[31,null,31,30,31,30,31,31,30,31,30,31];function T5(t){return t%400===0||t%4===0&&t%100!==0}function OR(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(ER[e]||(T5(t)?29:28))}function LR(t,e){return e>=1&&e<=(T5(t)?366:365)}function MR(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function TR(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function DR(t,e){return e>=0&&e<=59}function PR(t,e,n){return Iy(t,-1,n)}function RR(t,e,n){return N5(t,-1,n)}function IR(t,e,n){return S5(t,-1,n)}const D5=({plan:t,onClose:e,onEdit:n,viewOnly:r=!1})=>{const[i,a]=L.useState("details"),{data:o,isLoading:c}=jD(t.id);return jt.useEffect(()=>{const u=f=>{f.key==="Escape"&&e()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[e]),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm md:items-center md:justify-center",children:s.jsxs("div",{className:"bg-white md:rounded-xl shadow-2xl w-full h-full md:h-auto md:max-w-3xl md:max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 md:p-6 border-b border-gray-100 bg-white",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-1 flex-wrap",children:[s.jsx("h2",{className:"text-base md:text-xl font-bold text-gray-900 truncate",children:t.audit_name||t.audit_type}),s.jsx(tt,{variant:"purple",className:"text-[10px] md:text-xs px-1.5 md:px-2 py-0.5 md:py-1",children:t.audit_year}),s.jsx(tt,{variant:t.status==="Completed"?"success":t.status==="Planned"?"info":"warning",className:"text-[10px] md:text-xs px-1.5 md:px-2 py-0.5 md:py-1",children:t.status})]}),s.jsxs("p",{className:"text-xs md:text-sm text-gray-500 truncate",children:[t.audit_type,"  ",t.department,"  ",t.process||"No Process"]})]}),s.jsx("button",{onClick:e,className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-full transition-colors flex-shrink-0 ml-2",children:s.jsx(v5,{className:"h-4 w-4 md:h-5 md:w-5 text-gray-500"})})]}),s.jsxs("div",{className:"flex border-b border-gray-100 px-3 md:px-6",children:[s.jsx("button",{className:`py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium border-b-2 transition-colors ${i==="details"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>a("details"),children:"Details"}),s.jsx("button",{className:`py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium border-b-2 transition-colors ${i==="history"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>a("history"),children:"History"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-6 bg-gray-50/50",children:i==="details"?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-6",children:[s.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-lg border border-gray-100 shadow-sm",children:[s.jsxs("h3",{className:"text-xs md:text-sm font-semibold text-gray-900 mb-3 md:mb-4 flex items-center gap-1.5 md:gap-2",children:[s.jsx(Rd,{className:"h-3.5 w-3.5 md:h-4 md:w-4 text-indigo-500"}),"Responsibility"]}),s.jsxs("div",{className:"space-y-2.5 md:space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Audit Lead"}),s.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.audit_lead_name||t.audit_lead_email}),s.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-0.5",children:t.audit_lead_email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Department"}),s.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.department||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Process"}),s.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.process||"-"})]})]})]}),s.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-lg border border-gray-100 shadow-sm",children:[s.jsxs("h3",{className:"text-xs md:text-sm font-semibold text-gray-900 mb-3 md:mb-4 flex items-center gap-1.5 md:gap-2",children:[s.jsx(x5,{className:"h-3.5 w-3.5 md:h-4 md:w-4 text-indigo-500"}),"Timeline"]}),s.jsxs("div",{className:"space-y-2.5 md:space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Start Date"}),s.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.start_date?vs(new Date(t.start_date),"MMM d, yyyy"):"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"End Date"}),s.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.end_date?vs(new Date(t.end_date),"MMM d, yyyy"):"-"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Duration"}),s.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.audit_duration_weeks?`${t.audit_duration_weeks} weeks`:"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Report Release Date"}),s.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 mt-0.5",children:t.report_release_date?vs(new Date(t.report_release_date),"MMM d, yyyy"):"-"})]})]})]}),s.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-lg border border-gray-100 shadow-sm md:col-span-2",children:[s.jsxs("h3",{className:"text-xs md:text-sm font-semibold text-gray-900 mb-3 md:mb-4 flex items-center gap-1.5 md:gap-2",children:[s.jsx(MD,{className:"h-3.5 w-3.5 md:h-4 md:w-4 text-indigo-500"}),"Outcome"]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs text-gray-500 uppercase tracking-wider",children:"Report Rating"}),s.jsx("div",{className:"mt-1",children:t.audit_report_rating?s.jsx(tt,{variant:"default",className:"text-[10px] md:text-xs",children:t.audit_report_rating}):s.jsx("span",{className:"text-xs md:text-sm text-gray-400",children:"Not rated yet"})})]})]})]}):s.jsx("div",{className:"space-y-2.5 md:space-y-4",children:c?s.jsx("div",{className:"text-center py-6 md:py-8 text-gray-500 text-xs md:text-sm",children:"Loading history..."}):o&&o.length>0?o.map(u=>s.jsxs("div",{className:"flex gap-2.5 md:gap-4 bg-white p-3 md:p-4 rounded-lg border border-gray-100 shadow-sm",children:[s.jsx("div",{className:`
                      w-6 h-6 md:w-8 md:h-8 rounded-full flex items-center justify-center flex-shrink-0
                      ${u.event_type==="CREATE"?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"}
                    `,children:u.event_type==="CREATE"?s.jsx(YD,{className:"h-3 w-3 md:h-4 md:w-4"}):s.jsx(tP,{className:"h-3 w-3 md:h-4 md:w-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-start gap-2",children:[s.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900",children:u.event_type==="CREATE"?"Audit Plan Created":`Updated ${u.field_name}`}),s.jsx("span",{className:"text-[10px] md:text-xs text-gray-400 flex-shrink-0",children:vs(new Date(u.changed_at),"MMM d, HH:mm")})]}),s.jsxs("p",{className:"text-[10px] md:text-xs text-gray-500 mt-0.5",children:["by ",u.changed_by]}),u.event_type==="UPDATE"&&s.jsx("div",{className:"mt-1.5 md:mt-2 text-[10px] md:text-xs bg-gray-50 p-1.5 md:p-2 rounded border border-gray-100",children:s.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 flex-wrap",children:[s.jsx("span",{className:"text-red-500 line-through",children:u.old_value||"Empty"}),s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{className:"text-green-600 font-medium",children:u.new_value||"Empty"})]})})]})]},u.id)):s.jsx("div",{className:"text-center py-6 md:py-8 text-gray-500 text-xs md:text-sm",children:"No history available"})})}),s.jsxs("div",{className:"p-3 md:p-6 border-t border-gray-100 bg-white flex flex-col md:flex-row gap-2 md:gap-0 md:justify-end",children:[!r&&s.jsx(ze,{variant:"outline",onClick:()=>n(t),className:"w-full md:w-auto md:mr-2 text-xs md:text-sm py-2 md:py-1.5",children:"Edit Audit Detail"}),s.jsx(ze,{variant:"primary",onClick:e,className:"w-full md:w-auto text-xs md:text-sm py-2 md:py-1.5",children:"Close"})]})]})})};function FR({selectedLead:t="",selectedYear:e="2025",onYearChange:n,availableYears:r=[],isYearDropdownOpen:i=!1,onYearDropdownToggle:a,yearDropdownRef:o}){const c=L.useRef(null),u=o||c,[f,h]=L.useState(new Set(["all"])),[p,m]=L.useState(void 0),x=e?parseInt(e):new Date().getFullYear(),{data:v=[],isLoading:b}=Py(e),y=O=>{h(M=>{const z=new Set(M);if(O==="all")if(z.has("all")){z.clear();const I=N[0];I&&z.add(I)}else z.clear(),z.add("all");else z.delete("all"),z.has(O)?(z.delete(O),z.size===0&&z.add("all")):(z.add(O),z.size===N.length&&(z.clear(),z.add("all")));return z})},w=O=>f.has("all")?!0:f.has(O),k=f.has("all"),N=L.useMemo(()=>{const O=new Set;return v.forEach(M=>{const z=M.audit_lead_name||M.audit_lead_email;z&&O.add(z)}),Array.from(O).sort()},[v]),j=L.useMemo(()=>{let O=v;return t&&t!==""&&(O=v.filter(M=>{const z=M.audit_lead_name||M.audit_lead_email;return z&&z.toLowerCase().includes(t.toLowerCase())})),f.has("all")?O:O.filter(M=>{const z=M.audit_lead_name||M.audit_lead_email;return z&&f.has(z)})},[v,t,f]),S=O=>{m(O)},A=()=>{console.log("Status changes are not available from dashboard. Please use the Annual Audit Plan page.")};return L.useEffect(()=>{const O=M=>{M.key==="Escape"&&p&&m(void 0)};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[p]),b?s.jsx("div",{className:"flex items-center justify-center h-[400px]",children:s.jsx(Ct,{size:"lg"})}):!j||j.length===0?s.jsx("div",{className:"flex items-center justify-center h-[400px] text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("p",{className:"text-sm",children:["No audit plans found for ",e||"selected year"]})]})}):s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center sm:justify-between px-2 md:px-2 pb-2 border-b border-gray-200 flex-shrink-0 gap-2 sm:gap-3",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 bg-white/95 backdrop-blur-sm px-2 py-1.5 rounded-lg border border-gray-200 shadow-sm",children:[s.jsx("span",{className:"text-[10px] md:text-[9px] text-gray-600 font-medium whitespace-nowrap",children:"Audit Lead:"}),k?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>y("all"),className:`
                  hidden md:flex relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1 flex-shrink-0
                  ${f.has("all")?"bg-indigo-600":"bg-gray-300"}
                `,children:s.jsx("span",{className:`
                  inline-block h-3.5 w-3.5 transform rounded-full bg-white transition-transform shadow-sm
                  ${f.has("all")?"translate-x-5":"translate-x-0.5"}
                `})}),s.jsx("button",{onClick:()=>y("all"),className:`
                  md:hidden px-2.5 py-1 rounded-full text-[10px] font-medium transition-all duration-200
                  focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1
                  ${f.has("all")?"bg-indigo-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}
                `,children:"All"}),s.jsx("span",{className:"hidden md:inline text-[9px] text-gray-600 font-medium whitespace-nowrap",children:"All"})]}):s.jsx(s.Fragment,{children:N.map(O=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>y(O),className:`
                      hidden md:flex relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1
                      ${w(O)?"bg-indigo-600":"bg-gray-300"}
                    `,children:s.jsx("span",{className:`
                      inline-block h-3.5 w-3.5 transform rounded-full bg-white transition-transform shadow-sm
                      ${w(O)?"translate-x-5":"translate-x-0.5"}
                    `})}),s.jsx("span",{className:"hidden md:inline text-[9px] text-gray-600 whitespace-nowrap",children:O}),s.jsx("button",{onClick:()=>y(O),className:`
                      md:hidden px-2.5 py-1 rounded-full text-[10px] font-medium transition-all duration-200 whitespace-nowrap
                      focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1
                      ${w(O)?"bg-indigo-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}
                    `,children:O})]},O))})]}),n&&r.length>0&&s.jsxs("div",{className:"relative",ref:u,children:[s.jsxs("button",{onClick:()=>a&&a(!i),className:"flex items-center gap-2 px-3 py-1.5 bg-white border border-gray-300 rounded-lg hover:border-indigo-400 hover:bg-indigo-50/30 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1 shadow-sm",children:[s.jsx("span",{className:"text-xs md:text-sm font-semibold text-gray-700 md:text-gray-900",children:e}),s.jsx(Ry,{className:`h-3 w-3 md:h-4 md:w-4 text-gray-500 transition-transform duration-200 ${i?"rotate-180":""}`})]}),i&&s.jsx("div",{className:"absolute top-full right-0 mt-1 w-24 bg-white border border-gray-200 rounded-lg shadow-lg z-50 overflow-hidden",children:r.map(O=>s.jsx("button",{onClick:()=>{n(O.toString()),a&&a(!1)},className:`
                      w-full px-3 py-2 text-left text-xs transition-colors
                      ${e===O.toString()?"bg-indigo-50 text-indigo-700 font-semibold":"text-gray-700 hover:bg-gray-50"}
                    `,children:O},O))})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsx(m5,{plans:j,onView:S,onStatusChange:A,year:x,compact:!0,twoColumn:!0})}),p&&s.jsx(D5,{plan:p,onClose:()=>m(void 0),onEdit:()=>{window.location.href=`/annual-audit-plan?selectedPlanId=${p.id}&selectedYear=${x}`},viewOnly:!0})]})}const zw=({title:t,subtitle:e,data:n,height:r=300,loading:i=!1,options:a={},className:o,wrapperPadding:c})=>{const f={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{padding:15,usePointStyle:!0,font:{size:12,weight:"bold"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1}},scales:{r:{beginAtZero:!0,min:0,max:5,ticks:{stepSize:1,font:{size:10},backdropColor:"transparent"},pointLabels:{display:!0,font:{size:11,weight:"bold"},color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"},angleLines:{color:"rgba(0, 0, 0, 0.1)"}}}},...a};return s.jsx(Bh,{title:t,subtitle:e,loading:i,className:o,padding:c,children:s.jsx("div",{style:{height:`${r}px`,width:"100%"},children:s.jsx(yD,{data:n,options:f})})})},Bw=["Critical","High","Medium","Low"],qw=t=>{const e={Critical:"bg-gray-900",High:"bg-red-500",Medium:"bg-orange-500",Low:"bg-yellow-500",Unassigned:"bg-gray-400"};return e[t]||e.Unassigned};function zR({data:t,isLoading:e,onCellClick:n}){return e?s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-12 bg-gray-200 rounded"}),s.jsx("div",{className:"h-12 bg-gray-200 rounded"}),s.jsx("div",{className:"h-12 bg-gray-200 rounded"})]}):!t||t.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No data available"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden md:block overflow-auto",style:{maxHeight:"350px"},children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-[9.6px] py-[6.4px] text-left text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"Year"}),s.jsx("th",{className:"px-[9.6px] py-[6.4px] text-left text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"Audit Name"}),s.jsx("th",{className:"px-[9.6px] py-[6.4px] text-center text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"Critical"}),s.jsx("th",{className:"px-[9.6px] py-[6.4px] text-center text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"High"}),s.jsx("th",{className:"px-[9.6px] py-[6.4px] text-center text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"Medium"}),s.jsx("th",{className:"px-[9.6px] py-[6.4px] text-center text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"Low"}),s.jsx("th",{className:"px-[9.6px] py-[6.4px] text-center text-[9.6px] font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((r,i)=>{const a=`${r.auditYear}-${r.auditName}-${i}`,o=r.riskBreakdown||{};return s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-[9.6px] py-[6.4px] whitespace-nowrap font-medium text-gray-900",children:r.auditYear||"-"}),s.jsx("td",{className:"px-[9.6px] py-[6.4px] text-gray-900",children:s.jsx("div",{className:"max-w-xs truncate",title:r.auditName,children:r.auditName||"-"})}),Bw.map(c=>{const u=o[c],f=(u==null?void 0:u.total)||0,h=(u==null?void 0:u.completed)||0;return s.jsx("td",{className:"px-[9.6px] py-[6.4px] text-center",children:f>0?s.jsxs("button",{onClick:()=>n==null?void 0:n(r.auditYear,r.auditName,c),className:"inline-flex items-center gap-[3.2px] hover:bg-purple-50 hover:underline px-[6.4px] py-[3.2px] rounded transition-all cursor-pointer group",title:`Click to view ${f} ${c} actions`,children:[s.jsx("span",{className:F("w-1.5 h-1.5 rounded-full",qw(c))}),s.jsx("span",{className:"font-medium text-gray-900 group-hover:text-purple-600",children:f}),s.jsxs("span",{className:"text-[9.6px] text-gray-500",children:["(",h,")"]})]}):s.jsx("span",{className:"text-gray-400",children:"-"})},c)}),s.jsx("td",{className:"px-[9.6px] py-[6.4px] text-center",children:s.jsx("button",{onClick:()=>n==null?void 0:n(r.auditYear,r.auditName),className:"font-semibold text-gray-900 hover:text-purple-600 hover:underline transition-all cursor-pointer px-3 py-1 hover:bg-purple-50 rounded",title:`Click to view all ${r.total} actions`,children:r.total})})]},a)})})]})}),s.jsx("div",{className:"md:hidden overflow-x-auto -mx-6 px-6",children:s.jsx("div",{className:"min-w-full inline-block",children:s.jsxs("table",{className:"min-w-full text-[10px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-gray-300",children:[s.jsx("th",{className:"text-left py-1.5 pr-1.5 font-semibold text-gray-700 sticky left-0 bg-white z-10 min-w-[120px]",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[8px] font-normal text-gray-500",children:"Year"}),s.jsx("span",{className:"text-[10px]",children:"Audit Name"})]})}),s.jsx("th",{className:"text-center py-1.5 px-0.5 font-semibold text-gray-900 bg-gray-900 text-white min-w-[36px] text-[9px]",children:"C"}),s.jsx("th",{className:"text-center py-1.5 px-0.5 font-semibold text-red-600 bg-red-50 min-w-[36px] text-[9px]",children:"H"}),s.jsx("th",{className:"text-center py-1.5 px-0.5 font-semibold text-orange-600 bg-orange-50 min-w-[36px] text-[9px]",children:"M"}),s.jsx("th",{className:"text-center py-1.5 px-0.5 font-semibold text-yellow-600 bg-yellow-50 min-w-[36px] text-[9px]",children:"L"}),s.jsx("th",{className:"text-center py-1.5 px-0.5 font-semibold text-gray-700 bg-gray-100 min-w-[36px] text-[9px]",children:"T"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map((r,i)=>{const a=`mobile-${r.auditYear}-${r.auditName}-${i}`,o=r.riskBreakdown||{};return s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"py-1.5 pr-1.5 sticky left-0 bg-white z-10 border-r border-gray-200 min-w-[120px]",children:s.jsxs("button",{onClick:()=>n==null?void 0:n(r.auditYear,r.auditName),className:"text-left hover:text-purple-600 transition-colors w-full",children:[s.jsx("div",{className:"text-[8px] text-gray-500 mb-0.5",children:r.auditYear||"-"}),s.jsx("div",{className:"text-[10px] font-semibold text-gray-900 line-clamp-2 leading-tight",title:r.auditName,children:r.auditName||"-"})]})}),Bw.map(c=>{const u=o[c],f=(u==null?void 0:u.total)||0,h=(u==null?void 0:u.completed)||0;return s.jsx("td",{className:"text-center py-1.5 px-0.5",children:f>0?s.jsxs("button",{onClick:()=>n==null?void 0:n(r.auditYear,r.auditName,c),className:"flex flex-col items-center gap-0.5 hover:bg-purple-50 rounded px-0.5 py-0.5 transition-all w-full group",children:[s.jsx("span",{className:F("w-1 h-1 rounded-full",qw(c))}),s.jsx("span",{className:"text-[10px] font-bold text-gray-900 group-hover:text-purple-600",children:f}),s.jsxs("span",{className:"text-[7px] text-gray-500 leading-none",children:["(",h,")"]})]}):s.jsx("span",{className:"text-gray-300 text-[9px]",children:"-"})},c)}),s.jsx("td",{className:"text-center py-1.5 px-0.5",children:s.jsx("button",{onClick:()=>n==null?void 0:n(r.auditYear,r.auditName),className:"text-[10px] font-bold text-gray-900 hover:text-purple-600 transition-colors",children:r.total})})]},a)})})]})})})]})}const ts=({component:t,children:e,fallback:n=null,requireInteraction:r=!1})=>{const{hasComponent:i,canInteract:a}=Fk();return(r?a(t):i(t))?s.jsx(s.Fragment,{children:e}):s.jsx(s.Fragment,{children:n})};function cs(t,e="PPP"){const n=typeof t=="string"?M5(t):t;return vs(n,e)}function BR(t){const e=typeof t=="string"?M5(t):t;return yR(e,new Date,{addSuffix:!0})}function Hr(t){if(!t||isNaN(t))return"0 ";const e=parseFloat(t.toString());if(e>=1e6){const n=e/1e6;return`${n%1===0?n.toFixed(0):n.toFixed(2)}M `}else if(e>=1e3){const n=e/1e3;return`${n%1===0?n.toFixed(0):n.toFixed(2)}K `}else return`${e.toFixed(0)} `}const qR=({isOpen:t,onClose:e,status:n,auditYear:r})=>{const[i,a]=L.useState([]),[o,c]=L.useState(!1),[u,f]=L.useState("");L.useEffect(()=>{t&&n&&h()},[t,n,r]),L.useEffect(()=>{const x=v=>{v.key==="Escape"&&t&&e()};if(t)return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[t,e]);const h=async()=>{c(!0);try{const x=await Xt.getActionsByStatus(n,r);a(x)}catch{a([])}finally{c(!1)}},p=i.filter(x=>{var b,y,w,k;if(!u)return!0;const v=u.toLowerCase();return((b=x.key)==null?void 0:b.toLowerCase().includes(v))||((y=x.summary)==null?void 0:y.toLowerCase().includes(v))||((w=x.auditName)==null?void 0:w.toLowerCase().includes(v))||((k=x.actionResponsible)==null?void 0:k.toLowerCase().includes(v))}),m=x=>{const v=x.toLowerCase();return v.includes("completed")?"bg-green-100 text-green-800 border-green-300":v.includes("overdue")?"bg-red-100 text-red-800 border-red-300":(v.includes("risk"),"bg-blue-100 text-blue-800 border-blue-300")};return t?s.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:e}),s.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:s.jsxs("div",{className:"relative w-full max-w-6xl max-h-[85vh] bg-white rounded-2xl shadow-2xl transform transition-all flex flex-col",onClick:x=>x.stopPropagation(),children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 rounded-t-2xl flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`px-3 py-1.5 rounded-lg ${m(n)} border font-bold text-sm`,children:n}),s.jsxs("div",{className:"text-white",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Finding Actions Details"}),s.jsxs("p",{className:"text-blue-100 text-sm",children:[p.length," ",p.length===1?"action":"actions"," found"]})]})]}),s.jsx("button",{onClick:e,className:"text-white hover:text-blue-200 transition-colors p-1.5 rounded-lg hover:bg-white/10",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsx("div",{className:"px-6 py-2 border-b bg-gray-50 flex-shrink-0",children:s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Search by action key, description, audit name, or responsible...",value:u,onChange:x=>f(x.target.value),className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsx("div",{className:"px-6 py-4 flex-1 overflow-y-auto",children:o?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(Ct,{size:"xl",text:"Loading actions..."})}):p.length===0?s.jsxs("div",{className:"text-center py-20",children:[s.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No actions found"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:u?"Try adjusting your search terms":"No actions available for this status"})]}):s.jsx("div",{className:"space-y-2",children:p.map((x,v)=>{var b,y,w;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:shadow-md transition-all duration-200 hover:border-blue-300 bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-600 font-mono font-bold text-sm",children:x.key}),s.jsx(tt,{variant:(b=x.status)!=null&&b.toLowerCase().includes("completed")?"success":(y=x.status)!=null&&y.toLowerCase().includes("overdue")?"danger":(w=x.status)!=null&&w.toLowerCase().includes("risk")?"default":"info",children:x.status})]}),s.jsxs(ze,{variant:"ghost",size:"sm",onClick:()=>window.open("#","_blank"),children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Jira"]})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("p",{className:"text-gray-500 text-xs font-semibold mb-0.5",children:"Action Summary"}),s.jsx("h4",{className:"text-gray-900 font-medium text-sm",children:x.summary})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-gray-500 text-xs font-semibold mb-0.5",children:"Action Description"}),s.jsx("p",{className:"text-gray-700 text-xs line-clamp-2",children:x.description})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-x-4 gap-y-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 font-semibold mb-0.5",children:"Audit Name"}),s.jsx("p",{className:"text-gray-900 truncate",children:x.auditName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 font-semibold mb-0.5",children:"Due Date"}),s.jsx("p",{className:"text-gray-900",children:x.dueDate?cs(x.dueDate,"PP"):"Not set"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 font-semibold mb-0.5",children:"Responsible"}),s.jsx("p",{className:"text-gray-900 truncate",children:x.actionResponsible})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 font-semibold mb-0.5",children:"C-Level"}),s.jsx("p",{className:"text-gray-900 truncate",children:x.cLevel||"N/A"})]})]})]},x.key||v)})})}),s.jsxs("div",{className:"px-6 py-3 bg-gray-50 rounded-b-2xl border-t flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{className:"text-xs text-gray-600",children:["Showing ",s.jsx("span",{className:"font-semibold text-gray-900",children:p.length})," of"," ",s.jsx("span",{className:"font-semibold text-gray-900",children:i.length})," actions"]}),s.jsx(ze,{variant:"outline",size:"sm",onClick:e,children:"Close"})]})]})})]}):null},bs=({columnKey:t,width:e,onResizeStart:n,isResizing:r=!1,children:i,className:a="",onClick:o,onDragStart:c,onDragOver:u,onDrop:f,onDragEnd:h,isDragging:p=!1,isDragOver:m=!1})=>{const x=L.useRef(!1),v=()=>{!x.current&&o&&o(),setTimeout(()=>{x.current=!1},100)},b=y=>{y.stopPropagation(),x.current=!0,n(t,y)};return s.jsxs("th",{className:F("relative group text-left",a,p&&"opacity-50",m&&"bg-purple-100 border-l-4 border-purple-500"),style:{width:e?`${e}px`:void 0},onClick:v,draggable:!0,onDragStart:y=>{y.stopPropagation(),c==null||c(t)},onDragOver:y=>u==null?void 0:u(y,t),onDrop:y=>{y.preventDefault(),f==null||f(t)},onDragEnd:h,children:[s.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity cursor-move",children:s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M9 3h2v2H9V3zm0 4h2v2H9V7zm0 4h2v2H9v-2zm0 4h2v2H9v-2zm0 4h2v2H9v-2zm4-16h2v2h-2V3zm0 4h2v2h-2V7zm0 4h2v2h-2v-2zm0 4h2v2h-2v-2zm0 4h2v2h-2v-2z"})})}),s.jsx("div",{className:F(a.includes("text-center")?"flex items-center justify-center":"pl-8 text-left"),children:i}),s.jsx("div",{className:F("absolute top-0 right-0 w-1 h-full cursor-col-resize group","hover:bg-purple-500 hover:opacity-70",r&&"bg-purple-500 opacity-100","transition-colors"),onMouseDown:b,title:"Drag to resize column",children:s.jsx("div",{className:"absolute top-0 right-0 w-4 h-full -mr-1.5"})}),s.jsx("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-50 transition-opacity pointer-events-none",children:s.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})})]})};function P5(t,e){return function(){return t.apply(e,arguments)}}const{toString:UR}=Object.prototype,{getPrototypeOf:Fy}=Object,{iterator:Uh,toStringTag:R5}=Symbol,Wh=(t=>e=>{const n=UR.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),si=t=>(t=t.toLowerCase(),e=>Wh(e)===t),Hh=t=>e=>typeof e===t,{isArray:xc}=Array,ac=Hh("undefined");function Jd(t){return t!==null&&!ac(t)&&t.constructor!==null&&!ac(t.constructor)&&ds(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const I5=si("ArrayBuffer");function WR(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&I5(t.buffer),e}const HR=Hh("string"),ds=Hh("function"),F5=Hh("number"),eu=t=>t!==null&&typeof t=="object",VR=t=>t===!0||t===!1,Kf=t=>{if(Wh(t)!=="object")return!1;const e=Fy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(R5 in t)&&!(Uh in t)},$R=t=>{if(!eu(t)||Jd(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},YR=si("Date"),KR=si("File"),GR=si("Blob"),XR=si("FileList"),QR=t=>eu(t)&&ds(t.pipe),ZR=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ds(t.append)&&((e=Wh(t))==="formdata"||e==="object"&&ds(t.toString)&&t.toString()==="[object FormData]"))},JR=si("URLSearchParams"),[e8,t8,n8,r8]=["ReadableStream","Request","Response","Headers"].map(si),s8=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tu(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),xc(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(Jd(t))return;const a=n?Object.getOwnPropertyNames(t):Object.keys(t),o=a.length;let c;for(r=0;r<o;r++)c=a[r],e.call(null,t[c],c,t)}}function z5(t,e){if(Jd(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Po=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,B5=t=>!ac(t)&&t!==Po;function Ix(){const{caseless:t,skipUndefined:e}=B5(this)&&this||{},n={},r=(i,a)=>{const o=t&&z5(n,a)||a;Kf(n[o])&&Kf(i)?n[o]=Ix(n[o],i):Kf(i)?n[o]=Ix({},i):xc(i)?n[o]=i.slice():(!e||!ac(i))&&(n[o]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&tu(arguments[i],r);return n}const i8=(t,e,n,{allOwnKeys:r}={})=>(tu(e,(i,a)=>{n&&ds(i)?t[a]=P5(i,n):t[a]=i},{allOwnKeys:r}),t),a8=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),o8=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},l8=(t,e,n,r)=>{let i,a,o;const c={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)o=i[a],(!r||r(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=n!==!1&&Fy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},c8=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},d8=t=>{if(!t)return null;if(xc(t))return t;let e=t.length;if(!F5(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},u8=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Fy(Uint8Array)),f8=(t,e)=>{const r=(t&&t[Uh]).call(t);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(t,a[0],a[1])}},h8=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},p8=si("HTMLFormElement"),m8=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Uw=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),g8=si("RegExp"),q5=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};tu(n,(i,a)=>{let o;(o=e(i,a,t))!==!1&&(r[a]=o||i)}),Object.defineProperties(t,r)},x8=t=>{q5(t,(e,n)=>{if(ds(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ds(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},y8=(t,e)=>{const n={},r=i=>{i.forEach(a=>{n[a]=!0})};return xc(t)?r(t):r(String(t).split(e)),n},v8=()=>{},b8=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function w8(t){return!!(t&&ds(t.append)&&t[R5]==="FormData"&&t[Uh])}const j8=t=>{const e=new Array(10),n=(r,i)=>{if(eu(r)){if(e.indexOf(r)>=0)return;if(Jd(r))return r;if(!("toJSON"in r)){e[i]=r;const a=xc(r)?[]:{};return tu(r,(o,c)=>{const u=n(o,i+1);!ac(u)&&(a[c]=u)}),e[i]=void 0,a}}return r};return n(t,0)},_8=si("AsyncFunction"),k8=t=>t&&(eu(t)||ds(t))&&ds(t.then)&&ds(t.catch),U5=((t,e)=>t?setImmediate:e?((n,r)=>(Po.addEventListener("message",({source:i,data:a})=>{i===Po&&a===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Po.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ds(Po.postMessage)),N8=typeof queueMicrotask<"u"?queueMicrotask.bind(Po):typeof process<"u"&&process.nextTick||U5,S8=t=>t!=null&&ds(t[Uh]),De={isArray:xc,isArrayBuffer:I5,isBuffer:Jd,isFormData:ZR,isArrayBufferView:WR,isString:HR,isNumber:F5,isBoolean:VR,isObject:eu,isPlainObject:Kf,isEmptyObject:$R,isReadableStream:e8,isRequest:t8,isResponse:n8,isHeaders:r8,isUndefined:ac,isDate:YR,isFile:KR,isBlob:GR,isRegExp:g8,isFunction:ds,isStream:QR,isURLSearchParams:JR,isTypedArray:u8,isFileList:XR,forEach:tu,merge:Ix,extend:i8,trim:s8,stripBOM:a8,inherits:o8,toFlatObject:l8,kindOf:Wh,kindOfTest:si,endsWith:c8,toArray:d8,forEachEntry:f8,matchAll:h8,isHTMLForm:p8,hasOwnProperty:Uw,hasOwnProp:Uw,reduceDescriptors:q5,freezeMethods:x8,toObjectSet:y8,toCamelCase:m8,noop:v8,toFiniteNumber:b8,findKey:z5,global:Po,isContextDefined:B5,isSpecCompliantForm:w8,toJSONObject:j8,isAsyncFn:_8,isThenable:k8,setImmediate:U5,asap:N8,isIterable:S8};function zt(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}De.inherits(zt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:De.toJSONObject(this.config),code:this.code,status:this.status}}});const W5=zt.prototype,H5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{H5[t]={value:t}});Object.defineProperties(zt,H5);Object.defineProperty(W5,"isAxiosError",{value:!0});zt.from=(t,e,n,r,i,a)=>{const o=Object.create(W5);De.toFlatObject(t,o,function(h){return h!==Error.prototype},f=>f!=="isAxiosError");const c=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return zt.call(o,c,u,n,r,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",a&&Object.assign(o,a),o};const C8=null;function Fx(t){return De.isPlainObject(t)||De.isArray(t)}function V5(t){return De.endsWith(t,"[]")?t.slice(0,-2):t}function Ww(t,e,n){return t?t.concat(e).map(function(i,a){return i=V5(i),!n&&a?"["+i+"]":i}).join(n?".":""):e}function A8(t){return De.isArray(t)&&!t.some(Fx)}const E8=De.toFlatObject(De,{},null,function(e){return/^is[A-Z]/.test(e)});function Vh(t,e,n){if(!De.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=De.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,y){return!De.isUndefined(y[b])});const r=n.metaTokens,i=n.visitor||h,a=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&De.isSpecCompliantForm(e);if(!De.isFunction(i))throw new TypeError("visitor must be a function");function f(v){if(v===null)return"";if(De.isDate(v))return v.toISOString();if(De.isBoolean(v))return v.toString();if(!u&&De.isBlob(v))throw new zt("Blob is not supported. Use a Buffer instead.");return De.isArrayBuffer(v)||De.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function h(v,b,y){let w=v;if(v&&!y&&typeof v=="object"){if(De.endsWith(b,"{}"))b=r?b:b.slice(0,-2),v=JSON.stringify(v);else if(De.isArray(v)&&A8(v)||(De.isFileList(v)||De.endsWith(b,"[]"))&&(w=De.toArray(v)))return b=V5(b),w.forEach(function(N,j){!(De.isUndefined(N)||N===null)&&e.append(o===!0?Ww([b],j,a):o===null?b:b+"[]",f(N))}),!1}return Fx(v)?!0:(e.append(Ww(y,b,a),f(v)),!1)}const p=[],m=Object.assign(E8,{defaultVisitor:h,convertValue:f,isVisitable:Fx});function x(v,b){if(!De.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(v),De.forEach(v,function(w,k){(!(De.isUndefined(w)||w===null)&&i.call(e,w,De.isString(k)?k.trim():k,b,m))===!0&&x(w,b?b.concat(k):[k])}),p.pop()}}if(!De.isObject(t))throw new TypeError("data must be an object");return x(t),e}function Hw(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function zy(t,e){this._pairs=[],t&&Vh(t,this,e)}const $5=zy.prototype;$5.append=function(e,n){this._pairs.push([e,n])};$5.toString=function(e){const n=e?function(r){return e.call(this,r,Hw)}:Hw;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function O8(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Y5(t,e,n){if(!e)return t;const r=n&&n.encode||O8;De.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(i?a=i(e,n):a=De.isURLSearchParams(e)?e.toString():new zy(e,n).toString(r),a){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class Vw{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){De.forEach(this.handlers,function(r){r!==null&&e(r)})}}const K5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},L8=typeof URLSearchParams<"u"?URLSearchParams:zy,M8=typeof FormData<"u"?FormData:null,T8=typeof Blob<"u"?Blob:null,D8={isBrowser:!0,classes:{URLSearchParams:L8,FormData:M8,Blob:T8},protocols:["http","https","file","blob","url","data"]},By=typeof window<"u"&&typeof document<"u",zx=typeof navigator=="object"&&navigator||void 0,P8=By&&(!zx||["ReactNative","NativeScript","NS"].indexOf(zx.product)<0),R8=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",I8=By&&window.location.href||"http://localhost",F8=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:By,hasStandardBrowserEnv:P8,hasStandardBrowserWebWorkerEnv:R8,navigator:zx,origin:I8},Symbol.toStringTag,{value:"Module"})),Rr={...F8,...D8};function z8(t,e){return Vh(t,new Rr.classes.URLSearchParams,{visitor:function(n,r,i,a){return Rr.isNode&&De.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function B8(t){return De.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function q8(t){const e={},n=Object.keys(t);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],e[a]=t[a];return e}function G5(t){function e(n,r,i,a){let o=n[a++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=a>=n.length;return o=!o&&De.isArray(i)?i.length:o,u?(De.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!c):((!i[o]||!De.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],a)&&De.isArray(i[o])&&(i[o]=q8(i[o])),!c)}if(De.isFormData(t)&&De.isFunction(t.entries)){const n={};return De.forEachEntry(t,(r,i)=>{e(B8(r),i,n,0)}),n}return null}function U8(t,e,n){if(De.isString(t))try{return(e||JSON.parse)(t),De.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const nu={transitional:K5,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,a=De.isObject(e);if(a&&De.isHTMLForm(e)&&(e=new FormData(e)),De.isFormData(e))return i?JSON.stringify(G5(e)):e;if(De.isArrayBuffer(e)||De.isBuffer(e)||De.isStream(e)||De.isFile(e)||De.isBlob(e)||De.isReadableStream(e))return e;if(De.isArrayBufferView(e))return e.buffer;if(De.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return z8(e,this.formSerializer).toString();if((c=De.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Vh(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),U8(e)):e}],transformResponse:[function(e){const n=this.transitional||nu.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(De.isResponse(e)||De.isReadableStream(e))return e;if(e&&De.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?zt.from(c,zt.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rr.classes.FormData,Blob:Rr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};De.forEach(["delete","get","head","post","put","patch"],t=>{nu.headers[t]={}});const W8=De.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),H8=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&W8[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},$w=Symbol("internals");function cd(t){return t&&String(t).trim().toLowerCase()}function Gf(t){return t===!1||t==null?t:De.isArray(t)?t.map(Gf):String(t)}function V8(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const $8=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function a0(t,e,n,r,i){if(De.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!De.isString(e)){if(De.isString(r))return e.indexOf(r)!==-1;if(De.isRegExp(r))return r.test(e)}}function Y8(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function K8(t,e){const n=De.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,a,o){return this[r].call(this,e,i,a,o)},configurable:!0})})}let us=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function a(c,u,f){const h=cd(u);if(!h)throw new Error("header name must be a non-empty string");const p=De.findKey(i,h);(!p||i[p]===void 0||f===!0||f===void 0&&i[p]!==!1)&&(i[p||u]=Gf(c))}const o=(c,u)=>De.forEach(c,(f,h)=>a(f,h,u));if(De.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(De.isString(e)&&(e=e.trim())&&!$8(e))o(H8(e),n);else if(De.isObject(e)&&De.isIterable(e)){let c={},u,f;for(const h of e){if(!De.isArray(h))throw TypeError("Object iterator must return a key-value pair");c[f=h[0]]=(u=c[f])?De.isArray(u)?[...u,h[1]]:[u,h[1]]:h[1]}o(c,n)}else e!=null&&a(n,e,r);return this}get(e,n){if(e=cd(e),e){const r=De.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return V8(i);if(De.isFunction(n))return n.call(this,i,r);if(De.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=cd(e),e){const r=De.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||a0(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function a(o){if(o=cd(o),o){const c=De.findKey(r,o);c&&(!n||a0(r,r[c],c,n))&&(delete r[c],i=!0)}}return De.isArray(e)?e.forEach(a):a(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const a=n[r];(!e||a0(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const n=this,r={};return De.forEach(this,(i,a)=>{const o=De.findKey(r,a);if(o){n[o]=Gf(i),delete n[a];return}const c=e?Y8(a):String(a).trim();c!==a&&delete n[a],n[c]=Gf(i),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return De.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&De.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[$w]=this[$w]={accessors:{}}).accessors,i=this.prototype;function a(o){const c=cd(o);r[c]||(K8(i,o),r[c]=!0)}return De.isArray(e)?e.forEach(a):a(e),this}};us.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);De.reduceDescriptors(us.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});De.freezeMethods(us);function o0(t,e){const n=this||nu,r=e||n,i=us.from(r.headers);let a=r.data;return De.forEach(t,function(c){a=c.call(n,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function X5(t){return!!(t&&t.__CANCEL__)}function yc(t,e,n){zt.call(this,t??"canceled",zt.ERR_CANCELED,e,n),this.name="CanceledError"}De.inherits(yc,zt,{__CANCEL__:!0});function Q5(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new zt("Request failed with status code "+n.status,[zt.ERR_BAD_REQUEST,zt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function G8(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function X8(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,a=0,o;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),h=r[a];o||(o=f),n[i]=u,r[i]=f;let p=a,m=0;for(;p!==i;)m+=n[p++],p=p%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),f-o<e)return;const x=h&&f-h;return x?Math.round(m*1e3/x):void 0}}function Q8(t,e){let n=0,r=1e3/e,i,a;const o=(f,h=Date.now())=>{n=h,i=null,a&&(clearTimeout(a),a=null),t(...f)};return[(...f)=>{const h=Date.now(),p=h-n;p>=r?o(f,h):(i=f,a||(a=setTimeout(()=>{a=null,o(i)},r-p)))},()=>i&&o(i)]}const xh=(t,e,n=3)=>{let r=0;const i=X8(50,250);return Q8(a=>{const o=a.loaded,c=a.lengthComputable?a.total:void 0,u=o-r,f=i(u),h=o<=c;r=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:f||void 0,estimated:f&&c&&h?(c-o)/f:void 0,event:a,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(p)},n)},Yw=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Kw=t=>(...e)=>De.asap(()=>t(...e)),Z8=Rr.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Rr.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Rr.origin),Rr.navigator&&/(msie|trident)/i.test(Rr.navigator.userAgent)):()=>!0,J8=Rr.hasStandardBrowserEnv?{write(t,e,n,r,i,a,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];De.isNumber(n)&&c.push(`expires=${new Date(n).toUTCString()}`),De.isString(r)&&c.push(`path=${r}`),De.isString(i)&&c.push(`domain=${i}`),a===!0&&c.push("secure"),De.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function e7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function t7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Z5(t,e,n){let r=!e7(e);return t&&(r||n==!1)?t7(t,e):e}const Gw=t=>t instanceof us?{...t}:t;function Jo(t,e){e=e||{};const n={};function r(f,h,p,m){return De.isPlainObject(f)&&De.isPlainObject(h)?De.merge.call({caseless:m},f,h):De.isPlainObject(h)?De.merge({},h):De.isArray(h)?h.slice():h}function i(f,h,p,m){if(De.isUndefined(h)){if(!De.isUndefined(f))return r(void 0,f,p,m)}else return r(f,h,p,m)}function a(f,h){if(!De.isUndefined(h))return r(void 0,h)}function o(f,h){if(De.isUndefined(h)){if(!De.isUndefined(f))return r(void 0,f)}else return r(void 0,h)}function c(f,h,p){if(p in e)return r(f,h);if(p in t)return r(void 0,f)}const u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(f,h,p)=>i(Gw(f),Gw(h),p,!0)};return De.forEach(Object.keys({...t,...e}),function(h){const p=u[h]||i,m=p(t[h],e[h],h);De.isUndefined(m)&&p!==c||(n[h]=m)}),n}const J5=t=>{const e=Jo({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:c}=e;if(e.headers=o=us.from(o),e.url=Y5(Z5(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),De.isFormData(n)){if(Rr.hasStandardBrowserEnv||Rr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(De.isFunction(n.getHeaders)){const u=n.getHeaders(),f=["content-type","content-length"];Object.entries(u).forEach(([h,p])=>{f.includes(h.toLowerCase())&&o.set(h,p)})}}if(Rr.hasStandardBrowserEnv&&(r&&De.isFunction(r)&&(r=r(e)),r||r!==!1&&Z8(e.url))){const u=i&&a&&J8.read(a);u&&o.set(i,u)}return e},n7=typeof XMLHttpRequest<"u",r7=n7&&function(t){return new Promise(function(n,r){const i=J5(t);let a=i.data;const o=us.from(i.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:f}=i,h,p,m,x,v;function b(){x&&x(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function w(){if(!y)return;const N=us.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),S={data:!c||c==="text"||c==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:N,config:t,request:y};Q5(function(O){n(O),b()},function(O){r(O),b()},S),y=null}"onloadend"in y?y.onloadend=w:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(w)},y.onabort=function(){y&&(r(new zt("Request aborted",zt.ECONNABORTED,t,y)),y=null)},y.onerror=function(j){const S=j&&j.message?j.message:"Network Error",A=new zt(S,zt.ERR_NETWORK,t,y);A.event=j||null,r(A),y=null},y.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||K5;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),r(new zt(j,S.clarifyTimeoutError?zt.ETIMEDOUT:zt.ECONNABORTED,t,y)),y=null},a===void 0&&o.setContentType(null),"setRequestHeader"in y&&De.forEach(o.toJSON(),function(j,S){y.setRequestHeader(S,j)}),De.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),c&&c!=="json"&&(y.responseType=i.responseType),f&&([m,v]=xh(f,!0),y.addEventListener("progress",m)),u&&y.upload&&([p,x]=xh(u),y.upload.addEventListener("progress",p),y.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(h=N=>{y&&(r(!N||N.type?new yc(null,t,y):N),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const k=G8(i.url);if(k&&Rr.protocols.indexOf(k)===-1){r(new zt("Unsupported protocol "+k+":",zt.ERR_BAD_REQUEST,t));return}y.send(a||null)})},s7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const a=function(f){if(!i){i=!0,c();const h=f instanceof Error?f:this.reason;r.abort(h instanceof zt?h:new yc(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,a(new zt(`timeout ${e} of ms exceeded`,zt.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(a):f.removeEventListener("abort",a)}),t=null)};t.forEach(f=>f.addEventListener("abort",a));const{signal:u}=r;return u.unsubscribe=()=>De.asap(c),u}},i7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},a7=async function*(t,e){for await(const n of o7(t))yield*i7(n,e)},o7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Xw=(t,e,n,r)=>{const i=a7(t,e);let a=0,o,c=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:f,value:h}=await i.next();if(f){c(),u.close();return}let p=h.byteLength;if(n){let m=a+=p;n(m)}u.enqueue(new Uint8Array(h))}catch(f){throw c(f),f}},cancel(u){return c(u),i.return()}},{highWaterMark:2})},Qw=64*1024,{isFunction:If}=De,l7=(({Request:t,Response:e})=>({Request:t,Response:e}))(De.global),{ReadableStream:Zw,TextEncoder:Jw}=De.global,ej=(t,...e)=>{try{return!!t(...e)}catch{return!1}},c7=t=>{t=De.merge.call({skipUndefined:!0},l7,t);const{fetch:e,Request:n,Response:r}=t,i=e?If(e):typeof fetch=="function",a=If(n),o=If(r);if(!i)return!1;const c=i&&If(Zw),u=i&&(typeof Jw=="function"?(v=>b=>v.encode(b))(new Jw):async v=>new Uint8Array(await new n(v).arrayBuffer())),f=a&&c&&ej(()=>{let v=!1;const b=new n(Rr.origin,{body:new Zw,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!b}),h=o&&c&&ej(()=>De.isReadableStream(new r("").body)),p={stream:h&&(v=>v.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!p[v]&&(p[v]=(b,y)=>{let w=b&&b[v];if(w)return w.call(b);throw new zt(`Response type '${v}' is not supported`,zt.ERR_NOT_SUPPORT,y)})});const m=async v=>{if(v==null)return 0;if(De.isBlob(v))return v.size;if(De.isSpecCompliantForm(v))return(await new n(Rr.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(De.isArrayBufferView(v)||De.isArrayBuffer(v))return v.byteLength;if(De.isURLSearchParams(v)&&(v=v+""),De.isString(v))return(await u(v)).byteLength},x=async(v,b)=>{const y=De.toFiniteNumber(v.getContentLength());return y??m(b)};return async v=>{let{url:b,method:y,data:w,signal:k,cancelToken:N,timeout:j,onDownloadProgress:S,onUploadProgress:A,responseType:O,headers:M,withCredentials:z="same-origin",fetchOptions:I}=J5(v),D=e||fetch;O=O?(O+"").toLowerCase():"text";let T=s7([k,N&&N.toAbortSignal()],j),q=null;const H=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let G;try{if(A&&f&&y!=="get"&&y!=="head"&&(G=await x(M,w))!==0){let R=new n(b,{method:"POST",body:w,duplex:"half"}),U;if(De.isFormData(w)&&(U=R.headers.get("content-type"))&&M.setContentType(U),R.body){const[B,Q]=Yw(G,xh(Kw(A)));w=Xw(R.body,Qw,B,Q)}}De.isString(z)||(z=z?"include":"omit");const ee=a&&"credentials"in n.prototype,X={...I,signal:T,method:y.toUpperCase(),headers:M.normalize().toJSON(),body:w,duplex:"half",credentials:ee?z:void 0};q=a&&new n(b,X);let J=await(a?D(q,I):D(b,X));const K=h&&(O==="stream"||O==="response");if(h&&(S||K&&H)){const R={};["status","statusText","headers"].forEach(Z=>{R[Z]=J[Z]});const U=De.toFiniteNumber(J.headers.get("content-length")),[B,Q]=S&&Yw(U,xh(Kw(S),!0))||[];J=new r(Xw(J.body,Qw,B,()=>{Q&&Q(),H&&H()}),R)}O=O||"text";let W=await p[De.findKey(p,O)||"text"](J,v);return!K&&H&&H(),await new Promise((R,U)=>{Q5(R,U,{data:W,headers:us.from(J.headers),status:J.status,statusText:J.statusText,config:v,request:q})})}catch(ee){throw H&&H(),ee&&ee.name==="TypeError"&&/Load failed|fetch/i.test(ee.message)?Object.assign(new zt("Network Error",zt.ERR_NETWORK,v,q),{cause:ee.cause||ee}):zt.from(ee,ee&&ee.code,v,q)}}},d7=new Map,e4=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:i}=e,a=[r,i,n];let o=a.length,c=o,u,f,h=d7;for(;c--;)u=a[c],f=h.get(u),f===void 0&&h.set(u,f=c?new Map:c7(e)),h=f;return f};e4();const qy={http:C8,xhr:r7,fetch:{get:e4}};De.forEach(qy,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const tj=t=>`- ${t}`,u7=t=>De.isFunction(t)||t===null||t===!1;function f7(t,e){t=De.isArray(t)?t:[t];const{length:n}=t;let r,i;const a={};for(let o=0;o<n;o++){r=t[o];let c;if(i=r,!u7(r)&&(i=qy[(c=String(r)).toLowerCase()],i===void 0))throw new zt(`Unknown adapter '${c}'`);if(i&&(De.isFunction(i)||(i=i.get(e))))break;a[c||"#"+o]=i}if(!i){const o=Object.entries(a).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=n?o.length>1?`since :
`+o.map(tj).join(`
`):" "+tj(o[0]):"as no adapter specified";throw new zt("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i}const t4={getAdapter:f7,adapters:qy};function l0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new yc(null,t)}function nj(t){return l0(t),t.headers=us.from(t.headers),t.data=o0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),t4.getAdapter(t.adapter||nu.adapter,t)(t).then(function(r){return l0(t),r.data=o0.call(t,t.transformResponse,r),r.headers=us.from(r.headers),r},function(r){return X5(r)||(l0(t),r&&r.response&&(r.response.data=o0.call(t,t.transformResponse,r.response),r.response.headers=us.from(r.response.headers))),Promise.reject(r)})}const n4="1.13.2",$h={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{$h[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const rj={};$h.transitional=function(e,n,r){function i(a,o){return"[Axios v"+n4+"] Transitional option '"+a+"'"+o+(r?". "+r:"")}return(a,o,c)=>{if(e===!1)throw new zt(i(o," has been removed"+(n?" in "+n:"")),zt.ERR_DEPRECATED);return n&&!rj[o]&&(rj[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,o,c):!0}};$h.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function h7(t,e,n){if(typeof t!="object")throw new zt("options must be an object",zt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const a=r[i],o=e[a];if(o){const c=t[a],u=c===void 0||o(c,a,t);if(u!==!0)throw new zt("option "+a+" must be "+u,zt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new zt("Unknown option "+a,zt.ERR_BAD_OPTION)}}const Xf={assertOptions:h7,validators:$h},xi=Xf.validators;let Yo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Vw,response:new Vw}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Jo(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:a}=n;r!==void 0&&Xf.assertOptions(r,{silentJSONParsing:xi.transitional(xi.boolean),forcedJSONParsing:xi.transitional(xi.boolean),clarifyTimeoutError:xi.transitional(xi.boolean)},!1),i!=null&&(De.isFunction(i)?n.paramsSerializer={serialize:i}:Xf.assertOptions(i,{encode:xi.function,serialize:xi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Xf.assertOptions(n,{baseUrl:xi.spelling("baseURL"),withXsrfToken:xi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=a&&De.merge(a.common,a[n.method]);a&&De.forEach(["delete","get","head","post","put","patch","common"],v=>{delete a[v]}),n.headers=us.concat(o,a);const c=[];let u=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(u=u&&b.synchronous,c.unshift(b.fulfilled,b.rejected))});const f=[];this.interceptors.response.forEach(function(b){f.push(b.fulfilled,b.rejected)});let h,p=0,m;if(!u){const v=[nj.bind(this),void 0];for(v.unshift(...c),v.push(...f),m=v.length,h=Promise.resolve(n);p<m;)h=h.then(v[p++],v[p++]);return h}m=c.length;let x=n;for(;p<m;){const v=c[p++],b=c[p++];try{x=v(x)}catch(y){b.call(this,y);break}}try{h=nj.call(this,x)}catch(v){return Promise.reject(v)}for(p=0,m=f.length;p<m;)h=h.then(f[p++],f[p++]);return h}getUri(e){e=Jo(this.defaults,e);const n=Z5(e.baseURL,e.url,e.allowAbsoluteUrls);return Y5(n,e.params,e.paramsSerializer)}};De.forEach(["delete","get","head","options"],function(e){Yo.prototype[e]=function(n,r){return this.request(Jo(r||{},{method:e,url:n,data:(r||{}).data}))}});De.forEach(["post","put","patch"],function(e){function n(r){return function(a,o,c){return this.request(Jo(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Yo.prototype[e]=n(),Yo.prototype[e+"Form"]=n(!0)});let p7=class r4{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(c=>{r.subscribe(c),a=c}).then(i);return o.cancel=function(){r.unsubscribe(a)},o},e(function(a,o,c){r.reason||(r.reason=new yc(a,o,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new r4(function(i){e=i}),cancel:e}}};function m7(t){return function(n){return t.apply(null,n)}}function g7(t){return De.isObject(t)&&t.isAxiosError===!0}const Bx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Bx).forEach(([t,e])=>{Bx[e]=t});function s4(t){const e=new Yo(t),n=P5(Yo.prototype.request,e);return De.extend(n,Yo.prototype,e,{allOwnKeys:!0}),De.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return s4(Jo(t,i))},n}const Vn=s4(nu);Vn.Axios=Yo;Vn.CanceledError=yc;Vn.CancelToken=p7;Vn.isCancel=X5;Vn.VERSION=n4;Vn.toFormData=Vh;Vn.AxiosError=zt;Vn.Cancel=Vn.CanceledError;Vn.all=function(e){return Promise.all(e)};Vn.spread=m7;Vn.isAxiosError=g7;Vn.mergeConfig=Jo;Vn.AxiosHeaders=us;Vn.formToJSON=t=>G5(De.isHTMLForm(t)?new FormData(t):t);Vn.getAdapter=t4.getAdapter;Vn.HttpStatusCode=Bx;Vn.default=Vn;const{Axios:Ez,AxiosError:Oz,CanceledError:Lz,isCancel:Mz,CancelToken:Tz,VERSION:Dz,all:Pz,Cancel:Rz,isAxiosError:Iz,spread:Fz,toFormData:zz,AxiosHeaders:Bz,HttpStatusCode:qz,formToJSON:Uz,getAdapter:Wz,mergeConfig:Hz}=Vn,x7=window.location.origin,y7=3e4,v7=2,b7=1e3;async function w7(t,e=v7,n=b7){var r,i;for(let a=0;a<e;a++)try{return await t()}catch(o){const c=o,u=a===e-1,f=!c.response,h=((r=c.response)==null?void 0:r.status)&&c.response.status>=500,p=((i=c.response)==null?void 0:i.status)===429;if(u||!f&&!h&&!p)throw o;const m=n*Math.pow(2,a);await new Promise(x=>setTimeout(x,m))}throw new Error("Max retries reached")}const Uy=Vn.create({baseURL:x7,timeout:y7,headers:{"Content-Type":"application/json"},withCredentials:!0});Uy.interceptors.request.use(t=>t,t=>Promise.reject(t));function j7(t){if(t.response){const e=t.response.status,n=t.response.data;switch(e){case 400:return(n==null?void 0:n.error)||"Invalid request. Please check your input.";case 401:return"Your session has expired. Please login again.";case 403:return"You do not have permission to perform this action.";case 404:return(n==null?void 0:n.error)||"The requested resource was not found.";case 429:return"Too many requests. Please try again later.";case 500:return"Server error. Our team has been notified.";case 503:return"Service temporarily unavailable. Please try again later.";default:return(n==null?void 0:n.error)||"An unexpected error occurred."}}else return t.request?"Unable to connect to server. Please check your internet connection.":t.message||"An unexpected error occurred."}Uy.interceptors.response.use(t=>t,t=>{var n,r;const e=t;if(e.userMessage=j7(t),t.response){const{status:i}=t.response;switch(i){case 401:(r=(n=t.config)==null?void 0:n.url)!=null&&r.includes("/api/auth/status")||setTimeout(()=>{window.location.href="/login"},500);break}}return Promise.reject(e)});async function dd(t){try{return(await w7(()=>Uy.request(t))).data}catch(e){throw e}}const sj={get:(t,e)=>dd({...e,method:"GET",url:t}),post:(t,e,n)=>dd({...n,method:"POST",url:t,data:e}),put:(t,e,n)=>dd({...n,method:"PUT",url:t,data:e}),patch:(t,e,n)=>dd({...n,method:"PATCH",url:t,data:e}),delete:(t,e)=>dd({...e,method:"DELETE",url:t})},_7=({isOpen:t,onClose:e,findingKey:n,findingSummary:r,findingData:i})=>{var S;const[a,o]=L.useState([]),[c,u]=L.useState(!1),[f,h]=L.useState(null),[p,m]=L.useState(null),[x,v]=L.useState(!1);L.useEffect(()=>{t&&n&&(b(),h(null),m(null))},[t,n]),L.useEffect(()=>{const A=O=>{O.key==="Escape"&&t&&(O.preventDefault(),O.stopPropagation(),f?k():e())};if(t)return document.addEventListener("keydown",A,{capture:!0}),()=>document.removeEventListener("keydown",A,{capture:!0})},[t,f,e]);const b=async()=>{u(!0);try{const A=await sj.get(`/api/finding-child-actions/${n}`);o(A)}catch(A){console.error("Failed to fetch child actions:",A),o([])}finally{u(!1)}},y=async A=>{v(!0),h(A);try{const O=await sj.get(`/api/action-detail/${A}`);m(O)}catch(O){console.error("Failed to fetch action detail:",O),m(null)}finally{v(!1)}},w=A=>{y(A)},k=()=>{h(null),m(null)},N=A=>{const O=A.toLowerCase();return O.includes("completed")?"bg-green-100 text-green-800 border-green-300":O.includes("overdue")?"bg-red-100 text-red-800 border-red-300":O.includes("risk")?"bg-purple-100 text-purple-800 border-purple-300":"bg-blue-100 text-blue-800 border-blue-300"},j=A=>{switch(A){case"Critical":return"bg-gray-900 text-white";case"High":return"bg-red-500 text-white";case"Medium":return"bg-orange-500 text-white";case"Low":return"bg-yellow-500 text-white";default:return"bg-gray-400 text-white"}};return t?s.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:()=>{f?k():e()}}),s.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:s.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-white rounded-2xl shadow-2xl transform transition-all flex flex-col",onClick:A=>A.stopPropagation(),children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 px-6 py-4 rounded-t-2xl flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`px-3 py-1.5 rounded-lg ${N(i==null?void 0:i.status)} border font-bold text-sm`,children:(i==null?void 0:i.status)||"Unknown"}),s.jsxs("div",{className:"text-white",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Finding Details"}),s.jsx("p",{className:"text-purple-100 text-sm",children:n})]})]}),s.jsx("button",{onClick:e,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[f&&s.jsxs("button",{onClick:k,className:"flex items-center gap-2 text-purple-600 hover:text-purple-700 font-medium text-sm",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Finding"]}),c||x?s.jsx("div",{className:"py-12",children:s.jsx(Ct,{})}):f&&p?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Action Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Action Key:"}),s.jsx("p",{className:"text-gray-900 mt-1 font-mono",children:p.key})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Status:"}),s.jsx("div",{className:"mt-1",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N(p.status)}`,children:p.status})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Summary:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:p.summary})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Audit Lead:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:p.auditLead||"Unassigned"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Due Date:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:p.dueDate||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Responsible:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:p.responsibleEmail||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"C-Level:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:p.cLevel||"-"})]})]}),p.description&&s.jsxs("div",{className:"mt-3",children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Action Description:"}),s.jsx("p",{className:"text-gray-700 mt-1 text-sm",children:p.description})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 space-y-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Parent Finding"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Finding:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:p.findingSummary})]}),p.findingDescription&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Finding Description:"}),s.jsx("p",{className:"text-gray-700 mt-1",children:p.findingDescription})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Finding Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Summary:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:r})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Audit:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:(i==null?void 0:i.auditName)||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Audit Year:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:(i==null?void 0:i.auditYear)||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Audit Lead:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:((S=a[0])==null?void 0:S.auditLead)||(i==null?void 0:i.auditLead)||"Unassigned"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Risk Level:"}),s.jsx("div",{className:"mt-1",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${j((i==null?void 0:i.riskLevel)||"")}`,children:(i==null?void 0:i.riskLevel)||"Unknown"})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Financial Impact:"}),s.jsx("p",{className:"text-gray-900 mt-1 font-semibold",children:Hr((i==null?void 0:i.financialImpact)||0)})]})]}),(i==null?void 0:i.description)&&s.jsxs("div",{className:"mt-3",children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Description:"}),s.jsx("p",{className:"text-gray-700 mt-1 text-sm",children:i.description})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-3",children:["Related Actions (",a.length,")"]}),a.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg",children:"No child actions found for this finding"}):s.jsx("div",{className:"space-y-2",children:a.map(A=>s.jsxs("button",{onClick:()=>w(A.key),className:"w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-purple-50 hover:border-purple-300 transition-all cursor-pointer text-left group",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 group-hover:text-purple-600",children:A.summary}),s.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:A.key})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tt,{variant:A.status==="Completed"?"success":A.status==="Overdue"?"danger":"warning",children:A.status}),s.jsx("svg",{className:"w-4 h-4 text-gray-400 group-hover:text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},A.key))})]})]})]})]})})]}):null},ij=({isOpen:t,onClose:e,title:n,subtitle:r,actions:i,loading:a,headerBgColor:o="bg-gray-50",showDaysUntilDue:c=!1,mode:u="actions",actionType:f,onActionTypeChange:h,overdueCount:p=0,upcomingCount:m=0})=>{const[x,v]=L.useState(null),[b,y]=L.useState(!1),[w,k]=L.useState(f==="overdue"?{key:"daysOverdue",direction:"desc"}:null),[N,j]=L.useState(!1),[S,A]=L.useState(null),[O,M]=L.useState(()=>typeof window<"u"?window.innerWidth<768:!1);L.useEffect(()=>{const B=()=>{M(window.innerWidth<768)};return window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]);const z=u==="findings"?["status","audit","auditYear","auditLead","riskLevel","description","actions"]:c?["status","audit","auditYear","auditLead","dueDate","daysUntilDue","riskLevel","responsible","cLevel","description","actions"]:f==="overdue"?["status","audit","auditYear","auditLead","dueDate","daysOverdue","riskLevel","responsible","cLevel","description","actions"]:["status","audit","auditYear","auditLead","dueDate","riskLevel","responsible","cLevel","description","actions"],[I,D]=L.useState(z),[T,q]=L.useState(null);L.useEffect(()=>{D(u==="findings"?["status","audit","auditYear","auditLead","riskLevel","description","actions"]:c?["status","audit","auditYear","auditLead","dueDate","daysUntilDue","riskLevel","responsible","cLevel","description","actions"]:f==="overdue"?["status","audit","auditYear","auditLead","dueDate","daysOverdue","riskLevel","responsible","cLevel","description","actions"]:["status","audit","auditYear","auditLead","dueDate","riskLevel","responsible","cLevel","description","actions"])},[u,c,f]);const{columnWidths:H,handleMouseDown:G}=uc({status:120,audit:200,auditYear:100,auditLead:180,dueDate:130,daysUntilDue:100,daysOverdue:110,riskLevel:120,responsible:200,cLevel:180,description:300,actions:120},void 0,"actions-modal-column-widths"),ee=B=>{let Q="asc";w&&w.key===B&&w.direction==="asc"&&(Q="desc"),k({key:B,direction:Q})},X=L.useMemo(()=>!i||!w?i||[]:[...i].sort((Q,Z)=>{let $,ne;if(w.key==="daysOverdue"){const ce=new Date;if(Q.dueDate){const ye=new Date(Q.dueDate);$=Math.floor((ce.getTime()-ye.getTime())/(1e3*60*60*24))}if(Z.dueDate){const ye=new Date(Z.dueDate);ne=Math.floor((ce.getTime()-ye.getTime())/(1e3*60*60*24))}}else $=Q[w.key],ne=Z[w.key];if($===ne)return 0;if(!$&&$!==0)return 1;if(!ne&&ne!==0)return-1;const ae=$>ne?1:-1;return w.direction==="asc"?ae:-ae}),[i,w]),J=B=>{const Q=B.toLowerCase();return Q==="completed"?"success":Q==="risk accepted"?"default":Q==="overdue"?"danger":Q==="closed"?"info":"warning"},K=B=>{q(B)},W=B=>{B.preventDefault()},R=B=>{if(!T||T===B){q(null);return}const Q=[...I],Z=Q.indexOf(T),$=Q.indexOf(B);Q.splice(Z,1),Q.splice($,0,T),D(Q),q(null)};L.useEffect(()=>{const B=Q=>{if(Q.key==="Escape"&&t){if(N)return;b?(y(!1),v(null)):e()}};if(t)return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[t,b,N,e]);const U={status:{label:"Status",render:B=>s.jsx(tt,{variant:J(B.status),children:B.status})},audit:{label:"Audit",sortable:!0,sortKey:"auditName",render:B=>s.jsx("span",{className:"text-gray-600 text-sm",children:B.auditName||"-"})},auditYear:{label:"Audit Year",sortable:!0,sortKey:"auditYear",render:B=>s.jsx("span",{className:"text-gray-600 text-sm",children:B.auditYear||"-"})},auditLead:{label:"Audit Lead",sortable:!0,sortKey:"auditLead",render:B=>s.jsx("span",{className:"text-gray-600 text-sm",children:B.auditLead||"-"})},daysUntilDue:{label:"Days Until Due",sortable:!0,sortKey:"daysUntilDue",render:B=>B.daysUntilDue!==null&&B.daysUntilDue!==void 0?s.jsxs("span",{className:`text-sm font-medium ${B.daysUntilDue<7?"text-red-600":B.daysUntilDue<14?"text-orange-600":"text-gray-600"}`,children:[B.daysUntilDue," days"]}):s.jsx("span",{className:"text-gray-400",children:"-"})},daysOverdue:{label:"Days Overdue",sortable:!0,sortKey:"daysOverdue",render:B=>{if(!B.dueDate)return s.jsx("span",{className:"text-gray-400",children:"-"});const Q=new Date,Z=new Date(B.dueDate),$=Math.floor((Q.getTime()-Z.getTime())/(1e3*60*60*24));return $<=0?s.jsx("span",{className:"text-gray-400",children:"-"}):s.jsxs("span",{className:`text-sm font-medium ${$>30?"text-red-600":$>15?"text-orange-600":"text-gray-600"}`,children:[$," days"]})}},dueDate:{label:"Due Date",render:B=>s.jsx("span",{className:"text-gray-600 text-sm",children:B.dueDate?cs(B.dueDate,"PP"):"-"})},riskLevel:{label:"Risk Level",render:B=>s.jsx(tt,{variant:B.riskLevel==="Critical"?"danger":B.riskLevel==="High"?"warning":B.riskLevel==="Medium"?"info":"default",children:B.riskLevel||"Unassigned"})},responsible:{label:"Responsible",render:B=>s.jsx("span",{className:"text-gray-600 text-sm",children:B.responsibleEmail||"-"})},cLevel:{label:"C-Level",render:B=>s.jsx("span",{className:"text-gray-600 text-sm",children:B.cLevel||"-"})},description:{label:"Description",render:B=>s.jsx("span",{className:"text-gray-700 text-sm line-clamp-2",title:B.description,children:B.description||"-"})},actions:{label:u==="findings"?"Finding Detail":"Action Detail",render:B=>s.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>{u==="findings"?(A(B),j(!0)):(v(B),y(!0))},children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})}};return t?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 md:p-4",children:s.jsxs("div",{className:F("bg-white rounded-lg shadow-xl w-full overflow-hidden flex flex-col",O?"max-w-full max-h-[95vh]":"max-w-[95vw] max-h-[90vh]"),children:[s.jsxs("div",{className:F("border-b border-gray-200",f?f==="overdue"?"bg-red-50":"bg-blue-50":o,O?"px-3 py-3":"px-6 py-4"),children:[s.jsxs("div",{className:"flex justify-between items-start mb-3 relative",children:[s.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[s.jsx("h3",{className:F("font-semibold text-gray-900",O?"text-base":"text-lg"),children:f?f==="overdue"?"Overdue Actions":"Upcoming Actions":n}),s.jsx("p",{className:F("text-gray-600 mt-1",O?"text-xs":"text-sm"),children:a?"Loading...":f?f==="overdue"?`${p} actions past due date`:`${m} actions due within 30 days`:r})]}),s.jsx("button",{onClick:e,className:F("transition-colors flex-shrink-0 rounded-full hover:bg-gray-200 active:bg-gray-300 relative z-10",O?"text-gray-700 bg-white shadow-sm p-1 border border-gray-300":"text-gray-500 hover:text-gray-700 p-1"),"aria-label":"Close modal",children:s.jsx("svg",{className:F("fill-none stroke-currentColor",O?"w-4 h-4":"w-6 h-6"),viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),f&&h&&s.jsxs("div",{className:F("inline-flex items-center bg-white rounded-xl shadow-md border border-gray-200/50 backdrop-blur-sm",O?"p-1 w-full":"p-1.5"),children:[s.jsxs("button",{onClick:()=>h("overdue"),className:F("relative rounded-lg font-semibold transition-all duration-200 flex items-center gap-1.5 flex-1 justify-center",O?"px-2 py-1.5 text-xs":"px-5 py-2.5 text-sm",f==="overdue"?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/30 transform scale-105":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[s.jsx("span",{className:O?"text-sm":"text-base",children:""}),s.jsx("span",{children:"Overdue"}),p>0&&s.jsx("span",{className:F("rounded-full font-bold",O?"px-1.5 py-0.5 text-[10px]":"px-2 py-0.5 text-xs",f==="overdue"?"bg-white/20 text-white":"bg-red-100 text-red-700"),children:p})]}),s.jsxs("button",{onClick:()=>h("upcoming"),className:F("relative rounded-lg font-semibold transition-all duration-200 flex items-center gap-1.5 flex-1 justify-center",O?"px-2 py-1.5 text-xs":"px-5 py-2.5 text-sm",f==="upcoming"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/30 transform scale-105":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[s.jsx("span",{className:O?"text-sm":"text-base",children:""}),s.jsx("span",{children:"Upcoming"}),m>0&&s.jsx("span",{className:F("rounded-full font-bold",O?"px-1.5 py-0.5 text-[10px]":"px-2 py-0.5 text-xs",f==="upcoming"?"bg-white/20 text-white":"bg-blue-100 text-blue-700"),children:m})]})]})]}),s.jsx("div",{className:F("flex-1 overflow-auto",O?"p-2":"p-6"),children:a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Ct,{size:"lg"})}):i&&i.length>0?s.jsxs(s.Fragment,{children:[!O&&s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm border-collapse",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsx("tr",{children:I.map(B=>{const Q=U[B];return Q?s.jsx(bs,{columnKey:B,width:H[B],onResizeStart:G,isResizing:!1,onClick:Q.sortable?()=>ee(Q.sortKey):void 0,onDragStart:()=>K(B),onDragOver:Z=>W(Z),onDrop:()=>R(B),isDragging:T===B,className:`px-4 py-3 text-left font-semibold text-gray-700 border-r border-gray-200 bg-gray-50 ${Q.sortable?"cursor-pointer hover:bg-gray-100":""}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[Q.label,Q.sortable&&s.jsx("span",{className:w&&w.key===Q.sortKey?"text-purple-600":"text-gray-400",children:w&&w.key===Q.sortKey?w.direction==="asc"?"":"":""})]})},B):null})})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:X.map(B=>s.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:I.map(Q=>{const Z=U[Q];return Z?s.jsx("td",{className:"px-4 py-3 border-r border-gray-100",style:{width:`${H[Q]}px`},children:Z.render(B)},Q):null})},B.key))})]})}),O&&s.jsx("div",{className:"space-y-2",children:X.map(B=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[10px] font-mono text-purple-600 mb-1 truncate",children:B.key}),U.status&&s.jsx("div",{className:"mb-2",children:U.status.render(B)})]}),U.actions&&s.jsx("div",{className:"flex-shrink-0",children:U.actions.render(B)})]}),U.description&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-1",children:"Description"}),s.jsx("div",{className:"text-xs text-gray-700 line-clamp-2",children:B.description||"-"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[U.audit&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Audit"}),s.jsx("div",{className:"text-gray-700 truncate",children:B.auditName||"-"})]}),U.auditYear&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Year"}),s.jsx("div",{className:"text-gray-700",children:B.auditYear||"-"})]}),U.dueDate&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Due Date"}),s.jsx("div",{className:"text-gray-700",children:B.dueDate?cs(B.dueDate,"PP"):"-"})]}),U.daysUntilDue&&B.daysUntilDue!==null&&B.daysUntilDue!==void 0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Days Until"}),s.jsxs("div",{className:`text-xs font-medium ${B.daysUntilDue<7?"text-red-600":B.daysUntilDue<14?"text-orange-600":"text-gray-600"}`,children:[B.daysUntilDue," days"]})]}),U.daysOverdue&&B.dueDate&&(()=>{const Q=new Date,Z=new Date(B.dueDate),$=Math.floor((Q.getTime()-Z.getTime())/(1e3*60*60*24));return $>0?s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Days Overdue"}),s.jsxs("div",{className:`text-xs font-medium ${$>30?"text-red-600":$>15?"text-orange-600":"text-gray-600"}`,children:[$," days"]})]}):null})(),U.riskLevel&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Risk"}),s.jsx("div",{children:U.riskLevel.render(B)})]}),U.responsible&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Responsible"}),s.jsx("div",{className:"text-gray-700 text-[10px] truncate",children:B.responsibleEmail||"-"})]}),U.cLevel&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"C-Level"}),s.jsx("div",{className:"text-gray-700 text-[10px] truncate",children:B.cLevel||"-"})]}),U.auditLead&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-0.5",children:"Audit Lead"}),s.jsx("div",{className:"text-gray-700 text-[10px] truncate",children:B.auditLead||"-"})]})]})]})},B.key))})]}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No actions found"})})]})}),b&&x&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-2 md:p-4",children:s.jsxs("div",{className:F("bg-white rounded-lg shadow-xl w-full overflow-hidden flex flex-col",O?"max-w-full max-h-[95vh]":"max-w-3xl max-h-[85vh]"),children:[s.jsxs("div",{className:F("border-b border-gray-200 flex justify-between items-center bg-gradient-to-r from-purple-50 to-indigo-50 relative",O?"px-3 py-3":"px-6 py-4"),children:[s.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[s.jsx("h3",{className:F("font-semibold text-gray-900",O?"text-base":"text-lg"),children:"Action Details"}),s.jsx("p",{className:F("text-gray-600 mt-1",O?"text-xs":"text-sm"),children:x.key})]}),s.jsx("button",{onClick:()=>{y(!1),v(null)},className:F("transition-colors flex-shrink-0 rounded-full hover:bg-gray-200 active:bg-gray-300 relative z-10",O?"text-gray-700 bg-white shadow-sm p-1 border border-gray-300":"text-gray-500 hover:text-gray-700 p-1"),"aria-label":"Close modal",children:s.jsx("svg",{className:F("fill-none stroke-currentColor",O?"w-4 h-4":"w-6 h-6"),viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:F("flex-1 overflow-auto",O?"p-3":"p-6"),children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ACTION SUMMARY"}),s.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:x.summary})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ACTION DESCRIPTION"}),s.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg whitespace-pre-wrap",children:x.description||"No description available"})]}),x.findingDescription&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"FINDING DESCRIPTION"}),s.jsx("p",{className:"text-gray-900 bg-blue-50 p-3 rounded-lg whitespace-pre-wrap border-l-4 border-blue-500",children:x.findingDescription})]}),s.jsxs("div",{className:F("grid gap-4",O?"grid-cols-1":"grid-cols-2"),children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"STATUS"}),s.jsx(tt,{variant:J(x.status),children:x.status})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"DUE DATE"}),s.jsx("p",{className:"text-gray-900",children:x.dueDate?cs(x.dueDate,"PPP"):"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ACTION RESPONSIBLE"}),s.jsx("p",{className:"text-gray-900",children:x.responsibleEmail||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"C-LEVEL"}),s.jsx("p",{className:"text-gray-900",children:x.cLevel||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"AUDIT NAME"}),s.jsx("p",{className:"text-gray-900",children:x.auditName||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"AUDIT YEAR"}),s.jsx("p",{className:"text-gray-900",children:x.auditYear||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"AUDIT LEAD"}),s.jsx("p",{className:"text-gray-900",children:x.auditLead||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"RISK LEVEL"}),s.jsx(tt,{variant:x.riskLevel==="Critical"?"danger":x.riskLevel==="High"?"warning":x.riskLevel==="Medium"?"info":"default",children:x.riskLevel||"Unassigned"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"FINANCIAL IMPACT"}),s.jsx("p",{className:"text-gray-900 font-semibold text-indigo-600",children:x.financialImpact>0?Hr(x.financialImpact):"-"})]})]})]})}),s.jsx("div",{className:F("border-t border-gray-200 bg-gray-50 flex justify-end",O?"px-3 py-3":"px-6 py-4"),children:s.jsx(ze,{variant:"outline",size:O?"sm":"md",onClick:()=>{y(!1),v(null)},children:"Close"})})]})}),S&&s.jsx(_7,{isOpen:N,onClose:()=>j(!1),findingKey:S.key,findingSummary:S.summary,findingData:S})]}):null},Ls={getUsers:async()=>Re("users",{success:!0,data:[]}),getAccessManagementUsers:async()=>{const t=[{id:1,email:"mahmut@turan.com",name:"Mahmut Turan",role:"admin",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:2,email:"dept1.director@example.com",name:"Department 1 Director",role:"department_director",department:"Operations",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:3,email:"dept2.director@example.com",name:"Department 2 Director",role:"department_director",department:"Finance",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:4,email:"dept3.director@example.com",name:"Department 3 Director",role:"department_director",department:"IT",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:5,email:"dept4.director@example.com",name:"Department 4 Director",role:"department_director",department:"HR",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:6,email:"dept5.director@example.com",name:"Department 5 Director",role:"department_director",department:"Marketing",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:7,email:"manager1@example.com",name:"Manager One",role:"team_manager",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:8,email:"manager2@example.com",name:"Manager Two",role:"team_manager",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:9,email:"cfo@example.com",name:"Chief Financial Officer",role:"top_management",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:10,email:"cto@example.com",name:"Chief Technology Officer",role:"top_management",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:11,email:"management1@example.com",name:"Management User One",role:"management",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:12,email:"management2@example.com",name:"Management User Two",role:"management",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];return Re("access-management-users",{success:!0,data:t})},getUser:async t=>{const e={id:t,email:"user@example.com",name:"Mock User",role:"team",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Re("user",{success:!0,data:e})},createUser:async t=>{const e={id:Date.now(),email:t.email,name:t.name,role:"team",managers_email:t.managers_email,vp_email:t.vp_email,department:t.department,status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Re("create-user",{success:!0,data:e})},updateUser:async(t,e)=>{const n={id:t,email:"user@example.com",name:"Mock User",role:"team",status:e.status||"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Re("update-user",{success:!0,data:n})},deleteUser:async t=>Re("delete-user",{success:!0}),getUserRole:async t=>{const e={id:1,name:"team",description:"Team member",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Re("user-role",{success:!0,data:e})},getExternalUsers:async()=>Re("external-users",{success:!0,data:[]}),getExternalUser:async t=>{const e={id:t,email:"external@example.com",name:"External User",is_active:!0,must_reset_password:!1,created_at:new Date().toISOString()};return Re("external-user",{success:!0,data:e})},createExternalUser:async t=>{const e={id:Date.now(),email:t.email,name:t.name,company:t.company,access_reason:t.access_reason,expires_at:t.expires_at,notes:t.notes,role:t.role,is_active:!0,must_reset_password:!0,created_at:new Date().toISOString()};return Re("create-external-user",{success:!0,data:e})},updateExternalUser:async(t,e)=>{const n={id:t,email:"external@example.com",name:"External User",is_active:!0,must_reset_password:!1,created_at:new Date().toISOString()};return Re("update-external-user",{success:!0,data:n})},deleteExternalUser:async t=>Re("delete-external-user",{success:!0}),getExternalUserPermissions:async t=>Re("external-user-permissions",{success:!0,data:[]}),updateExternalUserPermissions:async(t,e)=>Re("update-external-user-permissions",{success:!0}),getRoles:async()=>Re("roles",{success:!0,data:[]}),getRole:async t=>{const e={id:t,name:"team",description:"Team member",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Re("role",{success:!0,data:e})},createRole:async t=>{const e={id:Date.now(),name:t.name,description:t.description,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Re("create-role",{success:!0,data:e})},updateRole:async(t,e)=>{const n={id:t,name:e.name||"team",description:e.description,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Re("update-role",{success:!0,data:n})},deleteRole:async t=>Re("delete-role",{success:!0}),syncGoogleGroup:async()=>Re("sync-google-group",{success:!0,data:{stats:{},timestamp:new Date().toISOString()}})},Yh=({onSelectUser:t,className:e="",filterByRole:n})=>{const[r,i]=L.useState(!1),[a,o]=L.useState(""),[c,u]=L.useState([]),[f,h]=L.useState([]),[p,m]=L.useState(!1),x=L.useRef(null),v=oy(a,300);L.useEffect(()=>{r&&(async()=>{try{m(!0);const w=await Ls.getAccessManagementUsers();if(w.success&&w.data){const k=w.data;let N=k;n&&(Array.isArray(n)?N=k.filter(S=>n.includes(S.role)):N=k.filter(S=>S.role===n));const j=N.filter(S=>S.status==="active");u(j),h(j)}}catch{}finally{m(!1)}})()},[r,n]),L.useEffect(()=>{if(!v){h(c);return}const y=c.filter(w=>{var k;return w.email.toLowerCase().includes(v.toLowerCase())||((k=w.name)==null?void 0:k.toLowerCase().includes(v.toLowerCase()))});h(y)},[v,c]),L.useEffect(()=>{const y=w=>{x.current&&!x.current.contains(w.target)&&i(!1)};return r&&document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[r]);const b=y=>{t(y),i(!1),o("")};return s.jsxs("div",{className:`relative hidden md:block ${e}`,ref:x,children:[s.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>i(!r),className:"flex items-center gap-[6.4px] px-[9.6px] py-[6.4px] h-auto text-[10px] whitespace-nowrap",children:[s.jsx("svg",{className:"w-[12.8px] h-[12.8px] flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsx("span",{className:"whitespace-nowrap",children:"View As"})]}),r&&s.jsxs("div",{className:F("absolute top-full right-0 mt-2 z-[100]","bg-white rounded-lg shadow-2xl border-2 border-gray-300","overflow-hidden flex flex-col","w-72 max-h-80"),children:[s.jsx("div",{className:"p-[11px] border-b border-gray-200",children:s.jsx(Tn,{placeholder:"Search users...",value:a,onChange:y=>o(y.target.value),fullWidth:!0,autoFocus:!1,className:"text-[15px]",style:{fontSize:"15px"}})}),s.jsx("div",{className:"overflow-y-auto flex-1",children:p?s.jsx("div",{className:"flex items-center justify-center p-7",children:s.jsx(Ct,{size:"md"})}):f.length===0?s.jsxs("div",{className:"text-center p-7 text-gray-500",children:[s.jsx("svg",{className:"mx-auto h-11 w-11 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),s.jsx("p",{className:"mt-2 text-[12px]",children:"No users found"})]}):s.jsx("div",{className:"divide-y divide-gray-100",children:f.map(y=>{var w;return s.jsx("button",{onClick:()=>b(y.email),className:"w-full text-left px-[12px] py-[8.5px] hover:bg-purple-50 active:bg-purple-100 transition-colors",children:s.jsxs("div",{className:"flex items-center gap-[8.8px]",children:[s.jsx("div",{className:"w-[24px] h-[24px] rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-semibold text-[10.5px] flex-shrink-0",children:((w=y.name)==null?void 0:w.charAt(0))||y.email.charAt(0).toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-[10.5px] font-medium text-gray-900 truncate",children:y.name||y.email}),s.jsx("p",{className:"text-[9px] text-gray-500 truncate",children:y.email}),y.role&&s.jsx("span",{className:"inline-block mt-[2.8px] text-[9px] px-[6px] py-[1.5px] bg-gray-100 text-gray-700 rounded",children:y.role.replace("_"," ")})]})]})},y.email)})})})]})]})},k7=({onSelectUser:t,filterByRole:e})=>{const[n,r]=L.useState(!1),[i,a]=L.useState(""),[o,c]=L.useState([]),[u,f]=L.useState([]),[h,p]=L.useState(!1),m=oy(i,300);L.useEffect(()=>{n&&(async()=>{try{p(!0);const b=await Ls.getAccessManagementUsers();if(b.success&&b.data){const y=b.data;let w=y;e&&(Array.isArray(e)?w=y.filter(N=>e.includes(N.role)):w=y.filter(N=>N.role===e));const k=w.filter(N=>N.status==="active");c(k),f(k)}}catch{}finally{p(!1)}})()},[n,e]),L.useEffect(()=>{if(!m){f(o);return}const v=o.filter(b=>{var y;return b.email.toLowerCase().includes(m.toLowerCase())||((y=b.name)==null?void 0:y.toLowerCase().includes(m.toLowerCase()))});f(v)},[m,o]),L.useEffect(()=>{if(n){const v=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${v}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,v)}}},[n]);const x=v=>{t(v),r(!1),a("")};return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>r(!0),className:"flex items-center justify-center w-8 h-8 rounded-full bg-purple-100 text-purple-600 active:bg-purple-200 transition-colors touch-manipulation","aria-label":"View As",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),n&&s.jsxs("div",{className:"fixed inset-0 z-[9999] md:hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>r(!1)}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl shadow-2xl max-h-[65vh] flex flex-col transform transition-transform duration-300 ease-out",style:{animation:"slideUp 0.3s ease-out"},children:[s.jsx("div",{className:"flex justify-center pt-2 pb-1.5",children:s.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),s.jsxs("div",{className:"px-3 pb-2 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"View As User"}),s.jsx("button",{onClick:()=>r(!1),className:"p-1.5 -mr-1.5 text-gray-400 hover:text-gray-600 active:bg-gray-100 rounded-full transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx(Tn,{placeholder:"Search users...",value:i,onChange:v=>a(v.target.value),fullWidth:!0,autoFocus:!0,className:"text-sm",style:{fontSize:"16px"}})]}),s.jsx("div",{className:"overflow-y-auto flex-1 px-3 py-1.5",children:h?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Ct,{size:"md"})}):u.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("svg",{className:"mx-auto h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),s.jsx("p",{className:"mt-2 text-xs",children:"No users found"})]}):s.jsx("div",{className:"divide-y divide-gray-100",children:u.map(v=>{var b;return s.jsx("button",{onClick:()=>x(v.email),className:"w-full text-left px-2 py-2.5 active:bg-purple-50 transition-colors touch-manipulation",children:s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:"w-9 h-9 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 font-semibold text-sm flex-shrink-0",children:((b=v.name)==null?void 0:b.charAt(0))||v.email.charAt(0).toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:v.name||v.email}),s.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:v.email}),v.role&&s.jsx("span",{className:"inline-block mt-1.5 text-[10px] px-2 py-0.5 bg-gray-100 text-gray-700 rounded-full",children:v.role.replace("_"," ")})]})]})},v.email)})})})]})]})]})},Ot={getAuditFindings:async t=>{let e=[...mi];return t!=null&&t.audit_name&&(e=e.filter(n=>n.audit_name===t.audit_name)),t!=null&&t.audit_year&&(e=e.filter(n=>n.audit_year===t.audit_year)),t!=null&&t.status&&(e=e.filter(n=>n.status===t.status)),t!=null&&t.risk_level&&(e=e.filter(n=>n.risk_level===t.risk_level)),Re("audit-findings",e)},getAuditFinding:async t=>{const e=mi.find(n=>n.id===t);if(!e)throw new Error("Finding not found");return Re("audit-finding",e)},createAuditFinding:async t=>{const e={id:mi.length+1,finding_id:`FND-${String(mi.length+1).padStart(3,"0")}`,finding_name:t.finding_name,finding_description:t.finding_description||void 0,audit_type:t.audit_type||void 0,audit_type_other:t.audit_type_other||void 0,risk_type:t.risk_type||void 0,internal_control_element:t.internal_control_element||void 0,country:t.country||void 0,audit_year:t.audit_year||void 0,audit_name:t.audit_name,audit_key:t.audit_key||void 0,risk_level:t.risk_level||void 0,financial_impact:t.financial_impact||void 0,status:t.status||"Open",created_by:"mahmut@turan.com",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return mi.push(e),Re("create-audit-finding",{success:!0,data:e})},updateAuditFinding:async(t,e)=>{const n=mi.findIndex(a=>a.id===t);if(n===-1)throw new Error("Finding not found");const i={...mi[n],...e,updated_at:new Date().toISOString()};return mi[n]=i,Re("update-audit-finding",{success:!0,data:i})},deleteAuditFinding:async t=>{const e=mi.findIndex(n=>n.id===t);return e!==-1&&mi.splice(e,1),Re("delete-audit-finding",{success:!0})},getDropdownOptions:async t=>{const e=Il[t]||[];return Re("dropdown-options",e)},getDropdownOptionsFull:async t=>{const e=Il[t]||[];return Re("dropdown-options-full",e.map((n,r)=>({id:r+1,field_name:t,option_value:n,display_order:r+1,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})))},getDropdownOptionsByParent:async(t,e)=>{const n=Il[t]||[];return Re("dropdown-options-by-parent",n.map((r,i)=>({id:i+1,field_name:t,option_value:r,display_order:i+1,is_active:!0,parent_department:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})))},createDropdownOption:async t=>{const e={id:Date.now(),field_name:t.field_name,option_value:t.option_value,display_order:t.display_order||1,is_active:!0,parent_department:t.parent_department||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Re("create-dropdown-option",{success:!0,data:e})},updateDropdownOption:async(t,e)=>{const n={id:t,field_name:"mock",option_value:e.option_value||"mock",display_order:e.display_order||1,is_active:e.is_active!==void 0?e.is_active:!0,parent_department:e.parent_department||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Re("update-dropdown-option",{success:!0,data:n})},deleteDropdownOption:async t=>Re("delete-dropdown-option",{success:!0}),addAttachment:async(t,e)=>{const n={id:Date.now(),finding_id:t,file_name:e.file_name,file_size:e.file_size,file_type:e.file_type,file_path:e.file_path,uploaded_by:"mahmut@turan.com",uploaded_at:new Date().toISOString()};return Re("add-attachment",{success:!0,data:n})},deleteAttachment:async t=>Re("delete-attachment",{success:!0}),getFindingActions:async t=>Re("finding-actions",[]),getFindingAction:async t=>{const e={id:t,action_id:`ACT-${t}`,finding_id:1,action_description:"Mock action",due_date:new Date().toISOString(),audit_lead:"John Doe",action_responsible:"Jane Smith",audit_name:"Mock Audit",audit_year:"2024",status:"Open",created_by:"mahmut@turan.com",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Re("finding-action",e)},createFindingAction:async t=>{const e={id:Date.now(),action_id:`ACT-${Date.now()}`,finding_id:t.finding_id,action_description:t.action_description,due_date:t.due_date,audit_lead:t.audit_lead,action_responsible:t.action_responsible,action_responsible_email:t.action_responsible_email,action_responsible_vp:t.action_responsible_vp,action_responsible_clevel:t.action_responsible_clevel,audit_name:"Mock Audit",audit_year:"2024",status:"Open",created_by:"mahmut@turan.com",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Re("create-finding-action",{success:!0,data:e})},updateFindingAction:async(t,e)=>{const n={id:t,action_id:`ACT-${t}`,finding_id:1,action_description:e.action_description||"Mock action",due_date:e.due_date||new Date().toISOString(),audit_lead:e.audit_lead||"John Doe",action_responsible:e.action_responsible||"Jane Smith",audit_name:"Mock Audit",audit_year:"2024",status:e.status||"Open",created_by:"mahmut@turan.com",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Re("update-finding-action",{success:!0,data:n})},deleteFindingAction:async t=>Re("delete-finding-action",{success:!0}),getUsersByRole:async t=>t==="department_director"?Re("users-by-role",[{id:1,email:"dept1.director@example.com",name:"Department 1 Director",department:"Operations"},{id:2,email:"dept2.director@example.com",name:"Department 2 Director",department:"Finance"},{id:3,email:"dept3.director@example.com",name:"Department 3 Director",department:"IT"},{id:4,email:"dept4.director@example.com",name:"Department 4 Director",department:"HR"},{id:5,email:"dept5.director@example.com",name:"Department 5 Director",department:"Marketing"}]):Re("users-by-role",[{id:1,email:"user1@example.com",name:"User One",department:"IT"},{id:2,email:"user2@example.com",name:"User Two",department:"Finance"}]),getUserHierarchy:async t=>Re("user-hierarchy",{vp_email:"vp@example.com",c_level_email:"cfo@example.com"}),getFindingHistory:async t=>Re("finding-history",{success:!0,data:[]}),getActionHistory:async t=>Re("action-history",{success:!0,data:[]}),bulkUploadFindings:async t=>Re("bulk-upload-findings",{success:!0,data:{createdCount:5,errors:[]}})},N7={COMPLETED:"Completed",Completed:"Completed","RISK ACCEPTED":"Risk Accepted","Risk Accepted":"Risk Accepted",Open:"Open",Overdue:"Overdue","In Progress":"In Progress"},c0=t=>N7[t]||t,Wn={Open:"rgba(59, 130, 246, 0.8)",Overdue:"rgba(239, 68, 68, 0.8)",Completed:"rgba(34, 197, 94, 0.8)","Risk Accepted":"rgba(147, 51, 234, 0.8)","In Progress":"rgba(59, 130, 246, 0.8)"},S7={COMPLETED:"success",Completed:"success",Open:"danger",Overdue:"warning","In Progress":"info","RISK ACCEPTED":"default","Risk Accepted":"default"},d0=t=>S7[t]||"default",C7=()=>{var In,wr,oi,Jn,qs,ur,bt,jr,Ir,Yn;const[t,e]=L.useState("2024+"),[n,r]=L.useState("2025"),[i,a]=L.useState(!1),[o,c]=L.useState(""),[u,f]=L.useState(!1),[h,p]=L.useState(!1),[m,x]=L.useState(!1),[v,b]=L.useState(()=>typeof window<"u"?window.innerWidth<640:!1),[y,w]=L.useState(0),[k,N]=L.useState(0),[j,S]=L.useState(null),[A,O]=L.useState(null),[M,z]=L.useState(null),[I,D]=L.useState(null),T=jt.useRef(null),q=jt.useRef(null),H=jt.useRef(null),[G,ee]=L.useState(!1),[X,J]=L.useState(!1),[K,W]=L.useState("overdue"),[R,U]=L.useState(!1),[B,Q]=L.useState(null),[Z,$]=L.useState([]),[ne,ae]=L.useState(!1),[ce,ye]=L.useState("actions"),[Be,Ue]=L.useState(!1),[it,je]=L.useState(!1),[dt,st]=L.useState(!1),ft=L.useRef(!1),[Oe,re]=L.useState("2025"),[xe,we]=L.useState(!1),[Se,_e]=L.useState([]),te=L.useRef(null),{user:Ne,role:fe,isImpersonating:pe,originalUser:Le,startImpersonation:Qe}=Vr();L.useEffect(()=>{G&&(async()=>{try{const Ce=(await Ot.getDropdownOptions("audit_year")).map(ke=>parseInt(ke)).filter(ke=>!isNaN(ke)).sort((ke,me)=>me-ke),le=Ce.length>0?Ce:[new Date().getFullYear()];_e(le),le.length>0&&le[0]!==void 0&&!Oe&&re(le[0].toString())}catch(be){console.error("Failed to fetch years:",be);const Ce=new Date().getFullYear();_e([Ce]),Oe||re(Ce.toString())}})()},[G]),L.useEffect(()=>{const oe=be=>{te.current&&!te.current.contains(be.target)&&we(!1)};if(xe)return document.addEventListener("mousedown",oe),()=>{document.removeEventListener("mousedown",oe)}},[xe]);const qe=oe=>{re(oe.toString()),we(!1)},et=F("shadow-md hover:shadow-lg transition-all whitespace-nowrap",v?"w-full justify-center py-3 text-base":"min-w-[150px]");L.useEffect(()=>{const oe=()=>{b(window.innerWidth<640)};return oe(),window.addEventListener("resize",oe),()=>window.removeEventListener("resize",oe)},[]);const _t=async oe=>{try{await Qe(oe),window.location.reload()}catch{}};jt.useEffect(()=>{console.log("Dashboard Role:",fe),console.log("Should show View As:",fe==="admin")},[fe]),jt.useEffect(()=>{h&&T.current&&setTimeout(()=>{const oe=T.current;if(oe){const be=oe.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:be-200,behavior:"smooth"})}},200)},[h]),jt.useEffect(()=>{u&&q.current&&setTimeout(()=>{const oe=q.current;if(oe){const be=oe.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:be-200,behavior:"smooth"})}},200)},[u]),jt.useEffect(()=>{const oe=Ce=>{Ce.key==="Escape"&&m&&x(!1)},be=Ce=>{const le=Ce.target;m&&H.current&&!H.current.contains(le)&&x(!1)};if(m)return window.addEventListener("keydown",oe),window.addEventListener("click",be),()=>{window.removeEventListener("keydown",oe),window.removeEventListener("click",be)}},[m]);const{data:Pe,isLoading:Lt}=sA(t),{data:Pt,isLoading:dr}=iA(t),{data:On,isLoading:nr}=aA(void 0,void 0),{data:Vt,isLoading:$n}=F1(t),{data:kt,isLoading:Kt}=F1("2024+"),{data:Jt,isLoading:bn}=fA(),{data:yt,isLoading:en}=hA(),{data:ot,isLoading:tn}=mA({}),{data:ln,isLoading:Rt}=gA(t),{data:qt,isLoading:on}=zk(),{data:vt,isLoading:gn}=pA(),{data:Ut,isLoading:Nn}=yA(),{data:Qt,isLoading:Rn}=vA(),vr=jt.useCallback(oe=>{if(oe==null)return"-";let be=null;if(typeof oe=="number")be=Number.isNaN(oe)?null:oe;else{const Ge=oe.trim();if(!Ge||Ge==="-")return"-";const wt=Ge.replace(/,/g,""),cn=Number(wt);be=Number.isFinite(cn)?cn:null}if(be===null)return typeof oe=="string"?oe:"-";if(be===0)return"0";const Ce=be<0?"-":"",le=Math.abs(be),ke=(Ge,wt,cn)=>{const Gt=Ge/wt,Ar=Gt>=100?0:Gt>=10?1:2;return`${Gt.toFixed(Ar)}${cn}`};let me;return le>=1e9?me=ke(le,1e9,"B"):le>=1e6?me=ke(le,1e6,"M"):le>=1e3?me=ke(le,1e3,"K"):me=Math.round(le).toLocaleString("en-US"),`${Ce}${me}`},[]),{data:Mt,isLoading:Cr}=bA(),{data:se,isLoading:Fe}=wA(),Ke=xA(t),nt=Ke.data,Ft=Ke.isLoading,{data:wn,isLoading:rr}=oA(t),{data:Is,isLoading:br}=lA(t),Zt=L.useMemo(()=>{var me,Ge,wt,cn;if(!(Vt!=null&&Vt.statusDistribution))return{labels:[],datasets:[]};const oe=Vt.statusDistribution,be=Object.keys(oe),Ce=Object.values(oe),le={Open:Wn.Open,"Risk Accepted":Wn["Risk Accepted"],Completed:Wn.Completed,Overdue:Wn.Overdue},ke={Open:((me=Wn.Open)==null?void 0:me.replace("0.8","1"))||"rgba(59, 130, 246, 1)","Risk Accepted":((Ge=Wn["Risk Accepted"])==null?void 0:Ge.replace("0.8","1"))||"rgba(147, 51, 234, 1)",Completed:((wt=Wn.Completed)==null?void 0:wt.replace("0.8","1"))||"rgba(34, 197, 94, 1)",Overdue:((cn=Wn.Overdue)==null?void 0:cn.replace("0.8","1"))||"rgba(239, 68, 68, 1)"};return{labels:be,datasets:[{data:Ce,backgroundColor:be.map(Gt=>le[Gt]||"rgba(156, 163, 175, 0.8)"),borderColor:be.map(Gt=>ke[Gt]||"rgba(156, 163, 175, 1)"),borderWidth:2}]}},[Vt]),Fs=L.useMemo(()=>{var ke,me,Ge,wt;if(!ln||typeof ln!="object")return{labels:[],datasets:[]};const oe=ln,be=Object.keys(oe).filter(cn=>cn!=="Unassigned").slice(0,10),Ce=["Open","Risk Accepted","Completed","Overdue"],le={Open:((ke=Wn.Open)==null?void 0:ke.replace("0.8","0.9"))||"rgba(59, 130, 246, 0.9)","Risk Accepted":((me=Wn["Risk Accepted"])==null?void 0:me.replace("0.8","0.9"))||"rgba(147, 51, 234, 0.9)",Completed:((Ge=Wn.Completed)==null?void 0:Ge.replace("0.8","0.9"))||"rgba(34, 197, 94, 0.9)",Overdue:((wt=Wn.Overdue)==null?void 0:wt.replace("0.8","0.9"))||"rgba(239, 68, 68, 0.9)"};return{labels:be,datasets:Ce.map(cn=>({label:cn,data:be.map(Gt=>{const Ar=oe[Gt];return Ar&&Ar[cn]||0}),backgroundColor:le[cn]||"rgba(156, 163, 175, 0.9)",barPercentage:.7,categoryPercentage:.8}))}},[ln]),zs=L.useMemo(()=>{var le,ke,me;if(!On||typeof On!="object")return{labels:[],datasets:[]};const oe=Object.keys(On).sort(),be=["Completed","Risk Accepted","Open"],Ce={Completed:((le=Wn.Completed)==null?void 0:le.replace("0.8","0.9"))||"rgba(34, 197, 94, 0.9)","Risk Accepted":((ke=Wn["Risk Accepted"])==null?void 0:ke.replace("0.8","0.9"))||"rgba(147, 51, 234, 0.9)",Open:((me=Wn.Open)==null?void 0:me.replace("0.8","0.9"))||"rgba(59, 130, 246, 0.9)"};return{labels:oe,datasets:be.map(Ge=>({label:Ge,data:oe.map(wt=>{const cn=On[wt];return cn&&typeof cn=="object"&&cn[Ge]||0}),backgroundColor:Ce[Ge]||"rgba(156, 163, 175, 0.9)"}))}},[On]),to=L.useMemo(()=>{if(!ot||typeof ot!="object")return{labels:[],datasets:[]};const oe=["-720360","-360180","-18090","-9030","-300","030","3090","90180","180360","360720","720+"],be={"-720360":{bg:"rgba(185, 28, 28, 0.9)",border:"rgba(185, 28, 28, 1)"},"-360180":{bg:"rgba(220, 38, 38, 0.9)",border:"rgba(220, 38, 38, 1)"},"-18090":{bg:"rgba(239, 68, 68, 0.9)",border:"rgba(239, 68, 68, 1)"},"-9030":{bg:"rgba(248, 113, 113, 0.9)",border:"rgba(248, 113, 113, 1)"},"-300":{bg:"rgba(251, 146, 60, 0.9)",border:"rgba(251, 146, 60, 1)"},"030":{bg:"rgba(250, 204, 21, 0.9)",border:"rgba(250, 204, 21, 1)"},"3090":{bg:"rgba(163, 230, 53, 0.9)",border:"rgba(163, 230, 53, 1)"},"90180":{bg:"rgba(74, 222, 128, 0.9)",border:"rgba(74, 222, 128, 1)"},"180360":{bg:"rgba(34, 197, 94, 0.9)",border:"rgba(34, 197, 94, 1)"},"360720":{bg:"rgba(22, 163, 74, 0.9)",border:"rgba(22, 163, 74, 1)"},"720+":{bg:"rgba(21, 128, 61, 0.9)",border:"rgba(21, 128, 61, 1)"}},Ce=oe.filter(le=>ot[le]!==void 0);return{labels:Ce,datasets:[{label:"Number of Actions",data:Ce.map(le=>ot[le]||0),backgroundColor:Ce.map(le=>{var ke;return((ke=be[le])==null?void 0:ke.bg)||"rgba(156, 163, 175, 0.9)"}),borderColor:Ce.map(le=>{var ke;return((ke=be[le])==null?void 0:ke.border)||"rgba(156, 163, 175, 1)"}),borderWidth:2}]}},[ot]),Bs=L.useMemo(()=>vt!=null&&vt.labels?{labels:vt.labelsWithGroups?vt.labelsWithGroups.map(be=>be.fullLabel):vt.labels,datasets:[{label:"2024",data:vt.data2024,backgroundColor:"rgba(251, 146, 60, 0.2)",borderColor:"rgba(251, 146, 60, 1)",borderWidth:v?4:3,pointBackgroundColor:"rgba(251, 146, 60, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(251, 146, 60, 1)",pointRadius:v?6:5,pointHoverRadius:8,tension:.1},{label:"2025",data:vt.data2025,backgroundColor:"rgba(59, 130, 246, 0.2)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:v?4:3,pointBackgroundColor:"rgba(59, 130, 246, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(59, 130, 246, 1)",pointRadius:v?6:5,pointHoverRadius:8,tension:.1}]}:{labels:[],datasets:[]},[vt,v]),no=oe=>{c(oe),a(!0)},ii=async(oe,be,Ce)=>{ae(!0),Q({auditYear:oe,auditName:be,riskLevel:Ce}),U(!0);try{const le=ce==="actions"?await Xt.getActionsByAuditRiskDetail(oe,be,Ce):await Xt.getFindingsByAuditRiskDetail(oe,be,Ce);$(le)}catch(le){console.error("Failed to fetch audit risk data:",le),$([])}finally{ae(!1)}},ai=()=>{ee(!0)};jt.useEffect(()=>{if(!G)return;const oe=[];if(v){const be=setTimeout(()=>{const Ce=document.getElementById("audit-plan-section");if(Ce){const le=Ce.getBoundingClientRect(),ke=window.pageYOffset||document.documentElement.scrollTop,me=le.top+ke;window.scrollTo({top:Math.max(0,me-20),behavior:"smooth"})}},300);oe.push(be)}else{const be=setTimeout(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{const Ce=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);window.scrollTo({top:Ce,behavior:"smooth"})})})},1e3);oe.push(be)}return()=>{oe.forEach(be=>clearTimeout(be))}},[G,v]);const jn=()=>{ee(!1),Ue(!1),ft.current=!1,window.scrollTo({top:0,behavior:"smooth"})};jt.useEffect(()=>{if(!u&&!h){Ue(!1);return}const oe=()=>{if(!u&&!h){Ue(!1);return}const be=document.getElementById("scorecard-toggle");if(be){const Ce=be.getBoundingClientRect();Ue(Ce.top<0)}else Ue(!1)};return window.addEventListener("scroll",oe),oe(),()=>window.removeEventListener("scroll",oe)},[u,h]),jt.useEffect(()=>{if(!u&&!h){je(!1);return}const oe=()=>{var me,Ge;if((window.pageYOffset||document.documentElement.scrollTop)<100){je(!1);return}const Ce=(me=q.current)==null?void 0:me.getBoundingClientRect(),le=(Ge=T.current)==null?void 0:Ge.getBoundingClientRect(),ke=!!(u&&Ce&&Ce.top<200||h&&le&&le.top<200);je(ke)};return window.addEventListener("scroll",oe),oe(),()=>window.removeEventListener("scroll",oe)},[u,h]),jt.useEffect(()=>{if(!G){st(!1);return}if(!v){st(!1);return}const oe=()=>{const be=document.getElementById("audit-plan-section");if(!be){st(!1);return}const le=be.getBoundingClientRect().top<0;st(le)};return window.addEventListener("scroll",oe),oe(),()=>{window.removeEventListener("scroll",oe)}},[G,v]);const Zn=()=>{switch(fe){case"admin":return"Admin Dashboard - Full System Control";case"top_management":return"Executive Dashboard - Strategic Overview";case"department_director":return"Director Dashboard - Department Metrics";case"VP":return"VP Dashboard - High-Level Insights";case"team":return"Team Dashboard - Your Tasks & Projects";case"auditor":return"Auditor Dashboard - Your Audits";default:return"Dashboard - Overview"}},Sn=L.useMemo(()=>{const oe=Zt.labels,be=Zt.datasets&&Zt.datasets[0]?Zt.datasets[0]:void 0;if(!oe||!(be!=null&&be.data))return[];const Ce=Array.isArray(be.backgroundColor)?be.backgroundColor:oe.map(()=>be.backgroundColor||"#9ca3af");return oe.map((le,ke)=>{var me;return{label:le,value:Number(((me=be.data)==null?void 0:me[ke])??0),color:Ce[ke]||"#9ca3af"}})},[Zt]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:F("flex items-center",v?"gap-2":"gap-3"),children:[s.jsx("h1",{className:F("font-bold text-gray-900",v?"text-[12px]":"text-[20px]"),children:"Dashboard"}),s.jsx(tt,{variant:fe==="admin"?"danger":fe==="top_management"?"warning":fe==="department_director"?"info":"default",size:v?"xs":"md",children:fe==null?void 0:fe.replace("_"," ").toUpperCase()})]}),s.jsxs("p",{className:F("text-gray-500",v?"text-[7.2px] mt-0.5":"text-[9px]"),children:[Zn(),"  Welcome, ",(Ne==null?void 0:Ne.name)||"User","!"]})]}),s.jsx("div",{className:F("flex items-center gap-4",v&&"gap-1.5"),children:(fe==="admin"||pe&&(Le==null?void 0:Le.role)==="admin")&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"md:hidden",children:s.jsx(k7,{onSelectUser:_t,filterByRole:["team","team_manager"]})}),s.jsx("div",{className:"hidden md:block",children:s.jsx(Yh,{onSelectUser:_t,filterByRole:["team","team_manager"]})})]})})]}),s.jsx(ts,{component:"audit_projects_by_year_chart",children:s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:F("flex items-center justify-between mb-6",v&&"mb-4"),children:[s.jsx("h2",{className:F("font-bold text-gray-900",v?"text-[12.8px]":"text-[16px]"),children:"Performance Overview"}),s.jsxs("div",{ref:H,className:"relative flex items-center gap-2",children:[s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{onClick:()=>x(!m),className:F("relative inline-flex items-center justify-center rounded-lg transition-all duration-200 hover:scale-105",v?"h-[22.4px] px-[6.4px] gap-[4.8px]":"h-[28.8px] px-[9.6px] gap-[6.4px]",u||h||m?"bg-gradient-to-br from-purple-500 to-indigo-600 text-white shadow-lg shadow-purple-500/40":"bg-gray-100 text-gray-600 hover:bg-purple-100 hover:text-purple-600"),children:[m?s.jsx("svg",{className:F("flex-shrink-0",v?"w-[9.6px] h-[9.6px]":"w-[12.8px] h-[12.8px]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):s.jsx("svg",{className:F("flex-shrink-0",v?"w-[9.6px] h-[9.6px]":"w-[12.8px] h-[12.8px]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{className:F("font-medium",v?"text-[6.4px]":"text-[9px]"),children:"View Charts"}),(u||h)&&s.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:s.jsx("span",{className:"text-[8px] text-white",children:""})})]}),s.jsx("div",{className:"absolute right-0 top-full mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10",children:s.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-2 py-1 whitespace-nowrap shadow-lg",children:[m?"Close chart options":"Open chart options",s.jsx("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-gray-900 rotate-45"})]})})]}),m&&s.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-right-2 duration-200",children:[s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{onClick:()=>{f(!u)},className:F("relative rounded-full flex items-center justify-center transition-all duration-200","hover:scale-110",v?"w-8 h-8":"w-10 h-10",u?"bg-gradient-to-br from-purple-500 to-indigo-600 text-white shadow-lg shadow-purple-500/40":"bg-gray-100 text-gray-600 hover:bg-purple-100 hover:text-purple-600"),title:u?"Hide Charts":"See All Charts",children:[u?s.jsx("svg",{className:F(v?"w-4 h-4":"w-5 h-5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 15l7-7 7 7"})}):s.jsx("svg",{className:F(v?"w-4 h-4":"w-5 h-5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),u&&s.jsx("span",{className:F("absolute -top-1 -right-1 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",v?"w-3 h-3":"w-4 h-4"),children:s.jsx("span",{className:F("text-white",v?"text-[6px]":"text-[8px]"),children:""})})]}),s.jsx("div",{className:"absolute right-0 top-full mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10",children:s.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-2 py-1 whitespace-nowrap shadow-lg",children:[u?"Hide Charts":"See All Charts",s.jsx("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-gray-900 rotate-45"})]})})]}),s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{onClick:()=>{p(!h)},className:F("relative rounded-full flex items-center justify-center transition-all duration-200","hover:scale-110",v?"w-8 h-8":"w-10 h-10",h?"bg-gradient-to-br from-purple-500 to-indigo-600 text-white shadow-lg shadow-purple-500/40":"bg-gray-100 text-gray-600 hover:bg-purple-100 hover:text-purple-600"),title:"Control Analysis (4 charts)",children:[s.jsx("span",{className:F(v?"text-sm":"text-lg"),children:""}),h&&s.jsx("span",{className:F("absolute -top-1 -right-1 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",v?"w-3 h-3":"w-4 h-4"),children:s.jsx("span",{className:F("text-white",v?"text-[6px]":"text-[8px]"),children:""})})]}),s.jsx("div",{className:"absolute right-0 top-full mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10",children:s.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-2 py-1 whitespace-nowrap shadow-lg",children:["Control Analysis",s.jsx("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-gray-900 rotate-45"})]})})]})]})]})]}),s.jsxs("div",{className:F("grid gap-6",v?"hidden":"grid-cols-1 lg:grid-cols-2 xl:grid-cols-4"),children:[s.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-sm",children:[s.jsx(Nt,{title:"Audit Projects by Year",className:"border-b border-gray-200 pb-3"}),s.jsx("div",{className:"mt-4 grid grid-cols-6 gap-2",children:Lt?s.jsx("div",{className:"col-span-6 flex justify-center py-8",children:s.jsx(Ct,{size:"lg"})}):Pe&&Array.isArray(Pe)?(()=>{const oe={2025:"2.17",2024:"1.84",2023:"0.86",2022:"1.15",2021:"1.94"},be={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-3xl",layout:"vertical"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-lg",layout:"vertical"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl",layout:"vertical"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl",layout:"vertical"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl",layout:"vertical"}};return Pe.filter(le=>le.auditYear&&le.auditYear!=="Unknown"&&typeof le.auditYear=="string").slice(0,5).sort((le,ke)=>{const me=String(le.auditYear||"");return String(ke.auditYear||"").localeCompare(me)}).map((le,ke)=>{const me=be[le.auditYear]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl",layout:"vertical"};return s.jsxs("div",{className:F("relative p-2.5 overflow-hidden","hover:shadow-lg hover:scale-[1.02]","transition-all duration-300 ease-out","group cursor-pointer","border-2",me.bgColor,me.borderColor,me.shape,ke<2?"col-span-3":"col-span-2"),children:[s.jsx("div",{className:F("absolute inset-0 opacity-[0.03]",ke%2===0?"bg-[radial-gradient(circle_at_30%_30%,rgba(0,0,0,0.5)_1px,transparent_1px)] bg-[length:16px_16px]":"bg-[linear-gradient(45deg,transparent_25%,rgba(0,0,0,0.05)_25%,rgba(0,0,0,0.05)_50%,transparent_50%,transparent_75%,rgba(0,0,0,0.05)_75%)] bg-[length:12px_12px]")}),s.jsxs("div",{className:F("relative z-10 flex flex-col h-full",me.layout==="vertical"?"items-center justify-center":"items-start justify-between"),children:[s.jsxs("div",{className:F("flex items-center gap-1 mb-1.5",me.textColor),children:[s.jsx("div",{className:F("w-4 h-4 rounded flex items-center justify-center","bg-white/60 backdrop-blur-sm","border border-current/20"),children:s.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsx("p",{className:"text-[10px] font-semibold tracking-wide uppercase",children:le.auditYear})]}),s.jsx("div",{className:"mb-1.5",children:s.jsx("p",{className:F("text-2xl font-bold",me.textColor,"group-hover:scale-110 transition-transform duration-300"),children:le.count})}),s.jsxs("div",{className:F("flex items-center gap-0.5",me.textColor),children:[s.jsx("svg",{className:F("w-2.5 h-2.5 opacity-70"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),s.jsxs("p",{className:F("text-[9px] font-medium opacity-80 whitespace-nowrap"),children:[oe[le.auditYear]||"0"," per auditor"]})]})]}),me.shape==="rounded-lg"&&s.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 bg-white/20 transform rotate-45 translate-x-3 -translate-y-3"}),me.shape==="rounded-3xl"&&s.jsx("div",{className:"absolute bottom-0 left-0 w-10 h-10 bg-white/20 rounded-full blur-xl"}),me.shape==="rounded-xl"&&s.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 bg-white/20 rounded-full blur-lg"})]},ke)})})():s.jsx("div",{className:"col-span-6 text-center text-gray-500 py-8",children:"No data available"})})]}),s.jsx(LA,{investigations:Pt,loading:dr}),s.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-sm",children:[s.jsx(Nt,{title:"Fraud Internal Control by Year",className:"border-b border-gray-200 pb-3"}),s.jsx("div",{className:"mt-4 grid grid-cols-6 gap-2",children:bn?s.jsx("div",{className:"col-span-6 flex justify-center py-8",children:s.jsx(Ct,{size:"lg"})}):Jt!=null&&Jt.scoreCards&&Array.isArray(Jt.scoreCards)?(()=>{const oe={2025:"1.34M",2024:"2.71M",2023:"1.56M",2022:"3.50M",2021:"0.96M"},be=le=>{if(!le)return"0";const ke=typeof le=="string"?parseFloat(le.replace(/,/g,"")):le;return isNaN(ke)?"0":`${(ke/1e6).toFixed(2)}M`},Ce={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-3xl",layout:"vertical"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-lg",layout:"vertical"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl",layout:"vertical"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl",layout:"vertical"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl",layout:"vertical"}};return Jt.scoreCards.filter(le=>le.year&&le.year!=="2020").sort((le,ke)=>ke.year.localeCompare(le.year)).slice(0,5).map((le,ke)=>{const me=Ce[le.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl",layout:"vertical"};return s.jsxs("div",{className:F("relative p-2.5 overflow-hidden","hover:shadow-lg hover:scale-[1.02]","transition-all duration-300 ease-out","group cursor-pointer","border-2",me.bgColor,me.borderColor,me.shape,ke<2?"col-span-3":"col-span-2"),children:[s.jsx("div",{className:F("absolute inset-0 opacity-[0.03]",ke%2===0?"bg-[radial-gradient(circle_at_30%_30%,rgba(0,0,0,0.5)_1px,transparent_1px)] bg-[length:16px_16px]":"bg-[linear-gradient(45deg,transparent_25%,rgba(0,0,0,0.05)_25%,rgba(0,0,0,0.05)_50%,transparent_50%,transparent_75%,rgba(0,0,0,0.05)_75%)] bg-[length:12px_12px]")}),s.jsxs("div",{className:F("relative z-10 flex flex-col h-full",me.layout==="vertical"?"items-center justify-center":"items-start justify-between"),children:[s.jsxs("div",{className:F("flex items-center gap-1 mb-1.5",me.textColor),children:[s.jsx("div",{className:F("w-4 h-4 rounded flex items-center justify-center","bg-white/60 backdrop-blur-sm","border border-current/20"),children:s.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsx("p",{className:"text-[10px] font-semibold tracking-wide uppercase",children:le.year})]}),s.jsx("div",{className:"mb-1.5",children:s.jsx("p",{className:F(ke<2?"text-2xl":"text-[20px]","font-bold",me.textColor,"group-hover:scale-110 transition-transform duration-300"),children:be(le.impact)})}),s.jsxs("div",{className:F("flex items-center gap-0.5",me.textColor),children:[s.jsx("svg",{className:F("w-2.5 h-2.5 opacity-70"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),s.jsxs("p",{className:F("text-[9px] font-medium opacity-80 whitespace-nowrap"),children:[oe[le.year]||"0"," per auditor"]})]})]}),me.shape==="rounded-lg"&&s.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 bg-white/20 transform rotate-45 translate-x-3 -translate-y-3"}),me.shape==="rounded-3xl"&&s.jsx("div",{className:"absolute bottom-0 left-0 w-10 h-10 bg-white/20 rounded-full blur-xl"}),me.shape==="rounded-xl"&&s.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 bg-white/20 rounded-full blur-lg"})]},ke)})})():s.jsx("div",{className:"col-span-6 text-center text-gray-500 py-8",children:"No data available"})})]}),s.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-sm",children:[s.jsx(Nt,{title:"Loss Prevention Internal Control by Year",className:"border-b border-gray-200 pb-3"}),s.jsx("div",{className:"mt-4 grid grid-cols-6 gap-2",children:en?s.jsx("div",{className:"col-span-6 flex justify-center py-8",children:s.jsx(Ct,{size:"lg"})}):(()=>{const oe=(yt==null?void 0:yt.scoreCards)||(yt==null?void 0:yt.scoreCards2);if(!oe||!Array.isArray(oe))return s.jsx("div",{className:"col-span-6 text-center text-gray-500 py-8",children:"No data available"});const be={2025:"0.93M",2024:"0.76M",2023:"0.23M",2022:"0.07M",2021:"0.05M"},Ce=ke=>{if(!ke)return"0";const me=typeof ke=="string"?parseFloat(ke.replace(/,/g,"")):ke;return isNaN(me)?"0":`${(me/1e6).toFixed(2)}M`},le={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-3xl",layout:"vertical"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-lg",layout:"vertical"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl",layout:"vertical"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl",layout:"vertical"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl",layout:"vertical"}};return oe.filter(ke=>ke.year&&ke.year!=="2020").sort((ke,me)=>me.year.localeCompare(ke.year)).slice(0,5).map((ke,me)=>{const Ge=le[ke.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl",layout:"vertical"};return s.jsxs("div",{className:F("relative p-2.5 overflow-hidden","hover:shadow-lg hover:scale-[1.02]","transition-all duration-300 ease-out","group cursor-pointer","border-2",Ge.bgColor,Ge.borderColor,Ge.shape,me<2?"col-span-3":"col-span-2"),children:[s.jsx("div",{className:F("absolute inset-0 opacity-[0.03]",me%2===0?"bg-[radial-gradient(circle_at_30%_30%,rgba(0,0,0,0.5)_1px,transparent_1px)] bg-[length:16px_16px]":"bg-[linear-gradient(45deg,transparent_25%,rgba(0,0,0,0.05)_25%,rgba(0,0,0,0.05)_50%,transparent_50%,transparent_75%,rgba(0,0,0,0.05)_75%)] bg-[length:12px_12px]")}),s.jsxs("div",{className:F("relative z-10 flex flex-col h-full",Ge.layout==="vertical"?"items-center justify-center":"items-start justify-between"),children:[s.jsxs("div",{className:F("flex items-center gap-1 mb-1.5",Ge.textColor),children:[s.jsx("div",{className:F("w-4 h-4 rounded flex items-center justify-center","bg-white/60 backdrop-blur-sm","border border-current/20"),children:s.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsx("p",{className:"text-[10px] font-semibold tracking-wide uppercase",children:ke.year})]}),s.jsx("div",{className:"mb-1.5",children:s.jsx("p",{className:F(me<2?"text-2xl":"text-[20px]","font-bold",Ge.textColor,"group-hover:scale-110 transition-transform duration-300"),children:Ce(ke.impact)})}),s.jsxs("div",{className:F("flex items-center gap-0.5",Ge.textColor),children:[s.jsx("svg",{className:F("w-2.5 h-2.5 opacity-70"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),s.jsxs("p",{className:F("text-[9px] font-medium opacity-80 whitespace-nowrap"),children:[be[ke.year]||"0"," per auditor"]})]})]}),Ge.shape==="rounded-lg"&&s.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 bg-white/20 transform rotate-45 translate-x-3 -translate-y-3"}),Ge.shape==="rounded-3xl"&&s.jsx("div",{className:"absolute bottom-0 left-0 w-10 h-10 bg-white/20 rounded-full blur-xl"}),Ge.shape==="rounded-xl"&&s.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 bg-white/20 rounded-full blur-lg"})]},me)})})()})]})]}),v&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 via-indigo-50 to-purple-50 rounded-2xl p-2 shadow-inner",children:[s.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{label:"Audit",icon:"",index:0},{label:"Invest.",icon:"",index:1},{label:"Fraud",icon:"",index:2},{label:"LP",icon:"",index:3}].map(({label:oe,icon:be,index:Ce})=>s.jsxs("button",{onClick:()=>w(Ce),className:F("relative px-2 py-1.5 rounded-lg text-[10px] font-bold transition-all duration-300","active:scale-95",y===Ce?"bg-gradient-to-br from-purple-600 to-indigo-600 text-white shadow-lg transform scale-105":"bg-white/60 text-gray-600 hover:bg-white/80"),children:[s.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[s.jsx("span",{className:"text-sm",children:be}),s.jsx("span",{children:oe})]}),y===Ce&&s.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"})]},Ce))}),s.jsx("div",{className:"mt-3 flex items-center justify-center gap-1.5",children:[0,1,2,3].map(oe=>s.jsx("div",{className:F("h-1.5 rounded-full transition-all duration-500 ease-out",y===oe?"w-8 bg-gradient-to-r from-purple-600 to-indigo-600 shadow-md":"w-1.5 bg-white/60")},oe))})]}),s.jsxs("div",{className:"relative overflow-hidden",onTouchStart:oe=>{var be;O(null),S(((be=oe.targetTouches[0])==null?void 0:be.clientX)||null)},onTouchMove:oe=>{var be;O(((be=oe.targetTouches[0])==null?void 0:be.clientX)||null)},onTouchEnd:()=>{if(!j||!A)return;const oe=j-A;Math.abs(oe)>50&&(oe>0&&y<3?w(y+1):oe<0&&y>0&&w(y-1))},children:[y===0&&s.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:s.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[s.jsx(Nt,{title:"Audit Projects by Year",className:"border-b border-gray-200 pb-3 text-base font-bold"}),s.jsx("div",{className:"mt-4 space-y-3",children:Lt?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Ct,{size:"lg"})}):Pe&&Array.isArray(Pe)?(()=>{const oe={2025:"2.17",2024:"1.84",2023:"0.86",2022:"1.15",2021:"1.94"},be={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-2xl"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-xl"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl"}},Ce=Pe.filter(le=>le.auditYear&&le.auditYear!=="Unknown"&&typeof le.auditYear=="string").slice(0,5).sort((le,ke)=>{const me=String(le.auditYear||"");return String(ke.auditYear||"").localeCompare(me)});return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ce.slice(0,2).map((le,ke)=>{const me=be[le.auditYear]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return s.jsx("div",{className:F("relative p-4 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",me.bgColor,me.borderColor,me.shape),children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[s.jsx("p",{className:F("text-[10px] font-bold uppercase mb-2",me.textColor),children:le.auditYear}),s.jsx("p",{className:F("text-2xl font-bold mb-1",me.textColor),children:le.count}),s.jsxs("p",{className:F("text-[9px] font-medium opacity-70",me.textColor),children:[oe[le.auditYear]||"0"," per auditor"]})]})},ke)})}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:Ce.slice(2,5).map((le,ke)=>{const me=be[le.auditYear]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return s.jsx("div",{className:F("relative p-3 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",me.bgColor,me.borderColor,me.shape),children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[s.jsx("p",{className:F("text-[9px] font-bold uppercase mb-1.5",me.textColor),children:le.auditYear}),s.jsx("p",{className:F("text-xl font-bold mb-1",me.textColor),children:le.count}),s.jsxs("p",{className:F("text-[8px] font-medium opacity-70",me.textColor),children:[oe[le.auditYear]||"0"," per auditor"]})]})},ke+2)})})]})})():s.jsx("div",{className:"text-center text-gray-500 py-8 text-sm",children:"No data available"})})]})}),y===1&&s.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:s.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[s.jsx(Nt,{title:"Investigations by Year",className:"border-b border-gray-200 pb-3 text-base font-bold"}),s.jsx("div",{className:"mt-4 space-y-3",children:dr?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Ct,{size:"lg"})}):Pt&&Array.isArray(Pt)&&Pt.length>0?(()=>{const oe={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-2xl"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-xl"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl"}},be=Pt.reduce((le,ke)=>{const me=ke.year||"Unknown";if(me!=="Unknown"&&me!=="2020"){le[me]||(le[me]={total:0,year:me,perAuditor:ke.yearPerAuditor||"0.00"});const Ge=le[me];Ge&&(Ge.total+=ke.count||1,ke.yearPerAuditor&&(Ge.perAuditor=ke.yearPerAuditor))}return le},{}),Ce=Object.values(be).filter(le=>le.year&&le.year!=="Unknown").sort((le,ke)=>ke.year.localeCompare(le.year)).slice(0,5);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ce.slice(0,2).map((le,ke)=>{const me=oe[le.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return s.jsx("div",{className:F("relative p-4 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",me.bgColor,me.borderColor,me.shape),children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[s.jsx("p",{className:F("text-[10px] font-bold uppercase mb-2",me.textColor),children:le.year}),s.jsx("p",{className:F("text-2xl font-bold mb-1",me.textColor),children:le.total}),s.jsxs("p",{className:F("text-[9px] font-medium opacity-70",me.textColor),children:[le.perAuditor||"0"," per auditor"]})]})},ke)})}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:Ce.slice(2,5).map((le,ke)=>{const me=oe[le.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return s.jsx("div",{className:F("relative p-3 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",me.bgColor,me.borderColor,me.shape),children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[s.jsx("p",{className:F("text-[9px] font-bold uppercase mb-1.5",me.textColor),children:le.year}),s.jsx("p",{className:F("text-xl font-bold mb-1",me.textColor),children:le.total}),s.jsxs("p",{className:F("text-[8px] font-medium opacity-70",me.textColor),children:[le.perAuditor||"0"," per auditor"]})]})},ke+2)})})]})})():s.jsx("div",{className:"text-center text-gray-500 py-8 text-sm",children:"No data available"})})]})}),y===2&&s.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:s.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[s.jsx(Nt,{title:"Fraud Internal Control by Year",className:"border-b border-gray-200 pb-3 text-base font-bold"}),s.jsx("div",{className:"mt-4 space-y-3",children:bn?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Ct,{size:"lg"})}):Jt!=null&&Jt.scoreCards&&Array.isArray(Jt.scoreCards)?(()=>{const oe={2025:"1.34M",2024:"2.71M",2023:"1.56M",2022:"3.50M",2021:"0.96M"},be=ke=>{if(!ke)return"0";const me=typeof ke=="string"?parseFloat(ke.replace(/,/g,"")):ke;return isNaN(me)?"0":`${(me/1e6).toFixed(2)}M`},Ce={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-2xl"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-xl"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl"}},le=Jt.scoreCards.filter(ke=>ke.year&&ke.year!=="2020").sort((ke,me)=>me.year.localeCompare(ke.year)).slice(0,5);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-2 gap-3",children:le.slice(0,2).map((ke,me)=>{const Ge=Ce[ke.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return s.jsx("div",{className:F("relative p-4 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",Ge.bgColor,Ge.borderColor,Ge.shape),children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[s.jsx("p",{className:F("text-[10px] font-bold uppercase mb-2",Ge.textColor),children:ke.year}),s.jsx("p",{className:F("text-2xl font-bold mb-1",Ge.textColor),children:be(ke.impact)}),s.jsxs("p",{className:F("text-[9px] font-medium opacity-70",Ge.textColor),children:[oe[ke.year]||"0"," per auditor"]})]})},me)})}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:le.slice(2,5).map((ke,me)=>{const Ge=Ce[ke.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return s.jsx("div",{className:F("relative p-3 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",Ge.bgColor,Ge.borderColor,Ge.shape),children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[s.jsx("p",{className:F("text-[9px] font-bold uppercase mb-1.5",Ge.textColor),children:ke.year}),s.jsx("p",{className:F("text-xl font-bold mb-1",Ge.textColor),children:be(ke.impact)}),s.jsxs("p",{className:F("text-[8px] font-medium opacity-70",Ge.textColor),children:[oe[ke.year]||"0"," per auditor"]})]})},me+2)})})]})})():s.jsx("div",{className:"text-center text-gray-500 py-8 text-sm",children:"No data available"})})]})}),y===3&&s.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:s.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[s.jsx(Nt,{title:"Loss Prevention by Year",className:"border-b border-gray-200 pb-3 text-sm font-bold"}),s.jsx("div",{className:"mt-4 space-y-3",children:en?s.jsx("div",{className:"col-span-2 flex justify-center py-8",children:s.jsx(Ct,{size:"lg"})}):(()=>{const oe=(yt==null?void 0:yt.scoreCards)||(yt==null?void 0:yt.scoreCards2);if(!oe||!Array.isArray(oe))return s.jsx("div",{className:"text-center text-gray-500 py-8 text-sm",children:"No data available"});const be={2025:"0.93M",2024:"0.76M",2023:"0.23M",2022:"0.07M",2021:"0.05M"},Ce=me=>{if(!me)return"0";const Ge=typeof me=="string"?parseFloat(me.replace(/,/g,"")):me;return isNaN(Ge)?"0":`${(Ge/1e6).toFixed(2)}M`},le={2025:{bgColor:"bg-gradient-to-br from-indigo-50 to-indigo-100/50",textColor:"text-indigo-700",borderColor:"border-indigo-200",shape:"rounded-2xl"},2024:{bgColor:"bg-gradient-to-br from-slate-50 to-slate-100/50",textColor:"text-slate-700",borderColor:"border-slate-200",shape:"rounded-xl"},2023:{bgColor:"bg-gradient-to-br from-violet-50 to-violet-100/50",textColor:"text-violet-700",borderColor:"border-violet-200",shape:"rounded-2xl"},2022:{bgColor:"bg-gradient-to-br from-amber-50 to-amber-100/50",textColor:"text-amber-700",borderColor:"border-amber-200",shape:"rounded-xl"},2021:{bgColor:"bg-gradient-to-br from-neutral-50 to-neutral-100/50",textColor:"text-neutral-700",borderColor:"border-neutral-200",shape:"rounded-xl"}},ke=oe.filter(me=>me.year&&me.year!=="2020").sort((me,Ge)=>Ge.year.localeCompare(me.year)).slice(0,5);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-2 gap-3",children:ke.slice(0,2).map((me,Ge)=>{const wt=le[me.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return s.jsx("div",{className:F("relative p-4 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",wt.bgColor,wt.borderColor,wt.shape),children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[s.jsx("p",{className:F("text-[10px] font-bold uppercase mb-2",wt.textColor),children:me.year}),s.jsx("p",{className:F("text-2xl font-bold mb-1",wt.textColor),children:Ce(me.impact)}),s.jsxs("p",{className:F("text-[9px] font-medium opacity-70",wt.textColor),children:[be[me.year]||"0"," per auditor"]})]})},Ge)})}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:ke.slice(2,5).map((me,Ge)=>{const wt=le[me.year]||{bgColor:"bg-gray-50",textColor:"text-gray-700",borderColor:"border-gray-200",shape:"rounded-xl"};return s.jsx("div",{className:F("relative p-3 overflow-hidden","border-2 shadow-md hover:shadow-lg","transition-all duration-300 active:scale-95",wt.bgColor,wt.borderColor,wt.shape),children:s.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[s.jsx("p",{className:F("text-[9px] font-bold uppercase mb-1.5",wt.textColor),children:me.year}),s.jsx("p",{className:F("text-xl font-bold mb-1",wt.textColor),children:Ce(me.impact)}),s.jsxs("p",{className:F("text-[8px] font-medium opacity-70",wt.textColor),children:[be[me.year]||"0"," per auditor"]})]})},Ge+2)})})]})})()})]})})]})]})]})}),s.jsxs(ts,{component:"finding_actions_status_chart",children:[s.jsxs("div",{id:"scorecard-toggle",className:F("flex items-center justify-between mb-4",v&&"mb-3"),children:[s.jsx("h2",{className:F("font-semibold text-gray-800",v?"text-[12.8px]":"text-[16px]"),children:"Key Metrics"}),s.jsxs("div",{className:F("flex rounded-lg",v?"gap-1 bg-gray-100 p-0.5":"gap-2 bg-gray-100 p-1"),children:[s.jsx(ze,{variant:t==="2024+"?"primary":"outline",size:"sm",onClick:()=>e("2024+"),className:F(v?"!px-1.5 !py-0.5 !text-[7px] !h-5 !min-h-0 leading-tight":"!px-2.5 !py-1.5 !text-xs !h-8"),children:" As of 2024"}),s.jsx(ze,{variant:t==="all"?"primary":"outline",size:"sm",onClick:()=>e("all"),className:F(v?"!px-1.5 !py-0.5 !text-[7px] !h-5 !min-h-0 leading-tight":"!px-2.5 !py-1.5 !text-xs !h-8"),children:" All Results"})]})]}),Be&&(u||h)&&!G?s.jsxs("div",{className:F("fixed top-20 right-4 z-40 flex flex-col gap-2"),children:[s.jsxs("div",{className:"relative group",children:[s.jsx(ze,{variant:t==="2024+"?"primary":"outline",size:"sm",onClick:()=>e("2024+"),className:F("!rounded-full !p-0 !min-w-0 flex items-center justify-center !shadow-md",v?"!w-12 !h-12":"!w-10 !h-10"),children:s.jsxs("svg",{className:F(v?"w-5 h-5":"w-4 h-4"),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",fill:"none"}),s.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10",strokeWidth:"1.5"}),s.jsx("text",{x:"12",y:"19",textAnchor:"middle",fontSize:"11",fontWeight:"500",fill:"currentColor",fontFamily:"system-ui, -apple-system, sans-serif",children:"24"})]})}),s.jsx("div",{className:"absolute right-full mr-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap",children:s.jsx("div",{className:"bg-gray-900 text-white text-xs py-1.5 px-2 rounded shadow-lg",children:"As of 2024"})})]}),s.jsxs("div",{className:"relative group",children:[s.jsx(ze,{variant:t==="all"?"primary":"outline",size:"sm",onClick:()=>e("all"),className:F("!rounded-full !p-0 !min-w-0 flex items-center justify-center !shadow-md !bg-white",v?"!w-12 !h-12":"!w-10 !h-10"),children:s.jsx("span",{className:F(v?"text-base":"text-sm"),children:""})}),s.jsx("div",{className:"absolute right-full mr-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap",children:s.jsx("div",{className:"bg-gray-900 text-white text-xs py-1.5 px-2 rounded shadow-lg",children:"All Results"})})]})]}):null,v?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 via-indigo-50 to-purple-50 rounded-2xl p-2 shadow-inner",children:[s.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:[{label:"Total",icon:"",index:0},{label:"Open",icon:"",index:1},{label:"Overdue",icon:"",index:2},{label:"Financial",icon:"",index:3},{label:"Maturity",icon:"",index:4}].map(({label:oe,icon:be,index:Ce})=>s.jsxs("button",{onClick:()=>N(Ce),className:F("relative px-1.5 py-1 rounded-lg text-[9px] font-bold transition-all duration-300","active:scale-95",k===Ce?"bg-gradient-to-br from-purple-600 to-indigo-600 text-white shadow-lg transform scale-105":"bg-white/60 text-gray-600 hover:bg-white/80"),children:[s.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[s.jsx("span",{className:"text-xs",children:be}),s.jsx("span",{className:"leading-tight",children:oe})]}),k===Ce&&s.jsx("div",{className:"absolute -bottom-0.5 left-1/2 transform -translate-x-1/2 w-0.5 h-0.5 bg-white rounded-full"})]},Ce))}),s.jsx("div",{className:"mt-2 flex items-center justify-center gap-1",children:[0,1,2,3,4].map(oe=>s.jsx("div",{className:F("h-1 rounded-full transition-all duration-500 ease-out",k===oe?"w-6 bg-gradient-to-r from-purple-600 to-indigo-600 shadow-md":"w-1 bg-white/60")},oe))})]}),s.jsxs("div",{className:"relative overflow-hidden",onTouchStart:oe=>{var be;D(null),z(((be=oe.targetTouches[0])==null?void 0:be.clientX)||null)},onTouchMove:oe=>{var be;D(((be=oe.targetTouches[0])==null?void 0:be.clientX)||null)},onTouchEnd:()=>{if(!M||!I)return;const oe=M-I;Math.abs(oe)>50&&(oe>0&&k<4?N(k+1):oe<0&&k>0&&N(k-1))},children:[k===0&&s.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:s.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[s.jsx(Nt,{title:"Total Actions",subtitle:"All finding actions",action:s.jsx(tt,{variant:"default",size:"sm",children:t==="2024+"?"2024+":"All"})}),s.jsx("div",{className:"mt-3 min-h-[120px] flex flex-col justify-center items-center px-4 pb-3",children:$n?s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(Ct,{size:"sm"})}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-3xl font-bold text-purple-600 mb-2",children:Vt!=null&&Vt.statusDistribution?Object.values(Vt.statusDistribution).reduce((oe,be)=>oe+be,0):0}),s.jsx("p",{className:"text-[10px] text-gray-500 text-center",children:"All statuses (Open, Overdue, etc.)"})]})})]})}),k===1&&s.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:s.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[s.jsx(Nt,{title:"Open Actions",subtitle:"Pending finding actions",action:s.jsx(tt,{variant:"default",size:"sm",children:t==="2024+"?"2024+":"All"})}),s.jsx("div",{className:"mt-3 min-h-[120px] flex flex-col justify-center items-center px-4 pb-3",children:$n?s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(Ct,{size:"sm"})}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-3xl font-bold text-yellow-600 mb-2",children:((In=Vt==null?void 0:Vt.statusDistribution)==null?void 0:In.Open)||0}),s.jsx("p",{className:"text-[10px] text-gray-500 text-center",children:"Status: Open"})]})})]})}),k===2&&s.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:s.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[s.jsx(Nt,{title:"Overdue Actions",subtitle:"Past due date",action:s.jsx(tt,{variant:"default",size:"sm",children:t==="2024+"?"2024+":"All"})}),s.jsx("div",{className:"mt-3 min-h-[120px] flex flex-col justify-center items-center px-4 pb-3",children:$n?s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(Ct,{size:"sm"})}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-3xl font-bold text-red-600 mb-2",children:((wr=Vt==null?void 0:Vt.statusDistribution)==null?void 0:wr.Overdue)||0}),s.jsx("p",{className:"text-[10px] text-gray-500 text-center",children:"Status: Overdue"})]})})]})}),k===3&&s.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:s.jsxs(Ie,{variant:"elevated",className:"bg-white border border-gray-200 shadow-lg",children:[s.jsx(Nt,{title:"Financial Impact",subtitle:"Total monetary impact",action:s.jsx(tt,{variant:"default",size:"sm",children:"2024+"})}),s.jsx("div",{className:"mt-3 min-h-[120px] flex flex-col justify-center items-center px-4 pb-3",children:Kt?s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(Ct,{size:"sm"})}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-2xl font-bold text-green-600 mb-2 text-center",children:kt!=null&&kt.totalFinancialImpact?Hr(kt.totalFinancialImpact):"0 "}),s.jsxs("p",{className:"text-[10px] text-gray-500 text-center",children:["From ",((oi=kt==null?void 0:kt.parentKeys)==null?void 0:oi.length)||0," findings"]})]})})]})}),k===4&&s.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:s.jsxs(Ie,{variant:"elevated",className:"bg-gradient-to-br from-indigo-50 to-white border border-gray-200 shadow-lg",children:[s.jsx(Nt,{title:"Audit Maturity",subtitle:"Average Score",action:s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>r("2024"),className:F("px-2 py-1 text-xs font-medium rounded transition-colors",n==="2024"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"2024"}),s.jsx("button",{onClick:()=>r("2025"),className:F("px-2 py-1 text-xs font-medium rounded transition-colors",n==="2025"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"2025"})]})}),s.jsx("div",{className:"mt-3 min-h-[120px] flex flex-col justify-center items-center px-4 pb-3",children:on?s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(Ct,{size:"sm"})}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex items-baseline gap-1.5 justify-center",children:[s.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:n==="2024"?qt!=null&&qt.average2024?qt.average2024.toFixed(1):"-":qt!=null&&qt.average2025?qt.average2025.toFixed(1):"-"}),s.jsx("span",{className:"text-lg text-indigo-400 font-medium",children:"/ 5.0"})]})})})]})})]})]}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-[19.2px]",children:[s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Total Actions",subtitle:"All finding actions",action:s.jsx(tt,{variant:"default",size:"sm",children:t==="2024+"?"2024+":"All"})}),s.jsx("div",{className:"mt-4 min-h-[100px] flex flex-col justify-center",children:$n?s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(Ct,{size:"lg"})}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-3xl font-bold text-purple-600",children:Vt!=null&&Vt.statusDistribution?Object.values(Vt.statusDistribution).reduce((oe,be)=>oe+be,0):0}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"All statuses (Open, Overdue, etc.)"})]})})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Open Actions",subtitle:"Pending finding actions",action:s.jsx(tt,{variant:"default",size:"sm",children:t==="2024+"?"2024+":"All"})}),s.jsx("div",{className:"mt-4 min-h-[100px] flex flex-col justify-center",children:$n?s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(Ct,{size:"lg"})}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:((Jn=Vt==null?void 0:Vt.statusDistribution)==null?void 0:Jn.Open)||0}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Status: Open"})]})})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Overdue Actions",subtitle:"Past due date",action:s.jsx(tt,{variant:"default",size:"sm",children:t==="2024+"?"2024+":"All"})}),s.jsx("div",{className:"mt-4 min-h-[100px] flex flex-col justify-center",children:$n?s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(Ct,{size:"lg"})}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-3xl font-bold text-red-600",children:((qs=Vt==null?void 0:Vt.statusDistribution)==null?void 0:qs.Overdue)||0}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Status: Overdue"})]})})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Financial Impact",subtitle:"Total monetary impact",action:s.jsx(tt,{variant:"default",size:"sm",children:"2024+"})}),s.jsx("div",{className:"mt-4 min-h-[100px] flex flex-col justify-center",children:Kt?s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(Ct,{size:"lg"})}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:kt!=null&&kt.totalFinancialImpact?Hr(kt.totalFinancialImpact):"0 "}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["From ",((ur=kt==null?void 0:kt.parentKeys)==null?void 0:ur.length)||0," findings"]})]})})]}),s.jsxs(Ie,{variant:"elevated",className:"bg-gradient-to-br from-indigo-50 to-white",children:[s.jsx(Nt,{title:"Audit Maturity",subtitle:"Average Score",action:s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>r("2024"),className:`px-3 py-1 text-xs font-medium rounded transition-colors ${n==="2024"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"2024"}),s.jsx("button",{onClick:()=>r("2025"),className:`px-3 py-1 text-xs font-medium rounded transition-colors ${n==="2025"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"2025"})]})}),s.jsx("div",{className:"mt-4 min-h-[70px] flex flex-col justify-center",children:on?s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(Ct,{size:"lg"})}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex items-baseline gap-2 justify-center",children:[s.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:n==="2024"?qt!=null&&qt.average2024?qt.average2024.toFixed(1):"-":qt!=null&&qt.average2025?qt.average2025.toFixed(1):"-"}),s.jsx("span",{className:"text-lg text-indigo-400 font-medium",children:"/ 5.0"})]})})})]})]}),s.jsxs("div",{className:F("flex flex-wrap justify-start gap-3 mt-6",v&&"justify-start"),children:[s.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>{W("overdue"),J(!0)},className:et,children:[s.jsx("span",{className:"mr-2",children:""}),"Action Alerts"]}),s.jsxs(ze,{variant:"outline",size:"sm",onClick:ai,className:et,children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"View Audit Plan"]})]})]}),h&&!u&&s.jsxs("div",{ref:T,className:"mt-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"h-px bg-gradient-to-r from-purple-500 to-indigo-600 flex-1"}),s.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2 whitespace-nowrap",children:[s.jsx("span",{children:""}),"Control Analysis Charts"]}),s.jsx("div",{className:"h-px bg-gradient-to-r from-indigo-600 to-purple-500 flex-1"})]}),s.jsxs("button",{onClick:()=>{p(!1),Ue(!1),window.scrollTo({top:0,behavior:"smooth"})},className:F("flex items-center gap-2 px-4 py-2 rounded-lg","bg-gradient-to-r from-gray-100 to-gray-50","border border-gray-300","text-gray-700 font-medium text-sm","hover:from-gray-200 hover:to-gray-100","hover:border-gray-400","hover:shadow-md","transition-all duration-200","group"),children:[s.jsx("span",{className:"text-gray-500 group-hover:text-gray-700 transition-colors",children:""}),s.jsx("span",{children:"Hide"})]})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.jsx(ts,{component:"finding_distribution_risk_chart",children:s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Finding Distribution by Risk Type and Risk Level",children:s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",t==="2024+"?"As of 2024":"All Results"]}),s.jsx("span",{className:F("px-2 py-0.5 text-xs font-medium rounded-full",t==="2024+"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:t==="2024+"?" Filtered":" All Data"})]})}),s.jsx("div",{className:"mt-4 overflow-x-auto",children:Ft?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx(Ct,{size:"lg"})}):nt&&Array.isArray(nt)?s.jsx(s.Fragment,{children:v?s.jsx("div",{className:"grid grid-cols-2 gap-1.5 px-1",children:nt.map((oe,be)=>{var ke;const Ce=((ke=oe.type)==null?void 0:ke.trim())||"-",le=Ce.toLowerCase().includes("total");return s.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",le?"border-blue-700 col-span-2":"border-gray-200"),children:[s.jsx("div",{className:F("px-1.5 py-1",le?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:s.jsx("h4",{className:"text-white font-semibold text-xs",children:Ce})}),s.jsxs("div",{className:F("p-1.5 space-y-0.5",le?"bg-blue-50":"bg-white"),children:[s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsx("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:"Critical:"}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:oe.Critical||0})]}),s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsx("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:"High:"}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:oe.High||0})]}),s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsx("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:"Medium:"}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:oe.Medium||0})]}),s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsx("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:"Low:"}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:oe.Low||0})]}),s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsx("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:"Total:"}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:oe.Total||0})]})]})]},be)})}):s.jsxs("table",{className:F("w-full",v?"text-xs":"text-sm"),children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-purple-600",children:[s.jsx("th",{className:F("text-left bg-blue-900 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3"),children:"RISK TYPE"}),s.jsx("th",{className:F("text-center bg-gray-900 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3"),children:"CRITICAL"}),s.jsx("th",{className:F("text-center bg-red-600 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3"),children:"HIGH"}),s.jsx("th",{className:F("text-center bg-orange-500 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3"),children:"MEDIUM"}),s.jsx("th",{className:F("text-center bg-green-600 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3"),children:"LOW"}),s.jsx("th",{className:F("text-center bg-blue-600 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3"),children:"T:"})]})}),s.jsx("tbody",{children:nt.map((oe,be)=>{var le;const Ce=(le=oe.type)==null?void 0:le.includes("Total");return s.jsxs("tr",{className:`border-b ${Ce?"bg-gray-100 font-bold":"hover:bg-gray-50"}`,children:[s.jsx("td",{className:F("text-left",v?"p-1.5":"p-3"),children:oe.type}),s.jsx("td",{className:F("text-center",v?"p-1.5":"p-3"),children:oe.Critical||0}),s.jsx("td",{className:F("text-center",v?"p-1.5":"p-3"),children:oe.High||0}),s.jsx("td",{className:F("text-center",v?"p-1.5":"p-3"),children:oe.Medium||0}),s.jsx("td",{className:F("text-center",v?"p-1.5":"p-3"),children:oe.Low||0}),s.jsx("td",{className:F("text-center font-semibold",v?"p-1.5":"p-3"),children:oe.Total||0})]},be)})})]})}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(ts,{component:"finding_distribution_risk_chart",children:s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Fraud Internal Control",subtitle:"Data from Google Sheets"}),s.jsx("div",{className:"mt-4 overflow-x-auto",children:Nn?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx(Ct,{size:"lg"})}):Ut!=null&&Ut.result&&Array.isArray(Ut.result)&&Ut.result.length>0?s.jsx(s.Fragment,{children:v?s.jsx("div",{className:"grid grid-cols-2 gap-1.5 px-1",children:Ut.result.slice(1).map((oe,be)=>{var me;const Ce=((me=oe[0])==null?void 0:me.trim())||"-",le=Ce.toLowerCase().includes("total"),ke=Ut.result[0]||[];return s.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",le?"border-blue-700 col-span-2":"border-gray-200"),children:[s.jsx("div",{className:F("px-1.5 py-1",le?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:s.jsx("h4",{className:"text-white font-semibold text-xs",children:Ce==="Total"?"Total (EUR)":Ce})}),s.jsx("div",{className:F("p-1.5 space-y-0.5",le?"bg-blue-50":"bg-white"),children:oe.slice(1).map((Ge,wt)=>{const cn=ke[wt+1],Gt=vr(Ge);return s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsxs("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:[cn,":"]}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:Gt})]},wt)})})]},be)})}):s.jsxs("table",{className:F("w-full",v?"text-xs":"text-sm"),children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b-2 border-purple-600",children:(bt=Ut.result[0])==null?void 0:bt.map((oe,be)=>s.jsx("th",{className:F("bg-blue-900 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3",be===0?"text-left":"text-center"),children:oe},be))})}),s.jsx("tbody",{children:Ut.result.slice(1).map((oe,be)=>s.jsx("tr",{className:"border-b hover:bg-gray-50",children:oe.map((Ce,le)=>{let ke;if(le===0){const me=(Ce==null?void 0:Ce.trim())||"-";ke=me==="Total"?"Total (EUR)":me}else ke=vr(Ce);return s.jsx("td",{className:F(v?"p-1.5":"p-3",le===0?"text-left":"text-center"),children:ke},le)})},be))})]})}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})}),s.jsx(ts,{component:"finding_distribution_control_chart",children:s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Loss Prevention Internal Control",subtitle:"Data from Google Sheets"}),s.jsx("div",{className:"mt-4 overflow-x-auto",children:Rn?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx(Ct,{size:"lg"})}):Qt!=null&&Qt.result&&Array.isArray(Qt.result)&&Qt.result.length>0?s.jsx(s.Fragment,{children:v?s.jsx("div",{className:"grid grid-cols-2 gap-1.5 px-1",children:Qt.result.slice(1).map((oe,be)=>{var me;const Ce=((me=oe[0])==null?void 0:me.trim())||"-",le=Ce.toLowerCase().includes("total"),ke=Qt.result[0]||[];return s.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",le?"border-blue-700 col-span-2":"border-gray-200"),children:[s.jsx("div",{className:F("px-1.5 py-1",le?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:s.jsx("h4",{className:"text-white font-semibold text-xs",children:Ce==="Total"?"Total (EUR)":Ce})}),s.jsx("div",{className:F("p-1.5 space-y-0.5",le?"bg-blue-50":"bg-white"),children:oe.slice(1).map((Ge,wt)=>{const cn=ke[wt+1],Gt=vr(Ge);return s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsxs("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:[cn,":"]}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:Gt})]},wt)})})]},be)})}):s.jsxs("table",{className:F("w-full",v?"text-xs":"text-sm"),children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b-2 border-purple-600",children:(jr=Qt.result[0])==null?void 0:jr.map((oe,be)=>s.jsx("th",{className:F("bg-blue-900 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3",be===0?"text-left":"text-center"),children:oe},be))})}),s.jsx("tbody",{children:Qt.result.slice(1).map((oe,be)=>s.jsx("tr",{className:"border-b hover:bg-gray-50",children:oe.map((Ce,le)=>{let ke;if(le===0){const me=(Ce==null?void 0:Ce.trim())||"-";ke=me==="Total"?"Total (EUR)":me}else ke=vr(Ce);return s.jsx("td",{className:F(v?"p-1.5":"p-3",le===0?"text-left":"text-center"),children:ke},le)})},be))})]})}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})})]})]}),u&&s.jsxs(s.Fragment,{children:[it&&(u||h)&&s.jsx("div",{className:F("fixed z-50 shadow-lg rounded-lg bg-white border border-gray-200","md:top-24 md:left-4 md:p-2",v?"top-20 left-2 p-0.5":"top-20 left-2 p-1"),children:s.jsx("button",{onClick:()=>{f(!1),p(!1),Ue(!1),v?(window.scrollTo(0,0),setTimeout(()=>{window.scrollTo({top:0,behavior:"auto"}),document.documentElement.scrollTop=0,document.body.scrollTop=0},50)):window.scrollTo({top:0,behavior:"smooth"})},className:F("rounded-lg","bg-gradient-to-r from-gray-100 to-gray-50","border border-gray-300","text-gray-700 font-medium","hover:from-gray-200 hover:to-gray-100","hover:border-gray-400","hover:shadow-md","transition-all duration-200","group",v?"flex items-center justify-center px-1.5 py-2 h-auto min-h-[50px] w-8":"flex items-center justify-center px-2 py-2 w-10 h-10"),children:s.jsx("span",{className:"text-gray-500 group-hover:text-gray-700 transition-colors text-lg md:text-xl",children:""})})}),s.jsxs("div",{ref:q,className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(ts,{component:"finding_actions_status_chart",children:s.jsxs(Ie,{children:[s.jsx(Nt,{children:s.jsxs("div",{children:[s.jsx("h2",{className:F("font-semibold text-gray-900",v?"text-base":"text-xl"),children:"Finding Actions Status"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("p",{className:F("text-gray-500 truncate flex-1",v?"text-xs":"text-sm"),children:"Current distribution (Click on a slice to view details)"}),s.jsx("span",{className:F("font-medium rounded-full flex-shrink-0",v?"px-1.5 py-0.5 text-[10px]":"px-2 py-0.5 text-xs",t==="2024+"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:t==="2024+"?" Filtered":" All Data"})]})]})}),s.jsx("div",{className:F("p-6",v&&"flex flex-col items-center"),children:s.jsxs("div",{className:F("w-full",v?"max-w-[360px]":""),children:[s.jsx(Dy,{data:Zt,height:v?320:360,loading:$n,options:{onClick:(oe,be)=>{var Ce;if(be&&be.length>0&&be[0]){const le=be[0].index,ke=(Ce=Zt.labels)==null?void 0:Ce[le];ke&&no(ke)}},plugins:{legend:{display:!v,position:"bottom",labels:{padding:15,usePointStyle:!0,font:{size:12},generateLabels:oe=>{const be=oe.data;if(be.labels&&be.datasets&&be.datasets.length>0){const Ce=be.datasets[0];if(!Ce)return[];const le=Ce.backgroundColor;return be.labels.map((ke,me)=>{const Ge=Array.isArray(Ce.data)?Ce.data[me]:0,wt=Array.isArray(le)?le[me]:le;return{text:`${ke}: ${Ge}`,fillStyle:typeof wt=="string"?wt:"rgba(156, 163, 175, 0.8)",hidden:!1,index:me}})}return[]}}},datalabels:{display:!1},tooltip:{callbacks:{label:oe=>{const be=oe.label||"",Ce=oe.parsed||0,ke=oe.dataset.data.reduce((Ge,wt)=>Ge+wt,0),me=(Ce/ke*100).toFixed(1);return`${be}: ${Ce} (${me}%) - Click to view details`}}}}}}),v&&Sn.length>0&&s.jsx("div",{className:"mt-4 grid w-full max-w-[360px] grid-cols-2 gap-x-4 gap-y-3",children:Sn.map(oe=>s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-700",children:[s.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full flex-shrink-0",style:{backgroundColor:oe.color}}),s.jsxs("span",{className:"font-medium text-[11px] truncate",children:[oe.label,":"]}),s.jsx("span",{className:"font-bold flex-shrink-0",children:oe.value})]},oe.label))})]})})]})}),s.jsx(ts,{component:"finding_actions_by_lead_chart",children:s.jsxs(Ie,{children:[s.jsx(Nt,{children:s.jsxs("div",{children:[s.jsx("h2",{className:F("font-semibold text-gray-900",v?"text-base":"text-xl"),children:"Finding Actions by Lead and Status"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("p",{className:F("text-gray-500",v?"text-xs":"text-sm"),children:["Action distribution by lead and status (",t==="2024+"?"2024+":"All",")"]}),s.jsx("span",{className:F("font-medium rounded-full",v?"px-1.5 py-0.5 text-[10px]":"px-2 py-0.5 text-xs",t==="2024+"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:t==="2024+"?" Filtered":" All Data"})]})]})}),s.jsx("div",{className:"p-6",children:v?s.jsx("div",{className:"flex flex-col gap-3",children:(()=>{var Ce;return(((Ce=Fs.labels)==null?void 0:Ce.map((le,ke)=>{const me=Fs.datasets.map(wt=>({label:wt.label,value:wt.data[ke]||0,color:wt.backgroundColor})).filter(wt=>wt.value>0),Ge=me.reduce((wt,cn)=>wt+cn.value,0);return{leadName:le,statusBreakdown:me,totalActions:Ge}}))||[]).filter(le=>le.totalActions>0).sort((le,ke)=>ke.totalActions-le.totalActions).map(({leadName:le,statusBreakdown:ke,totalActions:me})=>s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 flex flex-col gap-3 transition-all active:scale-[0.99]",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-900 text-[15px] leading-tight",children:le}),s.jsx("span",{className:"text-[11px] text-gray-400 font-medium",children:"Lead Auditor"})]}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:me}),s.jsx("span",{className:"text-[10px] font-semibold text-gray-400 uppercase tracking-wider",children:"Actions"})]})]}),s.jsx("div",{className:"h-2.5 w-full flex rounded-full overflow-hidden bg-gray-100",children:ke.map((Ge,wt)=>s.jsx("div",{style:{width:`${Ge.value/me*100}%`,backgroundColor:Ge.color},className:"h-full first:rounded-l-full last:rounded-r-full"},wt))}),s.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:ke.map(Ge=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-2 h-2 rounded-full ring-1 ring-white",style:{backgroundColor:Ge.color}}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-[11px] font-bold text-gray-700",children:Ge.value}),s.jsx("span",{className:"text-[10px] text-gray-500 font-medium truncate max-w-[60px]",children:Ge.label})]})]},Ge.label))})]},le))})()}):s.jsx(Dx,{data:Fs,height:400,loading:Rt,options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,elements:{bar:{borderRadius:4}},plugins:{legend:{display:!0,position:"top",align:"end",labels:{padding:15,usePointStyle:!0,pointStyle:"circle",font:{size:12,weight:"bold"},color:"#374151"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,displayColors:!0,callbacks:{label:oe=>{const be=oe.dataset.label||"",Ce=oe.parsed.x||0;return`${be}: ${Ce} actions`}}},datalabels:{display:!1}},scales:{x:{stacked:!0,beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11},color:"#6B7280",padding:8},border:{display:!1}},y:{stacked:!0,grid:{display:!1},ticks:{font:{size:11,weight:"bold"},color:"#374151",crossAlign:"far"},border:{display:!1}}},interaction:{mode:"y",intersect:!1},animation:{duration:750,easing:"easeInOutQuart"}}})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Ie,{children:[s.jsx(Nt,{className:"relative",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 w-full",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:F("font-semibold text-gray-900",v?"text-base":"text-xl"),children:[ce==="actions"?"Action":"Finding"," Breakdown by Audit & Risk Level"]}),s.jsxs("p",{className:F("text-gray-500 mt-1 flex items-center gap-2",v?"text-xs":"text-sm"),children:["Breakdown by audit and risk (",t==="2024+"?"2024+":"All",")",s.jsx("span",{className:F("font-medium rounded-full",v?"px-1.5 py-0.5 text-[10px]":"px-2 py-0.5 text-xs",t==="2024+"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:t==="2024+"?" Filtered":" All Data"})]})]}),s.jsxs("div",{className:"bg-gray-100/80 p-0.5 rounded-lg flex items-center shadow-inner backdrop-blur-sm self-start md:self-auto",children:[s.jsx("button",{onClick:()=>ye("actions"),className:F("px-2.5 py-1 text-[11px] font-semibold rounded-md transition-all duration-200",ce==="actions"?"bg-white text-purple-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"Actions"}),s.jsx("button",{onClick:()=>ye("findings"),className:F("px-2.5 py-1 text-[11px] font-semibold rounded-md transition-all duration-200",ce==="findings"?"bg-white text-purple-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"Findings"})]})]})}),s.jsx("div",{className:"p-6",children:s.jsx(zR,{data:ce==="actions"?wn||[]:Is||[],isLoading:ce==="actions"?rr:br,onCellClick:ii})})]}),s.jsx(ts,{component:"audit_findings_chart",children:s.jsx(Dx,{title:"Audit Findings by Year and Status",subtitle:"Findings breakdown by year and status",data:zs,height:400,loading:nr,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",align:"end",labels:{padding:15,usePointStyle:!0,pointStyle:"circle",font:{size:12,weight:"bold"},color:"#374151"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,displayColors:!0,callbacks:{label:oe=>{const be=oe.dataset.label||"",Ce=oe.parsed.y||0;return`${be}: ${Ce} findings`}}},datalabels:{display:!1}},scales:{x:{stacked:!0,grid:{display:!1},ticks:{font:{size:11,weight:"bold"},color:"#374151"},border:{display:!1}},y:{stacked:!0,beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11},color:"#6B7280",padding:8},border:{display:!1}}},interaction:{mode:"index",intersect:!1},animation:{duration:750,easing:"easeInOutQuart"}}})})]}),s.jsx(ts,{component:"department_actions_chart",children:v?s.jsxs(s.Fragment,{children:[s.jsx(ts,{component:"finding_actions_aging_chart",children:s.jsx(Nw,{data:to,loading:tn,title:"Finding Actions Age Distribution",subtitle:"All Open actions by days until/past due date",height:400,isMobile:v})}),s.jsx("div",{className:"mt-6 w-full",children:s.jsx(zw,{title:"Audit Maturity",subtitle:"Maturity assessment across key dimensions",data:Bs,height:400,loading:gn,labelColors:vt!=null&&vt.labelsWithGroups?vt.labelsWithGroups.map(oe=>({Governance:"#1f2937","Use of Technology":"#8b5cf6",People:"#10b981",Communications:"#3b82f6","Scope of Work":"#f59e0b"})[oe.group]||"#374151"):void 0,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:0,bottom:0,left:0,right:0}},elements:{line:{borderWidth:3,tension:.1},point:{radius:4,hoverRadius:6,borderWidth:2}},scales:{r:{beginAtZero:!0,min:0,max:5,angleLines:{display:!0,color:"rgba(107, 114, 128, 0.3)",lineWidth:1.5},grid:{color:"rgba(107, 114, 128, 0.25)",lineWidth:1},ticks:{stepSize:1,font:{size:8,weight:500},color:"#9ca3af",backdropColor:"transparent",backdropPadding:1,z:1},pointLabels:{display:!0,font:{size:8.5,weight:600},color:oe=>{var Ce;const be={Governance:"#1f2937","Use of Technology":"#8b5cf6",People:"#10b981",Communications:"#3b82f6","Scope of Work":"#f59e0b"};if((Ce=vt==null?void 0:vt.labelsWithGroups)!=null&&Ce[oe.index]){const le=vt.labelsWithGroups[oe.index].group;return be[le]||"#374151"}return"#374151"},padding:1,callback:(oe,be)=>{var me;if(!oe)return"";const Ce={"Functional Reporting & Positioning (Governance)":"Functional Reporting",Resource:"Resource","Use of Technology":"Technology","Overall Opinions":"Overall Opinions","Audit Methodology & Reporting (Communications)":"Methodology","Planning (Scope of Work)":"Planning","Assurance (Scope of Work)":"Assurance","Risk Assessment (Scope of Work)":"Risk Assessment"};let le="";Ce[oe]?le=Ce[oe]:(le=oe.split(" (")[0]||oe,le.length>15&&(le=le.substring(0,12)+"..."));let ke="";return(me=vt==null?void 0:vt.labelsWithGroups)!=null&&me[be.index]&&(ke=vt.labelsWithGroups[be.index].group,ke={Governance:"Gov","Use of Technology":"Tech",People:"People",Communications:"Comm","Scope of Work":"Scope"}[ke]||ke),ke?`${le}
${ke}`:le}}}},plugins:{legend:{display:!0,position:"top",align:"center",labels:{padding:10,usePointStyle:!0,font:{size:10,weight:600},color:"#374151",boxWidth:12,boxHeight:12}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#f9fafb",bodyColor:"#f9fafb",borderColor:"#4b5563",borderWidth:1,cornerRadius:6,padding:6,titleFont:{size:10,weight:600},bodyFont:{size:9},displayColors:!1,callbacks:{title:oe=>{var le;const be=((le=oe[0])==null?void 0:le.label)||"";return String(be).split(" (")[0]},label:oe=>{const be=oe.dataset.label||"",Ce=oe.parsed.r||0;return`${be}: ${Ce.toFixed(1)} / 5`}}}},animation:{duration:1500,easing:"easeInOutQuart"},interaction:{intersect:!1,mode:"index"}}})})]}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(ts,{component:"finding_actions_aging_chart",children:s.jsx(Nw,{data:to,loading:tn,title:"Finding Actions Age Distribution",subtitle:"All Open actions by days until/past due date",height:450,isMobile:v})}),s.jsx(zw,{title:"Audit Maturity",subtitle:"Maturity assessment across key dimensions",data:Bs,height:450,loading:gn,labelColors:vt!=null&&vt.labelsWithGroups?vt.labelsWithGroups.map(oe=>({Governance:"#1f2937","Use of Technology":"#8b5cf6",People:"#10b981",Communications:"#3b82f6","Scope of Work":"#d97706"})[oe.group]||"#374151"):void 0,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:-10,bottom:20,left:-10,right:-10}},elements:{line:{borderWidth:4,tension:.1},point:{radius:5,hoverRadius:8,borderWidth:3}},scales:{r:{beginAtZero:!0,min:0,max:5,angleLines:{display:!0,color:"rgba(107, 114, 128, 0.45)",lineWidth:2},grid:{color:"rgba(107, 114, 128, 0.15)",lineWidth:1,drawOnChartArea:!0,drawTicks:!1,z:-1},ticks:{stepSize:1,display:!0,font:{size:12,weight:600,family:"'SF Pro Display', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif"},color:"#1e293b",backdropColor:"transparent",backdropPadding:0,showLabelBackdrop:!1,z:10},pointLabels:{display:!0,font:{size:11,weight:700},color:oe=>{var Ce;const be={Governance:"#1f2937","Use of Technology":"#8b5cf6",People:"#10b981",Communications:"#3b82f6","Scope of Work":"#d97706"};if((Ce=vt==null?void 0:vt.labelsWithGroups)!=null&&Ce[oe.index]){const le=vt.labelsWithGroups[oe.index].group;return be[le]||"#374151"}return"#374151"},padding:12,callback:(oe,be)=>{if(!oe)return"";const Ce=oe.split(" (");let le=Ce[0]??oe,ke="";if(Ce.length>1&&Ce[1]&&(ke=Ce[1].replace(")","").trim()),!ke&&(vt!=null&&vt.labelsWithGroups)&&be.index!==void 0){const Ge=vt.labelsWithGroups[be.index];Ge&&Ge.group&&(ke=Ge.group)}const me={"Functional Reporting & Positioning":"Functional Reporting",Resource:"Resources","Use of Technology":"Technology","Overall Opinions":"Overall Opinions","Audit Methodology & Reporting":"Methodology",Planning:"Planning",Assurance:"Assurance","Risk Assessment":"Risk Assessment"};if(le){const Ge=me[le];Ge?le=Ge:le.length>18&&(le=le.substring(0,15)+"...")}else return"";return ke?[le,`(${ke})`]:le}}}},plugins:{legend:{display:!0,position:"bottom",align:"center",fullSize:!1,labels:{padding:40,usePointStyle:!0,pointStyle:"line",boxWidth:32,boxHeight:4,font:{size:13,weight:700},generateLabels:oe=>oe.data.datasets.map((Ce,le)=>{const ke=Ce.label||"",me=Ce.borderColor||"#000";return{text:ke,fillStyle:me,strokeStyle:me,fontColor:me,lineWidth:4,hidden:!1,index:le,datasetIndex:le,pointStyle:"line"}})}},tooltip:{enabled:!0,backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#f9fafb",bodyColor:"#e5e7eb",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:6,padding:8,titleFont:{size:11,weight:600},bodyFont:{size:10,weight:500},displayColors:!0,usePointStyle:!1,boxWidth:8,boxHeight:8,boxPadding:4,animation:{duration:150},position:"nearest",filter:oe=>oe.parsed.r!==null&&oe.parsed.r!==void 0,callbacks:{title:oe=>{var le;if(!oe||oe.length===0)return"";const be=((le=oe[0])==null?void 0:le.label)||"";return String(be).split(" [")[0]||be},label:oe=>{if(!oe||oe.parsed.r===null||oe.parsed.r===void 0)return"";const be=oe.dataset.label||"",Ce=oe.parsed.r||0;return`${be}: ${Ce.toFixed(1)}`},labelColor:oe=>({borderColor:oe.dataset.borderColor||"#000",backgroundColor:oe.dataset.borderColor||"#000",borderWidth:2,borderRadius:1})}}},animation:{duration:1500,easing:"easeInOutQuart"},interaction:{intersect:!0,mode:"point"}}})]})}),s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"h-px bg-gradient-to-r from-purple-500 to-indigo-600 flex-1"}),s.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2 whitespace-nowrap",children:[s.jsx("span",{children:""}),"Control Analysis Charts"]}),s.jsx("div",{className:"h-px bg-gradient-to-r from-indigo-600 to-purple-500 flex-1"})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.jsx(ts,{component:"finding_distribution_risk_chart",children:s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Finding Distribution by Risk Type and Risk Level",children:s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",t==="2024+"?"As of 2024":"All Results"]}),s.jsx("span",{className:F("px-2 py-0.5 text-xs font-medium rounded-full",t==="2024+"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:t==="2024+"?" Filtered":" All Data"})]})}),s.jsx("div",{className:"mt-4 overflow-x-auto",children:Ft?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx(Ct,{size:"lg"})}):nt&&Array.isArray(nt)?s.jsx(s.Fragment,{children:v?s.jsx("div",{className:"grid grid-cols-2 gap-1.5 px-1",children:nt.map((oe,be)=>{var ke;const Ce=((ke=oe.type)==null?void 0:ke.trim())||"-",le=Ce.toLowerCase().includes("total");return s.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",le?"border-blue-700 col-span-2":"border-gray-200"),children:[s.jsx("div",{className:F("px-1.5 py-1",le?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:s.jsx("h4",{className:"text-white font-semibold text-xs",children:Ce})}),s.jsxs("div",{className:F("p-1.5 space-y-0.5",le?"bg-blue-50":"bg-white"),children:[s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsx("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:"Critical:"}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:oe.Critical||0})]}),s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsx("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:"High:"}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:oe.High||0})]}),s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsx("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:"Medium:"}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:oe.Medium||0})]}),s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsx("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:"Low:"}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:oe.Low||0})]}),s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsx("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:"Total:"}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:oe.Total||0})]})]})]},be)})}):s.jsxs("table",{className:F("w-full",v?"text-xs":"text-sm"),children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-purple-600",children:[s.jsx("th",{className:F("text-left bg-blue-900 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3"),children:"RISK TYPE"}),s.jsx("th",{className:F("text-center bg-gray-900 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3"),children:"CRITICAL"}),s.jsx("th",{className:F("text-center bg-red-600 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3"),children:"HIGH"}),s.jsx("th",{className:F("text-center bg-orange-500 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3"),children:"MEDIUM"}),s.jsx("th",{className:F("text-center bg-green-600 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3"),children:"LOW"}),s.jsx("th",{className:F("text-center bg-blue-600 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3"),children:"T:"})]})}),s.jsx("tbody",{children:nt.map((oe,be)=>{var le;const Ce=(le=oe.type)==null?void 0:le.includes("Total");return s.jsxs("tr",{className:`border-b ${Ce?"bg-gray-100 font-bold":"hover:bg-gray-50"}`,children:[s.jsx("td",{className:F("text-left",v?"p-1.5":"p-3"),children:oe.type}),s.jsx("td",{className:F("text-center",v?"p-1.5":"p-3"),children:oe.Critical||0}),s.jsx("td",{className:F("text-center",v?"p-1.5":"p-3"),children:oe.High||0}),s.jsx("td",{className:F("text-center",v?"p-1.5":"p-3"),children:oe.Medium||0}),s.jsx("td",{className:F("text-center",v?"p-1.5":"p-3"),children:oe.Low||0}),s.jsx("td",{className:F("text-center font-semibold",v?"p-1.5":"p-3"),children:oe.Total||0})]},be)})})]})}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(ts,{component:"finding_distribution_risk_chart",children:s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Fraud Internal Control",subtitle:"Data from Google Sheets"}),s.jsx("div",{className:"mt-4 overflow-x-auto",children:Nn?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx(Ct,{size:"lg"})}):Ut!=null&&Ut.result&&Array.isArray(Ut.result)&&Ut.result.length>0?s.jsx(s.Fragment,{children:v?s.jsx("div",{className:"grid grid-cols-2 gap-2 px-1",children:Ut.result.slice(1).map((oe,be)=>{var me;const Ce=((me=oe[0])==null?void 0:me.trim())||"-",le=Ce.toLowerCase().includes("total"),ke=Ut.result[0]||[];return s.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",le?"border-blue-700 col-span-2":"border-gray-200"),children:[s.jsx("div",{className:F("px-2 py-1.5",le?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:s.jsx("h4",{className:"text-white font-semibold text-xs",children:Ce==="Total"?"Total (EUR)":Ce})}),s.jsx("div",{className:F("p-2 space-y-1",le?"bg-blue-50":"bg-white"),children:oe.slice(1).map((Ge,wt)=>{const cn=ke[wt+1],Gt=vr(Ge);return s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsxs("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:[cn,":"]}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:Gt})]},wt)})})]},be)})}):s.jsxs("table",{className:F("w-full",v?"text-xs":"text-sm"),children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b-2 border-purple-600",children:(Ir=Ut.result[0])==null?void 0:Ir.map((oe,be)=>s.jsx("th",{className:F("bg-blue-900 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3",be===0?"text-left":"text-center"),children:oe},be))})}),s.jsx("tbody",{children:Ut.result.slice(1).map((oe,be)=>s.jsx("tr",{className:"border-b hover:bg-gray-50",children:oe.map((Ce,le)=>{let ke;if(le===0){const me=(Ce==null?void 0:Ce.trim())||"-";ke=me==="Total"?"Total (EUR)":me}else ke=vr(Ce);return s.jsx("td",{className:F(v?"p-1.5":"p-3",le===0?"text-left":"text-center"),children:ke},le)})},be))})]})}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})}),s.jsx(ts,{component:"finding_distribution_control_chart",children:s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Loss Prevention Internal Control",subtitle:"Data from Google Sheets"}),s.jsx("div",{className:"mt-4 overflow-x-auto",children:Rn?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx(Ct,{size:"lg"})}):Qt!=null&&Qt.result&&Array.isArray(Qt.result)&&Qt.result.length>0?s.jsx(s.Fragment,{children:v?s.jsx("div",{className:"grid grid-cols-2 gap-2 px-1",children:Qt.result.slice(1).map((oe,be)=>{var me;const Ce=((me=oe[0])==null?void 0:me.trim())||"-",le=Ce.toLowerCase().includes("total"),ke=Qt.result[0]||[];return s.jsxs("div",{className:F("rounded-lg border shadow-sm overflow-hidden",le?"border-blue-700 col-span-2":"border-gray-200"),children:[s.jsx("div",{className:F("px-2 py-1.5",le?"bg-gradient-to-r from-blue-800 to-blue-700":"bg-gradient-to-r from-blue-900 to-blue-800"),children:s.jsx("h4",{className:"text-white font-semibold text-xs",children:Ce==="Total"?"Total (EUR)":Ce})}),s.jsx("div",{className:F("p-2 space-y-1",le?"bg-blue-50":"bg-white"),children:oe.slice(1).map((Ge,wt)=>{const cn=ke[wt+1],Gt=vr(Ge);return s.jsxs("div",{className:"flex justify-between items-center py-0.5 text-[10px]",children:[s.jsxs("span",{className:F("font-medium",le?"text-blue-700":"text-gray-600"),children:[cn,":"]}),s.jsx("span",{className:F("font-semibold",le?"text-blue-900 text-[11px]":"text-gray-900 text-[11px]"),children:Gt})]},wt)})})]},be)})}):s.jsxs("table",{className:F("w-full",v?"text-xs":"text-sm"),children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b-2 border-purple-600",children:(Yn=Qt.result[0])==null?void 0:Yn.map((oe,be)=>s.jsx("th",{className:F("bg-blue-900 text-white font-semibold",v?"p-1.5 text-[10px]":"p-3",be===0?"text-left":"text-center"),children:oe},be))})}),s.jsx("tbody",{children:Qt.result.slice(1).map((oe,be)=>s.jsx("tr",{className:"border-b hover:bg-gray-50",children:oe.map((Ce,le)=>{let ke;if(le===0){const me=(Ce==null?void 0:Ce.trim())||"-";ke=me==="Total"?"Total (EUR)":me}else ke=vr(Ce);return s.jsx("td",{className:F(v?"p-1.5":"p-3",le===0?"text-left":"text-center"),children:ke},le)})},be))})]})}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})})]})})]})]})]}),G&&s.jsx("div",{id:"audit-plan-section",className:"mt-6",children:s.jsxs(Ie,{variant:"elevated",className:"bg-gradient-to-br from-violet-50 via-purple-50 to-white shadow-lg hover:shadow-xl transition-all duration-300",children:[s.jsx("div",{className:"hidden md:block",children:s.jsx(Nt,{title:"Audit Plan - Progress Tracker",subtitle:"Current audit progress across all stages",action:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:jn,className:"text-sm text-gray-500 hover:text-gray-700 font-medium transition-all duration-200 flex items-center gap-1 px-3 py-1.5 rounded-lg hover:bg-gray-100",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Hide"]}),s.jsxs("a",{href:"/annual-audit-plan",className:"group text-sm text-purple-600 hover:text-purple-700 font-semibold transition-all duration-200 flex items-center gap-1 px-3 py-1.5 rounded-lg hover:bg-purple-100",children:["View All",s.jsx("svg",{className:"w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})}),s.jsxs("div",{className:"md:hidden flex items-start justify-between mb-4",children:[s.jsx("div",{children:s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Audit Plan - Progress Tracker"})}),s.jsxs("div",{className:"ml-4 flex items-center gap-1.5",children:[s.jsxs("button",{onClick:jn,className:"text-xs text-gray-500 hover:text-gray-700 font-medium transition-all duration-200 flex items-center gap-0.5 px-2 py-1 rounded-lg hover:bg-gray-100",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Hide"]}),s.jsxs("a",{href:"/annual-audit-plan",className:"group text-[10px] text-purple-600 hover:text-purple-700 font-medium transition-all duration-200 flex items-center gap-0.5 px-2 py-1 rounded-lg hover:bg-purple-100",children:["View All",s.jsx("svg",{className:"w-3 h-3 group-hover:translate-x-0.5 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),s.jsx("div",{className:"mt-6 p-4 bg-white rounded-xl shadow-sm",children:s.jsx(FR,{selectedYear:Oe,onYearChange:qe,availableYears:Se,isYearDropdownOpen:xe,onYearDropdownToggle:we,yearDropdownRef:te})})]})}),dt&&G&&v&&s.jsx("div",{className:"fixed top-16 right-2 z-40",children:s.jsxs("button",{onClick:jn,className:"flex items-center gap-1 px-2 py-1.5 bg-white/95 backdrop-blur-sm border border-gray-200 rounded-lg shadow-lg hover:bg-white transition-all duration-200 active:scale-95",children:[s.jsx("svg",{className:"w-3.5 h-3.5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),s.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Hide"})]})}),s.jsx(qR,{isOpen:i,onClose:()=>a(!1),status:o,auditYear:t}),s.jsx(ij,{isOpen:X,onClose:()=>J(!1),title:K==="overdue"?"Overdue Actions":"Upcoming Actions",subtitle:K==="overdue"?`${(Mt==null?void 0:Mt.length)||0} actions past due date`:`${(se==null?void 0:se.length)||0} actions due within 30 days`,actions:K==="overdue"?Mt:se,loading:K==="overdue"?Cr:Fe,headerBgColor:K==="overdue"?"bg-red-50":"bg-blue-50",showDaysUntilDue:K==="upcoming",actionType:K,onActionTypeChange:W,overdueCount:(Mt==null?void 0:Mt.length)||0,upcomingCount:(se==null?void 0:se.length)||0}),s.jsx(ij,{isOpen:R,onClose:()=>U(!1),title:B!=null&&B.riskLevel?`${B.riskLevel} Risk ${ce==="actions"?"Actions":"Findings"} - ${B.auditName}`:`All ${ce==="actions"?"Actions":"Findings"} - ${(B==null?void 0:B.auditName)||""}`,subtitle:`${Z.length} ${ce==="actions"?"actions":"findings"} in ${(B==null?void 0:B.auditYear)||""}`,actions:Z,loading:ne,headerBgColor:"bg-purple-50",showDaysUntilDue:!1,mode:ce})]})},yh=({placeholder:t="Search...",onSearch:e,delay:n=500,className:r})=>{const[i,a]=L.useState(""),o=oy(i,n),c=L.useRef(e);L.useEffect(()=>{c.current=e},[e]),L.useEffect(()=>{c.current(o)},[o]);const u=()=>{a(""),e("")};return s.jsx(Tn,{type:"text",placeholder:t,value:i,onChange:f=>a(f.target.value),className:r,leftIcon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),rightIcon:i?s.jsx("button",{type:"button",onClick:u,className:"hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}):null})},yi=[{id:1,title:"Review Financial Controls",description:"Review and update financial control procedures",status:"in_progress",priority:"high",assignee:"john.doe@example.com",due_date:"2025-03-15",created_by:"mahmut@turan.com",created_at:"2024-01-15T00:00:00Z",updated_at:"2024-01-20T00:00:00Z"},{id:2,title:"Update IT Security Policies",description:"Review and update IT security documentation",status:"to_do",priority:"medium",assignee:"jane.smith@example.com",due_date:"2025-02-28",created_by:"mahmut@turan.com",created_at:"2024-02-10T00:00:00Z",updated_at:"2024-02-10T00:00:00Z"}],A7={getTasks:async t=>{var n,r,i;let e=[...yi];return(n=t==null?void 0:t.status)!=null&&n.length&&(e=e.filter(a=>t.status.includes(a.status))),(r=t==null?void 0:t.priority)!=null&&r.length&&(e=e.filter(a=>t.priority.includes(a.priority))),(i=t==null?void 0:t.assignee)!=null&&i.length&&(e=e.filter(a=>a.assignee&&t.assignee.includes(a.assignee))),Re("tasks",{success:!0,data:e})},getPaginatedTasks:async(t=1,e=10,n)=>{var o;let r=[...yi];(o=n==null?void 0:n.status)!=null&&o.length&&(r=r.filter(c=>n.status.includes(c.status)));const i=(t-1)*e,a=i+e;return Re("paginated-tasks",{data:r.slice(i,a),total:r.length,page:t,limit:e,hasMore:a<r.length})},getTask:async t=>{const e=yi.find(n=>n.id===t);if(!e)throw new Error("Task not found");return Re("task",{success:!0,data:e})},createTask:async t=>{const e={id:yi.length+1,title:t.title,description:t.description,status:t.status||"to_do",priority:t.priority||"medium",assignee:t.assignee,due_date:t.due_date,created_by:"mahmut@turan.com",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return yi.push(e),Re("create-task",{success:!0,data:e})},updateTask:async(t,e)=>{const n=yi.findIndex(a=>a.id===t);if(n===-1)throw new Error("Task not found");const i={...yi[n],...e,updated_at:new Date().toISOString()};return yi[n]=i,Re("update-task",{success:!0,data:i})},deleteTask:async t=>{const e=yi.findIndex(n=>n.id===t);return e!==-1&&yi.splice(e,1),Re("delete-task",{success:!0})},getTaskAuditLog:async t=>Re("task-audit-log",{success:!0,data:[]}),getTaskPermissions:async()=>Re("task-permissions",{success:!0,data:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0}}),exportTasks:async t=>(await Re("export-tasks",null,200),new Blob(["Mock export data"],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}))},E7=()=>{var b;const[t,e]=L.useState([]),[n,r]=L.useState(!0),[i,a]=L.useState(""),[o,c]=L.useState("all"),{permissions:u}=Vr(),{addNotification:f}=ea();L.useEffect(()=>{h()},[]);const h=async()=>{try{r(!0);const y=await A7.getTasks();y.success&&y.data&&e(y.data)}catch{f({type:"error",message:"Failed to load tasks"})}finally{r(!1)}},p=t.filter(y=>{var N;const w=y.title.toLowerCase().includes(i.toLowerCase())||((N=y.description)==null?void 0:N.toLowerCase().includes(i.toLowerCase())),k=o==="all"||y.status===o;return w&&k}),m=y=>{switch(y){case"done":return"success";case"in_progress":return"info";case"blocked":return"danger";default:return"default"}},x=y=>{switch(y){case"urgent":return"danger";case"high":return"warning";case"medium":return"info";default:return"default"}},v={all:t.length,to_do:t.filter(y=>y.status==="to_do").length,in_progress:t.filter(y=>y.status==="in_progress").length,done:t.filter(y=>y.status==="done").length,blocked:t.filter(y=>y.status==="blocked").length};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-[24px] font-bold text-gray-900",children:"Task Manager"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and track your tasks"})]}),((b=u==null?void 0:u.tasks)==null?void 0:b.can_create)&&s.jsxs(ze,{variant:"primary",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Task"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-[12.8px]",children:[s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[24px] font-bold text-purple-600",children:v.all}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Total Tasks"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[24px] font-bold text-gray-600",children:v.to_do}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"To Do"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[24px] font-bold text-blue-600",children:v.in_progress}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"In Progress"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[24px] font-bold text-green-600",children:v.done}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Done"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[24px] font-bold text-red-600",children:v.blocked}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Blocked"})]})})]}),s.jsx(Ie,{children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-[12.8px]",children:[s.jsx("div",{className:"flex-1",children:s.jsx(yh,{placeholder:"Search tasks...",onSearch:a})}),s.jsx("div",{className:"flex gap-2",children:["all","to_do","in_progress","done","blocked"].map(y=>s.jsx(ze,{variant:o===y?"primary":"outline",size:"sm",onClick:()=>c(y),children:y.replace("_"," ").charAt(0).toUpperCase()+y.slice(1).replace("_"," ")},y))})]})}),n?s.jsx(Ie,{children:s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-purple-600"})})}):s.jsx("div",{className:"grid grid-cols-1 gap-[12.8px]",children:p.length===0?s.jsx(Ie,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("h3",{className:"mt-2 text-xs font-medium text-gray-900",children:"No tasks found"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Get started by creating a new task."})]})}):p.map(y=>{var w,k;return s.jsx(Ie,{variant:"elevated",className:"hover:shadow-xl transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900",children:y.title}),s.jsx(tt,{variant:m(y.status),children:y.status.replace("_"," ")}),s.jsx(tt,{variant:x(y.priority),children:y.priority})]}),y.description&&s.jsx("p",{className:"text-gray-600 mb-3",children:y.description}),s.jsxs("div",{className:"flex items-center gap-[12.8px] text-xs text-gray-500",children:[y.assignee&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),y.assignee]}),y.due_date&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(y.due_date).toLocaleDateString()]}),s.jsxs("span",{children:["Created ",BR(y.created_at)]})]})]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[((w=u==null?void 0:u.tasks)==null?void 0:w.can_edit)&&s.jsx(ze,{variant:"ghost",size:"sm",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),((k=u==null?void 0:u.tasks)==null?void 0:k.can_delete)&&s.jsx(ze,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},y.id)})})]})},Pl={getRoles:async()=>Re("roles",{success:!0,data:[]}),getDashboardComponents:async()=>Re("dashboard-components",{success:!0,data:[]}),getRolePermissions:async t=>Re("role-permissions",{success:!0,data:[]}),updateRolePermissions:async(t,e)=>Re("update-role-permissions",{success:!0}),bulkUpdatePermissions:async t=>Re("bulk-update-permissions",{success:!0})},O7=()=>{var vr,Mt,Cr;const[t,e]=L.useState("users"),[n,r]=L.useState(""),[i,a]=L.useState("all"),[o,c]=L.useState("all"),[u,f]=L.useState([]),[h,p]=L.useState(!0),[m,x]=L.useState(null),[v,b]=L.useState(!1),[y,w]=L.useState(null),[k,N]=L.useState(null),[j,S]=L.useState(null),[A,O]=L.useState(""),[M,z]=L.useState([]),[I,D]=L.useState([]),[T,q]=L.useState(null),[H,G]=L.useState([]),[ee,X]=L.useState(!1),[J,K]=L.useState(new Map),[W,R]=L.useState("all"),[U,B]=L.useState(!1),[Q,Z]=L.useState(""),[$,ne]=L.useState(""),[ae,ce]=L.useState(!1),[ye,Be]=L.useState([]),[Ue,it]=L.useState(!1),[je,dt]=L.useState(!1),[st,ft]=L.useState({email:"",name:"",company:"",access_reason:"",expires_at:"",notes:"",role:"external_user"}),[Oe,re]=L.useState(!1),[xe,we]=L.useState({}),[Se,_e]=L.useState(!1),[te,Ne]=L.useState("audit_type"),[fe,pe]=L.useState(!1),[Le,Qe]=L.useState(null),[qe,et]=L.useState({field_name:"audit_type",option_value:"",display_order:0,parent_department:""}),[_t,Pe]=L.useState(!1),Lt=[{value:"audit_type",label:"Audit Type"},{value:"risk_type",label:"Risk Type"},{value:"internal_control_element",label:"Internal Control Element"},{value:"country",label:"Country"},{value:"audit_year",label:"Audit Year"},{value:"risk_level",label:"Risk Level"},{value:"status",label:"Status"},{value:"department",label:"Department"},{value:"process",label:"Process"},{value:"business_unit",label:"Business Unit"}];L.useEffect(()=>{(async()=>{try{p(!0),x(null);const Fe=await Ls.getAccessManagementUsers();Fe.success&&Fe.data?f(Fe.data):x("Failed to load users")}catch{x("Failed to load users. Please try again.")}finally{p(!1)}})()},[]),L.useEffect(()=>{(async()=>{try{const Fe=await Pl.getRoles();Fe.success&&Fe.data&&z(Fe.data)}catch{}})()},[t]),L.useEffect(()=>{(async()=>{if(t==="external-users")try{it(!0);const Fe=await Ls.getExternalUsers();Fe.success&&Fe.data&&Be(Fe.data)}catch(Fe){console.error("Failed to load external users:",Fe)}finally{it(!1)}})()},[t]);const Pt=L.useCallback(async()=>{try{_e(!0);const se={};for(const Fe of Lt)try{const Ke=await Ot.getDropdownOptionsFull(Fe.value);Ke&&Array.isArray(Ke)?se[Fe.value]=Ke:se[Fe.value]=[]}catch(Ke){console.error(`Failed to load options for ${Fe.value}:`,Ke),se[Fe.value]=[]}we(se)}catch(se){console.error("Failed to load dropdown options:",se)}finally{_e(!1)}},[]);L.useEffect(()=>{t==="dropdown-options"&&Pt()},[t,Pt]),L.useEffect(()=>{(async()=>{if(t==="components")try{X(!0);const Fe=await Pl.getDashboardComponents();Fe.success&&Fe.data&&D(Fe.data)}catch{}finally{X(!1)}})()},[t]),L.useEffect(()=>{(async()=>{if(T)try{X(!0);const Fe=await Pl.getRolePermissions(T);Fe.success&&Fe.data&&(G(Fe.data),K(new Map))}catch{}finally{X(!1)}})()},[T]);const dr=(se,Fe,Ke)=>{const nt=H.find(Is=>Is.component_id===se),Ft=J.get(se),wn={canView:(Ft==null?void 0:Ft.canView)??(nt==null?void 0:nt.can_view)??!1,canInteract:(Ft==null?void 0:Ft.canInteract)??(nt==null?void 0:nt.can_interact)??!1,[Fe]:Ke};Fe==="canView"&&!Ke&&(wn.canInteract=!1);const rr=new Map(J);rr.set(se,wn),K(rr)},On=async()=>{if(T)try{X(!0);const se=H.map(Ke=>{const nt=J.get(Ke.component_id);return{componentId:Ke.component_id,canView:(nt==null?void 0:nt.canView)??Ke.can_view,canInteract:(nt==null?void 0:nt.canInteract)??Ke.can_interact}});if((await Pl.updateRolePermissions(T,{permissions:se})).success){const Ke=await Pl.getRolePermissions(T);Ke.success&&Ke.data&&(G(Ke.data),K(new Map),alert("Permissions saved successfully!"))}}catch{alert("Failed to save permissions. Please try again.")}finally{X(!1)}},nr=()=>{K(new Map)},Vt=async()=>{var se,Fe;if(!qe.option_value.trim()){alert("Option value is required");return}try{Pe(!0),(await Ot.createDropdownOption({field_name:qe.field_name,option_value:qe.option_value,display_order:qe.display_order,parent_department:qe.parent_department||void 0})).success&&(pe(!1),et({field_name:te,option_value:"",display_order:0,parent_department:""}),await Pt(),alert("Option created successfully"))}catch(Ke){alert(((Fe=(se=Ke==null?void 0:Ke.response)==null?void 0:se.data)==null?void 0:Fe.error)||"Failed to create option")}finally{Pe(!1)}},$n=se=>{Qe(se),et({field_name:se.field_name,option_value:se.option_value,display_order:se.display_order,parent_department:se.parent_department||se.parent_business_unit||""}),pe(!0)},kt=async()=>{var se,Fe;if(!Le||!qe.option_value.trim()){alert("Option value is required");return}try{Pe(!0),(await Ot.updateDropdownOption(Le.id,{option_value:qe.option_value,display_order:qe.display_order,is_active:Le.is_active,parent_department:qe.parent_department||void 0})).success&&(pe(!1),Qe(null),et({field_name:te,option_value:"",display_order:0,parent_department:""}),await Pt(),alert("Option updated successfully"))}catch(Ke){alert(((Fe=(se=Ke==null?void 0:Ke.response)==null?void 0:se.data)==null?void 0:Fe.error)||"Failed to update option")}finally{Pe(!1)}},Kt=async se=>{var Fe,Ke;if(confirm(`Are you sure you want to delete "${se.option_value}"?`))try{(await Ot.deleteDropdownOption(se.id)).success&&(await Pt(),alert("Option deleted successfully"))}catch(nt){alert(((Ke=(Fe=nt==null?void 0:nt.response)==null?void 0:Fe.data)==null?void 0:Ke.error)||"Failed to delete option")}},Jt=se=>{const Fe=new Map(J);Rt.forEach(Ke=>{const nt=Fe.get(Ke.id),Ft=H.find(wn=>wn.component_id===Ke.id);Fe.set(Ke.id,{canView:se,canInteract:se?(nt==null?void 0:nt.canInteract)??(Ft==null?void 0:Ft.can_interact)??!1:!1})}),K(Fe)},bn=se=>{const Fe=new Map(J);Rt.forEach(Ke=>{const nt=Fe.get(Ke.id),Ft=H.find(rr=>rr.component_id===Ke.id),wn=(nt==null?void 0:nt.canView)??(Ft==null?void 0:Ft.can_view)??!1;wn&&Fe.set(Ke.id,{canView:wn,canInteract:se})}),K(Fe)},yt=async()=>{try{b(!0);const se=await Ls.syncGoogleGroup();if(se.success&&se.data){N(se.data.stats),w(se.data.timestamp);const Fe=await Ls.getAccessManagementUsers();Fe.success&&Fe.data&&f(Fe.data),alert(`Sync completed!
Added: ${se.data.stats.newUsersAdded}
Reactivated: ${se.data.stats.usersReactivated}
Deactivated: ${se.data.stats.usersDeactivated}`)}}catch{alert("Failed to sync with Google Group")}finally{b(!1)}},en=(se,Fe)=>{S(se),O(Fe)},ot=()=>{S(null),O("")},tn=async se=>{try{const Ke=await(await fetch("/api/access-management/update-user",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:se,role:A})})).json();Ke.success?(f(nt=>nt.map(Ft=>Ft.email===se?{...Ft,role:A}:Ft)),alert(`User role updated successfully to ${A}`),S(null),O("")):alert(`Failed to update user role: ${Ke.error}`)}catch{alert("Failed to update user role")}},ln=u.filter(se=>{const Fe=se.name.toLowerCase().includes(n.toLowerCase())||se.email.toLowerCase().includes(n.toLowerCase()),Ke=i==="all"||se.role===i,nt=o==="all"||se.status===o;return Fe&&Ke&&nt}),Rt=I.filter(se=>W==="all"||se.category===W),qt=(se,Fe)=>{const Ke=J.get(se);if(Ke)return Fe==="canView"?Ke.canView:Ke.canInteract;const nt=H.find(Ft=>Ft.component_id===se);return Fe==="canView"?(nt==null?void 0:nt.can_view)??!1:(nt==null?void 0:nt.can_interact)??!1},on=Rt.every(se=>qt(se.id,"canView")),vt=Rt.every(se=>qt(se.id,"canView")&&qt(se.id,"canInteract")),gn=J.size>0,Ut=["all",...new Set(I.map(se=>se.category).filter(Boolean))],Nn=Array.from(new Set(u.map(se=>se.role))).sort(),Qt=se=>{switch(se){case"admin":return"danger";case"top_management":return"warning";case"department_director":return"info";default:return"default"}},Rn={all:u.length,admin:u.filter(se=>se.role==="admin").length,team:u.filter(se=>se.role==="team").length,action_operator:u.filter(se=>se.role==="action_operator").length,department_director:u.filter(se=>se.role==="department_director").length,top_management:u.filter(se=>se.role==="top_management").length};return h?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(Ct,{size:"lg"})}):m?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(Ie,{className:"max-w-md",children:s.jsxs("div",{className:"text-center p-8",children:[s.jsx("div",{className:"text-red-600 mb-4",children:s.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Error Loading Users"}),s.jsx("p",{className:"text-gray-600 mb-4",children:m}),s.jsx(ze,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-[24px] font-bold text-gray-900",children:"Access Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage users, roles, and component permissions"})]})}),s.jsx(Ie,{children:s.jsxs("div",{className:"flex border-b border-gray-200",children:[s.jsxs("button",{onClick:()=>e("users"),className:F("px-[19.2px] py-[9.6px] font-medium text-xs border-b-2 transition-colors",t==="users"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Users (",u.length,")"]}),s.jsxs("button",{onClick:()=>e("roles"),className:F("px-[19.2px] py-[9.6px] font-medium text-xs border-b-2 transition-colors",t==="roles"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Roles (",Nn.length,")"]}),s.jsxs("button",{onClick:()=>e("components"),className:F("px-[19.2px] py-[9.6px] font-medium text-xs border-b-2 transition-colors",t==="components"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),"Component Permissions"]}),s.jsxs("button",{onClick:()=>e("external-users"),className:F("px-[19.2px] py-[9.6px] font-medium text-xs border-b-2 transition-colors",t==="external-users"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"External Users (",ye.length,")"]}),s.jsxs("button",{onClick:()=>e("dropdown-options"),className:F("px-[19.2px] py-[9.6px] font-medium text-xs border-b-2 transition-colors",t==="dropdown-options"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),"Dropdown Options"]})]})}),t==="users"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-[12.8px]",children:[s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[24px] font-bold text-purple-600",children:Rn.all}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Total Users"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[24px] font-bold text-red-600",children:Rn.admin}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Admins"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[24px] font-bold text-blue-600",children:Rn.team}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Team Members"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[24px] font-bold text-yellow-600",children:Rn.department_director}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Directors"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[24px] font-bold text-green-600",children:Rn.top_management}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Executives"})]})})]}),s.jsx(Ie,{children:s.jsxs("div",{className:"flex flex-col gap-[12.8px]",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-[12.8px] items-start md:items-center justify-between",children:[s.jsx("div",{className:"flex-1",children:s.jsx(yh,{placeholder:"Search users...",onSearch:r})}),s.jsx(ze,{variant:"primary",size:"sm",onClick:yt,disabled:v,children:v?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Syncing..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Sync with Google Group"]})})]}),y&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Last sync: ",new Date(y).toLocaleString(),k&&` (${k.activeUsers} active users)`]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("div",{className:"text-xs font-medium text-gray-700 mr-2 flex items-center",children:"Role:"}),["all","admin","team","team_manager","action_operator","management","department_director","top_management","VP","auditor","ceo"].map(se=>s.jsx(ze,{variant:i===se?"primary":"outline",size:"sm",onClick:()=>a(se),children:se==="all"?"All":se.replace("_"," ").split(" ").map(Fe=>Fe.charAt(0).toUpperCase()+Fe.slice(1)).join(" ")},se))]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("div",{className:"text-xs font-medium text-gray-700 mr-2 flex items-center",children:"Status:"}),["all","active","inactive"].map(se=>s.jsx(ze,{variant:o===se?"primary":"outline",size:"sm",onClick:()=>c(se),children:se.charAt(0).toUpperCase()+se.slice(1)},se))]})]})}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Users",subtitle:`${ln.length} users found`}),s.jsx("div",{className:"overflow-x-auto mt-4",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"User"}),s.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Email"}),s.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Role"}),s.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Department"}),s.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Status"}),s.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Last Login"}),s.jsx("th",{className:"text-right py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{children:ln.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"py-12 text-center",children:s.jsxs("div",{className:"text-gray-400",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),s.jsx("p",{className:"text-base font-medium",children:"No users found"}),s.jsx("p",{className:"text-xs mt-1",children:"Try adjusting your search or filters"})]})})}):ln.map(se=>s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"py-4 px-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:s.jsx("span",{className:"text-purple-600 font-semibold",children:se.name.split(" ").map(Fe=>Fe[0]).join("")})}),s.jsx("span",{className:"font-medium text-gray-900",children:se.name})]})}),s.jsx("td",{className:"py-4 px-4 text-gray-600",children:se.email}),s.jsx("td",{className:"py-4 px-4",children:j===se.id?s.jsx("select",{value:A,onChange:Fe=>O(Fe.target.value),className:"px-[9.6px] py-[4.8px] border border-gray-300 rounded-md text-xs focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",children:M.map(Fe=>s.jsx("option",{value:Fe.name,children:Fe.name.replace("_"," ").split(" ").map(Ke=>Ke.charAt(0).toUpperCase()+Ke.slice(1)).join(" ")},Fe.id))}):s.jsx(tt,{variant:Qt(se.role),children:se.role.replace("_"," ")})}),s.jsx("td",{className:"py-4 px-4 text-gray-600",children:se.department||"-"}),s.jsx("td",{className:"py-4 px-4",children:s.jsx(tt,{variant:se.status==="active"?"success":"default",children:se.status})}),s.jsx("td",{className:"py-4 px-4 text-gray-600",children:se.lastLogin?new Date(se.lastLogin).toLocaleDateString():"-"}),s.jsx("td",{className:"py-4 px-4",children:s.jsx("div",{className:"flex justify-end gap-2",children:j===se.id?s.jsxs(s.Fragment,{children:[s.jsx(ze,{variant:"primary",size:"sm",onClick:()=>tn(se.email),children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx(ze,{variant:"outline",size:"sm",onClick:ot,children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>en(se.id,se.role),children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx(ze,{variant:"ghost",size:"sm",className:"text-red-600",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})})]},se.id))})]})})]})]}),t==="roles"&&s.jsxs(s.Fragment,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Roles"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Manage system roles and permissions"})]}),s.jsxs(ze,{variant:"primary",onClick:()=>B(!0),children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Role"]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-[12.8px]",children:Nn.map(se=>{const Fe=u.filter(nt=>nt.role===se),Ke=M.find(nt=>nt.name===se);return s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx(tt,{variant:Qt(se),className:"mb-2",children:se.replace("_"," ").split(" ").map(nt=>nt.charAt(0).toUpperCase()+nt.slice(1)).join(" ")}),s.jsx("p",{className:"text-3xl font-bold text-purple-600",children:Fe.length}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:Fe.length===1?"User":"Users"}),s.jsx(ze,{variant:"outline",size:"sm",className:"mt-3 w-full",onClick:()=>{e("components"),q((Ke==null?void 0:Ke.id)||null)},children:"Manage Permissions"})]})},se)})}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Role Details",subtitle:"Overview of all roles and their users"}),s.jsx("div",{className:"overflow-x-auto mt-4",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Role"}),s.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Users"}),s.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"User Count"}),s.jsx("th",{className:"text-right py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{children:Nn.map(se=>{const Fe=u.filter(nt=>nt.role===se),Ke=M.find(nt=>nt.name===se);return s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"py-4 px-4",children:s.jsx(tt,{variant:Qt(se),children:se.replace("_"," ").split(" ").map(nt=>nt.charAt(0).toUpperCase()+nt.slice(1)).join(" ")})}),s.jsx("td",{className:"py-4 px-4",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[Fe.slice(0,3).map(nt=>s.jsx("span",{className:"text-xs text-gray-600 bg-gray-100 px-[6.4px] py-[3.2px] rounded",children:nt.name},nt.id)),Fe.length>3&&s.jsxs("span",{className:"text-xs text-gray-500 px-[6.4px] py-[3.2px]",children:["+",Fe.length-3," more"]})]})}),s.jsx("td",{className:"py-4 px-4",children:s.jsx("span",{className:"text-xs font-medium text-gray-900",children:Fe.length})}),s.jsx("td",{className:"py-4 px-4",children:s.jsx("div",{className:"flex justify-end gap-2",children:s.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>{e("components"),q((Ke==null?void 0:Ke.id)||null)},children:[s.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Permissions"]})})})]},se)})})]})})]})]}),t==="components"&&s.jsxs(s.Fragment,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Role"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Choose a role to manage component permissions"})]}),gn&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ze,{variant:"outline",size:"sm",onClick:nr,children:"Reset Changes"}),s.jsxs(ze,{variant:"primary",size:"sm",onClick:On,isLoading:ee,children:["Save Changes (",J.size,")"]})]})]}),s.jsx("div",{className:"flex gap-3 flex-wrap",children:M.map(se=>{const Fe=T===se.id,Ke=u.filter(nt=>nt.role===se.name).length;return s.jsxs(ze,{variant:Fe?"primary":"outline",size:"sm",onClick:()=>q(se.id),children:[se.name.replace("_"," ").split(" ").map(nt=>nt.charAt(0).toUpperCase()+nt.slice(1)).join(" "),Ke>0&&s.jsxs("span",{className:"ml-1 opacity-70",children:["(",Ke,")"]})]},se.id)})})]})}),T&&s.jsxs(s.Fragment,{children:[s.jsx(Ie,{children:s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Filter by category:"}),Ut.map(se=>s.jsx(ze,{variant:W===se?"primary":"outline",size:"sm",onClick:()=>R(se),children:se==="all"?"All":se.charAt(0).toUpperCase()+se.slice(1)},se))]})})}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Component Permissions",subtitle:`${Rt.length} components ${W!=="all"?`in ${W}`:""}`}),ee?s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsx(Ct,{size:"lg"})}):s.jsx("div",{className:"overflow-x-auto mt-4",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Component"}),s.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Type"}),s.jsx("th",{className:"text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:"Category"}),s.jsx("th",{className:"text-center py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:"Can View"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>Jt(!0),disabled:on,className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Select all",children:"All"}),s.jsx("button",{onClick:()=>Jt(!1),disabled:!Rt.some(se=>qt(se.id,"canView")),className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Deselect all",children:"None"})]})]})}),s.jsx("th",{className:"text-center py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:"Can Interact"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>bn(!0),disabled:vt||Rt.every(se=>!qt(se.id,"canView")),className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Select all (only for viewable components)",children:"All"}),s.jsx("button",{onClick:()=>bn(!1),disabled:!Rt.some(se=>qt(se.id,"canInteract")),className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Deselect all",children:"None"})]})]})})]})}),s.jsx("tbody",{children:Rt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"py-12 text-center text-gray-500",children:"No components found"})}):Rt.map(se=>{const Fe=qt(se.id,"canView"),Ke=qt(se.id,"canInteract"),nt=J.has(se.id);return s.jsxs("tr",{className:F("border-b border-gray-100 hover:bg-gray-50 transition-colors",nt&&"bg-purple-50"),children:[s.jsx("td",{className:"py-4 px-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:se.display_name}),se.description&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:se.description})]})}),s.jsx("td",{className:"py-4 px-4",children:s.jsx(tt,{variant:"default",children:se.component_type})}),s.jsx("td",{className:"py-4 px-4",children:s.jsx("span",{className:"text-xs text-gray-600",children:se.category})}),s.jsx("td",{className:"py-4 px-4 text-center",children:s.jsx(Fm,{checked:Fe,onChange:Ft=>dr(se.id,"canView",Ft),size:"sm"})}),s.jsx("td",{className:"py-4 px-4 text-center",children:s.jsx(Fm,{checked:Ke,onChange:Ft=>dr(se.id,"canInteract",Ft),disabled:!Fe,size:"sm"})})]},se.id)})})]})})]})]}),!T&&s.jsx(Ie,{children:s.jsxs("div",{className:"p-12 text-center text-gray-500",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),s.jsx("p",{className:"text-lg font-medium",children:"Select a role to manage permissions"}),s.jsx("p",{className:"text-xs mt-1",children:"Choose a role from the buttons above to view and edit component permissions"})]})})]}),t==="external-users"&&s.jsxs(s.Fragment,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"External Users"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage external user accounts"})]}),s.jsxs(ze,{variant:"primary",onClick:()=>dt(!0),children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create External User"]})]})}),Ue?s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsx(Ct,{size:"lg"})}):s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"External Users",subtitle:`${ye.length} external users`}),s.jsx("div",{className:"overflow-x-auto mt-4",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Email"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Company"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Access Reason"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Role"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Expires"}),s.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{children:ye.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"py-12 text-center",children:s.jsxs("div",{className:"text-gray-400",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),s.jsx("p",{className:"text-lg font-medium",children:"No external users found"}),s.jsx("p",{className:"text-sm mt-1",children:'Click "Create External User" to add a new user'})]})})}):ye.map(se=>s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"py-4 px-4 font-medium text-gray-900",children:se.name}),s.jsx("td",{className:"py-4 px-4 text-gray-600",children:se.email}),s.jsx("td",{className:"py-4 px-4 text-gray-600",children:se.company||"-"}),s.jsx("td",{className:"py-4 px-4 text-gray-600",children:se.access_reason||"-"}),s.jsx("td",{className:"py-4 px-4",children:s.jsx(tt,{variant:"default",children:se.role||"default"})}),s.jsx("td",{className:"py-4 px-4",children:s.jsx(tt,{variant:se.is_active?"success":"default",children:se.is_active?"Active":"Inactive"})}),s.jsx("td",{className:"py-4 px-4 text-gray-600",children:se.expires_at?new Date(se.expires_at).toLocaleDateString():"Never"}),s.jsx("td",{className:"py-4 px-4",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>{alert("Edit functionality coming soon")},title:"Edit External User",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx(ze,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:async()=>{if(confirm(`Are you sure you want to delete ${se.name}?`))try{const Fe=await Ls.deleteExternalUser(se.id);if(Fe.success){const Ke=await Ls.getExternalUsers();Ke.success&&Ke.data&&Be(Ke.data),alert("External user deleted successfully")}else alert(Fe.error||"Failed to delete external user")}catch(Fe){alert(Fe.userMessage||"Failed to delete external user")}},title:"Delete External User",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},se.id))})]})})]})]}),t==="dropdown-options"&&s.jsxs(s.Fragment,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dropdown Options Management"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage dropdown field options for Audit Finding forms"})]}),s.jsxs("div",{className:"flex items-center gap-[12.8px]",children:[s.jsx(Yt,{label:"Select Field",value:te,onChange:se=>{Ne(se.target.value),et({...qe,field_name:se.target.value})},options:Lt.map(se=>({value:se.value,label:se.label})),className:"min-w-[200px]"}),s.jsxs(ze,{variant:"primary",onClick:()=>{Qe(null),et({field_name:te,option_value:"",display_order:0,parent_department:""}),pe(!0)},children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Option"]})]})]})}),Se?s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsx(Ct,{size:"lg"})}):s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:`${((vr=Lt.find(se=>se.value===te))==null?void 0:vr.label)||"Options"}`,subtitle:`${((Mt=xe[te])==null?void 0:Mt.length)||0} options`}),s.jsx("div",{className:"overflow-x-auto mt-4",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Order"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Option Value"}),te==="process"&&s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Parent Department"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"}),s.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{children:!xe[te]||xe[te].length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:te==="process"?5:4,className:"py-12 text-center",children:s.jsxs("div",{className:"text-gray-400",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),s.jsx("p",{className:"text-lg font-medium",children:"No options found"}),s.jsx("p",{className:"text-sm mt-1",children:'Click "Add Option" to create a new option'})]})})}):xe[te].sort((se,Fe)=>se.display_order-Fe.display_order).map(se=>s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"py-4 px-4 text-gray-600",children:se.display_order}),s.jsx("td",{className:"py-4 px-4 font-medium text-gray-900",children:se.option_value.split(" ").map(Fe=>Fe.includes("&")?Fe.split("&").map(Ke=>Ke.charAt(0).toUpperCase()+Ke.slice(1).toLowerCase()).join("&"):Fe.charAt(0).toUpperCase()+Fe.slice(1).toLowerCase()).join(" ")}),te==="process"&&s.jsx("td",{className:"py-4 px-4 text-gray-600",children:se.parent_department||se.parent_business_unit||"-"}),s.jsx("td",{className:"py-4 px-4",children:s.jsx(tt,{variant:se.is_active?"success":"default",children:se.is_active?"Active":"Inactive"})}),s.jsx("td",{className:"py-4 px-4",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>$n(se),title:"Edit Option",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx(ze,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>Kt(se),title:"Delete Option",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},se.id))})]})})]}),fe&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs(Ie,{className:"max-w-md w-full",children:[s.jsx(Nt,{title:Le?"Edit Option":"Create New Option",subtitle:Le?"Update dropdown option":"Add a new option to the dropdown"}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Field Name"}),s.jsx(Tn,{value:((Cr=Lt.find(se=>se.value===qe.field_name))==null?void 0:Cr.label)||qe.field_name,disabled:!0,fullWidth:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Option Value ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Tn,{value:qe.option_value,onChange:se=>et({...qe,option_value:se.target.value}),placeholder:"Enter option value",required:!0,fullWidth:!0})]}),te==="process"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Parent Department"}),s.jsx(Yt,{value:qe.parent_department,onChange:se=>et({...qe,parent_department:se.target.value}),options:[{value:"",label:"None (Standalone)"},...(xe.department||[]).filter(se=>se.is_active).sort((se,Fe)=>se.display_order-Fe.display_order).map(se=>({value:se.option_value,label:se.option_value}))],fullWidth:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the Department this Process belongs to"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Order"}),s.jsx(Tn,{type:"number",value:qe.display_order,onChange:se=>et({...qe,display_order:parseInt(se.target.value)||0}),placeholder:"0",fullWidth:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first in the dropdown"})]}),Le&&s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx(Fm,{checked:Le.is_active,onChange:se=>Qe({...Le,is_active:se})}),s.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsxs(ze,{variant:"primary",onClick:Le?kt:Vt,disabled:_t||!qe.option_value.trim(),isLoading:_t,children:[Le?"Update":"Create"," Option"]}),s.jsx(ze,{variant:"outline",onClick:()=>{pe(!1),Qe(null),et({field_name:te,option_value:"",display_order:0,parent_department:""})},disabled:_t,children:"Cancel"})]})]})]})})]}),U&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs(Ie,{className:"max-w-md w-full",children:[s.jsx(Nt,{title:"Create New Role",subtitle:"Add a new role to the system"}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Role Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:Q,onChange:se=>Z(se.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),placeholder:"e.g., external_viewer",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:ae}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only lowercase letters, numbers, and underscores allowed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:$,onChange:se=>ne(se.target.value),placeholder:"Role description (optional)",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:ae})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(ze,{variant:"primary",onClick:async()=>{if(!Q.trim()){alert("Role name is required");return}ce(!0);try{const se=await Ls.createRole({name:Q.trim(),description:$.trim()||void 0});if(se.success&&se.data){const Fe=await Pl.getRoles();Fe.success&&Fe.data&&z(Fe.data),B(!1),Z(""),ne(""),alert("Role created successfully!")}else alert(se.error||"Failed to create role")}catch(se){alert(se.userMessage||"Failed to create role")}finally{ce(!1)}},disabled:ae||!Q.trim(),isLoading:ae,children:"Create Role"}),s.jsx(ze,{variant:"outline",onClick:()=>{B(!1),Z(""),ne("")},disabled:ae,children:"Cancel"})]})]})]})}),je&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs(Ie,{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx(Nt,{title:"Create External User",subtitle:"Add a new external user account"}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-[12.8px]",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",value:st.email,onChange:se=>ft({...st,email:se.target.value}),placeholder:"user@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:Oe})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:st.name,onChange:se=>ft({...st,name:se.target.value}),placeholder:"Full Name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:Oe})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:st.company,onChange:se=>ft({...st,company:se.target.value}),placeholder:"Company Name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:Oe})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Access Reason ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:st.access_reason,onChange:se=>ft({...st,access_reason:se.target.value}),placeholder:"Reason for access",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:Oe})]}),s.jsx("div",{className:"grid grid-cols-2 gap-[12.8px]",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expires At"}),s.jsx("input",{type:"date",value:st.expires_at,onChange:se=>ft({...st,expires_at:se.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:Oe})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),s.jsx("textarea",{value:st.notes,onChange:se=>ft({...st,notes:se.target.value}),placeholder:"Additional notes (optional)",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:Oe})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(ze,{variant:"primary",onClick:async()=>{var se,Fe,Ke,nt;if(!st.email||!st.name||!st.company||!st.access_reason){alert("Email, name, company, and access reason are required");return}re(!0);try{const Ft=await Ls.createExternalUser({email:st.email.trim(),name:st.name.trim(),company:st.company.trim(),access_reason:st.access_reason.trim(),expires_at:st.expires_at||void 0,notes:st.notes.trim()||void 0,role:st.role});if(Ft.success){const wn=await Ls.getExternalUsers();wn.success&&wn.data&&Be(wn.data),dt(!1),ft({email:"",name:"",company:"",access_reason:"",expires_at:"",notes:"",role:"external_user"}),alert("External user created successfully! Welcome email has been sent.")}else alert(Ft.error||"Failed to create external user")}catch(Ft){if(console.error("Create external user error:",Ft),(Fe=(se=Ft.response)==null?void 0:se.data)!=null&&Fe.success&&((nt=(Ke=Ft.response)==null?void 0:Ke.data)!=null&&nt.user)){const wn=await Ls.getExternalUsers();wn.success&&wn.data&&Be(wn.data),dt(!1),ft({email:"",name:"",company:"",access_reason:"",expires_at:"",notes:"",role:"external_user"}),alert("External user created successfully! Welcome email has been sent.")}else alert(Ft.userMessage||Ft.message||"Failed to create external user")}finally{re(!1)}},disabled:Oe||!st.email||!st.name||!st.company||!st.access_reason,isLoading:Oe,children:"Create User"}),s.jsx(ze,{variant:"outline",onClick:()=>{dt(!1),ft({email:"",name:"",company:"",access_reason:"",expires_at:"",notes:"",role:"default"})},disabled:Oe,children:"Cancel"})]})]})]})})]})},L7=()=>{const t={labels:["Critical","High","Medium","Low"],datasets:[{data:[12,35,58,23],backgroundColor:["rgba(239, 68, 68, 0.8)","rgba(249, 115, 22, 0.8)","rgba(234, 179, 8, 0.8)","rgba(34, 197, 94, 0.8)"],borderColor:["rgba(239, 68, 68, 1)","rgba(249, 115, 22, 1)","rgba(234, 179, 8, 1)","rgba(34, 197, 94, 1)"],borderWidth:2}]},e={labels:["Q1","Q2","Q3","Q4"],datasets:[{label:"Identified Risks",data:[45,52,48,38],backgroundColor:"rgba(239, 68, 68, 0.8)"},{label:"Mitigated Risks",data:[38,45,42,35],backgroundColor:"rgba(34, 197, 94, 0.8)"}]},n=[{id:1,title:"Cybersecurity Threats",level:"critical",category:"Technology",probability:"High",impact:"High"},{id:2,title:"Regulatory Compliance",level:"high",category:"Compliance",probability:"Medium",impact:"High"},{id:3,title:"Data Privacy Breach",level:"critical",category:"Security",probability:"Medium",impact:"High"},{id:4,title:"Operational Inefficiency",level:"medium",category:"Operations",probability:"High",impact:"Medium"},{id:5,title:"Third-Party Dependencies",level:"high",category:"Vendor",probability:"Medium",impact:"High"}],r=i=>{switch(i){case"critical":return"danger";case"high":return"warning";case"medium":return"info";default:return"success"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-[24px] font-bold text-gray-900",children:"Risk Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor and manage organizational risks"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-[19.2px]",children:[s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Total Risks",subtitle:"Currently tracked"}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-4xl font-bold text-purple-600",children:"128"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Across all categories"})]})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Critical Risks",subtitle:"Immediate attention"}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-4xl font-bold text-red-600",children:"12"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Requires action"})]})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Mitigated",subtitle:"This quarter"}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-4xl font-bold text-green-600",children:"45"}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[s.jsx("span",{className:"text-green-600 font-medium",children:" 15%"})," from last quarter"]})]})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Risk Score",subtitle:"Overall assessment"}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-4xl font-bold text-yellow-600",children:"6.8"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Out of 10"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-[19.2px]",children:[s.jsx(wD,{title:"Risk Distribution by Severity",subtitle:"Current risk portfolio",data:t,height:350}),s.jsx(Dx,{title:"Risk Trends",subtitle:"Quarterly comparison",data:e,height:350})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Top Risks",subtitle:"Highest priority items requiring attention"}),s.jsx("div",{className:"overflow-x-auto mt-4",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Risk"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Category"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Level"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Probability"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Impact"})]})}),s.jsx("tbody",{children:n.map(i=>s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"py-4 px-4",children:s.jsx("span",{className:"font-medium text-gray-900",children:i.title})}),s.jsx("td",{className:"py-4 px-4 text-gray-600",children:i.category}),s.jsx("td",{className:"py-4 px-4",children:s.jsx(tt,{variant:r(i.level),children:i.level})}),s.jsx("td",{className:"py-4 px-4 text-gray-600",children:i.probability}),s.jsx("td",{className:"py-4 px-4 text-gray-600",children:i.impact})]},i.id))})]})})]})]})},M7=()=>{const[t,e]=L.useState("2024+"),[n,r]=L.useState(1),[i,a]=L.useState(25),[o,c]=L.useState(null),[u,f]=L.useState(!1),[h,p]=L.useState(null),[m,x]=L.useState("asc"),[v,b]=L.useState("all"),[y,w]=L.useState("all"),[k,N]=L.useState("all"),[j,S]=L.useState(null),[A,O]=L.useState(null),{role:M,isImpersonating:z,originalUser:I,startImpersonation:D}=Vr(),{isExporting:T,exportFindingActions:q}=Ch(),H=L.useRef(null),[G,ee]=L.useState(()=>{const _e=localStorage.getItem("my-actions-column-order");return _e?JSON.parse(_e):["key","summary","description","status","audit","dueDate","riskLevel","responsible","actions"]}),[X,J]=L.useState(null),[K,W]=L.useState(null),R=()=>{b("all"),w("all"),N("all"),p(null),x("asc")},U=async _e=>{try{await D(_e),window.location.reload()}catch{}},B=_e=>{J(_e)},Q=(_e,te)=>{_e.preventDefault(),W(te)},Z=_e=>{if(!X||X===_e){J(null),W(null);return}const te=[...G],Ne=te.indexOf(X),fe=te.indexOf(_e);te.splice(Ne,1),te.splice(fe,0,X),ee(te),localStorage.setItem("my-actions-column-order",JSON.stringify(te)),J(null),W(null)},$=()=>{J(null),W(null)},ne={key:120,summary:250,description:280,status:120,audit:200,dueDate:120,riskLevel:100,responsible:180,actions:120},{columnWidths:ae,resizing:ce,handleMouseDown:ye}=uc(H,ne,"my-actions-columns"),Be={key:{label:"Key",render:_e=>s.jsx("span",{className:"text-purple-600 font-mono text-xs",children:_e.key})},summary:{label:"Summary",render:_e=>s.jsx("span",{className:"font-medium text-gray-900 line-clamp-2",children:_e.summary})},description:{label:"Description",render:_e=>s.jsx("span",{className:"text-gray-700 text-xs line-clamp-2",children:_e.description||"-"})},status:{label:"Status",sortable:!0,sortKey:"displayStatus",render:_e=>s.jsx(tt,{variant:Se(_e.status),children:_e.displayStatus})},audit:{label:"Audit",sortable:!0,sortKey:"auditName",render:_e=>s.jsx("span",{className:"text-gray-600 text-xs",children:_e.auditName||"-"})},dueDate:{label:"Due Date",sortable:!0,sortKey:"dueDate",render:_e=>s.jsx("span",{className:"text-gray-600 text-xs",children:_e.dueDate?cs(_e.dueDate,"PP"):"-"})},riskLevel:{label:"Risk Level",sortable:!0,sortKey:"riskLevel",render:_e=>s.jsx(tt,{variant:_e.riskLevel==="Critical"?"danger":_e.riskLevel==="High"?"warning":_e.riskLevel==="Medium"?"info":"default",children:_e.riskLevel||"Unassigned"})},responsible:{label:"Responsible",render:_e=>s.jsx("span",{className:"text-gray-600 text-xs",children:_e.responsibleEmail||"-"})},actions:{label:"Action Detail",render:_e=>s.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>{c(_e),f(!0)},children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})}},{data:Ue,isLoading:it}=jA({auditYear:t==="all"?void 0:t,managerEmail:j||void 0}),je=L.useMemo(()=>Ue?Array.isArray(Ue)?Ue:Ue.data||[]:[],[Ue]);L.useEffect(()=>{console.log(" MyActionsPage - actionsData:",Ue),console.log(" MyActionsPage - role:",M),console.log(" MyActionsPage - isImpersonating:",z),Ue&&!Array.isArray(Ue)&&Ue.managerInfo?(console.log(" ManagerInfo found:",Ue.managerInfo),O(Ue.managerInfo),!j&&Ue.managerInfo.manager1&&S(Ue.managerInfo.manager1.email)):Ue&&Array.isArray(Ue)&&(console.log(" No managerInfo in response (array format)"),O(null))},[Ue,j,M,z]),L.useEffect(()=>{const _e=te=>{te.key==="Escape"&&u&&f(!1)};if(u)return document.addEventListener("keydown",_e),()=>document.removeEventListener("keydown",_e)},[u]);const dt=_e=>{h===_e?x(m==="asc"?"desc":"asc"):(p(_e),x("asc"))},st=L.useMemo(()=>{if(!je||!Array.isArray(je))return[];const _e=Ne=>Ne==="COMPLETED"?"Completed":Ne==="RISK ACCEPTED"?"Risk Accepted":Ne;let te=je.map(Ne=>({...Ne,displayStatus:_e(Ne.status)}));return v!=="all"&&(te=te.filter(Ne=>Ne.displayStatus===v)),y!=="all"&&(te=te.filter(Ne=>Ne.auditName===y)),k!=="all"&&(te=te.filter(Ne=>Ne.riskLevel===k)),h&&te.sort((Ne,fe)=>{let pe=Ne[h],Le=fe[h];return h==="dueDate"&&(pe=pe?new Date(pe).getTime():0,Le=Le?new Date(Le).getTime():0),typeof pe=="string"&&(pe=pe.toLowerCase()),typeof Le=="string"&&(Le=Le.toLowerCase()),pe<Le?m==="asc"?-1:1:pe>Le?m==="asc"?1:-1:0}),te},[je,h,m,v,y,k]),ft=L.useMemo(()=>{const _e=(n-1)*i,te=_e+i;return st.slice(_e,te)},[st,n,i]),Oe=L.useMemo(()=>{if(!je||!Array.isArray(je))return[];const _e=te=>te==="COMPLETED"?"Completed":te==="RISK ACCEPTED"?"Risk Accepted":te;return[...new Set(je.map(te=>_e(te.status)))]},[je]),re=L.useMemo(()=>!je||!Array.isArray(je)?[]:[...new Set(je.map(_e=>_e.auditName).filter(Boolean))],[je]),xe=L.useMemo(()=>!je||!Array.isArray(je)?[]:[...new Set(je.map(_e=>_e.riskLevel).filter(Boolean))],[je]),we=L.useMemo(()=>{if(!je||!Array.isArray(je))return{total:0,open:0,overdue:0,completed:0,moneyOpen:0,moneyOverdue:0};const _e=je.filter(Qe=>Qe.status==="Open"),te=je.filter(Qe=>Qe.status==="Overdue"),Ne=new Set(_e.map(Qe=>Qe.parentKey).filter(Boolean)),fe=new Set(te.map(Qe=>Qe.parentKey).filter(Boolean)),pe=Array.from(Ne).reduce((Qe,qe)=>{const et=_e.find(_t=>_t.parentKey===qe);return Qe+((et==null?void 0:et.monetaryImpact)||0)},0),Le=Array.from(fe).reduce((Qe,qe)=>{const et=te.find(_t=>_t.parentKey===qe);return Qe+((et==null?void 0:et.monetaryImpact)||0)},0);return{total:je.length,open:_e.length,overdue:te.length,completed:je.filter(Qe=>Qe.status==="COMPLETED"||Qe.status==="Completed").length,moneyOpen:pe,moneyOverdue:Le}},[je]),Se=_e=>({COMPLETED:"success",Completed:"success",Open:"danger",Overdue:"warning","In Progress":"info","RISK ACCEPTED":"default"})[_e]||"default";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-[24px] font-bold text-gray-900",children:"My Team Actions"}),s.jsx("p",{className:"text-gray-600 mt-1",children:M==="team_manager"?"Actions managed by your team":"Actions from your manager's team"})]}),s.jsxs("div",{className:"flex items-center gap-[12.8px]",children:[(M==="admin"||z&&(I==null?void 0:I.role)==="admin")&&s.jsx(Yh,{onSelectUser:U,filterByRole:["team","team_manager"]}),s.jsxs("div",{className:"inline-flex rounded-lg border border-gray-300 bg-white p-1 shadow-sm",children:[s.jsxs("button",{onClick:()=>e("2024+"),className:`flex items-center gap-[6.4px] px-[12.8px] py-[6.4px] text-xs font-medium rounded-md transition-all ${t==="2024+"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[s.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",fill:t==="2024+"?"white":"#E5E7EB"}),s.jsx("rect",{x:"3",y:"4",width:"18",height:"6",rx:"2",fill:t==="2024+"?"#DC2626":"#991B1B"}),s.jsx("text",{x:"12",y:"8",textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"bold",children:"JUL"}),s.jsx("text",{x:"12",y:"16",textAnchor:"middle",fill:t==="2024+"?"#6B7280":"#1F2937",fontSize:"8",fontWeight:"bold",children:"17"})]}),"As of 2024"]}),s.jsxs("button",{onClick:()=>e("all"),className:`flex items-center gap-[6.4px] px-[12.8px] py-[6.4px] text-xs font-medium rounded-md transition-all ${t==="all"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[s.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("rect",{x:"4",y:"14",width:"3",height:"6",fill:"#10B981",rx:"0.5"}),s.jsx("rect",{x:"10",y:"8",width:"3",height:"12",fill:"#EF4444",rx:"0.5"}),s.jsx("rect",{x:"16",y:"11",width:"3",height:"9",fill:"#3B82F6",rx:"0.5"}),s.jsx("line",{x1:"3",y1:"7",x2:"21",y2:"7",stroke:t==="all"?"white":"#9CA3AF",strokeWidth:"1.5"})]}),"All Results"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[s.jsxs(Ie,{variant:"elevated",className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Total Actions"}),s.jsx(tt,{variant:"default",size:"sm",className:"text-xs",children:t==="2024+"?"2024+":"All"})]}),it?s.jsx(Ct,{size:"sm"}):s.jsx("p",{className:"text-[16px] font-bold text-purple-600",children:we.total})]}),s.jsxs(Ie,{variant:"elevated",className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Open Actions"}),s.jsx(tt,{variant:"default",size:"sm",className:"text-xs",children:t==="2024+"?"2024+":"All"})]}),it?s.jsx(Ct,{size:"sm"}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-[16px] font-bold text-red-600",children:we.open}),s.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[we.total>0?`${Math.round(we.open/we.total*100)}%`:"0%"," of total"]})]})]}),s.jsxs(Ie,{variant:"elevated",className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Overdue Actions"}),s.jsx(tt,{variant:"default",size:"sm",className:"text-xs",children:t==="2024+"?"2024+":"All"})]}),it?s.jsx(Ct,{size:"sm"}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-[16px] font-bold text-yellow-600",children:we.overdue}),s.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[we.total>0?`${Math.round(we.overdue/we.total*100)}%`:"0%"," of total"]})]})]}),s.jsxs(Ie,{variant:"elevated",className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Completed Actions"}),s.jsx(tt,{variant:"default",size:"sm",className:"text-xs",children:t==="2024+"?"2024+":"All"})]}),it?s.jsx(Ct,{size:"sm"}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-[16px] font-bold text-green-600",children:we.completed}),s.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[we.total>0?`${Math.round(we.completed/we.total*100)}%`:"0%"," of total"]})]})]})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Team Finding Actions",subtitle:`${st.length} actions found${st.length!==((je==null?void 0:je.length)||0)?` (filtered from ${(je==null?void 0:je.length)||0} total)`:""}`,action:s.jsxs(ze,{variant:"primary",size:"sm",onClick:()=>{const _e=st.map(te=>te.key);q({auditYear:t,role:"team",actionKeys:_e.length>0?_e.join(","):void 0,statusFilter:v!=="all"?v:void 0,auditFilter:y!=="all"?y:void 0,riskLevelFilter:k!=="all"?k:void 0})},isLoading:T,children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export to Excel"]})}),it?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx(Ct,{size:"xl",text:"Loading team actions..."})}):!je||!Array.isArray(je)?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("h3",{className:"mt-2 text-xs font-medium text-gray-900",children:"No actions found"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No team actions available for the selected filters."})]}):s.jsxs(s.Fragment,{children:[M==="team"&&A&&s.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Manager:"}),s.jsxs("div",{className:"relative inline-flex items-center bg-gray-200 rounded-full p-1 cursor-pointer",style:{width:"fit-content"},children:[s.jsx("div",{className:`absolute top-1 bottom-1 rounded-full bg-white shadow-md transition-all duration-300 ease-in-out ${j===A.manager1.email?"left-1":"right-1"}`,style:{width:"calc(50% - 4px)"}}),s.jsx("button",{onClick:()=>S(A.manager1.email),className:`relative z-10 px-5 py-2 text-sm font-medium rounded-full transition-colors duration-300 ${j===A.manager1.email?"text-purple-600":"text-gray-600"}`,children:A.manager1.name}),s.jsx("button",{onClick:()=>S(A.manager2.email),className:`relative z-10 px-5 py-2 text-sm font-medium rounded-full transition-colors duration-300 ${j===A.manager2.email?"text-purple-600":"text-gray-600"}`,children:A.manager2.name})]})]}),s.jsxs("div",{className:"overflow-x-auto mt-4",children:[s.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3 justify-between",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Status:"}),s.jsxs("select",{value:v,onChange:_e=>b(_e.target.value),className:"px-3 py-1.5 text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[s.jsx("option",{value:"all",children:"All Statuses"}),Oe.map(_e=>s.jsx("option",{value:_e,children:_e},_e))]})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Audit:"}),s.jsxs("select",{value:y,onChange:_e=>w(_e.target.value),className:"px-3 py-1.5 text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer max-w-xs",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[s.jsx("option",{value:"all",children:"All Audits"}),re.map(_e=>s.jsx("option",{value:_e,children:_e},_e))]})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Risk Level:"}),s.jsxs("select",{value:k,onChange:_e=>N(_e.target.value),className:"px-3 py-1.5 text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[s.jsx("option",{value:"all",children:"All Levels"}),xe.map(_e=>s.jsx("option",{value:_e,children:_e},_e))]})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(ze,{variant:"outline",size:"sm",onClick:R,className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset"]})})]}),s.jsxs("table",{ref:H,className:"w-full",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-gray-200",children:G.map(_e=>{const te=Be[_e];return te?s.jsx(bs,{columnKey:_e,width:ae[_e],onResizeStart:ye,isResizing:ce===_e,className:F("text-left py-3 px-4 text-sm font-semibold text-gray-700",te.sortable&&"cursor-pointer hover:bg-purple-50 transition-colors select-none",_e==="actions"&&"text-center"),onClick:te.sortable&&te.sortKey?()=>dt(te.sortKey):void 0,onDragStart:B,onDragOver:Q,onDrop:Z,onDragEnd:$,isDragging:X===_e,isDragOver:K===_e,children:te.sortable&&te.sortKey?s.jsxs("div",{className:"flex items-center gap-2",children:[te.label,s.jsx("span",{className:h===te.sortKey?"text-purple-600":"text-gray-400",children:h===te.sortKey?m==="asc"?"":"":""})]}):te.label},_e):null})})}),s.jsx("tbody",{children:ft.map(_e=>s.jsx("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:G.map(te=>{const Ne=Be[te];return Ne?s.jsx("td",{className:F("py-4 px-4",te==="actions"&&"text-center"),style:{width:ae[te]},children:Ne.render(_e)},te):null})},_e.key))})]})]})]}),st&&st.length>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsx(ay,{currentPage:n,totalItems:st.length,itemsPerPage:i,onPageChange:r,onItemsPerPageChange:a})})]}),u&&o&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[85vh] overflow-y-auto",onClick:_e=>_e.stopPropagation(),children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 px-6 py-4 rounded-t-2xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Finding Action Details"}),s.jsx("p",{className:"text-purple-100 text-sm mt-1",children:o.key})]}),s.jsx("button",{onClick:()=>f(!1),className:"text-white hover:text-purple-200 transition-colors p-2",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Audit Name"}),s.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.auditName||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Status"}),s.jsx("div",{className:"mt-1",children:s.jsx(tt,{variant:Se(o.status),children:o.status==="COMPLETED"?"Completed":o.status==="RISK ACCEPTED"?"Risk Accepted":o.status})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Due Date"}),s.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.dueDate?cs(o.dueDate,"PPP"):"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Financial Impact"}),s.jsx("p",{className:"text-gray-900 font-medium mt-1",children:Hr(o.monetaryImpact)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Action Responsible"}),s.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.responsibleEmail||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Manager"}),s.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.managerEmail||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"C-Level"}),s.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.cLevel||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Risk Level"}),s.jsx("div",{className:"mt-1",children:s.jsx(tt,{variant:o.riskLevel==="Critical"?"danger":o.riskLevel==="High"?"warning":o.riskLevel==="Medium"?"info":"default",children:o.riskLevel||"Unassigned"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Action Summary"}),s.jsx("p",{className:"text-gray-900 mt-2 p-4 bg-gray-50 rounded-lg",children:o.summary})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Action Description"}),s.jsx("p",{className:"text-gray-700 mt-2 p-4 bg-gray-50 rounded-lg whitespace-pre-wrap",children:o.description||"No description available"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Finding Description"}),s.jsx("p",{className:"text-gray-700 mt-2 p-4 bg-purple-50 rounded-lg whitespace-pre-wrap border border-purple-200",children:o.parentDescription||"No description available"})]}),s.jsx("div",{className:"flex justify-end items-center pt-4 border-t",children:s.jsx(ze,{variant:"outline",onClick:()=>f(!1),children:"Close"})})]})]})})]})},aj=t=>{if(!t||!Array.isArray(t))return 0;const e=new Set(t.map(n=>n.parentKey).filter(n=>!!n));return Array.from(e).reduce((n,r)=>{const i=t.find(a=>a.parentKey===r);return n+((i==null?void 0:i.monetaryImpact)||0)},0)},T7=t=>L.useMemo(()=>{if(!t||!Array.isArray(t))return{total:0,open:0,overdue:0,completed:0,moneyOpen:0,moneyOverdue:0};const e=t.filter(o=>o.status==="Open"),n=t.filter(o=>o.status==="Overdue"),r=t.filter(o=>o.status==="COMPLETED"||o.status==="Completed"),i=aj(e),a=aj(n);return{total:t.length,open:e.length,overdue:n.length,completed:r.length,moneyOpen:i,moneyOverdue:a}},[t]),Ff={columnWidths:{key:120,summary:250,description:280,status:120,audit:200,dueDate:120,riskLevel:100,responsible:180,actions:120},defaultColumnOrder:["key","summary","description","status","audit","dueDate","riskLevel","responsible","actions"],localStorage:{columnOrderKey:"department-actions-column-order",columnWidthsKey:"department-actions-columns"}},D7=()=>{const[t,e]=L.useState("2024+"),[n,r]=L.useState(1),[i,a]=L.useState(25),[o,c]=L.useState(null),[u,f]=L.useState(!1),[h,p]=L.useState(window.innerWidth<768),[m,x]=L.useState(null);L.useEffect(()=>{const te=()=>p(window.innerWidth<768);return window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]);const[v,b]=L.useState(null),[y,w]=L.useState("asc"),[k,N]=L.useState("all"),[j,S]=L.useState("all"),[A,O]=L.useState("all"),[M,z]=L.useState(""),{user:I,role:D,isImpersonating:T,originalUser:q,startImpersonation:H}=Vr(),{isExporting:G,exportFindingActions:ee}=Ch(),X=L.useRef(null),[J,K]=L.useState(()=>{const te=localStorage.getItem(Ff.localStorage.columnOrderKey);return te?JSON.parse(te):Ff.defaultColumnOrder}),[W,R]=L.useState(null),[U,B]=L.useState(null),Q=()=>{N("all"),S("all"),O("all"),z(""),b(null),w("asc")},Z=async te=>{try{console.log("Starting impersonation for:",te),await H(te),console.log("Impersonation successful, reloading page..."),window.location.reload()}catch(Ne){console.error("Impersonation failed:",Ne)}},$=te=>{R(te)},ne=(te,Ne)=>{te.preventDefault(),B(Ne)},ae=te=>{if(!W||W===te){R(null),B(null);return}const Ne=[...J],fe=Ne.indexOf(W),pe=Ne.indexOf(te);Ne.splice(fe,1),Ne.splice(pe,0,W),K(Ne),localStorage.setItem("department-actions-column-order",JSON.stringify(Ne)),R(null),B(null)},ce=()=>{R(null),B(null)},{columnWidths:ye,resizing:Be,handleMouseDown:Ue}=uc(X,Ff.columnWidths,Ff.localStorage.columnWidthsKey),it={key:{label:"Key",render:te=>s.jsx("span",{className:"text-purple-600 font-mono text-xs",children:te.key})},summary:{label:"Summary",render:te=>s.jsx("span",{className:"text-xs font-medium text-gray-900 line-clamp-2",children:te.summary})},description:{label:"Description",render:te=>s.jsx("span",{className:"text-gray-700 text-xs line-clamp-2",children:te.description||"-"})},status:{label:"Status",sortable:!0,sortKey:"displayStatus",render:te=>s.jsx(tt,{variant:d0(te.status),children:te.displayStatus})},audit:{label:"Audit",sortable:!0,sortKey:"auditName",render:te=>s.jsx("span",{className:"text-gray-600 text-xs",children:te.auditName||"-"})},dueDate:{label:"Due Date",sortable:!0,sortKey:"dueDate",render:te=>s.jsx("span",{className:"text-gray-600 text-xs",children:te.dueDate?cs(te.dueDate,"PP"):"-"})},riskLevel:{label:"Risk Level",sortable:!0,sortKey:"riskLevel",render:te=>s.jsx(tt,{variant:te.riskLevel==="Critical"?"danger":te.riskLevel==="High"?"warning":te.riskLevel==="Medium"?"info":"default",children:te.riskLevel||"Unassigned"})},responsible:{label:"Responsible",render:te=>s.jsx("span",{className:"text-gray-600 text-xs",children:te.responsibleEmail||"-"})},actions:{label:"Action Detail",render:te=>s.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>{c(te),f(!0)},children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})}},{data:je,isLoading:dt}=cA({auditYear:t==="all"?void 0:t,userEmail:D==="admin"&&!T||I==null?void 0:I.email});L.useEffect(()=>{const te=Ne=>{Ne.key==="Escape"&&u&&f(!1)};if(u)return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[u]);const st=te=>{v===te?w(y==="asc"?"desc":"asc"):(b(te),w("asc"))},ft=L.useMemo(()=>{if(!je||!Array.isArray(je))return[];let te=je.map(Ne=>({...Ne,displayStatus:c0(Ne.status)}));if(k!=="all"&&(te=te.filter(Ne=>Ne.displayStatus===k)),j!=="all"&&(te=te.filter(Ne=>Ne.auditName===j)),A!=="all"&&(te=te.filter(Ne=>Ne.riskLevel===A)),M.trim()){const Ne=M.toLowerCase();te=te.filter(fe=>fe.key.toLowerCase().includes(Ne)||fe.summary.toLowerCase().includes(Ne)||fe.auditName&&fe.auditName.toLowerCase().includes(Ne)||fe.description&&fe.description.toLowerCase().includes(Ne))}return v&&te.sort((Ne,fe)=>{let pe=Ne[v],Le=fe[v];return v==="dueDate"&&(pe=pe?new Date(pe).getTime():0,Le=Le?new Date(Le).getTime():0),typeof pe=="string"&&(pe=pe.toLowerCase()),typeof Le=="string"&&(Le=Le.toLowerCase()),pe<Le?y==="asc"?-1:1:pe>Le?y==="asc"?1:-1:0}),te},[je,v,y,k,j,A,M]),Oe=L.useMemo(()=>{const te=(n-1)*i,Ne=te+i;return ft.slice(te,Ne)},[ft,n,i]),re=L.useMemo(()=>!je||!Array.isArray(je)?[]:[...new Set(je.map(te=>c0(te.status)))],[je]),xe=L.useMemo(()=>!je||!Array.isArray(je)?[]:[...new Set(je.map(te=>te.auditName).filter(Boolean))],[je]),we=L.useMemo(()=>!je||!Array.isArray(je)?[]:[...new Set(je.map(te=>te.riskLevel).filter(Boolean))],[je]),Se=T7(je),_e=L.useMemo(()=>{if(!je||!Array.isArray(je))return{labels:[],datasets:[]};const te={};je.forEach(Le=>{te[Le.status]=(te[Le.status]||0)+1});const Ne={};Object.entries(te).forEach(([Le,Qe])=>{const qe=c0(Le);Ne[qe]=(Ne[qe]||0)+Qe});const fe=Object.keys(Ne),pe=Object.values(Ne);return{labels:fe,datasets:[{data:pe,backgroundColor:fe.map(Le=>Wn[Le]||"rgba(147, 51, 234, 0.8)"),borderColor:fe.map(Le=>(Wn[Le]||"rgba(147, 51, 234, 0.8)").replace("0.8","1")),borderWidth:2}]}},[je]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-[12.8px] md:gap-0",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-[13px] md:text-[22px] font-bold text-gray-900",children:"Department Actions"}),s.jsxs("p",{className:"text-[9.6px] md:text-xs text-gray-600 mt-1",children:["Actions for ",I&&"department"in I&&I.department?`${I.department} Department`:"your department"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-[6.4px] md:gap-[12.8px] w-full md:w-auto justify-end md:justify-start",children:[(D==="admin"||T&&(q==null?void 0:q.role)==="admin")&&s.jsx(Yh,{onSelectUser:Z,filterByRole:["department_director"],className:"text-xs md:text-sm"}),!dt&&Se.total>0&&s.jsxs("div",{className:"inline-flex rounded-lg border border-gray-300 bg-white p-0.5 md:p-1 shadow-sm",children:[s.jsxs("button",{onClick:()=>e("2024+"),className:`flex items-center gap-[3.2px] md:gap-[6.4px] px-[4.8px] py-[3.2px] md:px-[12.8px] md:py-[6.4px] text-[8px] md:text-xs font-medium rounded-md transition-all ${t==="2024+"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[s.jsxs("svg",{className:"w-3 h-3 md:w-5 md:h-5",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",fill:t==="2024+"?"white":"#E5E7EB"}),s.jsx("rect",{x:"3",y:"4",width:"18",height:"6",rx:"2",fill:t==="2024+"?"#DC2626":"#991B1B"}),s.jsx("text",{x:"12",y:"8",textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"bold",children:"JUL"}),s.jsx("text",{x:"12",y:"16",textAnchor:"middle",fill:t==="2024+"?"#6B7280":"#1F2937",fontSize:"8",fontWeight:"bold",children:"17"})]}),!h&&s.jsx("span",{children:"As of 2024"}),h&&s.jsx("span",{children:"As of 2024"})]}),s.jsxs("button",{onClick:()=>e("all"),className:`flex items-center gap-[3.2px] md:gap-[6.4px] px-[4.8px] py-[3.2px] md:px-[12.8px] md:py-[6.4px] text-[8px] md:text-xs font-medium rounded-md transition-all ${t==="all"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[s.jsxs("svg",{className:"w-3 h-3 md:w-5 md:h-5",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("rect",{x:"4",y:"14",width:"3",height:"6",fill:"#10B981",rx:"0.5"}),s.jsx("rect",{x:"10",y:"8",width:"3",height:"12",fill:"#EF4444",rx:"0.5"}),s.jsx("rect",{x:"16",y:"11",width:"3",height:"9",fill:"#3B82F6",rx:"0.5"}),s.jsx("line",{x1:"3",y1:"7",x2:"21",y2:"7",stroke:t==="all"?"white":"#9CA3AF",strokeWidth:"1.5"})]}),!h&&s.jsx("span",{children:"All Results"}),h&&s.jsx("span",{children:"All"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-3 lg:grid-cols-6 gap-1.5 md:gap-2",children:[s.jsxs(Ie,{variant:"elevated",className:"relative border-t-4 border-t-purple-600 hover:shadow-lg transition-all",children:[s.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-1.5 md:right-1.5 text-[7px] md:text-[9px] px-0.5 md:px-1 py-0.5 bg-purple-100 text-purple-700 rounded-full",children:t==="2024+"?"2024+":"All"}),s.jsxs("div",{className:"py-[1.71px] md:py-[5.13px] px-[3.42px] md:px-[6.84px]",children:[s.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 text-purple-600 mb-0.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),s.jsx("p",{className:"text-[15.3px] md:text-[20.7px] font-bold text-purple-600 text-center leading-tight",children:Se.total}),s.jsx("p",{className:"text-[7.65px] md:text-[9.9px] text-gray-600 text-center",children:"Total"})]})]}),s.jsxs(Ie,{variant:"elevated",className:"relative border-t-4 border-t-amber-600 hover:shadow-lg transition-all",children:[s.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-1.5 md:right-1.5 text-[7px] md:text-[9px] px-0.5 md:px-1 py-0.5 bg-amber-100 text-amber-700 rounded-full",children:t==="2024+"?"2024+":"All"}),s.jsxs("div",{className:"py-[1.71px] md:py-[5.13px] px-[3.42px] md:px-[6.84px]",children:[s.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 text-amber-600 mb-0.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:"text-[15.3px] md:text-[20.7px] font-bold text-amber-600 text-center leading-tight",children:Se.open}),s.jsx("p",{className:"text-[7.65px] md:text-[9.9px] text-gray-600 text-center",children:"Open"})]})]}),s.jsxs(Ie,{variant:"elevated",className:"relative border-t-4 border-t-red-600 hover:shadow-lg transition-all",children:[s.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-1.5 md:right-1.5 text-[7px] md:text-[9px] px-0.5 md:px-1 py-0.5 bg-red-100 text-red-700 rounded-full",children:t==="2024+"?"2024+":"All"}),s.jsxs("div",{className:"py-[1.71px] md:py-[5.13px] px-[3.42px] md:px-[6.84px]",children:[s.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 text-red-600 mb-0.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("p",{className:"text-[15.3px] md:text-[20.7px] font-bold text-red-600 text-center leading-tight",children:Se.overdue}),s.jsx("p",{className:"text-[7.65px] md:text-[9.9px] text-gray-600 text-center",children:"Overdue"})]})]}),s.jsxs(Ie,{variant:"elevated",className:"relative border-t-4 border-t-green-600 hover:shadow-lg transition-all",children:[s.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-1.5 md:right-1.5 text-[7px] md:text-[9px] px-0.5 md:px-1 py-0.5 bg-green-100 text-green-700 rounded-full",children:t==="2024+"?"2024+":"All"}),s.jsxs("div",{className:"py-[1.71px] md:py-[5.13px] px-[3.42px] md:px-[6.84px]",children:[s.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 text-green-600 mb-0.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:"text-[15.3px] md:text-[20.7px] font-bold text-green-600 text-center leading-tight",children:Se.completed}),s.jsx("p",{className:"text-[7.65px] md:text-[9.9px] text-gray-600 text-center",children:"Done"})]})]}),s.jsxs(Ie,{variant:"elevated",className:"relative border-t-4 border-t-orange-600 hover:shadow-lg transition-all",children:[s.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-1.5 md:right-1.5 text-[7px] md:text-[9px] px-0.5 md:px-1 py-0.5 bg-orange-100 text-orange-700 rounded-full",children:"2024+"}),s.jsxs("div",{className:"py-[1.71px] md:py-[5.13px] px-[3.42px] md:px-[6.84px] flex flex-col justify-center items-center",children:[s.jsx("div",{className:"h-[14px] md:h-[18px]"}),s.jsx("p",{className:"text-[15.3px] md:text-[20.7px] font-bold text-orange-600 text-center leading-tight",children:Hr(Se.moneyOpen)}),s.jsx("p",{className:"text-[7.65px] md:text-[9.9px] text-gray-600 text-center",children:"Open "})]})]}),s.jsxs(Ie,{variant:"elevated",className:"relative border-t-4 border-t-rose-600 hover:shadow-lg transition-all",children:[s.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-1.5 md:right-1.5 text-[7px] md:text-[9px] px-0.5 md:px-1 py-0.5 bg-rose-100 text-rose-700 rounded-full",children:"2024+"}),s.jsxs("div",{className:"py-[1.71px] md:py-[5.13px] px-[3.42px] md:px-[6.84px] flex flex-col justify-center items-center",children:[s.jsx("div",{className:"h-[14px] md:h-[18px]"}),s.jsx("p",{className:"text-[15.3px] md:text-[20.7px] font-bold text-rose-600 text-center leading-tight",children:Hr(Se.moneyOverdue)}),s.jsx("p",{className:"text-[7.65px] md:text-[9.9px] text-gray-600 text-center",children:"Overdue "})]})]})]}),dt?s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-[12.16px]",children:[s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Department Actions Status Distribution"}),s.jsx("div",{className:"h-[270px] flex items-center justify-center",children:s.jsx(Ct,{size:"xl",text:"Loading chart..."})})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Key Metrics",subtitle:"Department performance"}),s.jsx("div",{className:"h-[270px] flex items-center justify-center",children:s.jsx(Ct,{size:"xl",text:"Loading metrics..."})})]})]}):Se.total>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-[12.16px]",children:[s.jsx(Dy,{title:"Department Actions Status Distribution",data:_e,height:270,loading:!1,options:{cutout:"60%",plugins:{legend:{display:!0,position:"bottom",labels:{padding:10,usePointStyle:!0,font:{size:9},generateLabels:te=>{const Ne=te.data;if(Ne.labels&&Ne.datasets&&Ne.datasets.length>0){const fe=Ne.datasets[0];if(!fe)return[];const pe=fe.backgroundColor;return Ne.labels.map((Le,Qe)=>{const qe=Array.isArray(fe.data)?fe.data[Qe]:0,et=Array.isArray(pe)?pe[Qe]:pe;return{text:`${Le}: ${qe}`,fillStyle:typeof et=="string"?et:"rgba(156, 163, 175, 0.8)",hidden:!1,index:Qe}})}return[]}}},datalabels:{display:!1},tooltip:{callbacks:{label:te=>{const Ne=te.label||"",fe=te.parsed||0,Le=te.dataset.data.reduce((qe,et)=>qe+et,0),Qe=(fe/Le*100).toFixed(1);return`${Ne}: ${fe} (${Qe}%)`}}}}}}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Key Metrics",subtitle:"Department performance"}),s.jsxs("div",{className:"mt-2.5 space-y-[9px] p-2.5",children:[s.jsxs("div",{className:"flex justify-between items-center p-[9px] bg-gradient-to-r from-green-50 to-green-100/50 rounded-lg border-l-4 border-green-500",children:[s.jsx("span",{className:"text-gray-700 font-semibold text-xs md:text-sm",children:"Completion Rate"}),s.jsxs("span",{className:"text-xl font-bold text-green-600",children:[Se.total>0?Math.round(Se.completed/Se.total*100):0,"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center p-[9px] bg-gradient-to-r from-red-50 to-red-100/50 rounded-lg border-l-4 border-red-500",children:[s.jsx("span",{className:"text-gray-700 font-semibold text-xs md:text-sm",children:"Overdue Rate"}),s.jsxs("span",{className:"text-xl font-bold text-red-600",children:[Se.total>0?Math.round(Se.overdue/Se.total*100):0,"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center p-[9px] bg-gradient-to-r from-purple-50 to-purple-100/50 rounded-lg border-l-4 border-purple-500",children:[s.jsx("span",{className:"text-gray-700 font-semibold text-xs md:text-sm",children:"Total Financial Impact"}),s.jsx("span",{className:"text-xl font-bold text-purple-600",children:Hr(Se.moneyOpen+Se.moneyOverdue)})]})]})]})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Department Finding Actions",subtitle:`${ft.length} actions found${ft.length!==((je==null?void 0:je.length)||0)?` (filtered from ${(je==null?void 0:je.length)||0} total)`:""}`,action:s.jsxs(ze,{variant:"primary",size:"sm",onClick:()=>{const te=ft.map(Ne=>Ne.key);ee({auditYear:t,role:"department",actionKeys:te.length>0?te.join(","):void 0,statusFilter:k!=="all"?k:void 0,auditFilter:j!=="all"?j:void 0,riskLevelFilter:A!=="all"?A:void 0})},isLoading:G,className:"text-[9.6px] md:text-xs px-[6.4px] md:px-[12.8px]",children:[s.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),s.jsx("span",{className:"hidden md:inline",children:"Export to Excel"}),s.jsx("span",{className:"md:hidden",children:"Export"})]})}),!je||!Array.isArray(je)?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("h3",{className:"mt-2 text-xs font-medium text-gray-900",children:"No actions found"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"No department actions available for the selected filters."})]}):s.jsxs("div",{className:"overflow-x-auto mt-4",children:[s.jsxs("div",{className:"mb-4 space-y-3",children:[s.jsxs("div",{className:"relative max-w-md",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",placeholder:"Search by key, summary, audit, or description...",value:M,onChange:te=>z(te.target.value),className:"w-full pl-[32px] pr-[12.8px] py-[8px] text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all"}),M&&s.jsx("button",{onClick:()=>z(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(k!=="all"||j!=="all"||A!=="all"||M)&&s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Active filters:"}),k!=="all"&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:["Status: ",k,s.jsx("button",{onClick:()=>N("all"),className:"hover:bg-blue-200 rounded-full p-0.5",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),j!=="all"&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:["Audit: ",j.length>20?j.substring(0,20)+"...":j,s.jsx("button",{onClick:()=>S("all"),className:"hover:bg-green-200 rounded-full p-0.5",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),A!=="all"&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:["Risk: ",A,s.jsx("button",{onClick:()=>O("all"),className:"hover:bg-amber-200 rounded-full p-0.5",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),M&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:['Search: "',M.length>15?M.substring(0,15)+"...":M,'"',s.jsx("button",{onClick:()=>z(""),className:"hover:bg-purple-200 rounded-full p-0.5",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("button",{onClick:Q,className:"text-xs text-gray-500 hover:text-gray-700 underline",children:"Clear all"})]})]}),s.jsxs("div",{className:"mb-4 flex flex-col md:flex-row md:flex-wrap md:items-center gap-3 md:justify-between",children:[s.jsxs("div",{className:"grid grid-cols-1 md:flex md:flex-wrap md:items-center gap-3 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-1.5 col-span-1",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 whitespace-nowrap",children:"Audit:"}),s.jsxs("select",{value:j,onChange:te=>S(te.target.value),className:"flex-1 md:flex-none px-3 py-1.5 text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer md:max-w-xs",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[s.jsx("option",{value:"all",children:"All Audits"}),xe.map(te=>s.jsx("option",{value:te,children:te},te))]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:flex gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 whitespace-nowrap",children:"Status:"}),s.jsxs("select",{value:k,onChange:te=>N(te.target.value),className:"flex-1 md:flex-none px-3 py-1.5 text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[s.jsx("option",{value:"all",children:"All Statuses"}),re.map(te=>s.jsx("option",{value:te,children:te},te))]})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("label",{className:"text-xs font-medium text-gray-600 whitespace-nowrap",children:"Risk Level:"}),s.jsxs("select",{value:A,onChange:te=>O(te.target.value),className:"flex-1 md:flex-none px-3 py-1.5 text-xs bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.4rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.2em 1.2em",paddingRight:"2rem"},children:[s.jsx("option",{value:"all",children:"All Levels"}),we.map(te=>s.jsx("option",{value:te,children:te},te))]})]})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(ze,{variant:"outline",size:"sm",onClick:Q,className:"border-purple-300 text-purple-700 hover:bg-purple-50 text-[9.6px] md:text-xs px-[6.4px] md:px-[12.8px]",children:[s.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 md:mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{className:"hidden md:inline",children:"Reset"})]})})]}),s.jsxs("table",{ref:X,className:"w-full hidden md:table table-fixed",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-gray-200",children:J.map(te=>{const Ne=it[te];return Ne?s.jsx(bs,{columnKey:te,width:h?void 0:ye[te],onResizeStart:Ue,isResizing:Be===te,className:F("text-left py-[9.6px] px-[6.4px] md:px-[12.8px] text-xs font-semibold text-gray-700",Ne.sortable&&"cursor-pointer hover:bg-purple-50 transition-colors select-none",te==="actions"&&"text-center",te==="key"&&"w-[22%]",te==="status"&&"w-[28%]",te==="summary"&&"w-[50%]",["description","audit","dueDate","riskLevel","monetaryImpact","responsible","cLevel","actions"].includes(te)&&"hidden md:table-cell"),onClick:Ne.sortable&&Ne.sortKey?()=>st(Ne.sortKey):void 0,onDragStart:$,onDragOver:ne,onDrop:ae,onDragEnd:ce,isDragging:W===te,isDragOver:U===te,children:Ne.sortable&&Ne.sortKey?s.jsxs("div",{className:"flex items-center gap-2",children:[Ne.label,s.jsx("span",{className:v===Ne.sortKey?"text-purple-600":"text-gray-400",children:v===Ne.sortKey?y==="asc"?"":"":""})]}):Ne.label},te):null})})}),s.jsx("tbody",{children:Oe.map(te=>s.jsx("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:J.map(Ne=>{const fe=it[Ne];return fe?s.jsx("td",{className:F("py-[12.8px] px-[6.4px] md:px-[12.8px] align-top",Ne==="actions"&&"text-center",["description","audit","dueDate","riskLevel","monetaryImpact","responsible","cLevel","actions"].includes(Ne)&&"hidden md:table-cell"),style:{width:h?void 0:ye[Ne]},children:fe.render(te)},Ne):null})},te.key))})]}),s.jsx("div",{className:"block md:hidden space-y-2 mt-2",children:Oe.map(te=>{const Ne=d0(te.status),fe=m===te.key;return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden transition-all duration-200",children:[s.jsxs("div",{onClick:()=>x(fe?null:te.key),className:"p-3 cursor-pointer active:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded font-mono",children:te.key}),s.jsx(tt,{variant:Ne,size:"sm",className:"text-[10px] px-1.5 py-0.5 h-5",children:te.displayStatus})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:pe=>{pe.stopPropagation(),c(te),f(!0)},className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),s.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${fe?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),s.jsx("h4",{className:`text-xs font-medium text-gray-900 leading-snug mb-2 ${fe?"":"line-clamp-2"}`,children:te.summary}),s.jsxs("div",{className:"flex items-center justify-between text-[10px] text-gray-500 border-t border-gray-50 pt-2 mt-1",children:[s.jsxs("div",{className:"flex items-center gap-1 max-w-[60%]",children:[s.jsx("svg",{className:"w-3 h-3 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{className:"truncate",children:te.auditName||"-"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{children:te.dueDate?cs(te.dueDate):"-"})]})]})]}),fe&&s.jsxs("div",{className:"px-3 pb-3 pt-0 bg-gray-50/50 border-t border-gray-100",children:[te.description&&s.jsx("div",{className:"mt-2 mb-3",children:s.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:te.description})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-semibold uppercase",children:"Risk Level"}),s.jsx("div",{children:s.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium ${te.riskLevel==="Critical"?"bg-red-100 text-red-700":te.riskLevel==="High"?"bg-orange-100 text-orange-700":te.riskLevel==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:te.riskLevel||"Unassigned"})})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-semibold uppercase",children:"Responsible"}),s.jsx("span",{className:"text-gray-700 truncate",children:te.responsibleEmail||"-"})]})]})]})]},te.key)})})]}),ft&&ft.length>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsx(ay,{currentPage:n,totalItems:ft.length,itemsPerPage:i,onPageChange:r,onItemsPerPageChange:a})})]})]}):s.jsx(Ie,{variant:"elevated",className:"mt-6 overflow-hidden",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 via-violet-50 to-purple-100 opacity-50"}),s.jsx("div",{className:"relative text-center py-8 md:py-10 px-6",children:s.jsxs("div",{className:"max-w-lg mx-auto",children:[s.jsx("div",{className:"mb-4 flex justify-center",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-purple-200 rounded-full blur-xl opacity-30 animate-pulse"}),s.jsx("div",{className:"relative w-16 h-16 md:w-20 md:h-20 rounded-2xl bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform duration-300",children:s.jsx("svg",{className:"w-8 h-8 md:w-10 md:h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})})]})}),s.jsx("h3",{className:"text-lg md:text-xl font-bold mb-3 bg-gradient-to-r from-purple-600 to-violet-600 bg-clip-text text-transparent",children:"No Action Responsible Assignments"}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsx("p",{className:"text-sm md:text-base text-gray-700 leading-relaxed font-medium",children:"You currently don't have any audit finding actions assigned to you as Action Responsible."}),s.jsx("p",{className:"text-xs md:text-sm text-gray-600 leading-relaxed",children:"As ongoing audits are completed and findings are identified, any actions assigned to you will appear here. You'll be able to view their details, track progress, and manage them from this dashboard."})]}),s.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-400 opacity-60"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-violet-400 opacity-60"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-400 opacity-60"})]})]})})]})}),u&&o&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:s.jsxs("div",{className:"bg-white rounded-2xl md:rounded-2xl rounded-t-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] md:max-h-[85vh] overflow-y-auto",onClick:te=>te.stopPropagation(),children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 px-[12.8px] py-[9.6px] md:px-[19.2px] md:py-[12.8px] rounded-t-2xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg md:text-2xl font-bold text-white",children:"Finding Action Details"}),s.jsx("p",{className:"text-purple-100 text-[9.6px] md:text-xs mt-0.5 md:mt-1",children:o.key})]}),s.jsx("button",{onClick:()=>f(!1),className:"text-white hover:text-purple-200 transition-colors p-2",children:s.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"p-3 md:p-6 space-y-3 md:space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-[9.6px] md:gap-[19.2px]",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Audit Name"}),s.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-xs md:text-sm",children:o.auditName||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Status"}),s.jsx("div",{className:"mt-0.5 md:mt-1",children:s.jsx(tt,{variant:d0(o.status),size:"sm",className:"text-[10px] md:text-xs",children:o.status==="COMPLETED"?"Completed":o.status==="RISK ACCEPTED"?"Risk Accepted":o.status})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Risk Level"}),s.jsx("div",{className:"mt-0.5 md:mt-1",children:s.jsx(tt,{size:"sm",className:"text-[10px] md:text-xs",variant:o.riskLevel==="Critical"?"danger":o.riskLevel==="High"?"warning":o.riskLevel==="Medium"?"info":"default",children:o.riskLevel||"Unassigned"})})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Due Date"}),s.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-xs md:text-sm",children:o.dueDate?cs(o.dueDate,"PPP"):"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Financial Impact"}),s.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-xs md:text-sm",children:Hr(o.monetaryImpact||0)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Responsible"}),s.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base truncate",children:o.responsibleEmail||"-"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"C-Level"}),s.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base truncate",children:o.cLevel||"-"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Summary"}),s.jsx("p",{className:"text-gray-900 mt-1 md:mt-2 p-[9.6px] md:p-[12.8px] bg-gray-50 rounded-lg text-xs md:text-sm",children:o.summary})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Description"}),s.jsx("p",{className:"text-gray-700 mt-1 md:mt-2 p-[9.6px] md:p-[12.8px] bg-gray-50 rounded-lg whitespace-pre-wrap text-xs md:text-sm",children:o.description||"No description available"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Finding Description"}),s.jsx("p",{className:"text-gray-700 mt-1 md:mt-2 p-[9.6px] md:p-[12.8px] bg-purple-50 rounded-lg whitespace-pre-wrap border border-purple-200 text-xs md:text-sm",children:o.parentDescription||"No description available"})]}),s.jsx("div",{className:"hidden md:flex justify-end items-center pt-3 md:pt-4 border-t",children:s.jsx(ze,{variant:"outline",onClick:()=>f(!1),children:"Close"})})]})]})})]})},P7=()=>{const[t,e]=L.useState("2024+"),[n,r]=L.useState(1),[i,a]=L.useState(25),[o,c]=L.useState(null),[u,f]=L.useState(!1),[h,p]=L.useState(window.innerWidth<768),[m,x]=L.useState(null),[v,b]=L.useState(null),[y,w]=L.useState("asc"),[k,N]=L.useState("all"),[j,S]=L.useState("all"),[A,O]=L.useState("all"),[M,z]=L.useState(""),[I,D]=L.useState(null);L.useEffect(()=>{const fe=()=>p(window.innerWidth<768);return window.addEventListener("resize",fe),()=>window.removeEventListener("resize",fe)},[]);const{role:T,isImpersonating:q,originalUser:H,startImpersonation:G}=Vr(),{isExporting:ee,exportFindingActions:X}=Ch(),J=L.useRef(null),[K,W]=L.useState(()=>{const fe=localStorage.getItem("clevel-actions-column-order");return fe?JSON.parse(fe):["key","summary","description","status","audit","dueDate","riskLevel","responsible","actions"]}),[R,U]=L.useState(null),[B,Q]=L.useState(null),{data:Z=[],isLoading:$}=dA({auditYear:t==="all"?void 0:t});L.useEffect(()=>{const fe=pe=>{pe.key==="Escape"&&u&&f(!1)};if(u)return document.addEventListener("keydown",fe),()=>document.removeEventListener("keydown",fe)},[u]);const ne=()=>{N("all"),S("all"),O("all"),z(""),b(null),w("asc")},ae=async fe=>{try{console.log("Starting impersonation for:",fe),await G(fe),console.log("Impersonation successful, reloading page..."),window.location.reload()}catch(pe){console.error("Impersonation failed:",pe)}},ce=fe=>{U(fe)},ye=(fe,pe)=>{fe.preventDefault(),Q(pe)},Be=fe=>{if(!R||R===fe){U(null),Q(null);return}const pe=[...K],Le=pe.indexOf(R),Qe=pe.indexOf(fe);pe.splice(Le,1),pe.splice(Qe,0,R),W(pe),localStorage.setItem("clevel-actions-column-order",JSON.stringify(pe)),U(null),Q(null)},Ue=()=>{U(null),Q(null)},it={key:120,summary:250,description:280,status:120,audit:200,dueDate:120,riskLevel:100,responsible:180,actions:120},{columnWidths:je,resizing:dt,handleMouseDown:st}=uc(J,it,"clevel-actions-columns"),ft=L.useMemo(()=>{if(!Z||!Array.isArray(Z))return{total:0,open:0,overdue:0,completed:0,financialImpact:0,completionRate:"0.0",overdueRate:"0.0",moneyOpen:0,moneyOverdue:0};const fe=Z.filter(_t=>_t.status==="Open"),pe=Z.filter(_t=>_t.status==="Overdue"),Le=new Set(fe.map(_t=>_t.parentKey).filter(Boolean)),Qe=new Set(pe.map(_t=>_t.parentKey).filter(Boolean)),qe=Array.from(Le).reduce((_t,Pe)=>{const Lt=fe.find(Pt=>Pt.parentKey===Pe);return _t+((Lt==null?void 0:Lt.monetaryImpact)||0)},0),et=Array.from(Qe).reduce((_t,Pe)=>{const Lt=pe.find(Pt=>Pt.parentKey===Pe);return _t+((Lt==null?void 0:Lt.monetaryImpact)||0)},0);return{total:Z.length,open:fe.length,overdue:pe.length,completed:Z.filter(_t=>_t.status==="COMPLETED"||_t.status==="Completed").length,financialImpact:qe+et,moneyOpen:qe,moneyOverdue:et,completionRate:Z.length>0?(Z.filter(_t=>_t.status==="COMPLETED"||_t.status==="Completed").length/Z.length*100).toFixed(1):"0.0",overdueRate:Z.length>0?(Z.filter(_t=>_t.status==="Overdue").length/Z.length*100).toFixed(1):"0.0"}},[Z]),Oe=L.useMemo(()=>{if(!Z||!Array.isArray(Z))return{labels:[],datasets:[]};const fe={};Z.forEach(Pe=>{fe[Pe.status]=(fe[Pe.status]||0)+1});const pe={COMPLETED:"Completed",Completed:"Completed","RISK ACCEPTED":"Risk Accepted","Risk Accepted":"Risk Accepted",Open:"Open",Overdue:"Overdue","In Progress":"In Progress"},Le={Open:Wn.Open,Overdue:Wn.Overdue,Completed:Wn.Completed,"Risk Accepted":Wn["Risk Accepted"],"In Progress":Wn["In Progress"]},Qe={};Object.entries(fe).forEach(([Pe,Lt])=>{const Pt=pe[Pe]||Pe;Qe[Pt]=(Qe[Pt]||0)+Lt});const qe=Object.keys(Qe),et=qe.map(Pe=>Qe[Pe]||0),_t=qe.map(Pe=>Le[Pe]||"rgba(156, 163, 175, 0.8)");return{labels:qe,datasets:[{data:et,backgroundColor:_t,borderColor:"#fff",borderWidth:2}]}},[Z]),re=L.useMemo(()=>{let fe=[...Z];if(k!=="all"&&(fe=fe.filter(pe=>pe.status===k)),j!=="all"&&(fe=fe.filter(pe=>pe.auditName===j)),A!=="all"&&(fe=fe.filter(pe=>pe.riskLevel===A)),M.trim()){const pe=M.toLowerCase();fe=fe.filter(Le=>Le.key.toLowerCase().includes(pe)||Le.summary.toLowerCase().includes(pe)||Le.auditName&&Le.auditName.toLowerCase().includes(pe)||Le.description&&Le.description.toLowerCase().includes(pe))}return v&&fe.sort((pe,Le)=>{const Qe=pe[v],qe=Le[v],et=Qe<qe?-1:Qe>qe?1:0;return y==="asc"?et:-et}),fe},[Z,v,y,k,j,A,M]),xe=L.useMemo(()=>[...new Set(Z.map(pe=>pe.status))].filter(Boolean).map(pe=>pe==="COMPLETED"?"Completed":pe==="RISK ACCEPTED"?"Risk Accepted":pe).sort(),[Z]),we=L.useMemo(()=>[...new Set(Z.map(pe=>pe.auditName))].filter(Boolean).sort(),[Z]),Se=L.useMemo(()=>[...new Set(Z.map(pe=>pe.riskLevel))].filter(Boolean).sort(),[Z]),_e=L.useMemo(()=>{const fe=(n-1)*i,pe=fe+i;return re.slice(fe,pe)},[re,n,i]),te=fe=>{v===fe?w(y==="asc"?"desc":"asc"):(b(fe),w("asc"))},Ne=fe=>fe==="COMPLETED"||fe==="Completed"?"success":fe==="Overdue"?"danger":fe==="Open"?"warning":fe==="RISK ACCEPTED"||fe==="Risk Accepted"?"info":"default";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-[12.8px] md:gap-0",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-[13px] md:text-[22px] font-bold text-gray-900",children:"C-Level Actions"}),s.jsx("p",{className:"text-[9.6px] md:text-xs text-gray-600 mt-1",children:"Executive-level audit finding actions overview"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-[6.4px] md:gap-[12.8px] w-full md:w-auto justify-end md:justify-start",children:[(T==="admin"||q&&(H==null?void 0:H.role)==="admin")&&s.jsx(Yh,{onSelectUser:ae,filterByRole:"top_management",className:"text-xs md:text-sm"}),s.jsxs("div",{className:"inline-flex rounded-lg border border-gray-300 bg-white p-0.5 md:p-1 shadow-sm",children:[s.jsxs("button",{onClick:()=>e("2024+"),className:`flex items-center gap-[3.2px] md:gap-[6.4px] px-[4.8px] py-[3.2px] md:px-[12.8px] md:py-[6.4px] text-[8px] md:text-xs font-medium rounded-md transition-all ${t==="2024+"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[s.jsxs("svg",{className:"w-3 h-3 md:w-5 md:h-5",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",fill:t==="2024+"?"white":"#E5E7EB"}),s.jsx("rect",{x:"3",y:"4",width:"18",height:"6",rx:"2",fill:t==="2024+"?"#DC2626":"#991B1B"}),s.jsx("text",{x:"12",y:"8",textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"bold",children:"JUL"}),s.jsx("text",{x:"12",y:"16",textAnchor:"middle",fill:t==="2024+"?"#6B7280":"#1F2937",fontSize:"8",fontWeight:"bold",children:"17"})]}),!h&&s.jsx("span",{children:"As of 2024"}),h&&s.jsx("span",{children:"As of 2024"})]}),s.jsxs("button",{onClick:()=>e("all"),className:`flex items-center gap-[3.2px] md:gap-[6.4px] px-[4.8px] py-[3.2px] md:px-[12.8px] md:py-[6.4px] text-[8px] md:text-xs font-medium rounded-md transition-all ${t==="all"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[s.jsxs("svg",{className:"w-3 h-3 md:w-5 md:h-5",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("rect",{x:"4",y:"14",width:"3",height:"6",fill:"#10B981",rx:"0.5"}),s.jsx("rect",{x:"10",y:"8",width:"3",height:"12",fill:"#EF4444",rx:"0.5"}),s.jsx("rect",{x:"16",y:"11",width:"3",height:"9",fill:"#3B82F6",rx:"0.5"}),s.jsx("line",{x1:"3",y1:"7",x2:"21",y2:"7",stroke:t==="all"?"white":"#9CA3AF",strokeWidth:"1.5"})]}),!h&&s.jsx("span",{children:"All Results"}),h&&s.jsx("span",{children:"All"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-4 lg:grid-cols-8 gap-1.5 md:gap-2",children:[s.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-purple-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[s.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-purple-100 text-purple-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),s.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[s.jsx("svg",{className:F("text-purple-600 mb-0.5 md:mb-1.5",h?"w-3 h-3":"w-4 md:h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),s.jsx("p",{className:F("font-bold text-purple-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:ft.total}),s.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Total"})]})]}),s.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-amber-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[s.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-amber-100 text-amber-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),s.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[s.jsx("svg",{className:F("text-amber-600 mb-0.5 md:mb-1.5",h?"w-3 h-3":"w-4 md:h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:F("font-bold text-amber-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:ft.open}),s.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Open"})]})]}),s.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-red-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[s.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-red-100 text-red-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),s.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[s.jsx("svg",{className:F("text-red-600 mb-0.5 md:mb-1.5",h?"w-3 h-3":"w-4 md:h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("p",{className:F("font-bold text-red-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:ft.overdue}),s.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Overdue"})]})]}),s.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-green-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[s.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-green-100 text-green-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),s.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[s.jsx("svg",{className:F("text-green-600 mb-0.5 md:mb-1.5",h?"w-3 h-3":"w-4 md:h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:F("font-bold text-green-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:ft.completed}),s.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Done"})]})]}),s.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-blue-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[s.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-blue-100 text-blue-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),s.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[s.jsxs("p",{className:F("font-bold text-blue-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:[ft.completionRate,"%"]}),s.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Completion Rate"})]})]}),s.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 hover:shadow-lg transition-all flex flex-col",t==="2024+"?"border-t-orange-600":"border-t-gray-400",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[s.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-orange-100 text-orange-700 rounded-full",h&&"top-0.5 right-0.5"),children:t==="2024+"?"2024+":"All"}),s.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[s.jsxs("p",{className:F("font-bold text-orange-600 text-center leading-tight",h?"text-xs":"text-[17px] md:text-[24px]"),children:[ft.overdueRate,"%"]}),s.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Overdue Rate"})]})]}),s.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 border-t-amber-600 hover:shadow-lg transition-all flex flex-col",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[s.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-amber-100 text-amber-700 rounded-full",h&&"top-0.5 right-0.5"),children:"2024+"}),s.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[s.jsx("p",{className:F("font-bold text-amber-600 text-center leading-tight whitespace-nowrap",h?"text-xs":"text-lg md:text-xl"),children:Hr(ft.moneyOpen)}),s.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Open"})]})]}),s.jsxs(Ie,{variant:"elevated",className:F("relative border-t-4 border-t-rose-600 hover:shadow-lg transition-all flex flex-col",h?"min-h-[72.2px]":"min-h-[90.25px] md:min-h-[108.3px]"),children:[s.jsx("span",{className:F("absolute top-1 right-1 text-[7.22px] md:text-[9.025px] px-[3.61px] md:px-[5.415px] py-[1.805px] bg-rose-100 text-rose-700 rounded-full",h&&"top-0.5 right-0.5"),children:"2024+"}),s.jsxs("div",{className:F("flex flex-col items-center justify-center flex-1",h?"py-[6.4px] px-[3.2px]":"py-[9.6px] md:py-[12.8px] px-[6.4px]"),children:[s.jsx("p",{className:F("font-bold text-rose-600 text-center leading-tight whitespace-nowrap",h?"text-xs":"text-lg md:text-xl"),children:Hr(ft.moneyOverdue)}),s.jsx("p",{className:F("text-gray-600 text-center mt-0.5",h?"text-[9px]":"text-[10px] md:text-xs"),children:"Overdue"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(Dy,{title:"C-Level Actions Status Distribution",subtitle:"Current status breakdown",data:Oe,height:h?280:330,loading:$,options:{plugins:{legend:{display:!0,position:"bottom",labels:{padding:h?8:14,usePointStyle:!0,font:{size:h?9:11},generateLabels:fe=>{const pe=fe.data;if(pe.labels&&pe.datasets&&pe.datasets.length>0){const Le=pe.datasets[0];if(!Le)return[];const Qe=Le.backgroundColor;return pe.labels.map((qe,et)=>{const _t=Array.isArray(Le.data)?Le.data[et]:0,Pe=Array.isArray(Qe)?Qe[et]:Qe;return{text:h?`${qe}: ${_t}`:`${qe}: ${_t}`,fillStyle:typeof Pe=="string"?Pe:"rgba(156, 163, 175, 0.8)",hidden:!1,index:et}})}return[]}}},datalabels:{display:!1},tooltip:{callbacks:{label:fe=>{const pe=fe.label||"",Le=fe.parsed||0,qe=fe.dataset.data.reduce((_t,Pe)=>_t+Pe,0),et=(Le/qe*100).toFixed(1);return`${pe}: ${Le} (${et}%)`}}}}}}),s.jsxs(Ie,{className:F("",!h&&"flex flex-col"),children:[s.jsx(Nt,{title:"Actions by Responsible and Status",subtitle:"Distribution by action responsible",className:"flex-shrink-0"}),s.jsx("div",{className:F("p-2.5 md:p-5 flex-1",!h&&"overflow-y-auto min-h-0"),children:$?s.jsx(Ct,{size:"lg"}):s.jsxs("div",{className:F("space-y-1.5",h&&"space-y-1.5"),children:[(()=>{const fe={};return Z.forEach(Le=>{const Qe=Le.responsibleEmail||"Unassigned",qe=Le.status==="COMPLETED"?"Completed":Le.status==="RISK ACCEPTED"?"Risk Accepted":Le.status;fe[Qe]||(fe[Qe]={}),fe[Qe][qe]=(fe[Qe][qe]||0)+1}),Object.entries(fe).sort((Le,Qe)=>{const qe=Object.values(Le[1]).reduce((_t,Pe)=>_t+Pe,0);return Object.values(Qe[1]).reduce((_t,Pe)=>_t+Pe,0)-qe}).slice(0,6).map(([Le,Qe])=>{const qe=Object.values(Qe).reduce((Pt,dr)=>Pt+dr,0),et=Qe.Completed||0,_t=Qe.Open||0,Pe=Qe.Overdue||0,Lt=Qe["Risk Accepted"]||0;return s.jsxs("div",{className:F("space-y-0.5 md:space-y-0.5 relative"),children:[s.jsxs("div",{className:F("flex items-center justify-between",h?"text-[10px]":"text-[11px]"),children:[s.jsx("span",{className:F("text-gray-700 font-medium truncate",h?"max-w-[140px]":"max-w-[200px]"),title:Le,children:Le}),s.jsxs("span",{className:F("text-gray-500",h?"text-[9px]":""),children:[qe," actions"]})]}),s.jsxs("div",{className:F("flex rounded-full overflow-visible bg-gray-100 relative",h?"h-3.5":"h-[22px]"),children:[et>0&&s.jsxs("div",{className:F("bg-green-500 flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-90 transition-opacity relative group",h?"text-[8px]":"text-xs"),style:{width:`${et/qe*100}%`},onMouseEnter:()=>D({responsible:Le,status:"Completed",percentage:(et/qe*100).toFixed(1)}),onMouseLeave:()=>D(null),children:[et>0&&et/qe*100>8&&s.jsx("span",{className:F("px-0.5",h&&"text-[7px]"),children:et}),(I==null?void 0:I.responsible)===Le&&(I==null?void 0:I.status)==="Completed"&&s.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-3 py-1.5 rounded-lg text-xs whitespace-nowrap z-50 shadow-lg",children:["Completed: ",et," (",I.percentage,"%)",s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"})]})]}),_t>0&&s.jsxs("div",{className:F("bg-blue-500 flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-90 transition-opacity relative group",h?"text-[8px]":"text-xs"),style:{width:`${_t/qe*100}%`},onMouseEnter:()=>D({responsible:Le,status:"Open",percentage:(_t/qe*100).toFixed(1)}),onMouseLeave:()=>D(null),children:[_t>0&&_t/qe*100>8&&s.jsx("span",{className:F("px-0.5",h&&"text-[7px]"),children:_t}),(I==null?void 0:I.responsible)===Le&&(I==null?void 0:I.status)==="Open"&&s.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-3 py-1.5 rounded-lg text-xs whitespace-nowrap z-50 shadow-lg",children:["Open: ",_t," (",I.percentage,"%)",s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"})]})]}),Pe>0&&s.jsxs("div",{className:F("bg-red-500 flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-90 transition-opacity relative group",h?"text-[8px]":"text-xs"),style:{width:`${Pe/qe*100}%`},onMouseEnter:()=>D({responsible:Le,status:"Overdue",percentage:(Pe/qe*100).toFixed(1)}),onMouseLeave:()=>D(null),children:[Pe>0&&Pe/qe*100>8&&s.jsx("span",{className:F("px-0.5",h&&"text-[7px]"),children:Pe}),(I==null?void 0:I.responsible)===Le&&(I==null?void 0:I.status)==="Overdue"&&s.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-3 py-1.5 rounded-lg text-xs whitespace-nowrap z-50 shadow-lg",children:["Overdue: ",Pe," (",I.percentage,"%)",s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"})]})]}),Lt>0&&s.jsxs("div",{className:F("bg-purple-500 flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-90 transition-opacity relative group",h?"text-[8px]":"text-xs"),style:{width:`${Lt/qe*100}%`},onMouseEnter:()=>D({responsible:Le,status:"Risk Accepted",percentage:(Lt/qe*100).toFixed(1)}),onMouseLeave:()=>D(null),children:[Lt>0&&Lt/qe*100>8&&s.jsx("span",{className:F("px-0.5",h&&"text-[7px]"),children:Lt}),(I==null?void 0:I.responsible)===Le&&(I==null?void 0:I.status)==="Risk Accepted"&&s.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-3 py-1.5 rounded-lg text-xs whitespace-nowrap z-50 shadow-lg",children:["Risk Accepted: ",Lt," (",I.percentage,"%)",s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"})]})]})]})]},Le)})})(),s.jsxs("div",{className:F("flex flex-wrap gap-2 md:gap-3 mt-3 md:mt-4 pt-3 md:pt-4 border-t border-gray-200 justify-center",h&&"gap-1.5"),children:[s.jsxs("div",{className:F("flex items-center gap-1",h&&"gap-0.5"),children:[s.jsx("div",{className:F("bg-green-500 rounded",h?"w-2 h-2":"w-3 h-3")}),s.jsx("span",{className:F("text-gray-600",h?"text-[9px]":"text-xs"),children:"Completed"})]}),s.jsxs("div",{className:F("flex items-center gap-1",h&&"gap-0.5"),children:[s.jsx("div",{className:F("bg-blue-500 rounded",h?"w-2 h-2":"w-3 h-3")}),s.jsx("span",{className:F("text-gray-600",h?"text-[9px]":"text-xs"),children:"Open"})]}),s.jsxs("div",{className:F("flex items-center gap-1",h&&"gap-0.5"),children:[s.jsx("div",{className:F("bg-red-500 rounded",h?"w-2 h-2":"w-3 h-3")}),s.jsx("span",{className:F("text-gray-600",h?"text-[9px]":"text-xs"),children:"Overdue"})]}),s.jsxs("div",{className:F("flex items-center gap-1",h&&"gap-0.5"),children:[s.jsx("div",{className:F("bg-purple-500 rounded",h?"w-2 h-2":"w-3 h-3")}),s.jsx("span",{className:F("text-gray-600",h?"text-[9px]":"text-xs"),children:"Risk Accepted"})]})]})]})})]})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"C-Level Finding Actions",subtitle:`${re.length} actions found${re.length!==((Z==null?void 0:Z.length)||0)?` (filtered from ${(Z==null?void 0:Z.length)||0} total)`:""}`,action:s.jsxs(ze,{variant:"primary",size:"sm",onClick:()=>X({auditYear:t,role:"clevel"}),isLoading:ee,className:"text-xs md:text-sm px-2 md:px-4",children:[s.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),s.jsx("span",{className:"hidden md:inline",children:"Export to Excel"}),s.jsx("span",{className:"md:hidden",children:"Export"})]})}),$?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx(Ct,{size:"xl",text:"Loading C-Level actions..."})}):!Z||!Array.isArray(Z)?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No actions found"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No C-Level actions available for the selected filters."})]}):s.jsxs("div",{className:"overflow-x-auto mt-4",children:[s.jsxs("div",{className:"mb-4 space-y-3",children:[s.jsxs("div",{className:"relative max-w-md",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",placeholder:"Search by key, summary, audit, or description...",value:M,onChange:fe=>z(fe.target.value),className:"w-full pl-10 pr-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all"}),M&&s.jsx("button",{onClick:()=>z(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(k!=="all"||j!=="all"||A!=="all"||M)&&s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Active filters:"}),k!=="all"&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:["Status: ",k,s.jsx("button",{onClick:()=>N("all"),className:"hover:bg-blue-200 rounded-full p-0.5",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),j!=="all"&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:["Audit: ",j.length>20?j.substring(0,20)+"...":j,s.jsx("button",{onClick:()=>S("all"),className:"hover:bg-green-200 rounded-full p-0.5",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),A!=="all"&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:["Risk: ",A,s.jsx("button",{onClick:()=>O("all"),className:"hover:bg-amber-200 rounded-full p-0.5",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),M&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:['Search: "',M.length>15?M.substring(0,15)+"...":M,'"',s.jsx("button",{onClick:()=>z(""),className:"hover:bg-purple-200 rounded-full p-0.5",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("button",{onClick:ne,className:"text-xs text-gray-500 hover:text-gray-700 underline",children:"Clear all"})]})]}),s.jsxs("div",{className:F("mb-3 md:mb-4 flex flex-col md:flex-row md:flex-wrap md:items-center gap-2 md:gap-3 md:justify-between",h&&"px-2"),children:[s.jsxs("div",{className:F("grid gap-2 md:flex md:flex-wrap md:items-center flex-1",h?"grid-cols-1":""),children:[s.jsxs("div",{className:F("flex items-center",h?"gap-1":"gap-1.5"),children:[s.jsx("label",{className:F("font-medium text-gray-600 whitespace-nowrap",h?"text-[10px]":"text-xs"),children:"Audit:"}),s.jsxs("select",{value:j,onChange:fe=>S(fe.target.value),className:F("flex-1 md:flex-none bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer md:max-w-xs",h?"px-2 py-1 text-[10px]":"px-3 py-1.5 text-xs"),style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.3rem center",backgroundRepeat:"no-repeat",backgroundSize:h?"0.9em 0.9em":"1.2em 1.2em",paddingRight:h?"1.5rem":"2rem"},children:[s.jsx("option",{value:"all",children:"All Audits"}),we.map(fe=>s.jsx("option",{value:fe,children:fe},fe))]})]}),s.jsxs("div",{className:F("grid gap-2 md:flex",h?"grid-cols-2":""),children:[s.jsxs("div",{className:F("flex items-center",h?"gap-1":"gap-1.5"),children:[s.jsx("label",{className:F("font-medium text-gray-600 whitespace-nowrap",h?"text-[10px]":"text-xs"),children:"Status:"}),s.jsxs("select",{value:k,onChange:fe=>N(fe.target.value),className:F("flex-1 md:flex-none bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",h?"px-2 py-1 text-[10px]":"px-3 py-1.5 text-xs"),style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.3rem center",backgroundRepeat:"no-repeat",backgroundSize:h?"0.9em 0.9em":"1.2em 1.2em",paddingRight:h?"1.5rem":"2rem"},children:[s.jsx("option",{value:"all",children:"All Statuses"}),xe.map(fe=>s.jsx("option",{value:fe,children:fe},fe))]})]}),s.jsxs("div",{className:F("flex items-center",h?"gap-1":"gap-1.5"),children:[s.jsx("label",{className:F("font-medium text-gray-600 whitespace-nowrap",h?"text-[10px]":"text-xs"),children:"Risk:"}),s.jsxs("select",{value:A,onChange:fe=>O(fe.target.value),className:F("flex-1 md:flex-none bg-gradient-to-br from-white to-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all shadow-sm hover:shadow-md hover:border-purple-400 appearance-none cursor-pointer",h?"px-2 py-1 text-[10px]":"px-3 py-1.5 text-xs"),style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.3rem center",backgroundRepeat:"no-repeat",backgroundSize:h?"0.9em 0.9em":"1.2em 1.2em",paddingRight:h?"1.5rem":"2rem"},children:[s.jsx("option",{value:"all",children:"All Levels"}),Se.map(fe=>s.jsx("option",{value:fe,children:fe},fe))]})]})]})]}),s.jsx("div",{className:F("flex gap-2",h&&"justify-end"),children:s.jsxs(ze,{variant:"outline",size:"sm",onClick:ne,className:F("border-purple-300 text-purple-700 hover:bg-purple-50",h?"px-2 py-1 text-[10px]":"text-xs md:text-sm px-2 md:px-4"),children:[s.jsx("svg",{className:F("md:mr-1",h?"w-3 h-3":"w-3 h-3 md:w-4 md:h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),!h&&s.jsx("span",{children:"Reset"})]})})]}),s.jsxs("table",{ref:J,className:"w-full hidden md:table table-fixed",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-gray-200",children:K.map(fe=>{const pe={key:{label:"Key",sortable:!0,sortKey:"key"},summary:{label:"Summary",sortable:!1},description:{label:"Description",sortable:!1},status:{label:"Status",sortable:!0,sortKey:"status"},audit:{label:"Audit",sortable:!0,sortKey:"auditName"},dueDate:{label:"Due Date",sortable:!0,sortKey:"dueDate"},riskLevel:{label:"Risk Level",sortable:!0,sortKey:"riskLevel"},responsible:{label:"Responsible",sortable:!1},actions:{label:"Action Detail",sortable:!1}}[fe];return s.jsx(bs,{columnKey:fe,width:je[fe],onResizeStart:st,isResizing:dt===fe,className:F("text-left py-3 px-4 text-sm font-semibold text-gray-700",(pe==null?void 0:pe.sortable)&&"cursor-pointer hover:bg-purple-50 transition-colors select-none",fe==="actions"&&"text-center"),onClick:pe!=null&&pe.sortable&&(pe!=null&&pe.sortKey)?()=>te(pe.sortKey):void 0,onDragStart:ce,onDragOver:ye,onDrop:Be,onDragEnd:Ue,isDragging:R===fe,isDragOver:B===fe,children:pe!=null&&pe.sortable&&(pe!=null&&pe.sortKey)?s.jsxs("div",{className:"flex items-center gap-2",children:[pe==null?void 0:pe.label,s.jsx("span",{className:v===pe.sortKey?"text-purple-600":"text-gray-400",children:v===pe.sortKey?y==="asc"?"":"":""})]}):pe==null?void 0:pe.label},fe)})})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:_e.map(fe=>s.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:K.map(pe=>s.jsxs("td",{className:"px-4 py-3 text-sm",style:{width:je[pe]},children:[pe==="key"&&s.jsx("span",{className:"text-purple-600 font-mono font-semibold",children:fe.key}),pe==="summary"&&s.jsx("span",{className:"text-gray-900 font-medium",children:fe.summary}),pe==="description"&&s.jsx("span",{className:"text-gray-600 text-sm",children:fe.description||"-"}),pe==="status"&&s.jsx(tt,{variant:Ne(fe.status),children:fe.status==="COMPLETED"?"Completed":fe.status==="RISK ACCEPTED"?"Risk Accepted":fe.status}),pe==="audit"&&s.jsx("span",{className:"text-gray-600 text-sm",children:fe.auditName||"-"}),pe==="dueDate"&&s.jsx("span",{className:"text-gray-600 text-sm",children:fe.dueDate?cs(fe.dueDate,"PP"):"-"}),pe==="riskLevel"&&s.jsx(tt,{variant:fe.riskLevel==="Critical"?"danger":fe.riskLevel==="High"?"warning":fe.riskLevel==="Medium"?"info":"default",children:fe.riskLevel||"Unassigned"}),pe==="responsible"&&s.jsx("span",{className:"text-gray-600 text-sm",children:fe.responsibleEmail||"-"}),pe==="actions"&&s.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>{c(fe),f(!0)},children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]},pe))},fe.key))})]}),s.jsx("div",{className:"block md:hidden space-y-2 mt-2",children:_e.map(fe=>{const pe=m===fe.key;return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden transition-all duration-200",children:[s.jsxs("div",{onClick:()=>x(pe?null:fe.key),className:"p-3 cursor-pointer active:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded font-mono",children:fe.key}),s.jsx(tt,{variant:Ne(fe.status),size:"sm",className:"text-[10px] px-1.5 py-0.5 h-5",children:fe.status==="COMPLETED"?"Completed":fe.status==="RISK ACCEPTED"?"Risk Accepted":fe.status})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:Le=>{Le.stopPropagation(),c(fe),f(!0)},className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),s.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${pe?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),s.jsx("h4",{className:`text-xs font-medium text-gray-900 leading-snug mb-2 ${pe?"":"line-clamp-2"}`,children:fe.summary}),s.jsxs("div",{className:"flex items-center justify-between text-[10px] text-gray-500 border-t border-gray-50 pt-2 mt-1",children:[s.jsxs("div",{className:"flex items-center gap-1 max-w-[60%]",children:[s.jsx("svg",{className:"w-3 h-3 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{className:"truncate",children:fe.auditName||"-"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{children:fe.dueDate?cs(fe.dueDate):"-"})]})]})]}),pe&&s.jsxs("div",{className:"px-3 pb-3 pt-0 bg-gray-50/50 border-t border-gray-100",children:[fe.description&&s.jsx("div",{className:"mt-2 mb-3",children:s.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:fe.description})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-semibold uppercase",children:"Risk Level"}),s.jsx("div",{children:s.jsx(tt,{variant:fe.riskLevel==="Critical"?"danger":fe.riskLevel==="High"?"warning":fe.riskLevel==="Medium"?"info":"default",size:"sm",className:"text-[10px] px-1.5 py-0.5",children:fe.riskLevel||"Unassigned"})})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-semibold uppercase",children:"Responsible"}),s.jsx("span",{className:"text-gray-700 truncate",children:fe.responsibleEmail||"-"})]})]})]})]},fe.key)})})]}),re.length>0&&s.jsx("div",{className:F("mt-3 md:mt-4 pt-3 md:pt-4 border-t border-gray-200",h&&"px-2"),children:s.jsxs("div",{className:F("flex flex-col md:flex-row items-stretch md:items-center gap-3 md:gap-4",h&&"gap-2"),children:[s.jsxs("div",{className:F("flex items-center gap-1.5 md:gap-2",h&&"justify-center"),children:[s.jsx("span",{className:F("text-gray-600",h?"text-[10px]":"text-sm"),children:"Show:"}),s.jsx("select",{value:i,onChange:fe=>{a(parseInt(fe.target.value,10)),r(1)},className:F("border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",h?"px-2 py-1 text-[10px]":"px-3 py-1.5 text-sm"),children:[10,25,50,100].map(fe=>s.jsx("option",{value:fe,children:fe},fe))}),s.jsx("span",{className:F("text-gray-600",h?"text-[10px]":"text-sm"),children:"per page"})]}),s.jsx("div",{className:F("flex-1 text-center",h&&"text-[10px]"),children:s.jsxs("span",{className:F("font-medium text-gray-700",h?"text-[10px]":"text-sm"),children:["Showing ",re.length===0?0:(n-1)*i+1," to ",Math.min(n*i,re.length)," of ",re.length," items"]})}),s.jsxs("div",{className:F("flex items-center gap-1.5 md:gap-2",h&&"justify-center"),children:[s.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>r(Math.max(1,n-1)),disabled:n===1,className:F(h?"px-2 py-1 text-[10px] min-w-[60px]":"min-w-[80px]"),children:[s.jsx("svg",{className:F("mr-1",h?"w-3 h-3":"w-4 h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),!h&&"Previous",h&&"Prev"]}),s.jsxs("span",{className:F("text-gray-600 px-1 md:px-2",h?"text-[10px]":"text-sm"),children:["Page ",n," of ",Math.ceil(re.length/i)]}),s.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>r(Math.min(Math.ceil(re.length/i),n+1)),disabled:n>=Math.ceil(re.length/i),className:F(h?"px-2 py-1 text-[10px] min-w-[60px]":"min-w-[80px]"),children:[!h&&"Next",h&&"Next",s.jsx("svg",{className:F("ml-1",h?"w-3 h-3":"w-4 h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})})]}),u&&o&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-2 md:p-4",onClick:()=>f(!1),children:s.jsxs("div",{className:"bg-white rounded-2xl md:rounded-2xl rounded-t-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] md:max-h-[90vh] overflow-y-auto",onClick:fe=>fe.stopPropagation(),children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 px-4 py-3 md:px-6 md:py-4 rounded-t-2xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[s.jsx("h2",{className:"text-lg md:text-2xl font-bold text-white",children:"Finding Action Details"}),s.jsx("p",{className:"text-purple-100 text-xs md:text-sm mt-0.5 md:mt-1",children:o.key})]}),s.jsx("button",{onClick:()=>f(!1),className:"text-white hover:text-purple-200 transition-colors p-2 flex-shrink-0",children:s.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"p-3 md:p-6 space-y-3 md:space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-6",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Audit Name"}),s.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base",children:o.auditName||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Status"}),s.jsx("div",{className:"mt-0.5 md:mt-1",children:s.jsx(tt,{variant:Ne(o.status),size:"sm",className:"text-[10px] md:text-xs",children:o.status==="COMPLETED"?"Completed":o.status==="RISK ACCEPTED"?"Risk Accepted":o.status})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Risk Level"}),s.jsx("div",{className:"mt-0.5 md:mt-1",children:s.jsx(tt,{size:"sm",className:"text-[10px] md:text-xs",variant:o.riskLevel==="Critical"?"danger":o.riskLevel==="High"?"warning":o.riskLevel==="Medium"?"info":"default",children:o.riskLevel||"Unassigned"})})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Due Date"}),s.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base",children:o.dueDate?cs(o.dueDate,"PPP"):"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Financial Impact"}),s.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base",children:Hr(o.monetaryImpact||0)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Responsible"}),s.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base truncate",children:o.responsibleEmail||"-"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"C-Level"}),s.jsx("p",{className:"text-gray-900 font-medium mt-0.5 md:mt-1 text-sm md:text-base truncate",children:o.cLevel||"-"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Summary"}),s.jsx("p",{className:"text-gray-900 mt-1 md:mt-2 p-3 md:p-4 bg-gray-50 rounded-lg text-sm md:text-base",children:o.summary})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Action Description"}),s.jsx("p",{className:"text-gray-700 mt-1 md:mt-2 p-3 md:p-4 bg-gray-50 rounded-lg whitespace-pre-wrap text-sm md:text-base",children:o.description||"No description available"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] md:text-xs font-semibold text-gray-500 uppercase",children:"Finding Description"}),s.jsx("p",{className:"text-gray-700 mt-1 md:mt-2 p-3 md:p-4 bg-purple-50 rounded-lg whitespace-pre-wrap border border-purple-200 text-sm md:text-base",children:o.parentDescription||"No description available"})]}),s.jsx("div",{className:"hidden md:flex justify-end items-center pt-3 md:pt-4 border-t",children:s.jsx(ze,{onClick:()=>f(!1),variant:"outline",children:"Close"})})]})]})})]})},R7=({onGenerateReport:t,isExporting:e=!1})=>{const{user:n}=Vr(),[r,i]=L.useState(!1),[a,o]=L.useState([{id:"1",type:"system",content:'Hello! You can write your request in natural language to create a report. Example: "Export all actions with Open status"',timestamp:new Date}]),[c,u]=L.useState(""),[f,h]=L.useState(!1),p=L.useRef(null),m=L.useRef(null),x=()=>{var k,N,j;if(!(n!=null&&n.name))return"U";const w=n.name.trim().split(/\s+/).filter(Boolean);if(w.length>=2){const S=(k=w[0])==null?void 0:k[0],A=(N=w[w.length-1])==null?void 0:N[0];if(S&&A)return(S+A).toUpperCase()}return(j=w[0])!=null&&j[0]?w[0][0].toUpperCase():"U"},v=()=>{var w;(w=p.current)==null||w.scrollIntoView({behavior:"smooth"})};L.useEffect(()=>{v()},[a]),L.useEffect(()=>{r&&m.current&&m.current.focus()},[r]);const b=async()=>{if(!c.trim()||f||e)return;const w={id:Date.now().toString(),type:"user",content:c.trim(),timestamp:new Date};o(k=>[...k,w]),u(""),h(!0);try{const k=await t(w.content);if(k.success){const N={id:(Date.now()+1).toString(),type:"assistant",content:k.message||"Generating report...",timestamp:new Date,filters:k.filters};o(j=>[...j,N])}else{const N={id:(Date.now()+1).toString(),type:"error",content:k.error||"Your request could not be understood. Please try again with more details.",timestamp:new Date};o(j=>[...j,N])}}catch{const N={id:(Date.now()+1).toString(),type:"error",content:"An error occurred. Please try again.",timestamp:new Date};o(j=>[...j,N])}finally{h(!1)}},y=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),b())};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        @keyframes robot-blink {
          0%, 90%, 100% { opacity: 1; }
          95% { opacity: 0.1; }
        }
        @keyframes robot-wiggle {
          0%, 100% { transform: rotate(0deg); }
          25% { transform: rotate(-5deg); }
          75% { transform: rotate(5deg); }
        }
        @keyframes robot-bounce {
         0%, 100% { transform: translateY(0); }
         50% { transform: translateY(-8px); }
        }
        @keyframes robot-bounce-slow {
         0%, 100% { transform: translateY(0); }
         50% { transform: translateY(-3px); }
        }
        .robot-eye-blink {
          animation: robot-blink 3s infinite;
        }
        .robot-antenna-wiggle {
          animation: robot-wiggle 2s ease-in-out infinite;
          transform-origin: bottom center;
        }
        .robot-bounce {
          animation: robot-bounce 1.5s ease-in-out infinite;
        }
        .robot-bounce-slow {
          animation: robot-bounce-slow 2s ease-in-out infinite;
        }
      `}),!r&&s.jsx("button",{onClick:()=>i(!0),className:"fixed bottom-6 right-6 z-50 group","aria-label":"Open report chatbot",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-ping opacity-20"}),s.jsx("div",{className:"relative bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full p-4 shadow-xl transform transition-all duration-300 hover:scale-110 hover:shadow-2xl hover:shadow-purple-500/50 robot-bounce",children:s.jsxs("div",{className:"relative w-6 h-6",children:[s.jsx("div",{className:"absolute inset-0 bg-white rounded"}),s.jsxs("div",{className:"absolute top-1 left-1.5 flex gap-0.5",children:[s.jsx("div",{className:"w-1 h-1 bg-purple-600 rounded-full robot-eye-blink"}),s.jsx("div",{className:"w-1 h-1 bg-purple-600 rounded-full robot-eye-blink",style:{animationDelay:"0.15s"}})]}),s.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-2 h-0.5 bg-purple-600 rounded-full"}),s.jsx("div",{className:"absolute -top-0.5 left-1/2 -translate-x-1/2 w-0.5 h-1 bg-white rounded-t-full robot-antenna-wiggle"})]})})]})}),r&&s.jsxs("div",{className:"fixed bottom-6 right-6 z-50 w-[400px] h-[520px] bg-white rounded-2xl shadow-2xl flex flex-col border border-gray-100 overflow-hidden backdrop-blur-xl",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/20 backdrop-blur-sm flex items-center justify-center robot-bounce-slow",children:s.jsxs("div",{className:"relative w-5 h-5",children:[s.jsx("div",{className:"absolute inset-0 bg-white rounded"}),s.jsxs("div",{className:"absolute top-0.5 left-1 flex gap-0.5",children:[s.jsx("div",{className:"w-1 h-1 bg-purple-600 rounded-full robot-eye-blink"}),s.jsx("div",{className:"w-1 h-1 bg-purple-600 rounded-full robot-eye-blink",style:{animationDelay:"0.1s"}})]}),s.jsx("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1.5 h-0.5 bg-purple-600 rounded-full"}),s.jsx("div",{className:"absolute -top-0.5 left-1/2 -translate-x-1/2 w-0.5 h-1 bg-white rounded-t-full robot-antenna-wiggle"})]})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-base",children:"AuditBot"}),s.jsx("p",{className:"text-xs text-white/80",children:"AI assistant"})]})]}),s.jsx("button",{onClick:()=>i(!1),className:"text-white/80 hover:text-white hover:bg-white/20 rounded-lg p-1.5 transition-all","aria-label":"Close chatbot",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2.5 bg-gray-50/50",children:[a.map(w=>s.jsxs("div",{className:F("flex gap-2",w.type==="user"?"justify-end":"justify-start"),children:[w.type!=="user"&&s.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mt-0.5 hover:scale-110 transition-transform duration-200 robot-bounce-slow",children:s.jsxs("div",{className:"relative w-4 h-4",children:[s.jsx("div",{className:"absolute inset-0 bg-white/90 rounded"}),s.jsxs("div",{className:"absolute top-0.5 left-0.5 flex gap-0.5",children:[s.jsx("div",{className:"w-0.5 h-0.5 bg-purple-600 rounded-full robot-eye-blink"}),s.jsx("div",{className:"w-0.5 h-0.5 bg-purple-600 rounded-full robot-eye-blink",style:{animationDelay:"0.15s"}})]}),s.jsx("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-0.5 bg-purple-600 rounded-full"}),s.jsx("div",{className:"absolute -top-0.5 left-1/2 -translate-x-1/2 w-0.5 h-0.5 bg-white rounded-t-full robot-antenna-wiggle"})]})}),s.jsxs("div",{className:F("max-w-[75%] rounded-xl px-3 py-2 text-sm",w.type==="user"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-br-sm":w.type==="error"?"bg-red-50 text-red-800 border border-red-200 rounded-bl-sm":w.type==="system"?"bg-blue-50 text-blue-800 border border-blue-200 rounded-bl-sm":w.content.includes("Found **")||w.content.includes("** action")?"bg-gradient-to-br from-purple-50 to-pink-50 text-gray-800 border-2 border-purple-200 rounded-bl-sm shadow-md":"bg-white text-gray-800 border border-gray-200 rounded-bl-sm shadow-sm"),children:[w.content.includes("**")&&(w.content.includes("I found")||w.content.includes("There")||w.content.includes("Found")||w.content.includes("counted"))?s.jsx("div",{className:"leading-relaxed",children:s.jsx("p",{className:"leading-relaxed",dangerouslySetInnerHTML:{__html:w.content.replace(/\*\*(.*?)\*\*/g,'<span class="text-2xl font-bold text-purple-600 inline-block mx-1">$1</span>')}})}):s.jsx("p",{className:"leading-relaxed whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:w.content.replace(/\*\*(.*?)\*\*/g,'<strong class="font-bold text-purple-700">$1</strong>')}}),s.jsx("p",{className:"text-xs opacity-50 mt-1.5",children:w.timestamp.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),w.type==="user"&&s.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-lg bg-gradient-to-br from-gray-500 to-gray-600 flex items-center justify-center mt-0.5 shadow-sm hover:scale-110 transition-transform duration-200",children:s.jsx("span",{className:"text-xs font-bold text-white",children:x()})})]},w.id)),(f||e)&&s.jsxs("div",{className:"flex justify-start gap-2",children:[s.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center animate-bounce",style:{animationDuration:"1s"},children:s.jsxs("div",{className:"relative w-4 h-4",children:[s.jsx("div",{className:"absolute inset-0 bg-white/90 rounded"}),s.jsxs("div",{className:"absolute top-0.5 left-0.5 flex gap-0.5",children:[s.jsx("div",{className:"w-0.5 h-0.5 bg-purple-600 rounded-full animate-pulse",style:{animationDuration:"0.5s"}}),s.jsx("div",{className:"w-0.5 h-0.5 bg-purple-600 rounded-full animate-pulse",style:{animationDuration:"0.5s",animationDelay:"0.15s"}})]}),s.jsx("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-0.5 bg-purple-600 rounded-full"}),s.jsx("div",{className:"absolute -top-0.5 left-1/2 -translate-x-1/2 w-0.5 h-0.5 bg-white rounded-t-full robot-antenna-wiggle",style:{animationDuration:"0.8s"}})]})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl rounded-bl-sm px-3 py-2 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex gap-0.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-1.5 h-1.5 bg-pink-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),s.jsx("span",{className:"text-xs font-medium text-gray-600",children:e?"Generating...":"Thinking..."})]})})]}),s.jsx("div",{ref:p})]}),s.jsx("div",{className:"border-t border-gray-200 bg-white p-3",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{ref:m,type:"text",value:c,onChange:w=>u(w.target.value),onKeyPress:y,placeholder:"Ask AuditBot...",disabled:f||e,className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed"}),s.jsx("button",{onClick:b,disabled:!c.trim()||f||e,className:F("rounded-lg p-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed",c.trim()&&!f&&!e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 active:scale-95 shadow-md":"bg-gray-200 text-gray-400"),children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]})},I7={ak:"Open",open:"Open",gecikmi:"Overdue",overdue:"Overdue",tamamlanm:"Completed",completed:"Completed",tamamland:"Completed","risk kabul":"Risk Accepted","risk accepted":"Risk Accepted","risk kabul edildi":"Risk Accepted"},F7={kritik:"Critical",critical:"Critical",yksek:"High",high:"High",orta:"Medium",medium:"Medium",dk:"Low",low:"Low",atanmam:"Unassigned",unassigned:"Unassigned"},is=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),z7=t=>{const e=is(t);for(const[n,r]of Object.entries(I7))if(e.includes(n))return r},B7=t=>{const e=is(t);for(const[n,r]of Object.entries(F7))if(e.includes(n))return r},q7=t=>{const e=[/(?:audit|denetim)\s+(?:name|isim|ad)?\s*[:=]?\s*["']?([^"'\n]+)["']?/i,/["']([^"'\n]+)["']\s+(?:audit|denetim)/i,/(?:audit|denetim)\s+["']([^"'\n]+)["']/i];for(const n of e){const r=t.match(n);if(r&&r[1])return r[1].trim()}},U7=t=>{const e=[/(?:audit\s+)?lead\s+(?:is|name|ad)?\s*[:=]?\s*["']?([^"'\n]+)["']?/i,/["']([^"'\n]+)["']\s+(?:audit\s+)?lead/i,/(?:denetim\s+)?lider\s+(?:is|name|ad)?\s*[:=]?\s*["']?([^"'\n]+)["']?/i];for(const n of e){const r=t.match(n);if(r&&r[1])return r[1].trim()}},W7=t=>{const e=[/(?:action\s+)?responsible\s+(?:is|email|isim)?\s*[:=]?\s*["']?([^"'\n]+)["']?/i,/["']([^"'\n]+)["']\s+(?:action\s+)?responsible/i,/(?:sorumlu|responsible)\s+(?:is|email|isim)?\s*[:=]?\s*["']?([^"'\n]+)["']?/i,/\b([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})\b/,/["']?([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*)["']?(?:\s+(?:nun|nin|nn|nn|'s|'nin))?/i];for(const n of e){const r=t.match(n);if(r&&r[1]){const i=r[1].trim(),a=i.toLowerCase();if(/\b(?:from|in|for|since|during|iin|iinde|ylnda|yl)\s+\d{4}\b/i.test(i)||/^\d{4}$/.test(i)||["action","actions","actionlar","actionlarn","there","here"].includes(a)||a.includes("how many")||a.includes("how many")||a.includes("in there")||a.includes("from"))continue;return i}}},H7=t=>{const e=[/(?:c[-_]?level|clevel)\s+(?:is|email|isim)?\s*[:=]?\s*["']?([^"'\n]+)["']?/i,/["']([^"'\n]+)["']\s+(?:c[-_]?level|clevel)/i,/(?:c[-_]?level|clevel).*?([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/i];for(const n of e){const r=t.match(n);if(r&&r[1])return r[1].trim()}},V7=t=>{const e=is(t),n=/\b(?:from|in|for|since|during|iin|iinde|ylnda|yl)\s+(\d{4})\b/i,r=t.match(n);if(r&&r[1])return r[1];const i=/\b(\d{4})\s+(?:from|in|for|since|during|iin|iinde|ylnda|yl)\b/i,a=t.match(i);if(a&&a[1])return a[1];const o=/(?:just|only|sadece)\s+(?:year|yl|yl)?\s*(\d{4})/i,c=t.match(o);if(c&&c[1])return c[1];const u=/(?:year|yl|yl|audit\s+year)\s+(?:is\s+)?(?:all|tm|hepsi|tm)/i;if(t.match(u)||(e.includes("all")||e.includes("tm")||e.includes("hepsi")||e.includes("tm"))&&!e.includes("all actions")&&!e.includes("all results")&&!e.includes("all finding")&&!e.includes("export all")&&!e.includes("show all")&&/(?:year|yl|yl|audit).*?(?:all|tm|hepsi|tm)|(?:all|tm|hepsi|tm).*?(?:year|yl|yl|audit)/i.test(t))return"all";const h=/(?:just|only|sadece)\s+(\d{4})/i,p=t.match(h);if(p&&p[1])return p[1];const m=/(?:year|yl|yl|audit\s+year)\s*(?:is\s+)?(?:just|only|sadece)?\s*(?:=|\:)?\s*(\d{4})/i,x=t.match(m);if(x&&x[1]){const y=t.substring(0,x.index||0);return/(?:just|only|sadece)/i.test(y)?x[1]:parseInt(x[1])>=2024?"2024+":x[1]}if(e.includes("2024+")||e.includes("2024 ve sonras"))return"2024+";const v=/\b(20\d{2})\b/,b=t.match(v);if(b&&b[1]){const y=b[1];if(/(?:year|yl|yl|audit|just|only|sadece|from|in|for|since|during|iin|iinde|ylnda|yl).*?(?:20\d{2})|(?:20\d{2}).*?(?:year|yl|yl|audit|just|only|sadece|from|in|for|since|during|iin|iinde|ylnda|yl)/i.test(t))return/(?:just|only|sadece)/i.test(t)?y:parseInt(y)>=2024?"2024+":y}},$7=t=>[/\b(them|those|it|same|also|too|as well|bunlar|onlar|ayn|da|de)\b/i,/export\s+(them|those|it)/i,/(show|list|get|fetch)\s+(them|those|it)/i].some(n=>n.test(t)),Y7=t=>{const e=is(t);return[/^export\s*(pls|please|ltfen)?\s*$/i,/^export\s*(them|those|it|all)?\s*(pls|please|ltfen)?\s*$/i,/^(pls|please|ltfen)\s+export\s*$/i,/^export$/i].some(r=>r.test(e.trim()))},K7=t=>{const e=[/^(hi|hello|hey|merhaba|selam|gnaydn|iyi gnler|good morning|good afternoon|good evening)$/i,/^(hi|hello|hey|merhaba|selam)\s+(there|auditbot|bot)/i,/how\s+are\s+you/i,/how\s+do\s+you\s+do/i,/naslsn|naslsnz/i],n=[/^(thanks|thank you|teekkr|teekkrler|teekkr ederim|sa ol|saol)$/i,/^(thanks|thank you|teekkr|teekkrler|teekkr ederim)\s+(a lot|so much|very much|ok)/i,/^ty$/i,/^thx$/i],r=[/^(bye|goodbye|see you|grrz|hoa kal|iyi gnler)$/i,/^(bye|goodbye|see you|grrz)\s+(then|later|soon)/i],i=[/^(good|great|nice|awesome|cool|harika|sper|mkemmel)\s+(job|work|bot|assistant)/i,/you\s+(are|'re)\s+(great|awesome|cool|amazing|wonderful|harika|sper)/i];if(e.some(a=>a.test(t))){const a=["Hello!  How can I help you with your audit reports today?","Hi there!  Ready to generate some reports?","Hey! I'm doing great, thanks for asking! What can I do for you?","Good morning!  How can I assist you today?","Hello! I'm here and ready to help! "];return{isCasual:!0,response:a[Math.floor(Math.random()*a.length)]}}if(n.some(a=>a.test(t))){const a=["You're welcome!  Happy to help!","Anytime! Let me know if you need anything else! ","My pleasure! Feel free to ask for more reports! ","Glad I could help! ","You're very welcome! "];return{isCasual:!0,response:a[Math.floor(Math.random()*a.length)]}}if(r.some(a=>a.test(t))){const a=["See you later!  Have a great day!","Goodbye! Take care! ","Bye! Come back anytime you need reports! ","See you soon! "];return{isCasual:!0,response:a[Math.floor(Math.random()*a.length)]}}if(i.some(a=>a.test(t))){const a=["Aww, thanks!  I'm here to help anytime!","You're too kind!  Let me know if you need anything else!","Thank you! That means a lot! ","Much appreciated!  Happy to be of service!"];return{isCasual:!0,response:a[Math.floor(Math.random()*a.length)]}}return{isCasual:!1}},G7=(t,e,n)=>{if(!t||!t.trim())return{success:!1,filters:{},error:`Could not extract filters from your request. Please use these examples:
 "Export all actions with Open status"
 "Show actions with Critical risk and Overdue status"
 "Completed actions for year 2024"`};const r=K7(t);if(r.isCasual&&r.response)return{success:!0,filters:{},message:r.response,isCountRequest:!1};const i={},a=$7(t),o=Y7(t);(a||o)&&n&&Object.keys(n).length>0&&Object.assign(i,n);const u=[/(?:ka|how\s+many|count|say|number|ka\s+tane|how\s+many\s+actions?)/i,/(?:gster|show|list).*?(?:ka|how\s+many|count)/i].some(w=>w.test(t)),f=z7(t);f&&(e!=null&&e.statuses&&e.statuses.includes(f)?i.status=f:e!=null&&e.statuses||(i.status=f));const h=B7(t);h&&(e!=null&&e.riskLevels&&e.riskLevels.includes(h)?i.riskLevel=h:e!=null&&e.riskLevels||(i.riskLevel=h));const p=q7(t);if(p)if(e!=null&&e.auditNames){const w=e.auditNames.find(k=>is(k)===is(p));w&&(i.auditName=w)}else i.auditName=p;const m=U7(t);if(m)if(e!=null&&e.auditLeads){const w=e.auditLeads.find(k=>is(k)===is(m));w&&(i.auditLead=w)}else i.auditLead=m;const x=W7(t);if(x)if(x.includes("@"))e!=null&&e.responsibleEmails&&e.responsibleEmails.includes(x)?i.responsibleEmail=x:e!=null&&e.responsibleEmails||(i.responsibleEmail=x);else if(e!=null&&e.responsibleEmails){const w=e.responsibleEmails.find(k=>{const N=k.split("@")[0];return N?is(k).includes(is(x))||is(x).includes(is(N)):!1});w&&(i.responsibleEmail=w)}else i.responsibleEmail=x;const v=H7(t);if(v)if(e!=null&&e.cLevels){const w=e.cLevels.find(k=>is(k)===is(v)||v.includes("@")&&k===v);w&&(i.cLevel=w)}else i.cLevel=v;const b=V7(t);return b&&(i.auditYear=b),Object.keys(i).length>0?{success:!0,filters:i,message:void 0,isCountRequest:u}:{success:!1,filters:{},error:`Could not extract filters from your request. Please use these examples:
 "Export all actions with Open status"
 "How many actions with Critical risk?"
 "Completed actions for year 2024"`}},X7=()=>{const[t,e]=L.useState("2024+"),[n,r]=L.useState(1),[i,a]=L.useState(25),[o,c]=L.useState(null),[u,f]=L.useState(!1),[h,p]=L.useState(null),[m,x]=L.useState("asc"),[v,b]=L.useState([]),[y,w]=L.useState(!1),[k,N]=L.useState(!1),[j,S]=L.useState(null),{isExporting:A,exportFindingActions:O}=Ch(),M=L.useRef(null),[z,I]=L.useState(()=>{const re=localStorage.getItem("all-actions-column-order");return re?JSON.parse(re):["key","summary","description","status","audit","dueDate","riskLevel","responsible","clevel","actions"]}),[D,T]=L.useState(null),[q,H]=L.useState(null),G=[{value:"status",label:"Status"},{value:"auditName",label:"Audit Name"},{value:"auditLead",label:"Audit Lead"},{value:"riskLevel",label:"Risk Level"},{value:"responsibleEmail",label:"Action Responsible"},{value:"cLevel",label:"C-Level"}],{data:ee=[],isLoading:X}=uA({auditYear:t});L.useEffect(()=>{const re=xe=>{xe.key==="Escape"&&u&&f(!1)};if(u)return document.addEventListener("keydown",re),()=>document.removeEventListener("keydown",re)},[u]);const J=L.useMemo(()=>{if(!k||v.length===0)return ee||[];let re=[...ee];return v.forEach(xe=>{re=re.filter(we=>{const Se=we[xe.field];return xe.value==="all"?!0:xe.field==="status"?(we.status==="COMPLETED"?"Completed":we.status==="RISK ACCEPTED"?"Risk Accepted":we.status)===xe.value:Se===xe.value})}),re},[ee,v,k]),K=re=>{const xe=G.find(Se=>Se.value===re);if(!xe)return;const we={id:`${re}-${Date.now()}`,field:re,value:"all",label:xe.label};b([...v,we]),w(!1),N(!0)},W=re=>{const xe=v.filter(we=>we.id!==re);b(xe),xe.length===0&&N(!1)},R=(re,xe)=>{b(v.map(we=>we.id===re?{...we,value:xe}:we)),N(!0)},U=()=>{b([]),N(!1),p(null),x("asc")},B=re=>{T(re)},Q=(re,xe)=>{re.preventDefault(),H(xe)},Z=re=>{if(!D||D===re){T(null),H(null);return}const xe=[...z],we=xe.indexOf(D),Se=xe.indexOf(re);xe.splice(we,1),xe.splice(Se,0,D),I(xe),localStorage.setItem("all-actions-column-order",JSON.stringify(xe)),T(null),H(null)},$=()=>{T(null),H(null)},ne={key:120,summary:250,description:280,status:120,audit:200,dueDate:120,riskLevel:100,responsible:180,clevel:180,actions:120},{columnWidths:ae,resizing:ce,handleMouseDown:ye}=uc(M,ne,"all-actions-columns"),Be=L.useMemo(()=>{if(!J||!Array.isArray(J))return{total:0,open:0,overdue:0,completed:0,financialImpact:0,completionRate:"0.0",overdueRate:"0.0",moneyOpen:0,moneyOverdue:0};const re=J.filter(Ne=>Ne.status==="Open"),xe=J.filter(Ne=>Ne.status==="Overdue"),we=new Set(re.map(Ne=>Ne.parentKey).filter(Boolean)),Se=new Set(xe.map(Ne=>Ne.parentKey).filter(Boolean)),_e=Array.from(we).reduce((Ne,fe)=>{const pe=re.find(Le=>Le.parentKey===fe);return Ne+((pe==null?void 0:pe.monetaryImpact)||0)},0),te=Array.from(Se).reduce((Ne,fe)=>{const pe=xe.find(Le=>Le.parentKey===fe);return Ne+((pe==null?void 0:pe.monetaryImpact)||0)},0);return{total:J.length,open:re.length,overdue:xe.length,completed:J.filter(Ne=>Ne.status==="COMPLETED"||Ne.status==="Completed").length,financialImpact:_e+te,moneyOpen:_e,moneyOverdue:te,completionRate:J.length>0?(J.filter(Ne=>Ne.status==="COMPLETED"||Ne.status==="Completed").length/J.length*100).toFixed(1):"0.0",overdueRate:J.length>0?(J.filter(Ne=>Ne.status==="Overdue").length/J.length*100).toFixed(1):"0.0"}},[J]),Ue=re=>{if(!ee||ee.length===0)return[];const xe=[...new Set(ee.map(we=>we[re]))].filter(Boolean);return re==="status"?xe.map(we=>we==="COMPLETED"?"Completed":we==="RISK ACCEPTED"?"Risk Accepted":we).sort():xe.sort()},je=L.useMemo(()=>{if(!J||!Array.isArray(J))return[];let re=[...J];return h&&re.sort((xe,we)=>{const Se=xe[h],_e=we[h],te=Se<_e?-1:Se>_e?1:0;return m==="asc"?te:-te}),re},[J,h,m]),dt=L.useMemo(()=>{const re=(n-1)*i,xe=re+i;return je.slice(re,xe)},[je,n,i]),st=re=>{h===re?x(m==="asc"?"desc":"asc"):(p(re),x("asc"))},ft=re=>re==="COMPLETED"||re==="Completed"?"success":re==="Overdue"?"danger":re==="Open"?"warning":re==="RISK ACCEPTED"||re==="Risk Accepted"?"info":"default",Oe=async re=>{const xe={statuses:Ue("status"),auditNames:Ue("auditName"),auditLeads:Ue("auditLead"),riskLevels:Ue("riskLevel"),responsibleEmails:Ue("responsibleEmail"),cLevels:Ue("cLevel")},we=G7(re,xe,j||void 0);if(!we.success)return{success:!1,error:we.error};if(we.message&&Object.keys(we.filters).length===0)return{success:!0,filters:{},message:we.message};we.success&&Object.keys(we.filters).length>0&&S(we.filters);let Se=[...ee];if(we.filters.status&&(Se=Se.filter(pe=>(pe.status==="COMPLETED"?"Completed":pe.status==="RISK ACCEPTED"?"Risk Accepted":pe.status)===we.filters.status)),we.filters.auditName&&(Se=Se.filter(pe=>pe.auditName===we.filters.auditName)),we.filters.auditLead&&(Se=Se.filter(pe=>pe.auditLead===we.filters.auditLead)),we.filters.riskLevel&&(Se=Se.filter(pe=>pe.riskLevel===we.filters.riskLevel)),we.filters.responsibleEmail&&(Se=Se.filter(pe=>pe.responsibleEmail===we.filters.responsibleEmail)),we.filters.cLevel&&(Se=Se.filter(pe=>pe.cLevel===we.filters.cLevel)),we.filters.auditYear){const pe=we.filters.auditYear;pe==="2024+"?Se=Se.filter(Le=>{if(!Le.auditYear)return!1;const Qe=String(Le.auditYear);return Qe.includes("2024")||Qe.includes("2025")||Qe.includes("2026")||parseInt(Qe)>=2024}):pe==="all"||(Se=Se.filter(Le=>{if(!Le.auditYear)return!1;const Qe=String(Le.auditYear),qe=Qe.match(/\b(\d{4})\b/);return qe?qe[1]===pe:Qe.includes(pe)}))}if(h&&Se.sort((pe,Le)=>{const Qe=pe[h],qe=Le[h],et=Qe<qe?-1:Qe>qe?1:0;return m==="asc"?et:-et}),we.isCountRequest){we.filters.auditYear;const pe=Se.length,Le=[`I found **${pe}** action${pe!==1?"s":""} matching your request! `,`There ${pe===1?"is":"are"} **${pe}** action${pe!==1?"s":""} in total. `,`Great! I counted **${pe}** action${pe!==1?"s":""} for you. `,`Found **${pe}** action${pe!==1?"s":""}! ${pe===0?"No matches this time.":pe<10?"That's a small batch!":pe<50?"Nice collection!":"That's quite a lot!"} `],Qe=Le[Math.floor(Math.random()*Le.length)];return{success:!0,filters:we.filters,message:Qe}}const _e=Se.map(pe=>pe.key).filter(Boolean),te=we.filters.auditYear;if(te&&te!=="2024+"&&te!=="all"&&te!==t&&!we.isCountRequest){const pe={auditYear:te,role:"all"};we.filters.status&&(pe.statusFilter=we.filters.status),we.filters.auditName&&(pe.auditFilter=we.filters.auditName),we.filters.riskLevel&&(pe.riskLevelFilter=we.filters.riskLevel),we.filters.responsibleEmail&&(pe.responsibleFilter=we.filters.responsibleEmail);try{await O(pe);const Le=["Perfect! Your report is ready and downloading now... ","All set! I've prepared your report and it's downloading... ","Done! Your report is ready. Check your downloads! ","Great! I've generated your report and it's on its way... ","Excellent! Your report is ready and downloading... "],Qe=Le[Math.floor(Math.random()*Le.length)];return{success:!0,filters:we.filters,message:Qe}}catch{return{success:!1,error:"Oops! Something went wrong while generating your report. Please try again."}}}if(_e.length===0)return{success:!1,error:"Hmm, I couldn't find any actions matching your request. Try different filters! "};try{await O({auditYear:we.filters.auditYear||t,role:"all",actionKeys:_e.join(",")});const pe=[`Perfect! I've prepared your report with ${_e.length} action${_e.length!==1?"s":""} and it's downloading now... `,`All set! Your report with ${_e.length} action${_e.length!==1?"s":""} is ready. Check your downloads! `,`Done! I've generated your report (${_e.length} action${_e.length!==1?"s":""}) and it's on its way... `,`Great! Your report is ready with ${_e.length} action${_e.length!==1?"s":""}. Downloading now... `,`Excellent! I've prepared your report (${_e.length} action${_e.length!==1?"s":""}) and it's downloading... `],Le=pe[Math.floor(Math.random()*pe.length)];return{success:!0,filters:we.filters,message:Le}}catch{return{success:!1,error:"Oops! Something went wrong while generating your report. Please try again."}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-[24px] font-bold text-gray-900",children:"All Findings & Actions"}),s.jsx("p",{className:"text-[11.2px] text-gray-600 mt-1",children:"Complete overview of all audit finding actions"})]}),s.jsx("div",{className:"flex items-center gap-[12.8px]",children:s.jsxs("div",{className:"inline-flex rounded-lg border border-gray-300 bg-white p-1 shadow-sm",children:[s.jsxs("button",{onClick:()=>e("2024+"),className:`flex items-center gap-[6.4px] px-[12.8px] py-[6.4px] text-xs font-medium rounded-md transition-all ${t==="2024+"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[s.jsxs("svg",{className:"w-[16px] h-[16px]",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",fill:t==="2024+"?"white":"#E5E7EB"}),s.jsx("rect",{x:"3",y:"4",width:"18",height:"6",rx:"2",fill:t==="2024+"?"#DC2626":"#991B1B"}),s.jsx("text",{x:"12",y:"8",textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"bold",children:"JUL"}),s.jsx("text",{x:"12",y:"16",textAnchor:"middle",fill:t==="2024+"?"#6B7280":"#1F2937",fontSize:"8",fontWeight:"bold",children:"17"})]}),"As of 2024"]}),s.jsxs("button",{onClick:()=>e("all"),className:`flex items-center gap-[6.4px] px-[12.8px] py-[6.4px] text-xs font-medium rounded-md transition-all ${t==="all"?"bg-purple-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[s.jsxs("svg",{className:"w-[16px] h-[16px]",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("rect",{x:"4",y:"14",width:"3",height:"6",fill:"#10B981",rx:"0.5"}),s.jsx("rect",{x:"10",y:"8",width:"3",height:"12",fill:"#EF4444",rx:"0.5"}),s.jsx("rect",{x:"16",y:"11",width:"3",height:"9",fill:"#3B82F6",rx:"0.5"}),s.jsx("line",{x1:"3",y1:"7",x2:"21",y2:"7",stroke:t==="all"?"white":"#9CA3AF",strokeWidth:"1.5"})]}),"All Results"]})]})})]}),!k&&s.jsx(Ie,{children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Select Filters"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Choose fields to filter and analyze finding actions"})]}),s.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-6",children:G.map(re=>{const xe=v.some(we=>we.field===re.value);return s.jsxs("button",{onClick:()=>{xe?W(v.find(we=>we.field===re.value).id):K(re.value)},className:F("px-[12.8px] py-[6.4px] rounded-lg text-xs font-medium transition-all",xe?"bg-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-purple-50 hover:text-purple-700"),children:[xe?"":"+"," ",re.label]},re.value)})}),v.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-2 mb-6",children:v.map(re=>s.jsxs("div",{className:"flex items-center gap-2 bg-purple-50 rounded-lg p-3",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-700 w-32",children:[re.label,":"]}),s.jsxs("select",{value:re.value,onChange:xe=>R(re.id,xe.target.value),className:"flex-1 text-xs border border-gray-300 rounded-lg px-[9.6px] py-[4.8px] focus:ring-2 focus:ring-purple-500 focus:outline-none",children:[s.jsx("option",{value:"all",children:"All"}),Ue(re.field).map(xe=>s.jsx("option",{value:xe,children:xe},xe))]}),s.jsx("button",{onClick:()=>W(re.id),className:"text-gray-400 hover:text-red-600 p-1",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},re.id))}),s.jsx("div",{className:"flex justify-center",children:s.jsx(ze,{variant:"ghost",onClick:U,children:"Clear All"})})]})]})}),k&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-8 gap-[12.8px]",children:[s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Be.total}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Total"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-red-600",children:Be.open}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Open"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Be.overdue}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Overdue"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:Be.completed}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Completed"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[Be.completionRate,"%"]}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Completion Rate"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[Be.overdueRate,"%"]}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Overdue Rate"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:Hr(Be.moneyOpen)}),s.jsx("p",{className:"text-xs text-gray-700 font-semibold mt-1",children:"Financial Impact"}),s.jsx("p",{className:"text-xs text-gray-500",children:"(Open Status)"})]})}),s.jsx(Ie,{variant:"elevated",padding:"sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-red-600",children:Hr(Be.moneyOverdue)}),s.jsx("p",{className:"text-xs text-gray-700 font-semibold mt-1",children:"Financial Impact"}),s.jsx("p",{className:"text-xs text-gray-500",children:"(Overdue Status)"})]})})]}),k&&s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"All Finding Actions",subtitle:`${(je==null?void 0:je.length)||0} actions found (filtered from ${(J==null?void 0:J.length)||0} total)`,action:s.jsxs(ze,{variant:"primary",size:"sm",onClick:async()=>{const xe=(je&&je.length>0?je:J&&J.length>0?J:ee).map(we=>we.key).filter(Boolean);xe.length!==0&&await O({auditYear:t,role:"all",actionKeys:xe.join(",")})},isLoading:A,children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export to Excel"]})}),X?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx(Ct,{size:"xl",text:"Loading all finding actions..."})}):!J||!Array.isArray(J)?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("h3",{className:"mt-2 text-xs font-medium text-gray-900",children:"No actions found"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"No finding actions available for the selected filters."})]}):s.jsxs("div",{className:"overflow-x-auto mt-4",children:[s.jsxs("div",{className:"mb-6 space-y-4",children:[v.length>0&&s.jsx("div",{className:"flex flex-wrap items-center gap-2",children:v.map(re=>s.jsxs("div",{className:"inline-flex items-center gap-[6.4px] bg-purple-50 border border-purple-200 rounded-lg px-[9.6px] py-[6.4px]",children:[s.jsxs("span",{className:"text-xs font-medium text-purple-700",children:[re.label,":"]}),s.jsxs("select",{value:re.value,onChange:xe=>R(re.id,xe.target.value),className:"text-[9.6px] bg-white border border-purple-300 rounded px-[6.4px] py-[3.2px] focus:ring-2 focus:ring-purple-500 focus:outline-none",children:[s.jsx("option",{value:"all",children:"All"}),Ue(re.field).map(xe=>s.jsx("option",{value:xe,children:xe},xe))]}),s.jsx("button",{onClick:()=>W(re.id),className:"text-purple-600 hover:text-purple-800 hover:bg-purple-100 rounded p-0.5",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},re.id))}),s.jsx("div",{className:"flex flex-wrap items-center gap-3 justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>w(!y),className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Filter"]}),y&&s.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl z-50 min-w-[200px]",children:s.jsxs("div",{className:"p-2 space-y-1",children:[G.filter(re=>!v.some(xe=>xe.field===re.value)).map(re=>s.jsx("button",{onClick:()=>K(re.value),className:"w-full text-left px-[9.6px] py-[6.4px] text-xs text-gray-700 hover:bg-purple-50 hover:text-purple-700 rounded transition-colors",children:re.label},re.value)),G.filter(re=>!v.some(xe=>xe.field===re.value)).length===0&&s.jsx("div",{className:"px-[9.6px] py-[6.4px] text-xs text-gray-500",children:"All filters added"})]})})]}),v.length>0&&s.jsxs(ze,{variant:"outline",size:"sm",onClick:U,className:"border-red-300 text-red-700 hover:bg-red-50",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Reset All"]})]})})]}),s.jsxs("table",{ref:M,className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-gray-200",children:z.map(re=>{const xe={key:{label:"Key",sortable:!0,sortKey:"key"},summary:{label:"Summary",sortable:!1},description:{label:"Description",sortable:!1},status:{label:"Status",sortable:!0,sortKey:"status"},audit:{label:"Audit",sortable:!0,sortKey:"auditName"},dueDate:{label:"Due Date",sortable:!0,sortKey:"dueDate"},riskLevel:{label:"Risk Level",sortable:!0,sortKey:"riskLevel"},responsible:{label:"Responsible",sortable:!1},clevel:{label:"C-Level",sortable:!1},actions:{label:"Action Detail",sortable:!1}}[re];return s.jsx(bs,{columnKey:re,width:ae[re],onResizeStart:ye,isResizing:ce===re,className:F("text-left py-[9.6px] px-[12.8px] text-xs font-semibold text-gray-700",(xe==null?void 0:xe.sortable)&&"cursor-pointer hover:bg-purple-50 transition-colors select-none",re==="actions"&&"text-center"),onClick:xe!=null&&xe.sortable&&(xe!=null&&xe.sortKey)?()=>st(xe.sortKey):void 0,onDragStart:B,onDragOver:Q,onDrop:Z,onDragEnd:$,isDragging:D===re,isDragOver:q===re,children:xe!=null&&xe.sortable&&(xe!=null&&xe.sortKey)?s.jsxs("div",{className:"flex items-center gap-1",children:[xe==null?void 0:xe.label,s.jsx("svg",{className:`w-4 h-4 transition-opacity ${h===xe.sortKey?"opacity-100 text-purple-600":"opacity-40"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:h===xe.sortKey&&m==="desc"?"M19 9l-7 7-7-7":"M5 15l7-7 7 7"})})]}):xe==null?void 0:xe.label},re)})})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:dt.map(re=>s.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:z.map(xe=>s.jsxs("td",{className:"px-[12.8px] py-[9.6px] text-xs",style:{width:ae[xe]},children:[xe==="key"&&s.jsx("span",{className:"text-purple-600 font-mono font-semibold",children:re.key}),xe==="summary"&&s.jsx("span",{className:"text-gray-900 font-medium",children:re.summary}),xe==="description"&&s.jsx("span",{className:"text-gray-600 text-xs",children:re.description||"-"}),xe==="status"&&s.jsx(tt,{variant:ft(re.status),children:re.status==="COMPLETED"?"Completed":re.status==="RISK ACCEPTED"?"Risk Accepted":re.status}),xe==="audit"&&s.jsx("span",{className:"text-gray-600 text-xs",children:re.auditName||"-"}),xe==="dueDate"&&s.jsx("span",{className:"text-gray-600 text-xs",children:re.dueDate?cs(re.dueDate,"PP"):"-"}),xe==="riskLevel"&&s.jsx(tt,{variant:re.riskLevel==="Critical"?"danger":re.riskLevel==="High"?"warning":re.riskLevel==="Medium"?"info":"default",children:re.riskLevel||"Unassigned"}),xe==="responsible"&&s.jsx("span",{className:"text-gray-600 text-xs",children:re.responsibleEmail||"-"}),xe==="clevel"&&s.jsx("span",{className:"text-gray-600 text-xs",children:re.cLevel||"-"}),xe==="actions"&&s.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>{c(re),f(!0)},children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]},xe))},re.key))})]})]}),je.length>0&&s.jsx("div",{className:"mt-4 p-4 border-t border-gray-200",children:s.jsx(ay,{currentPage:n,totalItems:je.length,itemsPerPage:i,onPageChange:r,onItemsPerPageChange:a})})]}),u&&o&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:re=>re.stopPropagation(),children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 px-6 py-4 rounded-t-2xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-[16px] font-bold text-white",children:"Finding Action Details"}),s.jsx("p",{className:"text-purple-100 text-xs mt-1",children:o.key})]}),s.jsx("button",{onClick:()=>f(!1),className:"text-white hover:text-purple-200 transition-colors p-2",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-[19.2px]",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Audit Name"}),s.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.auditName||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Status"}),s.jsx("div",{className:"mt-1",children:s.jsx(tt,{variant:ft(o.status),children:o.status==="COMPLETED"?"Completed":o.status==="RISK ACCEPTED"?"Risk Accepted":o.status})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Due Date"}),s.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.dueDate?cs(o.dueDate,"PPP"):"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Financial Impact"}),s.jsx("p",{className:"text-gray-900 font-medium mt-1",children:Hr(o.monetaryImpact)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Action Responsible"}),s.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.responsibleEmail||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"C-Level"}),s.jsx("p",{className:"text-gray-900 font-medium mt-1",children:o.cLevel||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Risk Level"}),s.jsx("div",{className:"mt-1",children:s.jsx(tt,{variant:o.riskLevel==="Critical"?"danger":o.riskLevel==="High"?"warning":o.riskLevel==="Medium"?"info":"default",children:o.riskLevel||"Unassigned"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Action Summary"}),s.jsx("p",{className:"text-gray-900 mt-2 p-4 bg-gray-50 rounded-lg",children:o.summary})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Action Description"}),s.jsx("p",{className:"text-gray-700 mt-2 p-4 bg-gray-50 rounded-lg whitespace-pre-wrap",children:o.description||"No description available"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Finding Description"}),s.jsx("p",{className:"text-gray-700 mt-2 p-4 bg-purple-50 rounded-lg whitespace-pre-wrap border border-purple-200",children:o.parentDescription||"No description available"})]}),s.jsx("div",{className:"flex justify-end items-center pt-4 border-t",children:s.jsx(ze,{onClick:()=>f(!1),variant:"primary",children:"Close"})})]})]})}),s.jsx(R7,{onGenerateReport:Oe,isExporting:A})]})},Q7=()=>{const{data:t,isLoading:e}=zk(),{data:n,isLoading:r}=Pn({queryKey:["google-sheet-data"],queryFn:()=>Xt.getGoogleSheetData()});return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-[24px] font-bold text-gray-900",children:"Audit Maturity Assessment"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Track audit maturity scores and progress"})]})}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Maturity Scores",subtitle:"From Jira MAT project"}),e?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx(Ct,{size:"xl",text:"Loading MAT scores..."})}):s.jsx("div",{className:"overflow-x-auto mt-4",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Object"}),s.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Score"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"})]})}),s.jsx("tbody",{children:t==null?void 0:t.map((i,a)=>s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[s.jsx("td",{className:"py-4 px-4 text-gray-900",children:i.object}),s.jsx("td",{className:"py-4 px-4 text-center",children:s.jsxs("span",{className:`inline-block px-3 py-1 rounded-full font-semibold ${i.score>=4?"bg-green-100 text-green-800":i.score>=3?"bg-blue-100 text-blue-800":i.score>=2?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[i.score,"/5"]})}),s.jsx("td",{className:"py-4 px-4 text-gray-600",children:i.status})]},a))})]})})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Additional Maturity Data",subtitle:"From Google Sheets"}),r?s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx(Ct,{size:"xl",text:"Loading Google Sheets data..."})}):n&&n.length>0?s.jsx("div",{className:"overflow-x-auto mt-4",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-gray-200",children:Object.keys(n[0]).map(i=>s.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:i},i))})}),s.jsx("tbody",{children:n.map((i,a)=>s.jsx("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:Object.values(i).map((o,c)=>s.jsx("td",{className:"py-4 px-4 text-gray-900",children:o},c))},a))})]})}):s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No Google Sheets data available"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-[19.2px]",children:[s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Average Score"}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-4xl font-bold text-purple-600",children:t&&t.length>0?(t.reduce((i,a)=>i+a.score,0)/t.length).toFixed(2):"0.00"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Out of 5.00"})]})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"High Performers"}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-4xl font-bold text-green-600",children:(t==null?void 0:t.filter(i=>i.score>=4).length)||0}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Scores 4.0+"})]})]}),s.jsxs(Ie,{variant:"elevated",children:[s.jsx(Nt,{title:"Needs Improvement"}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-4xl font-bold text-red-600",children:(t==null?void 0:t.filter(i=>i.score<3).length)||0}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Scores below 3.0"})]})]})]})]})};function Z7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return L.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Kh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vc(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Wy(t){return"nodeType"in t}function $r(t){var e,n;return t?vc(t)?t:Wy(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Hy(t){const{Document:e}=$r(t);return t instanceof e}function ru(t){return vc(t)?!1:t instanceof $r(t).HTMLElement}function i4(t){return t instanceof $r(t).SVGElement}function bc(t){return t?vc(t)?t.document:Wy(t)?Hy(t)?t:ru(t)||i4(t)?t.ownerDocument:document:document:document}const ni=Kh?L.useLayoutEffect:L.useEffect;function Gh(t){const e=L.useRef(t);return ni(()=>{e.current=t}),L.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function J7(){const t=L.useRef(null),e=L.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=L.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Id(t,e){e===void 0&&(e=[t]);const n=L.useRef(t);return ni(()=>{n.current!==t&&(n.current=t)},e),n}function su(t,e){const n=L.useRef();return L.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function vh(t){const e=Gh(t),n=L.useRef(null),r=L.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function bh(t){const e=L.useRef();return L.useEffect(()=>{e.current=t},[t]),e.current}let u0={};function iu(t,e){return L.useMemo(()=>{if(e)return e;const n=u0[t]==null?0:u0[t]+1;return u0[t]=n,t+"-"+n},[t,e])}function a4(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((a,o)=>{const c=Object.entries(o);for(const[u,f]of c){const h=a[u];h!=null&&(a[u]=h+t*f)}return a},{...e})}}const ql=a4(1),Fd=a4(-1);function eI(t){return"clientX"in t&&"clientY"in t}function Xh(t){if(!t)return!1;const{KeyboardEvent:e}=$r(t.target);return e&&t instanceof e}function tI(t){if(!t)return!1;const{TouchEvent:e}=$r(t.target);return e&&t instanceof e}function wh(t){if(tI(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return eI(t)?{x:t.clientX,y:t.clientY}:null}const Qa=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Qa.Translate.toString(t),Qa.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),oj="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function nI(t){return t.matches(oj)?t:t.querySelector(oj)}const rI={display:"none"};function sI(t){let{id:e,value:n}=t;return jt.createElement("div",{id:e,style:rI},n)}function iI(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return jt.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function aI(){const[t,e]=L.useState("");return{announce:L.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const o4=L.createContext(null);function oI(t){const e=L.useContext(o4);L.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function lI(){const[t]=L.useState(()=>new Set),e=L.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[L.useCallback(r=>{let{type:i,event:a}=r;t.forEach(o=>{var c;return(c=o[i])==null?void 0:c.call(o,a)})},[t]),e]}const cI={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},dI={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function uI(t){let{announcements:e=dI,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=cI}=t;const{announce:a,announcement:o}=aI(),c=iu("DndLiveRegion"),[u,f]=L.useState(!1);if(L.useEffect(()=>{f(!0)},[]),oI(L.useMemo(()=>({onDragStart(p){let{active:m}=p;a(e.onDragStart({active:m}))},onDragMove(p){let{active:m,over:x}=p;e.onDragMove&&a(e.onDragMove({active:m,over:x}))},onDragOver(p){let{active:m,over:x}=p;a(e.onDragOver({active:m,over:x}))},onDragEnd(p){let{active:m,over:x}=p;a(e.onDragEnd({active:m,over:x}))},onDragCancel(p){let{active:m,over:x}=p;a(e.onDragCancel({active:m,over:x}))}}),[a,e])),!u)return null;const h=jt.createElement(jt.Fragment,null,jt.createElement(sI,{id:r,value:i.draggable}),jt.createElement(iI,{id:c,announcement:o}));return n?fd.createPortal(h,n):h}var or;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(or||(or={}));function jh(){}function f0(t,e){return L.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function fI(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return L.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const ri=Object.freeze({x:0,y:0});function hI(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function pI(t,e){const n=wh(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function mI(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function gI(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function lj(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function l4(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}const xI=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=lj(e),a=[];for(const o of r){const{id:c}=o,u=n.get(c);if(u){const f=lj(u),h=i.reduce((m,x,v)=>m+hI(f[v],x),0),p=Number((h/4).toFixed(4));a.push({id:c,data:{droppableContainer:o,value:p}})}}return a.sort(mI)};function yI(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),o=i-r,c=a-n;if(r<i&&n<a){const u=e.width*e.height,f=t.width*t.height,h=o*c,p=h/(u+f-h);return Number(p.toFixed(4))}return 0}const c4=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const a of r){const{id:o}=a,c=n.get(o);if(c){const u=yI(c,e);u>0&&i.push({id:o,data:{droppableContainer:a,value:u}})}}return i.sort(gI)};function vI(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function d4(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:ri}function bI(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return i.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...n})}}const wI=bI(1);function u4(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function jI(t,e,n){const r=u4(e);if(!r)return t;const{scaleX:i,scaleY:a,x:o,y:c}=r,u=t.left-o-(1-i)*parseFloat(n),f=t.top-c-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?t.width/i:t.width,p=a?t.height/a:t.height;return{width:h,height:p,top:f,right:u+h,bottom:f+p,left:u}}const _I={ignoreTransform:!1};function wc(t,e){e===void 0&&(e=_I);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:h}=$r(t).getComputedStyle(t);f&&(n=jI(n,f,h))}const{top:r,left:i,width:a,height:o,bottom:c,right:u}=n;return{top:r,left:i,width:a,height:o,bottom:c,right:u}}function cj(t){return wc(t,{ignoreTransform:!0})}function kI(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function NI(t,e){return e===void 0&&(e=$r(t).getComputedStyle(t)),e.position==="fixed"}function SI(t,e){e===void 0&&(e=$r(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=e[i];return typeof a=="string"?n.test(a):!1})}function Qh(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(Hy(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!ru(i)||i4(i)||n.includes(i))return n;const a=$r(t).getComputedStyle(i);return i!==t&&SI(i,a)&&n.push(i),NI(i,a)?n:r(i.parentNode)}return t?r(t):n}function f4(t){const[e]=Qh(t,1);return e??null}function h0(t){return!Kh||!t?null:vc(t)?t:Wy(t)?Hy(t)||t===bc(t).scrollingElement?window:ru(t)?t:null:null}function h4(t){return vc(t)?t.scrollX:t.scrollLeft}function p4(t){return vc(t)?t.scrollY:t.scrollTop}function qx(t){return{x:h4(t),y:p4(t)}}var gr;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(gr||(gr={}));function m4(t){return!Kh||!t?!1:t===document.scrollingElement}function g4(t){const e={x:0,y:0},n=m4(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,c=t.scrollLeft>=r.x;return{isTop:i,isLeft:a,isBottom:o,isRight:c,maxScroll:r,minScroll:e}}const CI={x:.2,y:.2};function AI(t,e,n,r,i){let{top:a,left:o,right:c,bottom:u}=n;r===void 0&&(r=10),i===void 0&&(i=CI);const{isTop:f,isBottom:h,isLeft:p,isRight:m}=g4(t),x={x:0,y:0},v={x:0,y:0},b={height:e.height*i.y,width:e.width*i.x};return!f&&a<=e.top+b.height?(x.y=gr.Backward,v.y=r*Math.abs((e.top+b.height-a)/b.height)):!h&&u>=e.bottom-b.height&&(x.y=gr.Forward,v.y=r*Math.abs((e.bottom-b.height-u)/b.height)),!m&&c>=e.right-b.width?(x.x=gr.Forward,v.x=r*Math.abs((e.right-b.width-c)/b.width)):!p&&o<=e.left+b.width&&(x.x=gr.Backward,v.x=r*Math.abs((e.left+b.width-o)/b.width)),{direction:x,speed:v}}function EI(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function x4(t){return t.reduce((e,n)=>ql(e,qx(n)),ri)}function OI(t){return t.reduce((e,n)=>e+h4(n),0)}function LI(t){return t.reduce((e,n)=>e+p4(n),0)}function y4(t,e){if(e===void 0&&(e=wc),!t)return;const{top:n,left:r,bottom:i,right:a}=e(t);f4(t)&&(i<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const MI=[["x",["left","right"],OI],["y",["top","bottom"],LI]];class Vy{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Qh(n),i=x4(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,o,c]of MI)for(const u of o)Object.defineProperty(this,u,{get:()=>{const f=c(r),h=i[a]-f;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Cd{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function TI(t){const{EventTarget:e}=$r(t);return t instanceof e?t:bc(t)}function p0(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Ps;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ps||(Ps={}));function dj(t){t.preventDefault()}function DI(t){t.stopPropagation()}var sn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(sn||(sn={}));const v4={start:[sn.Space,sn.Enter],cancel:[sn.Esc],end:[sn.Space,sn.Enter,sn.Tab]},PI=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case sn.Right:return{...n,x:n.x+25};case sn.Left:return{...n,x:n.x-25};case sn.Down:return{...n,y:n.y+25};case sn.Up:return{...n,y:n.y-25}}};class $y{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Cd(bc(n)),this.windowListeners=new Cd($r(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ps.Resize,this.handleCancel),this.windowListeners.add(Ps.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ps.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&y4(r),n(ri)}handleKeyDown(e){if(Xh(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:a=v4,coordinateGetter:o=PI,scrollBehavior:c="smooth"}=i,{code:u}=e;if(a.end.includes(u)){this.handleEnd(e);return}if(a.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:f}=r.current,h=f?{x:f.left,y:f.top}:ri;this.referenceCoordinates||(this.referenceCoordinates=h);const p=o(e,{active:n,context:r.current,currentCoordinates:h});if(p){const m=Fd(p,h),x={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const y=e.code,{isTop:w,isRight:k,isLeft:N,isBottom:j,maxScroll:S,minScroll:A}=g4(b),O=EI(b),M={x:Math.min(y===sn.Right?O.right-O.width/2:O.right,Math.max(y===sn.Right?O.left:O.left+O.width/2,p.x)),y:Math.min(y===sn.Down?O.bottom-O.height/2:O.bottom,Math.max(y===sn.Down?O.top:O.top+O.height/2,p.y))},z=y===sn.Right&&!k||y===sn.Left&&!N,I=y===sn.Down&&!j||y===sn.Up&&!w;if(z&&M.x!==p.x){const D=b.scrollLeft+m.x,T=y===sn.Right&&D<=S.x||y===sn.Left&&D>=A.x;if(T&&!m.y){b.scrollTo({left:D,behavior:c});return}T?x.x=b.scrollLeft-D:x.x=y===sn.Right?b.scrollLeft-S.x:b.scrollLeft-A.x,x.x&&b.scrollBy({left:-x.x,behavior:c});break}else if(I&&M.y!==p.y){const D=b.scrollTop+m.y,T=y===sn.Down&&D<=S.y||y===sn.Up&&D>=A.y;if(T&&!m.x){b.scrollTo({top:D,behavior:c});return}T?x.y=b.scrollTop-D:x.y=y===sn.Down?b.scrollTop-S.y:b.scrollTop-A.y,x.y&&b.scrollBy({top:-x.y,behavior:c});break}}this.handleMove(e,ql(Fd(p,this.referenceCoordinates),x))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}$y.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=v4,onActivation:i}=e,{active:a}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const c=a.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function uj(t){return!!(t&&"distance"in t)}function fj(t){return!!(t&&"delay"in t)}class Yy{constructor(e,n,r){var i;r===void 0&&(r=TI(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:a}=e,{target:o}=a;this.props=e,this.events=n,this.document=bc(o),this.documentListeners=new Cd(this.document),this.listeners=new Cd(r),this.windowListeners=new Cd($r(o)),this.initialCoordinates=(i=wh(a))!=null?i:ri,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ps.Resize,this.handleCancel),this.windowListeners.add(Ps.DragStart,dj),this.windowListeners.add(Ps.VisibilityChange,this.handleCancel),this.windowListeners.add(Ps.ContextMenu,dj),this.documentListeners.add(Ps.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(fj(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(uj(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ps.Click,DI,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ps.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:a}=this,{onMove:o,options:{activationConstraint:c}}=a;if(!i)return;const u=(n=wh(e))!=null?n:ri,f=Fd(i,u);if(!r&&c){if(uj(c)){if(c.tolerance!=null&&p0(f,c.tolerance))return this.handleCancel();if(p0(f,c.distance))return this.handleStart()}if(fj(c)&&p0(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===sn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const RI={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ky extends Yy{constructor(e){const{event:n}=e,r=bc(n.target);super(e,RI,r)}}Ky.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const II={move:{name:"mousemove"},end:{name:"mouseup"}};var Ux;(function(t){t[t.RightClick=2]="RightClick"})(Ux||(Ux={}));class FI extends Yy{constructor(e){super(e,II,bc(e.event.target))}}FI.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Ux.RightClick?!1:(r==null||r({event:n}),!0)}}];const m0={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class b4 extends Yy{constructor(e){super(e,m0)}static setup(){return window.addEventListener(m0.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(m0.move.name,e)};function e(){}}}b4.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Ad;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Ad||(Ad={}));var _h;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(_h||(_h={}));function zI(t){let{acceleration:e,activator:n=Ad.Pointer,canScroll:r,draggingRect:i,enabled:a,interval:o=5,order:c=_h.TreeOrder,pointerCoordinates:u,scrollableAncestors:f,scrollableAncestorRects:h,delta:p,threshold:m}=t;const x=qI({delta:p,disabled:!a}),[v,b]=J7(),y=L.useRef({x:0,y:0}),w=L.useRef({x:0,y:0}),k=L.useMemo(()=>{switch(n){case Ad.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Ad.DraggableRect:return i}},[n,i,u]),N=L.useRef(null),j=L.useCallback(()=>{const A=N.current;if(!A)return;const O=y.current.x*w.current.x,M=y.current.y*w.current.y;A.scrollBy(O,M)},[]),S=L.useMemo(()=>c===_h.TreeOrder?[...f].reverse():f,[c,f]);L.useEffect(()=>{if(!a||!f.length||!k){b();return}for(const A of S){if((r==null?void 0:r(A))===!1)continue;const O=f.indexOf(A),M=h[O];if(!M)continue;const{direction:z,speed:I}=AI(A,M,k,e,m);for(const D of["x","y"])x[D][z[D]]||(I[D]=0,z[D]=0);if(I.x>0||I.y>0){b(),N.current=A,v(j,o),y.current=I,w.current=z;return}}y.current={x:0,y:0},w.current={x:0,y:0},b()},[e,j,r,b,a,o,JSON.stringify(k),JSON.stringify(x),v,f,S,h,JSON.stringify(m)])}const BI={x:{[gr.Backward]:!1,[gr.Forward]:!1},y:{[gr.Backward]:!1,[gr.Forward]:!1}};function qI(t){let{delta:e,disabled:n}=t;const r=bh(e);return su(i=>{if(n||!r||!i)return BI;const a={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[gr.Backward]:i.x[gr.Backward]||a.x===-1,[gr.Forward]:i.x[gr.Forward]||a.x===1},y:{[gr.Backward]:i.y[gr.Backward]||a.y===-1,[gr.Forward]:i.y[gr.Forward]||a.y===1}}},[n,e,r])}function UI(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return su(i=>{var a;return e==null?null:(a=r??i)!=null?a:null},[r,e])}function WI(t,e){return L.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,a=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...a]},[]),[t,e])}var zd;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(zd||(zd={}));var Wx;(function(t){t.Optimized="optimized"})(Wx||(Wx={}));const hj=new Map;function HI(t,e){let{dragging:n,dependencies:r,config:i}=e;const[a,o]=L.useState(null),{frequency:c,measure:u,strategy:f}=i,h=L.useRef(t),p=y(),m=Id(p),x=L.useCallback(function(w){w===void 0&&(w=[]),!m.current&&o(k=>k===null?w:k.concat(w.filter(N=>!k.includes(N))))},[m]),v=L.useRef(null),b=su(w=>{if(p&&!n)return hj;if(!w||w===hj||h.current!==t||a!=null){const k=new Map;for(let N of t){if(!N)continue;if(a&&a.length>0&&!a.includes(N.id)&&N.rect.current){k.set(N.id,N.rect.current);continue}const j=N.node.current,S=j?new Vy(u(j),j):null;N.rect.current=S,S&&k.set(N.id,S)}return k}return w},[t,a,n,p,u]);return L.useEffect(()=>{h.current=t},[t]),L.useEffect(()=>{p||x()},[n,p]),L.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),L.useEffect(()=>{p||typeof c!="number"||v.current!==null||(v.current=setTimeout(()=>{x(),v.current=null},c))},[c,p,x,...r]),{droppableRects:b,measureDroppableContainers:x,measuringScheduled:a!=null};function y(){switch(f){case zd.Always:return!1;case zd.BeforeDragging:return n;default:return!n}}}function Gy(t,e){return su(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function VI(t,e){return Gy(t,e)}function $I(t){let{callback:e,disabled:n}=t;const r=Gh(e),i=L.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return L.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Zh(t){let{callback:e,disabled:n}=t;const r=Gh(e),i=L.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return L.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function YI(t){return new Vy(wc(t),t)}function pj(t,e,n){e===void 0&&(e=YI);const[r,i]=L.useState(null);function a(){i(u=>{if(!t)return null;if(t.isConnected===!1){var f;return(f=u??n)!=null?f:null}const h=e(t);return JSON.stringify(u)===JSON.stringify(h)?u:h})}const o=$I({callback(u){if(t)for(const f of u){const{type:h,target:p}=f;if(h==="childList"&&p instanceof HTMLElement&&p.contains(t)){a();break}}}}),c=Zh({callback:a});return ni(()=>{a(),t?(c==null||c.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[t]),r}function KI(t){const e=Gy(t);return d4(t,e)}const mj=[];function GI(t){const e=L.useRef(t),n=su(r=>t?r&&r!==mj&&t&&e.current&&t.parentNode===e.current.parentNode?r:Qh(t):mj,[t]);return L.useEffect(()=>{e.current=t},[t]),n}function XI(t){const[e,n]=L.useState(null),r=L.useRef(t),i=L.useCallback(a=>{const o=h0(a.target);o&&n(c=>c?(c.set(o,qx(o)),new Map(c)):null)},[]);return L.useEffect(()=>{const a=r.current;if(t!==a){o(a);const c=t.map(u=>{const f=h0(u);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,qx(f)]):null}).filter(u=>u!=null);n(c.length?new Map(c):null),r.current=t}return()=>{o(t),o(a)};function o(c){c.forEach(u=>{const f=h0(u);f==null||f.removeEventListener("scroll",i)})}},[i,t]),L.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,o)=>ql(a,o),ri):x4(t):ri,[t,e])}function gj(t,e){e===void 0&&(e=[]);const n=L.useRef(null);return L.useEffect(()=>{n.current=null},e),L.useEffect(()=>{const r=t!==ri;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Fd(t,n.current):ri}function QI(t){L.useEffect(()=>{if(!Kh)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function ZI(t,e){return L.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:a}=r;return n[i]=o=>{a(o,e)},n},{}),[t,e])}function w4(t){return L.useMemo(()=>t?kI(t):null,[t])}const xj=[];function JI(t,e){e===void 0&&(e=wc);const[n]=t,r=w4(n?$r(n):null),[i,a]=L.useState(xj);function o(){a(()=>t.length?t.map(u=>m4(u)?r:new Vy(e(u),u)):xj)}const c=Zh({callback:o});return ni(()=>{c==null||c.disconnect(),o(),t.forEach(u=>c==null?void 0:c.observe(u))},[t]),i}function j4(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ru(e)?e:t}function e9(t){let{measure:e}=t;const[n,r]=L.useState(null),i=L.useCallback(f=>{for(const{target:h}of f)if(ru(h)){r(p=>{const m=e(h);return p?{...p,width:m.width,height:m.height}:m});break}},[e]),a=Zh({callback:i}),o=L.useCallback(f=>{const h=j4(f);a==null||a.disconnect(),h&&(a==null||a.observe(h)),r(h?e(h):null)},[e,a]),[c,u]=vh(o);return L.useMemo(()=>({nodeRef:c,rect:n,setRef:u}),[n,c,u])}const t9=[{sensor:Ky,options:{}},{sensor:$y,options:{}}],n9={current:{}},Qf={draggable:{measure:cj},droppable:{measure:cj,strategy:zd.WhileDragging,frequency:Wx.Optimized},dragOverlay:{measure:wc}};class Ed extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const r9={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ed,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:jh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Qf,measureDroppableContainers:jh,windowRect:null,measuringScheduled:!1},_4={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:jh,draggableNodes:new Map,over:null,measureDroppableContainers:jh},au=L.createContext(_4),k4=L.createContext(r9);function s9(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ed}}}function i9(t,e){switch(e.type){case or.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case or.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case or.DragEnd:case or.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case or.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Ed(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case or.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const o=new Ed(t.droppable.containers);return o.set(n,{...a,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case or.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const a=new Ed(t.droppable.containers);return a.delete(n),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function a9(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=L.useContext(au),a=bh(r),o=bh(n==null?void 0:n.id);return L.useEffect(()=>{if(!e&&!r&&a&&o!=null){if(!Xh(a)||document.activeElement===a.target)return;const c=i.get(o);if(!c)return;const{activatorNode:u,node:f}=c;if(!u.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[u.current,f.current]){if(!h)continue;const p=nI(h);if(p){p.focus();break}}})}},[r,e,i,o,a]),null}function N4(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,a)=>a({transform:i,...r}),n):n}function o9(t){return L.useMemo(()=>({draggable:{...Qf.draggable,...t==null?void 0:t.draggable},droppable:{...Qf.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Qf.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function l9(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const a=L.useRef(!1),{x:o,y:c}=typeof i=="boolean"?{x:i,y:i}:i;ni(()=>{if(!o&&!c||!e){a.current=!1;return}if(a.current||!r)return;const f=e==null?void 0:e.node.current;if(!f||f.isConnected===!1)return;const h=n(f),p=d4(h,r);if(o||(p.x=0),c||(p.y=0),a.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=f4(f);m&&m.scrollBy({top:p.y,left:p.x})}},[e,o,c,r,n])}const Jh=L.createContext({...ri,scaleX:1,scaleY:1});var Aa;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Aa||(Aa={}));const c9=L.memo(function(e){var n,r,i,a;let{id:o,accessibility:c,autoScroll:u=!0,children:f,sensors:h=t9,collisionDetection:p=c4,measuring:m,modifiers:x,...v}=e;const b=L.useReducer(i9,void 0,s9),[y,w]=b,[k,N]=lI(),[j,S]=L.useState(Aa.Uninitialized),A=j===Aa.Initialized,{draggable:{active:O,nodes:M,translate:z},droppable:{containers:I}}=y,D=O!=null?M.get(O):null,T=L.useRef({initial:null,translated:null}),q=L.useMemo(()=>{var Kt;return O!=null?{id:O,data:(Kt=D==null?void 0:D.data)!=null?Kt:n9,rect:T}:null},[O,D]),H=L.useRef(null),[G,ee]=L.useState(null),[X,J]=L.useState(null),K=Id(v,Object.values(v)),W=iu("DndDescribedBy",o),R=L.useMemo(()=>I.getEnabled(),[I]),U=o9(m),{droppableRects:B,measureDroppableContainers:Q,measuringScheduled:Z}=HI(R,{dragging:A,dependencies:[z.x,z.y],config:U.droppable}),$=UI(M,O),ne=L.useMemo(()=>X?wh(X):null,[X]),ae=kt(),ce=VI($,U.draggable.measure);l9({activeNode:O!=null?M.get(O):null,config:ae.layoutShiftCompensation,initialRect:ce,measure:U.draggable.measure});const ye=pj($,U.draggable.measure,ce),Be=pj($?$.parentElement:null),Ue=L.useRef({activatorEvent:null,active:null,activeNode:$,collisionRect:null,collisions:null,droppableRects:B,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),it=I.getNodeFor((n=Ue.current.over)==null?void 0:n.id),je=e9({measure:U.dragOverlay.measure}),dt=(r=je.nodeRef.current)!=null?r:$,st=A?(i=je.rect)!=null?i:ye:null,ft=!!(je.nodeRef.current&&je.rect),Oe=KI(ft?null:ye),re=w4(dt?$r(dt):null),xe=GI(A?it??$:null),we=JI(xe),Se=N4(x,{transform:{x:z.x-Oe.x,y:z.y-Oe.y,scaleX:1,scaleY:1},activatorEvent:X,active:q,activeNodeRect:ye,containerNodeRect:Be,draggingNodeRect:st,over:Ue.current.over,overlayNodeRect:je.rect,scrollableAncestors:xe,scrollableAncestorRects:we,windowRect:re}),_e=ne?ql(ne,z):null,te=XI(xe),Ne=gj(te),fe=gj(te,[ye]),pe=ql(Se,Ne),Le=st?wI(st,Se):null,Qe=q&&Le?p({active:q,collisionRect:Le,droppableRects:B,droppableContainers:R,pointerCoordinates:_e}):null,qe=l4(Qe,"id"),[et,_t]=L.useState(null),Pe=ft?Se:ql(Se,fe),Lt=vI(Pe,(a=et==null?void 0:et.rect)!=null?a:null,ye),Pt=L.useRef(null),dr=L.useCallback((Kt,Jt)=>{let{sensor:bn,options:yt}=Jt;if(H.current==null)return;const en=M.get(H.current);if(!en)return;const ot=Kt.nativeEvent,tn=new bn({active:H.current,activeNode:en,event:ot,options:yt,context:Ue,onAbort(Rt){if(!M.get(Rt))return;const{onDragAbort:on}=K.current,vt={id:Rt};on==null||on(vt),k({type:"onDragAbort",event:vt})},onPending(Rt,qt,on,vt){if(!M.get(Rt))return;const{onDragPending:Ut}=K.current,Nn={id:Rt,constraint:qt,initialCoordinates:on,offset:vt};Ut==null||Ut(Nn),k({type:"onDragPending",event:Nn})},onStart(Rt){const qt=H.current;if(qt==null)return;const on=M.get(qt);if(!on)return;const{onDragStart:vt}=K.current,gn={activatorEvent:ot,active:{id:qt,data:on.data,rect:T}};fd.unstable_batchedUpdates(()=>{vt==null||vt(gn),S(Aa.Initializing),w({type:or.DragStart,initialCoordinates:Rt,active:qt}),k({type:"onDragStart",event:gn}),ee(Pt.current),J(ot)})},onMove(Rt){w({type:or.DragMove,coordinates:Rt})},onEnd:ln(or.DragEnd),onCancel:ln(or.DragCancel)});Pt.current=tn;function ln(Rt){return async function(){const{active:on,collisions:vt,over:gn,scrollAdjustedTranslate:Ut}=Ue.current;let Nn=null;if(on&&Ut){const{cancelDrop:Qt}=K.current;Nn={activatorEvent:ot,active:on,collisions:vt,delta:Ut,over:gn},Rt===or.DragEnd&&typeof Qt=="function"&&await Promise.resolve(Qt(Nn))&&(Rt=or.DragCancel)}H.current=null,fd.unstable_batchedUpdates(()=>{w({type:Rt}),S(Aa.Uninitialized),_t(null),ee(null),J(null),Pt.current=null;const Qt=Rt===or.DragEnd?"onDragEnd":"onDragCancel";if(Nn){const Rn=K.current[Qt];Rn==null||Rn(Nn),k({type:Qt,event:Nn})}})}}},[M]),On=L.useCallback((Kt,Jt)=>(bn,yt)=>{const en=bn.nativeEvent,ot=M.get(yt);if(H.current!==null||!ot||en.dndKit||en.defaultPrevented)return;const tn={active:ot};Kt(bn,Jt.options,tn)===!0&&(en.dndKit={capturedBy:Jt.sensor},H.current=yt,dr(bn,Jt))},[M,dr]),nr=WI(h,On);QI(h),ni(()=>{ye&&j===Aa.Initializing&&S(Aa.Initialized)},[ye,j]),L.useEffect(()=>{const{onDragMove:Kt}=K.current,{active:Jt,activatorEvent:bn,collisions:yt,over:en}=Ue.current;if(!Jt||!bn)return;const ot={active:Jt,activatorEvent:bn,collisions:yt,delta:{x:pe.x,y:pe.y},over:en};fd.unstable_batchedUpdates(()=>{Kt==null||Kt(ot),k({type:"onDragMove",event:ot})})},[pe.x,pe.y]),L.useEffect(()=>{const{active:Kt,activatorEvent:Jt,collisions:bn,droppableContainers:yt,scrollAdjustedTranslate:en}=Ue.current;if(!Kt||H.current==null||!Jt||!en)return;const{onDragOver:ot}=K.current,tn=yt.get(qe),ln=tn&&tn.rect.current?{id:tn.id,rect:tn.rect.current,data:tn.data,disabled:tn.disabled}:null,Rt={active:Kt,activatorEvent:Jt,collisions:bn,delta:{x:en.x,y:en.y},over:ln};fd.unstable_batchedUpdates(()=>{_t(ln),ot==null||ot(Rt),k({type:"onDragOver",event:Rt})})},[qe]),ni(()=>{Ue.current={activatorEvent:X,active:q,activeNode:$,collisionRect:Le,collisions:Qe,droppableRects:B,draggableNodes:M,draggingNode:dt,draggingNodeRect:st,droppableContainers:I,over:et,scrollableAncestors:xe,scrollAdjustedTranslate:pe},T.current={initial:st,translated:Le}},[q,$,Qe,Le,M,dt,st,B,I,et,xe,pe]),zI({...ae,delta:z,draggingRect:Le,pointerCoordinates:_e,scrollableAncestors:xe,scrollableAncestorRects:we});const Vt=L.useMemo(()=>({active:q,activeNode:$,activeNodeRect:ye,activatorEvent:X,collisions:Qe,containerNodeRect:Be,dragOverlay:je,draggableNodes:M,droppableContainers:I,droppableRects:B,over:et,measureDroppableContainers:Q,scrollableAncestors:xe,scrollableAncestorRects:we,measuringConfiguration:U,measuringScheduled:Z,windowRect:re}),[q,$,ye,X,Qe,Be,je,M,I,B,et,Q,xe,we,U,Z,re]),$n=L.useMemo(()=>({activatorEvent:X,activators:nr,active:q,activeNodeRect:ye,ariaDescribedById:{draggable:W},dispatch:w,draggableNodes:M,over:et,measureDroppableContainers:Q}),[X,nr,q,ye,w,W,M,et,Q]);return jt.createElement(o4.Provider,{value:N},jt.createElement(au.Provider,{value:$n},jt.createElement(k4.Provider,{value:Vt},jt.createElement(Jh.Provider,{value:Lt},f)),jt.createElement(a9,{disabled:(c==null?void 0:c.restoreFocus)===!1})),jt.createElement(uI,{...c,hiddenTextDescribedById:W}));function kt(){const Kt=(G==null?void 0:G.autoScrollEnabled)===!1,Jt=typeof u=="object"?u.enabled===!1:u===!1,bn=A&&!Kt&&!Jt;return typeof u=="object"?{...u,enabled:bn}:{enabled:bn}}}),d9=L.createContext(null),yj="button",u9="Draggable";function f9(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const a=iu(u9),{activators:o,activatorEvent:c,active:u,activeNodeRect:f,ariaDescribedById:h,draggableNodes:p,over:m}=L.useContext(au),{role:x=yj,roleDescription:v="draggable",tabIndex:b=0}=i??{},y=(u==null?void 0:u.id)===e,w=L.useContext(y?Jh:d9),[k,N]=vh(),[j,S]=vh(),A=ZI(o,e),O=Id(n);ni(()=>(p.set(e,{id:e,key:a,node:k,activatorNode:j,data:O}),()=>{const z=p.get(e);z&&z.key===a&&p.delete(e)}),[p,e]);const M=L.useMemo(()=>({role:x,tabIndex:b,"aria-disabled":r,"aria-pressed":y&&x===yj?!0:void 0,"aria-roledescription":v,"aria-describedby":h.draggable}),[r,x,b,y,v,h.draggable]);return{active:u,activatorEvent:c,activeNodeRect:f,attributes:M,isDragging:y,listeners:r?void 0:A,node:k,over:m,setNodeRef:N,setActivatorNodeRef:S,transform:w}}function S4(){return L.useContext(k4)}const h9="Droppable",p9={timeout:25};function Xy(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const a=iu(h9),{active:o,dispatch:c,over:u,measureDroppableContainers:f}=L.useContext(au),h=L.useRef({disabled:n}),p=L.useRef(!1),m=L.useRef(null),x=L.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:y}={...p9,...i},w=Id(b??r),k=L.useCallback(()=>{if(!p.current){p.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{f(Array.isArray(w.current)?w.current:[w.current]),x.current=null},y)},[y]),N=Zh({callback:k,disabled:v||!o}),j=L.useCallback((M,z)=>{N&&(z&&(N.unobserve(z),p.current=!1),M&&N.observe(M))},[N]),[S,A]=vh(j),O=Id(e);return L.useEffect(()=>{!N||!S.current||(N.disconnect(),p.current=!1,N.observe(S.current))},[S,N]),L.useEffect(()=>(c({type:or.RegisterDroppable,element:{id:r,key:a,disabled:n,node:S,rect:m,data:O}}),()=>c({type:or.UnregisterDroppable,key:a,id:r})),[r]),L.useEffect(()=>{n!==h.current.disabled&&(c({type:or.SetDroppableDisabled,id:r,key:a,disabled:n}),h.current.disabled=n)},[r,a,n,c]),{active:o,rect:m,isOver:(u==null?void 0:u.id)===r,node:S,over:u,setNodeRef:A}}function m9(t){let{animation:e,children:n}=t;const[r,i]=L.useState(null),[a,o]=L.useState(null),c=bh(n);return!n&&!r&&c&&i(c),ni(()=>{if(!a)return;const u=r==null?void 0:r.key,f=r==null?void 0:r.props.id;if(u==null||f==null){i(null);return}Promise.resolve(e(f,a)).then(()=>{i(null)})},[e,r,a]),jt.createElement(jt.Fragment,null,n,r?L.cloneElement(r,{ref:o}):null)}const g9={x:0,y:0,scaleX:1,scaleY:1};function x9(t){let{children:e}=t;return jt.createElement(au.Provider,{value:_4},jt.createElement(Jh.Provider,{value:g9},e))}const y9={position:"fixed",touchAction:"none"},v9=t=>Xh(t)?"transform 250ms ease":void 0,b9=L.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:a,className:o,rect:c,style:u,transform:f,transition:h=v9}=t;if(!c)return null;const p=i?f:{...f,scaleX:1,scaleY:1},m={...y9,width:c.width,height:c.height,top:c.top,left:c.left,transform:Qa.Transform.toString(p),transformOrigin:i&&r?pI(r,c):void 0,transition:typeof h=="function"?h(r):h,...u};return jt.createElement(n,{className:o,style:m,ref:e},a)}),w9=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:a,className:o}=t;if(a!=null&&a.active)for(const[c,u]of Object.entries(a.active))u!==void 0&&(i[c]=n.node.style.getPropertyValue(c),n.node.style.setProperty(c,u));if(a!=null&&a.dragOverlay)for(const[c,u]of Object.entries(a.dragOverlay))u!==void 0&&r.node.style.setProperty(c,u);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[u,f]of Object.entries(i))n.node.style.setProperty(u,f);o!=null&&o.active&&n.node.classList.remove(o.active)}},j9=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Qa.Transform.toString(e)},{transform:Qa.Transform.toString(n)}]},_9={duration:250,easing:"ease",keyframes:j9,sideEffects:w9({styles:{active:{opacity:"0"}}})};function k9(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return Gh((a,o)=>{if(e===null)return;const c=n.get(a);if(!c)return;const u=c.node.current;if(!u)return;const f=j4(o);if(!f)return;const{transform:h}=$r(o).getComputedStyle(o),p=u4(h);if(!p)return;const m=typeof e=="function"?e:N9(e);return y4(u,i.draggable.measure),m({active:{id:a,data:c.data,node:u,rect:i.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:o,rect:i.dragOverlay.measure(f)},droppableContainers:r,measuringConfiguration:i,transform:p})})}function N9(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={..._9,...t};return a=>{let{active:o,dragOverlay:c,transform:u,...f}=a;if(!e)return;const h={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},p={scaleX:u.scaleX!==1?o.rect.width*u.scaleX/c.rect.width:1,scaleY:u.scaleY!==1?o.rect.height*u.scaleY/c.rect.height:1},m={x:u.x-h.x,y:u.y-h.y,...p},x=i({...f,active:o,dragOverlay:c,transform:{initial:u,final:m}}),[v]=x,b=x[x.length-1];if(JSON.stringify(v)===JSON.stringify(b))return;const y=r==null?void 0:r({active:o,dragOverlay:c,...f}),w=c.node.animate(x,{duration:e,easing:n,fill:"forwards"});return new Promise(k=>{w.onfinish=()=>{y==null||y(),k()}})}}let vj=0;function S9(t){return L.useMemo(()=>{if(t!=null)return vj++,vj},[t])}const C9=jt.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:a,modifiers:o,wrapperElement:c="div",className:u,zIndex:f=999}=t;const{activatorEvent:h,active:p,activeNodeRect:m,containerNodeRect:x,draggableNodes:v,droppableContainers:b,dragOverlay:y,over:w,measuringConfiguration:k,scrollableAncestors:N,scrollableAncestorRects:j,windowRect:S}=S4(),A=L.useContext(Jh),O=S9(p==null?void 0:p.id),M=N4(o,{activatorEvent:h,active:p,activeNodeRect:m,containerNodeRect:x,draggingNodeRect:y.rect,over:w,overlayNodeRect:y.rect,scrollableAncestors:N,scrollableAncestorRects:j,transform:A,windowRect:S}),z=Gy(m),I=k9({config:r,draggableNodes:v,droppableContainers:b,measuringConfiguration:k}),D=z?y.setRef:void 0;return jt.createElement(x9,null,jt.createElement(m9,{animation:I},p&&O?jt.createElement(b9,{key:O,id:p.id,ref:D,as:c,activatorEvent:h,adjustScale:e,className:u,transition:a,rect:z,style:{zIndex:f,...i},transform:M},n):null))});function C4(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function A9(t,e){return t.reduce((n,r,i)=>{const a=e.get(r);return a&&(n[i]=a),n},Array(t.length))}function zf(t){return t!==null&&t>=0}function E9(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function O9(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const A4=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const a=C4(e,r,n),o=e[i],c=a[i];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},Bf={scaleX:1,scaleY:1},Hx=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:a,overIndex:o}=t;const c=(e=a[n])!=null?e:r;if(!c)return null;if(i===n){const f=a[o];return f?{x:0,y:n<o?f.top+f.height-(c.top+c.height):f.top-c.top,...Bf}:null}const u=L9(a,i,n);return i>n&&i<=o?{x:0,y:-c.height-u,...Bf}:i<n&&i>=o?{x:0,y:c.height+u,...Bf}:{x:0,y:0,...Bf}};function L9(t,e,n){const r=t[e],i=t[e-1],a=t[e+1];return r?n<e?i?r.top-(i.top+i.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const E4="Sortable",O4=jt.createContext({activeIndex:-1,containerId:E4,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:A4,disabled:{draggable:!1,droppable:!1}});function Vx(t){let{children:e,id:n,items:r,strategy:i=A4,disabled:a=!1}=t;const{active:o,dragOverlay:c,droppableRects:u,over:f,measureDroppableContainers:h}=S4(),p=iu(E4,n),m=c.rect!==null,x=L.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),v=o!=null,b=o?x.indexOf(o.id):-1,y=f?x.indexOf(f.id):-1,w=L.useRef(x),k=!E9(x,w.current),N=y!==-1&&b===-1||k,j=O9(a);ni(()=>{k&&v&&h(x)},[k,x,v,h]),L.useEffect(()=>{w.current=x},[x]);const S=L.useMemo(()=>({activeIndex:b,containerId:p,disabled:j,disableTransforms:N,items:x,overIndex:y,useDragOverlay:m,sortedRects:A9(x,u),strategy:i}),[b,p,j.draggable,j.droppable,N,x,y,u,m,i]);return jt.createElement(O4.Provider,{value:S},e)}const M9=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return C4(n,r,i).indexOf(e)},T9=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:a,newIndex:o,previousItems:c,previousContainerId:u,transition:f}=t;return!f||!r||c!==a&&i===o?!1:n?!0:o!==i&&e===u},D9={duration:200,easing:"ease"},L4="transform",P9=Qa.Transition.toString({property:L4,duration:0,easing:"linear"}),R9={roleDescription:"sortable"};function I9(t){let{disabled:e,index:n,node:r,rect:i}=t;const[a,o]=L.useState(null),c=L.useRef(n);return ni(()=>{if(!e&&n!==c.current&&r.current){const u=i.current;if(u){const f=wc(r.current,{ignoreTransform:!0}),h={x:u.left-f.left,y:u.top-f.top,scaleX:u.width/f.width,scaleY:u.height/f.height};(h.x||h.y)&&o(h)}}n!==c.current&&(c.current=n)},[e,n,r,i]),L.useEffect(()=>{a&&o(null)},[a]),a}function F9(t){let{animateLayoutChanges:e=T9,attributes:n,disabled:r,data:i,getNewIndex:a=M9,id:o,strategy:c,resizeObserverConfig:u,transition:f=D9}=t;const{items:h,containerId:p,activeIndex:m,disabled:x,disableTransforms:v,sortedRects:b,overIndex:y,useDragOverlay:w,strategy:k}=L.useContext(O4),N=z9(r,x),j=h.indexOf(o),S=L.useMemo(()=>({sortable:{containerId:p,index:j,items:h},...i}),[p,i,j,h]),A=L.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:O,node:M,isOver:z,setNodeRef:I}=Xy({id:o,data:S,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...u}}),{active:D,activatorEvent:T,activeNodeRect:q,attributes:H,setNodeRef:G,listeners:ee,isDragging:X,over:J,setActivatorNodeRef:K,transform:W}=f9({id:o,data:S,attributes:{...R9,...n},disabled:N.draggable}),R=Z7(I,G),U=!!D,B=U&&!v&&zf(m)&&zf(y),Q=!w&&X,Z=Q&&B?W:null,ne=B?Z??(c??k)({rects:b,activeNodeRect:q,activeIndex:m,overIndex:y,index:j}):null,ae=zf(m)&&zf(y)?a({id:o,items:h,activeIndex:m,overIndex:y}):j,ce=D==null?void 0:D.id,ye=L.useRef({activeId:ce,items:h,newIndex:ae,containerId:p}),Be=h!==ye.current.items,Ue=e({active:D,containerId:p,isDragging:X,isSorting:U,id:o,index:j,items:h,newIndex:ye.current.newIndex,previousItems:ye.current.items,previousContainerId:ye.current.containerId,transition:f,wasDragging:ye.current.activeId!=null}),it=I9({disabled:!Ue,index:j,node:M,rect:O});return L.useEffect(()=>{U&&ye.current.newIndex!==ae&&(ye.current.newIndex=ae),p!==ye.current.containerId&&(ye.current.containerId=p),h!==ye.current.items&&(ye.current.items=h)},[U,ae,p,h]),L.useEffect(()=>{if(ce===ye.current.activeId)return;if(ce!=null&&ye.current.activeId==null){ye.current.activeId=ce;return}const dt=setTimeout(()=>{ye.current.activeId=ce},50);return()=>clearTimeout(dt)},[ce]),{active:D,activeIndex:m,attributes:H,data:S,rect:O,index:j,newIndex:ae,items:h,isOver:z,isSorting:U,isDragging:X,listeners:ee,node:M,overIndex:y,over:J,setNodeRef:R,setActivatorNodeRef:K,setDroppableNodeRef:I,setDraggableNodeRef:G,transform:it??ne,transition:je()};function je(){if(it||Be&&ye.current.newIndex===j)return P9;if(!(Q&&!Xh(T)||!f)&&(U||Ue))return Qa.Transition.toString({...f,property:L4})}}function z9(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function kh(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const B9=[sn.Down,sn.Right,sn.Up,sn.Left],q9=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:a,over:o,scrollableAncestors:c}}=e;if(B9.includes(t.code)){if(t.preventDefault(),!n||!r)return;const u=[];a.getEnabled().forEach(p=>{if(!p||p!=null&&p.disabled)return;const m=i.get(p.id);if(m)switch(t.code){case sn.Down:r.top<m.top&&u.push(p);break;case sn.Up:r.top>m.top&&u.push(p);break;case sn.Left:r.left>m.left&&u.push(p);break;case sn.Right:r.left<m.left&&u.push(p);break}});const f=xI({collisionRect:r,droppableRects:i,droppableContainers:u});let h=l4(f,"id");if(h===(o==null?void 0:o.id)&&f.length>1&&(h=f[1].id),h!=null){const p=a.get(n.id),m=a.get(h),x=m?i.get(m.id):null,v=m==null?void 0:m.node.current;if(v&&x&&p&&m){const y=Qh(v).some((A,O)=>c[O]!==A),w=M4(p,m),k=U9(p,m),N=y||!w?{x:0,y:0}:{x:k?r.width-x.width:0,y:k?r.height-x.height:0},j={x:x.left,y:x.top};return N.x&&N.y?j:Fd(j,N)}}}};function M4(t,e){return!kh(t)||!kh(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function U9(t,e){return!kh(t)||!kh(e)||!M4(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const ud=["Planned","Fieldwork","Pre Closing Meeting","Closing Meeting","Completed"],Bd=t=>{switch(t){case"Planned":return{borderColor:"border-l-blue-400",gradient:"from-blue-50/60 to-blue-50/30",headerGradient:"from-blue-400/90 to-blue-500/90",icon:Aw,dotColor:"bg-blue-400/90",textColor:"text-blue-600"};case"Fieldwork":return{borderColor:"border-l-amber-400",gradient:"from-amber-50/60 to-amber-50/30",headerGradient:"from-amber-400/90 to-amber-500/90",icon:BD,dotColor:"bg-amber-400/90",textColor:"text-amber-600"};case"Pre Closing Meeting":return{borderColor:"border-l-orange-400",gradient:"from-orange-50/60 to-orange-50/30",headerGradient:"from-orange-400/90 to-orange-500/90",icon:sP,dotColor:"bg-orange-400/90",textColor:"text-orange-600"};case"Closing Meeting":return{borderColor:"border-l-indigo-400",gradient:"from-indigo-50/60 to-indigo-50/30",headerGradient:"from-indigo-400/90 to-indigo-500/90",icon:WD,dotColor:"bg-indigo-400/90",textColor:"text-indigo-600"};case"Completed":return{borderColor:"border-l-emerald-400",gradient:"from-emerald-50/60 to-emerald-50/30",headerGradient:"from-emerald-400/90 to-emerald-500/90",icon:y5,dotColor:"bg-emerald-400/90",textColor:"text-emerald-600"};default:return{borderColor:"border-l-gray-400",gradient:"from-gray-50/60 to-gray-50/30",headerGradient:"from-gray-400/90 to-gray-500/90",icon:Aw,dotColor:"bg-gray-400/90",textColor:"text-gray-600"}}},$x=({plan:t,onClick:e,onLongPress:n})=>{const{attributes:r,listeners:i,setNodeRef:a,transform:o,transition:c,isDragging:u}=F9({id:t.id,animateLayoutChanges:()=>!0}),f=Bd(t.status),[h,p]=jt.useState(!1),m=jt.useRef(null),x={transform:Qa.Transform.toString(o),transition:u?void 0:c||"transform 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 150ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",opacity:u?.4:1,willChange:u?"transform":"auto"},v=k=>{window.innerWidth>=768||!n||(p(!0),m.current=setTimeout(()=>{p(!1),n(t)},500))},b=()=>{m.current&&(clearTimeout(m.current),m.current=null),p(!1)},y=()=>{m.current&&(clearTimeout(m.current),m.current=null),p(!1)},w=typeof window<"u"&&window.innerWidth>=768?i:{};return s.jsx("div",{ref:a,style:{...x,WebkitTouchCallout:"none"},...r,...w,className:`mb-2 cursor-grab active:cursor-grabbing group w-full relative transition-transform duration-200 select-none ${h?"scale-95":""}`,onTouchStart:v,onTouchEnd:b,onTouchMove:y,children:s.jsxs("div",{className:`
                    bg-white rounded-md md:rounded-lg shadow-sm border-l-2 md:border-l-4 ${f.borderColor}
                    hover:shadow-lg hover:scale-[1.01] hover:-translate-y-0.5
                    transition-all duration-200 ease-out
                    border border-gray-100
                    group-hover:border-gray-200
                    w-full
                    relative
                `,onClick:k=>{u||(k.stopPropagation(),e())},children:[s.jsx(tt,{variant:"purple",className:"absolute top-0.5 right-0.5 text-[4px] md:text-[10px] px-0.5 md:px-2 py-0 md:py-1 leading-none font-bold",children:t.audit_year}),s.jsxs("div",{className:"p-1.5 md:p-3",children:[s.jsx("div",{className:"mb-0.5 md:mb-2",children:s.jsx("h4",{className:"font-semibold text-xs md:text-sm text-gray-900 line-clamp-2 leading-tight pr-8",children:t.audit_name||t.audit_type})}),s.jsx("div",{className:`
                        text-[9px] md:text-xs font-medium mb-0.5 md:mb-2.5 px-1.5 md:px-2 py-0.5 md:py-1 rounded-md inline-block
                        bg-gradient-to-r ${f.gradient} ${f.textColor}
                    `,children:t.department}),s.jsxs("div",{className:"flex items-center gap-1 md:gap-2 text-[9px] md:text-[11px] text-gray-500 pt-1 md:pt-2 border-t border-gray-100",children:[s.jsx(Rd,{className:"h-2.5 w-2.5 md:h-3.5 md:w-3.5 flex-shrink-0 text-gray-400"}),s.jsx("span",{className:"truncate",children:t.audit_lead_name||t.audit_lead_email.split("@")[0]})]})]})]})})},W9=({id:t,title:e,plans:n,onCardClick:r})=>{const{setNodeRef:i,isOver:a}=Xy({id:t}),o=Bd(e),c=o.icon;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"md:hidden space-y-1.5",children:[s.jsxs("div",{className:`
                    bg-gradient-to-r ${o.headerGradient}
                    rounded-md px-2.5 py-1.5
                    shadow-sm
                    flex items-center justify-between
                `,children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(c,{className:"h-3 w-3 text-white"}),s.jsx("h3",{className:"font-semibold text-[11px] text-white leading-tight",children:e})]}),s.jsx("span",{className:`
                        ${o.dotColor} text-white text-[10px] font-bold
                        px-1.5 py-0.5 rounded-full min-w-[18px] text-center
                    `,children:n.length})]}),s.jsx("div",{ref:i,className:`
                        overflow-x-auto pb-1.5 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent
                        ${a?"ring-2 ring-offset-1 ring-indigo-300/60 bg-indigo-50/20":""}
                    `,style:{minHeight:"120px",touchAction:"manipulation"},children:s.jsx("div",{className:"flex gap-2 min-w-max",children:n.length===0?s.jsx("div",{className:"flex items-center justify-center w-full h-24 text-gray-400",children:s.jsxs("div",{className:"text-center",children:[s.jsx(c,{className:"h-6 w-6 text-gray-300 mx-auto mb-1"}),s.jsx("p",{className:"text-[10px] font-medium",children:"No audits"})]})}):s.jsx(Vx,{items:n.map(u=>u.id),strategy:Hx,children:s.jsx("div",{className:"flex gap-2",children:n.map(u=>s.jsx($x,{plan:u,onClick:()=>r(u)},u.id))})})})})]}),s.jsxs("div",{ref:i,className:`
                    hidden md:flex
                    flex-shrink-0 md:flex-1 md:min-w-[320px] md:w-auto h-auto self-start
                    bg-gradient-to-b from-gray-50/40 to-white
                    rounded-xl p-4 flex flex-col
                    border border-gray-200/40
                    transition-all duration-200 ease-out
                    min-h-[600px]
                    ${a?"ring-2 ring-offset-2 ring-indigo-300/60 shadow-xl scale-[1.01] bg-gradient-to-b from-indigo-50/30 to-white":""}
                `,children:[s.jsxs("div",{className:`
                    bg-gradient-to-r ${o.headerGradient}
                    rounded-lg px-4 py-3 mb-4
                    shadow-sm backdrop-blur-sm
                    flex items-center justify-between
                    group
                    transition-all duration-300
                    pointer-events-none
                `,children:[s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx(c,{className:"h-4.5 w-4.5 text-white"}),s.jsx("h3",{className:"font-semibold text-base text-white",children:e})]}),s.jsx("span",{className:`
                        ${o.dotColor} text-white text-xs font-bold
                        px-2.5 py-1 rounded-full
                        min-w-[28px] text-center
                        shadow-sm
                        transition-all duration-200
                        ${n.length>0?"scale-110":"scale-100"}
                    `,children:n.length})]}),s.jsx("div",{className:"overflow-x-hidden pr-1 flex-1 relative",style:{minHeight:"100%"},children:n.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-gray-400",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-2",children:s.jsx(c,{className:"h-6 w-6 text-gray-300"})}),s.jsx("p",{className:"text-xs font-medium",children:"No audits"})]}):s.jsx(Vx,{items:n.map(u=>u.id),strategy:Hx,children:n.map(u=>s.jsx($x,{plan:u,onClick:()=>r(u)},u.id))})})]})]})},H9=({status:t,plans:e,isExpanded:n,onToggle:r,onCardClick:i,onLongPress:a,overId:o})=>{const{setNodeRef:c}=Xy({id:t}),u=Bd(t),f=u.icon;return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[s.jsxs("button",{onClick:r,className:`
                    w-full flex items-center justify-between p-3
                    bg-gradient-to-r ${u.headerGradient}
                    transition-all duration-200
                `,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(f,{className:"h-4 w-4 text-white"}),s.jsx("h3",{className:"font-semibold text-sm text-white",children:t}),s.jsx(tt,{variant:"default",className:"text-xs px-2 py-0.5 bg-white/20 text-white border-white/40",children:e.length})]}),s.jsx(Ry,{className:`h-4 w-4 text-white transition-transform duration-200 ${n?"":"-rotate-90"}`})]}),n&&s.jsx("div",{ref:c,className:`
                        p-2 min-h-[120px] transition-colors duration-200
                        ${o===t?"bg-blue-50 ring-2 ring-inset ring-blue-300":"bg-gray-50"}
                    `,children:e.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-24 text-gray-400",children:[s.jsx(f,{className:"h-8 w-8 text-gray-300 mb-1"}),s.jsx("p",{className:"text-xs font-medium",children:"No audits"})]}):s.jsx(Vx,{items:e.map(h=>h.id),strategy:Hx,children:e.map(h=>s.jsx($x,{plan:h,onClick:()=>i(h),onLongPress:a},h.id))})})]})},V9=t=>{const{active:e,droppableContainers:n}=t,r=e.rect.current.translated;if(!r)return[];const i=r.width*r.height,a=n.map(o=>{const c=o.rect.current;if(!c)return null;const u=Math.max(r.left,c.left),f=Math.min(r.right,c.right),h=Math.max(r.top,c.top),p=Math.min(r.bottom,c.bottom);if(u>=f||h>=p)return null;const x=(f-u)*(p-h)/i;return x>=.5?{id:o.id,data:{droppableContainer:o,value:x}}:null}).filter(o=>o!==null);return a.sort((o,c)=>{var u,f;return(((u=c.data)==null?void 0:u.value)||0)-(((f=o.data)==null?void 0:f.value)||0)}),a.length===0?c4(t):a},$9=({plans:t,onStatusChange:e,onView:n})=>{const[r,i]=jt.useState(null),[a,o]=jt.useState(null),[c,u]=jt.useState(ud.reduce((A,O)=>({...A,[O]:!0}),{})),[f,h]=jt.useState(null),[p,m]=jt.useState(!1),x=fI(f0(Ky,{activationConstraint:{distance:5}}),f0(b4),f0($y,{coordinateGetter:q9})),v=A=>{u(O=>({...O,[A]:!O[A]}))},b=A=>{typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50),h(A),m(!0)},y=A=>{f&&e(f.id,A),m(!1),h(null)},w=A=>{i(A.active.id),typeof window<"u"&&typeof document<"u"&&window.innerWidth<768&&(document.body.style.overflow="hidden")},k=A=>{A.over?o(A.over.id):o(null)},N=A=>{const{active:O,over:M}=A,z=(M==null?void 0:M.id)||a;z&&O.id!==z&&ud.includes(z)&&e(O.id,z),i(null),o(null),typeof window<"u"&&typeof document<"u"&&window.innerWidth<768&&(document.body.style.overflow="")},j=L.useMemo(()=>r?t.find(A=>A.id===r):null,[r,t]),S=j?Bd(j.status):null;return s.jsxs(c9,{sensors:x,collisionDetection:V9,onDragStart:w,onDragOver:k,onDragEnd:N,children:[s.jsxs("div",{className:"md:hidden space-y-2 px-1",children:[s.jsx("div",{className:"flex justify-center mb-3",children:s.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-gray-900/5 backdrop-blur-sm rounded-full border border-white/20 shadow-sm",children:[s.jsx("svg",{className:"w-3 h-3 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),s.jsx("span",{className:"text-[10px] font-medium text-gray-600 tracking-wide uppercase",children:"Long press to change status"})]})}),ud.map(A=>{const O=t.filter(M=>M.status===A);return s.jsx(H9,{status:A,plans:O,isExpanded:c[A]??!0,onToggle:()=>v(A),onCardClick:n,onLongPress:b,overId:a},A)})]}),s.jsx("div",{className:"hidden md:flex gap-4 items-start overflow-x-auto pb-4 px-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:ud.map(A=>s.jsx(W9,{id:A,title:A,plans:t.filter(O=>O.status===A),onCardClick:n},A))}),s.jsx(C9,{dropAnimation:{duration:300,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)"},className:"hidden md:block",children:j&&S?s.jsxs("div",{className:`
                        bg-white rounded-lg shadow-2xl border-l-4 ${S.borderColor}
                        w-[320px] rotate-1 scale-105
                        border border-gray-200
                        relative
                    `,style:{willChange:"transform"},children:[s.jsx(tt,{variant:"purple",className:"absolute top-0.5 right-0.5 text-[10px] px-2 py-1 leading-none font-bold",children:j.audit_year}),s.jsxs("div",{className:"p-3",children:[s.jsx("div",{className:"mb-2",children:s.jsx("h4",{className:"font-semibold text-sm text-gray-900 line-clamp-2 leading-tight pr-8",children:j.audit_name||j.audit_type})}),s.jsx("div",{className:`
                                text-xs font-medium mb-2.5 px-2 py-1 rounded-md inline-block
                                bg-gradient-to-r ${S.gradient} ${S.textColor}
                            `,children:j.department}),s.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-gray-500 pt-2 border-t border-gray-100",children:[s.jsx(Rd,{className:"h-3.5 w-3.5 flex-shrink-0 text-gray-400"}),s.jsx("span",{className:"truncate",children:j.audit_lead_name||j.audit_lead_email.split("@")[0]})]})]})]}):null}),p&&f&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"md:hidden fixed inset-0 bg-black/50 z-40 animate-in fade-in duration-200",onClick:()=>{m(!1),h(null)}}),s.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl shadow-2xl z-50 animate-in slide-in-from-bottom duration-300 select-none pb-safe",children:s.jsxs("div",{className:"p-4 pb-8",children:[s.jsx("div",{className:"w-10 h-1 bg-gray-200 rounded-full mx-auto mb-3"}),s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-0.5",children:"Change Status"}),s.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-1 px-4",children:f.audit_name||f.audit_type})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:ud.map(A=>{const O=Bd(A),M=O.icon,z=f.status===A,I=O.borderColor.split("-")[2],D=()=>{switch(I){case"blue":return z?"bg-blue-500 text-white shadow-blue-200":"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100";case"amber":return z?"bg-amber-500 text-white shadow-amber-200":"bg-amber-50 text-amber-700 border-amber-200 hover:bg-amber-100";case"orange":return z?"bg-orange-500 text-white shadow-orange-200":"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100";case"indigo":return z?"bg-indigo-500 text-white shadow-indigo-200":"bg-indigo-50 text-indigo-700 border-indigo-200 hover:bg-indigo-100";case"emerald":return z?"bg-emerald-500 text-white shadow-emerald-200":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100";default:return z?"bg-gray-800 text-white":"bg-gray-50 text-gray-700 border-gray-200"}};return s.jsxs("button",{onClick:()=>y(A),className:`
                                                relative flex flex-col items-center justify-center p-2 rounded-xl transition-all duration-200
                                                border ${z?"border-transparent scale-[1.02] shadow-lg ring-2 ring-offset-1 ring-transparent":"border"}
                                                ${D()}
                                            `,children:[s.jsx("div",{className:`
                                                mb-1.5 p-1.5 rounded-full
                                                ${z?"bg-white/20":"bg-white/60"}
                                            `,children:s.jsx(M,{className:"h-4 w-4"})}),s.jsx("span",{className:"text-[10px] font-bold text-center leading-tight",children:A}),z&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-white text-green-600 rounded-full p-0.5 shadow-sm ring-1 ring-black/5",children:s.jsx(y5,{className:"h-3 w-3"})})]},A)})})]})})]})]})},Y9=({plans:t,onView:e,onCreate:n})=>{const[r,i]=L.useState("month"),[a,o]=L.useState(new Date),[c,u]=L.useState(null),[f,h]=L.useState(null),[p,m]=L.useState(!1),[x,v]=L.useState(new Date),b=L.useRef(null);L.useEffect(()=>{v(a)},[a]);const y={next:()=>{o(r==="week"?N5(a,1):r==="month"?Iy(a,1):S5(a,1))},prev:()=>{o(r==="week"?RR(a):r==="month"?PR(a):IR(a))}},w=()=>o(new Date),k=()=>{if(r==="week"){const X=Ka(a,{weekStartsOn:1}),J=n0(a,{weekStartsOn:1});return{start:X,end:J}}else if(r==="month"){const X=Dw(a),J=Rx(X),K=Ka(X,{weekStartsOn:1}),W=n0(J,{weekStartsOn:1});return{start:K,end:W}}else{const X=A5(a),J=bP(a);return{start:X,end:J}}},{start:N,end:j}=k(),S=r==="year"?vP({start:N,end:j}):Tw({start:N,end:j}),A=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],O=X=>{r!=="year"&&(m(!0),u(Yi(X)),h(Yi(X)))},M=X=>{if(p&&c){const J=Yi(X);J<c?(u(J),h(c)):h(J)}},z=()=>{if(p&&c&&f&&n){const X=c<f?c:f,J=c<f?f:c;Lw(J,X)>=0&&n(vs(X,"yyyy-MM-dd"),vs(J,"yyyy-MM-dd"))}m(!1),u(null),h(null)};L.useEffect(()=>{const X=()=>{p&&z()};return document.addEventListener("mouseup",X),()=>document.removeEventListener("mouseup",X)},[p,c,f,n]);const I=t,D=X=>I.filter(J=>{if(!J.start_date)return!1;const K=new Date(J.start_date);let W;if(J.end_date)W=new Date(J.end_date);else if(J.audit_duration_weeks)W=new Date(K.getTime()+J.audit_duration_weeks*7*24*60*60*1e3);else return _a(X,K);return vR(X,{start:K,end:W})}),T=X=>{if(!c||!f)return!1;const J=Yi(X),K=c<f?c:f,W=c<f?f:c;return J>=K&&J<=W},q=X=>{if(!c||!f)return null;const J=Yi(X),K=c<f?c:f,W=c<f?f:c;if(J<K||J>W)return null;const R=_a(J,K),U=_a(J,W);return{isStart:R,isEnd:U,isMiddle:!R&&!U}},H=()=>{if(!c||!f)return null;const X=c<f?c:f,J=c<f?f:c;return Lw(J,X)+1},G=["Planned","Fieldwork","Pre Closing Meeting","Closing Meeting","Completed"],ee=X=>{switch(X){case"Planned":return"bg-blue-100 text-blue-700 border-blue-200";case"Fieldwork":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"Pre Closing Meeting":return"bg-orange-100 text-orange-700 border-orange-200";case"Closing Meeting":return"bg-purple-100 text-purple-700 border-purple-200";case"Completed":return"bg-green-100 text-green-700 border-green-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return s.jsxs("div",{className:"flex flex-col h-full bg-white rounded-lg shadow-sm border border-gray-200 relative",style:{minHeight:0},children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6 px-3 md:px-0",children:[s.jsxs("div",{className:"flex items-center justify-between md:justify-start md:gap-4 w-full md:w-auto",children:[s.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-900 md:ml-1",children:vs(a,"MMMM yyyy")}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:y.prev,className:"p-1.5 rounded-full hover:bg-gray-100 text-gray-600 transition-colors active:scale-95",children:s.jsx(RD,{className:"h-5 w-5"})}),s.jsx("button",{onClick:y.next,className:"p-1.5 rounded-full hover:bg-gray-100 text-gray-600 transition-colors active:scale-95",children:s.jsx(Cw,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[s.jsx("div",{className:"flex items-center gap-2.5",children:G.map(X=>{const W=ee(X).split(" ").find(R=>R.startsWith("bg-"))||"bg-gray-100";return s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:`w-3.5 h-3.5 rounded ${W} border-2 border-gray-400 shadow-sm`}),s.jsx("span",{className:"text-[10px] font-medium text-gray-700",children:X})]},X)})}),s.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2"}),s.jsx("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:["week","month","year"].map(X=>s.jsx("button",{onClick:()=>i(X),className:`
                                    px-4 py-1.5 rounded-md text-sm font-medium transition-all
                                    ${r===X?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-900"}
                                `,children:X.charAt(0).toUpperCase()+X.slice(1)},X))}),s.jsx(ze,{variant:"outline",size:"sm",onClick:w,children:"Today"})]})]}),r==="year"?s.jsx("div",{className:"grid grid-cols-4 gap-4 p-4 flex-1 overflow-y-auto",children:S.map(X=>{const J=Dw(X),K=Rx(J),W=Ka(J,{weekStartsOn:1}),R=n0(K,{weekStartsOn:1}),U=Tw({start:W,end:R});return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 bg-white",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2 text-center",children:vs(X,"MMMM yyyy")}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[A.map(B=>s.jsx("div",{className:"text-[9px] text-center text-gray-500 font-medium py-1",children:B[0]},B)),U.map(B=>{const Q=_a(B,new Date),Z=s0(B,X),$=D(B);return s.jsxs("div",{className:`
                                                    text-[10px] p-0.5 min-h-[20px] rounded
                                                    ${Z?Q?"bg-indigo-100 text-indigo-700 font-semibold":"text-gray-600":"text-gray-300"}
                                                    ${T(B)?"bg-indigo-200":""}
                                                `,children:[s.jsx("div",{className:"text-center",children:vs(B,"d")}),$.length>0&&s.jsx("div",{className:"w-full h-1 bg-indigo-400 rounded mt-0.5"})]},B.toString())})]})]},X.toString())})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden md:grid grid-cols-7 border-b border-gray-200 bg-gray-50",children:A.map(X=>s.jsx("div",{className:"py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:X},X))}),s.jsxs("div",{ref:b,className:"hidden md:grid grid-cols-7 flex-1 overflow-y-auto overflow-x-hidden relative border border-gray-300",style:{minHeight:0,gridAutoRows:"minmax(120px, 1fr)"},children:[p&&c&&f&&s.jsxs("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 z-20 bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-4 py-2 rounded-full shadow-xl text-sm font-semibold backdrop-blur-sm",children:[H()," day",H()!==1?"s":""," selected"]}),S.map(X=>{const J=D(X),K=_a(X,new Date),W=r==="month"?s0(X,a):!0,R=q(X),U=!!R;return s.jsxs("div",{onMouseDown:()=>O(X),onMouseEnter:()=>M(X),className:`
                                        min-h-[120px] border border-gray-300 p-1.5 transition-all duration-200 relative select-none
                                        ${W?"bg-white":"bg-gray-50/30 text-gray-400"}
                                        ${U?"bg-gradient-to-br from-indigo-50 to-purple-50":p?"hover:bg-indigo-50/50":"hover:bg-gray-50"}
                                        ${p?"cursor-crosshair":"cursor-pointer"}
                                        overflow-hidden flex flex-col
                                        z-0
                                    `,children:[R&&s.jsx("div",{className:`
                                            absolute inset-0 pointer-events-none
                                            ${R.isStart?"border-l-4 border-indigo-500 rounded-l":""}
                                            ${R.isEnd?"border-r-4 border-indigo-500 rounded-r":""}
                                            ${R.isMiddle?"border-y-2 border-indigo-300":""}
                                        `}),s.jsxs("div",{className:"flex justify-between items-start mb-1 relative z-10 flex-shrink-0",children:[s.jsx("span",{className:`
                                            text-sm font-medium w-7 h-7 flex items-center justify-center rounded-full transition-all select-none
                                            ${K&&!U?"bg-indigo-600 text-white":""}
                                            ${U?R!=null&&R.isStart||R!=null&&R.isEnd?"bg-indigo-500 text-white ring-2 ring-indigo-300 ring-offset-1":"bg-indigo-100 text-indigo-700":""}
                                        `,children:vs(X,"d")}),J.length>0&&s.jsx("span",{className:"text-[9px] font-medium text-gray-500 bg-gray-100 px-1.5 py-0.5 rounded-full",children:J.length})]}),s.jsxs("div",{className:"relative flex-1 min-h-0 overflow-hidden flex-shrink",children:[s.jsx("div",{className:"flex flex-wrap gap-1 overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100 relative z-10",style:{maxHeight:"100%"},ref:B=>{if(B){const Q=()=>{var ce;const $=B.scrollHeight>B.clientHeight,ne=B.scrollHeight-B.scrollTop<=B.clientHeight+1,ae=(ce=B.parentElement)==null?void 0:ce.querySelector(".scroll-indicator");ae&&(ae.style.opacity=$&&!ne?"1":"0")};B.addEventListener("scroll",Q),setTimeout(Q,0),new ResizeObserver(Q).observe(B)}},children:J.map(B=>{const Z=ee(B.status).split(" "),$=Z.find(ce=>ce.startsWith("bg-"))||"bg-gray-100",ne=Z.find(ce=>ce.startsWith("text-"))||"text-gray-700",ae=Z.find(ce=>ce.startsWith("border-"))||"border-gray-200";return s.jsxs("div",{onClick:ce=>{ce.stopPropagation(),e(B)},className:`
                                                        text-[9px] px-1 py-0.5 rounded border-l-3 border cursor-pointer
                                                        ${$} ${ne} ${ae}
                                                        hover:shadow-md hover:scale-[1.01] transition-all
                                                        group relative
                                                        shadow-sm
                                                        flex-shrink-0
                                                        min-w-[120px] max-w-[48%]
                                                        overflow-visible
                                                    `,style:{borderLeftWidth:"3px",borderTopWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"1px"},title:`${B.audit_name||B.audit_type} - ${B.audit_lead_name||B.audit_lead_email.split("@")[0]} - ${B.status}`,children:[s.jsx("div",{className:"absolute -top-1 -right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-[9999] pointer-events-none",children:s.jsx("span",{className:`
                                                            text-[8px] font-semibold px-1.5 py-0.5 rounded-full
                                                            ${$} ${ne} border ${ae}
                                                            shadow-lg whitespace-nowrap
                                                            block
                                                            bg-white
                                                        `,children:B.status})}),s.jsxs("div",{className:"flex items-center justify-between gap-1",children:[s.jsx("div",{className:`font-semibold text-[10px] truncate flex-1 min-w-0 ${ne}`,children:B.audit_name||B.audit_type}),s.jsxs("div",{className:`flex items-center gap-0.5 text-[8px] ${ne} opacity-80 flex-shrink-0`,children:[s.jsx(Rd,{className:"h-2 w-2 flex-shrink-0 opacity-70"}),s.jsx("span",{className:"truncate max-w-[35px]",children:B.audit_lead_name||B.audit_lead_email.split("@")[0]})]})]})]},B.id)})}),s.jsx("div",{className:"scroll-indicator absolute bottom-0 left-0 right-0 h-4 bg-gradient-to-t from-white to-transparent pointer-events-none z-20 opacity-0 transition-opacity duration-200"})]})]},X.toString())})]}),s.jsxs("div",{className:"md:hidden flex flex-col h-full bg-white",children:[s.jsx("div",{className:"grid grid-cols-7 border-b border-gray-100 bg-gray-50",children:A.map(X=>s.jsx("div",{className:"py-2 text-center text-[10px] font-semibold text-gray-400 uppercase",children:X[0]},X))}),s.jsx("div",{className:"grid grid-cols-7 border-gray-200",children:S.map(X=>{const J=D(X),K=_a(X,new Date),W=s0(X,a),R=_a(X,x);return s.jsxs("div",{onClick:()=>v(X),className:`
                                            aspect-square border-b border-r border-gray-50 relative flex flex-col items-center justify-center cursor-pointer transition-colors
                                            ${W?"bg-white text-gray-700":"bg-gray-50/30 text-gray-300"}
                                            ${R?"bg-indigo-50 ring-inset ring-2 ring-indigo-500 z-10":""}
                                        `,children:[s.jsx("span",{className:`
                                            text-xs font-medium w-6 h-6 flex items-center justify-center rounded-full mb-0.5
                                            ${K?"bg-indigo-600 text-white":""}
                                            ${R&&!K?"text-indigo-700 font-bold":""}
                                        `,children:vs(X,"d")}),s.jsxs("div",{className:"flex gap-0.5 h-1.5 px-1 justify-center w-full",children:[J.slice(0,3).map((U,B)=>{const Z=ee(U.status).split(" ").find($=>$.startsWith("bg-"))||"bg-gray-400";return s.jsx("div",{className:`w-1 h-1 rounded-full ${Z}`},B)}),J.length>3&&s.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-300"})]})]},X.toString())})}),s.jsxs("div",{className:"flex-1 overflow-y-auto bg-white px-3 pt-3 pb-4",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsx("h3",{className:"text-xs font-bold text-gray-900",children:vs(x,"EEEE, d MMMM")}),_a(x,new Date)&&s.jsx("span",{className:"text-[9px] font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded-full",children:"TODAY"})]}),D(x).length===0?s.jsx("div",{className:"flex flex-col items-center justify-center h-24 text-gray-400",children:s.jsx("p",{className:"text-[10px] font-medium",children:"No audits planned"})}):s.jsx("div",{className:"space-y-2",children:D(x).map(X=>{const K=ee(X.status).split(" "),W=K.find(U=>U.startsWith("bg-"))||"bg-gray-100",R=K.find(U=>U.startsWith("text-"))||"text-gray-700";return s.jsxs("div",{onClick:()=>e(X),className:"group flex items-center gap-2 p-2 active:bg-gray-50 transition-colors cursor-pointer",children:[s.jsx("div",{className:`flex-shrink-0 w-1.5 h-8 rounded-full ${W.replace("bg-","bg-").replace("100","500").replace("200","500")}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-1.5 mb-0.5",children:[s.jsx("h4",{className:"text-[11px] font-semibold text-gray-900 leading-tight line-clamp-1",children:X.audit_name||X.audit_type}),s.jsx("span",{className:`flex-shrink-0 text-[8px] font-bold px-1.5 py-0.5 rounded ${W} ${R}`,children:X.status})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500",children:[s.jsx(Rd,{className:"h-2.5 w-2.5 text-gray-400 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:X.audit_lead_name||X.audit_lead_email.split("@")[0]})]})]}),s.jsx(Cw,{className:"h-3 w-3 text-gray-300 group-active:text-gray-400 transition-colors flex-shrink-0"})]},X.id)})})]})]})]})]})},K9=({plans:t,selectedLeads:e,onLeadsChange:n})=>{const[r,i]=L.useState(new Set(["all"])),a=e||r,o=L.useMemo(()=>{const f=new Set;return t.forEach(h=>{const p=h.audit_lead_name;p&&p.trim()&&f.add(p.trim())}),Array.from(f).sort()},[t]),c=f=>{if(n){const h=new Set(a);f==="all"?h.has("all")?(h.clear(),o.length>0&&o[0]&&h.add(o[0])):(h.clear(),h.add("all")):(h.delete("all"),h.has(f)?(h.delete(f),h.size===0&&h.add("all")):(h.add(f),h.size===o.length&&(h.clear(),h.add("all")))),n(h)}else i(h=>{const p=new Set(h);return f==="all"?p.has("all")?(p.clear(),o.length>0&&o[0]&&p.add(o[0])):(p.clear(),p.add("all")):(p.delete("all"),p.has(f)?(p.delete(f),p.size===0&&p.add("all")):(p.add(f),p.size===o.length&&(p.clear(),p.add("all")))),p})},u=f=>a.has("all")?!0:a.has(f);return s.jsxs("div",{className:"flex items-center gap-1.5 bg-white/95 backdrop-blur-sm px-1.5 py-1 rounded-lg border border-gray-200 shadow-sm overflow-x-auto max-w-[200px] md:max-w-none no-scrollbar",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium whitespace-nowrap mr-0.5",children:"Lead:"}),s.jsx("button",{onClick:()=>c("all"),className:`
                    flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-[9px] font-bold transition-all border
                    ${a.has("all")?"bg-indigo-600 text-white border-indigo-600 ring-1 ring-indigo-200":"bg-gray-50 text-gray-500 border-gray-200 hover:bg-gray-100"}
                `,title:"All Leads",children:"ALL"}),o.map(f=>{const h=f.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2),p=u(f)&&!a.has("all");return s.jsx("button",{onClick:()=>c(f),className:`
                            flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-[9px] font-bold transition-all border
                            ${p?"bg-indigo-100 text-indigo-700 border-indigo-200 ring-1 ring-indigo-200":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}
                        `,title:f,children:h},f)})]})},G9=["Technology Audit","Process Audit","Financial Audit"],X9=["Critical Deficiency","Significant Improvement","Moderate Improvement Potential","Limited Improvement Potential","Good"],Q9=({initialData:t,onSubmit:e,onCancel:n,isOpen:r})=>{var D;const[i,a]=L.useState({audit_year:new Date().getFullYear(),audit_type:"",audit_name:"",audit_lead_name:"",audit_lead_email:"",business_unit:"",department:"",process:"",start_date:"",end_date:"",audit_duration_weeks:void 0,report_release_date:"",audit_report_rating:"",status:"Planned"}),[o,c]=L.useState([]),[u,f]=L.useState(!0),[h,p]=L.useState({}),[m,x]=L.useState([]),[v,b]=L.useState([]),[y,w]=L.useState([]),[k,N]=L.useState(!1),[j,S]=L.useState(!1),[A,O]=L.useState(!1);if(L.useEffect(()=>{r&&(async()=>{try{f(!0);const q=await Vn.get("/api/users/by-role?roles=admin,team_manager");c(q.data.data||[])}catch(q){console.error("Error fetching users:",q),c([])}finally{f(!1)}})()},[r]),L.useEffect(()=>{r&&(async()=>{try{N(!0);const q=await Ot.getDropdownOptionsFull("business_unit");x(q||[])}catch(q){console.error("Error fetching business units:",q),x([])}finally{N(!1)}})()},[r]),L.useEffect(()=>{r&&(async()=>{try{S(!0);const q=await Ot.getDropdownOptionsFull("department");b(q||[])}catch(q){console.error("Error fetching departments:",q),b([])}finally{S(!1)}})()},[r]),L.useEffect(()=>{r&&(async()=>{if(!i.department){w([]);return}try{O(!0);const q=await Ot.getDropdownOptionsByParent("process",i.department);w(q||[])}catch(q){console.error("Error fetching processes:",q),w([])}finally{O(!1)}})()},[i.department,r]),L.useEffect(()=>{if(i.start_date&&i.end_date){const T=new Date(i.start_date),q=new Date(i.end_date);if(T<=q){const H=Math.abs(q.getTime()-T.getTime()),G=Math.ceil(H/(1e3*60*60*24)),ee=Math.ceil(G/7);a(X=>({...X,audit_duration_weeks:ee}))}}},[i.start_date,i.end_date]),L.useEffect(()=>{r&&(t&&t.id?a({...t,business_unit:t.business_unit||"",department:t.department||"",process:t.process||"",report_release_date:t.report_release_date?t.report_release_date.split("T")[0]:"",start_date:t.start_date?t.start_date.split("T")[0]:"",end_date:t.end_date?t.end_date.split("T")[0]:""}):a(t?T=>({...T,audit_year:t.audit_year||T.audit_year||new Date().getFullYear(),start_date:t.start_date?t.start_date.split("T")[0]:T.start_date||"",end_date:t.end_date?t.end_date.split("T")[0]:T.end_date||""}):{audit_year:new Date().getFullYear(),audit_type:"",audit_name:"",audit_lead_name:"",audit_lead_email:"",business_unit:"",department:"",process:"",start_date:"",end_date:"",audit_duration_weeks:void 0,report_release_date:"",audit_report_rating:"",status:"Planned"}))},[t==null?void 0:t.id,t==null?void 0:t.start_date,t==null?void 0:t.end_date,r]),!r)return null;const M=(T,q)=>{a(H=>{const G={...H,[T]:q};if(T==="department"&&(G.process=""),T==="audit_lead_email"){const ee=o.find(X=>X.email===q);ee&&(G.audit_lead_name=ee.name,G.audit_lead_email=ee.email)}return G}),h[T]&&p(H=>{const G={...H};return delete G[T],G})},z=()=>{const T={};if(i.audit_year||(T.audit_year="Year is required"),i.audit_type||(T.audit_type="Type is required"),i.audit_name||(T.audit_name="Audit name is required"),i.audit_lead_email||(T.audit_lead_email="Audit lead is required"),i.business_unit||(T.business_unit="Business Unit is required"),i.department||(T.department="Department is required"),i.process||(T.process="Process is required"),i.start_date&&i.end_date){const q=new Date(i.start_date),H=new Date(i.end_date);q>H&&(T.end_date="End date must be after start date")}return p(T),Object.keys(T).length===0},I=T=>{if(T.preventDefault(),z()){const q={};for(const[H,G]of Object.entries(i))G!==void 0&&(G===""&&["report_release_date","audit_report_rating"].includes(H)||H==="audit_duration_weeks"&&G===null||(q[H]=G));e(q)}};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-t-xl",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:t!=null&&t.id?"Edit Audit Detail":"Create Audit"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Fill in the details below to ",t!=null&&t.id?"update":"create"," an audit."]})]}),s.jsx("button",{onClick:n,className:"p-2 hover:bg-white/50 rounded-full transition-colors",children:s.jsx(v5,{className:"h-5 w-5 text-gray-500"})})]}),s.jsxs("form",{onSubmit:I,className:"p-4 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsx("div",{className:"space-y-1",children:s.jsx(Yt,{label:"Audit Year",required:!0,value:((D=i.audit_year)==null?void 0:D.toString())||new Date().getFullYear().toString(),onChange:T=>M("audit_year",parseInt(T.target.value)),options:[2023,2024,2025,2026,2027].map(T=>({value:T,label:T.toString()})),error:h.audit_year})}),s.jsx("div",{className:"space-y-1",children:s.jsx(Yt,{label:"Audit Type",required:!0,value:i.audit_type,onChange:T=>M("audit_type",T.target.value),options:[{value:"",label:"Select Type",disabled:!0},...G9.map(T=>({value:T,label:T}))],error:h.audit_type})}),s.jsx("div",{className:"space-y-1",children:s.jsx(Yt,{label:"Audit Lead",required:!0,value:i.audit_lead_email,onChange:T=>M("audit_lead_email",T.target.value),options:[{value:"",label:u?"Loading...":"Select Audit Lead",disabled:!0},...o.map(T=>({value:T.email,label:`${T.name} (${T.role_name})`}))],error:h.audit_lead_email,disabled:u})}),s.jsx("div",{className:"space-y-1 md:col-span-3",children:s.jsx(Tn,{label:"Audit Name",required:!0,type:"text",value:i.audit_name,onChange:T=>M("audit_name",T.target.value),placeholder:"e.g. Q1 Technology Security Audit",error:h.audit_name})}),s.jsx("div",{className:"space-y-1",children:s.jsx(Yt,{label:"Business Unit",required:!0,value:i.business_unit||"",onChange:T=>M("business_unit",T.target.value),disabled:k,options:[{value:"",label:k?"Loading...":"Select Business Unit",disabled:!0},...m.filter(T=>T.is_active!==!1).sort((T,q)=>(T.display_order||0)-(q.display_order||0)).map(T=>({value:T.option_value,label:T.option_value}))],error:h.business_unit})}),s.jsx("div",{className:"space-y-1",children:s.jsx(Yt,{label:"Department",required:!0,value:i.department||"",onChange:T=>M("department",T.target.value),disabled:j,options:[{value:"",label:j?"Loading...":"Select Department",disabled:!0},...v.filter(T=>T.is_active!==!1).sort((T,q)=>(T.display_order||0)-(q.display_order||0)).map(T=>({value:T.option_value,label:T.option_value}))],error:h.department})}),s.jsx("div",{className:"space-y-1",children:s.jsx(Yt,{label:"Process",required:!0,value:i.process||"",onChange:T=>M("process",T.target.value),disabled:!i.department||A,options:[{value:"",label:A?"Loading...":"Select Process",disabled:!0},...y.filter(T=>T.is_active!==!1).sort((T,q)=>(T.display_order||0)-(q.display_order||0)).map(T=>({value:T.option_value,label:T.option_value}))],error:h.process})}),s.jsx("div",{className:"space-y-1",children:s.jsx(Tn,{label:"Start Date",type:"date",value:i.start_date,onChange:T=>M("start_date",T.target.value),error:h.start_date})}),s.jsx("div",{className:"space-y-1",children:s.jsx(Tn,{label:"End Date",type:"date",value:i.end_date,onChange:T=>M("end_date",T.target.value),error:h.end_date})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Tn,{label:"Duration (Weeks)",type:"number",min:"1",value:i.audit_duration_weeks||"",onChange:T=>M("audit_duration_weeks",parseInt(T.target.value)),placeholder:"Auto-calculated",disabled:!!(i.start_date&&i.end_date)}),i.start_date&&i.end_date&&s.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Auto-calculated from dates"})]}),s.jsx("div",{className:"space-y-1",children:s.jsx(Tn,{label:"Report Release Date",type:"date",value:i.report_release_date,onChange:T=>M("report_release_date",T.target.value)})}),s.jsx("div",{className:"space-y-1",children:s.jsx(Yt,{label:"Report Rating",value:i.audit_report_rating,onChange:T=>M("audit_report_rating",T.target.value),options:[{value:"",label:"Select Rating",disabled:!0},...X9.map(T=>({value:T,label:T}))]})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-3 border-t border-gray-100 mt-3",children:[s.jsx(ze,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),s.jsx(ze,{type:"submit",variant:"primary",children:t!=null&&t.id?"Save Changes":"Create Audit"})]})]})]})})},Z9=()=>{const[t,e]=L.useState("progress"),[n,r]=L.useState(new Date().getFullYear()),[i,a]=L.useState(!1),[o,c]=L.useState(void 0),[u,f]=L.useState(void 0),[h,p]=L.useState(null),[m,x]=L.useState(void 0),[v,b]=L.useState(new Set(["all"])),[y,w]=L.useState(!1),[k,N]=L.useState(!1),[j,S]=L.useState(null),[A,O]=L.useState([]),[M,z]=L.useState([]),[I,D]=L.useState(!1),T=L.useRef(""),q=L.useRef(null),{data:H=[],isLoading:G,error:ee}=Py(n.toString());L.useEffect(()=>{const ae=JSON.stringify(H.map(ce=>({id:ce.id,status:ce.status})));ae!==T.current&&(T.current=ae,p(H))},[H]),L.useEffect(()=>{p(null),T.current=""},[n]),L.useEffect(()=>{const ae=ce=>{q.current&&!q.current.contains(ce.target)&&w(!1)};if(y)return document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae)}},[y]),L.useEffect(()=>{const ae=ce=>{ce.key==="Escape"&&(i&&(a(!1),c(void 0),x(void 0)),u&&f(void 0))};return window.addEventListener("keydown",ae),()=>window.removeEventListener("keydown",ae)},[i,u]);const X=_D(),J=kD(),K=ND(),W=async ae=>{try{const ce=await X.mutateAsync(ae);p(ye=>ye?[...ye,ce]:[ce]),a(!1)}catch(ce){console.error("Failed to create plan:",ce)}},R=async ae=>{if(o){p(ce=>ce?ce.map(ye=>ye.id===o.id?{...ye,...ae}:ye):null),u&&u.id===o.id&&f({...u,...ae});try{await J.mutateAsync({id:o.id,updates:ae}),c(void 0),a(!1)}catch(ce){if(console.error("Failed to update plan:",ce),p(H),u&&u.id===o.id){const ye=H.find(Be=>Be.id===o.id);ye&&f(ye)}}}},U=async(ae,ce)=>{p(ye=>ye?ye.map(Be=>Be.id===ae?{...Be,status:ce}:Be):null);try{await K.mutateAsync({id:ae,status:ce})}catch(ye){console.error("Failed to update status:",ye),p(H)}},Q=L.useMemo(()=>{const ae=h||H;return v.has("all")?ae:ae.filter(ce=>{const ye=ce.audit_lead_name;return ye&&ye.trim()&&v.has(ye.trim())})},[h,H,v]),Z=ae=>{r(ae),w(!1)},[$,ne]=L.useState([]);return L.useEffect(()=>{(async()=>{try{const ye=(await Ot.getDropdownOptions("audit_year")).map(Be=>parseInt(Be)).filter(Be=>!isNaN(Be)).sort((Be,Ue)=>Ue-Be);ne(ye.length>0?ye:[new Date().getFullYear()])}catch(ce){console.error("Failed to fetch years:",ce),ne([new Date().getFullYear()])}})()},[]),s.jsxs("div",{className:"p-4 space-y-4 h-[calc(100vh-80px)] flex flex-col",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-base md:text-[16px] font-bold text-gray-900 leading-tight",children:"Annual Audit Plan"}),s.jsx("p",{className:"text-[10px] md:text-base text-gray-500",children:"Manage and track audit plans"})]}),s.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[s.jsxs("div",{className:"relative hidden md:block",ref:q,children:[s.jsxs("button",{onClick:()=>w(!y),className:"flex items-center gap-1 md:gap-1.5 px-1.5 md:px-3 py-0.5 md:py-1.5 bg-white border border-gray-300 rounded-md md:rounded-lg hover:border-indigo-400 hover:bg-indigo-50/30 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1 shadow-sm h-5 md:h-auto",children:[s.jsx("span",{className:"text-[10px] md:text-sm font-semibold text-gray-900",children:n}),s.jsx(Ry,{className:`h-2.5 w-2.5 md:h-3.5 md:w-3.5 text-gray-500 transition-transform duration-200 ${y?"rotate-180":""}`})]}),y&&$.length>0&&s.jsx("div",{className:"absolute top-full left-0 mt-1 w-20 md:w-28 bg-white border border-gray-200 rounded-lg shadow-lg z-50 overflow-hidden",children:$.map(ae=>s.jsx("button",{onClick:()=>Z(ae),className:`
                      w-full px-2 py-1 md:px-3 md:py-2 text-left text-[10px] md:text-sm transition-colors
                      ${n===ae?"bg-indigo-50 text-indigo-700 font-semibold":"text-gray-700 hover:bg-gray-50"}
                    `,children:ae},ae))})]}),!1,s.jsxs(ze,{onClick:()=>{c(void 0),a(!0)},className:"text-[10px] md:text-xs p-0 md:px-3 md:py-1.5 w-6 h-6 md:w-auto md:h-8 rounded-md md:rounded-lg flex items-center justify-center min-w-[24px]",children:[s.jsx(JD,{className:"h-4 w-4 md:h-3.5 md:w-3.5 md:mr-1 flex-shrink-0"}),s.jsx("span",{className:"hidden md:inline",children:"New Audit"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{className:"flex items-center space-x-0.5 md:space-x-1 bg-gray-100 p-0.5 md:p-1 rounded-lg w-fit",children:[s.jsxs("button",{onClick:()=>e("progress"),className:`p-1.5 md:p-2 rounded-md flex items-center gap-1 md:gap-2 text-xs md:text-sm font-medium transition-colors ${t==="progress"?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(QD,{className:"h-3 w-3 md:h-4 md:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Progress"})]}),s.jsxs("button",{onClick:()=>e("kanban"),className:`p-1.5 md:p-2 rounded-md flex items-center gap-1 md:gap-2 text-xs md:text-sm font-medium transition-colors ${t==="kanban"?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(GD,{className:"h-3 w-3 md:h-4 md:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Kanban"})]}),s.jsxs("button",{onClick:()=>e("calendar"),className:`p-1.5 md:p-2 rounded-md flex items-center gap-1 md:gap-2 text-xs md:text-sm font-medium transition-colors ${t==="calendar"?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(x5,{className:"h-3 w-3 md:h-4 md:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Calendar"})]})]}),(t==="calendar"||t==="progress")&&s.jsx(K9,{plans:h||H,selectedLeads:v,onLeadsChange:b})]}),s.jsx("div",{className:`flex-1 ${t==="kanban"?"md:overflow-y-auto":"md:overflow-hidden"}`,children:G?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):ee?s.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg",children:"Error loading audit plans. Please try again."}):s.jsxs(s.Fragment,{children:[t==="progress"&&s.jsx(m5,{year:n,plans:Q,onView:f,onStatusChange:U}),t==="kanban"&&s.jsx($9,{plans:Q,onStatusChange:U,onView:f}),t==="calendar"&&s.jsx(Y9,{plans:Q,onView:f,onCreate:(ae,ce)=>{c(void 0),x({startDate:ae,endDate:ce}),a(!0)}})]})}),!1,s.jsx(Q9,{isOpen:i,onCancel:()=>{a(!1),c(void 0),x(void 0)},onSubmit:o?R:W,initialData:o||(m?{audit_year:n,start_date:m.startDate,end_date:m.endDate}:{audit_year:n})}),u&&s.jsx(D5,{plan:u,onClose:()=>f(void 0),onEdit:ae=>{f(void 0),c(ae),a(!0)}})]})};var g0,bj;function J9(){if(bj)return g0;bj=1;function t(){this.__data__=[],this.size=0}return g0=t,g0}var x0,wj;function T4(){if(wj)return x0;wj=1;function t(e,n){return e===n||e!==e&&n!==n}return x0=t,x0}var y0,jj;function ep(){if(jj)return y0;jj=1;var t=T4();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return y0=e,y0}var v0,_j;function eF(){if(_j)return v0;_j=1;var t=ep(),e=Array.prototype,n=e.splice;function r(i){var a=this.__data__,o=t(a,i);if(o<0)return!1;var c=a.length-1;return o==c?a.pop():n.call(a,o,1),--this.size,!0}return v0=r,v0}var b0,kj;function tF(){if(kj)return b0;kj=1;var t=ep();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return b0=e,b0}var w0,Nj;function nF(){if(Nj)return w0;Nj=1;var t=ep();function e(n){return t(this.__data__,n)>-1}return w0=e,w0}var j0,Sj;function rF(){if(Sj)return j0;Sj=1;var t=ep();function e(n,r){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return j0=e,j0}var _0,Cj;function tp(){if(Cj)return _0;Cj=1;var t=J9(),e=eF(),n=tF(),r=nF(),i=rF();function a(o){var c=-1,u=o==null?0:o.length;for(this.clear();++c<u;){var f=o[c];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,_0=a,_0}var k0,Aj;function sF(){if(Aj)return k0;Aj=1;var t=tp();function e(){this.__data__=new t,this.size=0}return k0=e,k0}var N0,Ej;function iF(){if(Ej)return N0;Ej=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return N0=t,N0}var S0,Oj;function aF(){if(Oj)return S0;Oj=1;function t(e){return this.__data__.get(e)}return S0=t,S0}var C0,Lj;function oF(){if(Lj)return C0;Lj=1;function t(e){return this.__data__.has(e)}return C0=t,C0}var A0,Mj;function D4(){if(Mj)return A0;Mj=1;var t=typeof mf=="object"&&mf&&mf.Object===Object&&mf;return A0=t,A0}var E0,Tj;function ra(){if(Tj)return E0;Tj=1;var t=D4(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return E0=n,E0}var O0,Dj;function Qy(){if(Dj)return O0;Dj=1;var t=ra(),e=t.Symbol;return O0=e,O0}var L0,Pj;function lF(){if(Pj)return L0;Pj=1;var t=Qy(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function a(o){var c=n.call(o,i),u=o[i];try{o[i]=void 0;var f=!0}catch{}var h=r.call(o);return f&&(c?o[i]=u:delete o[i]),h}return L0=a,L0}var M0,Rj;function cF(){if(Rj)return M0;Rj=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return M0=n,M0}var T0,Ij;function np(){if(Ij)return T0;Ij=1;var t=Qy(),e=lF(),n=cF(),r="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function o(c){return c==null?c===void 0?i:r:a&&a in Object(c)?e(c):n(c)}return T0=o,T0}var D0,Fj;function P4(){if(Fj)return D0;Fj=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return D0=t,D0}var P0,zj;function R4(){if(zj)return P0;zj=1;var t=np(),e=P4(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(c){if(!e(c))return!1;var u=t(c);return u==r||u==i||u==n||u==a}return P0=o,P0}var R0,Bj;function dF(){if(Bj)return R0;Bj=1;var t=ra(),e=t["__core-js_shared__"];return R0=e,R0}var I0,qj;function uF(){if(qj)return I0;qj=1;var t=dF(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return I0=n,I0}var F0,Uj;function I4(){if(Uj)return F0;Uj=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return F0=n,F0}var z0,Wj;function fF(){if(Wj)return z0;Wj=1;var t=R4(),e=uF(),n=P4(),r=I4(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,u=o.toString,f=c.hasOwnProperty,h=RegExp("^"+u.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!n(m)||e(m))return!1;var x=t(m)?h:a;return x.test(r(m))}return z0=p,z0}var B0,Hj;function hF(){if(Hj)return B0;Hj=1;function t(e,n){return e==null?void 0:e[n]}return B0=t,B0}var q0,Vj;function jc(){if(Vj)return q0;Vj=1;var t=fF(),e=hF();function n(r,i){var a=e(r,i);return t(a)?a:void 0}return q0=n,q0}var U0,$j;function Zy(){if($j)return U0;$j=1;var t=jc(),e=ra(),n=t(e,"Map");return U0=n,U0}var W0,Yj;function rp(){if(Yj)return W0;Yj=1;var t=jc(),e=t(Object,"create");return W0=e,W0}var H0,Kj;function pF(){if(Kj)return H0;Kj=1;var t=rp();function e(){this.__data__=t?t(null):{},this.size=0}return H0=e,H0}var V0,Gj;function mF(){if(Gj)return V0;Gj=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return V0=t,V0}var $0,Xj;function gF(){if(Xj)return $0;Xj=1;var t=rp(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var o=this.__data__;if(t){var c=o[a];return c===e?void 0:c}return r.call(o,a)?o[a]:void 0}return $0=i,$0}var Y0,Qj;function xF(){if(Qj)return Y0;Qj=1;var t=rp(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return Y0=r,Y0}var K0,Zj;function yF(){if(Zj)return K0;Zj=1;var t=rp(),e="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=t&&i===void 0?e:i,this}return K0=n,K0}var G0,Jj;function vF(){if(Jj)return G0;Jj=1;var t=pF(),e=mF(),n=gF(),r=xF(),i=yF();function a(o){var c=-1,u=o==null?0:o.length;for(this.clear();++c<u;){var f=o[c];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,G0=a,G0}var X0,e_;function bF(){if(e_)return X0;e_=1;var t=vF(),e=tp(),n=Zy();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return X0=r,X0}var Q0,t_;function wF(){if(t_)return Q0;t_=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return Q0=t,Q0}var Z0,n_;function sp(){if(n_)return Z0;n_=1;var t=wF();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Z0=e,Z0}var J0,r_;function jF(){if(r_)return J0;r_=1;var t=sp();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return J0=e,J0}var eg,s_;function _F(){if(s_)return eg;s_=1;var t=sp();function e(n){return t(this,n).get(n)}return eg=e,eg}var tg,i_;function kF(){if(i_)return tg;i_=1;var t=sp();function e(n){return t(this,n).has(n)}return tg=e,tg}var ng,a_;function NF(){if(a_)return ng;a_=1;var t=sp();function e(n,r){var i=t(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return ng=e,ng}var rg,o_;function F4(){if(o_)return rg;o_=1;var t=bF(),e=jF(),n=_F(),r=kF(),i=NF();function a(o){var c=-1,u=o==null?0:o.length;for(this.clear();++c<u;){var f=o[c];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,rg=a,rg}var sg,l_;function SF(){if(l_)return sg;l_=1;var t=tp(),e=Zy(),n=F4(),r=200;function i(a,o){var c=this.__data__;if(c instanceof t){var u=c.__data__;if(!e||u.length<r-1)return u.push([a,o]),this.size=++c.size,this;c=this.__data__=new n(u)}return c.set(a,o),this.size=c.size,this}return sg=i,sg}var ig,c_;function CF(){if(c_)return ig;c_=1;var t=tp(),e=sF(),n=iF(),r=aF(),i=oF(),a=SF();function o(c){var u=this.__data__=new t(c);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,ig=o,ig}var ag,d_;function AF(){if(d_)return ag;d_=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return ag=e,ag}var og,u_;function EF(){if(u_)return og;u_=1;function t(e){return this.__data__.has(e)}return og=t,og}var lg,f_;function OF(){if(f_)return lg;f_=1;var t=F4(),e=AF(),n=EF();function r(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new t;++a<o;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,lg=r,lg}var cg,h_;function LF(){if(h_)return cg;h_=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return cg=t,cg}var dg,p_;function MF(){if(p_)return dg;p_=1;function t(e,n){return e.has(n)}return dg=t,dg}var ug,m_;function z4(){if(m_)return ug;m_=1;var t=OF(),e=LF(),n=MF(),r=1,i=2;function a(o,c,u,f,h,p){var m=u&r,x=o.length,v=c.length;if(x!=v&&!(m&&v>x))return!1;var b=p.get(o),y=p.get(c);if(b&&y)return b==c&&y==o;var w=-1,k=!0,N=u&i?new t:void 0;for(p.set(o,c),p.set(c,o);++w<x;){var j=o[w],S=c[w];if(f)var A=m?f(S,j,w,c,o,p):f(j,S,w,o,c,p);if(A!==void 0){if(A)continue;k=!1;break}if(N){if(!e(c,function(O,M){if(!n(N,M)&&(j===O||h(j,O,u,f,p)))return N.push(M)})){k=!1;break}}else if(!(j===S||h(j,S,u,f,p))){k=!1;break}}return p.delete(o),p.delete(c),k}return ug=a,ug}var fg,g_;function TF(){if(g_)return fg;g_=1;var t=ra(),e=t.Uint8Array;return fg=e,fg}var hg,x_;function DF(){if(x_)return hg;x_=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return hg=t,hg}var pg,y_;function PF(){if(y_)return pg;y_=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return pg=t,pg}var mg,v_;function RF(){if(v_)return mg;v_=1;var t=Qy(),e=TF(),n=T4(),r=z4(),i=DF(),a=PF(),o=1,c=2,u="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Map]",m="[object Number]",x="[object RegExp]",v="[object Set]",b="[object String]",y="[object Symbol]",w="[object ArrayBuffer]",k="[object DataView]",N=t?t.prototype:void 0,j=N?N.valueOf:void 0;function S(A,O,M,z,I,D,T){switch(M){case k:if(A.byteLength!=O.byteLength||A.byteOffset!=O.byteOffset)return!1;A=A.buffer,O=O.buffer;case w:return!(A.byteLength!=O.byteLength||!D(new e(A),new e(O)));case u:case f:case m:return n(+A,+O);case h:return A.name==O.name&&A.message==O.message;case x:case b:return A==O+"";case p:var q=i;case v:var H=z&o;if(q||(q=a),A.size!=O.size&&!H)return!1;var G=T.get(A);if(G)return G==O;z|=c,T.set(A,O);var ee=r(q(A),q(O),z,I,D,T);return T.delete(A),ee;case y:if(j)return j.call(A)==j.call(O)}return!1}return mg=S,mg}var gg,b_;function IF(){if(b_)return gg;b_=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return gg=t,gg}var xg,w_;function Jy(){if(w_)return xg;w_=1;var t=Array.isArray;return xg=t,xg}var yg,j_;function FF(){if(j_)return yg;j_=1;var t=IF(),e=Jy();function n(r,i,a){var o=i(r);return e(r)?o:t(o,a(r))}return yg=n,yg}var vg,__;function zF(){if(__)return vg;__=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,o=[];++r<i;){var c=e[r];n(c,r,e)&&(o[a++]=c)}return o}return vg=t,vg}var bg,k_;function BF(){if(k_)return bg;k_=1;function t(){return[]}return bg=t,bg}var wg,N_;function qF(){if(N_)return wg;N_=1;var t=zF(),e=BF(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(c){return r.call(o,c)}))}:e;return wg=a,wg}var jg,S_;function UF(){if(S_)return jg;S_=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return jg=t,jg}var _g,C_;function ip(){if(C_)return _g;C_=1;function t(e){return e!=null&&typeof e=="object"}return _g=t,_g}var kg,A_;function WF(){if(A_)return kg;A_=1;var t=np(),e=ip(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return kg=r,kg}var Ng,E_;function HF(){if(E_)return Ng;E_=1;var t=WF(),e=ip(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return Ng=a,Ng}var vd={exports:{}},Sg,O_;function VF(){if(O_)return Sg;O_=1;function t(){return!1}return Sg=t,Sg}vd.exports;var L_;function B4(){return L_||(L_=1,(function(t,e){var n=ra(),r=VF(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,c=o?n.Buffer:void 0,u=c?c.isBuffer:void 0,f=u||r;t.exports=f})(vd,vd.exports)),vd.exports}var Cg,M_;function $F(){if(M_)return Cg;M_=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return Cg=n,Cg}var Ag,T_;function q4(){if(T_)return Ag;T_=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return Ag=e,Ag}var Eg,D_;function YF(){if(D_)return Eg;D_=1;var t=np(),e=q4(),n=ip(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",c="[object Error]",u="[object Function]",f="[object Map]",h="[object Number]",p="[object Object]",m="[object RegExp]",x="[object Set]",v="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",k="[object Float32Array]",N="[object Float64Array]",j="[object Int8Array]",S="[object Int16Array]",A="[object Int32Array]",O="[object Uint8Array]",M="[object Uint8ClampedArray]",z="[object Uint16Array]",I="[object Uint32Array]",D={};D[k]=D[N]=D[j]=D[S]=D[A]=D[O]=D[M]=D[z]=D[I]=!0,D[r]=D[i]=D[y]=D[a]=D[w]=D[o]=D[c]=D[u]=D[f]=D[h]=D[p]=D[m]=D[x]=D[v]=D[b]=!1;function T(q){return n(q)&&e(q.length)&&!!D[t(q)]}return Eg=T,Eg}var Og,P_;function KF(){if(P_)return Og;P_=1;function t(e){return function(n){return e(n)}}return Og=t,Og}var bd={exports:{}};bd.exports;var R_;function GF(){return R_||(R_=1,(function(t,e){var n=D4(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a&&n.process,c=(function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();t.exports=c})(bd,bd.exports)),bd.exports}var Lg,I_;function U4(){if(I_)return Lg;I_=1;var t=YF(),e=KF(),n=GF(),r=n&&n.isTypedArray,i=r?e(r):t;return Lg=i,Lg}var Mg,F_;function XF(){if(F_)return Mg;F_=1;var t=UF(),e=HF(),n=Jy(),r=B4(),i=$F(),a=U4(),o=Object.prototype,c=o.hasOwnProperty;function u(f,h){var p=n(f),m=!p&&e(f),x=!p&&!m&&r(f),v=!p&&!m&&!x&&a(f),b=p||m||x||v,y=b?t(f.length,String):[],w=y.length;for(var k in f)(h||c.call(f,k))&&!(b&&(k=="length"||x&&(k=="offset"||k=="parent")||v&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||i(k,w)))&&y.push(k);return y}return Mg=u,Mg}var Tg,z_;function QF(){if(z_)return Tg;z_=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return Tg=e,Tg}var Dg,B_;function ZF(){if(B_)return Dg;B_=1;function t(e,n){return function(r){return e(n(r))}}return Dg=t,Dg}var Pg,q_;function JF(){if(q_)return Pg;q_=1;var t=ZF(),e=t(Object.keys,Object);return Pg=e,Pg}var Rg,U_;function ez(){if(U_)return Rg;U_=1;var t=QF(),e=JF(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var o=[];for(var c in Object(a))r.call(a,c)&&c!="constructor"&&o.push(c);return o}return Rg=i,Rg}var Ig,W_;function tz(){if(W_)return Ig;W_=1;var t=R4(),e=q4();function n(r){return r!=null&&e(r.length)&&!t(r)}return Ig=n,Ig}var Fg,H_;function nz(){if(H_)return Fg;H_=1;var t=XF(),e=ez(),n=tz();function r(i){return n(i)?t(i):e(i)}return Fg=r,Fg}var zg,V_;function rz(){if(V_)return zg;V_=1;var t=FF(),e=qF(),n=nz();function r(i){return t(i,n,e)}return zg=r,zg}var Bg,$_;function sz(){if($_)return Bg;$_=1;var t=rz(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,o,c,u,f,h){var p=c&e,m=t(a),x=m.length,v=t(o),b=v.length;if(x!=b&&!p)return!1;for(var y=x;y--;){var w=m[y];if(!(p?w in o:r.call(o,w)))return!1}var k=h.get(a),N=h.get(o);if(k&&N)return k==o&&N==a;var j=!0;h.set(a,o),h.set(o,a);for(var S=p;++y<x;){w=m[y];var A=a[w],O=o[w];if(u)var M=p?u(O,A,w,o,a,h):u(A,O,w,a,o,h);if(!(M===void 0?A===O||f(A,O,c,u,h):M)){j=!1;break}S||(S=w=="constructor")}if(j&&!S){var z=a.constructor,I=o.constructor;z!=I&&"constructor"in a&&"constructor"in o&&!(typeof z=="function"&&z instanceof z&&typeof I=="function"&&I instanceof I)&&(j=!1)}return h.delete(a),h.delete(o),j}return Bg=i,Bg}var qg,Y_;function iz(){if(Y_)return qg;Y_=1;var t=jc(),e=ra(),n=t(e,"DataView");return qg=n,qg}var Ug,K_;function az(){if(K_)return Ug;K_=1;var t=jc(),e=ra(),n=t(e,"Promise");return Ug=n,Ug}var Wg,G_;function oz(){if(G_)return Wg;G_=1;var t=jc(),e=ra(),n=t(e,"Set");return Wg=n,Wg}var Hg,X_;function lz(){if(X_)return Hg;X_=1;var t=jc(),e=ra(),n=t(e,"WeakMap");return Hg=n,Hg}var Vg,Q_;function cz(){if(Q_)return Vg;Q_=1;var t=iz(),e=Zy(),n=az(),r=oz(),i=lz(),a=np(),o=I4(),c="[object Map]",u="[object Object]",f="[object Promise]",h="[object Set]",p="[object WeakMap]",m="[object DataView]",x=o(t),v=o(e),b=o(n),y=o(r),w=o(i),k=a;return(t&&k(new t(new ArrayBuffer(1)))!=m||e&&k(new e)!=c||n&&k(n.resolve())!=f||r&&k(new r)!=h||i&&k(new i)!=p)&&(k=function(N){var j=a(N),S=j==u?N.constructor:void 0,A=S?o(S):"";if(A)switch(A){case x:return m;case v:return c;case b:return f;case y:return h;case w:return p}return j}),Vg=k,Vg}var $g,Z_;function dz(){if(Z_)return $g;Z_=1;var t=CF(),e=z4(),n=RF(),r=sz(),i=cz(),a=Jy(),o=B4(),c=U4(),u=1,f="[object Arguments]",h="[object Array]",p="[object Object]",m=Object.prototype,x=m.hasOwnProperty;function v(b,y,w,k,N,j){var S=a(b),A=a(y),O=S?h:i(b),M=A?h:i(y);O=O==f?p:O,M=M==f?p:M;var z=O==p,I=M==p,D=O==M;if(D&&o(b)){if(!o(y))return!1;S=!0,z=!1}if(D&&!z)return j||(j=new t),S||c(b)?e(b,y,w,k,N,j):n(b,y,O,w,k,N,j);if(!(w&u)){var T=z&&x.call(b,"__wrapped__"),q=I&&x.call(y,"__wrapped__");if(T||q){var H=T?b.value():b,G=q?y.value():y;return j||(j=new t),N(H,G,w,k,j)}}return D?(j||(j=new t),r(b,y,w,k,N,j)):!1}return $g=v,$g}var Yg,J_;function uz(){if(J_)return Yg;J_=1;var t=dz(),e=ip();function n(r,i,a,o,c){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,o,n,c)}return Yg=n,Yg}var Kg,ek;function fz(){if(ek)return Kg;ek=1;var t=uz();function e(n,r){return t(n,r)}return Kg=e,Kg}var Zf={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var hz=Zf.exports,tk;function pz(){return tk||(tk=1,(function(t,e){(function(r,i){t.exports=i()})(typeof self<"u"?self:hz,function(){return(function(n){var r={};function i(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.d=function(a,o,c){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:c})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=109)})([(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(17),o=i(18),c=i(19),u=i(45),f=i(46),h=i(47),p=i(48),m=i(49),x=i(12),v=i(32),b=i(33),y=i(31),w=i(1),k={Scope:w.Scope,create:w.create,find:w.find,query:w.query,register:w.register,Container:a.default,Format:o.default,Leaf:c.default,Embed:p.default,Scroll:u.default,Block:h.default,Inline:f.default,Text:m.default,Attributor:{Attribute:x.default,Class:v.default,Style:b.default,Store:y.default}};r.default=k}),(function(n,r,i){var a=this&&this.__extends||(function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,k){w.__proto__=k}||function(w,k){for(var N in k)k.hasOwnProperty(N)&&(w[N]=k[N])};return function(w,k){y(w,k);function N(){this.constructor=w}w.prototype=k===null?Object.create(k):(N.prototype=k.prototype,new N)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=(function(y){a(w,y);function w(k){var N=this;return k="[Parchment] "+k,N=y.call(this,k)||this,N.message=k,N.name=N.constructor.name,N}return w})(Error);r.ParchmentError=o;var c={},u={},f={},h={};r.DATA_KEY="__blot";var p;(function(y){y[y.TYPE=3]="TYPE",y[y.LEVEL=12]="LEVEL",y[y.ATTRIBUTE=13]="ATTRIBUTE",y[y.BLOT=14]="BLOT",y[y.INLINE=7]="INLINE",y[y.BLOCK=11]="BLOCK",y[y.BLOCK_BLOT=10]="BLOCK_BLOT",y[y.INLINE_BLOT=6]="INLINE_BLOT",y[y.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",y[y.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",y[y.ANY=15]="ANY"})(p=r.Scope||(r.Scope={}));function m(y,w){var k=v(y);if(k==null)throw new o("Unable to create "+y+" blot");var N=k,j=y instanceof Node||y.nodeType===Node.TEXT_NODE?y:N.create(w);return new N(j,w)}r.create=m;function x(y,w){return w===void 0&&(w=!1),y==null?null:y[r.DATA_KEY]!=null?y[r.DATA_KEY].blot:w?x(y.parentNode,w):null}r.find=x;function v(y,w){w===void 0&&(w=p.ANY);var k;if(typeof y=="string")k=h[y]||c[y];else if(y instanceof Text||y.nodeType===Node.TEXT_NODE)k=h.text;else if(typeof y=="number")y&p.LEVEL&p.BLOCK?k=h.block:y&p.LEVEL&p.INLINE&&(k=h.inline);else if(y instanceof HTMLElement){var N=(y.getAttribute("class")||"").split(/\s+/);for(var j in N)if(k=u[N[j]],k)break;k=k||f[y.tagName]}return k==null?null:w&p.LEVEL&k.scope&&w&p.TYPE&k.scope?k:null}r.query=v;function b(){for(var y=[],w=0;w<arguments.length;w++)y[w]=arguments[w];if(y.length>1)return y.map(function(j){return b(j)});var k=y[0];if(typeof k.blotName!="string"&&typeof k.attrName!="string")throw new o("Invalid definition");if(k.blotName==="abstract")throw new o("Cannot register abstract class");if(h[k.blotName||k.attrName]=k,typeof k.keyName=="string")c[k.keyName]=k;else if(k.className!=null&&(u[k.className]=k),k.tagName!=null){Array.isArray(k.tagName)?k.tagName=k.tagName.map(function(j){return j.toUpperCase()}):k.tagName=k.tagName.toUpperCase();var N=Array.isArray(k.tagName)?k.tagName:[k.tagName];N.forEach(function(j){(f[j]==null||k.className==null)&&(f[j]=k)})}return k}r.register=b}),(function(n,r,i){var a=i(51),o=i(11),c=i(3),u=i(20),f="\0",h=function(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]};h.prototype.insert=function(p,m){var x={};return p.length===0?this:(x.insert=p,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(x.attributes=m),this.push(x))},h.prototype.delete=function(p){return p<=0?this:this.push({delete:p})},h.prototype.retain=function(p,m){if(p<=0)return this;var x={retain:p};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(x.attributes=m),this.push(x)},h.prototype.push=function(p){var m=this.ops.length,x=this.ops[m-1];if(p=c(!0,{},p),typeof x=="object"){if(typeof p.delete=="number"&&typeof x.delete=="number")return this.ops[m-1]={delete:x.delete+p.delete},this;if(typeof x.delete=="number"&&p.insert!=null&&(m-=1,x=this.ops[m-1],typeof x!="object"))return this.ops.unshift(p),this;if(o(p.attributes,x.attributes)){if(typeof p.insert=="string"&&typeof x.insert=="string")return this.ops[m-1]={insert:x.insert+p.insert},typeof p.attributes=="object"&&(this.ops[m-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof x.retain=="number")return this.ops[m-1]={retain:x.retain+p.retain},typeof p.attributes=="object"&&(this.ops[m-1].attributes=p.attributes),this}}return m===this.ops.length?this.ops.push(p):this.ops.splice(m,0,p),this},h.prototype.chop=function(){var p=this.ops[this.ops.length-1];return p&&p.retain&&!p.attributes&&this.ops.pop(),this},h.prototype.filter=function(p){return this.ops.filter(p)},h.prototype.forEach=function(p){this.ops.forEach(p)},h.prototype.map=function(p){return this.ops.map(p)},h.prototype.partition=function(p){var m=[],x=[];return this.forEach(function(v){var b=p(v)?m:x;b.push(v)}),[m,x]},h.prototype.reduce=function(p,m){return this.ops.reduce(p,m)},h.prototype.changeLength=function(){return this.reduce(function(p,m){return m.insert?p+u.length(m):m.delete?p-m.delete:p},0)},h.prototype.length=function(){return this.reduce(function(p,m){return p+u.length(m)},0)},h.prototype.slice=function(p,m){p=p||0,typeof m!="number"&&(m=1/0);for(var x=[],v=u.iterator(this.ops),b=0;b<m&&v.hasNext();){var y;b<p?y=v.next(p-b):(y=v.next(m-b),x.push(y)),b+=u.length(y)}return new h(x)},h.prototype.compose=function(p){var m=u.iterator(this.ops),x=u.iterator(p.ops),v=[],b=x.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){for(var y=b.retain;m.peekType()==="insert"&&m.peekLength()<=y;)y-=m.peekLength(),v.push(m.next());b.retain-y>0&&x.next(b.retain-y)}for(var w=new h(v);m.hasNext()||x.hasNext();)if(x.peekType()==="insert")w.push(x.next());else if(m.peekType()==="delete")w.push(m.next());else{var k=Math.min(m.peekLength(),x.peekLength()),N=m.next(k),j=x.next(k);if(typeof j.retain=="number"){var S={};typeof N.retain=="number"?S.retain=k:S.insert=N.insert;var A=u.attributes.compose(N.attributes,j.attributes,typeof N.retain=="number");if(A&&(S.attributes=A),w.push(S),!x.hasNext()&&o(w.ops[w.ops.length-1],S)){var O=new h(m.rest());return w.concat(O).chop()}}else typeof j.delete=="number"&&typeof N.retain=="number"&&w.push(j)}return w.chop()},h.prototype.concat=function(p){var m=new h(this.ops.slice());return p.ops.length>0&&(m.push(p.ops[0]),m.ops=m.ops.concat(p.ops.slice(1))),m},h.prototype.diff=function(p,m){if(this.ops===p.ops)return new h;var x=[this,p].map(function(k){return k.map(function(N){if(N.insert!=null)return typeof N.insert=="string"?N.insert:f;var j=k===p?"on":"with";throw new Error("diff() called "+j+" non-document")}).join("")}),v=new h,b=a(x[0],x[1],m),y=u.iterator(this.ops),w=u.iterator(p.ops);return b.forEach(function(k){for(var N=k[1].length;N>0;){var j=0;switch(k[0]){case a.INSERT:j=Math.min(w.peekLength(),N),v.push(w.next(j));break;case a.DELETE:j=Math.min(N,y.peekLength()),y.next(j),v.delete(j);break;case a.EQUAL:j=Math.min(y.peekLength(),w.peekLength(),N);var S=y.next(j),A=w.next(j);o(S.insert,A.insert)?v.retain(j,u.attributes.diff(S.attributes,A.attributes)):v.push(A).delete(j);break}N-=j}}),v.chop()},h.prototype.eachLine=function(p,m){m=m||`
`;for(var x=u.iterator(this.ops),v=new h,b=0;x.hasNext();){if(x.peekType()!=="insert")return;var y=x.peek(),w=u.length(y)-x.peekLength(),k=typeof y.insert=="string"?y.insert.indexOf(m,w)-w:-1;if(k<0)v.push(x.next());else if(k>0)v.push(x.next(k));else{if(p(v,x.next(1).attributes||{},b)===!1)return;b+=1,v=new h}}v.length()>0&&p(v,{},b)},h.prototype.transform=function(p,m){if(m=!!m,typeof p=="number")return this.transformPosition(p,m);for(var x=u.iterator(this.ops),v=u.iterator(p.ops),b=new h;x.hasNext()||v.hasNext();)if(x.peekType()==="insert"&&(m||v.peekType()!=="insert"))b.retain(u.length(x.next()));else if(v.peekType()==="insert")b.push(v.next());else{var y=Math.min(x.peekLength(),v.peekLength()),w=x.next(y),k=v.next(y);if(w.delete)continue;k.delete?b.push(k):b.retain(y,u.attributes.transform(w.attributes,k.attributes,m))}return b.chop()},h.prototype.transformPosition=function(p,m){m=!!m;for(var x=u.iterator(this.ops),v=0;x.hasNext()&&v<=p;){var b=x.peekLength(),y=x.peekType();if(x.next(),y==="delete"){p-=Math.min(b,p-v);continue}else y==="insert"&&(v<p||!m)&&(p+=b);v+=b}return p},n.exports=h}),(function(n,r){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=Object.defineProperty,c=Object.getOwnPropertyDescriptor,u=function(x){return typeof Array.isArray=="function"?Array.isArray(x):a.call(x)==="[object Array]"},f=function(x){if(!x||a.call(x)!=="[object Object]")return!1;var v=i.call(x,"constructor"),b=x.constructor&&x.constructor.prototype&&i.call(x.constructor.prototype,"isPrototypeOf");if(x.constructor&&!v&&!b)return!1;var y;for(y in x);return typeof y>"u"||i.call(x,y)},h=function(x,v){o&&v.name==="__proto__"?o(x,v.name,{enumerable:!0,configurable:!0,value:v.newValue,writable:!0}):x[v.name]=v.newValue},p=function(x,v){if(v==="__proto__")if(i.call(x,v)){if(c)return c(x,v).value}else return;return x[v]};n.exports=function m(){var x,v,b,y,w,k,N=arguments[0],j=1,S=arguments.length,A=!1;for(typeof N=="boolean"&&(A=N,N=arguments[1]||{},j=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});j<S;++j)if(x=arguments[j],x!=null)for(v in x)b=p(N,v),y=p(x,v),N!==y&&(A&&y&&(f(y)||(w=u(y)))?(w?(w=!1,k=b&&u(b)?b:[]):k=b&&f(b)?b:{},h(N,{name:v,newValue:m(A,k,y)})):typeof y<"u"&&h(N,{name:v,newValue:y}));return N}}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var a=(function(){function D(T,q){for(var H=0;H<q.length;H++){var G=q[H];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(T,G.key,G)}}return function(T,q,H){return q&&D(T.prototype,q),H&&D(T,H),T}})(),o=function D(T,q,H){T===null&&(T=Function.prototype);var G=Object.getOwnPropertyDescriptor(T,q);if(G===void 0){var ee=Object.getPrototypeOf(T);return ee===null?void 0:D(ee,q,H)}else{if("value"in G)return G.value;var X=G.get;return X===void 0?void 0:X.call(H)}},c=i(3),u=N(c),f=i(2),h=N(f),p=i(0),m=N(p),x=i(16),v=N(x),b=i(6),y=N(b),w=i(7),k=N(w);function N(D){return D&&D.__esModule?D:{default:D}}function j(D,T){if(!(D instanceof T))throw new TypeError("Cannot call a class as a function")}function S(D,T){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:D}function A(D,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);D.prototype=Object.create(T&&T.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(D,T):D.__proto__=T)}var O=1,M=(function(D){A(T,D);function T(){return j(this,T),S(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return a(T,[{key:"attach",value:function(){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"attach",this).call(this),this.attributes=new m.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new h.default().insert(this.value(),(0,u.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(H,G){var ee=m.default.query(H,m.default.Scope.BLOCK_ATTRIBUTE);ee!=null&&this.attributes.attribute(ee,G)}},{key:"formatAt",value:function(H,G,ee,X){this.format(ee,X)}},{key:"insertAt",value:function(H,G,ee){if(typeof G=="string"&&G.endsWith(`
`)){var X=m.default.create(z.blotName);this.parent.insertBefore(X,H===0?this:this.next),X.insertAt(0,G.slice(0,-1))}else o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,H,G,ee)}}]),T})(m.default.Embed);M.scope=m.default.Scope.BLOCK_BLOT;var z=(function(D){A(T,D);function T(q){j(this,T);var H=S(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,q));return H.cache={},H}return a(T,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(m.default.Leaf).reduce(function(H,G){return G.length()===0?H:H.insert(G.value(),I(G))},new h.default).insert(`
`,I(this))),this.cache.delta}},{key:"deleteAt",value:function(H,G){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"deleteAt",this).call(this,H,G),this.cache={}}},{key:"formatAt",value:function(H,G,ee,X){G<=0||(m.default.query(ee,m.default.Scope.BLOCK)?H+G===this.length()&&this.format(ee,X):o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"formatAt",this).call(this,H,Math.min(G,this.length()-H-1),ee,X),this.cache={})}},{key:"insertAt",value:function(H,G,ee){if(ee!=null)return o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,H,G,ee);if(G.length!==0){var X=G.split(`
`),J=X.shift();J.length>0&&(H<this.length()-1||this.children.tail==null?o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,Math.min(H,this.length()-1),J):this.children.tail.insertAt(this.children.tail.length(),J),this.cache={});var K=this;X.reduce(function(W,R){return K=K.split(W,!0),K.insertAt(0,R),R.length},H+J.length)}}},{key:"insertBefore",value:function(H,G){var ee=this.children.head;o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,H,G),ee instanceof v.default&&ee.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"length",this).call(this)+O),this.cache.length}},{key:"moveChildren",value:function(H,G){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"moveChildren",this).call(this,H,G),this.cache={}}},{key:"optimize",value:function(H){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,H),this.cache={}}},{key:"path",value:function(H){return o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"path",this).call(this,H,!0)}},{key:"removeChild",value:function(H){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"removeChild",this).call(this,H),this.cache={}}},{key:"split",value:function(H){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(G&&(H===0||H>=this.length()-O)){var ee=this.clone();return H===0?(this.parent.insertBefore(ee,this),this):(this.parent.insertBefore(ee,this.next),ee)}else{var X=o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"split",this).call(this,H,G);return this.cache={},X}}}]),T})(m.default.Block);z.blotName="block",z.tagName="P",z.defaultChild="break",z.allowedChildren=[y.default,m.default.Embed,k.default];function I(D){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D==null||(typeof D.formats=="function"&&(T=(0,u.default)(T,D.formats())),D.parent==null||D.parent.blotName=="scroll"||D.parent.statics.scope!==D.statics.scope)?T:I(D.parent,T)}r.bubbleFormats=I,r.BlockEmbed=M,r.default=z}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},o=(function(){function K(W,R){var U=[],B=!0,Q=!1,Z=void 0;try{for(var $=W[Symbol.iterator](),ne;!(B=(ne=$.next()).done)&&(U.push(ne.value),!(R&&U.length===R));B=!0);}catch(ae){Q=!0,Z=ae}finally{try{!B&&$.return&&$.return()}finally{if(Q)throw Z}}return U}return function(W,R){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return K(W,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),c=(function(){function K(W,R){for(var U=0;U<R.length;U++){var B=R[U];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(W,B.key,B)}}return function(W,R,U){return R&&K(W.prototype,R),U&&K(W,U),W}})();i(50);var u=i(2),f=I(u),h=i(14),p=I(h),m=i(8),x=I(m),v=i(9),b=I(v),y=i(0),w=I(y),k=i(15),N=I(k),j=i(3),S=I(j),A=i(10),O=I(A),M=i(34),z=I(M);function I(K){return K&&K.__esModule?K:{default:K}}function D(K,W,R){return W in K?Object.defineProperty(K,W,{value:R,enumerable:!0,configurable:!0,writable:!0}):K[W]=R,K}function T(K,W){if(!(K instanceof W))throw new TypeError("Cannot call a class as a function")}var q=(0,O.default)("quill"),H=(function(){c(K,null,[{key:"debug",value:function(R){R===!0&&(R="log"),O.default.level(R)}},{key:"find",value:function(R){return R.__quill||w.default.find(R)}},{key:"import",value:function(R){return this.imports[R]==null&&q.error("Cannot import "+R+". Are you sure it was registered?"),this.imports[R]}},{key:"register",value:function(R,U){var B=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof R!="string"){var Z=R.attrName||R.blotName;typeof Z=="string"?this.register("formats/"+Z,R,U):Object.keys(R).forEach(function($){B.register($,R[$],U)})}else this.imports[R]!=null&&!Q&&q.warn("Overwriting "+R+" with",U),this.imports[R]=U,(R.startsWith("blots/")||R.startsWith("formats/"))&&U.blotName!=="abstract"?w.default.register(U):R.startsWith("modules")&&typeof U.register=="function"&&U.register()}}]);function K(W){var R=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(T(this,K),this.options=G(W,U),this.container=this.options.container,this.container==null)return q.error("Invalid Quill container",W);this.options.debug&&K.debug(this.options.debug);var B=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new x.default,this.scroll=w.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new p.default(this.scroll),this.selection=new N.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(x.default.events.EDITOR_CHANGE,function(Z){Z===x.default.events.TEXT_CHANGE&&R.root.classList.toggle("ql-blank",R.editor.isBlank())}),this.emitter.on(x.default.events.SCROLL_UPDATE,function(Z,$){var ne=R.selection.lastRange,ae=ne&&ne.length===0?ne.index:void 0;ee.call(R,function(){return R.editor.update(null,$,ae)},Z)});var Q=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+B+"<p><br></p></div>");this.setContents(Q),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return c(K,[{key:"addContainer",value:function(R){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof R=="string"){var B=R;R=document.createElement("div"),R.classList.add(B)}return this.container.insertBefore(R,U),R}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(R,U,B){var Q=this,Z=X(R,U,B),$=o(Z,4);return R=$[0],U=$[1],B=$[3],ee.call(this,function(){return Q.editor.deleteText(R,U)},B,R,-1*U)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(R),this.container.classList.toggle("ql-disabled",!R)}},{key:"focus",value:function(){var R=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=R,this.scrollIntoView()}},{key:"format",value:function(R,U){var B=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;return ee.call(this,function(){var Z=B.getSelection(!0),$=new f.default;if(Z==null)return $;if(w.default.query(R,w.default.Scope.BLOCK))$=B.editor.formatLine(Z.index,Z.length,D({},R,U));else{if(Z.length===0)return B.selection.format(R,U),$;$=B.editor.formatText(Z.index,Z.length,D({},R,U))}return B.setSelection(Z,x.default.sources.SILENT),$},Q)}},{key:"formatLine",value:function(R,U,B,Q,Z){var $=this,ne=void 0,ae=X(R,U,B,Q,Z),ce=o(ae,4);return R=ce[0],U=ce[1],ne=ce[2],Z=ce[3],ee.call(this,function(){return $.editor.formatLine(R,U,ne)},Z,R,0)}},{key:"formatText",value:function(R,U,B,Q,Z){var $=this,ne=void 0,ae=X(R,U,B,Q,Z),ce=o(ae,4);return R=ce[0],U=ce[1],ne=ce[2],Z=ce[3],ee.call(this,function(){return $.editor.formatText(R,U,ne)},Z,R,0)}},{key:"getBounds",value:function(R){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=void 0;typeof R=="number"?B=this.selection.getBounds(R,U):B=this.selection.getBounds(R.index,R.length);var Q=this.container.getBoundingClientRect();return{bottom:B.bottom-Q.top,height:B.height,left:B.left-Q.left,right:B.right-Q.left,top:B.top-Q.top,width:B.width}}},{key:"getContents",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-R,B=X(R,U),Q=o(B,2);return R=Q[0],U=Q[1],this.editor.getContents(R,U)}},{key:"getFormat",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof R=="number"?this.editor.getFormat(R,U):this.editor.getFormat(R.index,R.length)}},{key:"getIndex",value:function(R){return R.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(R){return this.scroll.leaf(R)}},{key:"getLine",value:function(R){return this.scroll.line(R)}},{key:"getLines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof R!="number"?this.scroll.lines(R.index,R.length):this.scroll.lines(R,U)}},{key:"getModule",value:function(R){return this.theme.modules[R]}},{key:"getSelection",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return R&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-R,B=X(R,U),Q=o(B,2);return R=Q[0],U=Q[1],this.editor.getText(R,U)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(R,U,B){var Q=this,Z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:K.sources.API;return ee.call(this,function(){return Q.editor.insertEmbed(R,U,B)},Z,R)}},{key:"insertText",value:function(R,U,B,Q,Z){var $=this,ne=void 0,ae=X(R,0,B,Q,Z),ce=o(ae,4);return R=ce[0],ne=ce[2],Z=ce[3],ee.call(this,function(){return $.editor.insertText(R,U,ne)},Z,R,U.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(R,U,B){this.clipboard.dangerouslyPasteHTML(R,U,B)}},{key:"removeFormat",value:function(R,U,B){var Q=this,Z=X(R,U,B),$=o(Z,4);return R=$[0],U=$[1],B=$[3],ee.call(this,function(){return Q.editor.removeFormat(R,U)},B,R)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(R){var U=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.default.sources.API;return ee.call(this,function(){R=new f.default(R);var Q=U.getLength(),Z=U.editor.deleteText(0,Q),$=U.editor.applyDelta(R),ne=$.ops[$.ops.length-1];ne!=null&&typeof ne.insert=="string"&&ne.insert[ne.insert.length-1]===`
`&&(U.editor.deleteText(U.getLength()-1,1),$.delete(1));var ae=Z.compose($);return ae},B)}},{key:"setSelection",value:function(R,U,B){if(R==null)this.selection.setRange(null,U||K.sources.API);else{var Q=X(R,U,B),Z=o(Q,4);R=Z[0],U=Z[1],B=Z[3],this.selection.setRange(new k.Range(R,U),B),B!==x.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(R){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.default.sources.API,B=new f.default().insert(R);return this.setContents(B,U)}},{key:"update",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.default.sources.USER,U=this.scroll.update(R);return this.selection.update(R),U}},{key:"updateContents",value:function(R){var U=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.default.sources.API;return ee.call(this,function(){return R=new f.default(R),U.editor.applyDelta(R,B)},B,!0)}}]),K})();H.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},H.events=x.default.events,H.sources=x.default.sources,H.version="1.3.7",H.imports={delta:f.default,parchment:w.default,"core/module":b.default,"core/theme":z.default};function G(K,W){if(W=(0,S.default)(!0,{container:K,modules:{clipboard:!0,keyboard:!0,history:!0}},W),!W.theme||W.theme===H.DEFAULTS.theme)W.theme=z.default;else if(W.theme=H.import("themes/"+W.theme),W.theme==null)throw new Error("Invalid theme "+W.theme+". Did you register it?");var R=(0,S.default)(!0,{},W.theme.DEFAULTS);[R,W].forEach(function(Q){Q.modules=Q.modules||{},Object.keys(Q.modules).forEach(function(Z){Q.modules[Z]===!0&&(Q.modules[Z]={})})});var U=Object.keys(R.modules).concat(Object.keys(W.modules)),B=U.reduce(function(Q,Z){var $=H.import("modules/"+Z);return $==null?q.error("Cannot load "+Z+" module. Are you sure you registered it?"):Q[Z]=$.DEFAULTS||{},Q},{});return W.modules!=null&&W.modules.toolbar&&W.modules.toolbar.constructor!==Object&&(W.modules.toolbar={container:W.modules.toolbar}),W=(0,S.default)(!0,{},H.DEFAULTS,{modules:B},R,W),["bounds","container","scrollingContainer"].forEach(function(Q){typeof W[Q]=="string"&&(W[Q]=document.querySelector(W[Q]))}),W.modules=Object.keys(W.modules).reduce(function(Q,Z){return W.modules[Z]&&(Q[Z]=W.modules[Z]),Q},{}),W}function ee(K,W,R,U){if(this.options.strict&&!this.isEnabled()&&W===x.default.sources.USER)return new f.default;var B=R==null?null:this.getSelection(),Q=this.editor.delta,Z=K();if(B!=null&&(R===!0&&(R=B.index),U==null?B=J(B,Z,W):U!==0&&(B=J(B,R,U,W)),this.setSelection(B,x.default.sources.SILENT)),Z.length()>0){var $,ne=[x.default.events.TEXT_CHANGE,Z,Q,W];if(($=this.emitter).emit.apply($,[x.default.events.EDITOR_CHANGE].concat(ne)),W!==x.default.sources.SILENT){var ae;(ae=this.emitter).emit.apply(ae,ne)}}return Z}function X(K,W,R,U,B){var Q={};return typeof K.index=="number"&&typeof K.length=="number"?typeof W!="number"?(B=U,U=R,R=W,W=K.length,K=K.index):(W=K.length,K=K.index):typeof W!="number"&&(B=U,U=R,R=W,W=0),(typeof R>"u"?"undefined":a(R))==="object"?(Q=R,B=U):typeof R=="string"&&(U!=null?Q[R]=U:B=R),B=B||x.default.sources.API,[K,W,Q,B]}function J(K,W,R,U){if(K==null)return null;var B=void 0,Q=void 0;if(W instanceof f.default){var Z=[K.index,K.index+K.length].map(function(ce){return W.transformPosition(ce,U!==x.default.sources.USER)}),$=o(Z,2);B=$[0],Q=$[1]}else{var ne=[K.index,K.index+K.length].map(function(ce){return ce<W||ce===W&&U===x.default.sources.USER?ce:R>=0?ce+R:Math.max(W,ce+R)}),ae=o(ne,2);B=ae[0],Q=ae[1]}return new k.Range(B,Q-B)}r.expandConfig=G,r.overload=X,r.default=H}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function y(w,k){for(var N=0;N<k.length;N++){var j=k[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,k,N){return k&&y(w.prototype,k),N&&y(w,N),w}})(),o=function y(w,k,N){w===null&&(w=Function.prototype);var j=Object.getOwnPropertyDescriptor(w,k);if(j===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:y(S,k,N)}else{if("value"in j)return j.value;var A=j.get;return A===void 0?void 0:A.call(N)}},c=i(7),u=p(c),f=i(0),h=p(f);function p(y){return y&&y.__esModule?y:{default:y}}function m(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function x(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function v(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var b=(function(y){v(w,y);function w(){return m(this,w),x(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"formatAt",value:function(N,j,S,A){if(w.compare(this.statics.blotName,S)<0&&h.default.query(S,h.default.Scope.BLOT)){var O=this.isolate(N,j);A&&O.wrap(S,A)}else o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"formatAt",this).call(this,N,j,S,A)}},{key:"optimize",value:function(N){if(o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,N),this.parent instanceof w&&w.compare(this.statics.blotName,this.parent.statics.blotName)>0){var j=this.parent.isolate(this.offset(),this.length());this.moveChildren(j),j.wrap(this)}}}],[{key:"compare",value:function(N,j){var S=w.order.indexOf(N),A=w.order.indexOf(j);return S>=0||A>=0?S-A:N===j?0:N<j?-1:1}}]),w})(h.default.Inline);b.allowedChildren=[b,h.default.Embed,u.default],b.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=b}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function f(m,x){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:m}function h(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(m,x):m.__proto__=x)}var p=(function(m){h(x,m);function x(){return u(this,x),f(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x})(o.default.Text);r.default=p}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function k(N,j){for(var S=0;S<j.length;S++){var A=j[S];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,j,S){return j&&k(N.prototype,j),S&&k(N,S),N}})(),o=function k(N,j,S){N===null&&(N=Function.prototype);var A=Object.getOwnPropertyDescriptor(N,j);if(A===void 0){var O=Object.getPrototypeOf(N);return O===null?void 0:k(O,j,S)}else{if("value"in A)return A.value;var M=A.get;return M===void 0?void 0:M.call(S)}},c=i(54),u=p(c),f=i(10),h=p(f);function p(k){return k&&k.__esModule?k:{default:k}}function m(k,N){if(!(k instanceof N))throw new TypeError("Cannot call a class as a function")}function x(k,N){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:k}function v(k,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);k.prototype=Object.create(N&&N.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(k,N):k.__proto__=N)}var b=(0,h.default)("quill:events"),y=["selectionchange","mousedown","mouseup","click"];y.forEach(function(k){document.addEventListener(k,function(){for(var N=arguments.length,j=Array(N),S=0;S<N;S++)j[S]=arguments[S];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(A){if(A.__quill&&A.__quill.emitter){var O;(O=A.__quill.emitter).handleDOM.apply(O,j)}})})});var w=(function(k){v(N,k);function N(){m(this,N);var j=x(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));return j.listeners={},j.on("error",b.error),j}return a(N,[{key:"emit",value:function(){b.log.apply(b,arguments),o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(S){for(var A=arguments.length,O=Array(A>1?A-1:0),M=1;M<A;M++)O[M-1]=arguments[M];(this.listeners[S.type]||[]).forEach(function(z){var I=z.node,D=z.handler;(S.target===I||I.contains(S.target))&&D.apply(void 0,[S].concat(O))})}},{key:"listenDOM",value:function(S,A,O){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push({node:A,handler:O})}}]),N})(u.default);w.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},w.sources={API:"api",SILENT:"silent",USER:"user"},r.default=w}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function a(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var o=function c(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,c),this.quill=u,this.options=f};o.DEFAULTS={},r.default=o}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=["error","warn","log","info"],o="warn";function c(f){if(a.indexOf(f)<=a.indexOf(o)){for(var h,p=arguments.length,m=Array(p>1?p-1:0),x=1;x<p;x++)m[x-1]=arguments[x];(h=console)[f].apply(h,m)}}function u(f){return a.reduce(function(h,p){return h[p]=c.bind(console,p,f),h},{})}c.level=u.level=function(f){o=f},r.default=u}),(function(n,r,i){var a=Array.prototype.slice,o=i(52),c=i(53),u=n.exports=function(m,x,v){return v||(v={}),m===x?!0:m instanceof Date&&x instanceof Date?m.getTime()===x.getTime():!m||!x||typeof m!="object"&&typeof x!="object"?v.strict?m===x:m==x:p(m,x,v)};function f(m){return m==null}function h(m){return!(!m||typeof m!="object"||typeof m.length!="number"||typeof m.copy!="function"||typeof m.slice!="function"||m.length>0&&typeof m[0]!="number")}function p(m,x,v){var b,y;if(f(m)||f(x)||m.prototype!==x.prototype)return!1;if(c(m))return c(x)?(m=a.call(m),x=a.call(x),u(m,x,v)):!1;if(h(m)){if(!h(x)||m.length!==x.length)return!1;for(b=0;b<m.length;b++)if(m[b]!==x[b])return!1;return!0}try{var w=o(m),k=o(x)}catch{return!1}if(w.length!=k.length)return!1;for(w.sort(),k.sort(),b=w.length-1;b>=0;b--)if(w[b]!=k[b])return!1;for(b=w.length-1;b>=0;b--)if(y=w[b],!u(m[y],x[y],v))return!1;return typeof m==typeof x}}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=(function(){function c(u,f,h){h===void 0&&(h={}),this.attrName=u,this.keyName=f;var p=a.Scope.TYPE&a.Scope.ATTRIBUTE;h.scope!=null?this.scope=h.scope&a.Scope.LEVEL|p:this.scope=a.Scope.ATTRIBUTE,h.whitelist!=null&&(this.whitelist=h.whitelist)}return c.keys=function(u){return[].map.call(u.attributes,function(f){return f.name})},c.prototype.add=function(u,f){return this.canAdd(u,f)?(u.setAttribute(this.keyName,f),!0):!1},c.prototype.canAdd=function(u,f){var h=a.query(u,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return h==null?!1:this.whitelist==null?!0:typeof f=="string"?this.whitelist.indexOf(f.replace(/["']/g,""))>-1:this.whitelist.indexOf(f)>-1},c.prototype.remove=function(u){u.removeAttribute(this.keyName)},c.prototype.value=function(u){var f=u.getAttribute(this.keyName);return this.canAdd(u,f)&&f?f:""},c})();r.default=o}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var a=(function(){function M(z,I){var D=[],T=!0,q=!1,H=void 0;try{for(var G=z[Symbol.iterator](),ee;!(T=(ee=G.next()).done)&&(D.push(ee.value),!(I&&D.length===I));T=!0);}catch(X){q=!0,H=X}finally{try{!T&&G.return&&G.return()}finally{if(q)throw H}}return D}return function(z,I){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return M(z,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function M(z,I){for(var D=0;D<I.length;D++){var T=I[D];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(z,T.key,T)}}return function(z,I,D){return I&&M(z.prototype,I),D&&M(z,D),z}})(),c=function M(z,I,D){z===null&&(z=Function.prototype);var T=Object.getOwnPropertyDescriptor(z,I);if(T===void 0){var q=Object.getPrototypeOf(z);return q===null?void 0:M(q,I,D)}else{if("value"in T)return T.value;var H=T.get;return H===void 0?void 0:H.call(D)}},u=i(2),f=k(u),h=i(0),p=k(h),m=i(4),x=k(m),v=i(6),b=k(v),y=i(7),w=k(y);function k(M){return M&&M.__esModule?M:{default:M}}function N(M,z){if(!(M instanceof z))throw new TypeError("Cannot call a class as a function")}function j(M,z){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:M}function S(M,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);M.prototype=Object.create(z&&z.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(M,z):M.__proto__=z)}var A=(function(M){S(z,M);function z(){return N(this,z),j(this,(z.__proto__||Object.getPrototypeOf(z)).apply(this,arguments))}return z})(b.default);A.blotName="code",A.tagName="CODE";var O=(function(M){S(z,M);function z(){return N(this,z),j(this,(z.__proto__||Object.getPrototypeOf(z)).apply(this,arguments))}return o(z,[{key:"delta",value:function(){var D=this,T=this.domNode.textContent;return T.endsWith(`
`)&&(T=T.slice(0,-1)),T.split(`
`).reduce(function(q,H){return q.insert(H).insert(`
`,D.formats())},new f.default)}},{key:"format",value:function(D,T){if(!(D===this.statics.blotName&&T)){var q=this.descendant(w.default,this.length()-1),H=a(q,1),G=H[0];G!=null&&G.deleteAt(G.length()-1,1),c(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"format",this).call(this,D,T)}}},{key:"formatAt",value:function(D,T,q,H){if(T!==0&&!(p.default.query(q,p.default.Scope.BLOCK)==null||q===this.statics.blotName&&H===this.statics.formats(this.domNode))){var G=this.newlineIndex(D);if(!(G<0||G>=D+T)){var ee=this.newlineIndex(D,!0)+1,X=G-ee+1,J=this.isolate(ee,X),K=J.next;J.format(q,H),K instanceof z&&K.formatAt(0,D-ee+T-X,q,H)}}}},{key:"insertAt",value:function(D,T,q){if(q==null){var H=this.descendant(w.default,D),G=a(H,2),ee=G[0],X=G[1];ee.insertAt(X,T)}}},{key:"length",value:function(){var D=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?D:D+1}},{key:"newlineIndex",value:function(D){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(T)return this.domNode.textContent.slice(0,D).lastIndexOf(`
`);var q=this.domNode.textContent.slice(D).indexOf(`
`);return q>-1?D+q:-1}},{key:"optimize",value:function(D){this.domNode.textContent.endsWith(`
`)||this.appendChild(p.default.create("text",`
`)),c(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"optimize",this).call(this,D);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===T.statics.formats(T.domNode)&&(T.optimize(D),T.moveChildren(this),T.remove())}},{key:"replace",value:function(D){c(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"replace",this).call(this,D),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(T){var q=p.default.find(T);q==null?T.parentNode.removeChild(T):q instanceof p.default.Embed?q.remove():q.unwrap()})}}],[{key:"create",value:function(D){var T=c(z.__proto__||Object.getPrototypeOf(z),"create",this).call(this,D);return T.setAttribute("spellcheck",!1),T}},{key:"formats",value:function(){return!0}}]),z})(x.default);O.blotName="code-block",O.tagName="PRE",O.TAB="  ",r.Code=A,r.default=O}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},o=(function(){function K(W,R){var U=[],B=!0,Q=!1,Z=void 0;try{for(var $=W[Symbol.iterator](),ne;!(B=(ne=$.next()).done)&&(U.push(ne.value),!(R&&U.length===R));B=!0);}catch(ae){Q=!0,Z=ae}finally{try{!B&&$.return&&$.return()}finally{if(Q)throw Z}}return U}return function(W,R){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return K(W,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),c=(function(){function K(W,R){for(var U=0;U<R.length;U++){var B=R[U];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(W,B.key,B)}}return function(W,R,U){return R&&K(W.prototype,R),U&&K(W,U),W}})(),u=i(2),f=T(u),h=i(20),p=T(h),m=i(0),x=T(m),v=i(13),b=T(v),y=i(24),w=T(y),k=i(4),N=T(k),j=i(16),S=T(j),A=i(21),O=T(A),M=i(11),z=T(M),I=i(3),D=T(I);function T(K){return K&&K.__esModule?K:{default:K}}function q(K,W,R){return W in K?Object.defineProperty(K,W,{value:R,enumerable:!0,configurable:!0,writable:!0}):K[W]=R,K}function H(K,W){if(!(K instanceof W))throw new TypeError("Cannot call a class as a function")}var G=/^[ -~]*$/,ee=(function(){function K(W){H(this,K),this.scroll=W,this.delta=this.getDelta()}return c(K,[{key:"applyDelta",value:function(R){var U=this,B=!1;this.scroll.update();var Q=this.scroll.length();return this.scroll.batchStart(),R=J(R),R.reduce(function(Z,$){var ne=$.retain||$.delete||$.insert.length||1,ae=$.attributes||{};if($.insert!=null){if(typeof $.insert=="string"){var ce=$.insert;ce.endsWith(`
`)&&B&&(B=!1,ce=ce.slice(0,-1)),Z>=Q&&!ce.endsWith(`
`)&&(B=!0),U.scroll.insertAt(Z,ce);var ye=U.scroll.line(Z),Be=o(ye,2),Ue=Be[0],it=Be[1],je=(0,D.default)({},(0,k.bubbleFormats)(Ue));if(Ue instanceof N.default){var dt=Ue.descendant(x.default.Leaf,it),st=o(dt,1),ft=st[0];je=(0,D.default)(je,(0,k.bubbleFormats)(ft))}ae=p.default.attributes.diff(je,ae)||{}}else if(a($.insert)==="object"){var Oe=Object.keys($.insert)[0];if(Oe==null)return Z;U.scroll.insertAt(Z,Oe,$.insert[Oe])}Q+=ne}return Object.keys(ae).forEach(function(re){U.scroll.formatAt(Z,ne,re,ae[re])}),Z+ne},0),R.reduce(function(Z,$){return typeof $.delete=="number"?(U.scroll.deleteAt(Z,$.delete),Z):Z+($.retain||$.insert.length||1)},0),this.scroll.batchEnd(),this.update(R)}},{key:"deleteText",value:function(R,U){return this.scroll.deleteAt(R,U),this.update(new f.default().retain(R).delete(U))}},{key:"formatLine",value:function(R,U){var B=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Q).forEach(function(Z){if(!(B.scroll.whitelist!=null&&!B.scroll.whitelist[Z])){var $=B.scroll.lines(R,Math.max(U,1)),ne=U;$.forEach(function(ae){var ce=ae.length();if(!(ae instanceof b.default))ae.format(Z,Q[Z]);else{var ye=R-ae.offset(B.scroll),Be=ae.newlineIndex(ye+ne)-ye+1;ae.formatAt(ye,Be,Z,Q[Z])}ne-=ce})}}),this.scroll.optimize(),this.update(new f.default().retain(R).retain(U,(0,O.default)(Q)))}},{key:"formatText",value:function(R,U){var B=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Q).forEach(function(Z){B.scroll.formatAt(R,U,Z,Q[Z])}),this.update(new f.default().retain(R).retain(U,(0,O.default)(Q)))}},{key:"getContents",value:function(R,U){return this.delta.slice(R,R+U)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(R,U){return R.concat(U.delta())},new f.default)}},{key:"getFormat",value:function(R){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=[],Q=[];U===0?this.scroll.path(R).forEach(function($){var ne=o($,1),ae=ne[0];ae instanceof N.default?B.push(ae):ae instanceof x.default.Leaf&&Q.push(ae)}):(B=this.scroll.lines(R,U),Q=this.scroll.descendants(x.default.Leaf,R,U));var Z=[B,Q].map(function($){if($.length===0)return{};for(var ne=(0,k.bubbleFormats)($.shift());Object.keys(ne).length>0;){var ae=$.shift();if(ae==null)return ne;ne=X((0,k.bubbleFormats)(ae),ne)}return ne});return D.default.apply(D.default,Z)}},{key:"getText",value:function(R,U){return this.getContents(R,U).filter(function(B){return typeof B.insert=="string"}).map(function(B){return B.insert}).join("")}},{key:"insertEmbed",value:function(R,U,B){return this.scroll.insertAt(R,U,B),this.update(new f.default().retain(R).insert(q({},U,B)))}},{key:"insertText",value:function(R,U){var B=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return U=U.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(R,U),Object.keys(Q).forEach(function(Z){B.scroll.formatAt(R,U.length,Z,Q[Z])}),this.update(new f.default().retain(R).insert(U,(0,O.default)(Q)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var R=this.scroll.children.head;return R.statics.blotName!==N.default.blotName||R.children.length>1?!1:R.children.head instanceof S.default}},{key:"removeFormat",value:function(R,U){var B=this.getText(R,U),Q=this.scroll.line(R+U),Z=o(Q,2),$=Z[0],ne=Z[1],ae=0,ce=new f.default;$!=null&&($ instanceof b.default?ae=$.newlineIndex(ne)-ne+1:ae=$.length()-ne,ce=$.delta().slice(ne,ne+ae-1).insert(`
`));var ye=this.getContents(R,U+ae),Be=ye.diff(new f.default().insert(B).concat(ce)),Ue=new f.default().retain(R).concat(Be);return this.applyDelta(Ue)}},{key:"update",value:function(R){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Q=this.delta;if(U.length===1&&U[0].type==="characterData"&&U[0].target.data.match(G)&&x.default.find(U[0].target)){var Z=x.default.find(U[0].target),$=(0,k.bubbleFormats)(Z),ne=Z.offset(this.scroll),ae=U[0].oldValue.replace(w.default.CONTENTS,""),ce=new f.default().insert(ae),ye=new f.default().insert(Z.value()),Be=new f.default().retain(ne).concat(ce.diff(ye,B));R=Be.reduce(function(Ue,it){return it.insert?Ue.insert(it.insert,$):Ue.push(it)},new f.default),this.delta=Q.compose(R)}else this.delta=this.getDelta(),(!R||!(0,z.default)(Q.compose(R),this.delta))&&(R=Q.diff(this.delta,B));return R}}]),K})();function X(K,W){return Object.keys(W).reduce(function(R,U){return K[U]==null||(W[U]===K[U]?R[U]=W[U]:Array.isArray(W[U])?W[U].indexOf(K[U])<0&&(R[U]=W[U].concat([K[U]])):R[U]=[W[U],K[U]]),R},{})}function J(K){return K.reduce(function(W,R){if(R.insert===1){var U=(0,O.default)(R.attributes);return delete U.image,W.insert({image:R.attributes.image},U)}if(R.attributes!=null&&(R.attributes.list===!0||R.attributes.bullet===!0)&&(R=(0,O.default)(R),R.attributes.list?R.attributes.list="ordered":(R.attributes.list="bullet",delete R.attributes.bullet)),typeof R.insert=="string"){var B=R.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return W.insert(B,R.attributes)}return W.push(R)},new f.default)}r.default=ee}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var a=(function(){function M(z,I){var D=[],T=!0,q=!1,H=void 0;try{for(var G=z[Symbol.iterator](),ee;!(T=(ee=G.next()).done)&&(D.push(ee.value),!(I&&D.length===I));T=!0);}catch(X){q=!0,H=X}finally{try{!T&&G.return&&G.return()}finally{if(q)throw H}}return D}return function(z,I){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return M(z,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function M(z,I){for(var D=0;D<I.length;D++){var T=I[D];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(z,T.key,T)}}return function(z,I,D){return I&&M(z.prototype,I),D&&M(z,D),z}})(),c=i(0),u=w(c),f=i(21),h=w(f),p=i(11),m=w(p),x=i(8),v=w(x),b=i(10),y=w(b);function w(M){return M&&M.__esModule?M:{default:M}}function k(M){if(Array.isArray(M)){for(var z=0,I=Array(M.length);z<M.length;z++)I[z]=M[z];return I}else return Array.from(M)}function N(M,z){if(!(M instanceof z))throw new TypeError("Cannot call a class as a function")}var j=(0,y.default)("quill:selection"),S=function M(z){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;N(this,M),this.index=z,this.length=I},A=(function(){function M(z,I){var D=this;N(this,M),this.emitter=I,this.scroll=z,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new S(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){D.mouseDown||setTimeout(D.update.bind(D,v.default.sources.USER),1)}),this.emitter.on(v.default.events.EDITOR_CHANGE,function(T,q){T===v.default.events.TEXT_CHANGE&&q.length()>0&&D.update(v.default.sources.SILENT)}),this.emitter.on(v.default.events.SCROLL_BEFORE_UPDATE,function(){if(D.hasFocus()){var T=D.getNativeRange();T!=null&&T.start.node!==D.cursor.textNode&&D.emitter.once(v.default.events.SCROLL_UPDATE,function(){try{D.setNativeRange(T.start.node,T.start.offset,T.end.node,T.end.offset)}catch{}})}}),this.emitter.on(v.default.events.SCROLL_OPTIMIZE,function(T,q){if(q.range){var H=q.range,G=H.startNode,ee=H.startOffset,X=H.endNode,J=H.endOffset;D.setNativeRange(G,ee,X,J)}}),this.update(v.default.sources.SILENT)}return o(M,[{key:"handleComposition",value:function(){var I=this;this.root.addEventListener("compositionstart",function(){I.composing=!0}),this.root.addEventListener("compositionend",function(){if(I.composing=!1,I.cursor.parent){var D=I.cursor.restore();if(!D)return;setTimeout(function(){I.setNativeRange(D.startNode,D.startOffset,D.endNode,D.endOffset)},1)}})}},{key:"handleDragging",value:function(){var I=this;this.emitter.listenDOM("mousedown",document.body,function(){I.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){I.mouseDown=!1,I.update(v.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(I,D){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[I])){this.scroll.update();var T=this.getNativeRange();if(!(T==null||!T.native.collapsed||u.default.query(I,u.default.Scope.BLOCK))){if(T.start.node!==this.cursor.textNode){var q=u.default.find(T.start.node,!1);if(q==null)return;if(q instanceof u.default.Leaf){var H=q.split(T.start.offset);q.parent.insertBefore(this.cursor,H)}else q.insertBefore(this.cursor,T.start.node);this.cursor.attach()}this.cursor.format(I,D),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(I){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=this.scroll.length();I=Math.min(I,T-1),D=Math.min(I+D,T-1)-I;var q=void 0,H=this.scroll.leaf(I),G=a(H,2),ee=G[0],X=G[1];if(ee==null)return null;var J=ee.position(X,!0),K=a(J,2);q=K[0],X=K[1];var W=document.createRange();if(D>0){W.setStart(q,X);var R=this.scroll.leaf(I+D),U=a(R,2);if(ee=U[0],X=U[1],ee==null)return null;var B=ee.position(X,!0),Q=a(B,2);return q=Q[0],X=Q[1],W.setEnd(q,X),W.getBoundingClientRect()}else{var Z="left",$=void 0;return q instanceof Text?(X<q.data.length?(W.setStart(q,X),W.setEnd(q,X+1)):(W.setStart(q,X-1),W.setEnd(q,X),Z="right"),$=W.getBoundingClientRect()):($=ee.domNode.getBoundingClientRect(),X>0&&(Z="right")),{bottom:$.top+$.height,height:$.height,left:$[Z],right:$[Z],top:$.top,width:0}}}},{key:"getNativeRange",value:function(){var I=document.getSelection();if(I==null||I.rangeCount<=0)return null;var D=I.getRangeAt(0);if(D==null)return null;var T=this.normalizeNative(D);return j.info("getNativeRange",T),T}},{key:"getRange",value:function(){var I=this.getNativeRange();if(I==null)return[null,null];var D=this.normalizedToRange(I);return[D,I]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(I){var D=this,T=[[I.start.node,I.start.offset]];I.native.collapsed||T.push([I.end.node,I.end.offset]);var q=T.map(function(ee){var X=a(ee,2),J=X[0],K=X[1],W=u.default.find(J,!0),R=W.offset(D.scroll);return K===0?R:W instanceof u.default.Container?R+W.length():R+W.index(J,K)}),H=Math.min(Math.max.apply(Math,k(q)),this.scroll.length()-1),G=Math.min.apply(Math,[H].concat(k(q)));return new S(G,H-G)}},{key:"normalizeNative",value:function(I){if(!O(this.root,I.startContainer)||!I.collapsed&&!O(this.root,I.endContainer))return null;var D={start:{node:I.startContainer,offset:I.startOffset},end:{node:I.endContainer,offset:I.endOffset},native:I};return[D.start,D.end].forEach(function(T){for(var q=T.node,H=T.offset;!(q instanceof Text)&&q.childNodes.length>0;)if(q.childNodes.length>H)q=q.childNodes[H],H=0;else if(q.childNodes.length===H)q=q.lastChild,H=q instanceof Text?q.data.length:q.childNodes.length+1;else break;T.node=q,T.offset=H}),D}},{key:"rangeToNative",value:function(I){var D=this,T=I.collapsed?[I.index]:[I.index,I.index+I.length],q=[],H=this.scroll.length();return T.forEach(function(G,ee){G=Math.min(H-1,G);var X=void 0,J=D.scroll.leaf(G),K=a(J,2),W=K[0],R=K[1],U=W.position(R,ee!==0),B=a(U,2);X=B[0],R=B[1],q.push(X,R)}),q.length<2&&(q=q.concat(q)),q}},{key:"scrollIntoView",value:function(I){var D=this.lastRange;if(D!=null){var T=this.getBounds(D.index,D.length);if(T!=null){var q=this.scroll.length()-1,H=this.scroll.line(Math.min(D.index,q)),G=a(H,1),ee=G[0],X=ee;if(D.length>0){var J=this.scroll.line(Math.min(D.index+D.length,q)),K=a(J,1);X=K[0]}if(!(ee==null||X==null)){var W=I.getBoundingClientRect();T.top<W.top?I.scrollTop-=W.top-T.top:T.bottom>W.bottom&&(I.scrollTop+=T.bottom-W.bottom)}}}}},{key:"setNativeRange",value:function(I,D){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:I,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:D,H=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(j.info("setNativeRange",I,D,T,q),!(I!=null&&(this.root.parentNode==null||I.parentNode==null||T.parentNode==null))){var G=document.getSelection();if(G!=null)if(I!=null){this.hasFocus()||this.root.focus();var ee=(this.getNativeRange()||{}).native;if(ee==null||H||I!==ee.startContainer||D!==ee.startOffset||T!==ee.endContainer||q!==ee.endOffset){I.tagName=="BR"&&(D=[].indexOf.call(I.parentNode.childNodes,I),I=I.parentNode),T.tagName=="BR"&&(q=[].indexOf.call(T.parentNode.childNodes,T),T=T.parentNode);var X=document.createRange();X.setStart(I,D),X.setEnd(T,q),G.removeAllRanges(),G.addRange(X)}}else G.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(I){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof D=="string"&&(T=D,D=!1),j.info("setRange",I),I!=null){var q=this.rangeToNative(I);this.setNativeRange.apply(this,k(q).concat([D]))}else this.setNativeRange(null);this.update(T)}},{key:"update",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v.default.sources.USER,D=this.lastRange,T=this.getRange(),q=a(T,2),H=q[0],G=q[1];if(this.lastRange=H,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,m.default)(D,this.lastRange)){var ee;!this.composing&&G!=null&&G.native.collapsed&&G.start.node!==this.cursor.textNode&&this.cursor.restore();var X=[v.default.events.SELECTION_CHANGE,(0,h.default)(this.lastRange),(0,h.default)(D),I];if((ee=this.emitter).emit.apply(ee,[v.default.events.EDITOR_CHANGE].concat(X)),I!==v.default.sources.SILENT){var J;(J=this.emitter).emit.apply(J,X)}}}}]),M})();function O(M,z){try{z.parentNode}catch{return!1}return z instanceof Text&&(z=z.parentNode),M.contains(z)}r.Range=S,r.default=A}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function v(b,y){for(var w=0;w<y.length;w++){var k=y[w];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,y,w){return y&&v(b.prototype,y),w&&v(b,w),b}})(),o=function v(b,y,w){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,y);if(k===void 0){var N=Object.getPrototypeOf(b);return N===null?void 0:v(N,y,w)}else{if("value"in k)return k.value;var j=k.get;return j===void 0?void 0:j.call(w)}},c=i(0),u=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function h(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function p(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function m(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var x=(function(v){m(b,v);function b(){return h(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,[{key:"insertInto",value:function(w,k){w.children.length===0?o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertInto",this).call(this,w,k):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),b})(u.default.Embed);x.blotName="break",x.tagName="BR",r.default=x}),(function(n,r,i){var a=this&&this.__extends||(function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var v in x)x.hasOwnProperty(v)&&(m[v]=x[v])};return function(m,x){p(m,x);function v(){this.constructor=m}m.prototype=x===null?Object.create(x):(v.prototype=x.prototype,new v)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(44),c=i(30),u=i(1),f=(function(p){a(m,p);function m(x){var v=p.call(this,x)||this;return v.build(),v}return m.prototype.appendChild=function(x){this.insertBefore(x)},m.prototype.attach=function(){p.prototype.attach.call(this),this.children.forEach(function(x){x.attach()})},m.prototype.build=function(){var x=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(v){try{var b=h(v);x.insertBefore(b,x.children.head||void 0)}catch(y){if(y instanceof u.ParchmentError)return;throw y}})},m.prototype.deleteAt=function(x,v){if(x===0&&v===this.length())return this.remove();this.children.forEachAt(x,v,function(b,y,w){b.deleteAt(y,w)})},m.prototype.descendant=function(x,v){var b=this.children.find(v),y=b[0],w=b[1];return x.blotName==null&&x(y)||x.blotName!=null&&y instanceof x?[y,w]:y instanceof m?y.descendant(x,w):[null,-1]},m.prototype.descendants=function(x,v,b){v===void 0&&(v=0),b===void 0&&(b=Number.MAX_VALUE);var y=[],w=b;return this.children.forEachAt(v,b,function(k,N,j){(x.blotName==null&&x(k)||x.blotName!=null&&k instanceof x)&&y.push(k),k instanceof m&&(y=y.concat(k.descendants(x,N,w))),w-=j}),y},m.prototype.detach=function(){this.children.forEach(function(x){x.detach()}),p.prototype.detach.call(this)},m.prototype.formatAt=function(x,v,b,y){this.children.forEachAt(x,v,function(w,k,N){w.formatAt(k,N,b,y)})},m.prototype.insertAt=function(x,v,b){var y=this.children.find(x),w=y[0],k=y[1];if(w)w.insertAt(k,v,b);else{var N=b==null?u.create("text",v):u.create(v,b);this.appendChild(N)}},m.prototype.insertBefore=function(x,v){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(b){return x instanceof b}))throw new u.ParchmentError("Cannot insert "+x.statics.blotName+" into "+this.statics.blotName);x.insertInto(this,v)},m.prototype.length=function(){return this.children.reduce(function(x,v){return x+v.length()},0)},m.prototype.moveChildren=function(x,v){this.children.forEach(function(b){x.insertBefore(b,v)})},m.prototype.optimize=function(x){if(p.prototype.optimize.call(this,x),this.children.length===0)if(this.statics.defaultChild!=null){var v=u.create(this.statics.defaultChild);this.appendChild(v),v.optimize(x)}else this.remove()},m.prototype.path=function(x,v){v===void 0&&(v=!1);var b=this.children.find(x,v),y=b[0],w=b[1],k=[[this,x]];return y instanceof m?k.concat(y.path(w,v)):(y!=null&&k.push([y,w]),k)},m.prototype.removeChild=function(x){this.children.remove(x)},m.prototype.replace=function(x){x instanceof m&&x.moveChildren(this),p.prototype.replace.call(this,x)},m.prototype.split=function(x,v){if(v===void 0&&(v=!1),!v){if(x===0)return this;if(x===this.length())return this.next}var b=this.clone();return this.parent.insertBefore(b,this.next),this.children.forEachAt(x,this.length(),function(y,w,k){y=y.split(w,v),b.appendChild(y)}),b},m.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},m.prototype.update=function(x,v){var b=this,y=[],w=[];x.forEach(function(k){k.target===b.domNode&&k.type==="childList"&&(y.push.apply(y,k.addedNodes),w.push.apply(w,k.removedNodes))}),w.forEach(function(k){if(!(k.parentNode!=null&&k.tagName!=="IFRAME"&&document.body.compareDocumentPosition(k)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var N=u.find(k);N!=null&&(N.domNode.parentNode==null||N.domNode.parentNode===b.domNode)&&N.detach()}}),y.filter(function(k){return k.parentNode==b.domNode}).sort(function(k,N){return k===N?0:k.compareDocumentPosition(N)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(k){var N=null;k.nextSibling!=null&&(N=u.find(k.nextSibling));var j=h(k);(j.next!=N||j.next==null)&&(j.parent!=null&&j.parent.removeChild(b),b.insertBefore(j,N||void 0))})},m})(c.default);function h(p){var m=u.find(p);if(m==null)try{m=u.create(p)}catch{m=u.create(u.Scope.INLINE),[].slice.call(p.childNodes).forEach(function(v){m.domNode.appendChild(v)}),p.parentNode&&p.parentNode.replaceChild(m.domNode,p),m.attach()}return m}r.default=f}),(function(n,r,i){var a=this&&this.__extends||(function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var v in x)x.hasOwnProperty(v)&&(m[v]=x[v])};return function(m,x){p(m,x);function v(){this.constructor=m}m.prototype=x===null?Object.create(x):(v.prototype=x.prototype,new v)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),c=i(31),u=i(17),f=i(1),h=(function(p){a(m,p);function m(x){var v=p.call(this,x)||this;return v.attributes=new c.default(v.domNode),v}return m.formats=function(x){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return x.tagName.toLowerCase()},m.prototype.format=function(x,v){var b=f.query(x);b instanceof o.default?this.attributes.attribute(b,v):v&&b!=null&&(x!==this.statics.blotName||this.formats()[x]!==v)&&this.replaceWith(x,v)},m.prototype.formats=function(){var x=this.attributes.values(),v=this.statics.formats(this.domNode);return v!=null&&(x[this.statics.blotName]=v),x},m.prototype.replaceWith=function(x,v){var b=p.prototype.replaceWith.call(this,x,v);return this.attributes.copy(b),b},m.prototype.update=function(x,v){var b=this;p.prototype.update.call(this,x,v),x.some(function(y){return y.target===b.domNode&&y.type==="attributes"})&&this.attributes.build()},m.prototype.wrap=function(x,v){var b=p.prototype.wrap.call(this,x,v);return b instanceof m&&b.statics.scope===this.statics.scope&&this.attributes.move(b),b},m})(u.default);r.default=h}),(function(n,r,i){var a=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])};return function(h,p){f(h,p);function m(){this.constructor=h}h.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(30),c=i(1),u=(function(f){a(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return h.value=function(p){return!0},h.prototype.index=function(p,m){return this.domNode===p||this.domNode.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(m,1):-1},h.prototype.position=function(p,m){var x=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return p>0&&(x+=1),[this.parent.domNode,x]},h.prototype.value=function(){var p;return p={},p[this.statics.blotName]=this.statics.value(this.domNode)||!0,p},h.scope=c.Scope.INLINE_BLOT,h})(o.default);r.default=u}),(function(n,r,i){var a=i(11),o=i(3),c={attributes:{compose:function(f,h,p){typeof f!="object"&&(f={}),typeof h!="object"&&(h={});var m=o(!0,{},h);p||(m=Object.keys(m).reduce(function(v,b){return m[b]!=null&&(v[b]=m[b]),v},{}));for(var x in f)f[x]!==void 0&&h[x]===void 0&&(m[x]=f[x]);return Object.keys(m).length>0?m:void 0},diff:function(f,h){typeof f!="object"&&(f={}),typeof h!="object"&&(h={});var p=Object.keys(f).concat(Object.keys(h)).reduce(function(m,x){return a(f[x],h[x])||(m[x]=h[x]===void 0?null:h[x]),m},{});return Object.keys(p).length>0?p:void 0},transform:function(f,h,p){if(typeof f!="object")return h;if(typeof h=="object"){if(!p)return h;var m=Object.keys(h).reduce(function(x,v){return f[v]===void 0&&(x[v]=h[v]),x},{});return Object.keys(m).length>0?m:void 0}}},iterator:function(f){return new u(f)},length:function(f){return typeof f.delete=="number"?f.delete:typeof f.retain=="number"?f.retain:typeof f.insert=="string"?f.insert.length:1}};function u(f){this.ops=f,this.index=0,this.offset=0}u.prototype.hasNext=function(){return this.peekLength()<1/0},u.prototype.next=function(f){f||(f=1/0);var h=this.ops[this.index];if(h){var p=this.offset,m=c.length(h);if(f>=m-p?(f=m-p,this.index+=1,this.offset=0):this.offset+=f,typeof h.delete=="number")return{delete:f};var x={};return h.attributes&&(x.attributes=h.attributes),typeof h.retain=="number"?x.retain=f:typeof h.insert=="string"?x.insert=h.insert.substr(p,f):x.insert=h.insert,x}else return{retain:1/0}},u.prototype.peek=function(){return this.ops[this.index]},u.prototype.peekLength=function(){return this.ops[this.index]?c.length(this.ops[this.index])-this.offset:1/0},u.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},u.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var f=this.offset,h=this.index,p=this.next(),m=this.ops.slice(this.index);return this.offset=f,this.index=h,[p].concat(m)}else return[]},n.exports=c}),(function(n,r){var i=(function(){function a(b,y){return y!=null&&b instanceof y}var o;try{o=Map}catch{o=function(){}}var c;try{c=Set}catch{c=function(){}}var u;try{u=Promise}catch{u=function(){}}function f(b,y,w,k,N){typeof y=="object"&&(w=y.depth,k=y.prototype,N=y.includeNonEnumerable,y=y.circular);var j=[],S=[],A=typeof Buffer<"u";typeof y>"u"&&(y=!0),typeof w>"u"&&(w=1/0);function O(M,z){if(M===null)return null;if(z===0)return M;var I,D;if(typeof M!="object")return M;if(a(M,o))I=new o;else if(a(M,c))I=new c;else if(a(M,u))I=new u(function(W,R){M.then(function(U){W(O(U,z-1))},function(U){R(O(U,z-1))})});else if(f.__isArray(M))I=[];else if(f.__isRegExp(M))I=new RegExp(M.source,v(M)),M.lastIndex&&(I.lastIndex=M.lastIndex);else if(f.__isDate(M))I=new Date(M.getTime());else{if(A&&Buffer.isBuffer(M))return Buffer.allocUnsafe?I=Buffer.allocUnsafe(M.length):I=new Buffer(M.length),M.copy(I),I;a(M,Error)?I=Object.create(M):typeof k>"u"?(D=Object.getPrototypeOf(M),I=Object.create(D)):(I=Object.create(k),D=k)}if(y){var T=j.indexOf(M);if(T!=-1)return S[T];j.push(M),S.push(I)}a(M,o)&&M.forEach(function(W,R){var U=O(R,z-1),B=O(W,z-1);I.set(U,B)}),a(M,c)&&M.forEach(function(W){var R=O(W,z-1);I.add(R)});for(var q in M){var H;D&&(H=Object.getOwnPropertyDescriptor(D,q)),!(H&&H.set==null)&&(I[q]=O(M[q],z-1))}if(Object.getOwnPropertySymbols)for(var G=Object.getOwnPropertySymbols(M),q=0;q<G.length;q++){var ee=G[q],X=Object.getOwnPropertyDescriptor(M,ee);X&&!X.enumerable&&!N||(I[ee]=O(M[ee],z-1),X.enumerable||Object.defineProperty(I,ee,{enumerable:!1}))}if(N)for(var J=Object.getOwnPropertyNames(M),q=0;q<J.length;q++){var K=J[q],X=Object.getOwnPropertyDescriptor(M,K);X&&X.enumerable||(I[K]=O(M[K],z-1),Object.defineProperty(I,K,{enumerable:!1}))}return I}return O(b,w)}f.clonePrototype=function(y){if(y===null)return null;var w=function(){};return w.prototype=y,new w};function h(b){return Object.prototype.toString.call(b)}f.__objToStr=h;function p(b){return typeof b=="object"&&h(b)==="[object Date]"}f.__isDate=p;function m(b){return typeof b=="object"&&h(b)==="[object Array]"}f.__isArray=m;function x(b){return typeof b=="object"&&h(b)==="[object RegExp]"}f.__isRegExp=x;function v(b){var y="";return b.global&&(y+="g"),b.ignoreCase&&(y+="i"),b.multiline&&(y+="m"),y}return f.__getRegExpFlags=v,f})();typeof n=="object"&&n.exports&&(n.exports=i)}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function I(D,T){var q=[],H=!0,G=!1,ee=void 0;try{for(var X=D[Symbol.iterator](),J;!(H=(J=X.next()).done)&&(q.push(J.value),!(T&&q.length===T));H=!0);}catch(K){G=!0,ee=K}finally{try{!H&&X.return&&X.return()}finally{if(G)throw ee}}return q}return function(D,T){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return I(D,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function I(D,T){for(var q=0;q<T.length;q++){var H=T[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(D,H.key,H)}}return function(D,T,q){return T&&I(D.prototype,T),q&&I(D,q),D}})(),c=function I(D,T,q){D===null&&(D=Function.prototype);var H=Object.getOwnPropertyDescriptor(D,T);if(H===void 0){var G=Object.getPrototypeOf(D);return G===null?void 0:I(G,T,q)}else{if("value"in H)return H.value;var ee=H.get;return ee===void 0?void 0:ee.call(q)}},u=i(0),f=j(u),h=i(8),p=j(h),m=i(4),x=j(m),v=i(16),b=j(v),y=i(13),w=j(y),k=i(25),N=j(k);function j(I){return I&&I.__esModule?I:{default:I}}function S(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")}function A(I,D){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:I}function O(I,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);I.prototype=Object.create(D&&D.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(I,D):I.__proto__=D)}function M(I){return I instanceof x.default||I instanceof m.BlockEmbed}var z=(function(I){O(D,I);function D(T,q){S(this,D);var H=A(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,T));return H.emitter=q.emitter,Array.isArray(q.whitelist)&&(H.whitelist=q.whitelist.reduce(function(G,ee){return G[ee]=!0,G},{})),H.domNode.addEventListener("DOMNodeInserted",function(){}),H.optimize(),H.enable(),H}return o(D,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(q,H){var G=this.line(q),ee=a(G,2),X=ee[0],J=ee[1],K=this.line(q+H),W=a(K,1),R=W[0];if(c(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"deleteAt",this).call(this,q,H),R!=null&&X!==R&&J>0){if(X instanceof m.BlockEmbed||R instanceof m.BlockEmbed){this.optimize();return}if(X instanceof w.default){var U=X.newlineIndex(X.length(),!0);if(U>-1&&(X=X.split(U+1),X===R)){this.optimize();return}}else if(R instanceof w.default){var B=R.newlineIndex(0);B>-1&&R.split(B+1)}var Q=R.children.head instanceof b.default?null:R.children.head;X.moveChildren(R,Q),X.remove()}this.optimize()}},{key:"enable",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",q)}},{key:"formatAt",value:function(q,H,G,ee){this.whitelist!=null&&!this.whitelist[G]||(c(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"formatAt",this).call(this,q,H,G,ee),this.optimize())}},{key:"insertAt",value:function(q,H,G){if(!(G!=null&&this.whitelist!=null&&!this.whitelist[H])){if(q>=this.length())if(G==null||f.default.query(H,f.default.Scope.BLOCK)==null){var ee=f.default.create(this.statics.defaultChild);this.appendChild(ee),G==null&&H.endsWith(`
`)&&(H=H.slice(0,-1)),ee.insertAt(0,H,G)}else{var X=f.default.create(H,G);this.appendChild(X)}else c(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertAt",this).call(this,q,H,G);this.optimize()}}},{key:"insertBefore",value:function(q,H){if(q.statics.scope===f.default.Scope.INLINE_BLOT){var G=f.default.create(this.statics.defaultChild);G.appendChild(q),q=G}c(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertBefore",this).call(this,q,H)}},{key:"leaf",value:function(q){return this.path(q).pop()||[null,-1]}},{key:"line",value:function(q){return q===this.length()?this.line(q-1):this.descendant(M,q)}},{key:"lines",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,G=function ee(X,J,K){var W=[],R=K;return X.children.forEachAt(J,K,function(U,B,Q){M(U)?W.push(U):U instanceof f.default.Container&&(W=W.concat(ee(U,B,R))),R-=Q}),W};return G(this,q,H)}},{key:"optimize",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(c(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"optimize",this).call(this,q,H),q.length>0&&this.emitter.emit(p.default.events.SCROLL_OPTIMIZE,q,H))}},{key:"path",value:function(q){return c(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"path",this).call(this,q).slice(1)}},{key:"update",value:function(q){if(this.batch!==!0){var H=p.default.sources.USER;typeof q=="string"&&(H=q),Array.isArray(q)||(q=this.observer.takeRecords()),q.length>0&&this.emitter.emit(p.default.events.SCROLL_BEFORE_UPDATE,H,q),c(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"update",this).call(this,q.concat([])),q.length>0&&this.emitter.emit(p.default.events.SCROLL_UPDATE,H,q)}}}]),D})(f.default.Scroll);z.blotName="scroll",z.className="ql-editor",z.tagName="DIV",z.defaultChild="block",z.allowedChildren=[x.default,m.BlockEmbed,N.default],r.default=z}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},o=(function(){function $(ne,ae){var ce=[],ye=!0,Be=!1,Ue=void 0;try{for(var it=ne[Symbol.iterator](),je;!(ye=(je=it.next()).done)&&(ce.push(je.value),!(ae&&ce.length===ae));ye=!0);}catch(dt){Be=!0,Ue=dt}finally{try{!ye&&it.return&&it.return()}finally{if(Be)throw Ue}}return ce}return function(ne,ae){if(Array.isArray(ne))return ne;if(Symbol.iterator in Object(ne))return $(ne,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),c=(function(){function $(ne,ae){for(var ce=0;ce<ae.length;ce++){var ye=ae[ce];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(ne,ye.key,ye)}}return function(ne,ae,ce){return ae&&$(ne.prototype,ae),ce&&$(ne,ce),ne}})(),u=i(21),f=I(u),h=i(11),p=I(h),m=i(3),x=I(m),v=i(2),b=I(v),y=i(20),w=I(y),k=i(0),N=I(k),j=i(5),S=I(j),A=i(10),O=I(A),M=i(9),z=I(M);function I($){return $&&$.__esModule?$:{default:$}}function D($,ne,ae){return ne in $?Object.defineProperty($,ne,{value:ae,enumerable:!0,configurable:!0,writable:!0}):$[ne]=ae,$}function T($,ne){if(!($ instanceof ne))throw new TypeError("Cannot call a class as a function")}function q($,ne){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne&&(typeof ne=="object"||typeof ne=="function")?ne:$}function H($,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ne);$.prototype=Object.create(ne&&ne.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),ne&&(Object.setPrototypeOf?Object.setPrototypeOf($,ne):$.__proto__=ne)}var G=(0,O.default)("quill:keyboard"),ee=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",X=(function($){H(ne,$),c(ne,null,[{key:"match",value:function(ce,ye){return ye=Z(ye),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Be){return!!ye[Be]!==ce[Be]&&ye[Be]!==null})?!1:ye.key===(ce.which||ce.keyCode)}}]);function ne(ae,ce){T(this,ne);var ye=q(this,(ne.__proto__||Object.getPrototypeOf(ne)).call(this,ae,ce));return ye.bindings={},Object.keys(ye.options.bindings).forEach(function(Be){Be==="list autofill"&&ae.scroll.whitelist!=null&&!ae.scroll.whitelist.list||ye.options.bindings[Be]&&ye.addBinding(ye.options.bindings[Be])}),ye.addBinding({key:ne.keys.ENTER,shiftKey:null},U),ye.addBinding({key:ne.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ye.addBinding({key:ne.keys.BACKSPACE},{collapsed:!0},K),ye.addBinding({key:ne.keys.DELETE},{collapsed:!0},W)):(ye.addBinding({key:ne.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},K),ye.addBinding({key:ne.keys.DELETE},{collapsed:!0,suffix:/^.?$/},W)),ye.addBinding({key:ne.keys.BACKSPACE},{collapsed:!1},R),ye.addBinding({key:ne.keys.DELETE},{collapsed:!1},R),ye.addBinding({key:ne.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},K),ye.listen(),ye}return c(ne,[{key:"addBinding",value:function(ce){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ue=Z(ce);if(Ue==null||Ue.key==null)return G.warn("Attempted to add invalid keyboard binding",Ue);typeof ye=="function"&&(ye={handler:ye}),typeof Be=="function"&&(Be={handler:Be}),Ue=(0,x.default)(Ue,ye,Be),this.bindings[Ue.key]=this.bindings[Ue.key]||[],this.bindings[Ue.key].push(Ue)}},{key:"listen",value:function(){var ce=this;this.quill.root.addEventListener("keydown",function(ye){if(!ye.defaultPrevented){var Be=ye.which||ye.keyCode,Ue=(ce.bindings[Be]||[]).filter(function(qe){return ne.match(ye,qe)});if(Ue.length!==0){var it=ce.quill.getSelection();if(!(it==null||!ce.quill.hasFocus())){var je=ce.quill.getLine(it.index),dt=o(je,2),st=dt[0],ft=dt[1],Oe=ce.quill.getLeaf(it.index),re=o(Oe,2),xe=re[0],we=re[1],Se=it.length===0?[xe,we]:ce.quill.getLeaf(it.index+it.length),_e=o(Se,2),te=_e[0],Ne=_e[1],fe=xe instanceof N.default.Text?xe.value().slice(0,we):"",pe=te instanceof N.default.Text?te.value().slice(Ne):"",Le={collapsed:it.length===0,empty:it.length===0&&st.length()<=1,format:ce.quill.getFormat(it),offset:ft,prefix:fe,suffix:pe},Qe=Ue.some(function(qe){if(qe.collapsed!=null&&qe.collapsed!==Le.collapsed||qe.empty!=null&&qe.empty!==Le.empty||qe.offset!=null&&qe.offset!==Le.offset)return!1;if(Array.isArray(qe.format)){if(qe.format.every(function(et){return Le.format[et]==null}))return!1}else if(a(qe.format)==="object"&&!Object.keys(qe.format).every(function(et){return qe.format[et]===!0?Le.format[et]!=null:qe.format[et]===!1?Le.format[et]==null:(0,p.default)(qe.format[et],Le.format[et])}))return!1;return qe.prefix!=null&&!qe.prefix.test(Le.prefix)||qe.suffix!=null&&!qe.suffix.test(Le.suffix)?!1:qe.handler.call(ce,it,Le)!==!0});Qe&&ye.preventDefault()}}}})}}]),ne})(z.default);X.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},X.DEFAULTS={bindings:{bold:Q("bold"),italic:Q("italic"),underline:Q("underline"),indent:{key:X.keys.TAB,format:["blockquote","indent","list"],handler:function(ne,ae){if(ae.collapsed&&ae.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:X.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ne,ae){if(ae.collapsed&&ae.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:X.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ne,ae){ae.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):ae.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":B(!0),"outdent code-block":B(!1),"remove tab":{key:X.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ne){this.quill.deleteText(ne.index-1,1,S.default.sources.USER)}},tab:{key:X.keys.TAB,handler:function(ne){this.quill.history.cutoff();var ae=new b.default().retain(ne.index).delete(ne.length).insert("	");this.quill.updateContents(ae,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ne.index+1,S.default.sources.SILENT)}},"list empty enter":{key:X.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ne,ae){this.quill.format("list",!1,S.default.sources.USER),ae.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:X.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ne){var ae=this.quill.getLine(ne.index),ce=o(ae,2),ye=ce[0],Be=ce[1],Ue=(0,x.default)({},ye.formats(),{list:"checked"}),it=new b.default().retain(ne.index).insert(`
`,Ue).retain(ye.length()-Be-1).retain(1,{list:"unchecked"});this.quill.updateContents(it,S.default.sources.USER),this.quill.setSelection(ne.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:X.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ne,ae){var ce=this.quill.getLine(ne.index),ye=o(ce,2),Be=ye[0],Ue=ye[1],it=new b.default().retain(ne.index).insert(`
`,ae.format).retain(Be.length()-Ue-1).retain(1,{header:null});this.quill.updateContents(it,S.default.sources.USER),this.quill.setSelection(ne.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ne,ae){var ce=ae.prefix.length,ye=this.quill.getLine(ne.index),Be=o(ye,2),Ue=Be[0],it=Be[1];if(it>ce)return!0;var je=void 0;switch(ae.prefix.trim()){case"[]":case"[ ]":je="unchecked";break;case"[x]":je="checked";break;case"-":case"*":je="bullet";break;default:je="ordered"}this.quill.insertText(ne.index," ",S.default.sources.USER),this.quill.history.cutoff();var dt=new b.default().retain(ne.index-it).delete(ce+1).retain(Ue.length()-2-it).retain(1,{list:je});this.quill.updateContents(dt,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ne.index-ce,S.default.sources.SILENT)}},"code exit":{key:X.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ne){var ae=this.quill.getLine(ne.index),ce=o(ae,2),ye=ce[0],Be=ce[1],Ue=new b.default().retain(ne.index+ye.length()-Be-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Ue,S.default.sources.USER)}},"embed left":J(X.keys.LEFT,!1),"embed left shift":J(X.keys.LEFT,!0),"embed right":J(X.keys.RIGHT,!1),"embed right shift":J(X.keys.RIGHT,!0)}};function J($,ne){var ae,ce=$===X.keys.LEFT?"prefix":"suffix";return ae={key:$,shiftKey:ne,altKey:null},D(ae,ce,/^$/),D(ae,"handler",function(Be){var Ue=Be.index;$===X.keys.RIGHT&&(Ue+=Be.length+1);var it=this.quill.getLeaf(Ue),je=o(it,1),dt=je[0];return dt instanceof N.default.Embed?($===X.keys.LEFT?ne?this.quill.setSelection(Be.index-1,Be.length+1,S.default.sources.USER):this.quill.setSelection(Be.index-1,S.default.sources.USER):ne?this.quill.setSelection(Be.index,Be.length+1,S.default.sources.USER):this.quill.setSelection(Be.index+Be.length+1,S.default.sources.USER),!1):!0}),ae}function K($,ne){if(!($.index===0||this.quill.getLength()<=1)){var ae=this.quill.getLine($.index),ce=o(ae,1),ye=ce[0],Be={};if(ne.offset===0){var Ue=this.quill.getLine($.index-1),it=o(Ue,1),je=it[0];if(je!=null&&je.length()>1){var dt=ye.formats(),st=this.quill.getFormat($.index-1,1);Be=w.default.attributes.diff(dt,st)||{}}}var ft=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ne.prefix)?2:1;this.quill.deleteText($.index-ft,ft,S.default.sources.USER),Object.keys(Be).length>0&&this.quill.formatLine($.index-ft,ft,Be,S.default.sources.USER),this.quill.focus()}}function W($,ne){var ae=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ne.suffix)?2:1;if(!($.index>=this.quill.getLength()-ae)){var ce={},ye=0,Be=this.quill.getLine($.index),Ue=o(Be,1),it=Ue[0];if(ne.offset>=it.length()-1){var je=this.quill.getLine($.index+1),dt=o(je,1),st=dt[0];if(st){var ft=it.formats(),Oe=this.quill.getFormat($.index,1);ce=w.default.attributes.diff(ft,Oe)||{},ye=st.length()}}this.quill.deleteText($.index,ae,S.default.sources.USER),Object.keys(ce).length>0&&this.quill.formatLine($.index+ye-1,ae,ce,S.default.sources.USER)}}function R($){var ne=this.quill.getLines($),ae={};if(ne.length>1){var ce=ne[0].formats(),ye=ne[ne.length-1].formats();ae=w.default.attributes.diff(ye,ce)||{}}this.quill.deleteText($,S.default.sources.USER),Object.keys(ae).length>0&&this.quill.formatLine($.index,1,ae,S.default.sources.USER),this.quill.setSelection($.index,S.default.sources.SILENT),this.quill.focus()}function U($,ne){var ae=this;$.length>0&&this.quill.scroll.deleteAt($.index,$.length);var ce=Object.keys(ne.format).reduce(function(ye,Be){return N.default.query(Be,N.default.Scope.BLOCK)&&!Array.isArray(ne.format[Be])&&(ye[Be]=ne.format[Be]),ye},{});this.quill.insertText($.index,`
`,ce,S.default.sources.USER),this.quill.setSelection($.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(ne.format).forEach(function(ye){ce[ye]==null&&(Array.isArray(ne.format[ye])||ye!=="link"&&ae.quill.format(ye,ne.format[ye],S.default.sources.USER))})}function B($){return{key:X.keys.TAB,shiftKey:!$,format:{"code-block":!0},handler:function(ae){var ce=N.default.query("code-block"),ye=ae.index,Be=ae.length,Ue=this.quill.scroll.descendant(ce,ye),it=o(Ue,2),je=it[0],dt=it[1];if(je!=null){var st=this.quill.getIndex(je),ft=je.newlineIndex(dt,!0)+1,Oe=je.newlineIndex(st+dt+Be),re=je.domNode.textContent.slice(ft,Oe).split(`
`);dt=0,re.forEach(function(xe,we){$?(je.insertAt(ft+dt,ce.TAB),dt+=ce.TAB.length,we===0?ye+=ce.TAB.length:Be+=ce.TAB.length):xe.startsWith(ce.TAB)&&(je.deleteAt(ft+dt,ce.TAB.length),dt-=ce.TAB.length,we===0?ye-=ce.TAB.length:Be-=ce.TAB.length),dt+=xe.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(ye,Be,S.default.sources.SILENT)}}}}function Q($){return{key:$[0].toUpperCase(),shortKey:!0,handler:function(ae,ce){this.quill.format($,!ce.format[$],S.default.sources.USER)}}}function Z($){if(typeof $=="string"||typeof $=="number")return Z({key:$});if((typeof $>"u"?"undefined":a($))==="object"&&($=(0,f.default)($,!1)),typeof $.key=="string")if(X.keys[$.key.toUpperCase()]!=null)$.key=X.keys[$.key.toUpperCase()];else if($.key.length===1)$.key=$.key.toUpperCase().charCodeAt(0);else return null;return $.shortKey&&($[ee]=$.shortKey,delete $.shortKey),$}r.default=X,r.SHORTKEY=ee}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function w(k,N){var j=[],S=!0,A=!1,O=void 0;try{for(var M=k[Symbol.iterator](),z;!(S=(z=M.next()).done)&&(j.push(z.value),!(N&&j.length===N));S=!0);}catch(I){A=!0,O=I}finally{try{!S&&M.return&&M.return()}finally{if(A)throw O}}return j}return function(k,N){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return w(k,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function w(k,N,j){k===null&&(k=Function.prototype);var S=Object.getOwnPropertyDescriptor(k,N);if(S===void 0){var A=Object.getPrototypeOf(k);return A===null?void 0:w(A,N,j)}else{if("value"in S)return S.value;var O=S.get;return O===void 0?void 0:O.call(j)}},c=(function(){function w(k,N){for(var j=0;j<N.length;j++){var S=N[j];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(k,S.key,S)}}return function(k,N,j){return N&&w(k.prototype,N),j&&w(k,j),k}})(),u=i(0),f=m(u),h=i(7),p=m(h);function m(w){return w&&w.__esModule?w:{default:w}}function x(w,k){if(!(w instanceof k))throw new TypeError("Cannot call a class as a function")}function v(w,k){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:w}function b(w,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);w.prototype=Object.create(k&&k.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(w,k):w.__proto__=k)}var y=(function(w){b(k,w),c(k,null,[{key:"value",value:function(){}}]);function k(N,j){x(this,k);var S=v(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,N));return S.selection=j,S.textNode=document.createTextNode(k.CONTENTS),S.domNode.appendChild(S.textNode),S._length=0,S}return c(k,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(j,S){if(this._length!==0)return o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,j,S);for(var A=this,O=0;A!=null&&A.statics.scope!==f.default.Scope.BLOCK_BLOT;)O+=A.offset(A.parent),A=A.parent;A!=null&&(this._length=k.CONTENTS.length,A.optimize(),A.formatAt(O,k.CONTENTS.length,j,S),this._length=0)}},{key:"index",value:function(j,S){return j===this.textNode?0:o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"index",this).call(this,j,S)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var j=this.textNode,S=this.selection.getNativeRange(),A=void 0,O=void 0,M=void 0;if(S!=null&&S.start.node===j&&S.end.node===j){var z=[j,S.start.offset,S.end.offset];A=z[0],O=z[1],M=z[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==k.CONTENTS){var I=this.textNode.data.split(k.CONTENTS).join("");this.next instanceof p.default?(A=this.next.domNode,this.next.insertAt(0,I),this.textNode.data=k.CONTENTS):(this.textNode.data=I,this.parent.insertBefore(f.default.create(this.textNode),this),this.textNode=document.createTextNode(k.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),O!=null){var D=[O,M].map(function(q){return Math.max(0,Math.min(A.data.length,q-1))}),T=a(D,2);return O=T[0],M=T[1],{startNode:A,startOffset:O,endNode:A,endOffset:M}}}}},{key:"update",value:function(j,S){var A=this;if(j.some(function(M){return M.type==="characterData"&&M.target===A.textNode})){var O=this.restore();O&&(S.range=O)}}},{key:"value",value:function(){return""}}]),k})(f.default.Embed);y.blotName="cursor",y.className="ql-cursor",y.tagName="span",y.CONTENTS="\uFEFF",r.default=y}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=f(a),c=i(4),u=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function h(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function p(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function m(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var x=(function(v){m(b,v);function b(){return h(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return b})(o.default.Container);x.allowedChildren=[u.default,c.BlockEmbed,x],r.default=x}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var a=(function(){function y(w,k){for(var N=0;N<k.length;N++){var j=k[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,k,N){return k&&y(w.prototype,k),N&&y(w,N),w}})(),o=function y(w,k,N){w===null&&(w=Function.prototype);var j=Object.getOwnPropertyDescriptor(w,k);if(j===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:y(S,k,N)}else{if("value"in j)return j.value;var A=j.get;return A===void 0?void 0:A.call(N)}},c=i(0),u=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function h(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function p(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function m(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var x=(function(y){m(w,y);function w(){return h(this,w),p(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"value",value:function(N){var j=o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,N);return j.startsWith("rgb(")?(j=j.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+j.split(",").map(function(S){return("00"+parseInt(S).toString(16)).slice(-2)}).join("")):j}}]),w})(u.default.Attributor.Style),v=new u.default.Attributor.Class("color","ql-color",{scope:u.default.Scope.INLINE}),b=new x("color","color",{scope:u.default.Scope.INLINE});r.ColorAttributor=x,r.ColorClass=v,r.ColorStyle=b}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var a=(function(){function b(y,w){for(var k=0;k<w.length;k++){var N=w[k];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,w,k){return w&&b(y.prototype,w),k&&b(y,k),y}})(),o=function b(y,w,k){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,w);if(N===void 0){var j=Object.getPrototypeOf(y);return j===null?void 0:b(j,w,k)}else{if("value"in N)return N.value;var S=N.get;return S===void 0?void 0:S.call(k)}},c=i(6),u=f(c);function f(b){return b&&b.__esModule?b:{default:b}}function h(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function p(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function m(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var x=(function(b){m(y,b);function y(){return h(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"format",value:function(k,N){if(k!==this.statics.blotName||!N)return o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,k,N);N=this.constructor.sanitize(N),this.domNode.setAttribute("href",N)}}],[{key:"create",value:function(k){var N=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,k);return k=this.sanitize(k),N.setAttribute("href",k),N.setAttribute("rel","noopener noreferrer"),N.setAttribute("target","_blank"),N}},{key:"formats",value:function(k){return k.getAttribute("href")}},{key:"sanitize",value:function(k){return v(k,this.PROTOCOL_WHITELIST)?k:this.SANITIZED_URL}}]),y})(u.default);x.blotName="link",x.tagName="A",x.SANITIZED_URL="about:blank",x.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function v(b,y){var w=document.createElement("a");w.href=b;var k=w.href.slice(0,w.href.indexOf(":"));return y.indexOf(k)>-1}r.default=x,r.sanitize=v}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},o=(function(){function y(w,k){for(var N=0;N<k.length;N++){var j=k[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,k,N){return k&&y(w.prototype,k),N&&y(w,N),w}})(),c=i(23),u=p(c),f=i(107),h=p(f);function p(y){return y&&y.__esModule?y:{default:y}}function m(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}var x=0;function v(y,w){y.setAttribute(w,y.getAttribute(w)!=="true")}var b=(function(){function y(w){var k=this;m(this,y),this.select=w,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){k.togglePicker()}),this.label.addEventListener("keydown",function(N){switch(N.keyCode){case u.default.keys.ENTER:k.togglePicker();break;case u.default.keys.ESCAPE:k.escape(),N.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(y,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),v(this.label,"aria-expanded"),v(this.options,"aria-hidden")}},{key:"buildItem",value:function(k){var N=this,j=document.createElement("span");return j.tabIndex="0",j.setAttribute("role","button"),j.classList.add("ql-picker-item"),k.hasAttribute("value")&&j.setAttribute("data-value",k.getAttribute("value")),k.textContent&&j.setAttribute("data-label",k.textContent),j.addEventListener("click",function(){N.selectItem(j,!0)}),j.addEventListener("keydown",function(S){switch(S.keyCode){case u.default.keys.ENTER:N.selectItem(j,!0),S.preventDefault();break;case u.default.keys.ESCAPE:N.escape(),S.preventDefault();break}}),j}},{key:"buildLabel",value:function(){var k=document.createElement("span");return k.classList.add("ql-picker-label"),k.innerHTML=h.default,k.tabIndex="0",k.setAttribute("role","button"),k.setAttribute("aria-expanded","false"),this.container.appendChild(k),k}},{key:"buildOptions",value:function(){var k=this,N=document.createElement("span");N.classList.add("ql-picker-options"),N.setAttribute("aria-hidden","true"),N.tabIndex="-1",N.id="ql-picker-options-"+x,x+=1,this.label.setAttribute("aria-controls",N.id),this.options=N,[].slice.call(this.select.options).forEach(function(j){var S=k.buildItem(j);N.appendChild(S),j.selected===!0&&k.selectItem(S)}),this.container.appendChild(N)}},{key:"buildPicker",value:function(){var k=this;[].slice.call(this.select.attributes).forEach(function(N){k.container.setAttribute(N.name,N.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var k=this;this.close(),setTimeout(function(){return k.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(k){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,j=this.container.querySelector(".ql-selected");if(k!==j&&(j!=null&&j.classList.remove("ql-selected"),k!=null&&(k.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(k.parentNode.children,k),k.hasAttribute("data-value")?this.label.setAttribute("data-value",k.getAttribute("data-value")):this.label.removeAttribute("data-value"),k.hasAttribute("data-label")?this.label.setAttribute("data-label",k.getAttribute("data-label")):this.label.removeAttribute("data-label"),N))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var S=document.createEvent("Event");S.initEvent("change",!0,!0),this.select.dispatchEvent(S)}this.close()}}},{key:"update",value:function(){var k=void 0;if(this.select.selectedIndex>-1){var N=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];k=this.select.options[this.select.selectedIndex],this.selectItem(N)}else this.selectItem(null);var j=k!=null&&k!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",j)}}]),y})();r.default=b}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=G(a),c=i(5),u=G(c),f=i(4),h=G(f),p=i(16),m=G(p),x=i(25),v=G(x),b=i(24),y=G(b),w=i(35),k=G(w),N=i(6),j=G(N),S=i(22),A=G(S),O=i(7),M=G(O),z=i(55),I=G(z),D=i(42),T=G(D),q=i(23),H=G(q);function G(ee){return ee&&ee.__esModule?ee:{default:ee}}u.default.register({"blots/block":h.default,"blots/block/embed":f.BlockEmbed,"blots/break":m.default,"blots/container":v.default,"blots/cursor":y.default,"blots/embed":k.default,"blots/inline":j.default,"blots/scroll":A.default,"blots/text":M.default,"modules/clipboard":I.default,"modules/history":T.default,"modules/keyboard":H.default}),o.default.register(h.default,m.default,y.default,j.default,A.default,M.default),r.default=u.default}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=(function(){function c(u){this.domNode=u,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(c.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),c.create=function(u){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var f;return Array.isArray(this.tagName)?(typeof u=="string"&&(u=u.toUpperCase(),parseInt(u).toString()===u&&(u=parseInt(u))),typeof u=="number"?f=document.createElement(this.tagName[u-1]):this.tagName.indexOf(u)>-1?f=document.createElement(u):f=document.createElement(this.tagName[0])):f=document.createElement(this.tagName),this.className&&f.classList.add(this.className),f},c.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},c.prototype.clone=function(){var u=this.domNode.cloneNode(!1);return a.create(u)},c.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},c.prototype.deleteAt=function(u,f){var h=this.isolate(u,f);h.remove()},c.prototype.formatAt=function(u,f,h,p){var m=this.isolate(u,f);if(a.query(h,a.Scope.BLOT)!=null&&p)m.wrap(h,p);else if(a.query(h,a.Scope.ATTRIBUTE)!=null){var x=a.create(this.statics.scope);m.wrap(x),x.format(h,p)}},c.prototype.insertAt=function(u,f,h){var p=h==null?a.create("text",f):a.create(f,h),m=this.split(u);this.parent.insertBefore(p,m)},c.prototype.insertInto=function(u,f){f===void 0&&(f=null),this.parent!=null&&this.parent.children.remove(this);var h=null;u.children.insertBefore(this,f),f!=null&&(h=f.domNode),(this.domNode.parentNode!=u.domNode||this.domNode.nextSibling!=h)&&u.domNode.insertBefore(this.domNode,h),this.parent=u,this.attach()},c.prototype.isolate=function(u,f){var h=this.split(u);return h.split(f),h},c.prototype.length=function(){return 1},c.prototype.offset=function(u){return u===void 0&&(u=this.parent),this.parent==null||this==u?0:this.parent.children.offset(this)+this.parent.offset(u)},c.prototype.optimize=function(u){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},c.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},c.prototype.replace=function(u){u.parent!=null&&(u.parent.insertBefore(this,u.next),u.remove())},c.prototype.replaceWith=function(u,f){var h=typeof u=="string"?a.create(u,f):u;return h.replace(this),h},c.prototype.split=function(u,f){return u===0?this:this.next},c.prototype.update=function(u,f){},c.prototype.wrap=function(u,f){var h=typeof u=="string"?a.create(u,f):u;return this.parent!=null&&this.parent.insertBefore(h,this.next),h.appendChild(this),h},c.blotName="abstract",c})();r.default=o}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(12),o=i(32),c=i(33),u=i(1),f=(function(){function h(p){this.attributes={},this.domNode=p,this.build()}return h.prototype.attribute=function(p,m){m?p.add(this.domNode,m)&&(p.value(this.domNode)!=null?this.attributes[p.attrName]=p:delete this.attributes[p.attrName]):(p.remove(this.domNode),delete this.attributes[p.attrName])},h.prototype.build=function(){var p=this;this.attributes={};var m=a.default.keys(this.domNode),x=o.default.keys(this.domNode),v=c.default.keys(this.domNode);m.concat(x).concat(v).forEach(function(b){var y=u.query(b,u.Scope.ATTRIBUTE);y instanceof a.default&&(p.attributes[y.attrName]=y)})},h.prototype.copy=function(p){var m=this;Object.keys(this.attributes).forEach(function(x){var v=m.attributes[x].value(m.domNode);p.format(x,v)})},h.prototype.move=function(p){var m=this;this.copy(p),Object.keys(this.attributes).forEach(function(x){m.attributes[x].remove(m.domNode)}),this.attributes={}},h.prototype.values=function(){var p=this;return Object.keys(this.attributes).reduce(function(m,x){return m[x]=p.attributes[x].value(p.domNode),m},{})},h})();r.default=f}),(function(n,r,i){var a=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])};return function(h,p){f(h,p);function m(){this.constructor=h}h.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function c(f,h){var p=f.getAttribute("class")||"";return p.split(/\s+/).filter(function(m){return m.indexOf(h+"-")===0})}var u=(function(f){a(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return h.keys=function(p){return(p.getAttribute("class")||"").split(/\s+/).map(function(m){return m.split("-").slice(0,-1).join("-")})},h.prototype.add=function(p,m){return this.canAdd(p,m)?(this.remove(p),p.classList.add(this.keyName+"-"+m),!0):!1},h.prototype.remove=function(p){var m=c(p,this.keyName);m.forEach(function(x){p.classList.remove(x)}),p.classList.length===0&&p.removeAttribute("class")},h.prototype.value=function(p){var m=c(p,this.keyName)[0]||"",x=m.slice(this.keyName.length+1);return this.canAdd(p,x)?x:""},h})(o.default);r.default=u}),(function(n,r,i){var a=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])};return function(h,p){f(h,p);function m(){this.constructor=h}h.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function c(f){var h=f.split("-"),p=h.slice(1).map(function(m){return m[0].toUpperCase()+m.slice(1)}).join("");return h[0]+p}var u=(function(f){a(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return h.keys=function(p){return(p.getAttribute("style")||"").split(";").map(function(m){var x=m.split(":");return x[0].trim()})},h.prototype.add=function(p,m){return this.canAdd(p,m)?(p.style[c(this.keyName)]=m,!0):!1},h.prototype.remove=function(p){p.style[c(this.keyName)]="",p.getAttribute("style")||p.removeAttribute("style")},h.prototype.value=function(p){var m=p.style[c(this.keyName)];return this.canAdd(p,m)?m:""},h})(o.default);r.default=u}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function u(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,h,p){return h&&u(f.prototype,h),p&&u(f,p),f}})();function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var c=(function(){function u(f,h){o(this,u),this.quill=f,this.options=h,this.modules={}}return a(u,[{key:"init",value:function(){var h=this;Object.keys(this.options.modules).forEach(function(p){h.modules[p]==null&&h.addModule(p)})}},{key:"addModule",value:function(h){var p=this.quill.constructor.import("modules/"+h);return this.modules[h]=new p(this.quill,this.options.modules[h]||{}),this.modules[h]}}]),u})();c.DEFAULTS={modules:{}},c.themes={default:c},r.default=c}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function w(k,N){for(var j=0;j<N.length;j++){var S=N[j];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(k,S.key,S)}}return function(k,N,j){return N&&w(k.prototype,N),j&&w(k,j),k}})(),o=function w(k,N,j){k===null&&(k=Function.prototype);var S=Object.getOwnPropertyDescriptor(k,N);if(S===void 0){var A=Object.getPrototypeOf(k);return A===null?void 0:w(A,N,j)}else{if("value"in S)return S.value;var O=S.get;return O===void 0?void 0:O.call(j)}},c=i(0),u=p(c),f=i(7),h=p(f);function p(w){return w&&w.__esModule?w:{default:w}}function m(w,k){if(!(w instanceof k))throw new TypeError("Cannot call a class as a function")}function x(w,k){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:w}function v(w,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);w.prototype=Object.create(k&&k.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(w,k):w.__proto__=k)}var b="\uFEFF",y=(function(w){v(k,w);function k(N){m(this,k);var j=x(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,N));return j.contentNode=document.createElement("span"),j.contentNode.setAttribute("contenteditable",!1),[].slice.call(j.domNode.childNodes).forEach(function(S){j.contentNode.appendChild(S)}),j.leftGuard=document.createTextNode(b),j.rightGuard=document.createTextNode(b),j.domNode.appendChild(j.leftGuard),j.domNode.appendChild(j.contentNode),j.domNode.appendChild(j.rightGuard),j}return a(k,[{key:"index",value:function(j,S){return j===this.leftGuard?0:j===this.rightGuard?1:o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"index",this).call(this,j,S)}},{key:"restore",value:function(j){var S=void 0,A=void 0,O=j.data.split(b).join("");if(j===this.leftGuard)if(this.prev instanceof h.default){var M=this.prev.length();this.prev.insertAt(M,O),S={startNode:this.prev.domNode,startOffset:M+O.length}}else A=document.createTextNode(O),this.parent.insertBefore(u.default.create(A),this),S={startNode:A,startOffset:O.length};else j===this.rightGuard&&(this.next instanceof h.default?(this.next.insertAt(0,O),S={startNode:this.next.domNode,startOffset:O.length}):(A=document.createTextNode(O),this.parent.insertBefore(u.default.create(A),this.next),S={startNode:A,startOffset:O.length}));return j.data=b,S}},{key:"update",value:function(j,S){var A=this;j.forEach(function(O){if(O.type==="characterData"&&(O.target===A.leftGuard||O.target===A.rightGuard)){var M=A.restore(O.target);M&&(S.range=M)}})}}]),k})(u.default.Embed);r.default=y}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var a=i(0),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}var u={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},f=new o.default.Attributor.Attribute("align","align",u),h=new o.default.Attributor.Class("align","ql-align",u),p=new o.default.Attributor.Style("align","text-align",u);r.AlignAttribute=f,r.AlignClass=h,r.AlignStyle=p}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var a=i(0),o=u(a),c=i(26);function u(p){return p&&p.__esModule?p:{default:p}}var f=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),h=new c.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=f,r.BackgroundStyle=h}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var a=i(0),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}var u={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},f=new o.default.Attributor.Attribute("direction","dir",u),h=new o.default.Attributor.Class("direction","ql-direction",u),p=new o.default.Attributor.Style("direction","direction",u);r.DirectionAttribute=f,r.DirectionClass=h,r.DirectionStyle=p}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var a=(function(){function w(k,N){for(var j=0;j<N.length;j++){var S=N[j];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(k,S.key,S)}}return function(k,N,j){return N&&w(k.prototype,N),j&&w(k,j),k}})(),o=function w(k,N,j){k===null&&(k=Function.prototype);var S=Object.getOwnPropertyDescriptor(k,N);if(S===void 0){var A=Object.getPrototypeOf(k);return A===null?void 0:w(A,N,j)}else{if("value"in S)return S.value;var O=S.get;return O===void 0?void 0:O.call(j)}},c=i(0),u=f(c);function f(w){return w&&w.__esModule?w:{default:w}}function h(w,k){if(!(w instanceof k))throw new TypeError("Cannot call a class as a function")}function p(w,k){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:w}function m(w,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);w.prototype=Object.create(k&&k.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(w,k):w.__proto__=k)}var x={scope:u.default.Scope.INLINE,whitelist:["serif","monospace"]},v=new u.default.Attributor.Class("font","ql-font",x),b=(function(w){m(k,w);function k(){return h(this,k),p(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return a(k,[{key:"value",value:function(j){return o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"value",this).call(this,j).replace(/["']/g,"")}}]),k})(u.default.Attributor.Style),y=new b("font","font-family",x);r.FontStyle=y,r.FontClass=v}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var a=i(0),o=c(a);function c(h){return h&&h.__esModule?h:{default:h}}var u=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),f=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=u,r.SizeStyle=f}),(function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var a=(function(){function N(j,S){for(var A=0;A<S.length;A++){var O=S[A];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(j,O.key,O)}}return function(j,S,A){return S&&N(j.prototype,S),A&&N(j,A),j}})(),o=i(0),c=m(o),u=i(5),f=m(u),h=i(9),p=m(h);function m(N){return N&&N.__esModule?N:{default:N}}function x(N,j){if(!(N instanceof j))throw new TypeError("Cannot call a class as a function")}function v(N,j){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:N}function b(N,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);N.prototype=Object.create(j&&j.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(N,j):N.__proto__=j)}var y=(function(N){b(j,N);function j(S,A){x(this,j);var O=v(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,S,A));return O.lastRecorded=0,O.ignoreChange=!1,O.clear(),O.quill.on(f.default.events.EDITOR_CHANGE,function(M,z,I,D){M!==f.default.events.TEXT_CHANGE||O.ignoreChange||(!O.options.userOnly||D===f.default.sources.USER?O.record(z,I):O.transform(z))}),O.quill.keyboard.addBinding({key:"Z",shortKey:!0},O.undo.bind(O)),O.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},O.redo.bind(O)),/Win/i.test(navigator.platform)&&O.quill.keyboard.addBinding({key:"Y",shortKey:!0},O.redo.bind(O)),O}return a(j,[{key:"change",value:function(A,O){if(this.stack[A].length!==0){var M=this.stack[A].pop();this.stack[O].push(M),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(M[A],f.default.sources.USER),this.ignoreChange=!1;var z=k(M[A]);this.quill.setSelection(z)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(A,O){if(A.ops.length!==0){this.stack.redo=[];var M=this.quill.getContents().diff(O),z=Date.now();if(this.lastRecorded+this.options.delay>z&&this.stack.undo.length>0){var I=this.stack.undo.pop();M=M.compose(I.undo),A=I.redo.compose(A)}else this.lastRecorded=z;this.stack.undo.push({redo:A,undo:M}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(A){this.stack.undo.forEach(function(O){O.undo=A.transform(O.undo,!0),O.redo=A.transform(O.redo,!0)}),this.stack.redo.forEach(function(O){O.undo=A.transform(O.undo,!0),O.redo=A.transform(O.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),j})(p.default);y.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function w(N){var j=N.ops[N.ops.length-1];return j==null?!1:j.insert!=null?typeof j.insert=="string"&&j.insert.endsWith(`
`):j.attributes!=null?Object.keys(j.attributes).some(function(S){return c.default.query(S,c.default.Scope.BLOCK)!=null}):!1}function k(N){var j=N.reduce(function(A,O){return A+=O.delete||0,A},0),S=N.length()-j;return w(N)&&(S-=1),S}r.default=y,r.getLastChangeIndex=k}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var a=(function(){function U(B,Q){for(var Z=0;Z<Q.length;Z++){var $=Q[Z];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(B,$.key,$)}}return function(B,Q,Z){return Q&&U(B.prototype,Q),Z&&U(B,Z),B}})(),o=function U(B,Q,Z){B===null&&(B=Function.prototype);var $=Object.getOwnPropertyDescriptor(B,Q);if($===void 0){var ne=Object.getPrototypeOf(B);return ne===null?void 0:U(ne,Q,Z)}else{if("value"in $)return $.value;var ae=$.get;return ae===void 0?void 0:ae.call(Z)}},c=i(3),u=z(c),f=i(2),h=z(f),p=i(8),m=z(p),x=i(23),v=z(x),b=i(34),y=z(b),w=i(59),k=z(w),N=i(60),j=z(N),S=i(28),A=z(S),O=i(61),M=z(O);function z(U){return U&&U.__esModule?U:{default:U}}function I(U,B){if(!(U instanceof B))throw new TypeError("Cannot call a class as a function")}function D(U,B){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:U}function T(U,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);U.prototype=Object.create(B&&B.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(U,B):U.__proto__=B)}var q=[!1,"center","right","justify"],H=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],G=[!1,"serif","monospace"],ee=["1","2","3",!1],X=["small",!1,"large","huge"],J=(function(U){T(B,U);function B(Q,Z){I(this,B);var $=D(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,Q,Z)),ne=function ae(ce){if(!document.body.contains(Q.root))return document.body.removeEventListener("click",ae);$.tooltip!=null&&!$.tooltip.root.contains(ce.target)&&document.activeElement!==$.tooltip.textbox&&!$.quill.hasFocus()&&$.tooltip.hide(),$.pickers!=null&&$.pickers.forEach(function(ye){ye.container.contains(ce.target)||ye.close()})};return Q.emitter.listenDOM("click",document.body,ne),$}return a(B,[{key:"addModule",value:function(Z){var $=o(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"addModule",this).call(this,Z);return Z==="toolbar"&&this.extendToolbar($),$}},{key:"buildButtons",value:function(Z,$){Z.forEach(function(ne){var ae=ne.getAttribute("class")||"";ae.split(/\s+/).forEach(function(ce){if(ce.startsWith("ql-")&&(ce=ce.slice(3),$[ce]!=null))if(ce==="direction")ne.innerHTML=$[ce][""]+$[ce].rtl;else if(typeof $[ce]=="string")ne.innerHTML=$[ce];else{var ye=ne.value||"";ye!=null&&$[ce][ye]&&(ne.innerHTML=$[ce][ye])}})})}},{key:"buildPickers",value:function(Z,$){var ne=this;this.pickers=Z.map(function(ce){if(ce.classList.contains("ql-align"))return ce.querySelector("option")==null&&R(ce,q),new j.default(ce,$.align);if(ce.classList.contains("ql-background")||ce.classList.contains("ql-color")){var ye=ce.classList.contains("ql-background")?"background":"color";return ce.querySelector("option")==null&&R(ce,H,ye==="background"?"#ffffff":"#000000"),new k.default(ce,$[ye])}else return ce.querySelector("option")==null&&(ce.classList.contains("ql-font")?R(ce,G):ce.classList.contains("ql-header")?R(ce,ee):ce.classList.contains("ql-size")&&R(ce,X)),new A.default(ce)});var ae=function(){ne.pickers.forEach(function(ye){ye.update()})};this.quill.on(m.default.events.EDITOR_CHANGE,ae)}}]),B})(y.default);J.DEFAULTS=(0,u.default)(!0,{},y.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var B=this,Q=this.container.querySelector("input.ql-image[type=file]");Q==null&&(Q=document.createElement("input"),Q.setAttribute("type","file"),Q.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Q.classList.add("ql-image"),Q.addEventListener("change",function(){if(Q.files!=null&&Q.files[0]!=null){var Z=new FileReader;Z.onload=function($){var ne=B.quill.getSelection(!0);B.quill.updateContents(new h.default().retain(ne.index).delete(ne.length).insert({image:$.target.result}),m.default.sources.USER),B.quill.setSelection(ne.index+1,m.default.sources.SILENT),Q.value=""},Z.readAsDataURL(Q.files[0])}}),this.container.appendChild(Q)),Q.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var K=(function(U){T(B,U);function B(Q,Z){I(this,B);var $=D(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,Q,Z));return $.textbox=$.root.querySelector('input[type="text"]'),$.listen(),$}return a(B,[{key:"listen",value:function(){var Z=this;this.textbox.addEventListener("keydown",function($){v.default.match($,"enter")?(Z.save(),$.preventDefault()):v.default.match($,"escape")&&(Z.cancel(),$.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),$!=null?this.textbox.value=$:Z!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Z)||""),this.root.setAttribute("data-mode",Z)}},{key:"restoreFocus",value:function(){var Z=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Z}},{key:"save",value:function(){var Z=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var $=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Z,m.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Z,m.default.sources.USER)),this.quill.root.scrollTop=$;break}case"video":Z=W(Z);case"formula":{if(!Z)break;var ne=this.quill.getSelection(!0);if(ne!=null){var ae=ne.index+ne.length;this.quill.insertEmbed(ae,this.root.getAttribute("data-mode"),Z,m.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ae+1," ",m.default.sources.USER),this.quill.setSelection(ae+2,m.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),B})(M.default);function W(U){var B=U.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||U.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return B?(B[1]||"https")+"://www.youtube.com/embed/"+B[2]+"?showinfo=0":(B=U.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(B[1]||"https")+"://player.vimeo.com/video/"+B[2]+"/":U}function R(U,B){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;B.forEach(function(Z){var $=document.createElement("option");Z===Q?$.setAttribute("selected","selected"):$.setAttribute("value",Z),U.appendChild($)})}r.BaseTooltip=K,r.default=J}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];this.insertBefore(c[0],null),c.length>1&&this.append.apply(this,c.slice(1))},o.prototype.contains=function(c){for(var u,f=this.iterator();u=f();)if(u===c)return!0;return!1},o.prototype.insertBefore=function(c,u){c&&(c.next=u,u!=null?(c.prev=u.prev,u.prev!=null&&(u.prev.next=c),u.prev=c,u===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)},o.prototype.offset=function(c){for(var u=0,f=this.head;f!=null;){if(f===c)return u;u+=f.length(),f=f.next}return-1},o.prototype.remove=function(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)},o.prototype.iterator=function(c){return c===void 0&&(c=this.head),function(){var u=c;return c!=null&&(c=c.next),u}},o.prototype.find=function(c,u){u===void 0&&(u=!1);for(var f,h=this.iterator();f=h();){var p=f.length();if(c<p||u&&c===p&&(f.next==null||f.next.length()!==0))return[f,c];c-=p}return[null,0]},o.prototype.forEach=function(c){for(var u,f=this.iterator();u=f();)c(u)},o.prototype.forEachAt=function(c,u,f){if(!(u<=0))for(var h=this.find(c),p=h[0],m=h[1],x,v=c-m,b=this.iterator(p);(x=b())&&v<c+u;){var y=x.length();c>v?f(x,c-v,Math.min(u,v+y-c)):f(x,0,Math.min(y,c+u-v)),v+=y}},o.prototype.map=function(c){return this.reduce(function(u,f){return u.push(c(f)),u},[])},o.prototype.reduce=function(c,u){for(var f,h=this.iterator();f=h();)u=c(u,f);return u},o})();r.default=a}),(function(n,r,i){var a=this&&this.__extends||(function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var v in x)x.hasOwnProperty(v)&&(m[v]=x[v])};return function(m,x){p(m,x);function v(){this.constructor=m}m.prototype=x===null?Object.create(x):(v.prototype=x.prototype,new v)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),c=i(1),u={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},f=100,h=(function(p){a(m,p);function m(x){var v=p.call(this,x)||this;return v.scroll=v,v.observer=new MutationObserver(function(b){v.update(b)}),v.observer.observe(v.domNode,u),v.attach(),v}return m.prototype.detach=function(){p.prototype.detach.call(this),this.observer.disconnect()},m.prototype.deleteAt=function(x,v){this.update(),x===0&&v===this.length()?this.children.forEach(function(b){b.remove()}):p.prototype.deleteAt.call(this,x,v)},m.prototype.formatAt=function(x,v,b,y){this.update(),p.prototype.formatAt.call(this,x,v,b,y)},m.prototype.insertAt=function(x,v,b){this.update(),p.prototype.insertAt.call(this,x,v,b)},m.prototype.optimize=function(x,v){var b=this;x===void 0&&(x=[]),v===void 0&&(v={}),p.prototype.optimize.call(this,v);for(var y=[].slice.call(this.observer.takeRecords());y.length>0;)x.push(y.pop());for(var w=function(S,A){A===void 0&&(A=!0),!(S==null||S===b)&&S.domNode.parentNode!=null&&(S.domNode[c.DATA_KEY].mutations==null&&(S.domNode[c.DATA_KEY].mutations=[]),A&&w(S.parent))},k=function(S){S.domNode[c.DATA_KEY]==null||S.domNode[c.DATA_KEY].mutations==null||(S instanceof o.default&&S.children.forEach(k),S.optimize(v))},N=x,j=0;N.length>0;j+=1){if(j>=f)throw new Error("[Parchment] Maximum optimize iterations reached");for(N.forEach(function(S){var A=c.find(S.target,!0);A!=null&&(A.domNode===S.target&&(S.type==="childList"?(w(c.find(S.previousSibling,!1)),[].forEach.call(S.addedNodes,function(O){var M=c.find(O,!1);w(M,!1),M instanceof o.default&&M.children.forEach(function(z){w(z,!1)})})):S.type==="attributes"&&w(A.prev)),w(A))}),this.children.forEach(k),N=[].slice.call(this.observer.takeRecords()),y=N.slice();y.length>0;)x.push(y.pop())}},m.prototype.update=function(x,v){var b=this;v===void 0&&(v={}),x=x||this.observer.takeRecords(),x.map(function(y){var w=c.find(y.target,!0);return w==null?null:w.domNode[c.DATA_KEY].mutations==null?(w.domNode[c.DATA_KEY].mutations=[y],w):(w.domNode[c.DATA_KEY].mutations.push(y),null)}).forEach(function(y){y==null||y===b||y.domNode[c.DATA_KEY]==null||y.update(y.domNode[c.DATA_KEY].mutations||[],v)}),this.domNode[c.DATA_KEY].mutations!=null&&p.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,v),this.optimize(x,v)},m.blotName="scroll",m.defaultChild="block",m.scope=c.Scope.BLOCK_BLOT,m.tagName="DIV",m})(o.default);r.default=h}),(function(n,r,i){var a=this&&this.__extends||(function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var x in m)m.hasOwnProperty(x)&&(p[x]=m[x])};return function(p,m){h(p,m);function x(){this.constructor=p}p.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),c=i(1);function u(h,p){if(Object.keys(h).length!==Object.keys(p).length)return!1;for(var m in h)if(h[m]!==p[m])return!1;return!0}var f=(function(h){a(p,h);function p(){return h!==null&&h.apply(this,arguments)||this}return p.formats=function(m){if(m.tagName!==p.tagName)return h.formats.call(this,m)},p.prototype.format=function(m,x){var v=this;m===this.statics.blotName&&!x?(this.children.forEach(function(b){b instanceof o.default||(b=b.wrap(p.blotName,!0)),v.attributes.copy(b)}),this.unwrap()):h.prototype.format.call(this,m,x)},p.prototype.formatAt=function(m,x,v,b){if(this.formats()[v]!=null||c.query(v,c.Scope.ATTRIBUTE)){var y=this.isolate(m,x);y.format(v,b)}else h.prototype.formatAt.call(this,m,x,v,b)},p.prototype.optimize=function(m){h.prototype.optimize.call(this,m);var x=this.formats();if(Object.keys(x).length===0)return this.unwrap();var v=this.next;v instanceof p&&v.prev===this&&u(x,v.formats())&&(v.moveChildren(this),v.remove())},p.blotName="inline",p.scope=c.Scope.INLINE_BLOT,p.tagName="SPAN",p})(o.default);r.default=f}),(function(n,r,i){var a=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])};return function(h,p){f(h,p);function m(){this.constructor=h}h.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),c=i(1),u=(function(f){a(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return h.formats=function(p){var m=c.query(h.blotName).tagName;if(p.tagName!==m)return f.formats.call(this,p)},h.prototype.format=function(p,m){c.query(p,c.Scope.BLOCK)!=null&&(p===this.statics.blotName&&!m?this.replaceWith(h.blotName):f.prototype.format.call(this,p,m))},h.prototype.formatAt=function(p,m,x,v){c.query(x,c.Scope.BLOCK)!=null?this.format(x,v):f.prototype.formatAt.call(this,p,m,x,v)},h.prototype.insertAt=function(p,m,x){if(x==null||c.query(m,c.Scope.INLINE)!=null)f.prototype.insertAt.call(this,p,m,x);else{var v=this.split(p),b=c.create(m,x);v.parent.insertBefore(b,v)}},h.prototype.update=function(p,m){navigator.userAgent.match(/Trident/)?this.build():f.prototype.update.call(this,p,m)},h.blotName="block",h.scope=c.Scope.BLOCK_BLOT,h.tagName="P",h})(o.default);r.default=u}),(function(n,r,i){var a=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var p in h)h.hasOwnProperty(p)&&(f[p]=h[p])};return function(f,h){u(f,h);function p(){this.constructor=f}f.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),c=(function(u){a(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.formats=function(h){},f.prototype.format=function(h,p){u.prototype.formatAt.call(this,0,this.length(),h,p)},f.prototype.formatAt=function(h,p,m,x){h===0&&p===this.length()?this.format(m,x):u.prototype.formatAt.call(this,h,p,m,x)},f.prototype.formats=function(){return this.statics.formats(this.domNode)},f})(o.default);r.default=c}),(function(n,r,i){var a=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])};return function(h,p){f(h,p);function m(){this.constructor=h}h.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),c=i(1),u=(function(f){a(h,f);function h(p){var m=f.call(this,p)||this;return m.text=m.statics.value(m.domNode),m}return h.create=function(p){return document.createTextNode(p)},h.value=function(p){var m=p.data;return m.normalize&&(m=m.normalize()),m},h.prototype.deleteAt=function(p,m){this.domNode.data=this.text=this.text.slice(0,p)+this.text.slice(p+m)},h.prototype.index=function(p,m){return this.domNode===p?m:-1},h.prototype.insertAt=function(p,m,x){x==null?(this.text=this.text.slice(0,p)+m+this.text.slice(p),this.domNode.data=this.text):f.prototype.insertAt.call(this,p,m,x)},h.prototype.length=function(){return this.text.length},h.prototype.optimize=function(p){f.prototype.optimize.call(this,p),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof h&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},h.prototype.position=function(p,m){return[this.domNode,p]},h.prototype.split=function(p,m){if(m===void 0&&(m=!1),!m){if(p===0)return this;if(p===this.length())return this.next}var x=c.create(this.domNode.splitText(p));return this.parent.insertBefore(x,this.next),this.text=this.statics.value(this.domNode),x},h.prototype.update=function(p,m){var x=this;p.some(function(v){return v.type==="characterData"&&v.target===x.domNode})&&(this.text=this.statics.value(this.domNode))},h.prototype.value=function(){return this.text},h.blotName="text",h.scope=c.Scope.INLINE_BLOT,h})(o.default);r.default=u}),(function(n,r,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,u){return arguments.length>1&&!this.contains(c)==!u?u:o.call(this,c)}}String.prototype.startsWith||(String.prototype.startsWith=function(c,u){return u=u||0,this.substr(u,c.length)===c}),String.prototype.endsWith||(String.prototype.endsWith=function(c,u){var f=this.toString();(typeof u!="number"||!isFinite(u)||Math.floor(u)!==u||u>f.length)&&(u=f.length),u-=c.length;var h=f.indexOf(c,u);return h!==-1&&h===u}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(u){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof u!="function")throw new TypeError("predicate must be a function");for(var f=Object(this),h=f.length>>>0,p=arguments[1],m,x=0;x<h;x++)if(m=f[x],u.call(p,m,x,f))return m}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(n,r){var i=-1,a=1,o=0;function c(j,S,A){if(j==S)return j?[[o,j]]:[];(A<0||j.length<A)&&(A=null);var O=p(j,S),M=j.substring(0,O);j=j.substring(O),S=S.substring(O),O=m(j,S);var z=j.substring(j.length-O);j=j.substring(0,j.length-O),S=S.substring(0,S.length-O);var I=u(j,S);return M&&I.unshift([o,M]),z&&I.push([o,z]),v(I),A!=null&&(I=w(I,A)),I=k(I),I}function u(j,S){var A;if(!j)return[[a,S]];if(!S)return[[i,j]];var O=j.length>S.length?j:S,M=j.length>S.length?S:j,z=O.indexOf(M);if(z!=-1)return A=[[a,O.substring(0,z)],[o,M],[a,O.substring(z+M.length)]],j.length>S.length&&(A[0][0]=A[2][0]=i),A;if(M.length==1)return[[i,j],[a,S]];var I=x(j,S);if(I){var D=I[0],T=I[1],q=I[2],H=I[3],G=I[4],ee=c(D,q),X=c(T,H);return ee.concat([[o,G]],X)}return f(j,S)}function f(j,S){for(var A=j.length,O=S.length,M=Math.ceil((A+O)/2),z=M,I=2*M,D=new Array(I),T=new Array(I),q=0;q<I;q++)D[q]=-1,T[q]=-1;D[z+1]=0,T[z+1]=0;for(var H=A-O,G=H%2!=0,ee=0,X=0,J=0,K=0,W=0;W<M;W++){for(var R=-W+ee;R<=W-X;R+=2){var U=z+R,B;R==-W||R!=W&&D[U-1]<D[U+1]?B=D[U+1]:B=D[U-1]+1;for(var Q=B-R;B<A&&Q<O&&j.charAt(B)==S.charAt(Q);)B++,Q++;if(D[U]=B,B>A)X+=2;else if(Q>O)ee+=2;else if(G){var Z=z+H-R;if(Z>=0&&Z<I&&T[Z]!=-1){var $=A-T[Z];if(B>=$)return h(j,S,B,Q)}}}for(var ne=-W+J;ne<=W-K;ne+=2){var Z=z+ne,$;ne==-W||ne!=W&&T[Z-1]<T[Z+1]?$=T[Z+1]:$=T[Z-1]+1;for(var ae=$-ne;$<A&&ae<O&&j.charAt(A-$-1)==S.charAt(O-ae-1);)$++,ae++;if(T[Z]=$,$>A)K+=2;else if(ae>O)J+=2;else if(!G){var U=z+H-ne;if(U>=0&&U<I&&D[U]!=-1){var B=D[U],Q=z+B-U;if($=A-$,B>=$)return h(j,S,B,Q)}}}}return[[i,j],[a,S]]}function h(j,S,A,O){var M=j.substring(0,A),z=S.substring(0,O),I=j.substring(A),D=S.substring(O),T=c(M,z),q=c(I,D);return T.concat(q)}function p(j,S){if(!j||!S||j.charAt(0)!=S.charAt(0))return 0;for(var A=0,O=Math.min(j.length,S.length),M=O,z=0;A<M;)j.substring(z,M)==S.substring(z,M)?(A=M,z=A):O=M,M=Math.floor((O-A)/2+A);return M}function m(j,S){if(!j||!S||j.charAt(j.length-1)!=S.charAt(S.length-1))return 0;for(var A=0,O=Math.min(j.length,S.length),M=O,z=0;A<M;)j.substring(j.length-M,j.length-z)==S.substring(S.length-M,S.length-z)?(A=M,z=A):O=M,M=Math.floor((O-A)/2+A);return M}function x(j,S){var A=j.length>S.length?j:S,O=j.length>S.length?S:j;if(A.length<4||O.length*2<A.length)return null;function M(X,J,K){for(var W=X.substring(K,K+Math.floor(X.length/4)),R=-1,U="",B,Q,Z,$;(R=J.indexOf(W,R+1))!=-1;){var ne=p(X.substring(K),J.substring(R)),ae=m(X.substring(0,K),J.substring(0,R));U.length<ae+ne&&(U=J.substring(R-ae,R)+J.substring(R,R+ne),B=X.substring(0,K-ae),Q=X.substring(K+ne),Z=J.substring(0,R-ae),$=J.substring(R+ne))}return U.length*2>=X.length?[B,Q,Z,$,U]:null}var z=M(A,O,Math.ceil(A.length/4)),I=M(A,O,Math.ceil(A.length/2)),D;if(!z&&!I)return null;I?z?D=z[4].length>I[4].length?z:I:D=I:D=z;var T,q,H,G;j.length>S.length?(T=D[0],q=D[1],H=D[2],G=D[3]):(H=D[0],G=D[1],T=D[2],q=D[3]);var ee=D[4];return[T,q,H,G,ee]}function v(j){j.push([o,""]);for(var S=0,A=0,O=0,M="",z="",I;S<j.length;)switch(j[S][0]){case a:O++,z+=j[S][1],S++;break;case i:A++,M+=j[S][1],S++;break;case o:A+O>1?(A!==0&&O!==0&&(I=p(z,M),I!==0&&(S-A-O>0&&j[S-A-O-1][0]==o?j[S-A-O-1][1]+=z.substring(0,I):(j.splice(0,0,[o,z.substring(0,I)]),S++),z=z.substring(I),M=M.substring(I)),I=m(z,M),I!==0&&(j[S][1]=z.substring(z.length-I)+j[S][1],z=z.substring(0,z.length-I),M=M.substring(0,M.length-I))),A===0?j.splice(S-O,A+O,[a,z]):O===0?j.splice(S-A,A+O,[i,M]):j.splice(S-A-O,A+O,[i,M],[a,z]),S=S-A-O+(A?1:0)+(O?1:0)+1):S!==0&&j[S-1][0]==o?(j[S-1][1]+=j[S][1],j.splice(S,1)):S++,O=0,A=0,M="",z="";break}j[j.length-1][1]===""&&j.pop();var D=!1;for(S=1;S<j.length-1;)j[S-1][0]==o&&j[S+1][0]==o&&(j[S][1].substring(j[S][1].length-j[S-1][1].length)==j[S-1][1]?(j[S][1]=j[S-1][1]+j[S][1].substring(0,j[S][1].length-j[S-1][1].length),j[S+1][1]=j[S-1][1]+j[S+1][1],j.splice(S-1,1),D=!0):j[S][1].substring(0,j[S+1][1].length)==j[S+1][1]&&(j[S-1][1]+=j[S+1][1],j[S][1]=j[S][1].substring(j[S+1][1].length)+j[S+1][1],j.splice(S+1,1),D=!0)),S++;D&&v(j)}var b=c;b.INSERT=a,b.DELETE=i,b.EQUAL=o,n.exports=b;function y(j,S){if(S===0)return[o,j];for(var A=0,O=0;O<j.length;O++){var M=j[O];if(M[0]===i||M[0]===o){var z=A+M[1].length;if(S===z)return[O+1,j];if(S<z){j=j.slice();var I=S-A,D=[M[0],M[1].slice(0,I)],T=[M[0],M[1].slice(I)];return j.splice(O,1,D,T),[O+1,j]}else A=z}}throw new Error("cursor_pos is out of bounds!")}function w(j,S){var A=y(j,S),O=A[1],M=A[0],z=O[M],I=O[M+1];if(z==null)return j;if(z[0]!==o)return j;if(I!=null&&z[1]+I[1]===I[1]+z[1])return O.splice(M,2,I,z),N(O,M,2);if(I!=null&&I[1].indexOf(z[1])===0){O.splice(M,2,[I[0],z[1]],[0,z[1]]);var D=I[1].slice(z[1].length);return D.length>0&&O.splice(M+2,0,[I[0],D]),N(O,M,3)}else return j}function k(j){for(var S=!1,A=function(I){return I.charCodeAt(0)>=56320&&I.charCodeAt(0)<=57343},O=function(I){return I.charCodeAt(I.length-1)>=55296&&I.charCodeAt(I.length-1)<=56319},M=2;M<j.length;M+=1)j[M-2][0]===o&&O(j[M-2][1])&&j[M-1][0]===i&&A(j[M-1][1])&&j[M][0]===a&&A(j[M][1])&&(S=!0,j[M-1][1]=j[M-2][1].slice(-1)+j[M-1][1],j[M][1]=j[M-2][1].slice(-1)+j[M][1],j[M-2][1]=j[M-2][1].slice(0,-1));if(!S)return j;for(var z=[],M=0;M<j.length;M+=1)j[M][1].length>0&&z.push(j[M]);return z}function N(j,S,A){for(var O=S+A-1;O>=0&&O>=S-1;O--)if(O+1<j.length){var M=j[O],z=j[O+1];M[0]===z[1]&&j.splice(O,2,[M[0],M[1]+z[1]])}return j}}),(function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(a){var o=[];for(var c in a)o.push(c);return o}}),(function(n,r){var i=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";r=n.exports=i?a:o,r.supported=a;function a(c){return Object.prototype.toString.call(c)=="[object Arguments]"}r.unsupported=o;function o(c){return c&&typeof c=="object"&&typeof c.length=="number"&&Object.prototype.hasOwnProperty.call(c,"callee")&&!Object.prototype.propertyIsEnumerable.call(c,"callee")||!1}}),(function(n,r){var i=Object.prototype.hasOwnProperty,a="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(a=!1));function c(f,h,p){this.fn=f,this.context=h,this.once=p||!1}function u(){this._events=new o,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)i.call(p,m)&&h.push(a?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h,p){var m=a?a+h:h,x=this._events[m];if(p)return!!x;if(!x)return[];if(x.fn)return[x.fn];for(var v=0,b=x.length,y=new Array(b);v<b;v++)y[v]=x[v].fn;return y},u.prototype.emit=function(h,p,m,x,v,b){var y=a?a+h:h;if(!this._events[y])return!1;var w=this._events[y],k=arguments.length,N,j;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),k){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,m),!0;case 4:return w.fn.call(w.context,p,m,x),!0;case 5:return w.fn.call(w.context,p,m,x,v),!0;case 6:return w.fn.call(w.context,p,m,x,v,b),!0}for(j=1,N=new Array(k-1);j<k;j++)N[j-1]=arguments[j];w.fn.apply(w.context,N)}else{var S=w.length,A;for(j=0;j<S;j++)switch(w[j].once&&this.removeListener(h,w[j].fn,void 0,!0),k){case 1:w[j].fn.call(w[j].context);break;case 2:w[j].fn.call(w[j].context,p);break;case 3:w[j].fn.call(w[j].context,p,m);break;case 4:w[j].fn.call(w[j].context,p,m,x);break;default:if(!N)for(A=1,N=new Array(k-1);A<k;A++)N[A-1]=arguments[A];w[j].fn.apply(w[j].context,N)}}return!0},u.prototype.on=function(h,p,m){var x=new c(p,m||this),v=a?a+h:h;return this._events[v]?this._events[v].fn?this._events[v]=[this._events[v],x]:this._events[v].push(x):(this._events[v]=x,this._eventsCount++),this},u.prototype.once=function(h,p,m){var x=new c(p,m||this,!0),v=a?a+h:h;return this._events[v]?this._events[v].fn?this._events[v]=[this._events[v],x]:this._events[v].push(x):(this._events[v]=x,this._eventsCount++),this},u.prototype.removeListener=function(h,p,m,x){var v=a?a+h:h;if(!this._events[v])return this;if(!p)return--this._eventsCount===0?this._events=new o:delete this._events[v],this;var b=this._events[v];if(b.fn)b.fn===p&&(!x||b.once)&&(!m||b.context===m)&&(--this._eventsCount===0?this._events=new o:delete this._events[v]);else{for(var y=0,w=[],k=b.length;y<k;y++)(b[y].fn!==p||x&&!b[y].once||m&&b[y].context!==m)&&w.push(b[y]);w.length?this._events[v]=w.length===1?w[0]:w:--this._eventsCount===0?this._events=new o:delete this._events[v]}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=a?a+h:h,this._events[p]&&(--this._eventsCount===0?this._events=new o:delete this._events[p])):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prototype.setMaxListeners=function(){return this},u.prefixed=a,u.EventEmitter=u,typeof n<"u"&&(n.exports=u)}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Oe){return typeof Oe}:function(Oe){return Oe&&typeof Symbol=="function"&&Oe.constructor===Symbol&&Oe!==Symbol.prototype?"symbol":typeof Oe},o=(function(){function Oe(re,xe){var we=[],Se=!0,_e=!1,te=void 0;try{for(var Ne=re[Symbol.iterator](),fe;!(Se=(fe=Ne.next()).done)&&(we.push(fe.value),!(xe&&we.length===xe));Se=!0);}catch(pe){_e=!0,te=pe}finally{try{!Se&&Ne.return&&Ne.return()}finally{if(_e)throw te}}return we}return function(re,xe){if(Array.isArray(re))return re;if(Symbol.iterator in Object(re))return Oe(re,xe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),c=(function(){function Oe(re,xe){for(var we=0;we<xe.length;we++){var Se=xe[we];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(re,Se.key,Se)}}return function(re,xe,we){return xe&&Oe(re.prototype,xe),we&&Oe(re,we),re}})(),u=i(3),f=T(u),h=i(2),p=T(h),m=i(0),x=T(m),v=i(5),b=T(v),y=i(10),w=T(y),k=i(9),N=T(k),j=i(36),S=i(37),A=i(13),O=T(A),M=i(26),z=i(38),I=i(39),D=i(40);function T(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}function q(Oe,re,xe){return re in Oe?Object.defineProperty(Oe,re,{value:xe,enumerable:!0,configurable:!0,writable:!0}):Oe[re]=xe,Oe}function H(Oe,re){if(!(Oe instanceof re))throw new TypeError("Cannot call a class as a function")}function G(Oe,re){if(!Oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:Oe}function ee(Oe,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);Oe.prototype=Object.create(re&&re.prototype,{constructor:{value:Oe,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(Oe,re):Oe.__proto__=re)}var X=(0,w.default)("quill:clipboard"),J="__ql-matcher",K=[[Node.TEXT_NODE,ft],[Node.TEXT_NODE,je],["br",Be],[Node.ELEMENT_NODE,je],[Node.ELEMENT_NODE,ye],[Node.ELEMENT_NODE,dt],[Node.ELEMENT_NODE,ce],[Node.ELEMENT_NODE,st],["li",it],["b",ae.bind(ae,"bold")],["i",ae.bind(ae,"italic")],["style",Ue]],W=[j.AlignAttribute,z.DirectionAttribute].reduce(function(Oe,re){return Oe[re.keyName]=re,Oe},{}),R=[j.AlignStyle,S.BackgroundStyle,M.ColorStyle,z.DirectionStyle,I.FontStyle,D.SizeStyle].reduce(function(Oe,re){return Oe[re.keyName]=re,Oe},{}),U=(function(Oe){ee(re,Oe);function re(xe,we){H(this,re);var Se=G(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,xe,we));return Se.quill.root.addEventListener("paste",Se.onPaste.bind(Se)),Se.container=Se.quill.addContainer("ql-clipboard"),Se.container.setAttribute("contenteditable",!0),Se.container.setAttribute("tabindex",-1),Se.matchers=[],K.concat(Se.options.matchers).forEach(function(_e){var te=o(_e,2),Ne=te[0],fe=te[1];!we.matchVisual&&fe===dt||Se.addMatcher(Ne,fe)}),Se}return c(re,[{key:"addMatcher",value:function(we,Se){this.matchers.push([we,Se])}},{key:"convert",value:function(we){if(typeof we=="string")return this.container.innerHTML=we.replace(/\>\r?\n +\</g,"><"),this.convert();var Se=this.quill.getFormat(this.quill.selection.savedRange.index);if(Se[O.default.blotName]){var _e=this.container.innerText;return this.container.innerHTML="",new p.default().insert(_e,q({},O.default.blotName,Se[O.default.blotName]))}var te=this.prepareMatching(),Ne=o(te,2),fe=Ne[0],pe=Ne[1],Le=ne(this.container,fe,pe);return Z(Le,`
`)&&Le.ops[Le.ops.length-1].attributes==null&&(Le=Le.compose(new p.default().retain(Le.length()-1).delete(1))),X.log("convert",this.container.innerHTML,Le),this.container.innerHTML="",Le}},{key:"dangerouslyPasteHTML",value:function(we,Se){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof we=="string")this.quill.setContents(this.convert(we),Se),this.quill.setSelection(0,b.default.sources.SILENT);else{var te=this.convert(Se);this.quill.updateContents(new p.default().retain(we).concat(te),_e),this.quill.setSelection(we+te.length(),b.default.sources.SILENT)}}},{key:"onPaste",value:function(we){var Se=this;if(!(we.defaultPrevented||!this.quill.isEnabled())){var _e=this.quill.getSelection(),te=new p.default().retain(_e.index),Ne=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(b.default.sources.SILENT),setTimeout(function(){te=te.concat(Se.convert()).delete(_e.length),Se.quill.updateContents(te,b.default.sources.USER),Se.quill.setSelection(te.length()-_e.length,b.default.sources.SILENT),Se.quill.scrollingContainer.scrollTop=Ne,Se.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var we=this,Se=[],_e=[];return this.matchers.forEach(function(te){var Ne=o(te,2),fe=Ne[0],pe=Ne[1];switch(fe){case Node.TEXT_NODE:_e.push(pe);break;case Node.ELEMENT_NODE:Se.push(pe);break;default:[].forEach.call(we.container.querySelectorAll(fe),function(Le){Le[J]=Le[J]||[],Le[J].push(pe)});break}}),[Se,_e]}}]),re})(N.default);U.DEFAULTS={matchers:[],matchVisual:!0};function B(Oe,re,xe){return(typeof re>"u"?"undefined":a(re))==="object"?Object.keys(re).reduce(function(we,Se){return B(we,Se,re[Se])},Oe):Oe.reduce(function(we,Se){return Se.attributes&&Se.attributes[re]?we.push(Se):we.insert(Se.insert,(0,f.default)({},q({},re,xe),Se.attributes))},new p.default)}function Q(Oe){if(Oe.nodeType!==Node.ELEMENT_NODE)return{};var re="__ql-computed-style";return Oe[re]||(Oe[re]=window.getComputedStyle(Oe))}function Z(Oe,re){for(var xe="",we=Oe.ops.length-1;we>=0&&xe.length<re.length;--we){var Se=Oe.ops[we];if(typeof Se.insert!="string")break;xe=Se.insert+xe}return xe.slice(-1*re.length)===re}function $(Oe){if(Oe.childNodes.length===0)return!1;var re=Q(Oe);return["block","list-item"].indexOf(re.display)>-1}function ne(Oe,re,xe){return Oe.nodeType===Oe.TEXT_NODE?xe.reduce(function(we,Se){return Se(Oe,we)},new p.default):Oe.nodeType===Oe.ELEMENT_NODE?[].reduce.call(Oe.childNodes||[],function(we,Se){var _e=ne(Se,re,xe);return Se.nodeType===Oe.ELEMENT_NODE&&(_e=re.reduce(function(te,Ne){return Ne(Se,te)},_e),_e=(Se[J]||[]).reduce(function(te,Ne){return Ne(Se,te)},_e)),we.concat(_e)},new p.default):new p.default}function ae(Oe,re,xe){return B(xe,Oe,!0)}function ce(Oe,re){var xe=x.default.Attributor.Attribute.keys(Oe),we=x.default.Attributor.Class.keys(Oe),Se=x.default.Attributor.Style.keys(Oe),_e={};return xe.concat(we).concat(Se).forEach(function(te){var Ne=x.default.query(te,x.default.Scope.ATTRIBUTE);Ne!=null&&(_e[Ne.attrName]=Ne.value(Oe),_e[Ne.attrName])||(Ne=W[te],Ne!=null&&(Ne.attrName===te||Ne.keyName===te)&&(_e[Ne.attrName]=Ne.value(Oe)||void 0),Ne=R[te],Ne!=null&&(Ne.attrName===te||Ne.keyName===te)&&(Ne=R[te],_e[Ne.attrName]=Ne.value(Oe)||void 0))}),Object.keys(_e).length>0&&(re=B(re,_e)),re}function ye(Oe,re){var xe=x.default.query(Oe);if(xe==null)return re;if(xe.prototype instanceof x.default.Embed){var we={},Se=xe.value(Oe);Se!=null&&(we[xe.blotName]=Se,re=new p.default().insert(we,xe.formats(Oe)))}else typeof xe.formats=="function"&&(re=B(re,xe.blotName,xe.formats(Oe)));return re}function Be(Oe,re){return Z(re,`
`)||re.insert(`
`),re}function Ue(){return new p.default}function it(Oe,re){var xe=x.default.query(Oe);if(xe==null||xe.blotName!=="list-item"||!Z(re,`
`))return re;for(var we=-1,Se=Oe.parentNode;!Se.classList.contains("ql-clipboard");)(x.default.query(Se)||{}).blotName==="list"&&(we+=1),Se=Se.parentNode;return we<=0?re:re.compose(new p.default().retain(re.length()-1).retain(1,{indent:we}))}function je(Oe,re){return Z(re,`
`)||($(Oe)||re.length()>0&&Oe.nextSibling&&$(Oe.nextSibling))&&re.insert(`
`),re}function dt(Oe,re){if($(Oe)&&Oe.nextElementSibling!=null&&!Z(re,`

`)){var xe=Oe.offsetHeight+parseFloat(Q(Oe).marginTop)+parseFloat(Q(Oe).marginBottom);Oe.nextElementSibling.offsetTop>Oe.offsetTop+xe*1.5&&re.insert(`
`)}return re}function st(Oe,re){var xe={},we=Oe.style||{};return we.fontStyle&&Q(Oe).fontStyle==="italic"&&(xe.italic=!0),we.fontWeight&&(Q(Oe).fontWeight.startsWith("bold")||parseInt(Q(Oe).fontWeight)>=700)&&(xe.bold=!0),Object.keys(xe).length>0&&(re=B(re,xe)),parseFloat(we.textIndent||0)>0&&(re=new p.default().insert("	").concat(re)),re}function ft(Oe,re){var xe=Oe.data;if(Oe.parentNode.tagName==="O:P")return re.insert(xe.trim());if(xe.trim().length===0&&Oe.parentNode.classList.contains("ql-clipboard"))return re;if(!Q(Oe.parentNode).whiteSpace.startsWith("pre")){var we=function(_e,te){return te=te.replace(/[^\u00a0]/g,""),te.length<1&&_e?" ":te};xe=xe.replace(/\r\n/g," ").replace(/\n/g," "),xe=xe.replace(/\s\s+/g,we.bind(we,!0)),(Oe.previousSibling==null&&$(Oe.parentNode)||Oe.previousSibling!=null&&$(Oe.previousSibling))&&(xe=xe.replace(/^\s+/,we.bind(we,!1))),(Oe.nextSibling==null&&$(Oe.parentNode)||Oe.nextSibling!=null&&$(Oe.nextSibling))&&(xe=xe.replace(/\s+$/,we.bind(we,!1)))}return re.insert(xe)}r.default=U,r.matchAttributor=ce,r.matchBlot=ye,r.matchNewline=je,r.matchSpacing=dt,r.matchText=ft}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function v(b,y){for(var w=0;w<y.length;w++){var k=y[w];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,y,w){return y&&v(b.prototype,y),w&&v(b,w),b}})(),o=function v(b,y,w){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,y);if(k===void 0){var N=Object.getPrototypeOf(b);return N===null?void 0:v(N,y,w)}else{if("value"in k)return k.value;var j=k.get;return j===void 0?void 0:j.call(w)}},c=i(6),u=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function h(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function p(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function m(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var x=(function(v){m(b,v);function b(){return h(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,[{key:"optimize",value:function(w){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,w),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),b})(u.default);x.blotName="bold",x.tagName=["STRONG","B"],r.default=x}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var a=(function(){function D(T,q){var H=[],G=!0,ee=!1,X=void 0;try{for(var J=T[Symbol.iterator](),K;!(G=(K=J.next()).done)&&(H.push(K.value),!(q&&H.length===q));G=!0);}catch(W){ee=!0,X=W}finally{try{!G&&J.return&&J.return()}finally{if(ee)throw X}}return H}return function(T,q){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return D(T,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function D(T,q){for(var H=0;H<q.length;H++){var G=q[H];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(T,G.key,G)}}return function(T,q,H){return q&&D(T.prototype,q),H&&D(T,H),T}})(),c=i(2),u=w(c),f=i(0),h=w(f),p=i(5),m=w(p),x=i(10),v=w(x),b=i(9),y=w(b);function w(D){return D&&D.__esModule?D:{default:D}}function k(D,T,q){return T in D?Object.defineProperty(D,T,{value:q,enumerable:!0,configurable:!0,writable:!0}):D[T]=q,D}function N(D,T){if(!(D instanceof T))throw new TypeError("Cannot call a class as a function")}function j(D,T){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:D}function S(D,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);D.prototype=Object.create(T&&T.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(D,T):D.__proto__=T)}var A=(0,v.default)("quill:toolbar"),O=(function(D){S(T,D);function T(q,H){N(this,T);var G=j(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,q,H));if(Array.isArray(G.options.container)){var ee=document.createElement("div");z(ee,G.options.container),q.container.parentNode.insertBefore(ee,q.container),G.container=ee}else typeof G.options.container=="string"?G.container=document.querySelector(G.options.container):G.container=G.options.container;if(!(G.container instanceof HTMLElement)){var X;return X=A.error("Container required for toolbar",G.options),j(G,X)}return G.container.classList.add("ql-toolbar"),G.controls=[],G.handlers={},Object.keys(G.options.handlers).forEach(function(J){G.addHandler(J,G.options.handlers[J])}),[].forEach.call(G.container.querySelectorAll("button, select"),function(J){G.attach(J)}),G.quill.on(m.default.events.EDITOR_CHANGE,function(J,K){J===m.default.events.SELECTION_CHANGE&&G.update(K)}),G.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){var J=G.quill.selection.getRange(),K=a(J,1),W=K[0];G.update(W)}),G}return o(T,[{key:"addHandler",value:function(H,G){this.handlers[H]=G}},{key:"attach",value:function(H){var G=this,ee=[].find.call(H.classList,function(J){return J.indexOf("ql-")===0});if(ee){if(ee=ee.slice(3),H.tagName==="BUTTON"&&H.setAttribute("type","button"),this.handlers[ee]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[ee]==null){A.warn("ignoring attaching to disabled format",ee,H);return}if(h.default.query(ee)==null){A.warn("ignoring attaching to nonexistent format",ee,H);return}}var X=H.tagName==="SELECT"?"change":"click";H.addEventListener(X,function(J){var K=void 0;if(H.tagName==="SELECT"){if(H.selectedIndex<0)return;var W=H.options[H.selectedIndex];W.hasAttribute("selected")?K=!1:K=W.value||!1}else H.classList.contains("ql-active")?K=!1:K=H.value||!H.hasAttribute("value"),J.preventDefault();G.quill.focus();var R=G.quill.selection.getRange(),U=a(R,1),B=U[0];if(G.handlers[ee]!=null)G.handlers[ee].call(G,K);else if(h.default.query(ee).prototype instanceof h.default.Embed){if(K=prompt("Enter "+ee),!K)return;G.quill.updateContents(new u.default().retain(B.index).delete(B.length).insert(k({},ee,K)),m.default.sources.USER)}else G.quill.format(ee,K,m.default.sources.USER);G.update(B)}),this.controls.push([ee,H])}}},{key:"update",value:function(H){var G=H==null?{}:this.quill.getFormat(H);this.controls.forEach(function(ee){var X=a(ee,2),J=X[0],K=X[1];if(K.tagName==="SELECT"){var W=void 0;if(H==null)W=null;else if(G[J]==null)W=K.querySelector("option[selected]");else if(!Array.isArray(G[J])){var R=G[J];typeof R=="string"&&(R=R.replace(/\"/g,'\\"')),W=K.querySelector('option[value="'+R+'"]')}W==null?(K.value="",K.selectedIndex=-1):W.selected=!0}else if(H==null)K.classList.remove("ql-active");else if(K.hasAttribute("value")){var U=G[J]===K.getAttribute("value")||G[J]!=null&&G[J].toString()===K.getAttribute("value")||G[J]==null&&!K.getAttribute("value");K.classList.toggle("ql-active",U)}else K.classList.toggle("ql-active",G[J]!=null)})}}]),T})(y.default);O.DEFAULTS={};function M(D,T,q){var H=document.createElement("button");H.setAttribute("type","button"),H.classList.add("ql-"+T),q!=null&&(H.value=q),D.appendChild(H)}function z(D,T){Array.isArray(T[0])||(T=[T]),T.forEach(function(q){var H=document.createElement("span");H.classList.add("ql-formats"),q.forEach(function(G){if(typeof G=="string")M(H,G);else{var ee=Object.keys(G)[0],X=G[ee];Array.isArray(X)?I(H,ee,X):M(H,ee,X)}}),D.appendChild(H)})}function I(D,T,q){var H=document.createElement("select");H.classList.add("ql-"+T),q.forEach(function(G){var ee=document.createElement("option");G!==!1?ee.setAttribute("value",G):ee.setAttribute("selected","selected"),H.appendChild(ee)}),D.appendChild(H)}O.DEFAULTS={container:null,handlers:{clean:function(){var T=this,q=this.quill.getSelection();if(q!=null)if(q.length==0){var H=this.quill.getFormat();Object.keys(H).forEach(function(G){h.default.query(G,h.default.Scope.INLINE)!=null&&T.quill.format(G,!1)})}else this.quill.removeFormat(q,m.default.sources.USER)},direction:function(T){var q=this.quill.getFormat().align;T==="rtl"&&q==null?this.quill.format("align","right",m.default.sources.USER):!T&&q==="right"&&this.quill.format("align",!1,m.default.sources.USER),this.quill.format("direction",T,m.default.sources.USER)},indent:function(T){var q=this.quill.getSelection(),H=this.quill.getFormat(q),G=parseInt(H.indent||0);if(T==="+1"||T==="-1"){var ee=T==="+1"?1:-1;H.direction==="rtl"&&(ee*=-1),this.quill.format("indent",G+ee,m.default.sources.USER)}},link:function(T){T===!0&&(T=prompt("Enter link URL:")),this.quill.format("link",T,m.default.sources.USER)},list:function(T){var q=this.quill.getSelection(),H=this.quill.getFormat(q);T==="check"?H.list==="checked"||H.list==="unchecked"?this.quill.format("list",!1,m.default.sources.USER):this.quill.format("list","unchecked",m.default.sources.USER):this.quill.format("list",T,m.default.sources.USER)}}},r.default=O,r.addControls=z}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function v(b,y){for(var w=0;w<y.length;w++){var k=y[w];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,y,w){return y&&v(b.prototype,y),w&&v(b,w),b}})(),o=function v(b,y,w){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,y);if(k===void 0){var N=Object.getPrototypeOf(b);return N===null?void 0:v(N,y,w)}else{if("value"in k)return k.value;var j=k.get;return j===void 0?void 0:j.call(w)}},c=i(28),u=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function h(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function p(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function m(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var x=(function(v){m(b,v);function b(y,w){h(this,b);var k=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,y));return k.label.innerHTML=w,k.container.classList.add("ql-color-picker"),[].slice.call(k.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(N){N.classList.add("ql-primary")}),k}return a(b,[{key:"buildItem",value:function(w){var k=o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"buildItem",this).call(this,w);return k.style.backgroundColor=w.getAttribute("value")||"",k}},{key:"selectItem",value:function(w,k){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,w,k);var N=this.label.querySelector(".ql-color-label"),j=w&&w.getAttribute("data-value")||"";N&&(N.tagName==="line"?N.style.stroke=j:N.style.fill=j)}}]),b})(u.default);r.default=x}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function v(b,y){for(var w=0;w<y.length;w++){var k=y[w];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,y,w){return y&&v(b.prototype,y),w&&v(b,w),b}})(),o=function v(b,y,w){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,y);if(k===void 0){var N=Object.getPrototypeOf(b);return N===null?void 0:v(N,y,w)}else{if("value"in k)return k.value;var j=k.get;return j===void 0?void 0:j.call(w)}},c=i(28),u=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function h(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function p(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function m(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var x=(function(v){m(b,v);function b(y,w){h(this,b);var k=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,y));return k.container.classList.add("ql-icon-picker"),[].forEach.call(k.container.querySelectorAll(".ql-picker-item"),function(N){N.innerHTML=w[N.getAttribute("data-value")||""]}),k.defaultItem=k.container.querySelector(".ql-selected"),k.selectItem(k.defaultItem),k}return a(b,[{key:"selectItem",value:function(w,k){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,w,k),w=w||this.defaultItem,this.label.innerHTML=w.innerHTML}}]),b})(u.default);r.default=x}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function u(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,h,p){return h&&u(f.prototype,h),p&&u(f,p),f}})();function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var c=(function(){function u(f,h){var p=this;o(this,u),this.quill=f,this.boundsContainer=h||document.body,this.root=f.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){p.root.style.marginTop=-1*p.quill.root.scrollTop+"px"}),this.hide()}return a(u,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(h){var p=h.left+h.width/2-this.root.offsetWidth/2,m=h.bottom+this.quill.root.scrollTop;this.root.style.left=p+"px",this.root.style.top=m+"px",this.root.classList.remove("ql-flip");var x=this.boundsContainer.getBoundingClientRect(),v=this.root.getBoundingClientRect(),b=0;if(v.right>x.right&&(b=x.right-v.right,this.root.style.left=p+b+"px"),v.left<x.left&&(b=x.left-v.left,this.root.style.left=p+b+"px"),v.bottom>x.bottom){var y=v.bottom-v.top,w=h.bottom-h.top+y;this.root.style.top=m-w+"px",this.root.classList.add("ql-flip")}return b}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),u})();r.default=c}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function I(D,T){var q=[],H=!0,G=!1,ee=void 0;try{for(var X=D[Symbol.iterator](),J;!(H=(J=X.next()).done)&&(q.push(J.value),!(T&&q.length===T));H=!0);}catch(K){G=!0,ee=K}finally{try{!H&&X.return&&X.return()}finally{if(G)throw ee}}return q}return function(D,T){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return I(D,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function I(D,T,q){D===null&&(D=Function.prototype);var H=Object.getOwnPropertyDescriptor(D,T);if(H===void 0){var G=Object.getPrototypeOf(D);return G===null?void 0:I(G,T,q)}else{if("value"in H)return H.value;var ee=H.get;return ee===void 0?void 0:ee.call(q)}},c=(function(){function I(D,T){for(var q=0;q<T.length;q++){var H=T[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(D,H.key,H)}}return function(D,T,q){return T&&I(D.prototype,T),q&&I(D,q),D}})(),u=i(3),f=N(u),h=i(8),p=N(h),m=i(43),x=N(m),v=i(27),b=N(v),y=i(15),w=i(41),k=N(w);function N(I){return I&&I.__esModule?I:{default:I}}function j(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")}function S(I,D){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:I}function A(I,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);I.prototype=Object.create(D&&D.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(I,D):I.__proto__=D)}var O=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],M=(function(I){A(D,I);function D(T,q){j(this,D),q.modules.toolbar!=null&&q.modules.toolbar.container==null&&(q.modules.toolbar.container=O);var H=S(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,T,q));return H.quill.container.classList.add("ql-snow"),H}return c(D,[{key:"extendToolbar",value:function(q){q.container.classList.add("ql-snow"),this.buildButtons([].slice.call(q.container.querySelectorAll("button")),k.default),this.buildPickers([].slice.call(q.container.querySelectorAll("select")),k.default),this.tooltip=new z(this.quill,this.options.bounds),q.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(H,G){q.handlers.link.call(q,!G.format.link)})}}]),D})(x.default);M.DEFAULTS=(0,f.default)(!0,{},x.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(D){if(D){var T=this.quill.getSelection();if(T==null||T.length==0)return;var q=this.quill.getText(T);/^\S+@\S+\.\S+$/.test(q)&&q.indexOf("mailto:")!==0&&(q="mailto:"+q);var H=this.quill.theme.tooltip;H.edit("link",q)}else this.quill.format("link",!1)}}}}});var z=(function(I){A(D,I);function D(T,q){j(this,D);var H=S(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,T,q));return H.preview=H.root.querySelector("a.ql-preview"),H}return c(D,[{key:"listen",value:function(){var q=this;o(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(H){q.root.classList.contains("ql-editing")?q.save():q.edit("link",q.preview.textContent),H.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(H){if(q.linkRange!=null){var G=q.linkRange;q.restoreFocus(),q.quill.formatText(G,"link",!1,p.default.sources.USER),delete q.linkRange}H.preventDefault(),q.hide()}),this.quill.on(p.default.events.SELECTION_CHANGE,function(H,G,ee){if(H!=null){if(H.length===0&&ee===p.default.sources.USER){var X=q.quill.scroll.descendant(b.default,H.index),J=a(X,2),K=J[0],W=J[1];if(K!=null){q.linkRange=new y.Range(H.index-W,K.length());var R=b.default.formats(K.domNode);q.preview.textContent=R,q.preview.setAttribute("href",R),q.show(),q.position(q.quill.getBounds(q.linkRange));return}}else delete q.linkRange;q.hide()}})}},{key:"show",value:function(){o(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),D})(m.BaseTooltip);z.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=M}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(29),o=Se(a),c=i(36),u=i(38),f=i(64),h=i(65),p=Se(h),m=i(66),x=Se(m),v=i(67),b=Se(v),y=i(37),w=i(26),k=i(39),N=i(40),j=i(56),S=Se(j),A=i(68),O=Se(A),M=i(27),z=Se(M),I=i(69),D=Se(I),T=i(70),q=Se(T),H=i(71),G=Se(H),ee=i(72),X=Se(ee),J=i(73),K=Se(J),W=i(13),R=Se(W),U=i(74),B=Se(U),Q=i(75),Z=Se(Q),$=i(57),ne=Se($),ae=i(41),ce=Se(ae),ye=i(28),Be=Se(ye),Ue=i(59),it=Se(Ue),je=i(60),dt=Se(je),st=i(61),ft=Se(st),Oe=i(108),re=Se(Oe),xe=i(62),we=Se(xe);function Se(_e){return _e&&_e.__esModule?_e:{default:_e}}o.default.register({"attributors/attribute/direction":u.DirectionAttribute,"attributors/class/align":c.AlignClass,"attributors/class/background":y.BackgroundClass,"attributors/class/color":w.ColorClass,"attributors/class/direction":u.DirectionClass,"attributors/class/font":k.FontClass,"attributors/class/size":N.SizeClass,"attributors/style/align":c.AlignStyle,"attributors/style/background":y.BackgroundStyle,"attributors/style/color":w.ColorStyle,"attributors/style/direction":u.DirectionStyle,"attributors/style/font":k.FontStyle,"attributors/style/size":N.SizeStyle},!0),o.default.register({"formats/align":c.AlignClass,"formats/direction":u.DirectionClass,"formats/indent":f.IndentClass,"formats/background":y.BackgroundStyle,"formats/color":w.ColorStyle,"formats/font":k.FontClass,"formats/size":N.SizeClass,"formats/blockquote":p.default,"formats/code-block":R.default,"formats/header":x.default,"formats/list":b.default,"formats/bold":S.default,"formats/code":W.Code,"formats/italic":O.default,"formats/link":z.default,"formats/script":D.default,"formats/strike":q.default,"formats/underline":G.default,"formats/image":X.default,"formats/video":K.default,"formats/list/item":v.ListItem,"modules/formula":B.default,"modules/syntax":Z.default,"modules/toolbar":ne.default,"themes/bubble":re.default,"themes/snow":we.default,"ui/icons":ce.default,"ui/picker":Be.default,"ui/icon-picker":dt.default,"ui/color-picker":it.default,"ui/tooltip":ft.default},!0),r.default=o.default}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var a=(function(){function b(y,w){for(var k=0;k<w.length;k++){var N=w[k];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,w,k){return w&&b(y.prototype,w),k&&b(y,k),y}})(),o=function b(y,w,k){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,w);if(N===void 0){var j=Object.getPrototypeOf(y);return j===null?void 0:b(j,w,k)}else{if("value"in N)return N.value;var S=N.get;return S===void 0?void 0:S.call(k)}},c=i(0),u=f(c);function f(b){return b&&b.__esModule?b:{default:b}}function h(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function p(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function m(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var x=(function(b){m(y,b);function y(){return h(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"add",value:function(k,N){if(N==="+1"||N==="-1"){var j=this.value(k)||0;N=N==="+1"?j+1:j-1}return N===0?(this.remove(k),!0):o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"add",this).call(this,k,N)}},{key:"canAdd",value:function(k,N){return o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"canAdd",this).call(this,k,N)||o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"canAdd",this).call(this,k,parseInt(N))}},{key:"value",value:function(k){return parseInt(o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,k))||void 0}}]),y})(u.default.Attributor.Class),v=new x("indent","ql-indent",{scope:u.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=v}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(4),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function f(m,x){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:m}function h(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(m,x):m.__proto__=x)}var p=(function(m){h(x,m);function x(){return u(this,x),f(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x})(o.default);p.blotName="blockquote",p.tagName="blockquote",r.default=p}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function x(v,b){for(var y=0;y<b.length;y++){var w=b[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,b,y){return b&&x(v.prototype,b),y&&x(v,y),v}})(),o=i(4),c=u(o);function u(x){return x&&x.__esModule?x:{default:x}}function f(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function h(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function p(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var m=(function(x){p(v,x);function v(){return f(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,null,[{key:"formats",value:function(y){return this.tagName.indexOf(y.tagName)+1}}]),v})(c.default);m.blotName="header",m.tagName=["H1","H2","H3","H4","H5","H6"],r.default=m}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var a=(function(){function j(S,A){for(var O=0;O<A.length;O++){var M=A[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}return function(S,A,O){return A&&j(S.prototype,A),O&&j(S,O),S}})(),o=function j(S,A,O){S===null&&(S=Function.prototype);var M=Object.getOwnPropertyDescriptor(S,A);if(M===void 0){var z=Object.getPrototypeOf(S);return z===null?void 0:j(z,A,O)}else{if("value"in M)return M.value;var I=M.get;return I===void 0?void 0:I.call(O)}},c=i(0),u=x(c),f=i(4),h=x(f),p=i(25),m=x(p);function x(j){return j&&j.__esModule?j:{default:j}}function v(j,S,A){return S in j?Object.defineProperty(j,S,{value:A,enumerable:!0,configurable:!0,writable:!0}):j[S]=A,j}function b(j,S){if(!(j instanceof S))throw new TypeError("Cannot call a class as a function")}function y(j,S){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:j}function w(j,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);j.prototype=Object.create(S&&S.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(j,S):j.__proto__=S)}var k=(function(j){w(S,j);function S(){return b(this,S),y(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,[{key:"format",value:function(O,M){O===N.blotName&&!M?this.replaceWith(u.default.create(this.statics.scope)):o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,O,M)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(O,M){return this.parent.isolate(this.offset(this.parent),this.length()),O===this.parent.statics.blotName?(this.parent.replaceWith(O,M),this):(this.parent.unwrap(),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,O,M))}}],[{key:"formats",value:function(O){return O.tagName===this.tagName?void 0:o(S.__proto__||Object.getPrototypeOf(S),"formats",this).call(this,O)}}]),S})(h.default);k.blotName="list-item",k.tagName="LI";var N=(function(j){w(S,j),a(S,null,[{key:"create",value:function(O){var M=O==="ordered"?"OL":"UL",z=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,M);return(O==="checked"||O==="unchecked")&&z.setAttribute("data-checked",O==="checked"),z}},{key:"formats",value:function(O){if(O.tagName==="OL")return"ordered";if(O.tagName==="UL")return O.hasAttribute("data-checked")?O.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function S(A){b(this,S);var O=y(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,A)),M=function(I){if(I.target.parentNode===A){var D=O.statics.formats(A),T=u.default.find(I.target);D==="checked"?T.format("list","unchecked"):D==="unchecked"&&T.format("list","checked")}};return A.addEventListener("touchstart",M),A.addEventListener("mousedown",M),O}return a(S,[{key:"format",value:function(O,M){this.children.length>0&&this.children.tail.format(O,M)}},{key:"formats",value:function(){return v({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(O,M){if(O instanceof k)o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,O,M);else{var z=M==null?this.length():M.offset(this),I=this.split(z);I.parent.insertBefore(O,I)}}},{key:"optimize",value:function(O){o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,O);var M=this.next;M!=null&&M.prev===this&&M.statics.blotName===this.statics.blotName&&M.domNode.tagName===this.domNode.tagName&&M.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(M.moveChildren(this),M.remove())}},{key:"replace",value:function(O){if(O.statics.blotName!==this.statics.blotName){var M=u.default.create(this.statics.defaultChild);O.moveChildren(M),this.appendChild(M)}o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,O)}}]),S})(m.default);N.blotName="list",N.scope=u.default.Scope.BLOCK_BLOT,N.tagName=["OL","UL"],N.defaultChild="list-item",N.allowedChildren=[k],r.ListItem=k,r.default=N}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(56),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function f(m,x){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:m}function h(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(m,x):m.__proto__=x)}var p=(function(m){h(x,m);function x(){return u(this,x),f(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x})(o.default);p.blotName="italic",p.tagName=["EM","I"],r.default=p}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function v(b,y){for(var w=0;w<y.length;w++){var k=y[w];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,y,w){return y&&v(b.prototype,y),w&&v(b,w),b}})(),o=function v(b,y,w){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,y);if(k===void 0){var N=Object.getPrototypeOf(b);return N===null?void 0:v(N,y,w)}else{if("value"in k)return k.value;var j=k.get;return j===void 0?void 0:j.call(w)}},c=i(6),u=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function h(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function p(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function m(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var x=(function(v){m(b,v);function b(){return h(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,null,[{key:"create",value:function(w){return w==="super"?document.createElement("sup"):w==="sub"?document.createElement("sub"):o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,w)}},{key:"formats",value:function(w){if(w.tagName==="SUB")return"sub";if(w.tagName==="SUP")return"super"}}]),b})(u.default);x.blotName="script",x.tagName=["SUB","SUP"],r.default=x}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function f(m,x){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:m}function h(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(m,x):m.__proto__=x)}var p=(function(m){h(x,m);function x(){return u(this,x),f(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x})(o.default);p.blotName="strike",p.tagName="S",r.default=p}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function f(m,x){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:m}function h(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(m,x):m.__proto__=x)}var p=(function(m){h(x,m);function x(){return u(this,x),f(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x})(o.default);p.blotName="underline",p.tagName="U",r.default=p}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function y(w,k){for(var N=0;N<k.length;N++){var j=k[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,k,N){return k&&y(w.prototype,k),N&&y(w,N),w}})(),o=function y(w,k,N){w===null&&(w=Function.prototype);var j=Object.getOwnPropertyDescriptor(w,k);if(j===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:y(S,k,N)}else{if("value"in j)return j.value;var A=j.get;return A===void 0?void 0:A.call(N)}},c=i(0),u=h(c),f=i(27);function h(y){return y&&y.__esModule?y:{default:y}}function p(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function m(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function x(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var v=["alt","height","width"],b=(function(y){x(w,y);function w(){return p(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"format",value:function(N,j){v.indexOf(N)>-1?j?this.domNode.setAttribute(N,j):this.domNode.removeAttribute(N):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,N,j)}}],[{key:"create",value:function(N){var j=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,N);return typeof N=="string"&&j.setAttribute("src",this.sanitize(N)),j}},{key:"formats",value:function(N){return v.reduce(function(j,S){return N.hasAttribute(S)&&(j[S]=N.getAttribute(S)),j},{})}},{key:"match",value:function(N){return/\.(jpe?g|gif|png)$/.test(N)||/^data:image\/.+;base64/.test(N)}},{key:"sanitize",value:function(N){return(0,f.sanitize)(N,["http","https","data"])?N:"//:0"}},{key:"value",value:function(N){return N.getAttribute("src")}}]),w})(u.default.Embed);b.blotName="image",b.tagName="IMG",r.default=b}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function y(w,k){for(var N=0;N<k.length;N++){var j=k[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,k,N){return k&&y(w.prototype,k),N&&y(w,N),w}})(),o=function y(w,k,N){w===null&&(w=Function.prototype);var j=Object.getOwnPropertyDescriptor(w,k);if(j===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:y(S,k,N)}else{if("value"in j)return j.value;var A=j.get;return A===void 0?void 0:A.call(N)}},c=i(4),u=i(27),f=h(u);function h(y){return y&&y.__esModule?y:{default:y}}function p(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function m(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function x(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var v=["height","width"],b=(function(y){x(w,y);function w(){return p(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"format",value:function(N,j){v.indexOf(N)>-1?j?this.domNode.setAttribute(N,j):this.domNode.removeAttribute(N):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,N,j)}}],[{key:"create",value:function(N){var j=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,N);return j.setAttribute("frameborder","0"),j.setAttribute("allowfullscreen",!0),j.setAttribute("src",this.sanitize(N)),j}},{key:"formats",value:function(N){return v.reduce(function(j,S){return N.hasAttribute(S)&&(j[S]=N.getAttribute(S)),j},{})}},{key:"sanitize",value:function(N){return f.default.sanitize(N)}},{key:"value",value:function(N){return N.getAttribute("src")}}]),w})(c.BlockEmbed);b.blotName="video",b.className="ql-video",b.tagName="IFRAME",r.default=b}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var a=(function(){function N(j,S){for(var A=0;A<S.length;A++){var O=S[A];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(j,O.key,O)}}return function(j,S,A){return S&&N(j.prototype,S),A&&N(j,A),j}})(),o=function N(j,S,A){j===null&&(j=Function.prototype);var O=Object.getOwnPropertyDescriptor(j,S);if(O===void 0){var M=Object.getPrototypeOf(j);return M===null?void 0:N(M,S,A)}else{if("value"in O)return O.value;var z=O.get;return z===void 0?void 0:z.call(A)}},c=i(35),u=x(c),f=i(5),h=x(f),p=i(9),m=x(p);function x(N){return N&&N.__esModule?N:{default:N}}function v(N,j){if(!(N instanceof j))throw new TypeError("Cannot call a class as a function")}function b(N,j){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:N}function y(N,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);N.prototype=Object.create(j&&j.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(N,j):N.__proto__=j)}var w=(function(N){y(j,N);function j(){return v(this,j),b(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return a(j,null,[{key:"create",value:function(A){var O=o(j.__proto__||Object.getPrototypeOf(j),"create",this).call(this,A);return typeof A=="string"&&(window.katex.render(A,O,{throwOnError:!1,errorColor:"#f00"}),O.setAttribute("data-value",A)),O}},{key:"value",value:function(A){return A.getAttribute("data-value")}}]),j})(u.default);w.blotName="formula",w.className="ql-formula",w.tagName="SPAN";var k=(function(N){y(j,N),a(j,null,[{key:"register",value:function(){h.default.register(w,!0)}}]);function j(){v(this,j);var S=b(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return S}return j})(m.default);r.FormulaBlot=w,r.default=k}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var a=(function(){function A(O,M){for(var z=0;z<M.length;z++){var I=M[z];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(O,I.key,I)}}return function(O,M,z){return M&&A(O.prototype,M),z&&A(O,z),O}})(),o=function A(O,M,z){O===null&&(O=Function.prototype);var I=Object.getOwnPropertyDescriptor(O,M);if(I===void 0){var D=Object.getPrototypeOf(O);return D===null?void 0:A(D,M,z)}else{if("value"in I)return I.value;var T=I.get;return T===void 0?void 0:T.call(z)}},c=i(0),u=b(c),f=i(5),h=b(f),p=i(9),m=b(p),x=i(13),v=b(x);function b(A){return A&&A.__esModule?A:{default:A}}function y(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function w(A,O){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:A}function k(A,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);A.prototype=Object.create(O&&O.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(A,O):A.__proto__=O)}var N=(function(A){k(O,A);function O(){return y(this,O),w(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return a(O,[{key:"replaceWith",value:function(z){this.domNode.textContent=this.domNode.textContent,this.attach(),o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replaceWith",this).call(this,z)}},{key:"highlight",value:function(z){var I=this.domNode.textContent;this.cachedText!==I&&((I.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=z(I),this.domNode.normalize(),this.attach()),this.cachedText=I)}}]),O})(v.default);N.className="ql-syntax";var j=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),S=(function(A){k(O,A),a(O,null,[{key:"register",value:function(){h.default.register(j,!0),h.default.register(N,!0)}}]);function O(M,z){y(this,O);var I=w(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,M,z));if(typeof I.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var D=null;return I.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(D),D=setTimeout(function(){I.highlight(),D=null},I.options.interval)}),I.highlight(),I}return a(O,[{key:"highlight",value:function(){var z=this;if(!this.quill.selection.composing){this.quill.update(h.default.sources.USER);var I=this.quill.getSelection();this.quill.scroll.descendants(N).forEach(function(D){D.highlight(z.options.highlight)}),this.quill.update(h.default.sources.SILENT),I!=null&&this.quill.setSelection(I,h.default.sources.SILENT)}}}]),O})(m.default);S.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(A){var O=window.hljs.highlightAuto(A);return O.value}})(),interval:1e3},r.CodeBlock=N,r.CodeToken=j,r.default=S}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var a=function O(M,z,I){M===null&&(M=Function.prototype);var D=Object.getOwnPropertyDescriptor(M,z);if(D===void 0){var T=Object.getPrototypeOf(M);return T===null?void 0:O(T,z,I)}else{if("value"in D)return D.value;var q=D.get;return q===void 0?void 0:q.call(I)}},o=(function(){function O(M,z){for(var I=0;I<z.length;I++){var D=z[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(M,D.key,D)}}return function(M,z,I){return z&&O(M.prototype,z),I&&O(M,I),M}})(),c=i(3),u=y(c),f=i(8),h=y(f),p=i(43),m=y(p),x=i(15),v=i(41),b=y(v);function y(O){return O&&O.__esModule?O:{default:O}}function w(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}function k(O,M){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:O}function N(O,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);O.prototype=Object.create(M&&M.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(O,M):O.__proto__=M)}var j=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],S=(function(O){N(M,O);function M(z,I){w(this,M),I.modules.toolbar!=null&&I.modules.toolbar.container==null&&(I.modules.toolbar.container=j);var D=k(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,z,I));return D.quill.container.classList.add("ql-bubble"),D}return o(M,[{key:"extendToolbar",value:function(I){this.tooltip=new A(this.quill,this.options.bounds),this.tooltip.root.appendChild(I.container),this.buildButtons([].slice.call(I.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(I.container.querySelectorAll("select")),b.default)}}]),M})(m.default);S.DEFAULTS=(0,u.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(M){M?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var A=(function(O){N(M,O);function M(z,I){w(this,M);var D=k(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,z,I));return D.quill.on(h.default.events.EDITOR_CHANGE,function(T,q,H,G){if(T===h.default.events.SELECTION_CHANGE)if(q!=null&&q.length>0&&G===h.default.sources.USER){D.show(),D.root.style.left="0px",D.root.style.width="",D.root.style.width=D.root.offsetWidth+"px";var ee=D.quill.getLines(q.index,q.length);if(ee.length===1)D.position(D.quill.getBounds(q));else{var X=ee[ee.length-1],J=D.quill.getIndex(X),K=Math.min(X.length()-1,q.index+q.length-J),W=D.quill.getBounds(new x.Range(J,K));D.position(W)}}else document.activeElement!==D.textbox&&D.quill.hasFocus()&&D.hide()}),D}return o(M,[{key:"listen",value:function(){var I=this;a(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){I.root.classList.remove("ql-editing")}),this.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!I.root.classList.contains("ql-hidden")){var D=I.quill.getSelection();D!=null&&I.position(I.quill.getBounds(D))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(I){var D=a(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"position",this).call(this,I),T=this.root.querySelector(".ql-tooltip-arrow");if(T.style.marginLeft="",D===0)return D;T.style.marginLeft=-1*D-T.offsetWidth/2+"px"}}]),M})(p.BaseTooltip);A.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=A,r.default=S}),(function(n,r,i){n.exports=i(63)})]).default})})(Zf)),Zf.exports}var Zs,nk;function mz(){if(nk)return Zs;nk=1;var t=Zs&&Zs.__extends||(function(){var h=function(p,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,v){x.__proto__=v}||function(x,v){for(var b in v)v.hasOwnProperty(b)&&(x[b]=v[b])},h(p,m)};return function(p,m){h(p,m);function x(){this.constructor=p}p.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}})(),e=Zs&&Zs.__assign||function(){return e=Object.assign||function(h){for(var p,m=1,x=arguments.length;m<x;m++){p=arguments[m];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(h[v]=p[v])}return h},e.apply(this,arguments)},n=Zs&&Zs.__spreadArrays||function(){for(var h=0,p=0,m=arguments.length;p<m;p++)h+=arguments[p].length;for(var x=Array(h),v=0,p=0;p<m;p++)for(var b=arguments[p],y=0,w=b.length;y<w;y++,v++)x[v]=b[y];return x},r=Zs&&Zs.__importDefault||function(h){return h&&h.__esModule?h:{default:h}},i=r(Nh()),a=r(Gx()),o=r(fz()),c=r(pz()),u=(function(h){t(p,h);function p(m){var x=h.call(this,m)||this;x.dirtyProps=["modules","formats","bounds","theme","children"],x.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],x.state={generation:0},x.selection=null,x.onEditorChange=function(b,y,w,k){var N,j,S,A;b==="text-change"?(j=(N=x).onEditorChangeText)===null||j===void 0||j.call(N,x.editor.root.innerHTML,y,k,x.unprivilegedEditor):b==="selection-change"&&((A=(S=x).onEditorChangeSelection)===null||A===void 0||A.call(S,y,k,x.unprivilegedEditor))};var v=x.isControlled()?m.value:m.defaultValue;return x.value=v??"",x}return p.prototype.validateProps=function(m){var x;if(i.default.Children.count(m.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(m.children)){var v=i.default.Children.only(m.children);if(((x=v)===null||x===void 0?void 0:x.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&m.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},p.prototype.shouldComponentUpdate=function(m,x){var v=this,b;if(this.validateProps(m),!this.editor||this.state.generation!==x.generation)return!0;if("value"in m){var y=this.getEditorContents(),w=(b=m.value,b??"");this.isEqualValue(w,y)||this.setEditorContents(this.editor,w)}return m.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,m.readOnly),n(this.cleanProps,this.dirtyProps).some(function(k){return!o.default(m[k],v.props[k])})},p.prototype.shouldComponentRegenerate=function(m){var x=this;return this.dirtyProps.some(function(v){return!o.default(m[v],x.props[v])})},p.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},p.prototype.componentWillUnmount=function(){this.destroyEditor()},p.prototype.componentDidUpdate=function(m,x){var v=this;if(this.editor&&this.shouldComponentRegenerate(m)){var b=this.editor.getContents(),y=this.editor.getSelection();this.regenerationSnapshot={delta:b,selection:y},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==x.generation){var w=this.regenerationSnapshot,b=w.delta,k=w.selection;delete this.regenerationSnapshot,this.instantiateEditor();var N=this.editor;N.setContents(b),f(function(){return v.setEditorSelection(N,k)})}},p.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},p.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},p.prototype.isControlled=function(){return"value"in this.props},p.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},p.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},p.prototype.createEditor=function(m,x){var v=new c.default(m,x);return x.tabIndex!=null&&this.setEditorTabIndex(v,x.tabIndex),this.hookEditor(v),v},p.prototype.hookEditor=function(m){this.unprivilegedEditor=this.makeUnprivilegedEditor(m),m.on("editor-change",this.onEditorChange)},p.prototype.unhookEditor=function(m){m.off("editor-change",this.onEditorChange)},p.prototype.getEditorContents=function(){return this.value},p.prototype.getEditorSelection=function(){return this.selection},p.prototype.isDelta=function(m){return m&&m.ops},p.prototype.isEqualValue=function(m,x){return this.isDelta(m)&&this.isDelta(x)?o.default(m.ops,x.ops):o.default(m,x)},p.prototype.setEditorContents=function(m,x){var v=this;this.value=x;var b=this.getEditorSelection();typeof x=="string"?m.setContents(m.clipboard.convert(x)):m.setContents(x),f(function(){return v.setEditorSelection(m,b)})},p.prototype.setEditorSelection=function(m,x){if(this.selection=x,x){var v=m.getLength();x.index=Math.max(0,Math.min(x.index,v-1)),x.length=Math.max(0,Math.min(x.length,v-1-x.index)),m.setSelection(x)}},p.prototype.setEditorTabIndex=function(m,x){var v,b;!((b=(v=m)===null||v===void 0?void 0:v.scroll)===null||b===void 0)&&b.domNode&&(m.scroll.domNode.tabIndex=x)},p.prototype.setEditorReadOnly=function(m,x){x?m.disable():m.enable()},p.prototype.makeUnprivilegedEditor=function(m){var x=m;return{getHTML:function(){return x.root.innerHTML},getLength:x.getLength.bind(x),getText:x.getText.bind(x),getContents:x.getContents.bind(x),getSelection:x.getSelection.bind(x),getBounds:x.getBounds.bind(x)}},p.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var m=a.default.findDOMNode(this.editingArea);if(!m)throw new Error("Cannot find element for editing area");if(m.nodeType===3)throw new Error("Editing area cannot be a text node");return m},p.prototype.renderEditingArea=function(){var m=this,x=this.props,v=x.children,b=x.preserveWhitespace,y=this.state.generation,w={key:y,ref:function(k){m.editingArea=k}};return i.default.Children.count(v)?i.default.cloneElement(i.default.Children.only(v),w):b?i.default.createElement("pre",e({},w)):i.default.createElement("div",e({},w))},p.prototype.render=function(){var m;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(m=this.props.className,m??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},p.prototype.onEditorChangeText=function(m,x,v,b){var y,w;if(this.editor){var k=this.isDelta(this.value)?b.getContents():b.getHTML();k!==this.getEditorContents()&&(this.lastDeltaChangeSet=x,this.value=k,(w=(y=this.props).onChange)===null||w===void 0||w.call(y,m,x,v,b))}},p.prototype.onEditorChangeSelection=function(m,x,v){var b,y,w,k,N,j;if(this.editor){var S=this.getEditorSelection(),A=!S&&m,O=S&&!m;o.default(m,S)||(this.selection=m,(y=(b=this.props).onChangeSelection)===null||y===void 0||y.call(b,m,x,v),A?(k=(w=this.props).onFocus)===null||k===void 0||k.call(w,m,x,v):O&&((j=(N=this.props).onBlur)===null||j===void 0||j.call(N,S,x,v)))}},p.prototype.focus=function(){this.editor&&this.editor.focus()},p.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},p.displayName="React Quill",p.Quill=c.default,p.defaultProps={theme:"snow",modules:{},readOnly:!1},p})(i.default.Component);function f(h){Promise.resolve().then(h)}return Zs=u,Zs}var gz=mz();const xz=Kx(gz),Gg=({value:t,onChange:e,placeholder:n,disabled:r=!1,rows:i=4,label:a,required:o,error:c,fullWidth:u=!1,className:f})=>{const h=L.useRef(null),p=L.useRef(!1),m=L.useMemo(()=>({toolbar:{container:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"]]}}),[]);L.useEffect(()=>{const v=()=>{document.querySelectorAll(".ql-tooltip").forEach(y=>{const w=y;w.style.display!=="none"&&(w.style.display="none",w.classList.remove("ql-editing"))})};return r&&v(),()=>{v()}},[r]),L.useEffect(()=>{if(!h.current)return;const b=h.current.getEditor().root;let y=null;const w=()=>(y||(y=document.createElement("div"),y.className="link-hover-tooltip",y.style.cssText=`
          position: absolute;
          background: rgba(0, 0, 0, 0.85);
          color: white;
          padding: 0.375rem 0.75rem;
          border-radius: 0.375rem;
          font-size: 0.75rem;
          pointer-events: none;
          z-index: 10001;
          white-space: nowrap;
          max-width: 300px;
          overflow: hidden;
          text-overflow: ellipsis;
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        `,document.body.appendChild(y)),y),k=A=>{const O=w(),M=A.getAttribute("href")||"";O.textContent=M;const z=A.getBoundingClientRect();O.style.left=`${z.left+window.scrollX}px`,O.style.top=`${z.bottom+window.scrollY+5}px`,O.style.display="block"},N=()=>{y&&(y.style.display="none")},j=()=>{b.querySelectorAll("a").forEach(O=>{var z;const M=O.getAttribute("href");if(M){O.setAttribute("title",M),O.setAttribute("target","_blank"),O.setAttribute("rel","noopener noreferrer"),O.style.pointerEvents="auto",O.style.cursor="pointer";const I=O.cloneNode(!0);(z=O.parentNode)==null||z.replaceChild(I,O),I.addEventListener("mouseenter",()=>k(I)),I.addEventListener("mouseleave",N)}})};j();const S=new MutationObserver(j);return S.observe(b,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["href"]}),()=>{S.disconnect(),y&&(document.body.removeChild(y),y=null)}},[t,r]),L.useEffect(()=>{var S;if(!h.current)return;const v=h.current.getEditor(),b=v.root,y=(S=v.getModule("toolbar"))==null?void 0:S.container,w=()=>{if(p.current)return;document.querySelectorAll(".ql-tooltip").forEach(O=>{const M=O;M.classList.contains("ql-editing")||(M.style.display="none")})},k=A=>{const O=A.target;O!=null&&O.closest(".ql-tooltip")||O!=null&&O.closest(".ql-link")||p.current||setTimeout(w,50)};let N;const j=new MutationObserver(()=>{clearTimeout(N),N=setTimeout(()=>{if(p.current)return;document.querySelectorAll(".ql-tooltip").forEach(O=>{const M=O;M.style.display!=="none"&&!M.classList.contains("ql-editing")&&(M.querySelector('input[type="text"]')||(M.style.display="none"))})},200)});if(b&&(j.observe(b.parentElement||document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),b.addEventListener("focus",k)),y){const A=y.querySelector(".ql-link");if(A){const O=M=>{M.stopPropagation(),p.current=!0,setTimeout(()=>{document.querySelectorAll(".ql-tooltip").forEach(I=>{const D=I;if(D.classList.contains("ql-editing")){D.style.display="flex";const T=D.getBoundingClientRect(),q=window.innerWidth,H=window.innerHeight;T.right>q&&(D.style.left=`${q-T.width-10}px`,D.style.right="auto"),T.left<0&&(D.style.left="10px",D.style.right="auto"),T.bottom>H&&(D.style.top=`${H-T.height-10}px`,D.style.bottom="auto")}})},100),setTimeout(()=>{p.current=!1},5e3)};return A.addEventListener("click",O),()=>{A.removeEventListener("click",O),clearTimeout(N)}}}return setTimeout(w,100),()=>{j.disconnect(),clearTimeout(N),b&&b.removeEventListener("focus",k)}},[t,r]),L.useEffect(()=>{const v=y=>{const w=y.target;w&&(w.classList.contains("ql-action")||w.closest(".ql-action"))&&setTimeout(()=>{document.querySelectorAll(".ql-tooltip").forEach(N=>{const j=N;j.style.display="none",j.classList.remove("ql-editing")}),p.current=!1},150)};document.addEventListener("click",v,!0);const b=setTimeout(()=>{p.current||document.querySelectorAll(".ql-tooltip").forEach(w=>{const k=w;if(k.classList.contains("ql-editing")){const N=k.querySelector('input[type="text"]');N&&document.activeElement!==N&&(k.style.display="none",k.classList.remove("ql-editing"))}})},500);return()=>{document.removeEventListener("click",v,!0),clearTimeout(b)}},[t]);const x=["bold","italic","underline","list","bullet","link"];return s.jsxs("div",{className:`${u?"w-full":""} ${f||""}`,children:[a&&s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a,o&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsx("div",{className:r?"opacity-50":"",children:s.jsx("div",{className:`rich-text-editor-wrapper ${r?"editor-disabled":""}`,children:s.jsx(xz,{ref:h,theme:"snow",value:t,onChange:e,placeholder:n,modules:m,formats:x,readOnly:r,style:{height:`${i*1.5}rem`},className:"bg-white"})})}),c&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:c}),s.jsx("style",{children:`
        .rich-text-editor-wrapper {
          margin-bottom: 0 !important;
          position: relative;
          display: block;
          height: auto !important;
        }
        .rich-text-editor-wrapper > div {
          margin-bottom: 0 !important;
          padding-bottom: 0 !important;
          height: auto !important;
        }
        .rich-text-editor-wrapper .ql-toolbar {
          border-top-left-radius: 0.375rem;
          border-top-right-radius: 0.375rem;
          border: 1px solid #d1d5db;
          border-bottom: none;
          margin-bottom: 0 !important;
          padding-bottom: 0 !important;
        }
        .rich-text-editor-wrapper .ql-container {
          border-bottom-left-radius: 0.375rem;
          border-bottom-right-radius: 0.375rem;
          border: 1px solid #d1d5db;
          border-top: none;
          position: relative;
          margin-bottom: 0 !important;
          padding-bottom: 0 !important;
          height: auto !important;
        }
        .rich-text-editor-wrapper .ql-editor {
          min-height: ${i*1.5}rem;
          margin-bottom: 0 !important;
          padding-bottom: 0 !important;
          ${f!=null&&f.includes("text-[10px]")?"font-size: 0.625rem !important;":""}
          ${f!=null&&f.includes("text-[11px]")?"font-size: 0.6875rem !important;":""}
        }
        .rich-text-editor-wrapper .ql-toolbar .ql-formats {
          ${f!=null&&f.includes("text-[10px]")?"font-size: 0.625rem !important;":""}
          ${f!=null&&f.includes("text-[11px]")?"font-size: 0.6875rem !important;":""}
        }
        .rich-text-editor-wrapper .ql-toolbar button {
          ${f!=null&&f.includes("text-[10px]")?"padding: 0.25rem !important; width: 1.25rem !important; height: 1.25rem !important;":""}
          ${f!=null&&f.includes("text-[11px]")?"padding: 0.25rem !important; width: 1.5rem !important; height: 1.5rem !important;":""}
        }
        .rich-text-editor-wrapper .ql-snow {
          margin-bottom: 0 !important;
          padding-bottom: 0 !important;
        }
        .rich-text-editor-wrapper .ql-snow.ql-toolbar,
        .rich-text-editor-wrapper .ql-snow .ql-toolbar {
          margin-bottom: 0 !important;
        }
        .rich-text-editor-wrapper .ql-snow.ql-container,
        .rich-text-editor-wrapper .ql-snow .ql-container {
          margin-bottom: 0 !important;
        }
        .rich-text-editor-wrapper .ql-tooltip {
          position: absolute !important;
          z-index: 10000 !important;
          box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2), 0 8px 10px -6px rgba(0, 0, 0, 0.1) !important;
          border-radius: 0.5rem !important;
          border: 1px solid #e5e7eb !important;
          background: white !important;
          padding: 0.5rem !important;
          min-width: 280px !important;
          max-width: 90vw !important;
          display: none !important;
          flex-direction: row !important;
          align-items: center !important;
          gap: 0.5rem !important;
          white-space: nowrap !important;
        }
        .rich-text-editor-wrapper .ql-tooltip.ql-editing {
          position: absolute !important;
          z-index: 10000 !important;
          display: flex !important;
          /* Ensure tooltip stays within viewport */
          left: auto !important;
          right: auto !important;
          transform: none !important;
        }
        /* Adjust tooltip position to stay within viewport */
        .rich-text-editor-wrapper .ql-tooltip.ql-editing[data-position] {
          /* ReactQuill will set data-position, we'll respect it but ensure it's visible */
        }
        .rich-text-editor-wrapper .ql-tooltip::before {
          display: block !important;
        }
        .rich-text-editor-wrapper .ql-tooltip input[type=text] {
          border: 1px solid #d1d5db !important;
          border-radius: 0.375rem !important;
          padding: 0.375rem 0.5rem !important;
          font-size: 0.875rem !important;
          width: 180px !important;
          max-width: calc(90vw - 200px) !important;
          transition: border-color 0.2s !important;
        }
        .rich-text-editor-wrapper .ql-tooltip input[type=text]:focus {
          outline: none !important;
          border-color: #8b5cf6 !important;
          box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1) !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-action,
        .rich-text-editor-wrapper .ql-tooltip a.ql-remove {
          cursor: pointer !important;
          border-radius: 0.375rem !important;
          padding: 0.25rem 0.5rem !important;
          font-weight: 500 !important;
          font-size: 0.75rem !important;
          transition: all 0.2s !important;
          text-decoration: none !important;
          display: inline-flex !important;
          align-items: center !important;
          justify-content: center !important;
          text-align: center !important;
          line-height: 1.5 !important;
          min-width: auto !important;
          width: auto !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-action {
          background: #8b5cf6 !important;
          color: white !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-action:hover {
          background: #7c3aed !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-remove {
          background: #f3f4f6 !important;
          color: #374151 !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-remove:hover {
          background: #e5e7eb !important;
        }
        /* Hide default Quill icons and show text */
        .rich-text-editor-wrapper .ql-tooltip a.ql-action::before {
          display: none !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-action::after {
          content: 'Save' !important;
          display: block !important;
          text-align: center !important;
          width: 100% !important;
          margin: 0 !important;
          padding: 0 !important;
          line-height: inherit !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-remove::before {
          display: none !important;
        }
        .rich-text-editor-wrapper .ql-tooltip a.ql-remove::after {
          content: 'Cancel' !important;
          display: block !important;
          text-align: center !important;
          width: 100% !important;
          margin: 0 !important;
          padding: 0 !important;
          line-height: inherit !important;
        }
        /* Style hyperlinks in editor - make them clickable even in read-only mode */
        .rich-text-editor-wrapper .ql-editor a {
          color: #2563eb !important;
          text-decoration: underline !important;
          cursor: pointer !important;
          pointer-events: auto !important;
        }
        .rich-text-editor-wrapper .ql-editor a:hover {
          color: #1d4ed8 !important;
          text-decoration: underline !important;
        }
        .rich-text-editor-wrapper .ql-editor a:visited {
          color: #7c3aed !important;
        }
        /* Ensure links are clickable even when editor is disabled */
        .rich-text-editor-wrapper .ql-editor.ql-disabled a,
        .rich-text-editor-wrapper .ql-container.ql-disabled .ql-editor a {
          pointer-events: auto !important;
          cursor: pointer !important;
        }
        /* Disable toolbar when editor is disabled, but keep links clickable */
        .rich-text-editor-wrapper.editor-disabled .ql-toolbar {
          pointer-events: none !important;
          opacity: 0.5 !important;
        }
        .rich-text-editor-wrapper.editor-disabled .ql-toolbar * {
          pointer-events: none !important;
        }
      `})]})},yz=({containerId:t})=>(L.useEffect(()=>{let e=null;const n=()=>(e||(e=document.createElement("div"),e.className="list-link-hover-tooltip",e.style.cssText=`
          position: absolute;
          background: rgba(0, 0, 0, 0.85);
          color: white;
          padding: 0.375rem 0.75rem;
          border-radius: 0.375rem;
          font-size: 0.75rem;
          pointer-events: none;
          z-index: 10001;
          white-space: nowrap;
          max-width: 300px;
          overflow: hidden;
          text-overflow: ellipsis;
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
          display: none;
        `,document.body.appendChild(e)),e),r=u=>{const f=n(),h=u.getAttribute("data-href")||u.getAttribute("href")||"";f.textContent=h;const p=u.getBoundingClientRect();f.style.left=`${p.left+window.scrollX}px`,f.style.top=`${p.bottom+window.scrollY+5}px`,f.style.display="block"},i=()=>{e&&(e.style.display="none")},a=document.getElementById(t);if(!a)return;const o=()=>{a.querySelectorAll("a.list-hyperlink").forEach(f=>{var p;const h=f.cloneNode(!0);(p=f.parentNode)==null||p.replaceChild(h,f),h.addEventListener("mouseenter",()=>r(h)),h.addEventListener("mouseleave",i)})};o();const c=new MutationObserver(o);return c.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["href","data-href"]}),()=>{c.disconnect(),e&&(document.body.removeChild(e),e=null)}},[t]),null),vz=()=>{var fu,hu,pu,fl,mu,gu,xu,Nc,yu,vu,bu;const[t,e]=L.useState([]),[n,r]=L.useState(!0),[i,a]=L.useState(""),[o,c]=L.useState("all"),[u,f]=L.useState("all"),[h,p]=L.useState("all"),[m,x]=L.useState("all"),[v,b]=L.useState("all"),[y,w]=L.useState(window.innerWidth<768),[k,N]=L.useState(!1),[j,S]=L.useState(null),[A,O]=L.useState(null),[M,z]=L.useState(!1);L.useEffect(()=>{const E=()=>w(window.innerWidth<768);return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const[I,D]=L.useState(!1),[T,q]=L.useState(null),[H,G]=L.useState(!1),[ee,X]=L.useState(null),[J,K]=L.useState(null),[W,R]=L.useState({show:!1,message:"",incompleteActions:[],actionLabel:"Incomplete actions:"}),[U,B]=L.useState(!1),[Q,Z]=L.useState([]),[$,ne]=L.useState(!1),[ae,ce]=L.useState(!1),[ye,Be]=L.useState([]),[Ue,it]=L.useState(!1),{addNotification:je}=ea(),[dt,st]=L.useState(null),[ft,Oe]=L.useState([]),[re,xe]=L.useState([]),[we,Se]=L.useState([]),[_e,te]=L.useState([]),[Ne,fe]=L.useState([]),[pe,Le]=L.useState([]),[Qe,qe]=L.useState([]),[et,_t]=L.useState([]),[Pe,Lt]=L.useState({finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",audit_year:"",audit_name:"",audit_key:"",risk_level:"",financial_impact:"",status:"open",selectedAuditKey:"",selectedAuditYear:""}),[Pt,dr]=L.useState(null),[On,nr]=L.useState({}),[Vt,$n]=L.useState([]),[kt,Kt]=L.useState({}),[Jt,bn]=L.useState(!1),[yt,en]=L.useState(null),[ot,tn]=L.useState(null),[ln,Rt]=L.useState(!1),[qt,on]=L.useState(!1),[vt,gn]=L.useState(null),[Ut,Nn]=L.useState(null),[Qt,Rn]=L.useState(null),vr=L.useRef({}),[Mt,Cr]=L.useState(null),[se,Fe]=L.useState(!1),[Ke,nt]=L.useState("findings"),Ft=L.useRef(null),[wn,rr]=L.useState(null),[Is,br]=L.useState(!1),[Zt,Fs]=L.useState(!1),[zs,to]=L.useState(!1),Bs=L.useRef(null),no=L.useRef(null),ii=L.useRef(null),[ai,jn]=L.useState(null),[Zn,Sn]=L.useState(""),[In,wr]=L.useState(""),[oi,Jn]=L.useState(""),[qs,ur]=L.useState([]),[bt,jr]=L.useState({finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",risk_level:"",financial_impact:"",status:""}),[Ir,Yn]=L.useState({}),[oe,be]=L.useState(null),[Ce,le]=L.useState([]),[ke,me]=L.useState([]),[Ge,wt]=L.useState(!1),cn={findingId:180,findingName:200,auditName:250,findingDescription:300,riskLevel:120,status:120,financialImpact:150,actions:200},{columnWidths:Gt,resizing:Ar,handleMouseDown:Us}=uc(Ft,cn,"audit-findings-columns"),[ro,rl]=L.useState(new Set),[Er,ps]=L.useState([]),[Ws,sa]=L.useState(!1),[gt,xn]=L.useState({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:"open"}),[sl,ws]=L.useState({}),[Si,ap]=L.useState([]),[Ci,il]=L.useState([]);L.useEffect(()=>{ao(),ou()},[]),L.useEffect(()=>{Ke==="actions"&&Er.length===0&&ia()},[Ke]),L.useEffect(()=>{const E=de=>{(de.key==="Escape"||de.keyCode===27)&&(W.show?R({show:!1,message:"",incompleteActions:[],actionLabel:"Incomplete actions:"}):I?(D(!1),q(null)):H?(G(!1),X(null),K(null)):vt!==null?gn(null):Ut!==null?Nn(null):wn!==null?rr(null):Zt?Fs(!1):Is?(br(!1),jn(null),ur([]),Sn(""),wr(""),Jn(""),be(null),le([]),me([])):Jt?Ei():k&&Ai())},Y=de=>{const Me=de.target;vt!==null&&(Me.closest(".relative")||gn(null)),Zt&&Bs.current&&!Bs.current.contains(Me)&&Fs(!1)};return window.addEventListener("keydown",E),document.addEventListener("mousedown",Y),()=>{window.removeEventListener("keydown",E),document.removeEventListener("mousedown",Y)}},[k,Jt,I,H,W.show,vt,Ut,wn,Zt,Is]),L.useEffect(()=>{if(Ut!==null){const E=()=>{const Y=vr.current[Ut];if(Y){const de=Y.getBoundingClientRect(),Me=window.innerHeight,he=window.innerWidth,He=200,$e=140;if(de.bottom+He+4<=Me)Rn({top:de.bottom+4,left:de.left,side:"bottom"});else{const Ye=de.right+$e+4<=he;Rn(Ye?{top:de.top,left:de.right+4,side:"right"}:{top:de.top,left:de.left-$e-4,side:"right"})}}};return window.addEventListener("scroll",E,!0),window.addEventListener("resize",E),()=>{window.removeEventListener("scroll",E,!0),window.removeEventListener("resize",E)}}},[Ut]);const ou=async()=>{try{const[E,Y,de,Me]=await Promise.all([Ot.getUsersByRole("team_manager").catch(he=>(console.error("Failed to load team_manager users:",he),[])),Ot.getUsersByRole("department_director").catch(he=>(console.error("Failed to load department_director users:",he),[])),Ot.getUsersByRole("management").catch(he=>(console.error("Failed to load management users:",he),[])),Ot.getUsersByRole("top_management").catch(he=>(console.error("Failed to load top_management users:",he),[]))]);ap(E),il(Y)}catch(E){console.error("Failed to load users by role:",E)}},sr=async E=>{try{const Y=await Ot.getFindingActions(E),de=new Date().toISOString().split("T")[0];if(!de){Kt(he=>({...he,[E]:Y}));return}const Me=await Promise.all(Y.map(async he=>{var $e;const He=($e=he.status)==null?void 0:$e.toLowerCase().trim();if(He==="open"&&he.due_date){const Je=new Date(he.due_date).toISOString().split("T")[0];if(!Je)return he;if(Je<de)try{return await Ot.updateFindingAction(he.id,{action_description:he.action_description,due_date:he.due_date,audit_lead:he.audit_lead,action_responsible:he.action_responsible,action_responsible_email:he.action_responsible_email,action_responsible_vp:he.action_responsible_vp,action_responsible_clevel:he.action_responsible_clevel,status:"overdue"}),{...he,status:"overdue"}}catch(Ye){return console.error("Failed to update overdue status for action:",he.id,Ye),he}}else if(He==="overdue"&&he.due_date){const Je=new Date(he.due_date).toISOString().split("T")[0];if(!Je)return he;if(Je>=de)try{return await Ot.updateFindingAction(he.id,{action_description:he.action_description,due_date:he.due_date,audit_lead:he.audit_lead,action_responsible:he.action_responsible,action_responsible_email:he.action_responsible_email,action_responsible_vp:he.action_responsible_vp,action_responsible_clevel:he.action_responsible_clevel,status:"open"}),{...he,status:"open"}}catch(Ye){return console.error("Failed to update open status for action:",he.id,Ye),he}}return he}));Kt(he=>({...he,[E]:Me})),await li(E,Me)}catch(Y){console.error("Failed to load finding actions:",Y)}},so=async E=>{try{const Y=E.map(he=>Ot.getFindingActions(he).then(He=>({findingId:he,actions:He}))),de=await Promise.all(Y),Me={};de.forEach(({findingId:he,actions:He})=>{Me[he]=He}),Kt(he=>({...he,...Me}))}catch(Y){console.error("Failed to load finding actions:",Y)}},ia=async E=>{try{sa(!0),console.log(" loadAllActions called");let Y=E;if((!Y||Y.length===0)&&(Y=(await Ot.getAuditFindings({})).map(Me=>Me.id)),Y.length>0){const de=Y.map(Je=>Ot.getFindingActions(Je)),Me=await Promise.all(de),he=[];Me.forEach(Je=>{he.push(...Je||[])}),console.log(` Total actions loaded: ${he.length}`);const He=new Map;he.forEach(Je=>{Je.id&&(He.has(Je.id)?console.warn(` Duplicate action found: ${Je.id} (${Je.action_id})`):He.set(Je.id,Je))});const $e=Array.from(He.values());console.log(` Unique actions: ${$e.length}`),ps($e)}}catch(Y){console.error("Failed to load all actions:",Y),je({type:"error",message:"Failed to load actions"})}finally{sa(!1)}},Hs=(E,Y)=>{if(!E||E.length===0)return!1;const de=Y.toLowerCase().trim();return E.every(Me=>{var He;return((He=Me.status)==null?void 0:He.toLowerCase().trim())===de})},io=async(E,Y)=>{if(!kt[E]||kt[E].length===0)try{await sr(E)}catch(he){console.error("Failed to load actions for status check:",he)}const de=kt[E]||[];if(de.length===0)return{canSet:!0};const Me=Y.toLowerCase().trim();if(Me==="completed"&&!Hs(de,"Completed")){const He=de.filter(Ye=>{var rt;return((rt=Ye.status)==null?void 0:rt.toLowerCase().trim())!=="completed"}).map(Ye=>Ye.action_id||`Action #${Ye.id}`);return{canSet:!1,reason:`Cannot set finding status to Completed. ${He.length} of ${de.length} action(s) are not completed.

Incomplete actions:`,incompleteActions:He,actionLabel:"Incomplete actions:"}}if(Me==="closed"&&!Hs(de,"Closed")){const He=de.filter(Ye=>{var rt;return((rt=Ye.status)==null?void 0:rt.toLowerCase().trim())!=="closed"}).map(Ye=>Ye.action_id||`Action #${Ye.id}`);return{canSet:!1,reason:`Cannot set finding status to Closed. ${He.length} of ${de.length} action(s) are not closed.

Not closed actions:`,incompleteActions:He,actionLabel:"Not closed actions:"}}if(Me==="risk accepted"&&!Hs(de,"Risk Accepted")){const He=de.filter(Ye=>{var rt;return((rt=Ye.status)==null?void 0:rt.toLowerCase().trim())!=="risk accepted"}).map(Ye=>Ye.action_id||`Action #${Ye.id}`);return{canSet:!1,reason:`Cannot set finding status to Risk Accepted. ${He.length} of ${de.length} action(s) are not risk accepted.

Not risk accepted actions:`,incompleteActions:He,actionLabel:"Not risk accepted actions:"}}return{canSet:!0}},li=async(E,Y)=>{var de;try{const Me=Y||kt[E]||[];if(Me.length===0)return;const he=t.find(pt=>pt.id===E);if(!he)return;let He;const $e=pt=>pt?pt.toLowerCase().trim():"",Je=Me.filter(pt=>{const nn=$e(pt.status);return nn==="open"||nn==="overdue"||nn==="completed"});Je.length===0?Me.some(nn=>$e(nn.status)==="risk accepted")?He="Risk Accepted":Hs(Me,"Closed")?He="Closed":He="Open":Je.every(nn=>$e(nn.status)==="completed")?He="Completed":He="Open";const Ye=(de=he.status)==null?void 0:de.toLowerCase().trim(),rt=He==null?void 0:He.toLowerCase().trim();Ye!==rt&&(await Ot.updateAuditFinding(E,{finding_name:he.finding_name,finding_description:he.finding_description,audit_type:he.audit_type,audit_type_other:he.audit_type_other,risk_type:he.risk_type,internal_control_element:he.internal_control_element,country:he.country,audit_year:he.audit_year,audit_name:he.audit_name,audit_key:he.audit_key,risk_level:he.risk_level,financial_impact:he.financial_impact,status:He}),e(pt=>pt.map(nn=>nn.id===E?{...nn,status:He}:nn)),A&&A.id===E&&O(pt=>pt?{...pt,status:He}:null))}catch(Me){console.error("Failed to auto-update finding status:",Me)}},lu=async()=>{try{const E=new Date().toISOString().split("T")[0];if(!E)return;const Y=[];Object.keys(kt).forEach(de=>{const Me=kt[Number(de)];Me&&Me.forEach(he=>{var $e;const He=($e=he.status)==null?void 0:$e.toLowerCase().trim();if(He==="open"&&he.due_date){const Je=new Date(he.due_date).toISOString().split("T")[0];if(!Je||!E)return;Je<E&&Y.push(Ot.updateFindingAction(he.id,{action_description:he.action_description,due_date:he.due_date,audit_lead:he.audit_lead,action_responsible:he.action_responsible,action_responsible_email:he.action_responsible_email,action_responsible_vp:he.action_responsible_vp,action_responsible_clevel:he.action_responsible_clevel,status:"overdue"}).then(()=>{Kt(Ye=>{const rt=Ye[Number(de)];return rt?{...Ye,[Number(de)]:rt.map(pt=>pt.id===he.id?{...pt,status:"overdue"}:pt)}:Ye}),ps(Ye=>Ye.map(rt=>rt.id===he.id?{...rt,status:"overdue"}:rt)),li(Number(de))}))}else if(He==="overdue"&&he.due_date){const Je=new Date(he.due_date).toISOString().split("T")[0];if(!Je||!E)return;Je>=E&&Y.push(Ot.updateFindingAction(he.id,{action_description:he.action_description,due_date:he.due_date,audit_lead:he.audit_lead,action_responsible:he.action_responsible,action_responsible_email:he.action_responsible_email,action_responsible_vp:he.action_responsible_vp,action_responsible_clevel:he.action_responsible_clevel,status:"open"}).then(()=>{Kt(Ye=>{const rt=Ye[Number(de)];return rt?{...Ye,[Number(de)]:rt.map(pt=>pt.id===he.id?{...pt,status:"open"}:pt)}:Ye}),ps(Ye=>Ye.map(rt=>rt.id===he.id?{...rt,status:"open"}:rt)),li(Number(de))}))}})}),await Promise.all(Y)}catch(E){console.error("Failed to check and update overdue actions:",E)}};L.useEffect(()=>{ci()},[o,u,h]),L.useEffect(()=>{lu();const E=setInterval(()=>{lu()},6e4);return()=>clearInterval(E)},[kt]);const ao=async()=>{try{r(!0),await Promise.all([_c(),ci()])}catch{je({type:"error",message:"Failed to load data"})}finally{r(!1)}},{data:ms=[]}=Py();L.useEffect(()=>{if(ms&&ms.length>0){const E=Array.from(new Set(ms.map(Y=>String(Y.audit_year)))).sort((Y,de)=>de.localeCompare(Y));fe(E)}},[ms]),L.useEffect(()=>{if(ms&&ms.length>0){const E=ms.map(Y=>({key:`AUDIT-${Y.id}`,summary:Y.audit_name||Y.audit_type||"Unnamed Audit",auditYear:String(Y.audit_year),auditLead:Y.audit_lead_name||Y.audit_lead_email||"",status:Y.status||"Planned"}));_t(E),console.log(` Loaded ${E.length} audit plans from Annual Audit Plan`)}else _t([])},[ms]);const _c=async()=>{try{const[E,Y,de,Me,he,He]=await Promise.all([Ot.getDropdownOptions("audit_type"),Ot.getDropdownOptions("risk_type"),Ot.getDropdownOptions("internal_control_element"),Ot.getDropdownOptions("country"),Ot.getDropdownOptions("risk_level"),Ot.getDropdownOptions("status")]);Oe(E),xe(Y),Se(de),te(Me),Le(he);const $e=Array.from(new Set(He.map(Je=>Je.toLowerCase().trim()))).map(Je=>He.find(rt=>rt.toLowerCase().trim()===Je)||Je);console.log(" Status options loaded:",$e.length,$e),qe($e)}catch(E){console.error("Failed to load dropdown options:",E)}},ci=async()=>{try{const E=await Ot.getAuditFindings({});if(e(E),E.length>0){const Y=E.map(de=>de.id);await so(Y),await ia(Y)}}catch{je({type:"error",message:"Failed to load audit findings"})}},Yr=async E=>{var de,Me;document.querySelectorAll(".ql-tooltip").forEach(he=>{const He=he;He.style.display="none",He.classList.remove("ql-editing")}),O(E),S(null),z(!1),Lt({finding_name:E.finding_name||"",finding_description:E.finding_description||"",audit_type:E.audit_type||"",audit_type_other:E.audit_type_other||"",risk_type:E.risk_type||"",internal_control_element:E.internal_control_element||"",country:E.country||"",audit_year:E.audit_year||"",audit_name:E.audit_name||"",audit_key:E.audit_key||"",risk_level:E.risk_level||"",financial_impact:((de=E.financial_impact)==null?void 0:de.toString())||"",status:E.status||"open",selectedAuditKey:E.audit_key||"",selectedAuditYear:E.audit_year||""}),$n(((Me=E.attachments)==null?void 0:Me.map(he=>({file_name:he.file_name,file_size:he.file_size,file_type:he.file_type,file_path:he.file_path})))||[]),await sr(E.id),N(!0)},Ai=()=>{document.querySelectorAll(".ql-tooltip").forEach(Y=>{const de=Y;de.style.display="none",de.classList.remove("ql-editing")}),N(!1),O(null),S(null),z(!1),B(!1),Lt({finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",audit_year:"",audit_name:"",audit_key:"",risk_level:"",financial_impact:"",status:"open",selectedAuditKey:"",selectedAuditYear:""}),$n([]),nr({})},al=E=>{Lt(Y=>({...Y,selectedAuditYear:E,selectedAuditKey:"",audit_name:"",audit_key:"",audit_year:""}))},cu=E=>{const Y=et.find(de=>de.key===E);Y&&(Lt(de=>({...de,selectedAuditKey:E,audit_name:Y.summary,audit_key:Y.key,audit_year:Y.auditYear})),st({selectedAuditYear:Y.auditYear,selectedAuditKey:Y.key,selectedAuditName:Y.summary}))},ol=Pe.selectedAuditYear?et.filter(E=>E.auditYear===Pe.selectedAuditYear):[],ll=E=>{const Y=E.target.files;if(Y){const de=Array.from(Y).map(Me=>({file_name:Me.name,file_size:Me.size,file_type:Me.type,file_path:void 0}));$n(Me=>[...Me,...de])}},du=E=>{$n(Y=>Y.filter((de,Me)=>Me!==E))},Fr=()=>{var de,Me,he,He;const E={};return(de=Pe.finding_name)!=null&&de.trim()||(E.finding_name="Finding name is required"),(Me=Pe.finding_description)!=null&&Me.trim()||(E.finding_description="Finding description is required"),Pe.selectedAuditYear||(E.selectedAuditYear="Audit year selection is required"),(he=Pe.audit_name)!=null&&he.trim()||(E.audit_name="Audit selection is required"),Pe.audit_type||(E.audit_type="Audit type is required"),Pe.audit_type==="Other"&&!((He=Pe.audit_type_other)!=null&&He.trim())&&(E.audit_type_other="Please specify the audit type"),Pe.risk_type||(E.risk_type="Risk type is required"),Pe.internal_control_element||(E.internal_control_element="Internal control element is required"),Pe.country||(E.country="Country is required"),Pe.risk_level||(E.risk_level="Risk level is required"),nr(E),{isValid:Object.keys(E).length===0,errors:E}},aa=L.useMemo(()=>!Pt||!M?!1:Pe.finding_name!==Pt.finding_name||Pe.finding_description!==Pt.finding_description||Pe.audit_type!==Pt.audit_type||Pe.audit_type_other!==Pt.audit_type_other||Pe.risk_type!==Pt.risk_type||Pe.internal_control_element!==Pt.internal_control_element||Pe.country!==Pt.country||Pe.audit_year!==Pt.audit_year||Pe.audit_name!==Pt.audit_name||Pe.audit_key!==Pt.audit_key||Pe.risk_level!==Pt.risk_level||Pe.financial_impact!==Pt.financial_impact||Pe.status!==Pt.status,[Pe,Pt,M]),cl=async(E,Y=!1)=>{var He,$e,Je;console.log("handleSubmit called",{keepModalOpen:Y,formData:Pe,editingFinding:j,viewingFinding:A}),E&&E.preventDefault();const de=Fr(),{isValid:Me,errors:he}=de;if(console.log("Validation result:",Me,"Validation errors:",he),!Me){console.log("Form validation failed, errors:",he);const Ye=Object.values(he).filter(Boolean);je({type:"error",message:Ye.length>0?`Please fix the following errors: ${Ye.join(", ")}`:"Please fill in all required fields"});return}console.log("Validation passed, proceeding with submit...");try{const Ye={finding_name:Pe.finding_name,finding_description:Pe.finding_description||void 0,audit_type:Pe.audit_type||void 0,audit_type_other:Pe.audit_type==="Other"?Pe.audit_type_other:void 0,risk_type:Pe.risk_type||void 0,internal_control_element:Pe.internal_control_element||void 0,country:Pe.country||void 0,audit_year:Pe.audit_year||void 0,audit_name:Pe.audit_name,audit_key:Pe.audit_key||void 0,risk_level:Pe.risk_level||void 0,financial_impact:Pe.financial_impact?parseFloat(Pe.financial_impact):void 0,status:Pe.status,attachments:Vt.length>0?Vt:void 0};if(j){await Ot.updateAuditFinding(j.id,Ye);const rt=await Ot.getAuditFinding(j.id);Lt({finding_name:rt.finding_name||"",finding_description:rt.finding_description||"",audit_type:rt.audit_type||"",audit_type_other:rt.audit_type_other||"",risk_type:rt.risk_type||"",internal_control_element:rt.internal_control_element||"",country:rt.country||"",audit_year:rt.audit_year||"",audit_name:rt.audit_name||"",audit_key:rt.audit_key||"",risk_level:rt.risk_level||"",financial_impact:rt.financial_impact?String(rt.financial_impact):"",status:rt.status||"open",selectedAuditKey:rt.audit_key||"",selectedAuditYear:rt.audit_year||""}),O(null),S(null),z(!1),dr(null),N(!1),je({type:"success",message:"Audit finding updated successfully"})}else await Ot.createAuditFinding(Ye),je({type:"success",message:"Audit finding created successfully"}),Y?(Lt(rt=>({...rt,finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",risk_level:"",financial_impact:"",status:"open"})),$n([]),nr({})):Ai();ci()}catch(Ye){console.error(" Error saving audit finding:",Ye);const rt=(($e=(He=Ye==null?void 0:Ye.response)==null?void 0:He.data)==null?void 0:$e.error)||(Ye==null?void 0:Ye.message)||((Ye==null?void 0:Ye.code)==="ERR_NETWORK"||(Je=Ye==null?void 0:Ye.message)!=null&&Je.includes("Network Error")?"Network error: Server may be offline. Please check your connection and try again.":"Failed to save audit finding");je({type:"error",message:rt})}},oo=async()=>{var E,Y;if(T)try{await Ot.deleteAuditFinding(T),je({type:"success",message:"Audit finding deleted successfully"}),D(!1),q(null),ci()}catch(de){je({type:"error",message:((Y=(E=de==null?void 0:de.response)==null?void 0:E.data)==null?void 0:Y.error)||"Failed to delete audit finding"})}},dl=t.filter(E=>{var Je,Ye;if(Ke==="actions")return!1;const Y=i.toLowerCase(),de=(E.finding_id?String(E.finding_id).toLowerCase().includes(Y):!1)||E.finding_name.toLowerCase().includes(Y)||(E.finding_description?E.finding_description.toLowerCase().includes(Y):!1)||E.audit_name.toLowerCase().includes(Y)||(E.financial_impact?String(E.financial_impact).toLowerCase().includes(Y):!1),Me=o==="all"||((Je=E.status)==null?void 0:Je.toLowerCase())===o.toLowerCase(),he=u==="all"||((Ye=E.risk_level)==null?void 0:Ye.toLowerCase())===u.toLowerCase(),He=h==="all"||E.audit_year===h,$e=m==="all"||E.audit_name===m;return de&&Me&&he&&He&&$e}),oa=L.useMemo(()=>{const E=new Map;return Er.forEach(Y=>{Y.id&&!E.has(Y.id)&&E.set(Y.id,Y)}),Array.from(E.values())},[Er]).filter(E=>{var $e,Je;if(Ke==="findings")return!1;const Y=E.action_description.toLowerCase().includes(i.toLowerCase())||E.action_id.toLowerCase().includes(i.toLowerCase()),de=o==="all"||(($e=E.status)==null?void 0:$e.toLowerCase())===o.toLowerCase(),Me=h==="all"||E.audit_year===h,he=m==="all"||E.audit_name===m,He=v==="all"||((Je=E.action_responsible)==null?void 0:Je.toLowerCase().trim())===v.toLowerCase().trim();return Y&&de&&Me&&he&&He}),lo=E=>{rl(Y=>{const de=new Set(Y);return de.has(E)?de.delete(E):(de.add(E),kt[E]||sr(E)),de})},di=E=>{switch(E.toLowerCase()){case"completed":return"success";case"risk accepted":return"warning";case"overdue":return"danger";case"closed":return"dark";default:return"info"}},ul=E=>{switch(E==null?void 0:E.toLowerCase()){case"critical":return"dark";case"high":return"danger";case"medium":return"orange";case"low":return"warning";default:return"default"}},Vs=E=>{switch(E.toLowerCase()){case"completed":return"success";case"risk accepted":return"warning";case"overdue":return"danger";case"closed":return"dark";default:return"info"}},co=async(E,Y)=>{try{Cr(E),tn(Y),en(null),Rt(!1),on(!1);let de=Y.due_date||"";if(de&&typeof de=="string"){const Me=new Date(de);if(!isNaN(Me.getTime())){const he=Me.toISOString().split("T")[0];he&&(de=he)}}console.log("handleViewAction - action.due_date:",Y.due_date,"formatted:",de),xn({action_description:Y.action_description||"",due_date:de,audit_lead:Y.audit_lead||"",action_responsible:Y.action_responsible||"",action_responsible_email:Y.action_responsible_email||"",action_responsible_vp:Y.action_responsible_vp||"",action_responsible_clevel:Y.action_responsible_clevel||"",status:Y.status||"open"}),bn(!0);try{const Me=await Ot.getFindingAction(Y.id);let he=Me.due_date||"";if(he&&typeof he=="string"){const He=new Date(he);if(!isNaN(He.getTime())){const $e=He.toISOString().split("T")[0];$e&&(he=$e)}}console.log("handleViewAction - updatedAction.due_date:",Me.due_date,"formatted:",he),xn({action_description:Me.action_description||"",due_date:he,audit_lead:Me.audit_lead||"",action_responsible:Me.action_responsible||"",action_responsible_email:Me.action_responsible_email||"",action_responsible_vp:Me.action_responsible_vp||"",action_responsible_clevel:Me.action_responsible_clevel||"",status:Me.status||"open"}),tn(Me)}catch(Me){console.error("Failed to reload action:",Me)}}catch(de){console.error("Error in handleViewAction:",de),je({type:"error",message:"Failed to open action view"})}},la=(E,Y)=>{Cr(E),tn(null),en(null),Rt(!1),on(!0),xn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:"open"}),ws({}),bn(!0)},Ei=()=>{bn(!1),en(null),tn(null),on(!1),Cr(null),ce(!1),xn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:"open"}),ws({})},op=()=>{const E={};return gt.action_description.trim()||(E.action_description="Action description is required"),gt.due_date||(E.due_date="Due date is required"),gt.audit_lead||(E.audit_lead="Audit lead is required"),gt.action_responsible||(E.action_responsible="Action responsible is required"),ws(E),Object.keys(E).length===0},lp=async E=>{var Y,de,Me;if(E.preventDefault(),!(!op()||!Mt))try{if(yt){const he=new Date().toISOString().split("T")[0];let He=gt.status||(yt==null?void 0:yt.status)||"open";const $e=(Y=yt.status)==null?void 0:Y.toLowerCase().trim();($e==="open"||$e==="overdue")&&(He==="open"&&gt.due_date&&gt.due_date<he?He="overdue":($e==="overdue"&&gt.due_date&&gt.due_date>=he||He==="overdue"&&gt.due_date&&gt.due_date>=he)&&(He="open")),await Ot.updateFindingAction(yt.id,{action_description:gt.action_description,due_date:gt.due_date,audit_lead:gt.audit_lead,action_responsible:gt.action_responsible,action_responsible_email:gt.action_responsible_email,action_responsible_vp:gt.action_responsible_vp,action_responsible_clevel:gt.action_responsible_clevel,status:He});const Je={...yt,action_description:gt.action_description,due_date:gt.due_date,audit_lead:gt.audit_lead,action_responsible:gt.action_responsible,action_responsible_email:gt.action_responsible_email,action_responsible_vp:gt.action_responsible_vp,action_responsible_clevel:gt.action_responsible_clevel,status:He};Mt&&(Kt(pt=>({...pt,[Mt]:(pt[Mt]||[]).map(nn=>nn.id===yt.id?Je:nn)})),ps(pt=>pt.map(nn=>nn.id===yt.id?Je:nn)),await li(Mt)),Mt&&await sr(Mt);const Ye=await Ot.getFindingAction(yt.id);let rt=Ye.due_date||"";if(rt&&typeof rt=="string"){const pt=new Date(rt);if(!isNaN(pt.getTime())){const nn=pt.toISOString().split("T")[0];nn&&(rt=nn)}}xn({action_description:Ye.action_description||"",due_date:rt,audit_lead:Ye.audit_lead||"",action_responsible:Ye.action_responsible||"",action_responsible_email:Ye.action_responsible_email||"",action_responsible_vp:Ye.action_responsible_vp||"",action_responsible_clevel:Ye.action_responsible_clevel||"",status:Ye.status||"open"}),bn(!0),tn(Ye),en(null),Rt(!1),je({type:"success",message:"Finding action updated successfully"})}else{const he=await Ot.createFindingAction({finding_id:Mt,...gt});Mt&&he.data&&(Kt(He=>({...He,[Mt]:[...He[Mt]||[],he.data]})),await li(Mt)),je({type:"success",message:"Finding action created successfully"})}yt||(on(!1),xn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:"open"}),ws({}))}catch(he){je({type:"error",message:((Me=(de=he==null?void 0:he.response)==null?void 0:de.data)==null?void 0:Me.error)||"Failed to save finding action"})}},cp=async()=>{var E,Y;if(!(!ee||!J))try{await Ot.deleteFindingAction(ee),je({type:"success",message:"Finding action deleted successfully"}),G(!1),X(null),K(null),await sr(J),Jt&&Ei(),await li(J)}catch(de){je({type:"error",message:((Y=(E=de==null?void 0:de.response)==null?void 0:E.data)==null?void 0:Y.error)||"Failed to delete finding action"})}},dp=E=>{if(!E)return"";const Y=document.createElement("div");return Y.innerHTML=E,Y.textContent||Y.innerText||""},uo=(E,Y=2)=>{if(!E)return s.jsx("span",{children:"-"});const de=/<[ou]l>|<li>/i.test(E),Me=/<a[^>]*>/i.test(E);if(de||Me){let He=E.replace(/<p>/gi,"").replace(/<\/p>/gi,"");He=He.replace(/<a([^>]*)>/gi,(Ye,rt)=>{const pt=rt.match(/href=["']([^"']+)["']/i),nn=pt?pt[1]:"";return`<a${rt} target="_blank" rel="noopener noreferrer" title="${nn}" data-href="${nn}" class="list-hyperlink" style="color: #2563eb; text-decoration: underline; cursor: pointer; position: relative;">`});const $e=Y===1?"line-clamp-1":"line-clamp-2",Je=`html-content-${Math.random().toString(36).substr(2,9)}`;return s.jsxs(s.Fragment,{children:[s.jsx("div",{id:Je,className:`${$e} prose prose-sm max-w-none html-content-list`,style:{fontSize:"0.875rem",lineHeight:"1.25rem"},dangerouslySetInnerHTML:{__html:He},onClick:Ye=>{const rt=Ye.target;if(rt.tagName==="A"){const pt=rt.getAttribute("href");pt&&(Ye.preventDefault(),window.open(pt,"_blank","noopener,noreferrer"))}}}),s.jsx(yz,{containerId:Je}),s.jsx("style",{children:`
            .html-content-list ul,
            .html-content-list ol {
              margin: 0.25rem 0 !important;
              padding-left: 1.5rem !important;
              list-style-position: outside !important;
            }
            .html-content-list ul {
              list-style-type: disc !important;
            }
            .html-content-list ol {
              list-style-type: decimal !important;
            }
            .html-content-list li {
              margin: 0.125rem 0 !important;
              padding-left: 0.25rem !important;
            }
            .html-content-list ul li {
              list-style-type: disc !important;
            }
            .html-content-list ol li {
              list-style-type: decimal !important;
            }
            .html-content-list a {
              color: #2563eb !important;
              text-decoration: underline !important;
              cursor: pointer !important;
            }
            .html-content-list a:hover {
              color: #1d4ed8 !important;
            }
          `})]})}const he=Y===1?"line-clamp-1":"line-clamp-2";return s.jsx("span",{className:he,children:dp(E)||"-"})},Wt=E=>E?E.split(" ").map(Y=>Y.includes("&")?Y.split("&").map(de=>de.charAt(0).toUpperCase()+de.slice(1).toLowerCase()).join("&"):Y.charAt(0).toUpperCase()+Y.slice(1).toLowerCase()).join(" "):"",kc=E=>{if(!E&&E!==0)return"";const Y=typeof E=="string"?parseFloat(E):E;return isNaN(Y)?"":Y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})};return n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(Ct,{size:"lg"})}):s.jsxs("div",{className:"space-y-2 md:space-y-6 p-0 md:p-6",children:[s.jsxs("div",{className:"flex items-start md:items-center justify-between gap-2 px-3 md:px-0",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:"text-base md:text-[24px] font-bold text-gray-900",children:"Audit Finding"}),s.jsx("p",{className:"text-[11px] md:text-base text-gray-600 mt-0.5 md:mt-1",children:"Manage audit findings and their related actions"})]}),Ke==="findings"&&s.jsxs("div",{className:"relative flex-shrink-0",ref:Bs,children:[s.jsxs(ze,{variant:"primary",onClick:()=>Fs(!Zt),className:F("flex items-center justify-center gap-0.5 md:gap-1",y?"!text-[8px] px-1.5 py-1 h-6":"text-base px-4 h-auto"),children:[s.jsx("svg",{className:F(y?"w-2.5 h-2.5":"w-5 h-5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{className:F("hidden md:inline",y&&"!text-[8px]"),children:"Add Finding"}),s.jsx("span",{className:F("md:hidden",y&&"!text-[8px]"),children:"Add"}),s.jsx("svg",{className:F("transition-transform",y?"w-2 h-2":"w-4 h-4",Zt?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Zt&&s.jsxs("div",{className:F("absolute right-0 bg-white rounded-md md:rounded-lg shadow-xl border border-gray-200 z-50",y?"mt-0.5 w-[200px] py-0.5":"mt-2 w-72 py-2"),children:[s.jsxs("button",{onClick:()=>{jn("single"),br(!0),Fs(!1)},className:F("w-full text-left hover:bg-gray-50 transition-colors flex items-center group",y?"px-2 py-1 gap-1.5":"px-4 py-3 gap-3"),children:[s.jsx("div",{className:F("flex-shrink-0 rounded-md md:rounded-lg bg-purple-100 group-hover:bg-purple-200 flex items-center justify-center transition-colors",y?"w-5 h-5":"w-10 h-10"),children:s.jsx("svg",{className:F("text-purple-600",y?"w-2.5 h-2.5":"w-5 h-5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:F("font-medium text-gray-900",y?"text-[9px]":"text-sm"),children:"Add from Dashboard"}),s.jsx("div",{className:F("text-gray-500",y?"text-[8px] mt-0":"text-xs mt-0.5"),children:"Add findings using the form"})]})]}),s.jsx("div",{className:F("border-t border-gray-100",y?"my-0.5":"my-1")}),s.jsxs("button",{onClick:()=>{jn("bulk"),br(!0),Fs(!1)},className:F("w-full text-left hover:bg-gray-50 transition-colors flex items-center group",y?"px-2 py-1 gap-1.5":"px-4 py-3 gap-3"),children:[s.jsx("div",{className:F("flex-shrink-0 rounded-md md:rounded-lg bg-blue-100 group-hover:bg-blue-200 flex items-center justify-center transition-colors",y?"w-5 h-5":"w-10 h-10"),children:s.jsx("svg",{className:F("text-blue-600",y?"w-2.5 h-2.5":"w-5 h-5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:F("font-medium text-gray-900",y?"text-[9px]":"text-sm"),children:"Bulk Add from Excel/CSV"}),s.jsx("div",{className:F("text-gray-500",y?"text-[8px] mt-0":"text-xs mt-0.5"),children:"Import findings from file"})]})]})]})]})]}),s.jsxs(Ie,{className:"overflow-hidden",children:[s.jsx("div",{className:"p-2 md:p-4 pb-2 md:pb-3 border-b border-gray-200 px-3 md:px-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-[6.4px] md:gap-[12.8px]",children:[s.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-md p-0.5 inline-flex w-fit",children:[s.jsx("button",{onClick:()=>nt("findings"),className:`px-2 md:px-3 py-0.5 md:py-1 rounded text-[10px] md:text-xs font-medium transition-colors ${Ke==="findings"?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Findings"}),s.jsx("button",{onClick:()=>nt("actions"),className:`px-2 md:px-3 py-0.5 md:py-1 rounded text-[10px] md:text-xs font-medium transition-colors ${Ke==="actions"?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Actions"})]}),s.jsxs("div",{className:"block md:hidden space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"flex-1",children:s.jsx(yh,{onSearch:E=>a(E),placeholder:"Search...",className:"h-[32px] text-[11px] [&>input]:h-[32px] [&>input]:text-[11px] [&>input]:py-1 [&_svg]:w-3 [&_svg]:h-3"})}),s.jsxs("button",{onClick:()=>to(!zs),className:`relative flex items-center gap-1 px-2 h-[32px] rounded-md font-medium text-[11px] transition-all ${zs?"bg-purple-600 text-white shadow-md":"bg-white text-gray-700 border border-gray-300 hover:border-purple-400"}`,children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),s.jsx("span",{className:"text-[10px] font-bold",children:"Filters"}),(()=>{const E=[o!=="all",u!=="all",m!=="all",h!=="all",Ke==="actions"&&v!=="all"].filter(Boolean).length;return E>0?s.jsx("span",{className:`absolute -top-0.5 -right-0.5 w-3.5 h-3.5 rounded-full text-[8px] font-bold flex items-center justify-center ${zs?"bg-white text-purple-600":"bg-purple-600 text-white"}`,children:E}):null})()]})]}),(()=>{const E=[{key:"status",value:o,label:"Status",display:Wt(o),setter:c},{key:"risk",value:u,label:"Risk",display:Wt(u),setter:f,show:Ke==="findings"},{key:"audit",value:m,label:"Audit",display:m,setter:x},{key:"year",value:h,label:"Year",display:h,setter:p},{key:"responsible",value:v,label:"Responsible",display:(()=>{const Y=Ci.find(de=>{var Me;return((Me=de.email)==null?void 0:Me.toLowerCase().trim())===v.toLowerCase().trim()});return Y?Y.name:v})(),setter:b,show:Ke==="actions"}].filter(Y=>Y.value!=="all"&&Y.show!==!1);return E.length>0?s.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto pb-0.5 scrollbar-hide",children:[E.map(Y=>s.jsxs("div",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-purple-100 text-purple-700 rounded-full text-[9px] font-medium whitespace-nowrap",children:[s.jsxs("span",{className:"font-semibold",children:[Y.label,":"]}),s.jsx("span",{className:"max-w-[80px] truncate",children:Y.display}),s.jsx("button",{onClick:()=>Y.setter("all"),className:"hover:bg-purple-200 rounded-full p-0.5 transition-colors",children:s.jsx("svg",{className:"w-2 h-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]},Y.key)),E.length>0&&s.jsxs("button",{onClick:()=>{c("all"),f("all"),x("all"),p("all"),b("all")},className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 text-gray-600 hover:bg-gray-200 rounded-full text-[9px] font-medium whitespace-nowrap transition-colors",children:[s.jsx("svg",{className:"w-2 h-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})]}):null})(),s.jsx("div",{className:"overflow-hidden transition-all duration-300 ease-in-out -mx-3 md:mx-0 w-[calc(100%+1.5rem)] md:w-auto",style:{maxHeight:zs?"400px":"0px",opacity:zs?1:0},children:s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-none md:rounded p-2 space-y-1.5 border-x-0 md:border-x border-t-0 md:border-t border-b border-purple-200",children:[s.jsxs("div",{className:"flex md:flex-col gap-1 md:gap-0 md:space-y-1.5",children:[s.jsxs("div",{className:"flex-1 md:flex-none",children:[s.jsxs("label",{className:F("flex items-center gap-0.5 text-gray-700 mb-0.5",y?"text-[7px] font-medium":"text-[9px] font-semibold"),children:[s.jsx("svg",{className:F("text-indigo-600 flex-shrink-0",y?"w-2 h-2":"w-2.5 h-2.5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{children:"Audit"})]}),s.jsx(Yt,{value:m,onChange:E=>x(E.target.value),options:[{value:"all",label:"All Audits"},...Array.from(new Set(Ke==="actions"?Er.map(E=>E.audit_name).filter(E=>E):t.map(E=>E.audit_name).filter(E=>E))).sort().map(E=>({value:E,label:E}))],placeholder:"Audit",fullWidth:!0,className:F(y?"h-[28px] text-[10px] [&>select]:!text-[10px] [&>select]:!py-0 [&>select]:!px-1.5 [&>select]:!leading-[28px] [&>select]:!h-[28px]":"h-[32px] text-[11px] [&>select]:text-[11px] [&>select]:py-1")})]}),s.jsxs("div",{className:"flex-1 md:flex-none",children:[s.jsxs("label",{className:F("flex items-center gap-0.5 text-gray-700 mb-0.5",y?"text-[7px] font-medium":"text-[9px] font-semibold"),children:[s.jsx("svg",{className:F("text-green-600 flex-shrink-0",y?"w-2 h-2":"w-2.5 h-2.5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{children:"Year"})]}),s.jsx(Yt,{value:h,onChange:E=>p(E.target.value),options:[{value:"all",label:"All Years"},...Ne.map(E=>({value:E,label:E}))],placeholder:"Year",fullWidth:!0,className:F(y?"h-[28px] text-[10px] [&>select]:!text-[10px] [&>select]:!py-0 [&>select]:!px-1.5 [&>select]:!leading-[28px] [&>select]:!h-[28px]":"h-[32px] text-[11px] [&>select]:text-[11px] [&>select]:py-1")})]}),s.jsxs("div",{className:"flex-1 md:flex-none",children:[s.jsxs("label",{className:F("flex items-center gap-0.5 text-gray-700 mb-0.5",y?"text-[7px] font-medium":"text-[9px] font-semibold"),children:[s.jsx("svg",{className:F("text-purple-600 flex-shrink-0",y?"w-2 h-2":"w-2.5 h-2.5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:"Status"})]}),s.jsx(Yt,{value:o,onChange:E=>c(E.target.value),options:[{value:"all",label:"All Statuses"},...Qe.map(E=>({value:E,label:Wt(E)}))],placeholder:"Status",fullWidth:!0,className:F(y?"h-[28px] text-[10px] [&>select]:!text-[10px] [&>select]:!py-0 [&>select]:!px-1.5 [&>select]:!leading-[28px] [&>select]:!h-[28px]":"h-[32px] text-[11px] [&>select]:text-[11px] [&>select]:py-1")})]}),Ke==="findings"&&s.jsxs("div",{className:"flex-1 md:flex-none",children:[s.jsxs("label",{className:F("flex items-center gap-0.5 text-gray-700 mb-0.5",y?"text-[7px] font-medium":"text-[9px] font-semibold"),children:[s.jsx("svg",{className:F("text-red-600 flex-shrink-0",y?"w-2 h-2":"w-2.5 h-2.5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{children:"Risk"})]}),s.jsx(Yt,{value:u,onChange:E=>f(E.target.value),options:[{value:"all",label:"All Risk Levels"},...pe.map(E=>({value:E,label:Wt(E)}))],placeholder:"Risk",fullWidth:!0,className:F(y?"h-[28px] text-[10px] [&>select]:!text-[10px] [&>select]:!py-0 [&>select]:!px-1.5 [&>select]:!leading-[28px] [&>select]:!h-[28px]":"h-[32px] text-[11px] [&>select]:text-[11px] [&>select]:py-1")})]})]}),Ke==="actions"&&s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-1 text-[9px] font-semibold text-gray-700 mb-0.5",children:[s.jsx("svg",{className:"w-2.5 h-2.5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Responsible"]}),s.jsx(Yt,{value:v,onChange:E=>b(E.target.value),options:[{value:"all",label:"All Responsible"},...Array.from(new Set(Er.map(E=>E.action_responsible).filter(E=>!!E))).sort().map(E=>{const Y=Ci.find(de=>{var Me;return((Me=de.email)==null?void 0:Me.toLowerCase().trim())===E.toLowerCase().trim()});return{value:E,label:Y?Y.name:E}})],placeholder:"Select responsible",fullWidth:!0,className:"h-[32px] text-[11px] [&>select]:text-[11px] [&>select]:py-1"})]})]})})]}),s.jsxs("div",{className:"hidden md:flex md:flex-row md:items-center gap-2 md:justify-end",children:[s.jsx("div",{className:"w-64",children:s.jsx(yh,{onSearch:E=>a(E),placeholder:Ke==="actions"?"Search actions...":"Search findings..."})}),s.jsx("div",{className:"w-40",children:s.jsx(Yt,{value:o,onChange:E=>c(E.target.value),options:[{value:"all",label:"All Statuses"},...Qe.map(E=>({value:E,label:Wt(E)}))],placeholder:"Status",fullWidth:!0,className:"py-1.5 text-sm [&>select]:text-gray-900"})}),Ke==="findings"&&s.jsx("div",{className:"w-44",children:s.jsx(Yt,{value:u,onChange:E=>f(E.target.value),options:[{value:"all",label:"All Risk Levels"},...pe.map(E=>({value:E,label:Wt(E)}))],placeholder:"Risk Level",fullWidth:!0,className:"py-1.5 text-sm [&>select]:text-gray-900"})}),s.jsx("div",{className:"w-48",children:s.jsx(Yt,{value:m,onChange:E=>x(E.target.value),options:[{value:"all",label:"All Audits"},...Array.from(new Set(Ke==="actions"?Er.map(E=>E.audit_name).filter(E=>E):t.map(E=>E.audit_name).filter(E=>E))).sort().map(E=>({value:E,label:E}))],placeholder:"Audit Name",fullWidth:!0,className:"py-1.5 text-sm"})}),s.jsx("div",{className:"w-36",children:s.jsx(Yt,{value:h,onChange:E=>p(E.target.value),options:[{value:"all",label:"All Years"},...Ne.map(E=>({value:E,label:E}))],placeholder:"Audit Year",fullWidth:!0,className:"py-1.5 text-sm"})}),Ke==="actions"&&s.jsx("div",{className:"w-56",children:s.jsx(Yt,{value:v,onChange:E=>b(E.target.value),options:[{value:"all",label:"All Responsible"},...Array.from(new Set(Er.map(E=>E.action_responsible).filter(E=>!!E))).sort().map(E=>{const Y=Ci.find(de=>{var Me;return((Me=de.email)==null?void 0:Me.toLowerCase().trim())===E.toLowerCase().trim()});return{value:E,label:Y?Y.name:E}})],placeholder:"Action Responsible",fullWidth:!0,className:"py-1.5 text-sm"})})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:Ke==="actions"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"block md:hidden space-y-1 -mx-3 md:mx-0 w-[calc(100%+1.5rem)] md:w-auto",children:Ws?s.jsx("div",{className:"flex justify-center py-12 px-3",children:s.jsx(Ct,{size:"md"})}):oa.length===0?s.jsxs("div",{className:"text-center py-16 text-gray-400 px-3",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),s.jsx("p",{className:"text-sm",children:"No actions found"})]}):oa.map(E=>{const Y=t.find(de=>de.id===E.finding_id);return s.jsx("div",{onClick:()=>Y&&co(Y.id,E),className:"group relative bg-white border-l-2 border-gray-200 hover:border-purple-500 rounded-r shadow-sm hover:shadow transition-all duration-150 active:scale-[0.98] cursor-pointer",style:{borderLeftColor:E.status==="completed"?"#22c55e":E.status==="in_progress"?"#3b82f6":E.status==="overdue"?"#ef4444":"#9ca3af"},children:s.jsx("div",{className:"px-2.5 py-1.5",children:s.jsx("div",{className:"flex items-center justify-between gap-2",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-0.5 mb-0.5",children:[s.jsx("span",{className:"text-[9px] font-mono font-bold text-purple-600",children:E.action_id}),s.jsx(tt,{variant:Vs(E.status),className:"!text-[6px] !px-0.5 !py-0 !h-2.5 !leading-none !min-w-[18px] !rounded flex items-center justify-center font-bold",children:Wt(E.status).substring(0,3)})]}),Y&&s.jsx("button",{onClick:de=>{de.stopPropagation(),Yr(Y)},className:"text-[9px] text-purple-600 hover:text-purple-700 hover:underline font-medium",children:Y.finding_id.replace(/-\d{4}-/,"-")}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5 text-[9px] text-gray-500",children:[E.due_date&&s.jsx("span",{children:new Date(E.due_date).toLocaleDateString()}),E.action_responsible_email&&s.jsx("span",{className:"truncate max-w-[120px]",children:E.action_responsible_email})]})]})})})},E.id)})}),s.jsx("div",{className:"hidden md:block relative",children:s.jsxs("table",{className:"w-full shadow-sm rounded-lg overflow-hidden border border-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action ID"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finding ID"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action Description"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action Responsible"}),s.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ws?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:s.jsx(Ct,{size:"md"})})}):oa.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"No actions found"})}):oa.map(E=>{const Y=t.find(de=>de.id===E.finding_id);return s.jsxs("tr",{className:"hover:bg-purple-50/50 transition-colors duration-150 border-b border-gray-100",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900",children:E.action_id}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Y?s.jsx("button",{onClick:()=>Yr(Y),className:"text-purple-600 hover:text-purple-800 hover:underline cursor-pointer",children:Y.finding_id}):"-"}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:uo(E.action_description)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(tt,{variant:Vs(E.status),children:Wt(E.status)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.due_date?new Date(E.due_date).toLocaleDateString():"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.action_responsible_email||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:s.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>{Y&&co(Y.id,E)},className:"text-xs px-2 py-1",children:"View"})})]},E.id)})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"block md:hidden space-y-1 -mx-3 md:mx-0 w-[calc(100%+1.5rem)] md:w-auto",children:dl.length===0?s.jsxs("div",{className:"text-center py-16 text-gray-400 px-3",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"text-sm",children:"No findings found"})]}):dl.map(E=>{var Y,de,Me;return s.jsx("div",{onClick:()=>Yr(E),className:"group relative bg-white border-l-2 border-gray-200 hover:border-purple-500 rounded-r shadow-sm hover:shadow transition-all duration-150 active:scale-[0.98] cursor-pointer",style:{borderLeftColor:E.risk_level==="high"?"#ef4444":E.risk_level==="medium"?"#eab308":E.risk_level==="low"?"#22c55e":"#9ca3af"},children:s.jsx("div",{className:"px-2.5 py-1.5",children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-0.5 mb-0.5",children:[s.jsx("span",{className:"text-[9px] font-mono font-bold text-purple-600",children:E.finding_id.replace(/-\d{4}-/,"-")}),E.risk_level&&s.jsx(tt,{variant:ul(E.risk_level),className:"!text-[6px] !px-0.5 !py-0 !h-2.5 !leading-none !min-w-[12px] !rounded flex items-center justify-center font-bold",children:Wt(E.risk_level).charAt(0)}),s.jsx(tt,{variant:di(E.status),className:"!text-[6px] !px-0.5 !py-0 !h-2.5 !leading-none !min-w-[18px] !rounded flex items-center justify-center font-bold",children:Wt(E.status).substring(0,3)})]}),s.jsx("h3",{className:"text-[11px] font-semibold text-gray-900 line-clamp-1 group-hover:text-purple-600 transition-colors",children:E.finding_name}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5 text-[9px] text-gray-500",children:[s.jsx("span",{className:"truncate flex-1 min-w-0",children:E.audit_name}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-auto",children:[s.jsxs("span",{className:"text-gray-400 whitespace-nowrap",children:["(",((Y=kt[E.id])==null?void 0:Y.length)||0,")"]}),E.financial_impact&&s.jsxs("span",{className:"text-purple-600 font-semibold whitespace-nowrap",children:["",kc(E.financial_impact)]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[kt[E.id]&&(((de=kt[E.id])==null?void 0:de.length)||0)>0&&s.jsx("span",{className:"bg-purple-100 text-purple-700 px-1 py-0.5 rounded text-[8px] font-bold h-4 flex items-center justify-center min-w-[16px]",children:((Me=kt[E.id])==null?void 0:Me.length)||0}),s.jsx("button",{onClick:he=>{he.stopPropagation(),rr(wn===E.id?null:E.id)},className:"p-1 text-gray-400 hover:text-gray-600 rounded transition-all",children:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),wn===E.id&&s.jsxs("div",{className:"absolute right-0 top-full mt-1 w-36 bg-white rounded-lg shadow-xl border border-gray-200 z-50 py-1",children:[s.jsxs("button",{onClick:he=>{he.stopPropagation(),la(E.id),sr(E.id),tn(null),en(null),on(!1),rr(null)},className:"w-full text-left px-2.5 py-1.5 text-[10px] text-gray-700 hover:bg-gray-50 flex items-center gap-1.5",children:[s.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),s.jsx("span",{children:"View"})]}),s.jsxs("button",{onClick:he=>{he.stopPropagation(),la(E.id),sr(E.id),tn(null),en(null),on(!0),xn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:""}),ws({}),rr(null)},className:"w-full text-left px-2.5 py-1.5 text-[10px] text-purple-600 hover:bg-purple-50 flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"New"})]}),s.jsx("div",{className:"border-t border-gray-200 my-1"}),s.jsxs("button",{onClick:he=>{he.stopPropagation(),q(E.id),D(!0),rr(null)},className:"w-full text-left px-2.5 py-1.5 text-[10px] text-red-600 hover:bg-red-50 flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s.jsx("span",{children:"Delete"})]})]})]})]})})},E.id)})}),s.jsx("div",{className:"hidden md:block relative",children:s.jsxs("table",{ref:Ft,className:"w-full shadow-lg rounded-xl overflow-hidden border-0 bg-white",children:[s.jsx("thead",{className:"sticky top-0 z-10 bg-gradient-to-r from-purple-600 via-indigo-600 to-purple-700 shadow-md border-b-4 border-purple-800/30",children:s.jsxs("tr",{className:"min-h-[3rem]",children:[s.jsx(bs,{columnKey:"findingId",width:Gt.findingId,onResizeStart:Us,isResizing:Ar==="findingId",className:"border-r border-purple-500/30 text-center",children:s.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"ID"})}),s.jsx(bs,{columnKey:"findingName",width:Gt.findingName,onResizeStart:Us,isResizing:Ar==="findingName",className:"border-r border-purple-500/30 text-center",children:s.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"Name"})}),s.jsx(bs,{columnKey:"auditName",width:Gt.auditName,onResizeStart:Us,isResizing:Ar==="auditName",className:"border-r border-purple-500/30 text-center",children:s.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"Audit"})}),s.jsx(bs,{columnKey:"findingDescription",width:Gt.findingDescription,onResizeStart:Us,isResizing:Ar==="findingDescription",className:"border-r border-purple-500/30 text-center",children:s.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"Finding Description"})}),s.jsx(bs,{columnKey:"riskLevel",width:Gt.riskLevel,onResizeStart:Us,isResizing:Ar==="riskLevel",className:"border-r border-purple-500/30 text-center",children:s.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"Risk Level"})}),s.jsx(bs,{columnKey:"status",width:Gt.status,onResizeStart:Us,isResizing:Ar==="status",className:"border-r border-purple-500/30 text-center",children:s.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"Status"})}),s.jsx(bs,{columnKey:"financialImpact",width:Gt.financialImpact,onResizeStart:Us,isResizing:Ar==="financialImpact",className:"border-r border-purple-500/30 text-center",children:s.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",children:"Impact ()"})}),s.jsx(bs,{columnKey:"actions",width:Gt.actions,onResizeStart:Us,isResizing:Ar==="actions",className:"text-center",children:s.jsx("span",{className:"px-6 py-5 text-center text-xs font-extrabold text-white uppercase tracking-wider drop-shadow-sm",title:"Actions",children:""})})]})}),s.jsx("tbody",{className:"bg-white",children:dl.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:"No audit findings found"})}):dl.map((E,Y)=>{var de,Me,he,He;return s.jsxs(jt.Fragment,{children:[s.jsxs("tr",{className:`group transition-all duration-200 ${Y%2===0?"bg-white hover:bg-gradient-to-r hover:from-purple-50/30 hover:to-indigo-50/30":"bg-slate-50/50 hover:bg-gradient-to-r hover:from-purple-50/40 hover:to-indigo-50/40"} border-b border-slate-200/60`,children:[s.jsx("td",{style:{width:Gt.findingId},className:"px-6 py-4 whitespace-nowrap text-sm font-mono font-semibold text-purple-700 border-r border-slate-200/60 align-top",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>lo(E.id),className:"text-slate-400 hover:text-purple-600 transition-all duration-200 hover:scale-110",title:ro.has(E.id)?"Collapse":"Expand",children:s.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${ro.has(E.id)?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),s.jsx("button",{onClick:()=>Yr(E),className:"text-purple-600 hover:text-purple-800 hover:underline cursor-pointer font-semibold transition-colors",title:E.finding_id,children:E.finding_id.replace(/-\d{4}-/,"-")})]})}),s.jsx("td",{style:{width:Gt.findingName},className:"px-6 py-4 text-sm font-medium text-slate-800 border-r border-slate-200/60 align-top leading-relaxed",children:s.jsx("div",{className:"break-words",children:E.finding_name})}),s.jsx("td",{style:{width:Gt.auditName},className:"px-6 py-4 text-sm text-slate-700 border-r border-slate-200/60 align-top leading-relaxed",children:s.jsx("div",{className:"break-words",children:E.audit_name})}),s.jsx("td",{style:{width:Gt.findingDescription},className:"px-6 py-4 text-sm text-slate-600 border-r border-slate-200/60 align-top leading-relaxed",children:s.jsx("div",{className:"break-words line-clamp-3",children:uo(E.finding_description)})}),s.jsx("td",{style:{width:Gt.riskLevel},className:"px-6 py-4 whitespace-nowrap border-r border-slate-200/60 align-top",children:E.risk_level&&s.jsx(tt,{variant:ul(E.risk_level),children:Wt(E.risk_level)})}),s.jsx("td",{style:{width:Gt.status},className:"px-6 py-4 whitespace-nowrap border-r border-slate-200/60 align-top",children:s.jsxs("div",{className:"relative",children:[s.jsx("button",{type:"button",onClick:()=>gn(vt===E.id?null:E.id),className:"focus:outline-none",children:s.jsx(tt,{variant:di(E.status),className:"cursor-pointer hover:opacity-80 text-sm px-3 py-1",children:Wt(E.status)})}),vt===E.id&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[140px] py-1",children:Array.from(new Set(Qe.filter($e=>$e!=="overdue"&&$e.toLowerCase()!==E.status.toLowerCase()))).map($e=>s.jsx("button",{type:"button",onClick:async()=>{var Je,Ye,rt;try{(!kt[E.id]||(((Je=kt[E.id])==null?void 0:Je.length)||0)===0)&&await sr(E.id);const pt=await io(E.id,$e);if(!pt.canSet){R({show:!0,message:pt.reason||"Cannot set finding status",incompleteActions:pt.incompleteActions||[],actionLabel:pt.actionLabel||"Incomplete actions:"}),gn(null);return}await Ot.updateAuditFinding(E.id,{finding_name:E.finding_name,finding_description:E.finding_description,audit_type:E.audit_type,audit_type_other:E.audit_type_other,risk_type:E.risk_type,internal_control_element:E.internal_control_element,country:E.country,audit_year:E.audit_year,audit_name:E.audit_name,audit_key:E.audit_key,risk_level:E.risk_level,financial_impact:E.financial_impact,status:$e}),await ao(),gn(null),je({type:"success",message:"Finding status updated successfully"})}catch(pt){je({type:"error",message:((rt=(Ye=pt==null?void 0:pt.response)==null?void 0:Ye.data)==null?void 0:rt.error)||"Failed to update finding status"})}},className:"w-full text-left px-3 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg flex items-center gap-2",children:s.jsx(tt,{variant:di($e),className:"text-xs",children:Wt($e)})},$e))})]})}),s.jsx("td",{style:{width:Gt.financialImpact},className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-slate-800 border-r border-slate-200/60 align-top",children:E.financial_impact?`${kc(E.financial_impact)}`:s.jsx("span",{className:"text-slate-400",children:"-"})}),s.jsx("td",{style:{width:Gt.actions},className:"px-2 py-4 whitespace-nowrap text-right align-top",children:s.jsxs("div",{className:"relative inline-block",children:[s.jsx(ze,{variant:"ghost",size:"sm",onClick:$e=>{$e.stopPropagation(),rr(wn===E.id?null:E.id)},className:"text-xs px-1.5 py-1 min-w-0",title:"Actions",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),wn===E.id&&s.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white rounded-lg shadow-xl border border-gray-200 z-50 py-1",children:[s.jsxs("button",{onClick:$e=>{$e.stopPropagation(),la(E.id),sr(E.id),tn(null),en(null),on(!1),rr(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),s.jsx("span",{children:"View Actions"}),s.jsx(tt,{variant:"info",className:"ml-auto text-xs",children:((de=kt[E.id])==null?void 0:de.length)||0})]}),s.jsxs("button",{onClick:$e=>{$e.stopPropagation(),la(E.id),sr(E.id),tn(null),en(null),on(!0),xn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:""}),ws({}),rr(null)},className:"w-full text-left px-4 py-2 text-sm text-purple-600 hover:bg-purple-50 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"New Action"})]}),s.jsx("div",{className:"border-t border-gray-200 my-1"}),s.jsxs("button",{onClick:$e=>{$e.stopPropagation(),q(E.id),D(!0),rr(null)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s.jsx("span",{children:"Delete Finding"})]})]})]})})]}),ro.has(E.id)&&s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-6 py-4 bg-gray-50",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:["Actions (",((Me=kt[E.id])==null?void 0:Me.length)||0,")"]}),kt[E.id]&&(((he=kt[E.id])==null?void 0:he.length)||0)>0?s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-visible",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"ID"}),s.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Status"}),s.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Description"}),s.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Due Date"}),s.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Action Responsible"})]})}),s.jsx("tbody",{children:(He=kt[E.id])==null?void 0:He.map($e=>s.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[s.jsx("td",{className:"px-3 py-2",children:s.jsx("span",{className:"font-mono text-purple-700 cursor-pointer hover:text-purple-900 hover:underline",onClick:()=>co(E.id,$e),children:$e.action_id})}),s.jsx("td",{className:"px-3 py-2",children:s.jsxs("div",{className:"relative",style:{zIndex:Ut===$e.id?1e3:"auto"},children:[s.jsx("button",{type:"button","data-action-id":$e.id,ref:Je=>{vr.current[$e.id]=Je},onClick:()=>{if(Ut===$e.id)Nn(null),Rn(null);else{const Je=vr.current[$e.id];if(Je){const Ye=Je.getBoundingClientRect(),rt=window.innerHeight,pt=window.innerWidth,nn=200,_r=140;if(Ye.bottom+nn+4<=rt)Rn({top:Ye.bottom+4,left:Ye.left,side:"bottom"});else{const fo=Ye.right+_r+4<=pt;Rn(fo?{top:Ye.top,left:Ye.right+4,side:"right"}:{top:Ye.top,left:Ye.left-_r-4,side:"right"})}}Nn($e.id)}},className:"focus:outline-none",children:s.jsx(tt,{variant:Vs($e.status),className:"text-xs cursor-pointer hover:opacity-80",children:Wt($e.status)})}),Ut===$e.id&&Qt&&s.jsx("div",{className:"fixed bg-white border border-gray-200 rounded-lg shadow-xl z-[1000] min-w-[140px] max-h-[200px] overflow-y-auto py-1",style:{top:`${Qt.top}px`,left:`${Qt.left}px`},children:Array.from(new Set(Qe.filter(Je=>Je!=="overdue"&&Je.toLowerCase()!==$e.status.toLowerCase()))).map(Je=>s.jsx("button",{type:"button",onClick:async()=>{var Ye,rt;try{await Ot.updateFindingAction($e.id,{action_description:$e.action_description,due_date:$e.due_date,audit_lead:$e.audit_lead,action_responsible:$e.action_responsible,action_responsible_email:$e.action_responsible_email,action_responsible_vp:$e.action_responsible_vp,action_responsible_clevel:$e.action_responsible_clevel,status:Je}),Kt(pt=>{const nn=(pt[E.id]||[]).map(_r=>_r.id===$e.id?{..._r,status:Je}:_r);return li(E.id,nn),{...pt,[E.id]:nn}}),Nn(null),Rn(null),je({type:"success",message:"Action status updated successfully"})}catch(pt){je({type:"error",message:((rt=(Ye=pt==null?void 0:pt.response)==null?void 0:Ye.data)==null?void 0:rt.error)||"Failed to update action status"})}},className:"w-full text-left px-3 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg flex items-center gap-2",children:s.jsx(tt,{variant:Vs(Je),className:"text-xs",children:Wt(Je)})},Je))})]})}),s.jsx("td",{className:"px-3 py-2 text-gray-700",children:uo($e.action_description,1)}),s.jsx("td",{className:"px-3 py-2 text-gray-600",children:$e.due_date?new Date($e.due_date).toLocaleDateString():"N/A"}),s.jsx("td",{className:"px-3 py-2 text-gray-600",children:$e.action_responsible_email||"-"})]},$e.id))})]})}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:'No actions yet. Click "+ New Action" to create one.'})]})})})]},E.id)})})]})})]})})]}),k&&(A||j)&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:E=>{E.target===E.currentTarget&&Ai()},style:{pointerEvents:"auto"},children:s.jsxs("div",{ref:ii,className:"bg-white rounded-2xl md:rounded-2xl rounded-t-2xl shadow-2xl max-w-[95vw] md:max-w-6xl w-full max-h-[90vh] md:max-h-[85vh] overflow-y-auto",onClick:E=>E.stopPropagation(),style:{pointerEvents:"auto"},children:[s.jsx("div",{className:F("bg-gradient-to-r from-purple-600 to-violet-600 rounded-t-2xl",y?"px-3 py-2":"px-4 py-3 md:px-6 md:py-4"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:F("font-bold text-white truncate",y?"text-xs":"text-base md:text-[16px]"),children:A?"View Audit Finding":j?"Edit Audit Finding":""}),A&&s.jsx("p",{className:F("text-purple-100 truncate",y?"text-[10px] mt-0.5":"text-xs md:text-sm mt-0.5 md:mt-1"),children:A.finding_name||A.id})]}),s.jsx("button",{onClick:Ai,className:F("text-white hover:text-purple-200 transition-colors flex-shrink-0",y?"p-1 ml-2":"p-2"),children:s.jsx("svg",{className:F(y?"w-4 h-4":"w-5 h-5 md:w-6 md:h-6"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:F("overflow-y-auto",y?"p-2 space-y-2":"p-3 md:p-6 space-y-3 md:space-y-6"),children:[A&&!M&&s.jsx("div",{className:F(y?"mb-2":"mb-3 md:mb-6"),children:s.jsxs("div",{className:F("flex flex-col",y?"gap-1.5 mb-2":"gap-2 mb-3"),children:[s.jsxs("div",{className:F("flex items-center","justify-between"),children:[y&&s.jsx("h3",{className:"text-[11px] font-semibold text-gray-700",children:"Actions"}),!y&&s.jsxs("div",{className:F("flex items-center flex-wrap","gap-1.5 md:gap-2"),children:[s.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>{se||sr(A.id),Fe(!se)},className:"justify-center items-center gap-0.5 border-purple-300 text-purple-700 hover:bg-purple-50 text-xs md:text-sm px-2 md:px-3 py-1 md:py-1.5",children:[s.jsx("svg",{className:"text-purple-600 flex-shrink-0 w-3 h-3 md:w-4 md:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsxs("span",{className:"truncate",children:[se?"Hide":"View"," ",s.jsxs("span",{className:"text-purple-600 font-semibold",children:["(",((fu=kt[A.id])==null?void 0:fu.length)||0,")"]})]})]}),s.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>{la(A.id),tn(null),en(null),on(!0),xn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:""}),ws({})},className:"justify-center flex items-center gap-0.5 border-purple-300 text-purple-700 hover:bg-purple-50 text-xs md:text-sm px-2 md:px-3 py-1 md:py-1.5",children:[s.jsx("svg",{className:"flex-shrink-0 w-3 h-3 md:w-4 md:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{className:"truncate",children:"New"})]}),s.jsxs(ze,{variant:"outline",size:"sm",onClick:async()=>{var E,Y;if(U)B(!1),setTimeout(()=>{var de;(de=ii.current)==null||de.scrollTo({top:0,behavior:"smooth"})},100);else{ne(!0);try{const de=await Ot.getFindingHistory(A.id);Z(de.data||[])}catch(de){je({type:"error",message:((Y=(E=de==null?void 0:de.response)==null?void 0:E.data)==null?void 0:Y.error)||"Failed to load history"})}finally{ne(!1)}B(!0),setTimeout(()=>{var de;(de=no.current)==null||de.scrollIntoView({behavior:"smooth",block:"start"})},100)}},className:"justify-center flex items-center gap-0.5 border-purple-300 text-purple-700 hover:bg-purple-50 text-xs md:text-sm px-2 md:px-3 py-1 md:py-1.5",children:[s.jsx("svg",{className:"flex-shrink-0 w-3 h-3 md:w-4 md:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("span",{className:"truncate",children:[U?"Hide":"View"," History"]})]})]}),s.jsxs("div",{className:"relative flex-shrink-0 ml-auto",children:[s.jsx("button",{type:"button",onClick:()=>gn(vt===A.id?null:A.id),className:"focus:outline-none",children:s.jsx(tt,{variant:di(A.status),className:F("cursor-pointer hover:opacity-80",y?"!text-[9px] !px-1.5 !py-0.5 !h-5":"text-xs md:text-sm px-2 md:px-3 py-1 md:py-1"),children:Wt(A.status)})}),vt===A.id&&s.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[140px] py-1",children:Qe.filter(E=>!(E==="overdue"||E.toLowerCase()===A.status.toLowerCase())).map(E=>s.jsx("button",{type:"button",onClick:async()=>{var Y,de,Me;try{(!kt[A.id]||(((Y=kt[A.id])==null?void 0:Y.length)||0)===0)&&await sr(A.id);const he=await io(A.id,E);if(!he.canSet){R({show:!0,message:he.reason||"Cannot set finding status",incompleteActions:he.incompleteActions||[],actionLabel:he.actionLabel||"Incomplete actions:"}),gn(null);return}await Ot.updateAuditFinding(A.id,{finding_name:A.finding_name,finding_description:A.finding_description,audit_type:A.audit_type,audit_type_other:A.audit_type_other,risk_type:A.risk_type,internal_control_element:A.internal_control_element,country:A.country,audit_year:A.audit_year,audit_name:A.audit_name,audit_key:A.audit_key,risk_level:A.risk_level,financial_impact:A.financial_impact,status:E});const He=await Ot.getAuditFinding(A.id);O(He),await ao(),gn(null),je({type:"success",message:"Finding status updated successfully"})}catch(he){je({type:"error",message:((Me=(de=he==null?void 0:he.response)==null?void 0:de.data)==null?void 0:Me.error)||"Failed to update finding status"})}},className:"w-full text-left px-3 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg flex items-center gap-2",children:s.jsx(tt,{variant:di(E),className:"text-xs",children:Wt(E)})},E))})]})]}),s.jsx("div",{className:F("flex items-center flex-wrap",y?"gap-0.5":"gap-1.5 md:gap-2"),children:y?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>{se||sr(A.id),Fe(!se)},className:"flex-1 min-w-0 flex items-center justify-center gap-0.5 px-1 py-0.5 h-5 text-[7px] border border-purple-300 text-purple-700 hover:bg-purple-50 rounded-md transition-colors",children:[s.jsx("svg",{className:"w-2 h-2 text-purple-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsxs("span",{className:"truncate",children:[se?"Hide":"View"," ",s.jsxs("span",{className:"text-purple-600 font-semibold",children:["(",((hu=kt[A.id])==null?void 0:hu.length)||0,")"]})]})]}),s.jsxs("button",{onClick:()=>{la(A.id),tn(null),en(null),on(!0),xn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:""}),ws({})},className:"flex-1 min-w-0 flex items-center justify-center gap-0.5 px-1 py-0.5 h-5 text-[7px] border border-purple-300 text-purple-700 hover:bg-purple-50 rounded-md transition-colors",children:[s.jsx("svg",{className:"w-2 h-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{className:"truncate",children:"New"})]}),s.jsxs("button",{onClick:async()=>{var E,Y;if(U)B(!1),setTimeout(()=>{var de;(de=ii.current)==null||de.scrollTo({top:0,behavior:"smooth"})},100);else{ne(!0);try{const de=await Ot.getFindingHistory(A.id);Z(de.data||[])}catch(de){je({type:"error",message:((Y=(E=de==null?void 0:de.response)==null?void 0:E.data)==null?void 0:Y.error)||"Failed to load history"})}finally{ne(!1)}B(!0),setTimeout(()=>{var de;(de=no.current)==null||de.scrollIntoView({behavior:"smooth",block:"start"})},100)}},className:"flex-1 min-w-0 flex items-center justify-center gap-0.5 px-1 py-0.5 h-5 text-[7px] border border-purple-300 text-purple-700 hover:bg-purple-50 rounded-md transition-colors",children:[s.jsx("svg",{className:"w-2 h-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("span",{className:"truncate",children:[U?"Hide":"View"," Hist"]})]})]}):null}),se&&s.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-4 shadow-sm",children:kt[A.id]&&(((pu=kt[A.id])==null?void 0:pu.length)||0)>0?s.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded bg-white",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"ID"}),s.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Status"}),s.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Description"}),s.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:"Due Date"})]})}),s.jsx("tbody",{children:(fl=kt[A.id])==null?void 0:fl.map(E=>s.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-3 py-2",children:s.jsx("span",{className:"font-mono text-purple-700 cursor-pointer hover:text-purple-900 hover:underline",onClick:()=>co(A.id,E),children:E.action_id})}),s.jsx("td",{className:"px-3 py-2",children:s.jsx(tt,{variant:Vs(E.status),className:"text-xs",children:Wt(E.status)})}),s.jsx("td",{className:"px-3 py-2 text-gray-700",children:uo(E.action_description,1)}),s.jsx("td",{className:"px-3 py-2 text-gray-600",children:E.due_date?new Date(E.due_date).toLocaleDateString():"N/A"})]},E.id))})]})}):s.jsx("div",{className:"text-center py-6 text-gray-500 text-sm",children:s.jsx("p",{children:'No actions yet. Click "New Action" to create one.'})})})]})}),s.jsxs("form",{onSubmit:async E=>{console.log("Form submit event triggered"),await cl(E)},className:"space-y-6",children:[!A&&s.jsxs(s.Fragment,{children:[s.jsx(Yt,{label:"Select Audit Year",value:Pe.selectedAuditYear,onChange:E=>{al(E.target.value),E.target.value&&st(Y=>Y?{...Y,selectedAuditYear:E.target.value,selectedAuditKey:"",selectedAuditName:""}:{selectedAuditYear:E.target.value,selectedAuditKey:"",selectedAuditName:""})},options:[{value:"",label:"Select audit year..."},...Ne.map(E=>({value:E,label:E}))],required:!0,error:On.selectedAuditYear,disabled:!!(dt!=null&&dt.selectedAuditYear)&&!j,fullWidth:!0}),Pe.selectedAuditYear&&s.jsx(Yt,{label:"Select Audit",value:Pe.selectedAuditKey,onChange:E=>cu(E.target.value),options:[{value:"",label:"Select an audit..."},...ol.map(E=>({value:E.key,label:E.summary}))],required:!0,error:On.audit_name,disabled:!!(dt!=null&&dt.selectedAuditKey)&&!j,fullWidth:!0})]}),(!A||Pe.audit_name||Pe.audit_year||Pe.audit_type||Pe.risk_type||Pe.risk_level||Pe.internal_control_element||Pe.country)&&s.jsxs("div",{className:F("border rounded-lg",y?"bg-white border-gray-200 p-1.5 mb-2":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 p-3 md:p-4 mb-4 md:mb-6"),children:[Pe.audit_name&&s.jsxs("div",{className:F("mb-1.5 pb-1.5 border-b",y?"border-gray-200":"border-blue-200"),children:[s.jsx("span",{className:F("font-medium text-gray-600 mr-1.5",y?"text-[9px]":"text-xs"),children:"Audit:"}),s.jsx("span",{className:F("font-semibold text-gray-900",y?"text-[10px]":"text-sm"),children:Pe.audit_name}),Pe.audit_year&&s.jsxs("span",{className:F("text-gray-500 ml-1.5",y?"text-[9px]":"text-xs"),children:["(",Pe.audit_year,")"]})]}),s.jsxs("div",{className:F("flex items-center",y?"flex-wrap gap-1":"flex-wrap gap-2 md:gap-3"),children:[(!A||Pe.audit_type)&&s.jsxs("div",{className:F("flex items-center",y?"gap-0.5":"gap-1.5"),children:[!y&&s.jsx("span",{className:"text-[10px] font-medium text-gray-600",children:"Type:"}),A&&!M?s.jsx(tt,{variant:"info",className:F(y?"!text-[8px] !px-1 !py-0.5 !h-4":"text-xs"),children:Wt(Pe.audit_type)}):s.jsx(Yt,{value:Pe.audit_type,onChange:E=>{Lt(Y=>({...Y,audit_type:E.target.value,audit_type_other:""})),nr(Y=>({...Y,audit_type:""}))},options:ft.map(E=>({value:E,label:Wt(E)})),placeholder:"Select...",required:!0,error:On.audit_type,disabled:!!(A&&!M),className:y?"min-w-[90px]":"min-w-[140px]"})]}),(!A||Pe.risk_type)&&s.jsxs("div",{className:F("flex items-center",y?"gap-0.5":"gap-1.5"),children:[!y&&s.jsx("span",{className:"text-[10px] font-medium text-gray-600",children:"Risk:"}),A&&!M?s.jsx(tt,{variant:"warning",className:F(y?"!text-[8px] !px-1 !py-0.5 !h-4":"text-xs"),children:Wt(Pe.risk_type)}):s.jsx(Yt,{value:Pe.risk_type,onChange:E=>{Lt(Y=>({...Y,risk_type:E.target.value})),nr(Y=>({...Y,risk_type:""}))},options:re.map(E=>({value:E,label:Wt(E)})),placeholder:"Select...",required:!0,error:On.risk_type,disabled:!!(A&&!M),className:y?"min-w-[90px]":"min-w-[140px]"})]}),(!A||Pe.risk_level)&&s.jsxs("div",{className:F("flex items-center",y?"gap-0.5":"gap-1.5"),children:[!y&&s.jsx("span",{className:"text-[10px] font-medium text-gray-600",children:"Level:"}),A&&!M?s.jsx(tt,{variant:ul(Pe.risk_level),className:F(y?"!text-[8px] !px-1 !py-0.5 !h-4":"text-xs"),children:Wt(Pe.risk_level)}):s.jsx(Yt,{value:Pe.risk_level,onChange:E=>{Lt(Y=>({...Y,risk_level:E.target.value})),nr(Y=>({...Y,risk_level:""}))},options:pe.map(E=>({value:E,label:Wt(E)})),placeholder:"Select...",required:!0,error:On.risk_level,disabled:!!(A&&!M),className:y?"min-w-[80px]":"min-w-[120px]"})]}),(!A||Pe.internal_control_element)&&s.jsxs("div",{className:F("flex items-center",y?"gap-0.5":"gap-1.5"),children:[!y&&s.jsx("span",{className:"text-[10px] font-medium text-gray-600",children:"Control:"}),A&&!M?s.jsx(tt,{variant:"default",className:F(y?"!text-[8px] !px-1 !py-0.5 !h-4":"text-xs"),children:Wt(Pe.internal_control_element)}):s.jsx(Yt,{value:Pe.internal_control_element,onChange:E=>{Lt(Y=>({...Y,internal_control_element:E.target.value})),nr(Y=>({...Y,internal_control_element:""}))},options:we.map(E=>({value:E,label:Wt(E)})),placeholder:"Select...",required:!0,error:On.internal_control_element,disabled:!!(A&&!M),className:y?"min-w-[100px]":"min-w-[160px]"})]}),(!A||Pe.country)&&s.jsxs("div",{className:F("flex items-center",y?"gap-0.5":"gap-1.5"),children:[!y&&s.jsx("span",{className:"text-[10px] font-medium text-gray-600",children:"Country:"}),A&&!M?s.jsx(tt,{variant:"info",className:F(y?"!text-[8px] !px-1 !py-0.5 !h-4":"text-xs"),children:Wt(Pe.country)}):s.jsx(Yt,{value:Pe.country,onChange:E=>{Lt(Y=>({...Y,country:E.target.value})),nr(Y=>({...Y,country:""}))},options:_e.map(E=>({value:E,label:Wt(E)})),placeholder:"Select...",required:!0,error:On.country,disabled:!!(A&&!M),className:y?"min-w-[80px]":"min-w-[120px]"})]})]})]}),s.jsx("div",{children:s.jsx(Tn,{label:s.jsxs("span",{className:F("font-medium text-gray-700",y?"text-[10px]":"text-sm"),children:["Finding Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),value:Pe.finding_name,onChange:E=>Lt(Y=>({...Y,finding_name:E.target.value})),placeholder:"Enter finding name",required:!0,error:On.finding_name,disabled:!!(A&&!M),fullWidth:!0,className:F(y?"text-[10px]":"text-sm")})}),s.jsx("div",{className:F(y?"mb-2":"mb-6 md:mb-10"),children:s.jsx(Gg,{label:s.jsxs("span",{className:F("font-medium text-gray-700",y?"text-[10px]":"text-sm"),children:["Finding Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),value:Pe.finding_description||"",onChange:E=>Lt(Y=>({...Y,finding_description:E})),rows:y?2:4,required:!0,error:On.finding_description,disabled:!!(A&&!M),fullWidth:!0,className:F(y?"text-[10px]":"text-sm")})}),Pe.audit_type==="Other"&&s.jsx(Tn,{label:s.jsx("span",{className:F("font-medium text-gray-700",y?"text-[11px]":"text-sm"),children:"Audit Type (Other)"}),value:Pe.audit_type_other,onChange:E=>Lt(Y=>({...Y,audit_type_other:E.target.value})),required:!0,error:On.audit_type_other,disabled:!!(A&&!M),fullWidth:!0,className:F(y?"text-[11px]":"text-sm")}),s.jsxs("div",{className:F(y?"mb-2":"mb-4 md:mb-6"),children:[s.jsx("label",{className:F("block font-medium text-gray-700",y?"text-[10px] mb-0.5":"text-sm mb-1"),children:"Financial Impact ()"}),A&&!M?s.jsx("div",{className:F("bg-gray-50 border border-gray-300 rounded text-gray-900",y?"px-2 py-1 text-[10px]":"px-3 py-2 text-sm"),children:Pe.financial_impact?`${kc(Pe.financial_impact)}`:"-"}):s.jsx(Tn,{type:"text",inputMode:"decimal",value:Pe.financial_impact||"",onChange:E=>{const de=E.target.value.replace(/[^\d.]/g,""),Me=de.split(".");let he=de;Me.length>2&&(he=Me[0]+"."+Me.slice(1).join("")),Lt(He=>({...He,financial_impact:he}))},placeholder:"0.00",disabled:!!(A&&!M),fullWidth:!0,className:F(y?"text-[10px]":"text-sm")})]}),s.jsxs("div",{children:[s.jsx("label",{className:F("block font-medium text-gray-700",y?"text-[10px] mb-1":"text-sm mb-1.5"),children:"Attachments"}),s.jsx("input",{type:"file",multiple:!0,onChange:ll,disabled:!!(A&&!M),className:F("block w-full text-gray-500 file:rounded-lg file:border-0 file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 disabled:opacity-50 disabled:cursor-not-allowed",y?"text-[9px] file:mr-1.5 file:py-0.5 file:px-1.5 file:text-[9px]":"text-sm file:mr-4 file:py-2 file:px-4 file:text-sm")}),Vt.length>0&&s.jsx("div",{className:F("mt-1 space-y-0.5",""),children:Vt.map((E,Y)=>s.jsxs("div",{className:F("flex items-center justify-between bg-gray-50 rounded",y?"p-1":"p-2"),children:[s.jsx("span",{className:F("text-gray-700 truncate",y?"text-[9px] max-w-[70%]":"text-sm"),children:E.file_name}),s.jsx("button",{type:"button",onClick:()=>du(Y),className:"text-red-500 hover:text-red-700 flex-shrink-0",children:s.jsx("svg",{className:F(y?"w-2.5 h-2.5":"w-4 h-4"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Y))})]}),A&&!M&&U&&s.jsxs("div",{ref:no,className:F("border-t border-gray-200",y?"mt-3 pt-3":"mt-6 pt-6"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:F("font-semibold text-gray-900",y?"text-xs":"text-base"),children:"Change History"}),y?s.jsxs("button",{onClick:()=>{B(!1),setTimeout(()=>{var E;(E=ii.current)==null||E.scrollTo({top:0,behavior:"smooth"})},100)},className:"flex items-center gap-0.5 px-1 py-0.5 h-5 text-[7px] border border-purple-300 text-purple-700 hover:bg-purple-50 rounded-md transition-colors",children:[s.jsx("svg",{className:"w-2 h-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),s.jsx("span",{children:"Hide"})]}):s.jsx(ze,{variant:"outline",size:"sm",onClick:()=>{B(!1),setTimeout(()=>{var E;(E=ii.current)==null||E.scrollTo({top:0,behavior:"smooth"})},100)},className:"text-xs border-purple-300 text-purple-700 hover:bg-purple-50 px-2 py-1",children:"Hide History"})]}),$?s.jsx("div",{className:"text-center py-8",children:s.jsx(Ct,{size:"md"})}):Q.length>0?s.jsx("div",{className:F(y?"space-y-2":"space-y-3"),children:Q.map(E=>s.jsxs("div",{className:F("bg-gray-50 border border-gray-200 rounded-lg",y?"p-2":"p-4"),children:[s.jsxs("div",{className:F("flex items-start justify-between",y?"mb-1.5":"mb-2"),children:[s.jsxs("div",{className:F("flex items-center",y?"gap-1.5":"gap-2"),children:[s.jsx(tt,{variant:E.event_type==="CREATE"?"success":E.event_type==="DELETE"?"danger":"info",size:y?"xs":"sm",className:F(y&&"!text-[9px] !px-1.5 !py-0.5 !h-5"),children:E.event_type}),E.field_name&&s.jsxs("span",{className:F("font-medium text-gray-700",y?"text-[10px]":"text-sm"),children:["Field: ",E.field_name]})]}),s.jsx("span",{className:F("text-gray-500",y?"text-[9px]":"text-xs"),children:new Date(E.changed_at).toLocaleString("en-US",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"})})]}),E.field_name&&s.jsxs("div",{className:F("grid grid-cols-2 mt-2",y?"gap-[6.4px] text-[8px]":"gap-[12.8px] text-xs"),children:[s.jsxs("div",{children:[s.jsx("span",{className:F("text-gray-600 font-medium",y?"text-[10px]":"text-sm"),children:"Old Value:"}),s.jsx("div",{className:F("bg-red-50 border border-red-200 rounded text-gray-900",y?"mt-0.5 px-1.5 py-0.5 text-[9px]":"mt-1 px-2 py-1"),children:E.old_value||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:F("text-gray-600 font-medium",y?"text-[10px]":"text-sm"),children:"New Value:"}),s.jsx("div",{className:F("bg-green-50 border border-green-200 rounded text-gray-900",y?"mt-0.5 px-1.5 py-0.5 text-[9px]":"mt-1 px-2 py-1"),children:E.new_value||"-"})]})]}),s.jsxs("div",{className:F("text-gray-500",y?"mt-1.5 text-[9px]":"mt-2 text-xs"),children:["Changed by: ",E.changed_by]})]},E.id))}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No history available"})]}),s.jsxs("div",{className:F("flex items-stretch justify-end border-t border-gray-200",y?"flex-col gap-1.5 pt-2":"sm:flex-row sm:items-center gap-2 pt-3 md:pt-4 sm:gap-3"),children:[A&&!M&&s.jsxs(ze,{type:"button",variant:"outline",onClick:()=>{const E=(de,Me)=>{if(!de)return"";const he=de.trim(),He=Me.find(Je=>Je===he);if(He)return He;const $e=Me.find(Je=>Je.toLowerCase().trim()===he.toLowerCase());return $e||he},Y={finding_name:A.finding_name||"",finding_description:A.finding_description||"",audit_type:E(A.audit_type,ft),audit_type_other:A.audit_type_other||"",risk_type:E(A.risk_type,re),internal_control_element:E(A.internal_control_element,we),country:E(A.country,_e),audit_year:A.audit_year||"",audit_name:A.audit_name||"",audit_key:A.audit_key||"",risk_level:E(A.risk_level,pe),financial_impact:A.financial_impact?String(A.financial_impact):"",status:E(A.status,Qe),selectedAuditKey:A.audit_key||"",selectedAuditYear:A.audit_year||""};Lt(Y),dr({...Y}),z(!0),S(A)},className:F("bg-gradient-to-r from-purple-50 to-indigo-50 border-purple-300 text-purple-700 hover:from-purple-100 hover:to-indigo-100 hover:border-purple-400 hover:text-purple-800 font-medium shadow-sm",y?"w-full text-[9px] px-2 py-1 h-7":"text-xs md:text-sm px-3 md:px-4 py-2 md:py-2.5"),children:[s.jsx("svg",{className:F("mr-0.5",y?"w-2.5 h-2.5":"w-3 h-3 md:w-4 md:h-4 mr-1.5 md:mr-2"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),s.jsx(ze,{type:"button",variant:"ghost",onClick:()=>{if(M&&j){if(Pt)Lt({...Pt});else{const E=t.find(Y=>Y.id===j.id);E&&(Lt({finding_name:E.finding_name||"",finding_description:E.finding_description||"",audit_type:E.audit_type||"",audit_type_other:E.audit_type_other||"",risk_type:E.risk_type||"",internal_control_element:E.internal_control_element||"",country:E.country||"",audit_year:E.audit_year||"",audit_name:E.audit_name||"",audit_key:E.audit_key||"",risk_level:E.risk_level||"",financial_impact:E.financial_impact?String(E.financial_impact):"",status:E.status||"open",selectedAuditKey:E.audit_key||"",selectedAuditYear:E.audit_year||""}),O(E))}S(null),z(!1),dr(null)}else Ai()},className:F(y?"w-full text-[9px] px-2 py-1 h-7":"text-xs md:text-sm px-3 md:px-4 py-2 md:py-2.5"),children:A&&!M?"Close":j?"Cancel":"Close"}),!A&&!j&&(dt==null?void 0:dt.selectedAuditKey)&&s.jsx(ze,{type:"button",variant:"outline",onClick:async E=>{console.log(" Save and Add Another button clicked",{e:E,auditContext:dt}),E.preventDefault(),E.stopPropagation();try{await cl(void 0,!0)}catch(Y){console.error(" Error in Save and Add Another:",Y)}},className:F("whitespace-nowrap",y?"w-full text-[9px] px-2 py-1 h-7":"text-xs md:text-sm px-3 md:px-4 py-2 md:py-2.5"),children:"Save & Add Another"}),(j||!A)&&s.jsx(ze,{type:"submit",variant:"primary",onClick:E=>{console.log(" Create Finding button clicked",{type:E.currentTarget.type,editingFinding:j,viewingFinding:A})},disabled:j?!aa:!1,className:F("whitespace-nowrap",y?"w-full text-[9px] px-2 py-1 h-7":"text-xs md:text-sm px-3 md:px-4 py-2 md:py-2.5",j&&"bg-gradient-to-r from-purple-600 to-indigo-600 border-purple-600 text-white hover:from-purple-700 hover:to-indigo-700 hover:border-purple-700 font-medium shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-purple-600 disabled:hover:to-indigo-600"),children:j?s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Update"]}):"Create Finding"})]})]})]})]})}),Jt&&Mt&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 md:p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-[95vw] md:max-w-6xl w-full max-h-[95vh] md:max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Finding Actions"}),s.jsx("button",{onClick:Ei,className:"text-gray-400 hover:text-gray-500",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6",children:[!ot&&!yt&&!qt&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-base font-semibold text-gray-900",children:["Actions (",((mu=kt[Mt])==null?void 0:mu.length)||0,")"]}),s.jsxs(ze,{variant:"primary",onClick:()=>{en(null),on(!0),xn({action_description:"",due_date:"",audit_lead:"",action_responsible:"",action_responsible_email:"",action_responsible_vp:"",action_responsible_clevel:"",status:""}),ws({})},children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Action"]})]}),kt[Mt]&&kt[Mt].length>0?s.jsx("div",{className:"space-y-2",children:(gu=kt[Mt])==null?void 0:gu.map(E=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-sm transition-shadow",children:s.jsxs("div",{className:"flex items-center justify-between gap-[12.8px]",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("span",{className:"text-xs font-mono text-gray-500",children:E.action_id}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{type:"button",onClick:()=>gn(vt===E.id?null:E.id),className:"focus:outline-none",children:s.jsx(tt,{variant:Vs(E.status),className:"text-xs cursor-pointer hover:opacity-80",children:Wt(E.status)})}),vt===E.id&&s.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[140px] py-1",children:Array.from(new Set(Qe.filter(Y=>Y!=="overdue"&&Y.toLowerCase()!==E.status.toLowerCase()))).map(Y=>s.jsx("button",{type:"button",onClick:async()=>{var de,Me;try{await Ot.updateFindingAction(E.id,{action_description:E.action_description,due_date:E.due_date,audit_lead:E.audit_lead,action_responsible:E.action_responsible,action_responsible_email:E.action_responsible_email,action_responsible_vp:E.action_responsible_vp,action_responsible_clevel:E.action_responsible_clevel,status:Y}),await sr(Mt),A&&A.id===Mt&&await sr(A.id),gn(null),je({type:"success",message:"Action status updated successfully"})}catch(he){je({type:"error",message:((Me=(de=he==null?void 0:he.response)==null?void 0:de.data)==null?void 0:Me.error)||"Failed to update action status"})}},className:"w-full text-left px-3 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg flex items-center gap-2",children:s.jsx(tt,{variant:Vs(Y),className:"text-xs",children:Wt(Y)})},Y))})]})]}),s.jsx("div",{className:"text-sm text-gray-900 mb-2",children:uo(E.action_description,1)}),s.jsxs("div",{className:"flex items-center gap-[12.8px] text-[9.6px] text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{children:new Date(E.due_date).toLocaleDateString()})]}),E.audit_lead&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsx("span",{className:"truncate max-w-[150px]",children:(()=>{if(!E.audit_lead)return"-";const Y=Si.find(de=>{var Me,he;return((Me=de.email)==null?void 0:Me.toLowerCase().trim())===((he=E.audit_lead)==null?void 0:he.toLowerCase().trim())});return Y?Y.name:E.audit_lead})()})]}),E.action_responsible&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"truncate max-w-[150px]",children:(()=>{if(!E.action_responsible)return"-";const Y=Ci.find(de=>{var Me,he;return((Me=de.email)==null?void 0:Me.toLowerCase().trim())===((he=E.action_responsible)==null?void 0:he.toLowerCase().trim())});return Y?Y.name:E.action_responsible})()})]})]})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsx(ze,{variant:"ghost",size:"sm",className:"text-xs px-2 py-1",onClick:()=>co(Mt,E),children:"View"}),s.jsx(ze,{variant:"ghost",size:"sm",className:"text-xs px-2 py-1 text-red-600 hover:text-red-700",onClick:()=>{X(E.id),K(Mt),G(!0)},children:"Delete"})]})]})},E.id))}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:s.jsx("p",{children:'No actions found. Click "New Action" to create one.'})})]}),(ot||yt||qt)&&s.jsxs(Ie,{className:"p-6 border-2 border-dashed border-gray-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[(ot||yt)&&s.jsxs("button",{type:"button",onClick:()=>{tn(null),en(null),Rt(!1),on(!1)},className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),s.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-mono",children:ot?ot.action_id:yt?yt.action_id:"Create New Action"})]}),ot&&!ln&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ze,{variant:"outline",size:"sm",onClick:async()=>{var E,Y;if(!ae){it(!0);try{const de=await Ot.getActionHistory(ot.id);Be(de.data||[])}catch(de){je({type:"error",message:((Y=(E=de==null?void 0:de.response)==null?void 0:E.data)==null?void 0:Y.error)||"Failed to load history"})}finally{it(!1)}}ce(!ae)},className:"text-xs flex items-center gap-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),ae?"Hide":"View"," History"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{type:"button",onClick:()=>gn(vt===ot.id?null:ot.id),className:"focus:outline-none",children:s.jsx(tt,{variant:Vs(gt.status),className:"cursor-pointer hover:opacity-80",children:Wt(gt.status)})}),vt===ot.id&&s.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[140px] py-1",children:Array.from(new Set(Qe.filter(E=>E!=="overdue"&&E.toLowerCase()!==gt.status.toLowerCase()))).map(E=>s.jsx("button",{type:"button",onClick:async()=>{var Y,de;try{await Ot.updateFindingAction(ot.id,{action_description:gt.action_description,due_date:gt.due_date,audit_lead:gt.audit_lead,action_responsible:gt.action_responsible,action_responsible_email:gt.action_responsible_email,action_responsible_vp:gt.action_responsible_vp,action_responsible_clevel:gt.action_responsible_clevel,status:E});const Me=await Ot.getFindingAction(ot.id);xn(he=>({...he,status:Me.status})),tn(Me),await sr(Mt),await li(Mt),A&&A.id===Mt&&await sr(A.id),gn(null),je({type:"success",message:"Action status updated successfully"})}catch(Me){je({type:"error",message:((de=(Y=Me==null?void 0:Me.response)==null?void 0:Y.data)==null?void 0:de.error)||"Failed to update action status"})}},className:"w-full text-left px-3 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg flex items-center gap-2",children:s.jsx(tt,{variant:Vs(E),className:"text-xs",children:Wt(E)})},E))})]})]})]}),ot&&!ln&&Mt&&s.jsx("div",{className:"mb-4 p-2 bg-gray-50 border border-gray-200 rounded text-xs",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-600 font-medium",children:"Related Finding:"}),s.jsx("button",{onClick:()=>{const E=t.find(Y=>Y.id===Mt);E&&(Ei(),Yr(E))},className:"text-purple-600 hover:text-purple-800 hover:underline font-mono",children:((xu=t.find(E=>E.id===Mt))==null?void 0:xu.finding_id)||`Finding #${Mt}`})]})})}),s.jsxs("form",{onSubmit:lp,className:"space-y-4",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[((ot==null?void 0:ot.audit_name)||(yt==null?void 0:yt.audit_name)||((Nc=t.find(E=>E.id===Mt))==null?void 0:Nc.audit_name))&&s.jsxs("div",{className:"w-full mb-2 pb-2 border-b border-purple-200",children:[s.jsx("span",{className:"text-xs font-medium text-gray-600 mr-2",children:"Audit:"}),s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:(ot==null?void 0:ot.audit_name)||(yt==null?void 0:yt.audit_name)||((yu=t.find(E=>E.id===Mt))==null?void 0:yu.audit_name)||""}),((ot==null?void 0:ot.audit_year)||(yt==null?void 0:yt.audit_year)||((vu=t.find(E=>E.id===Mt))==null?void 0:vu.audit_year))&&s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",(ot==null?void 0:ot.audit_year)||(yt==null?void 0:yt.audit_year)||((bu=t.find(E=>E.id===Mt))==null?void 0:bu.audit_year)||"",")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Lead:"}),ot&&!ln?s.jsx(tt,{variant:"info",className:"text-xs",children:(()=>{if(!gt.audit_lead)return"-";const E=Si.find(Y=>{var de;return((de=Y.email)==null?void 0:de.toLowerCase().trim())===gt.audit_lead.toLowerCase().trim()});return E?E.name:gt.audit_lead})()}):s.jsx(Yt,{value:gt.audit_lead||"",onChange:E=>xn(Y=>({...Y,audit_lead:E.target.value})),options:(()=>{const E=Si.map(Y=>({value:Y.email,label:`${Y.name} (${Y.email})`}));if(gt.audit_lead){const Y=E.findIndex(de=>de.value.toLowerCase().trim()===gt.audit_lead.toLowerCase().trim());if(Y>0&&E[Y]){const de=E[Y];E.splice(Y,1),E.unshift(de)}}return E})(),placeholder:gt.audit_lead?void 0:"Select...",required:!0,error:sl.audit_lead,disabled:!!(ot&&!ln),className:"min-w-[200px]"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Responsible:"}),ot&&!ln?s.jsx(tt,{variant:"success",className:"text-xs",children:(()=>{if(!gt.action_responsible)return"-";const E=Ci.find(Y=>{var de;return((de=Y.email)==null?void 0:de.toLowerCase().trim())===gt.action_responsible.toLowerCase().trim()});return E?E.name:gt.action_responsible})()}):s.jsx(Yt,{value:gt.action_responsible||"",onChange:async E=>{if(ot&&!ln)return;const Y=E.target.value;xn(de=>({...de,action_responsible:Y,action_responsible_email:Y}));try{const de=await Ot.getUserHierarchy(Y);xn(Me=>({...Me,action_responsible:Y,action_responsible_email:Y,action_responsible_vp:de.vp_email||"",action_responsible_clevel:de.c_level_email||""}))}catch{xn(Me=>({...Me,action_responsible_vp:"",action_responsible_clevel:""}))}},options:(()=>{const E=Ci.map(Y=>({value:Y.email,label:`${Y.name} (${Y.email})`}));if(gt.action_responsible){const Y=E.findIndex(de=>de.value.toLowerCase().trim()===gt.action_responsible.toLowerCase().trim());if(Y>0&&E[Y]){const de=E[Y];E.splice(Y,1),E.unshift(de)}}return E})(),placeholder:gt.action_responsible?void 0:"Select...",required:!0,error:sl.action_responsible,disabled:!!(ot&&!ln),className:"min-w-[200px]"})]})]})}),s.jsx(Gg,{label:"Action Description",value:gt.action_description||"",onChange:E=>xn(Y=>({...Y,action_description:E})),rows:3,required:!0,error:sl.action_description,disabled:!!(ot&&!ln),fullWidth:!0}),s.jsx(Tn,{label:"Due Date",type:"date",value:gt.due_date,onChange:E=>xn(Y=>({...Y,due_date:E.target.value})),required:!0,error:sl.due_date,disabled:!!(ot&&!ln),fullWidth:!0}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-[12.8px]",children:[s.jsx(Tn,{label:"Action Responsible Email",value:gt.action_responsible_email||"",disabled:!0,fullWidth:!0}),s.jsx(Tn,{label:"Action Responsible VP",value:gt.action_responsible_vp||"",disabled:!0,fullWidth:!0}),s.jsx(Tn,{label:"Action Responsible C-Level",value:gt.action_responsible_clevel||"",disabled:!0,fullWidth:!0})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[ot&&!ln&&s.jsxs(ze,{type:"button",variant:"outline",onClick:()=>{let E=ot.due_date||"";if(E&&typeof E=="string"){const Y=new Date(E);if(!isNaN(Y.getTime())){const de=Y.toISOString().split("T")[0];de&&(E=de)}}xn({action_description:ot.action_description||"",due_date:E,audit_lead:ot.audit_lead||"",action_responsible:ot.action_responsible||"",action_responsible_email:ot.action_responsible_email||"",action_responsible_vp:ot.action_responsible_vp||"",action_responsible_clevel:ot.action_responsible_clevel||"",status:ot.status||"open"}),Rt(!0),en(ot),tn(null)},className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-purple-300 text-purple-700 hover:from-purple-100 hover:to-indigo-100 hover:border-purple-400 hover:text-purple-800 font-medium shadow-sm",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),ot&&!ln&&s.jsxs(ze,{type:"button",variant:"danger",onClick:()=>{X(ot.id),K(Mt),G(!0)},children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]}),s.jsx(ze,{type:"button",variant:"ghost",onClick:()=>{var E;if(ln&&yt){const Y=(E=kt[Mt])==null?void 0:E.find(de=>de.id===yt.id);if(Y){let de=Y.due_date||"";if(de&&typeof de=="string"){const Me=new Date(de);if(!isNaN(Me.getTime())){const he=Me.toISOString().split("T")[0];he&&(de=he)}}xn({action_description:Y.action_description||"",due_date:de,audit_lead:Y.audit_lead||"",action_responsible:Y.action_responsible||"",action_responsible_email:Y.action_responsible_email||"",action_responsible_vp:Y.action_responsible_vp||"",action_responsible_clevel:Y.action_responsible_clevel||"",status:Y.status||"open"})}tn(Y||yt),en(null),Rt(!1)}else Ei()},children:ot&&!ln?"Close":"Cancel"}),!ot&&s.jsxs(ze,{type:"submit",variant:"primary",children:[yt?"Update":"Create"," Action"]})]})]}),ot&&!ln&&ae&&s.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Change History"}),Ue?s.jsx("div",{className:"text-center py-8",children:s.jsx(Ct,{size:"md"})}):ye.length>0?s.jsx("div",{className:"space-y-3",children:ye.map(E=>s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tt,{variant:E.event_type==="CREATE"?"success":E.event_type==="DELETE"?"danger":"info",children:E.event_type}),E.field_name&&s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Field: ",E.field_name]})]}),s.jsx("span",{className:"text-xs text-gray-500",children:new Date(E.changed_at).toLocaleString("en-US",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"})})]}),E.field_name&&s.jsxs("div",{className:"grid grid-cols-2 gap-[12.8px] mt-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 font-medium",children:"Old Value:"}),s.jsx("div",{className:"mt-1 px-2 py-1 bg-red-50 border border-red-200 rounded text-gray-900",children:(()=>{if(E.field_name==="due_date"&&E.old_value)try{const Y=new Date(E.old_value);if(!isNaN(Y.getTime()))return Y.toISOString().split("T")[0]}catch{}return E.old_value||"-"})()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 font-medium",children:"New Value:"}),s.jsx("div",{className:"mt-1 px-2 py-1 bg-green-50 border border-green-200 rounded text-gray-900",children:(()=>{if(E.field_name==="due_date"&&E.new_value)try{const Y=new Date(E.new_value);if(!isNaN(Y.getTime()))return Y.toISOString().split("T")[0]}catch{}return E.new_value||"-"})()})]})]}),s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Changed by: ",E.changed_by]})]},E.id))}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No history available"})]})]}),!1]})]})}),I&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 md:p-4",children:s.jsxs(Ie,{className:"p-4 md:p-6 max-w-md w-full",children:[s.jsx("h3",{className:"text-sm md:text-base font-semibold text-gray-900 mb-2",children:"Delete Audit Finding"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this audit finding? This action cannot be undone."}),s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.jsx(ze,{variant:"ghost",onClick:()=>{D(!1),q(null)},children:"Cancel"}),s.jsx(ze,{variant:"danger",onClick:oo,children:"Delete"})]})]})}),H&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 md:p-4",children:s.jsxs(Ie,{className:"p-4 md:p-6 max-w-md w-full",children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 mb-2",children:"Delete Finding Action"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this action? This action cannot be undone."}),s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.jsx(ze,{variant:"ghost",onClick:()=>{G(!1),X(null),K(null)},children:"Cancel"}),s.jsx(ze,{variant:"danger",onClick:cp,children:"Delete"})]})]})}),Is&&!ai&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{br(!1),ur([])},onKeyDown:E=>{E.key==="Escape"&&(br(!1),ur([]))},tabIndex:-1,children:s.jsxs(Ie,{className:"p-6 max-w-md w-full mx-4",onClick:E=>E.stopPropagation(),children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Finding"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Choose how you would like to add findings:"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(ze,{variant:"primary",onClick:()=>{jn("single")},className:"w-full justify-start",children:[s.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add from Here"]}),s.jsxs(ze,{variant:"outline",onClick:()=>{jn("bulk")},className:"w-full justify-start",children:[s.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Bulk Add from Excel/CSV"]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx(ze,{variant:"ghost",onClick:()=>{br(!1),ur([])},children:"Cancel"})})]})}),Is&&ai==="single"&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",tabIndex:-1,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-[95vw] md:max-w-[90vw] w-full max-h-[95vh] md:max-h-[98vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 z-10",children:[s.jsxs("div",{className:"px-4 md:px-6 py-3 md:py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add Finding"}),s.jsx("button",{onClick:()=>{br(!1),jn(null),ur([]),Sn(""),wr(""),Jn(""),jr({finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",risk_level:"",financial_impact:"",status:""})},className:"text-gray-400 hover:text-gray-500",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),qs.length>0&&s.jsxs("div",{className:"px-6 pb-4 bg-green-50 border-t border-green-200",children:[s.jsxs("h3",{className:"text-sm font-semibold text-green-800 mb-2",children:["Successfully Created (",qs.length,")"]}),s.jsx("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:qs.map(E=>s.jsxs("div",{className:"text-xs text-green-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.jsxs("span",{className:"truncate",children:[E.finding_id,": ",E.finding_name]})]},E.id))})]})]}),s.jsx("div",{className:"p-8",children:s.jsxs("form",{onSubmit:async E=>{var de,Me,he,He,$e;E.preventDefault();const Y={};if((de=bt.finding_name)!=null&&de.trim()||(Y.finding_name="Required"),(Me=bt.finding_description)!=null&&Me.trim()||(Y.finding_description="Required"),Zn||(Y.auditYear="Required"),In||(Y.auditKey="Required"),bt.audit_type||(Y.audit_type="Required"),bt.audit_type==="Other"&&!((he=bt.audit_type_other)!=null&&he.trim())&&(Y.audit_type_other="Required"),bt.risk_type||(Y.risk_type="Required"),bt.internal_control_element||(Y.internal_control_element="Required"),bt.country||(Y.country="Required"),bt.risk_level||(Y.risk_level="Required"),Yn(Y),Object.keys(Y).length>0){je({type:"error",message:"Please fill in all required fields"});return}try{const Je={finding_name:bt.finding_name,finding_description:bt.finding_description,audit_type:bt.audit_type,audit_type_other:bt.audit_type==="Other"?bt.audit_type_other:void 0,risk_type:bt.risk_type,internal_control_element:bt.internal_control_element,country:bt.country,audit_year:Zn,audit_name:oi,audit_key:In,risk_level:bt.risk_level,financial_impact:bt.financial_impact?parseFloat(bt.financial_impact):void 0,status:"open"},Ye=await Ot.createAuditFinding(Je),rt=Ye.data||Ye;ur(pt=>[...pt,rt]),je({type:"success",message:"Finding created successfully"}),br(!1),jn(null),ur([]),Sn(""),wr(""),Jn(""),jr({finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",risk_level:"",financial_impact:"",status:""}),Yn({}),await ci()}catch(Je){je({type:"error",message:(($e=(He=Je==null?void 0:Je.response)==null?void 0:He.data)==null?void 0:$e.error)||"Failed to create finding"})}},children:[s.jsx("div",{className:"mb-6",children:s.jsx(Yt,{label:"Audit Year *",value:Zn,onChange:E=>{Sn(E.target.value),wr(""),Jn(""),Yn(Y=>({...Y,auditYear:"",auditKey:""}))},options:Ne.map(E=>({value:E,label:E})),placeholder:"Select audit year...",required:!0,error:Ir.auditYear,fullWidth:!0})}),s.jsx("div",{className:"mb-6",children:s.jsx(Yt,{label:"Audit *",value:In,onChange:E=>{const Y=et.find(de=>de.key===E.target.value);wr(E.target.value),Jn((Y==null?void 0:Y.summary)||""),Yn(de=>({...de,auditKey:""}))},options:Zn?et.filter(E=>E.auditYear===Zn).map(E=>({value:E.key,label:E.summary})):[],placeholder:"Select audit...",required:!0,error:Ir.auditKey,disabled:!Zn,fullWidth:!0})}),s.jsx("div",{className:`bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-6 ${In?"":"opacity-50"}`,children:s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[oi&&s.jsxs("div",{className:"w-full mb-2 pb-2 border-b border-blue-200",children:[s.jsx("span",{className:"text-xs font-medium text-gray-600 mr-2",children:"Audit:"}),s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:oi}),Zn&&s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",Zn,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Type: ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Yt,{value:bt.audit_type,onChange:E=>{jr(Y=>({...Y,audit_type:E.target.value,audit_type_other:""})),Yn(Y=>({...Y,audit_type:"",audit_type_other:""}))},options:ft.map(E=>({value:E,label:Wt(E)})),placeholder:"Select...",required:!0,error:Ir.audit_type,className:"min-w-[140px]"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Risk: ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Yt,{value:bt.risk_type,onChange:E=>{jr(Y=>({...Y,risk_type:E.target.value})),Yn(Y=>({...Y,risk_type:""}))},options:re.map(E=>({value:E,label:Wt(E)})),placeholder:"Select...",required:!0,error:Ir.risk_type,disabled:!In,className:"min-w-[140px]"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Level: ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Yt,{value:bt.risk_level,onChange:E=>{jr(Y=>({...Y,risk_level:E.target.value})),Yn(Y=>({...Y,risk_level:""}))},options:pe.map(E=>({value:E,label:Wt(E)})),placeholder:"Select...",required:!0,error:Ir.risk_level,disabled:!In,className:"min-w-[120px]"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Control: ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Yt,{value:bt.internal_control_element,onChange:E=>{jr(Y=>({...Y,internal_control_element:E.target.value})),Yn(Y=>({...Y,internal_control_element:""}))},options:we.map(E=>({value:E,label:Wt(E)})),placeholder:"Select...",required:!0,error:Ir.internal_control_element,disabled:!In,className:"min-w-[160px]"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Country: ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Yt,{value:bt.country,onChange:E=>{jr(Y=>({...Y,country:E.target.value})),Yn(Y=>({...Y,country:""}))},options:_e.map(E=>({value:E,label:Wt(E)})),placeholder:"Select...",required:!0,error:Ir.country,disabled:!In,className:"min-w-[120px]"})]})]})}),bt.audit_type==="Other"&&s.jsx(Tn,{label:"Audit Type (Other) *",value:bt.audit_type_other,onChange:E=>{jr(Y=>({...Y,audit_type_other:E.target.value})),Yn(Y=>({...Y,audit_type_other:""}))},required:!0,error:Ir.audit_type_other,disabled:!In,fullWidth:!0}),s.jsx("div",{className:"mb-6",children:s.jsx(Tn,{label:"Finding Name",value:bt.finding_name,onChange:E=>{jr(Y=>({...Y,finding_name:E.target.value})),Yn(Y=>({...Y,finding_name:""}))},required:!0,error:Ir.finding_name,disabled:!In,fullWidth:!0})}),s.jsx("div",{className:"mb-10",children:s.jsx(Gg,{label:"Finding Description",value:bt.finding_description||"",onChange:E=>{jr(Y=>({...Y,finding_description:E})),Yn(Y=>({...Y,finding_description:""}))},rows:4,required:!0,error:Ir.finding_description,disabled:!In,fullWidth:!0})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Financial Impact ()"}),s.jsx(Tn,{type:"text",inputMode:"decimal",value:bt.financial_impact||"",onChange:E=>{const de=E.target.value.replace(/[^\d.]/g,""),Me=de.split(".");let he=de;Me.length>2&&(he=Me[0]+"."+Me.slice(1).join("")),jr(He=>({...He,financial_impact:he}))},placeholder:"0.00",disabled:!In,fullWidth:!0})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 mt-6",children:[s.jsx(ze,{type:"button",variant:"ghost",onClick:()=>{br(!1),jn(null),ur([]),Sn(""),wr(""),Jn("")},children:"Cancel"}),s.jsx(ze,{type:"button",variant:"outline",onClick:async E=>{var de,Me,he,He,$e;E.preventDefault();const Y={};if((de=bt.finding_name)!=null&&de.trim()||(Y.finding_name="Required"),(Me=bt.finding_description)!=null&&Me.trim()||(Y.finding_description="Required"),Zn||(Y.auditYear="Required"),In||(Y.auditKey="Required"),bt.audit_type||(Y.audit_type="Required"),bt.audit_type==="Other"&&!((he=bt.audit_type_other)!=null&&he.trim())&&(Y.audit_type_other="Required"),bt.risk_type||(Y.risk_type="Required"),bt.internal_control_element||(Y.internal_control_element="Required"),bt.country||(Y.country="Required"),bt.risk_level||(Y.risk_level="Required"),Yn(Y),Object.keys(Y).length>0){je({type:"error",message:"Please fill in all required fields"});return}try{const Je={finding_name:bt.finding_name,finding_description:bt.finding_description,audit_type:bt.audit_type,audit_type_other:bt.audit_type==="Other"?bt.audit_type_other:void 0,risk_type:bt.risk_type,internal_control_element:bt.internal_control_element,country:bt.country,audit_year:Zn,audit_name:oi,audit_key:In,risk_level:bt.risk_level,financial_impact:bt.financial_impact?parseFloat(bt.financial_impact):void 0,status:bt.status},Ye=await Ot.createAuditFinding(Je),rt=Ye.data||Ye;ur(pt=>[...pt,rt]),je({type:"success",message:"Finding created successfully"}),jr({finding_name:"",finding_description:"",audit_type:"",audit_type_other:"",risk_type:"",internal_control_element:"",country:"",risk_level:"",financial_impact:"",status:""}),Yn({}),await ci()}catch(Je){je({type:"error",message:(($e=(He=Je==null?void 0:Je.response)==null?void 0:He.data)==null?void 0:$e.error)||"Failed to create finding"})}},children:"Save & Add Another"}),s.jsx(ze,{type:"submit",variant:"primary",children:"Save and Close"})]})]})})]})}),Is&&ai==="bulk"&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onKeyDown:E=>{E.key==="Escape"&&(br(!1),jn(null),be(null),le([]),me([]),Sn(""),wr(""),Jn(""))},tabIndex:-1,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-[95vw] md:max-w-4xl w-full max-h-[95vh] md:max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg md:text-2xl font-bold text-gray-900",children:"Bulk Add Findings from Excel/CSV"}),s.jsx("button",{onClick:()=>{br(!1),jn(null),be(null),le([]),me([]),Sn(""),wr(""),Jn("")},className:"text-gray-400 hover:text-gray-500",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 space-y-4",children:[s.jsx(Yt,{label:"Audit Year",value:Zn,onChange:E=>{Sn(E.target.value),wr(""),Jn("")},options:Ne.map(E=>({value:E,label:E})),required:!0,fullWidth:!0}),Zn&&s.jsx(Yt,{label:"Audit",value:In,onChange:E=>{const Y=et.find(de=>de.key===E.target.value);wr(E.target.value),Jn((Y==null?void 0:Y.summary)||"")},options:et.filter(E=>E.auditYear===Zn).map(E=>({value:E.key,label:E.summary})),required:!0,fullWidth:!0})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Upload File (Excel .xlsx or CSV)"}),s.jsxs(ze,{variant:"ghost",size:"sm",onClick:()=>{const de=[["Finding Name","Finding Description","Audit Type","Audit Type Other","Risk Type","Internal Control Element","Country","Risk Level","Financial Impact"],["Sample Finding","Sample Description","Internal","","Operational","Control Environment","Turkey","Medium","1000.00"]].map($e=>$e.join(",")).join(`
`),Me=new Blob([de],{type:"text/csv"}),he=window.URL.createObjectURL(Me),He=document.createElement("a");He.href=he,He.download="finding_template.csv",He.click(),window.URL.revokeObjectURL(he)},className:"text-xs text-gray-600 hover:text-gray-900",children:[s.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Template"]})]}),s.jsx("input",{type:"file",accept:".xlsx,.csv",onChange:E=>{var de;const Y=(de=E.target.files)==null?void 0:de[0];if(Y&&(be(Y),le([]),me([]),Y.name.endsWith(".csv"))){const Me=new FileReader;Me.onload=he=>{var Je,Ye;const $e=((Je=he.target)==null?void 0:Je.result).split(`
`).filter(rt=>rt.trim());if($e.length>0){const rt=((Ye=$e[0])==null?void 0:Ye.split(",").map(nn=>nn.trim()))||[],pt=$e.slice(1,6).map(nn=>{const _r=nn.split(",").map(fo=>fo.trim()),Sc={};return rt.forEach((fo,up)=>{Sc[fo]=_r[up]||""}),Sc});le(pt)}},Me.readAsText(Y)}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"})]}),Ce.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Preview (first 5 rows):"}),s.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsx("tr",{children:Object.keys(Ce[0]||{}).map(E=>s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:E},E))})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ce.map((E,Y)=>s.jsx("tr",{children:Object.values(E).map((de,Me)=>s.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:de||"-"},Me))},Y))})]})})]}),ke.length>0&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded",children:[s.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-2",children:"Errors:"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-red-700 space-y-1",children:ke.map((E,Y)=>s.jsx("li",{children:E},Y))})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[s.jsx(ze,{variant:"ghost",onClick:()=>{br(!1),jn(null),be(null),le([]),me([]),Sn(""),wr(""),Jn("")},children:"Cancel"}),s.jsx(ze,{variant:"primary",onClick:async()=>{var E,Y;if(!oe||!Zn||!In){je({type:"error",message:"Please select audit year, audit, and upload a file"});return}wt(!0),me([]);try{const de=new FormData;de.append("file",oe),de.append("audit_year",Zn),de.append("audit_key",In),de.append("audit_name",oi);const Me=await Ot.bulkUploadFindings(de);if(Me&&typeof Me=="object"){const he=Me;he.createdCount>0?(je({type:"success",message:`Successfully created ${he.createdCount} finding${he.createdCount>1?"s":""}`}),br(!1),jn(null),be(null),le([]),me([]),Sn(""),wr(""),Jn(""),await ci(),he.errors&&he.errors.length>0&&(je({type:"warning",message:`${he.errors.length} row${he.errors.length>1?"s":""} had errors. Check console for details.`}),console.warn("Bulk upload errors:",he.errors))):(je({type:"error",message:"No findings were created. Please check the file format and try again."}),he.errors&&he.errors.length>0&&me(he.errors))}else je({type:"error",message:"Failed to upload findings"})}catch(de){je({type:"error",message:((Y=(E=de==null?void 0:de.response)==null?void 0:E.data)==null?void 0:Y.error)||"Failed to upload findings"})}finally{wt(!1)}},disabled:Ge||!oe||!Zn||!In,children:Ge?"Uploading...":"Upload & Add Findings"})]})]})]})}),W.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>R({show:!1,message:"",incompleteActions:[],actionLabel:"Incomplete actions:"}),children:s.jsx(Ie,{className:"p-6 max-w-lg w-full mx-4",onClick:E=>E.stopPropagation(),children:s.jsxs("div",{className:"flex items-start gap-[12.8px]",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Cannot Change Status"}),s.jsx("p",{className:"text-gray-700 mb-3",children:W.message.split(`

`)[0]}),W.incompleteActions&&W.incompleteActions.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:W.actionLabel||"Incomplete actions:"}),s.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600 ml-2",children:W.incompleteActions.map((E,Y)=>s.jsx("li",{children:E},Y))})]}),s.jsx("div",{className:"flex items-center justify-end",children:s.jsx(ze,{variant:"primary",onClick:()=>R({show:!1,message:"",incompleteActions:[],actionLabel:"Incomplete actions:"}),className:"min-w-[100px]",children:"OK"})})]})]})})})]})},bz=()=>s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 via-white to-indigo-50 p-4",children:s.jsxs("div",{className:"text-center space-y-6 max-w-2xl",children:[s.jsxs("div",{className:"relative inline-block",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400 to-indigo-400 rounded-full blur-2xl opacity-30 animate-pulse"}),s.jsx("div",{className:"relative bg-white rounded-full p-8 shadow-2xl border border-purple-100",children:s.jsx(VD,{className:"w-24 h-24 text-purple-600 animate-bounce",strokeWidth:1.5})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-purple-600 via-indigo-600 to-purple-700 bg-clip-text text-transparent",children:"Audit Universe"}),s.jsx("div",{className:"h-1 w-32 mx-auto bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full"})]}),s.jsx("p",{className:"text-[16px] font-medium text-gray-600",children:"Under Construction"}),s.jsx("p",{className:"text-base text-gray-500 leading-relaxed max-w-lg mx-auto",children:"We're building something amazing! This page is currently under development and will be available soon."}),s.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-purple-100 text-purple-700 rounded-full font-medium shadow-sm",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-ping"}),s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full absolute"}),s.jsx("span",{className:"ml-1",children:"Coming Soon"})]}),s.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200",children:s.jsx("p",{className:"text-sm text-gray-400",children:"Admin Access Only"})})]})}),wz=()=>{const t=cc();return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-700 to-purple-900 flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-9xl font-bold text-white mb-4",children:"404"}),s.jsx("h2",{className:"text-[24px] font-semibold text-white mb-4",children:"Page Not Found"}),s.jsx("p",{className:"text-purple-200 mb-8 max-w-md mx-auto",children:"The page you're looking for doesn't exist or has been moved."}),s.jsxs("div",{className:"flex gap-[12.8px] justify-center",children:[s.jsxs(ze,{onClick:()=>t(-1),variant:"outline",className:"text-white border-white hover:bg-white/10",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Go Back"]}),s.jsx(ze,{onClick:()=>t("/"),variant:"primary",className:"bg-white text-purple-600 hover:bg-gray-100",children:"Go to Dashboard"})]})]})})},jz=()=>{const t=cc();return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs(Ie,{className:"max-w-md w-full text-center",variant:"elevated",children:[s.jsx("svg",{className:"mx-auto h-16 w-16 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),s.jsx("h1",{className:"mt-4 text-[16px] font-bold text-gray-900",children:"Access Denied"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"You don't have permission to access this page. Please contact your administrator if you believe this is an error."}),s.jsxs("div",{className:"mt-8 flex gap-[12.8px] justify-center",children:[s.jsx(ze,{onClick:()=>t(-1),variant:"outline",children:"Go Back"}),s.jsx(ze,{onClick:()=>t("/"),variant:"primary",children:"Go to Dashboard"})]})]})})},_z=()=>{const{checkAuth:t,isLoading:e}=Vr();return L.useEffect(()=>{t()},[t]),e?s.jsx(Ct,{fullScreen:!0,size:"xl",text:"Loading application..."}):s.jsx(rA,{children:s.jsx(Z3,{children:s.jsx(r3,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsxs(XC,{children:[s.jsx(Sr,{path:"/login",element:s.jsx(AA,{})}),s.jsx(Sr,{path:"/unauthorized",element:s.jsx(jz,{})}),s.jsxs(Sr,{path:"/",element:s.jsx(CA,{}),children:[s.jsx(Sr,{index:!0,element:s.jsx(Es,{requiredRoles:["admin","team","team_manager","ceo"],children:s.jsx(C7,{})})}),s.jsx(Sr,{path:"tasks",element:s.jsx(Es,{requiredRoles:["admin","team","team_manager"],children:s.jsx(E7,{})})}),s.jsx(Sr,{path:"my-actions",element:s.jsx(Es,{requiredRoles:["admin","team","team_manager"],children:s.jsx(M7,{})})}),s.jsx(Sr,{path:"department-actions",element:s.jsx(Es,{requiredRoles:["admin","department_director","action_operator"],children:s.jsx(D7,{})})}),s.jsx(Sr,{path:"clevel-actions",element:s.jsx(Es,{requiredRoles:["admin","top_management"],children:s.jsx(P7,{})})}),s.jsx(Sr,{path:"all-findings-actions",element:s.jsx(Es,{requiredRoles:["admin","team","team_manager"],children:s.jsx(X7,{})})}),s.jsx(Sr,{path:"audit-maturity",element:s.jsx(Es,{requiredRoles:["admin"],children:s.jsx(Q7,{})})}),s.jsx(Sr,{path:"annual-audit-plan",element:s.jsx(Es,{requiredRoles:["admin"],children:s.jsx(Z9,{})})}),s.jsx(Sr,{path:"access-management",element:s.jsx(Es,{requiredRoles:["admin"],children:s.jsx(O7,{})})}),s.jsx(Sr,{path:"risk-management",element:s.jsx(Es,{requiredRoles:["admin"],children:s.jsx(L7,{})})}),s.jsx(Sr,{path:"audit-findings",element:s.jsx(Es,{requiredRoles:["admin"],children:s.jsx(vz,{})})}),s.jsx(Sr,{path:"audit-universe",element:s.jsx(Es,{requiredRoles:["admin"],children:s.jsx(bz,{})})})]}),s.jsx(Sr,{path:"*",element:s.jsx(wz,{})})]})})})})};$a.register(uh,fh,zl,Xi,Bl,To,xd,EN,LN,CN,NN);tC.createRoot(document.getElementById("root")).render(s.jsx(jt.StrictMode,{children:s.jsx(_z,{})}));
